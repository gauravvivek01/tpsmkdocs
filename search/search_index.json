{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Welcome to the Blackbox Embedded Documentation Repository","text":"<p>This site gathers the documentation for the Blackbox Buildsystem and its supporting areas.</p>"},{"location":"#areas","title":"Areas","text":"<ul> <li><code>Architecture/Design</code> - Architecture Template Documents, Design Documents and Architectural Impact Documents.</li> <li><code>Developer Quick Start</code> - Simple guide to get up and running on a Dev Virtual Machine.</li> <li><code>Development</code> - Detailed guide on Blackbox's Build System and Code structure.</li> <li><code>Infrastructure</code> - Details on VM creation, Nightly Builds and Code Revision System.</li> <li><code>Automation</code> - Details on Embedded Automation Test System.</li> <li><code>Features</code> - Feature proposals based on Provisional Information from Marketing.</li> <li><code>Process</code> - Documents relating to more general processes and procedures.</li> <li><code>Release Notes</code> - Release notes for Development Releases to System Test.</li> </ul>"},{"location":"overview/","title":"Blackbox Embedded Documentation Reposistory","text":"<p>Here is some text that we can read with our eyes</p>"},{"location":"overview/#project-layout","title":"Project layout","text":"<pre><code>mkdocs.yml    # The configuration file.\ndocs/\n    index.md  # The documentation homepage.\n    ...       # Other markdown pages, images and other files.\n</code></pre>"},{"location":"Infrastructure/Upgrade_USBIP/","title":"Release process for USBIP","text":"<p>This document describes the board types and file locations for the ASICS Awsudcip USBIP and the process for committing updates to the build when a new version of the USBIP is released.</p> <p>The USBIP refers to the FPGA based USB implementation which replaces the net2272 USB chip. Depending on the board, this USBIP may be integrated into the the standard FPGA system.hdf or it may be build into a separate image (artix_image.bin) for programming into an ARTIX FPGA chip during boot-up.</p>"},{"location":"Infrastructure/Upgrade_USBIP/#release-considerations","title":"Release considerations","text":"<p>Depending on the scope of the USBIP changes (changes to the standalone Artix binaries only, or changes requiring new Integrated FPGA images to be built), different release update strategies may be chosen.</p>"},{"location":"Infrastructure/Upgrade_USBIP/#artix-only-releases","title":"Artix-only releases","text":"<p>If a USBIP release only targets boards containing an ARTIX (and not the integrated FPGA boards), then a release of the ARTIX binary files alone may be appropriate.</p> <p>There are two variants of the ARTIX binary files; One for the Emerald 2K boards (located in \"(buildroot)/boards/blackbox/emerald2k/encoder/artix_image/artix_fpga.bin\") and one for Emerald 4KR2 boards (located in \"../boot/hdf/artix_fpga.bin\").</p> <p>The most recent ARTIX binary files from the FPGA team can be checked and then copied from the FPGA release folders with the commands:</p> Do a dry run of the planned copy to avoid surprises<pre><code># In the buildroot directory (e.g. /home/developer/Buildroot_emerald2k_encoder/buildroot-2017.02.4)\n./run copy-fpga-release --dry-run --devices ARTIX2K ARTIX4K\n</code></pre> Copy the files after verifying the dry run<pre><code># In the buildroot directory (e.g. /home/developer/Buildroot_emerald2k_encoder/buildroot-2017.02.4)\n./run copy-fpga-release --devices ARTIX2K ARTIX4K\n</code></pre> Verify the files are as expected and the metadata is consistent<pre><code># In the buildroot directory (e.g. /home/developer/Buildroot_emerald2k_encoder/buildroot-2017.02.4)\n./run copy-fpga-release --status --devices ARTIX2K ARTIX4K\n</code></pre> <p>After verifying the files are as expected (using the copy-fpga-release tool), running a build to include the new binaries, and upgrading and checking the relevant boards, the updated Artix binaries can be committed to svn directly from buildroot with <code>svn commit</code> (i.e. without using arcanist). They are opaque binary files and can't be reviewed. A commit message with the release version and/or BUG number is recommended.</p>"},{"location":"Infrastructure/Upgrade_USBIP/#integrated-fpga-releases","title":"Integrated FPGA Releases","text":"<p>If a USBIP release targets both the ARTIX binaries and the integrated FPGA binaries, then it is usual to update the system.hdf and ARTIX binary files on all boards to the latest released FPGA version.</p> <p>The current buildroot version and the FPGA versions released by the FPGA team can be examined with the copy-fpga-release tool below. The most recent versions from the FPGA team can be copied to buildroot with the copy-fpga-release tool also.</p> Verify the files are as expected and the metadata is consistent<pre><code>./run copy-fpga-release --status\n</code></pre> Do a dry run to avoid surprises<pre><code>./run copy-fpga-release --dry-run\n</code></pre> Copy the files for all devices (defaults to all boards) from FPGA release folders to buildroot<pre><code>./run copy-fpga-release\n</code></pre> <p>After verifying the files are as expected (using the copy-fpga-release tool), running a build to include the new binaries, and upgrading and checking the relevant boards; the updated system.hdf binaries, revision files and Artix binaries can be committed to svn directly from buildroot with <code>svn commit</code> (i.e. without using arcanist). The hdf and Artix files are opaque binary files and can't be reviewed. A commit message with the release version and/or BUG number is recommended.</p>"},{"location":"Infrastructure/Upgrade_USBIP/#boards-and-usbip-types","title":"Boards and USBIP Types","text":"<p>The following boards have the USBIP, either integrated or as an add-on file (June 2023):</p> Board Short name Artix bin file Integrated into FPGA Emerald PE, DisplayPort, TX, Dual head TX_PE_DP_2H \u2713     2K Emerald PE, DisplayPort, TX, Single head TX_PE_DP_1H \u2713     2K Emerald SE, DisplayPort, TX, Dual head TX_SE_DP_2H \u2713     2K Emerald SE, DisplayPort, TX, Single head TX_SE_DP_1H \u2713 Emerald PER2, DVI, TX, Dual head TX_PER2_DVI_2H \u2713     2K Emerald PER2, DVI, TX, Single head TX_PER2_DVI_1H \u2713     2K Emerald SER2, DVI, TX, Single head TX_SER2_DVI_1H \u2713 Emerald 4K R2 TX_4KR2 \u2713     4K"},{"location":"Infrastructure/Upgrade_USBIP/#copy-fpga-release-tool","title":"copy-fpga-release tool","text":""},{"location":"Infrastructure/Upgrade_USBIP/#checking-current-fpgausbip-information","title":"Checking current FPGA/USBIP information","text":"<p>During the build process, the USBIP files are taken from the buildroot folders and incorporated into the upgrade image.</p> <p>The <code>./run copy-fpga-release --status</code> command lists information about the system.hdf and artix bin files from both the build directory and the versions released by the FPGA team in the FPGA_bit_file folder.</p> <p>This command performs some validation checks on the binary files (<code>system.hdf</code>, <code>artix_fpga.bin</code>) and revision files (<code>[Encoder|Decoder]_hdf_rev.txt</code>) to verify that md5 checksums are as expected, that platform codes match the expected device and that folder names (where available) match the subsystem revisions.</p> <p>If the tool discovers inconsistencies during validation, it displays the suspicious value in *red preceded with asterisk.</p> <p></p> copy-fpga-release help<pre><code>-$ ./run copy-fpga-release --help\nusage: copy-fpga-release.py [-h] [--date-code DATECODE] [--devices ['EMDSE', 'EMDZU', 'EMDPE', 'EMD4K', 'EMDPEDP', 'EMDSEDP', 'ARTIX2K', 'ARTIX4K', 'EMDSER2', 'EMDPER2'] [DEVICES ...]]\n                            [--platform-codes ['a1', '21', 'a9', '29', '91', 'c9', 'b9', '39', 'c1', '41', '19', '99', 'f1', 'e1', 'd1', '59', 'd9', 'e9', '0', '0', 'f9', '181', '189']\n                            [PCODES ...]] [--dry-run] [--print-info] [--print-info-src] [--previous-revs NUM_PREVIOUS_REVS] [--release-notes] [--separator SEPARATOR] [--status]\n                            [--verbose]\n\nScript to grab FPGA releases and display release info from src and destination FPGA files\n\noptional arguments:\n  -h, --help            show this help message and exit\n  --date-code DATECODE  FPGA date code to grab (default: newest file )\n  --devices ['EMDSE', 'EMDZU', 'EMDPE', 'EMD4K', 'EMDPEDP', 'EMDSEDP', 'ARTIX2K', 'ARTIX4K', 'EMDSER2', 'EMDPER2'] [DEVICES ...]\n                        List of devices to process (default all)\n  --platform-codes ['a1', '21', 'a9', '29', '91', 'c9', 'b9', '39', 'c1', '41', '19', '99', 'f1', 'e1', 'd1', '59', 'd9', 'e9', '0', '0', 'f9', '181', '189'] [PCODES ...]\n                        List of FPGA platform codes (in hex) to process\n  --dry-run             Do everything except the copy\n  --print-info          Instead of copying hdfs, print out the version info and hdf md5sum of the dest (i.e. buildroot) files. Colour coding: green(.)=OK, value verified;\n                        yellow(?)=value not cross-checked but not incorrect; red(*)=field has inconsistent value after checking (likely error)\n  --print-info-src      Print out the version info and hdf md5sum of files in [/projects/FPGA_bit_files/]\n  --previous-revs NUM_PREVIOUS_REVS\n                        List previous src dir revisions (ordered by date)\n  --release-notes       Show the \"/FPGA_bit_files/...\" file matching the hash of the buildroot (dest) file, rather than the most current src file. Pipe output to {grep -Ev \"(hdf)|(bin)\"}\n                        to exclude buildroot files after verifying.\n  --separator SEPARATOR\n                        Separate the printed columns with this character (e.g. | for markdown tables or , for csv\n  --status              Equivalent to --print-info --print-info-src\n  --verbose             Show more detail (like unabbreviated paths)\n</code></pre> Show the current buildroot files and FPGA release files<pre><code># In the buildroot directory (e.g. /home/developer/Buildroot_emerald2k_encoder/buildroot-2017.02.4)\n$ ./run copy-fpga-release --status\n Datecode PCode SVN_REV TNK_ID AVAE_ID USB_IP svn_status   md5sum                            HDF_Path\n -------- ----- ------- ------ ------- ------ ----------   ------                            --------\n  230620   a1    38      1214   312                         cc61189425848a5750df4244795866a8 emeraldse/encoder/single/system.hdf\n  230620   a1    38      1214   312                         cc61189425848a5750df4244795866a8 [/FPGA_bit_files/]Emerald_SE_Encoder_230620_r38_tnk_r1214_avae_r312.sdk\n  230620   21    40      1214   312                         348350115dc0eb3c03cf140e878e69d7 emeraldse/decoder/single/system.hdf\n  230620   21    40      1214   312                         348350115dc0eb3c03cf140e878e69d7 [/FPGA_bit_files/]Emerald_SE_Decoder_230620_r40_tnk_r1214_avae_r312.sdk\n  230620   a9    39      1214   312                         aac90d856f2bf5c2587f694b554f893a emeraldse/encoder/dual/system.hdf\n  230620   a9    39      1214   312                         aac90d856f2bf5c2587f694b554f893a [/FPGA_bit_files/]Emerald_SE_Encoder_DH_230620_r39_tnk_r1214_avae_r312.sdk\n  230620   29    41      1214   312                         acdff08db68c65dd507c7c8d3df4bcb5 emeraldse/decoder/dual/system.hdf\n  230620   29    41      1214   312                         acdff08db68c65dd507c7c8d3df4bcb5 [/FPGA_bit_files/]Emerald_SE_Decoder_DH_230620_r41_tnk_r1214_avae_r312.sdk\n  230620   91    52      1214   312                         cb4c007b9f6bb180fb09025863ae1ce5 zerou/encoder/single/dvi/system.hdf\n  230620   91    52      1214   312                         cb4c007b9f6bb180fb09025863ae1ce5 [/FPGA_bit_files/]Emerald_Zero_U_Encoder_230620_r52_tnk_r1214_avae_r312_dvi_r107.sdk\n  230620   C9    57      1214   312                         d1b1f8ddf86ef643b27c49168ec6e277 zerou/encoder/single/dp/system.hdf\n  230620   C9    57      1214   312                         d1b1f8ddf86ef643b27c49168ec6e277 [/FPGA_bit_files/]Emerald_Zero_U_DP_Encoder_230620_r57_tnk_r1214_avae_r312.sdk\n  230620   b9    54      1214   312                         84aa7d5d1a770bf671e443e09a114c05 emeraldpe/encoder/dual/system.hdf\n  230620   b9    54      1214   312                         84aa7d5d1a770bf671e443e09a114c05 [/FPGA_bit_files/]Emerald_2K_Encoder_230620_r54_tnk_r1214_avae_r312.sdk\n  230620   39    53      1214   312                         aae9bc461076b78fd360775bc87c0801 emeraldpe/decoder/dual/system.hdf\n  230620   39    53      1214   312                         aae9bc461076b78fd360775bc87c0801 [/FPGA_bit_files/]Emerald_2K_Decoder_230620_r53_tnk_r1214_avae_r312.sdk\n  230620   c1    55      1214   312                         595c950cbca29280a075dfa1296027c3 emeraldpe/encoder/single/system.hdf\n  230620   c1    55      1214   312                         595c950cbca29280a075dfa1296027c3 [/FPGA_bit_files/]Emerald_2K_SH_Encoder_230620_r55_tnk_r1214_avae_r312.sdk\n  230620   41    56      1214   312                         8ce05bdf03c9cbf90917e99b592c5e29 emeraldpe/decoder/single/system.hdf\n  230620   41    56      1214   312                         8ce05bdf03c9cbf90917e99b592c5e29 [/FPGA_bit_files/]Emerald_2K_SH_Decoder_230620_r56_tnk_r1214_avae_r312.sdk\n  230620   19    9999    1214   312                         19015afa48dbb008cc3b6c7db1e118d2 boot/hdf/Emerald_Decoder_ph2_wrapper.hdf\n  230620   19    9999    1214   312                         19015afa48dbb008cc3b6c7db1e118d2 [/FPGA_bit_files/]Emerald_2K_4K_Decoder_230620_tnk_r1214_avae_r312.sdk\n  230620   99    9999    1214   312                         d7e1e3dd46d166163245322a3a025d4c boot/hdf/Emerald_Encoder_Basic_wrapper.hdf\n  230620   99    9999    1214   312                         d7e1e3dd46d166163245322a3a025d4c [/FPGA_bit_files/]Emerald_2K_4K_Encoder_230620_tnk_r1214_avae_r312.sdk\n  230620   F1    9999    1214   312                         5b28a143bfad103190d18805c94ac7dd boot/hdf/Emerald_Encoder_Basic_Artix_wrapper.hdf\n  230620   F1    9999    1214   312                         5b28a143bfad103190d18805c94ac7dd [/FPGA_bit_files/]Emerald_2K_4K_Artix_Encoder_230620_tnk_r1214_avae_r312.sdk\n  230620   e1    60      1214   312                         a8ef24fd9c89ebb6285e1fd3dd7a4563 emerald2k/encoder/EMDPEDP/single/system.hdf\n  230620   e1    60      1214   312                         a8ef24fd9c89ebb6285e1fd3dd7a4563 [/FPGA_bit_files/]Emerald_2K_DP_SH_Encoder_230620_r60_tnk_r1214_avae_r312.sdk\n  230620   d1    58      1214   312                         c02994f99af2e34d2ae01f5cd667047e emerald2k/encoder/EMDPEDP/dual/system.hdf\n  230620   d1    58      1214   312                         c02994f99af2e34d2ae01f5cd667047e [/FPGA_bit_files/]Emerald_2K_DP_Encoder_230620_r58_tnk_r1214_avae_r312.sdk\n  230725   59    65      1214   312                         45023394322af1e6c3db74b75dbe28b2 emerald2k/decoder/EMDSEDP/single/system.hdf\n  230725   59    65      1214   312                         45023394322af1e6c3db74b75dbe28b2 [/FPGA_bit_files/]Emerald_SE_DP_Decoder_230725_r65_tnk_r1214_avae_r312.sdk\n  230823   d9    59      1214   312     0x7b                25f44cc4fdafbba2bb2a4d9f66655649 emerald2k/encoder/EMDSEDP/single/system.hdf\n  230823   d9    59      1214   312     0x7b                25f44cc4fdafbba2bb2a4d9f66655649 [/FPGA_bit_files/]Emerald_SE_DP_Encoder_230823_r59_tnk_r1214_avae_r312_usb_r7b.sdk\n  230629   e9    61      1214   312                         e733093ef5f3a44bc9d1a22f27aead6d emerald2k/encoder/EMDSEDP/dual/system.hdf\n  230629   e9    61      1214   312                         e733093ef5f3a44bc9d1a22f27aead6d [/FPGA_bit_files/]Emerald_SE_DP_Encoder_DH_230629_r61_tnk_r1214_avae_r312.sdk\n  230823   00                           0x7b                573158f7e0adb637ff1c3c2b6438c52d emerald2k/encoder/artix_image/artix_fpga.bin\n  230823   00                           0x7b                573158f7e0adb637ff1c3c2b6438c52d [/FPGA_bit_files/]Artix2K_Encoder_230823_USB_r7b.sdk\n  230823   00                           0x7b                ef2c2ffd3d33060e2144874ce54e10b2 boot/hdf/artix_fpga.bin\n  230823   00                           0x7b                ef2c2ffd3d33060e2144874ce54e10b2 [/FPGA_bit_files/]Artix4K_Encoder_230823_USB_r7b.sdk\n  230823   f9    63      1214   312     0x7b                e7c0fcdb100061519ec858b122aa14df emerald2k/encoder/EMDSER2/single/system.hdf\n  230823   f9    63      1214   312     0x7b                e7c0fcdb100061519ec858b122aa14df [/FPGA_bit_files/]Emerald_SE_INTUSB_Encoder_230823_r63_tnk_r1214_avae_r312_usb_r7b.sdk\n  230620   181   62      1214   312                         a3da8be37610ff186cd5867bdca4fdd8 emerald2k/encoder/EMDPER2/single/system.hdf\n  230620   181   62      1214   312                         a3da8be37610ff186cd5867bdca4fdd8 [/FPGA_bit_files/]Emerald_2K_ARTIX_SH_Encoder_230620_r62_tnk_r1214_avae_r312.sdk\n  230620   189   64      1214   312                         51aba9836aee87a34fa896caf4e29fd8 emerald2k/encoder/EMDPER2/dual/system.hdf\n  230620   189   64      1214   312                         51aba9836aee87a34fa896caf4e29fd8 [/FPGA_bit_files/]Emerald_2K_ARTIX_Encoder_230620_r64_tnk_r1214_avae_r312.sdk\n</code></pre>"},{"location":"Infrastructure/Upgrade_USBIP/#updating-to-the-most-recent-fpga-releases","title":"Updating to the most recent FPGA releases","text":"<p>To update the FPGA/USBIP files to the most recent released files, the default mode of <code>./run copy-fpga-release</code> is used. By default, it iterates over its internal list of boards, build folders and FPGA release folders and then copies the correct FPGA release versions of the system.hdf files, revision files and artix files into the correct buildroot folders.</p> Copy the files from FPGA release folders to buildroot<pre><code># In the buildroot directory (e.g. /home/developer/Buildroot_emerald2k_encoder/buildroot-2017.02.4) \n# The 2 warnings below about missing revision files for the Artix binaries are expected.\n$ ./run copy-fpga-release\nCopying /projects/FPGA_bit_files/Emerald_SE/Emerald_SE_Encoder/2018_1/Emerald_SE_Encoder_230316_r38_tnk_r1214_avae_r311.sdk/Z7030_ZynqE_System_wrapper.hdf to buildroot-2017.02.4/board/blackbox/emeraldse/encoder/single/system.hdf\nCopying /projects/FPGA_bit_files/Emerald_SE/Emerald_SE_Encoder/2018_1/Emerald_SE_Encoder_230316_r38_tnk_r1214_avae_r311.sdk/Encoder_hdf_rev.txt to buildroot-2017.02.4/board/blackbox/emeraldse/encoder/single/Encoder_hdf_rev.txt\nCopying /projects/FPGA_bit_files/Emerald_SE/Emerald_SE_Decoder/2018_1/Emerald_SE_Decoder_230316_r40_tnk_r1214_avae_r311.sdk/Z7030_ZynqD_System_wrapper.hdf to buildroot-2017.02.4/board/blackbox/emeraldse/decoder/single/system.hdf\nCopying /projects/FPGA_bit_files/Emerald_SE/Emerald_SE_Decoder/2018_1/Emerald_SE_Decoder_230316_r40_tnk_r1214_avae_r311.sdk/Decoder_hdf_rev.txt to buildroot-2017.02.4/board/blackbox/emeraldse/decoder/single/Decoder_hdf_rev.txt\nCopying /projects/FPGA_bit_files/Emerald_SE_DH/Emerald_SE_Encoder_DH/2018_1/Emerald_SE_Encoder_DH_230316_r39_tnk_r1214_avae_r311.sdk/Z7030_ZynqE_System_wrapper.hdf to buildroot-2017.02.4/board/blackbox/emeraldse/encoder/dual/system.hdf\nCopying /projects/FPGA_bit_files/Emerald_SE_DH/Emerald_SE_Encoder_DH/2018_1/Emerald_SE_Encoder_DH_230316_r39_tnk_r1214_avae_r311.sdk/Encoder_hdf_rev.txt to buildroot-2017.02.4/board/blackbox/emeraldse/encoder/dual/Encoder_hdf_rev.txt\nCopying /projects/FPGA_bit_files/Emerald_SE_DH/Emerald_SE_Decoder_DH/2018_1/Emerald_SE_Decoder_DH_230316_r41_tnk_r1214_avae_r311.sdk/Corrib_Decoder_System_wrapper.hdf to buildroot-2017.02.4/board/blackbox/emeraldse/decoder/dual/system.hdf\nCopying /projects/FPGA_bit_files/Emerald_SE_DH/Emerald_SE_Decoder_DH/2018_1/Emerald_SE_Decoder_DH_230316_r41_tnk_r1214_avae_r311.sdk/Decoder_hdf_rev.txt to buildroot-2017.02.4/board/blackbox/emeraldse/decoder/dual/Decoder_hdf_rev.txt\nCopying /projects/FPGA_bit_files/Emerald_Zero_U/Emerald_Zero_U_Encoder/2018_1/Emerald_Zero_U_Encoder_230316_r52_tnk_r1214_avae_r311_dvi_r107.sdk/Z7030_ZynqE_System_wrapper.hdf to buildroot-2017.02.4/board/blackbox/zerou/encoder/single/dvi/system.hdf\nCopying /projects/FPGA_bit_files/Emerald_Zero_U/Emerald_Zero_U_Encoder/2018_1/Emerald_Zero_U_Encoder_230316_r52_tnk_r1214_avae_r311_dvi_r107.sdk/Encoder_hdf_rev.txt to buildroot-2017.02.4/board/blackbox/zerou/encoder/single/dvi/Encoder_hdf_rev.txt\nCopying /projects/FPGA_bit_files/Emerald_Zero_U_DP/Emerald_Zero_U_DP_Encoder/2018_1/Emerald_Zero_U_DP_Encoder_230316_r57_tnk_r1214_avae_r311.sdk/Z7030_ZynqE_System_wrapper.hdf to buildroot-2017.02.4/board/blackbox/zerou/encoder/single/dp/system.hdf\nCopying /projects/FPGA_bit_files/Emerald_Zero_U_DP/Emerald_Zero_U_DP_Encoder/2018_1/Emerald_Zero_U_DP_Encoder_230316_r57_tnk_r1214_avae_r311.sdk/Encoder_hdf_rev.txt to buildroot-2017.02.4/board/blackbox/zerou/encoder/single/dp/Encoder_hdf_rev.txt\nCopying /projects/FPGA_bit_files/Emerald_2K/Emerald_2K_Encoder/2018_1/Emerald_2K_Encoder_230316_r54_tnk_r1214_avae_r311.sdk/Z7030_ZynqE_System_wrapper.hdf to buildroot-2017.02.4/board/blackbox/emeraldpe/encoder/dual/system.hdf\nCopying /projects/FPGA_bit_files/Emerald_2K/Emerald_2K_Encoder/2018_1/Emerald_2K_Encoder_230316_r54_tnk_r1214_avae_r311.sdk/Encoder_hdf_rev.txt to buildroot-2017.02.4/board/blackbox/emeraldpe/encoder/dual/Encoder_hdf_rev.txt\nCopying /projects/FPGA_bit_files/Emerald_2K/Emerald_2K_Decoder/2018_1/Emerald_2K_Decoder_230316_r53_tnk_r1214_avae_r311.sdk/Corrib_Decoder_System_wrapper.hdf to buildroot-2017.02.4/board/blackbox/emeraldpe/decoder/dual/system.hdf\nCopying /projects/FPGA_bit_files/Emerald_2K/Emerald_2K_Decoder/2018_1/Emerald_2K_Decoder_230316_r53_tnk_r1214_avae_r311.sdk/Decoder_hdf_rev.txt to buildroot-2017.02.4/board/blackbox/emeraldpe/decoder/dual/Decoder_hdf_rev.txt\nCopying /projects/FPGA_bit_files/Emerald_2K/Emerald_2K_SH_Encoder/2018_1/Emerald_2K_SH_Encoder_230316_r55_tnk_r1214_avae_r311.sdk/Z7030_ZynqE_System_wrapper.hdf to buildroot-2017.02.4/board/blackbox/emeraldpe/encoder/single/system.hdf\nCopying /projects/FPGA_bit_files/Emerald_2K/Emerald_2K_SH_Encoder/2018_1/Emerald_2K_SH_Encoder_230316_r55_tnk_r1214_avae_r311.sdk/Encoder_hdf_rev.txt to buildroot-2017.02.4/board/blackbox/emeraldpe/encoder/single/Encoder_hdf_rev.txt\nCopying /projects/FPGA_bit_files/Emerald_2K/Emerald_2K_SH_Decoder/2018_1/Emerald_2K_SH_Decoder_230316_r56_tnk_r1214_avae_r311.sdk/Corrib_Decoder_System_wrapper.hdf to buildroot-2017.02.4/board/blackbox/emeraldpe/decoder/single/system.hdf\nCopying /projects/FPGA_bit_files/Emerald_2K/Emerald_2K_SH_Decoder/2018_1/Emerald_2K_SH_Decoder_230316_r56_tnk_r1214_avae_r311.sdk/Decoder_hdf_rev.txt to buildroot-2017.02.4/board/blackbox/emeraldpe/decoder/single/Decoder_hdf_rev.txt\nCopying /projects/FPGA_bit_files/Emerald_4K/Emerald_2K_4K_Decoder/2018_3/Emerald_2K_4K_Decoder_230420_tnk_r1214_avae_r311.sdk/Emerald_Decoder_ph2_wrapper.hdf to boot/hdf/Emerald_Decoder_ph2_wrapper.hdf\nCopying /projects/FPGA_bit_files/Emerald_4K/Emerald_2K_4K_Decoder/2018_3/Emerald_2K_4K_Decoder_230420_tnk_r1214_avae_r311.sdk/Decoder_hdf_rev.txt to boot/hdf/Decoder_hdf_rev.txt\nCopying /projects/FPGA_bit_files/Emerald_4K/Emerald_2K_4K_Encoder/2018_3/Emerald_2K_4K_Encoder_230420_tnk_r1214_avae_r311.sdk/Emerald_Encoder_Basic_wrapper.hdf to boot/hdf/Emerald_Encoder_Basic_wrapper.hdf\nCopying /projects/FPGA_bit_files/Emerald_4K/Emerald_2K_4K_Encoder/2018_3/Emerald_2K_4K_Encoder_230420_tnk_r1214_avae_r311.sdk/Encoder_hdf_rev.txt to boot/hdf/Encoder_hdf_rev.txt\nCopying /projects/FPGA_bit_files/Emerald_4K/Emerald_2K_4K_Artix_Encoder/2018_3/Emerald_2K_4K_Artix_Encoder_230420_tnk_r1214_avae_r311.sdk/Emerald_Encoder_Basic_wrapper.hdf to boot/hdf/Emerald_Encoder_Basic_Artix_wrapper.hdf\nCopying /projects/FPGA_bit_files/Emerald_4K/Emerald_2K_4K_Artix_Encoder/2018_3/Emerald_2K_4K_Artix_Encoder_230420_tnk_r1214_avae_r311.sdk/Encoder_hdf_rev.txt to boot/hdf/Encoder_with_artix_hdf_rev.txt\nCopying /projects/FPGA_bit_files/Emerald_2K_DP/Emerald_2K_DP_SH_Encoder/2018_1/Emerald_2K_DP_SH_Encoder_230316_r60_tnk_r1214_avae_r311.sdk/Z7030_ZynqE_System_wrapper.hdf to buildroot-2017.02.4/board/blackbox/emerald2k/encoder/EMDPEDP/single/system.hdf\nCopying /projects/FPGA_bit_files/Emerald_2K_DP/Emerald_2K_DP_SH_Encoder/2018_1/Emerald_2K_DP_SH_Encoder_230316_r60_tnk_r1214_avae_r311.sdk/Encoder_hdf_rev.txt to buildroot-2017.02.4/board/blackbox/emerald2k/encoder/EMDPEDP/single/Encoder_hdf_rev.txt\nCopying /projects/FPGA_bit_files/Emerald_2K_DP/Emerald_2K_DP_Encoder/2018_1/Emerald_2K_DP_Encoder_230316_r58_tnk_r1214_avae_r311.sdk/Z7030_ZynqE_System_wrapper.hdf to buildroot-2017.02.4/board/blackbox/emerald2k/encoder/EMDPEDP/dual/system.hdf\nCopying /projects/FPGA_bit_files/Emerald_2K_DP/Emerald_2K_DP_Encoder/2018_1/Emerald_2K_DP_Encoder_230316_r58_tnk_r1214_avae_r311.sdk/Encoder_hdf_rev.txt to buildroot-2017.02.4/board/blackbox/emerald2k/encoder/EMDPEDP/dual/Encoder_hdf_rev.txt\nCopying /projects/FPGA_bit_files/Emerald_SE_DP/Emerald_SE_DP_Encoder/2018_1/Emerald_SE_DP_Encoder_230613_r59_tnk_r1214_avae_r312_usb_r77.sdk/Z7030_ZynqE_System_wrapper.hdf to buildroot-2017.02.4/board/blackbox/emerald2k/encoder/EMDSEDP/single/system.hdf\nCopying /projects/FPGA_bit_files/Emerald_SE_DP/Emerald_SE_DP_Encoder/2018_1/Emerald_SE_DP_Encoder_230613_r59_tnk_r1214_avae_r312_usb_r77.sdk/Encoder_hdf_rev.txt to buildroot-2017.02.4/board/blackbox/emerald2k/encoder/EMDSEDP/single/Encoder_hdf_rev.txt\nCopying /projects/FPGA_bit_files/Emerald_SE_DP/Emerald_SE_DP_Encoder_DH/2018_1/Emerald_SE_DP_Encoder_DH_230316_r61_tnk_r1214_avae_r311.sdk/Z7030_ZynqE_System_wrapper.hdf to buildroot-2017.02.4/board/blackbox/emerald2k/encoder/EMDSEDP/dual/system.hdf\nCopying /projects/FPGA_bit_files/Emerald_SE_DP/Emerald_SE_DP_Encoder_DH/2018_1/Emerald_SE_DP_Encoder_DH_230316_r61_tnk_r1214_avae_r311.sdk/Encoder_hdf_rev.txt to buildroot-2017.02.4/board/blackbox/emerald2k/encoder/EMDSEDP/dual/Encoder_hdf_rev.txt\nCopying /projects/FPGA_bit_files/Artix_USB_2_devices/Artix_2K_Encoder/2018_1/Artix2K_Encoder_230613_USB_r77.sdk/usb_dev_ctlr_artix7_wrapper_hw_platform_0/artix_fpga.bin to buildroot-2017.02.4/board/blackbox/emerald2k/encoder/artix_image/artix_fpga.bin\nSource file /projects/FPGA_bit_files/Artix_USB_2_devices/Artix_2K_Encoder/2018_1/Artix2K_Encoder_230613_USB_r77.sdk/usb_dev_ctlr_artix7_wrapper_hw_platform_0/Encoder_hdf_rev.txt does not exist\nCopying /projects/FPGA_bit_files/Artix_USB_2_devices/Artix_4K_Encoder/2018_3/Artix4K_Encoder_230613_USB_r77.sdk/usb_dev_ctlr_artix7_wrapper_hw_platform_0/artix_fpga.bin to boot/hdf/artix_fpga.bin\nSource file /projects/FPGA_bit_files/Artix_USB_2_devices/Artix_4K_Encoder/2018_3/Artix4K_Encoder_230613_USB_r77.sdk/usb_dev_ctlr_artix7_wrapper_hw_platform_0/Encoder_hdf_rev.txt does not exist\nCopying /projects/FPGA_bit_files/Emerald_SE_INTUSB/Emerald_SE_INTUSB_Encoder/2018_1/Emerald_SE_INTUSB_Encoder_230613_r63_tnk_r1214_avae_r312_usb_r77.sdk/Z7030_ZynqE_System_wrapper.hdf to buildroot-2017.02.4/board/blackbox/emerald2k/encoder/EMDSER2/single/system.hdf\nCopying /projects/FPGA_bit_files/Emerald_SE_INTUSB/Emerald_SE_INTUSB_Encoder/2018_1/Emerald_SE_INTUSB_Encoder_230613_r63_tnk_r1214_avae_r312_usb_r77.sdk/Encoder_hdf_rev.txt to buildroot-2017.02.4/board/blackbox/emerald2k/encoder/EMDSER2/single/Encoder_hdf_rev.txt\nCopying /projects/FPGA_bit_files/Emerald_2K_ARTIX/Emerald_2K_ARTIX_SH_Encoder/2018_1/Emerald_2K_ARTIX_SH_Encoder_230316_r62_tnk_r1214_avae_r311.sdk/Z7030_ZynqE_System_wrapper.hdf to buildroot-2017.02.4/board/blackbox/emerald2k/encoder/EMDPER2/single/system.hdf\nCopying /projects/FPGA_bit_files/Emerald_2K_ARTIX/Emerald_2K_ARTIX_SH_Encoder/2018_1/Emerald_2K_ARTIX_SH_Encoder_230316_r62_tnk_r1214_avae_r311.sdk/Encoder_hdf_rev.txt to buildroot-2017.02.4/board/blackbox/emerald2k/encoder/EMDPER2/single/Encoder_hdf_rev.txt\nCopying /projects/FPGA_bit_files/Emerald_2K_ARTIX/Emerald_2K_ARTIX_Encoder/2018_1/Emerald_2K_ARTIX_Encoder_230316_r64_tnk_r1214_avae_r311.sdk/Z7030_ZynqE_System_wrapper.hdf to buildroot-2017.02.4/board/blackbox/emerald2k/encoder/EMDPER2/dual/system.hdf\nCopying /projects/FPGA_bit_files/Emerald_2K_ARTIX/Emerald_2K_ARTIX_Encoder/2018_1/Emerald_2K_ARTIX_Encoder_230316_r64_tnk_r1214_avae_r311.sdk/Encoder_hdf_rev.txt to buildroot-2017.02.4/board/blackbox/emerald2k/encoder/EMDPER2/dual/Encoder_hdf_rev.txt\n</code></pre>"},{"location":"Infrastructure/branching_strategy/","title":"Branching Strategy","text":"<p>Our current branching strategy follows a similar workflow to the popular Gitflow Workflow. This workflow is ideally suited for projects that have a scheduled release cycle and for the DevOps best practice of continuous delivery.</p>"},{"location":"Infrastructure/branching_strategy/#how-it-works","title":"How it works","text":""},{"location":"Infrastructure/branching_strategy/#develop-and-master-branches","title":"Develop and Master Branches","text":"<p>Instead of a single master branch, this workflow uses two branches to record the history of the project. The master branch stores the official release history, and the develop branch serves as an integration branch for features.</p> <p>In our case our master branch is <code>development_se_p2</code> and our develop branch is <code>develop</code>.</p>"},{"location":"Infrastructure/branching_strategy/#feature-branches","title":"Feature Branches","text":"<p>Each new feature/release should reside in its own branch. But, instead of branching off of <code>development_se_p2</code>, feature branches use <code>develop</code> as their parent branch. When a feature is complete, it gets merged back into <code>develop</code>. Features should never interact directly with master.</p>"},{"location":"Infrastructure/configuring_nfs/","title":"Configuring NFS","text":""},{"location":"Infrastructure/configuring_nfs/#setting-your-vm-up-for-nfs-operation-for-emerald-4k","title":"Setting your VM up for NFS operation for Emerald 4K","text":"<p>Note</p> <p>If you have a standard Ansible Dev VM you will not need to do any of the setup steps below and can skip to #&amp;#$%^&amp;#$%&amp;#%</p> <p>To allow for quick development practices we have the option to boot the Emerald file system over NFS (Network File System). This allows us to add files or folders to a location on our development machines which will show up on our Emerald devices.</p> <p>We are now running our Emerald devices over the 10G port. Although this is the case for the userspace programs, on boot the device uses eth0 to mount NFS.</p> <p>To add the ability to mount NFS over eth0 in conjunction with 10G running in userspace we must setup a second network on our VMs running on the <code>192.168.x.x</code> network.</p> <p>Your first network adapter should be on the 10.211.128 \u2013 134.x range. It should not be DHCP.</p> <p>We will need the ifmetric command for this to work so please first install.</p> <pre><code>    sudo apt-get install ifmetric\n</code></pre> <p>You can find a list of available IP addresses on the Limerick IP Address Manager.</p>"},{"location":"Infrastructure/configuring_nfs/#adding-a-second-network-interface-to-your-vm","title":"Adding a second network interface to your VM","text":"<p>Step 1: Go to your VM in the webtool.</p> <p>Step 2: Click the edit button on your VM page.</p> <p></p> <p>Step 3: In this panel choose the option 'Add network adapter'.</p> <p>Step 4: Click save.</p>"},{"location":"Infrastructure/configuring_nfs/#configuring-the-second-adapter-on-ubuntu","title":"Configuring the second adapter on Ubuntu","text":"<p>Step 1: In the top right hand corner click the network icon.</p> <p></p> <p>Step 2: Click edit connections...</p> <p>Step 3: Click 'Add Connection' button and choose Ethernet. - Give it a name if you want.</p> <p>Step 4: In the Ethernet tab choose the Device: eth1.</p> <p>Step 5: In the IPv4 Settings tab choose manual IP.</p> <p>Example</p> <p>Address: 192.168.10.110</p> <p>Netmask: 24</p> <p>Step 6: Click the Add button and add the IP address.</p> <p>Step 7: Click the Save button</p> <p>Step 8: Close the network connections.</p> <p>Step 9: Click the Network Icon in the top right again and choose the new connection.</p>"},{"location":"Infrastructure/configuring_nfs/#fixing-internet-access-issues","title":"Fixing Internet Access Issues","text":"<p>here could and more than likely will be a Network issue when you've added this new adapter.</p> <p>To fix this we update the interfaces metric.</p> <p>In networking the interface to use by default is chosen by the interfaces metric value (as far as my limited knowledge understands).</p> <p>The lower the number the higher the priority.</p> <p>We can see the current metrics by executing </p> <pre><code>    route -n\n</code></pre> <pre><code>Kernel IP routing table\nDestination     Gateway         Genmask         Flags Metric Ref    Use Iface\n0.0.0.0         10.211.128.1    0.0.0.0         UG    100    0        0 ens160\n10.211.128.0    0.0.0.0         255.255.248.0   U     100    0        0 ens160\n169.254.0.0     0.0.0.0         255.255.0.0     U     1000   0        0 ens160\n192.168.10.0    0.0.0.0         255.255.255.0   U     100    0        0 ens34\n</code></pre> <p>Run the following command to update the second interfaces metric.</p> <pre><code>    sudo ifmetric eth1 200\n</code></pre> <p>If we run <code>route -n</code> again we see the metric has updated.</p> <pre><code>Kernel IP routing table\nDestination     Gateway         Genmask         Flags Metric Ref    Use Iface\n0.0.0.0         10.211.128.1    0.0.0.0         UG    100    0        0 ens160\n10.211.128.0    0.0.0.0         255.255.248.0   U     100    0        0 ens160\n169.254.0.0     0.0.0.0         255.255.0.0     U     1000   0        0 ens160\n192.168.10.0    0.0.0.0         255.255.255.0   U     200    0        0 ens34\n</code></pre>"},{"location":"Infrastructure/configuring_nfs/#general-configuration","title":"General Configuration","text":""},{"location":"Infrastructure/configuring_nfs/#configuring-rc-files","title":"Configuring RC Files","text":""},{"location":"Infrastructure/configuring_nfs/#how-we-know-we-are-running-in-nfs-mode","title":"How we know we are running in NFS mode","text":"<p>There is a <code>rootfs2nfs</code> helper script which will in addition to copying the files from the NFS tar file to the designated NFS directory also creates an NFS_INSTANCE file in the root directory. This is used by some scripts to determine if we are in a developer or production build.</p>"},{"location":"Infrastructure/configuring_nfs/#enable-nfs-on-2k-boards","title":"Enable NFS on 2K Boards","text":"<p>NFS booting on 2K Platform is enabled in u-boot. At the u-boot prompt run the following command</p> <pre><code>    printenv\n</code></pre> <p>Copy down the value of <code>ethaddr</code>.</p> <p><pre><code>env default \u2013a\n\nsetenv default_bootargs 'ttyPS0,115200 root=/dev/nfs rw nfsroot=${SERVER_IP}:${NFS_LOCATION},tcp ip=${DEVICE_IP}::10.211.128.1:255.255.248.0:::off nfsrootdebug clk_ignore_unused\u2019\n</code></pre> Where <code>${SERVER_IP}</code> is your VMs IP, <code>${NFS_LOCATION}</code> is the location from ~/.emeraldserc and <code>${DEVICE_IP}</code> is the static IP that you want to give your device.</p> <p>For Example:</p> <pre><code>setenv default_bootargs 'ttyPS0,115200 root=/dev/nfs rw nfsroot=10.211.135.102:/home/developer/Encoder_NFS/EMERALDSE,tcp ip=10.211.128.25::10.211.128.1:255.255.248.0:::off nfsrootdebug clk_ignore_unused'\n</code></pre> <p>or</p> <pre><code>setenv default_bootargs 'ttyPS0,115200 root=/dev/nfs rw nfsroot=10.211.135.102:/home/developer/Decoder_NFS/EMERALDSE,tcp ip=10.211.128.26::10.211.128.1:255.255.248.0:::off nfsrootdebug clk_ignore_unused'\n</code></pre> <p>for an encoder</p> <pre><code>setenv bootargs \u201c$default_bootargs\u201d\nsetenv bboxboot \u201c$nfsboot\u201d\nsetenv ethaddr '${MAC_YOU_COPIED_AT_BEGINNING}' \nsaveenv\nboot\n</code></pre>"},{"location":"Infrastructure/configuring_nfs/#trouble-shooting","title":"Trouble Shooting","text":"<p>Make sure your rc file is correctly set up for nfs. On 4K make sure your device tree has the appropriate command line arguments.</p> <p>To build an NFS compatible device tree use</p> <pre><code>    ./run create-dtb --nfs\n</code></pre>"},{"location":"Infrastructure/create_new_svn_repo/","title":"Create New SVN Repo","text":"<p>Note</p> <p>Ask DevOps Engineer or your manager to get you these credentials</p> <p>To create a new SVN repository you must first log onto the SVN Server as the SVN admin user.</p>"},{"location":"Infrastructure/create_new_svn_repo/#create-repo","title":"Create Repo","text":"<p>All repositories are stored under the folder <code>/srv/svn</code>. To create a new repo run the following command</p> <pre><code>    $ # Create a repository\n    $ svnadmin create /var/svn/new_repo_name\n</code></pre>"},{"location":"Infrastructure/create_new_svn_repo/#setup-user-access","title":"Setup User Access","text":"<p>The simplest and quickest method to add users to your new repository is to copy the configuration from an existing repository. Users and their passwords are stored in</p> <pre><code>    /srv/svn/my_repo/conf/passwd\n</code></pre> <p>To copy the config from another repository symlink it as so</p> <pre><code>    #Navigate to the config folder\n    cd /srv/svn/my_new_repo/conf\n    #Remove the default passwd file\n    rm passwd\n    #Now symlink the file to the repo you wish to copy\n    ln -s ../../existing_repo/conf/passwd passwd\n</code></pre> <p>You must also configure SVN to use the <code>passwd</code> file as the user repository you can do this by following a similar procedure as above on the <code>svnserve.conf</code> file</p> <pre><code>    #Navigate to the config folder\n    cd /srv/svn/my_new_repo/conf\n    #Remove the default config file\n    rm svnserve.conf\n    #Now symlink the file to the repo you wish to copy\n    ln -s ../../existing_repo/conf/svnserve.conf svnserve.conf\n</code></pre> <p>Your repository should now be available for checkout.</p>"},{"location":"Infrastructure/manual_nightly_build/","title":"Manual Nightly Build","text":""},{"location":"Infrastructure/manual_nightly_build/#log-in-to-jenkins","title":"Log in to Jenkins","text":"<p>The Jenkins URL is</p> <p>http://10.211.129.241:8080</p> <p>The following credentials can be used</p> <pre><code>user: developer\npassword: cloud$1\n</code></pre>"},{"location":"Infrastructure/manual_nightly_build/#kick-off-build","title":"Kick off Build","text":"<p>You will be presented with the default view which contains all configured builds. Select the build with the same name as the branch you wish to build.</p> <p></p> <p>Click the build option</p> <p></p> <p>You will be presented with the pipeline parameters screen, these values have been pre-configured with the correct values so click the build button</p> <p></p>"},{"location":"Infrastructure/ssh_tunnel_upgrades/","title":"Upgrading Devices using SSH Tunnelling","text":""},{"location":"Infrastructure/ssh_tunnel_upgrades/#device-side","title":"Device Side","text":"<p>Copy the following archive to /usr/local on your boards and untar</p> <p>\\10.211.128.208\\shared_area\\blackbox_ssh_tunneling\\tunnel_ssh.tar</p> <p>Please ensure you have taken a block of ports from the table at the bottom of the page before continuing. On your board cd into the tunnel_ssh folder and run the following:</p> <pre><code>./start.sh &lt;PORT_NUMBER&gt;\n</code></pre> <p>if you aren't rebooting your board when you are finished transferring run</p> <pre><code>./stop.sh\n</code></pre>"},{"location":"Infrastructure/ssh_tunnel_upgrades/#dev-vm-side","title":"Dev VM Side","text":"<p>On your development VM run the following helper script in the <code>buildroot-2017.02.4</code> directory</p> <pre><code>./run tunnel-upgrade-image &lt;PORT_NUMBER&gt;\n</code></pre> <p>The scripts takes the same arguments as the normal update-image scripts </p> <pre><code>#2K Format\n./run tunnel-upgrade-image &lt;SSH_PORT&gt; [--fsbl] [--fpga] [--dtb] [--uboot] [--rootfs/--uramdisk] [--uimage/--kernel]\n\n#4K Format\n./run tunnel-upgrade-image &lt;SSH_PORT&gt; [--boot] [--image]\n</code></pre> <p>If no component argument is passed all components are updated.</p>"},{"location":"Infrastructure/ssh_tunnel_upgrades/#port-ranges","title":"Port Ranges","text":"Port Range Start End Name 12000 12009 Dan 12010 12019 John 12020 12029 --- 12030 12039 Rodrigo 12040 12049 Micheal 12050 12059 Manas 12060 12069 Olga 12070 12079 Tom M"},{"location":"Infrastructure/ssh_tunnel_upgrades/#detailed-setup","title":"Detailed Setup","text":"<p>In order to use the SSH key on an Emerald board or on another Linux PC, the ssh private key is provided in 2 formats:</p> <p><code>aws_sshproxy_key.pem</code> can be used with OpenSSH clients as follows to open a port-forwarding tunnel:</p> <pre><code>ssh -N -i aws_sshproxy_key.pem -R 12000:localhost:22 sshproxy@34.254.66.195\n</code></pre> <p>The '-N' parameter tells the SSH client not to try to open a shell.  Otherwise, it will fail because of the <code>nologin</code> command above and will close the connection immediately. The <code>-R</code> parameter tells it to open TCP port 12000 on the AWS server and forward it to port 22 on the client.  This will allow you to connect back to your board from your VM.  E.g. </p> <pre><code>ssh -p 12000 root@34.254.66.195\n</code></pre> <p>aws_sshproxy_key.db can be used with Dropbear SSH clients as well (i.e. on Emerald boards):</p> <pre><code>ssh -N \u2013i aws_sshproxy_key.db \u2013R 12000:localhost:22 sshproxy@34.254.66.195\n</code></pre> <p>This key format is created from a pem file with the following command:</p> <pre><code>dropbearconvert openssh dropbear aws_sshproxy_key.pem aws_sshproxy_key.db\n</code></pre> <p>Depending on how the keys get copied around, you may need to fix up the file permissions before using them:</p> <pre><code>chmod 600 aws_sshproxy_key.db\n</code></pre> <p>To make it more convenient to start/stop the SSH tunnel connection from the board, a tarball was created with the private key and start/stop scripts. It is suggested to copy this over to your board and extract it under /usr/local/ (to make it persistent), then run it as follows:</p> <pre><code>/usr/local/sshproxy/start.sh 12000  #these are in the tar ball\n</code></pre> <p>And to disable it:</p> <pre><code>/usr/local/sshproxy/stop.sh\n</code></pre> <p>The SSH commands above will just open a reverse port-forwarding on the AWS server, mapping the specified port (e.g. 12000) on the AWS server back to port 22 on the client machine (this could be an Emerald board or a PC or Linux machine that you want to access).  To keep that port open, you just need to leave that SSH command running in the background.</p> <p>With that port open, you could now connect from your VM in BlackBox to your board as follows:</p> <pre><code>ssh -p 12000 root@34.254.66.195\n</code></pre> <p>(Enter the password for your board when prompted).</p> <p>To make this a little more convenient to use, it is suggested to add an entry like this to ~/.ssh/config on your VM:</p> <pre><code>ServerAliveInterval 120\nHost EMDRX1 # Pick whatever alias you like here\n    HostName 34.254.66.195\n    Port 12000 # Replace with your own allocated port number\n    User root\n</code></pre> <p>Then, assuming the port is opened as above, you should be able to connect to your board from your VM simply by typing:</p> <pre><code>ssh EMDRX1\n</code></pre>"},{"location":"Infrastructure/ESXI/creating_developer_vm/","title":"Creating a VM","text":""},{"location":"Infrastructure/ESXI/creating_developer_vm/#accessing-ansible-install","title":"Accessing Ansible Install","text":"<p>Warning</p> <p>If you need a Dev VM please request one from the DevOps Engineer, do not create one yourself</p> <p>Ansible is currently installed in a docker container on a virtual machine with the IP address  <code>10.211.129.241</code>. To access the container ssh to the IP address with the credentials</p> <pre><code>user: developer\npassword: cloud$1\n</code></pre> <p>then navigate to the ansible folder and run the <code>ansibleshell</code> helper script</p> <pre><code>developer@docker:~$ cd ansible/\ndeveloper@docker:~/ansible$ ls\nansible_home_path  ansibleshell  image  startAnsible\ndeveloper@docker:~/ansible$ ./ansibleshell\nansible@ansible:~$\n</code></pre>"},{"location":"Infrastructure/ESXI/creating_developer_vm/#ansible-structure","title":"Ansible Structure","text":""},{"location":"Infrastructure/ESXI/creating_developer_vm/#ansible-configuration-files","title":"Ansible Configuration Files","text":"<p>All ansible files are stored in svn in the following URL</p> <p><code>svn://10.211.128.12/Emerald/branches/HostTools/ansible</code></p>"},{"location":"Infrastructure/ESXI/creating_developer_vm/#machine-types","title":"Machine Types","text":"<p>We currently have two machine types in ansible:</p> <ul> <li> <p><code>emerald_builds</code>: These are developer build machines with are based on ubuntu 16.04 with a gnome GUI</p> </li> <li> <p><code>nightly_builds</code>: These are nightly build machine also based on Ubuntu 16.04 but are headless with no GUI</p> </li> </ul> <p>In the ansible home directory you will see folders for each machine type that contain the top level .yaml files that layer the configuration for these machines.</p>"},{"location":"Infrastructure/ESXI/creating_developer_vm/#vm-creation","title":"VM Creation","text":"<p>The folder <code>vmware</code> provides scripts for developer and nightly build machine creation. To build a machine two helper scripts are provided</p> <pre><code>emerald_build_start\nnightly_build_start\n</code></pre> <p>Info</p> <p>You must check out the IPs you wish to use from the Limerick IP Management Portal</p> <p>To build a nightly build machine a hostname and IP address must be provided. To build a developer machine a hostname and two IP addresses must be supplied.</p>"},{"location":"Infrastructure/ESXI/new_user/","title":"Create a New user","text":"<p>To add a new developer user to the ESXI Server the following steps should be followed.</p> <p>Step 1: Select the manage option in the ESXi web GUI (see red circle below). </p> <p>Step 2: Select the <code>Security &amp; users</code> tab and then select <code>Add user</code> (see red box below). Fill in the username and password details.</p> <p></p> <p>Step 3: Now you must add the User to the host permissions by selecting the Host tab then clicking permissions on the actions icon.</p> <p></p> <p>Step 4: Add the previously created user to the permissions list, unless the user needs admin access they should be marked as <code>Read-only</code> for their role.</p> <p></p> <p>Step 5: If the user is <code>Read-only</code> then you must navigate to their dev machine and add them to the VM Permissions in the same method as the Host permissions however this time mark them as <code>Administrator</code>.</p>"},{"location":"Infrastructure/IP_Management_Portal/create_new_user/","title":"Creating a New User","text":"<p>To create a new user on the IP Management Portal you must have an admin level user. Log onto to the portal and select the <code>Admin Console</code> button on the left side of the page.</p> <p></p> <p>In the Admin Command window you can click the <code>+ User</code> button to populate the SQL window with a template of the command to add a user (see below)</p> <pre><code>INSERT INTO users (id, name, password, role, fname, sname) VALUES (NULL, 'username', MD5('password'), 'user', 'fname', 'sname');\n</code></pre> <p>You can then populate the relevant data e.g</p> <pre><code>INSERT INTO users (id, name, password, role, fname, sname) VALUES (NULL, 'johnd', MD5('cloud$1'), 'user', 'John', 'Doe');\n</code></pre> <p>Once the data has been populated you can click the run button to add the user. You can check the user has been added correctly or see all users by running the following command</p> <pre><code>select * from users\n</code></pre>"},{"location":"Infrastructure/Manufacture_Test/Adding_new_images/","title":"Adding new images to the Flash &amp; Test","text":"<p>The below steps are required in order for a developer to add a new image or board variant to the factory test.</p>"},{"location":"Infrastructure/Manufacture_Test/Adding_new_images/#device_images-folder","title":"device_images folder","text":"<p>In order to add new images to the flash and test station, the image files must be added to the device_files folder in /opt/blackbox/ on the linux pc. To do this the required .clu file must be made executable using the command 'chmod +x' and then run to extract the required binary files. Binary files such as fsbl.bin have an expected naming convention which must be adhered to. If a file is in a format such as fsbl_dual_dp.bin it must be re-named to fsbl.bin_dual_dp in order for the station to find it. </p>"},{"location":"Infrastructure/Manufacture_Test/Adding_new_images/#sql-database","title":"SQL database","text":"<p>The database must be changed to add a new image version to the system, this can be done by adding the required image version and/or board type into active_images in blackbox_products.sql. It must be changed for each individual board type, being added to the \"image_versions\" category along with \"active_images\"</p>"},{"location":"Infrastructure/Manufacture_Test/Adding_new_images/#reference-devices","title":"Reference devices","text":"<p>In order for the audio test to function which relies on an rdp connection between the device under test and the reference device, the reference devices software must be updated to the same version of software as is being used to flash the boards.  </p> <p>Note any changes to the format of capture_layer_cli commands in future images versions must be noted to whomever is responsible for the manufacture test system, as the system utilises these commands, changes will cause the video test to fail.</p>"},{"location":"Infrastructure/Manufacture_Test/Brief_Description/","title":"Brief Description","text":""},{"location":"Infrastructure/Manufacture_Test/Brief_Description/#hardware","title":"Hardware","text":"<p>The main hardware components used for flashing and test Emerald devices:</p> <ol> <li>Xilinx Platform Cable II used during flashing of the Emerald image. This device flashes a uboot.elf image to begin the flashing process. The u-boot.elf downloads the various image files using TFTP and writes the images to the Emerald NAND flash.  </li> <li>Blackbox PSE554 MA remote power socket control unit, used by the Flash and Test station to power cycle the DUT and reference devices.  </li> <li>Magewell Pro Capture DVI card used to capture images from the DUT decoder and Reference decoder for video connector testing.  </li> <li>Blackbox AC1032A 4A DVI 4in-1out Switcher used to select one of the DVI output heads on a DUT decoder or Reference decoder and route the signal to the Magewell Pro Capture card.</li> <li>Smart AVI DVN-4PRO  4-Port single-head DVI-D KVM Switch with USB and Audio 4in-1out Switcher used to select one of the DVI output heads on a DUT decoder or Reference decoder and route the signal to the Magewell Pro Capture card.  </li> <li>Behringer U-Control UCA222 USB Sound card used for recording and playback of audio during audio connector testing.  </li> <li>Newlink USB2.0 13 Port USB Hub, connects all USB based hardware devices to the Flash and Test PC. This extends the USB ports and also allows all devices to be addressed more easily using Linux USB devices paths.  </li> <li>Emerald SE Reference Units allows an RDP connection to be made to the DUT during connector testing  </li> <li>Flash and Test PC interfaces to the hardware above and executes the flash and testing scripts.  </li> <li>Operator Station PC provides a GUI to the operator and instructs flash and test pc on which test scripts to run.</li> </ol>"},{"location":"Infrastructure/Manufacture_Test/Brief_Description/#software","title":"Software","text":"<p>The software is divided in to 2 applications that perform different roles.  </p> <pre><code>1.  Operator Station Application  \n2.  Flash and Test Station Application\n</code></pre> <p>Both applications are developed in Python3.8</p>"},{"location":"Infrastructure/Manufacture_Test/Brief_Description/#the-operator-station-provides-the-operator-with-a-gui-interface-that-allows-the-operator-to","title":"The Operator Station provides the operator with a GUI interface that allows the operator to:","text":"<p>a.  Start a flash and test session b.  Scan the Emerald DUT barcodes c.  Cancel a flash and test session d.  Review results and logs of a flash and test session e.  Review the progress of a flash and test session f.  Select which tasks to run during a flash and test session (note this is only for testing or debugging issues, any test run with tasks disabled is considered to be failed by default) g.  Add new image versions for the Emerald products  </p>"},{"location":"Infrastructure/Manufacture_Test/Brief_Description/#the-flash-and-test-station-application-executes-the-scripts-for-flashing-and-testing-of-the-emerald-dut-it-provides-a-rest-api-interface-that-allows-the-operator-station-application-too","title":"The Flash and Test station application executes the scripts for flashing and testing of the Emerald DUT. It provides a rest api interface that allows the Operator Station application too","text":"<p>a.  Request a task to be run b.  Poll the Flash and Test station for task updates and results c.  Request task progress logs  </p> <p>The Flash and Test station interfaces to the hardware described above to perform the tasks requested by the Operator Station. Both applications share a common python code base and are located in the same git repository.</p>"},{"location":"Infrastructure/Manufacture_Test/Hardware_components/","title":"Hardware","text":""},{"location":"Infrastructure/Manufacture_Test/Hardware_components/#network-components","title":"Network Components","text":"<p>A static IP network (192.168.1.1) connects the following hardware components   1. Flash and Test PC running Ubunutu   2. Operator Station running windows    3. Emerald DUTs   4. Emerald Gold References   5. Blackbox PSE554 MSE power control switch  </p> <p> </p> 1.networked components <p>The Blackbox PSE554 MSE power control switch out of box needs the IP address to be configured to static IP 192.168.1.110 and also a hidden.htm page to be enable. See software setup section for details.</p> <p> </p> power control <p>The Flash and Station software uses the USB devices bus-port.port format to connect and control the hardware. This means that most of the USB devices must be plugged into the correct port on the 13 Port Hub and the hub must be connected to the correct USB port on the Flash and Test PC.  The NewLink 13 Port USB hub also internally use port 5 as a hub to create another 7 ports. The bus-port-.port locations for each device is entered into a YAML configuration file located in the project repository. This file is stored under in the same directory as the Flash and Test station python application code. <code>/opt/blackbox/Emerald_Production_Test/flashandtest_station/configs/config_pe_station_id001.yaml</code></p> <p> </p> newlink usb hub setup <p> </p> Blackbox AC1032A 4A DVI Switcher (for older manufacturing test) <p> </p> Smart AVI DVN-4PRO 4-Port Front <p> </p> Smart AVI DVN-4PRO 4-Port Back <p>The switcher transmits video from the device under test back to the Pro capture card on the flash &amp; test PC.  </p> <p> </p> Audio soundcard setup for Encoder"},{"location":"Infrastructure/Manufacture_Test/Hardware_components/#things-to-note","title":"Things to Note","text":"<p>Emerald reference devices must have an image version compatible with the image being flashed to the device under test.</p>"},{"location":"Infrastructure/Manufacture_Test/Introduction/","title":"Introduction","text":""},{"location":"Infrastructure/Manufacture_Test/Introduction/#about","title":"About","text":"<p>The manufacture test is the end stage in the board production cycle.This document provides a description on the hardware and software used to Flash and Test Emerald devices.There are 2 distinct steps that need to be completed before an Emerald device can move to the post production packaging stage. </p> <ol> <li> <p>Board flashing and configuration     a.  Load device images     b.  Configure Serial number, MPN and MAC addresses  </p> </li> <li> <p>Connector Testing     a.  USB connectors     b.  Audio connectors     c.  DVI/DP connectors  </p> </li> </ol>"},{"location":"Infrastructure/Manufacture_Test/Introduction/#version-3-updates","title":"Version 3 updates","text":"<p>This release adds EmeraldSE display port, EmeraldPE display port, and Emerald ZeroU display port boards to the manufacture test.  </p> <p>Video testing procedure has been significantly changed in this release. For all display port board types and DVI transmitter boards, video functionality is determined by reading the resolution configuration on-board using the capture_layer_cli command.   </p> <p>DVI receiver boards test video functionality instead by transmitting the OSD through one or both heads back to the test PC, where the received image is compared with the expected image.  </p> <p>A second reboot following board configuration(phase 2) has been removed for all board types except EmeraldSE transmitters.  </p> <p>Average flash and test times have been reduced from 7 minutes to just over 3 minutes in this release.  </p>"},{"location":"Infrastructure/Manufacture_Test/Operator_PC_Setup/","title":"Operator Station","text":"<p>The operator station is expected to be built and run on a Windows 10 PC. Located at the top-level directory for the Emerald Production test is a python script called setup_winexe.py. The following steps are required to build this executable.  </p> <p>Install Python from here  </p> <p>https://www.python.org/downloads/ </p> <p>Install Python PIP (this is used to install some dependencies) The steps here can be used to install PIP  </p> <p>https://phoenixnap.com/kb/install-pip-windows </p> <ol> <li>Clone the git repository from https://github.com/blackbox-rnd/production_test </li> <li>Open a command prompt on Windows (win+r, type cmd and press enter)  </li> <li>Navigate on the cmd prompt to Emerald_Production_Test  </li> <li> <p>Install the Operator Station python module dependencies. Located in the project top-level directory is a file called requirements.txt. Using PIP and this file the dependencies can be installed automatically. From the project top-level directory type: <code>C:\\Users\\user\\production_test\\Emerald_Production_Test&gt;python -m pip install -r requirements.txt</code> </p> </li> <li> <p>Create the Windows Executable package <code>C:\\Users\\user\\production_test\\Emerald_Production_Test&gt;python setup_winexe.py</code> </p> </li> <li> <p>If the steps above were successful you should now have a folder called BlackboxProduction at the project top-level directory  </p> </li> </ol> <p> </p> location of BlackboxProduction folder  <p>Located in the BlackboxProduction is the Windows executable. Also located in this folder are all the data files that the Operator Station application requires.  </p> <p>The BlackboxProduction folder can now be zipped and distributed to the Operator Station PC. Note: With the Windows 10 executable the application can be distributed to any Windows 10 PC and run without a python installation. Notes: It is also possible to run the Python scripts directly using Python3.8.   </p>"},{"location":"Infrastructure/Manufacture_Test/Test_PC_Setup/","title":"Flash & Test PC Setup","text":"<p>To setup the test PC you must get the Test_PC_Setup_Files folder from the repository at https://github.com/blackbox-rnd/production_test and store it on a USB.</p>"},{"location":"Infrastructure/Manufacture_Test/Test_PC_Setup/#step-1-install-ubunutu","title":"Step 1. Install Ubunutu","text":"<p>Install Ubuntu 20.04 on the Test PC. NOTE username and PC name MUST be 'blackbox', if this is not the case do not proceed until ubuntu is reinstalled with correct   username/PC name.</p>"},{"location":"Infrastructure/Manufacture_Test/Test_PC_Setup/#step-2-add-setup-scripts-to-home","title":"Step 2. Add Setup Scripts to home","text":"<p>copy the files test_pc_setup_script.sh and manufacture_pc_ansible_playbook.yaml, from the Test_PC_Setup_Files folder on the USB to the home folder on the test PC.</p>"},{"location":"Infrastructure/Manufacture_Test/Test_PC_Setup/#step-3-execute-setup-scripts","title":"Step 3. Execute Setup Scripts","text":"<p>First make sure your are connected to the lab network. Right-click empty space in the home folder and select 'open terminal'. Once in the terminal run the command sudo chmod +x test_pc_setup_script.sh.   Then run the command ./test_pc_setup_script.sh</p>"},{"location":"Infrastructure/Manufacture_Test/Test_PC_Setup/#step-4-setup-hardware","title":"Step 4. Setup hardware","text":"<p>Following successful execution of the setup script the PC will reboot, the user must ensure all hardware is setup in accordance with the hardware setup guide prior to proceeding.</p>"},{"location":"Infrastructure/Manufacture_Test/Test_PC_Setup/#step-5-create-ip-connection-profile","title":"Step 5. Create IP Connection Profile","text":"<p>Login into Ubuntu and select 'settings' from the drop down arrow in the top right corner of the screen.</p> <p> </p> Click the plus icon in the top right to add a new wired connection. <p> </p> Name your wired network <p> </p> Set IPv4 to manual, address to 192.168.1.2, and netmask to 255.255.255.0, then click add. <p> </p> Verify the network has been added to wired connections then click it to connect."},{"location":"Infrastructure/Manufacture_Test/Test_PC_Setup/#step-6-verify-power-control-unit-configuration","title":"Step 6. Verify Power Control Unit Configuration","text":"<p>Power control unit network configuration must be assesed before the test software will operate correctly. Power control unit needs to be assigned the IP address '192.168.1.110'. To check if this is already assigned open a web browser and try to access the page http://192.168.1.110/sysadmin.htm. If this is successful it will prompt you for a username:admin and password:admin, then display the correct IP configuration on the web access page. If this was unsuccessful follow step 7 to configure the power control unit from its default settings.</p>"},{"location":"Infrastructure/Manufacture_Test/Test_PC_Setup/#step-7-configure-power-control-unit","title":"Step 7. Configure Power Control Unit","text":"<p>If the power control unit web access page did not work, it is likely still at its default settings. Open a web browser and navigate to http://192.168.100.200/sysadmin.htm</p> <p> </p> With the IP configuration page open set the IP address to 192.168.1.110, netmask to 255.255.255.0, and uncheck DHCP client."},{"location":"Infrastructure/Manufacture_Test/access/","title":"Accessing the Flash","text":""},{"location":"Infrastructure/Manufacture_Test/access/#accessing-the-flash-and-test-station-from-operator-station","title":"Accessing the Flash and Test Station from Operator Station","text":"<p>For normal usage, the Flash and Test station will not be easily accessible to the operator or admin. It does not have a keyboard, mouse or display attached. On some occasions it may be necessary to login to the Flash and Test station for maintenance. Using MobaXterm (or equivalent SSH login app eg PUTTY) installed on the Operator station most maintenance or checks for the Flash and Test station can be done from the Operator Station.  </p> <ol> <li>Start a new session from Mobaxterm  </li> </ol> <p> </p> access flash and test pc throug moba  <p></p> <p></p> <p>Once logged in and command shell is accessible it is possible for example to check the status of the Flash and Test application. Other maintenance task can be done from here such as:  1.  Powering off or rebooting the Flash and Test station 2.  Viewing application logs  3.  Stopping and Restarting the Flash and Test application 4.  Viewing the artifacts (audio, images) for a DUT (within 7 days)  5.  Check the status of Flash and Test hardware 6.  Controlling the Head selected on DVI switcher and splitter 7.  Recording and Playing sound through Audio devices.  </p>"},{"location":"Infrastructure/Manufacture_Test/adding/","title":"Adding new Emerald Device Images","text":"<p>The Emerald device images used during flashing are stored on the Flash and Test station in the directory /opt/blackbox/device_images New images can be uploaded from the Operator Station to the Flash and Test station using WinSCP. Download and install WinSCP from: https://winscp.net/eng/download.php Follow the steps below to install new images (steps below assume .clu files contain the new images). After starting WinSCP, start a new session and enter the Flash and Test Station login details (or double-click on previously saved session).</p> <p></p> <p></p> <p>Accept the prompt to connect to unknown host. After logging in you should have 2 panes. On the left navigate to the location of the new .clu image files (in this examples below they are located on aUSB Memory key in the Emerald PE folder). On the right-pane WinSCP will default to the users home on the Flash and Test Station. In this case /home/blackbox/  On the Flash and Test Station pane navigate to the /opt/blackbox/device_images/ directory.</p> <p></p> <p>The example here will assume that the images are for an Emerald PE and that no images exist for the Emerald PE.  </p> <p>Note: Each product has its own image directory, so the steps below will need to be repeated for each Emerald product the new image version is applicable for. To upload the new images, select both .clu files in the left-pane, right-click and select upload</p> <p></p> <p>After uploading the first thing to note is that the .clu files executable flag is not set. CLU files are a self-extracting archive that execute bash shell commands so the executable need so to be set.  </p> <p></p> <p>Right-click the right-pane, select Static Custom Command and then Enter  </p> <p></p> <p>In the pop-up box enter the command chmod +x *.clu and click ok  </p> <p></p> <p>The .clu files should now have the executable flag set.   </p> <p></p> <p>The .clu files are now ready to be extracted. Right-click on the first .clu file select File Custom Command and then Execute. A new directory for the image file should appear.  </p> <p></p> <p></p> <p>After extracting the .clu files the right-pane should appear as above. The setup.sh and .clu files can be removed at this point. The final step is to add the new images to the Operator Station. Note: The Flash and Test station flashing process expects a fixed format for the image directory name for each image collection of files:  </p> <p>RX (decoder) -&gt; RX{TECH_NUMBER}{TECH_TYPE} TX (encoder) -&gt; TX{TECH_NUMBER}{TECH_TYPE} </p> <p>On the Operator Station GUI click the Edit Settings button and enter the password  </p> <p></p> <p>To add a new version the following fields must be filled out: 1.  New Image Version 2.  Image Tech Type 3.  Image Tech Number 4.  Compatible Version The fields can be pre-filled with an existing version by selecting an image version from the Select Image Version. Enter the new image version details and click Save New Image.  </p> <p>Note 1: Saving a new image version does not automatically make this a new active version. The old active version will still be flashed on the next DUT to be flashed. To set the new image version as the new active version click on \u201cSelect New Image\u201d select the version to be flashed for the Product indicate in the drop-down box \u201cSelect Product\u201d and then \u201cSave and Close\u201d  </p> <p>Note 2: The steps above must be repeated for each Emerald Product as the application does not automatically apply the changes across all Emerald Products.</p>"},{"location":"Infrastructure/Manufacture_Test/app_logging/","title":"Application Logging","text":""},{"location":"Infrastructure/Manufacture_Test/app_logging/#operator-station-logging","title":"Operator Station logging","text":"<p>The operator station uses Pythons built in logging facility to log all output from the application including logging from third party modules. The logging configuration is in a YAML file:  </p> <p><code>/Emerald_Production_Test/operator_station/application_logs_conf.yaml</code> </p> <p>The Operator Station as per this configuration is a RotatingFileHandler. This means the log file will be automatically restarted when the file reaches a set size.   </p> <p></p> <p>The maxBytes filed in the YAML configuration file is set to 10Mbytes. Also the rotating file handler will create a backup of the old log file. The number of backups is set in the field backupCount. The log file can be found in the Operator Station app directory.  </p> <p><code>&lt;PATH_TO_INSTALLATION&gt;\\BlackboxProduction\\operator_station\\operator_app.log</code> </p>"},{"location":"Infrastructure/Manufacture_Test/app_logging/#flash-and-test-station-application","title":"Flash and Test Station Application","text":"<p>The Flash and Test Station uses Pythons built in logging facility to log all output from the application including logging from third party modules. The Flash and Test station is divided into two processes: 1.  HTTP Server process (Gunicorn gateway and Flask App logs) 2.  Task Manager process (Task run logs)  </p> <p>Each process has its own logging configuration stored in two YAML config files:  </p> <p><code>/Emerald_Production_Test/flashandtest_station/server_logs_conf.yaml</code> </p> <p><code>/Emerald_Production_Test/flashandtest_station/task_logs_conf.yaml</code> </p> <p>Both of these processes open and write to the Application main log file. This log file is located at: <code>/var/log/blackbox/bbapp.log</code> </p> <p>The file handler for this log is known as a WatchedFileHandler, this allows a separate process (logrotate) to rotate the log file without interrupting the application logging. The log file is rotated based on a configuration file:  </p> <p><code>/Emerald_Production_Test/flashandtest_station/logrotate/blackbox_app</code> </p> <p>During installation and setup of the Flash and Test station application the logrotate conf file is copied to the logrotate.d directory. The Python logging facility that reads the initial task_logs_conf.yaml setups the logging to 3 different files  </p> <p></p> <p>The msgbox.tmp.log log file is used by the Operator Station GUI to display some progress information. The Operator Station polls the Flash and Test session for a online status update and during this poll reads the msgbox.tmp.log. The msgbox.tmp.log information is then display to the Operator. When a read of the msgbox.tmp.log occurs the file is truncated. To write a message to the msgbox.tmp.log any record must contain the string +MSGBOX, e.g. log.info (\u201c+MSGBOX :  Message to Operator\u201d)  </p> <p>The msgbox.tmp.log is located in /tmp/ this depends on reads to purge the contents of the file.  The bbapp.log rotation is controlled by the logrotate file blackbox_app conf file.  The current setting is rotate daily if file exceeds 20Mbyte and retain 30 backups.   </p> <p>The task log file is created at the start of each task, the new log file is given a name: {DUT_SERIAL_NUMBER}{TASK_NAME} </p> <p>This file is attached to the blackbox_task_manager.phase_exec logger at the start of the task and is closed and dettached at the end of a task. The location of the task log file is dependant on the DUT Product Name and Serial Number. For example an Emerald PE with Serial Number SEBB20100233 will locate its log file (and other aritifacts such as audio file and image files) at: <code>/home/&lt;user&gt;/blackbox_production/EMERALDPE/SEBB20100233/logs/SEBB20100233_PHASE1_20200202.log</code> </p> <p>The default base directory /home//blackbox_production/ is hardcoded into the bb_paths.py module. Python will automatically determine the user."},{"location":"Infrastructure/Manufacture_Test/bomgar-installation/","title":"Bomgar remote access","text":""},{"location":"Infrastructure/Manufacture_Test/bomgar-installation/#description","title":"Description","text":"<p>Bomgar is remote access software used by Blackbox IT department.</p>"},{"location":"Infrastructure/Manufacture_Test/bomgar-installation/#installation","title":"Installation","text":"<p>A specific bomgar binary was generated by Chad Nelson. The binary assigns the installation to a specific bomgar group within the bomgar console. That binary was generated on 2023-10-11 and lasts for a year.</p> <p>To install, get the bomgar binary generated on 2023-10-11, named <code>bomgar-scc-w0eec30zf56xhddw857wxf85jzgw7e15887df7ec40hc90.bin</code> (md5sum: CD61AF29B788AE6F5267ED025C298C6B).</p>"},{"location":"Infrastructure/Manufacture_Test/bomgar-installation/#install-the-binary","title":"Install the binary","text":"<p>Copy the  to the <code>/home/blackbox</code> directory on the manufacturing test machine <p>From a terminal on the manufacturing test machine:</p> Install bomgar binaries<pre><code>cd /home/blackbox\nchmod +x &lt;bomgar-binary-name&gt;\n\n# run the install binary\nsh ./&lt;bomgar-binary-name&gt; --install-dir /home/blackbox/jumpclient\n</code></pre> Output<pre><code>The client is now installed but is not started.  Please arrange for the\nfollowing init script to be run at boot or at the time of your choosing:\n        /home/blackbox/jumpclient/init-script\n\nThis init script accepts the conventional 'start', 'stop', 'restart' and\n'status' arguments.\n\nNote, this deployment is still subject to the configured mass deployment\nexpiry until it is started and successfully connects for the first time.\n\nThe following command may be run to uninstall the client.\n        /home/blackbox/jumpclient/uninstall\n\n\nYou can use the following systemd service unit to start it as a service.\nAdd it to /etc/systemd/system/ or ~/.config/systemd/user/, as appropriate:\n\n        [Unit]\n        Description=BeyondTrust Jump Client Service\n        Wants=network.target\n        After=network.target\n\n        [Service]\n        Type=forking\n        User=blackbox\n        ExecStart=/home/blackbox/jumpclient/init-script start\n        Restart=no\n        WorkingDirectory=/home/blackbox/jumpclient\n\n        [Install]\n        WantedBy=default.target\n</code></pre> <p>To initially check the installation, run <code>/home/blackbox/jumpclient/init-script start</code> and bomgar should be available on the console.</p>"},{"location":"Infrastructure/Manufacture_Test/bomgar-installation/#install-bomgar-service","title":"Install bomgar service","text":"Commands for installing service<pre><code># Create bomgar.service file\nsudo bash -c \"cat &gt; /etc/systemd/system/bomgar.service\" &lt;&lt; EOF\n[Unit]\nDescription=BeyondTrust Jump Client Service\nWants=network.target\nAfter=network.target\n\n[Service]\nType=forking\nUser=blackbox\nExecStart=/home/blackbox/jumpclient/init-script start\nRestart=no\nWorkingDirectory=/home/blackbox/jumpclient\n\n[Install]\nWantedBy=default.target\nEOF\n\n# Set permissions\nsudo chmod 777 /etc/systemd/system/bomgar.service \n\n# Run systemctl to check changes and enable the service\nsudo systemctl daemon-reload\nsudo systemctl start bomgar.service\nsudo systemctl enable bomgar.service\n\n# Reboot to verify the service installed properly\nreboot\n</code></pre>"},{"location":"Infrastructure/Manufacture_Test/bomgar-installation/#use-bomgar","title":"Use bomgar","text":"<p>remote.blackbox.com/login</p>"},{"location":"Infrastructure/Manufacture_Test/control_flow/","title":"Test control flow","text":""},{"location":"Infrastructure/Manufacture_Test/control_flow/#server_mainpy","title":"server_main.py","text":"<p>The server_main.py module is the entry point for the application, serving as the interface between the Gunicorn WSGI server and the Flask REST API. The Flask app, located in blackbox_http_api.py, provides the following functionality:                          </p> <pre><code>            Puts a job on the Redis-server queue            \n            Accepts GET requests for task status updates            \n            Accepts GET requests for Flash and Test station updates\n</code></pre> <p></p>"},{"location":"Infrastructure/Manufacture_Test/control_flow/#task_managerpy","title":"task_manager.py","text":"<p>The task_manager.py module is responsible for polling the Redis-server queue for new jobs and starting a new worker to handle each job. The worker, represented by a new Python instance, calls the task_runner() function located in blackbox_task_runner.py.            </p> <p></p>"},{"location":"Infrastructure/Manufacture_Test/control_flow/#task-request","title":"Task request","text":"<p>To initiate a task, the Operator Station posts task data to the Flash and Test station server. The data structure of the task request includes the following elements:</p> <p>'dut_data': A dictionary containing information about the device under test (DUT), such as the compatibility version, function, head type, MAC addresses, manufacturer part number, serial number, technology type, and version number.        'job_data_state': An integer representing the current state of the job data.           'task': A dictionary containing information about the task to be performed, including the task data, task function name, and task status.              The 'task' dictionary has the following sub-elements:           </p> <p>'data': A dictionary containing task-specific data, with the task function name (e.g. \"phase2\") as the key and an empty string as the value.           'enabled': A string representing the enabled status of the task.               'func': A string representing the name of the task function (e.g. \"phase2\").           'status': A variable that holds the status of the task.        An example of the task request data structure is as follows:            </p> <p>{'dut_data': {'compat_ver': '0x02',             'function': 'Encoder',               'head': 'Dual',              'mac0': '00:8C:10:20:FD:08',             'mac1': '00:8C:10:20:FD:09',             'mac2': '',              'mpn': '300-069-001',            'sn': 'SEBB20100035',            'tech_number': '9',              'tech_type': 'EMDPE',            'technology': 'EmeraldPE',               'ver': 'V6.5.0_r7228',                       'won': 'W-99999'},        'job_data_state': 0,       'task': {'data': {'phase2': ''},                'enabled': '',                 'func': 'phase2',              'status': None}}    </p>"},{"location":"Infrastructure/Manufacture_Test/dut_artifacts/","title":"The DUT Artifacts directory","text":"<p>During a flash and test session where Audio and Video connector testing was run, the Flash and Test station will record audio files and capture image files. These files are stored in the Artifacts directory (same location as the DUT log files).  </p> <p>For an Emerald PE with Serial number SEBB20100233 the directory layout will be: </p> <p><code>/home/&lt;user&gt;/blackbox_production/EMERALDPE/SEBB20100233/logs/</code></p> <p><code>/home/&lt;user&gt;/blackbox_production/EMERALDPE/SEBB20100233/audio/</code></p> <p><code>/home/&lt;user&gt;/blackbox_production/EMERALDPE/SEBB20100233/video/</code></p> <p>The audio and video files are not downloaded by the Operator Station. </p> <p>Note: Due to the size of captured files and volume of DUTs flashed and tested the artifacts (logs, audio and images) are only retained for 7 days. A Linux daily cronjob is run to purge any DUT directory that is older then 7 days.  </p> <p>This cronjob is located in the repository at:</p> <p><code>/Emerald_Production_Test/flashandtest_station/cron_scripts/blackbox_artifacts</code></p>"},{"location":"Infrastructure/Manufacture_Test/dut_artifacts/#audio-test-artifacts","title":"Audio Test Artifacts","text":"<p>During audio testing a number of files are created and stored in the audio artifiacts directory for the DUT. Example of DUT with serial number SEBB20100233</p> <p></p>"},{"location":"Infrastructure/Manufacture_Test/dut_artifacts/#video-test-artifacts","title":"Video Test Artifacts","text":"<p>During video testing a number of files are created and stored in the video artifiacts directory for the DUT. Example of Dual-Head DUT with serial number SEBB20100233</p> <p></p>"},{"location":"Infrastructure/Manufacture_Test/dut_artifacts/#viewing-the-dut-audio-and-image-files","title":"Viewing the DUT Audio and Image Files","text":"<p>Using MobaXterm with has Xserver installed and active by default, it is possible to view the Image files or Audio FFT/Timedomain plots directly on the Flash and Test station without downloading the files.   </p> <p>Open a new session in MobaXterm as shown in section Accessing the Flash and Test Station from Operator Station  </p>"},{"location":"Infrastructure/Manufacture_Test/dut_artifacts/#display-audio-plots","title":"Display Audio plots","text":"<p>Navigate to the DUT audio aritifact directory. Here the pdf plot files can be displayed using Linux command evince </p> <p></p>"},{"location":"Infrastructure/Manufacture_Test/dut_artifacts/#display-image-files","title":"Display Image files","text":"<p>Navigate to the DUT video aritifact directory. Here the bmp image files can be displayed using Linux command display.  </p> <p></p>"},{"location":"Infrastructure/Manufacture_Test/processes/","title":"Flash and Test Station processes","text":"<p>There are 4 main processes that must be running for the Flash and Test station to function correctly. The README.md in this repository provides the steps for setup and installation of these processes.  </p> <p>Linux Applications   Atftpd (service name: atftpd.service)  Redis-server (service name: redis-server.service)  </p> <p>Flash and Test Application  task_manager (service name: blackbox-manager.service)  Flask Rest-Api (service name: blackbox-gunicorn.service)  </p>"},{"location":"Infrastructure/Manufacture_Test/processes/#remote-control-of-flash-and-test-station-processes","title":"Remote control of Flash and Test station processes","text":"<p>Open a new session in MobaXterm as shown in section Accessing the Flash and Test Station from Operator Station  </p> <p>To view the status of Flash and Test services, run <code>systemctl status</code> on the various services:</p> Service status<pre><code>sudo systemctl status atftpd.service\nsudo systemctl status redis-server.service\nsudo systemctl status blackbox-manager.service\nsudo systemctl status blackbox-gunicorn.service\n</code></pre> <p>A typical response for services should show active (running). If the service failed to start or crashed, this should also be shown here. For more information on the reason view the /var/log/syslog </p> <p>Any of the four services above can also be stopped/restarted   </p> Stopping and restarting services<pre><code>sudo systemctl stop &lt;SERVICE_NAME&gt;\nsudo systemctl restart &lt;SERVICE_NAME&gt;\n</code></pre>"},{"location":"Infrastructure/Manufacture_Test/release_notes/","title":"V3.0 Release Notes","text":""},{"location":"Infrastructure/Manufacture_Test/test_procedures/","title":"Flash and Test Stages","text":"<p>When an operator has fully connected a board to all input and output cables for testing, the next step is to scan the barcodes on the board so the system knows the board type and associated tests to run.  </p> <p></p> <p>If a board has succeefully run through all test. The induvidual test bars will all turn green and display passsed on them, along with a final pop up window stating all tests have passed.  </p> <p></p> <p>If a board fails either phase 1 or phase 2 the test immediately failS, otherwise the tests will proceed through to the end. A board must pass all tests however, for it to pass the flash and test, otherwise the operator will be notified by a pop up bar stating the test has failed.  </p> <p></p>"},{"location":"Infrastructure/Manufacture_Test/test_procedures/#editing-settings","title":"Editing Settings","text":"<p>The test settings can be changed so that certain sets of tests can be enabled or disabled. To edit the settings, click the \"Edit Settings\" button and enter the operator station password (currently BBoxProduction$5). This password is configured in the file <code>operator_station/settings/users.yaml</code>.</p>"},{"location":"Infrastructure/Manufacture_Test/test_procedures/#flashing-and-configuration","title":"Flashing and Configuration","text":"<p>An outline of what occurs in each test is seen below. </p>"},{"location":"Infrastructure/Manufacture_Test/test_procedures/#phase-1","title":"Phase 1","text":"<p>Flashes the image files onto board. Following successful flashing of the board the power control unit power cycles the board, the system enters the Zynq menu on reboot sets default environment and boots. Note 4K boards are flashed from an SD card, instead of the usual phase 1 procedure a popup screen alerts the operator to remove the SD and change switches on the board before moving to phase 2.</p>"},{"location":"Infrastructure/Manufacture_Test/test_procedures/#phase-2","title":"Phase 2","text":"<p>Sets the MPDN configuration(MPN, Serial #, EEPROM), writes the EDID if it is a transmitter,then writes the MAC address from flash memory to eth0.  </p>"},{"location":"Infrastructure/Manufacture_Test/test_procedures/#testing","title":"Testing","text":""},{"location":"Infrastructure/Manufacture_Test/test_procedures/#mpdn","title":"MPDN","text":"<p>Uses the command e2_read to check the following information: tech type, head count, function(RX/TX), MPN, serial number, compatibility version. Additionally display port boards have the firmware version of the STDP4020 checked to screen for the defective version(1.2.0).     </p>"},{"location":"Infrastructure/Manufacture_Test/test_procedures/#image-version","title":"Image version","text":"<p>Checks the image version on the board and compares to the expected value.</p>"},{"location":"Infrastructure/Manufacture_Test/test_procedures/#mac0","title":"MAC0","text":"<p>Validates the correct MAC0 address is stored in /sys/class/net/eth0/address</p>"},{"location":"Infrastructure/Manufacture_Test/test_procedures/#mac1","title":"MAC1","text":"<p>Validates the correct MAC1 address is stored in /sys/class/net/eth1/address</p>"},{"location":"Infrastructure/Manufacture_Test/test_procedures/#mac2","title":"MAC2","text":"<p>Validates the correct MAC2 address is stored in /sys/class/net/eth2/address</p>"},{"location":"Infrastructure/Manufacture_Test/test_procedures/#tx-to-rx-audio","title":"Tx to Rx Audio","text":"<p>Creates RDP connection; Transmits .wav Tone; Captures Tone in FFT and Timedomain; Compares plots  </p>"},{"location":"Infrastructure/Manufacture_Test/test_procedures/#rx-to-tx-audio","title":"Rx to Tx Audio","text":"<p>Creates RDP connection; Transmits .wav Tone; Captures Tone in FFT and Timedomain; Compares plots</p>"},{"location":"Infrastructure/Manufacture_Test/test_procedures/#video-head-1","title":"Video Head 1","text":"<p>Depends on board type, see below.</p>"},{"location":"Infrastructure/Manufacture_Test/test_procedures/#video-head-2","title":"Video Head 2","text":"<p>Depends on board type, see below.</p>"},{"location":"Infrastructure/Manufacture_Test/test_procedures/#usb-back-upper","title":"USB back Upper","text":"<p>uses /usr/bin/find to search /sys/bus/usb/devices  for 1-1.1  </p>"},{"location":"Infrastructure/Manufacture_Test/test_procedures/#usb-back-lower","title":"USB Back Lower","text":"<p>1-1.2  </p>"},{"location":"Infrastructure/Manufacture_Test/test_procedures/#usb-front-left","title":"USB front Left","text":"<p>1-1.3  </p>"},{"location":"Infrastructure/Manufacture_Test/test_procedures/#usb-front-right","title":"USB Front Right","text":"<p>1-1.4  </p>"},{"location":"Infrastructure/Manufacture_Test/test_procedures/#usb-host","title":"USB Host","text":""},{"location":"Infrastructure/Manufacture_Test/test_procedures/#test-sfp","title":"Test SFP","text":"<p>In the case of 4k boards, both SFP ports are tested by querying the port active status</p>"},{"location":"Infrastructure/Manufacture_Test/test_procedures/#test-fan","title":"Test Fan","text":"<p>4K boards have an additional fan test which runs the fan using an on-board script and parses the return value of the script to determine success.</p>"},{"location":"Infrastructure/Manufacture_Test/test_procedures/#sync-logs-to-dut","title":"Sync logs to DUT","text":"<p>copies each test log from PC to /usr/local/production_logs                           </p>"},{"location":"Infrastructure/Manufacture_Test/test_procedures/#video-test-sequence","title":"Video Test Sequence","text":""},{"location":"Infrastructure/Manufacture_Test/test_procedures/#dvi-receivers","title":"DVI Receivers","text":"<p>DVI Receivers transmit the default OSD image from the video head through the switcher and back to the Pro Capture card on the flash and test machine where the received image is comapred to an expected copy using pythong functions calculating the MSE between the two images. In the case of a dual head DVI receiver the OSD is output on both video heads and the same procedure occurs.</p> <p></p>"},{"location":"Infrastructure/Manufacture_Test/test_procedures/#all-display-port-boards-and-dvi-transmitters","title":"All Display Port Boards and DVI Transmitters","text":"<p>In the case of all display port boards and DVI transmitters only, video functionality is determined by querying the captured display resolution through a CLI command.</p> <p></p>"},{"location":"Infrastructure/mkdocs/editing_mkdocs/","title":"Editing mkdocs","text":"<p>There are many tools to make writing mkdocs easier.</p> <ul> <li>VSCode</li> <li>Powertoy markdown previewer</li> </ul>"},{"location":"Infrastructure/mkdocs/editing_mkdocs/#vs-code","title":"VS Code","text":"<p>VSCode has good support for writing/previewing markdown and mkdocs. It has native support for markdown itself, and several extensions that improve the experience with mkdocs. With suitable extensions, it can spellcheck (with British English), render mkdocs previews (ctrl+shift+V), and render live, side-by-side previews (ctrl+K, V) including rendering previews of mermaid graphs/charts/drawings.</p> <p>After installing the extensions and configuration, markdown can be edited and displayed like this, with the markdown on the left and the preview on the right.  </p> <p>(note: The preview does not render the section numbering (i.e. 1.4.1) because that feature is provided by a non-standard mkdocs plugin during the mkdocs build that the vscode previewer does not know about.)</p>"},{"location":"Infrastructure/mkdocs/editing_mkdocs/#vscode-extensions-for-mkdocs","title":"VSCode Extensions for mkdocs","text":"<p>The following VSCode extensions make editing markdown/mkdocs and mkdocs configuration easier.</p> <ul> <li>Code Spell Checker with British English spelling. Enable in preferences-&gt;settings-&gt;extensions-&gt;Code Spell Checker-&gt;Language:en-GB</li> <li>Markdown linter (A VSCode extension) can highlight certain style warnings that can help create consistent documents and avoid certain kinds of formatting issues.</li> <li>Markdown Preview Mermaid Support (A VSCode extension) Adds Mermaid diagram and flowchart support to VS Code's builtin Markdown preview and to Markdown cells in notebooks.</li> <li>Yaml language support (A VSCode extension) highlights some kinds of yaml errors.</li> </ul> <p>Material for MkDocs provides its own schema.json for mkdocs.yml. Adding it to VSCode allows the syntax and style of the mkdocs yaml to be checked.</p> <p>Add the schema under the yaml.schemas key in your user or workspace <code>settings.json</code> :</p> settings.json<pre><code>{\n    \"yaml.schemas\": {\n        \"https://squidfunk.github.io/mkdocs-material/schema.json\": \"mkdocs.yml\"\n    },\n    \"yaml.customTags\": [\n        \"!ENV scalar\",\n        \"!ENV sequence\",\n        \"tag:yaml.org,2002:python/name:materialx.emoji.to_svg\",\n        \"tag:yaml.org,2002:python/name:materialx.emoji.twemoji\",\n        \"tag:yaml.org,2002:python/name:pymdownx.superfences.fence_code_format\",\n        \"tag:yaml.org,2002:python/name:mermaid2.fence_mermaid\"\n    ],\n    \"markdownlint.config\": {\n        \"MD024\": { \"allow_different_nesting\": true },\n    },\n}\n</code></pre>"},{"location":"Infrastructure/mkdocs/editing_mkdocs/#references","title":"References","text":"<ul> <li>Markdown Basic Syntax     Nearly all Markdown applications support the basic syntax outlined in the original Markdown design document.</li> <li>Markdown Extended Syntax Advanced features that build on the basic Markdown syntax.</li> <li>Mkdocs layout How to layout and write your Markdown source files.</li> <li>Material for mkdocs Material for MkDocs is a theme for MkDocs with useful extensions for writing documentation</li> </ul>"},{"location":"Infrastructure/mkdocs/flow_diagram/","title":"Flow Diagrams","text":"<p>Diagrams help to communicate complex relationships and interconnections between  different technical components, and are a great addition to project  documentation. MkDocs integrates with Mermaid.js, a  very popular and flexible solution for drawing diagrams. Much more comprehensive documentation can be found at the following links:</p> <ul> <li>Material for MkDocs Diagrams</li> <li>Mermaid Docs</li> </ul> <p>The most common diagrams we use are covered below.</p>"},{"location":"Infrastructure/mkdocs/flow_diagram/#usage","title":"Usage","text":""},{"location":"Infrastructure/mkdocs/flow_diagram/#sequence-diagrams","title":"Sequence Diagrams","text":"<p>Sequence diagrams describe a specific scenario as sequential interactions  between multiple objects or actors, including the messages that are exchanged between those actors:</p> Sequence Diagram<pre><code>```mermaid\nsequenceDiagram\n    participant RDP Client\n    participant Decoder FPGA\n    participant RPU0 DP\n\n    participant Transmitter\n\n    Transmitter-&gt;&gt;RDP Client: Resolution Change\n    RDP Client-&gt;&gt;RPU0 DP: IPI Interrupt Res Change\n    RPU0 DP-&gt;&gt;RDP Client: IPI ACK\n    RDP Client-&gt;&gt;Transmitter: Resolution Change Complete\n```\n</code></pre> sequenceDiagram     participant RDP Client     participant Decoder FPGA     participant RPU0 DP      participant Transmitter      Transmitter-&gt;&gt;RDP Client: Resolution Change     RDP Client-&gt;&gt;RPU0 DP: IPI Interrupt Res Change     RPU0 DP-&gt;&gt;RDP Client: IPI ACK     RDP Client-&gt;&gt;Transmitter: Resolution Change Complete"},{"location":"Infrastructure/mkdocs/flow_diagram/#flow-diagram","title":"Flow Diagram","text":"<p>Flowcharts are diagrams that represent workflows or processes. The steps are  rendered as nodes of various kinds and are connected by edges, describing the  necessary order of steps:</p> Flow Diagram<pre><code>```mermaid\ngraph LR\n    A((Start)) --&gt; B(Login Page)\n    B --&gt; C{Valid Username and Password?}\n    C -- Yes --&gt; D[Authenticate User]\n    D --&gt; E{Authentication Successful?}\n    E -- Yes --&gt; F[Redirect to Dashboard]\n    F --&gt; G((End))\n    C -- No --&gt; H[Display Error Message]\n    H --&gt; B\n```\n</code></pre> graph LR     A((Start)) --&gt; B(Login Page)     B --&gt; C{Valid Username and Password?}     C -- Yes --&gt; D[Authenticate User]     D --&gt; E{Authentication Successful?}     E -- Yes --&gt; F[Redirect to Dashboard]     F --&gt; G((End))     C -- No --&gt; H[Display Error Message]     H --&gt; B"},{"location":"Infrastructure/mkdocs/flow_diagram/#using-state-diagrams","title":"Using state diagrams","text":"<p>State diagrams are a great tool to describe the behaviour of a system, decomposing it into a finite number of states, and transitions between those states:</p> State diagram<pre><code>``` mermaid\nstateDiagram-v2\n  state fork_state &lt;&lt;fork&gt;&gt;\n    [*] --&gt; fork_state\n    fork_state --&gt; State2\n    fork_state --&gt; State3\n\n    state join_state &lt;&lt;join&gt;&gt;\n    State2 --&gt; join_state\n    State3 --&gt; join_state\n    join_state --&gt; State4\n    State4 --&gt; [*]\n```\n</code></pre> stateDiagram-v2   state fork_state &lt;&gt;     [*] --&gt; fork_state     fork_state --&gt; State2     fork_state --&gt; State3      state join_state &lt;&gt;     State2 --&gt; join_state     State3 --&gt; join_state     join_state --&gt; State4     State4 --&gt; [*]"},{"location":"Infrastructure/mkdocs/setup_local/","title":"How to Setup a Local Instance of the Embedded Documentation Portal","text":"<p>If you wish to update or create new pages in the Embedded Documentation Portal you must first setup your development machine to run a local instance. The following guide will describe these steps.</p>"},{"location":"Infrastructure/mkdocs/setup_local/#install-docker","title":"Install Docker","text":"<p>Info</p> <p>Depending on when your machine was created Docker may already be installed, you can run the following command to see if this is the case <pre><code>docker --version\n</code></pre></p> <p>We currently use the Material for MkDocs theme for MkDocs for technical documentation running in <code>docker</code>. To install docker on your machine follow the below guide</p> <p>Docker Install on 16.04</p>"},{"location":"Infrastructure/mkdocs/setup_local/#clone-documentation-repo","title":"Clone Documentation Repo","text":"<p>Warning</p> <p>You must have access to the documentation repo in the blackbox-rnd organisation to clone.</p> <p>In the home directory of your dev machine run the following commands</p> <pre><code>git clone git@github.com:blackbox-rnd/embedded_documentation.git\n</code></pre> <p>This will clone the latest version of the documentation source to your VM.</p>"},{"location":"Infrastructure/mkdocs/setup_local/#setup-the-docker-container","title":"Setup the Docker Container","text":"<p>We have some customisation that sits on top of the default Material Docker file so first we need to build the custom image.</p> Build custom image using local DockerFile<pre><code>cd embedded_documentation\n./build.sh\n</code></pre> <p>after the build is finished you can create your local site with</p> Start serving local site (docker instance named bb-docs)<pre><code>./start-container.sh\n</code></pre> <p>You can now navigate to your local instance by entering the following into a browser <code>{DEV_VM_IP}:8000</code>. Any changes you make in the markdown files will be picked up by your local instance of mkdocs.</p>"},{"location":"Infrastructure/mkdocs/setup_local/#debugging-issues","title":"Debugging Issues","text":"<p>When editing mkdocs files, syntax errors within those files (most likely the yaml) can cause the mkdocs build to fail. In that case, the mkdocs server exits leaving no server on port :8000/:8002.</p> <p>To debug those kinds of issues, the output of the mkdocs build can be displayed on the terminal by displaying the docker logs or by attaching to the docker instance to continuously display the logs.</p> Display current mkdocs build logs<pre><code>docker logs --details bb-docs\n</code></pre> Continuously display mkdocs build logs<pre><code>docker attach bb-docs\n</code></pre> <p>If there is an error in the mkdocs files, the build usually reports the line:column of the error breaking the build.</p> <p>The current docker configuration restarts the server after errors, you may need to reattach to the instance after the issue is resolved.</p> <p>The docker logs should point to the issue the container is having.</p>"},{"location":"architecture/Splashscreen_Design/","title":"Software Design Document Title: Splashscreen Feature Implementation","text":""},{"location":"architecture/Splashscreen_Design/#references","title":"References:","text":"<p>DPS Document (Splashscreen pg.102)</p>"},{"location":"architecture/Splashscreen_Design/#terms-and-definitions","title":"Terms and Definitions:","text":"Term Definition Splashscreen A custom image displayed as an alternative to the On-Screen Display (OSD) when a user terminates a connection using a hotkey sequence or when controlled by Boxilla. OSD On-Screen Display, a graphical user interface used in Blackbox products to facilitate user interaction. Boxilla A centralized management system for Blackbox products. HOTKEY_TERMINATE A MQTT topic used to communicate a request to terminate a connection and display the OSD. HOTKEY_SPLASH A MQTT topic used to communicate a request to terminate a connection and display the Splashscreen. REST_TERMINATE_OSD A MQTT topic used by the web service in Boxilla to communicate a request to terminate a connection and display the OSD. REST_TERMINATE_SPLASH A MQTT topic used by the web service in Boxilla to communicate a request to terminate a connection and display the Splashscreen. REST_TERMINATE_NO_OSD A MQTT topic used to communicate a request to terminate a connection without displaying the OSD TOGGLE_LABEL_TOPIC A MQTT topic used to communicate a request to toggle a label on or off over and active connection"},{"location":"architecture/Splashscreen_Design/#overview","title":"Overview:","text":"<p>Currently, when a user exits a connection, the OSD is displayed on the monitor; this feature adds an additional option to exit the connection and display their own custom disconnection splashscreen, such as a company logo on the monitor instead.    </p> <p>The Splashscreen feature enables users to terminate a connection using a hotkey sequence and display a custom image as the disconnection Splashscreen instead of the OSD (SS0001). REST can also control this functionality, enabling a user terminal to exit a connection and display the Splashscreen. The custom Splashscreen image can be loaded onto the board through REST.     </p> <p>This disconnection splashscreen will use the overlay mechanism, which is also currently used to display the OSD and connection labels. As the user list of the overlay mechanism grows, this design emphasises consolidating overlay control and underlying functionality into appropriate locations, allowing for a structured approach to its use and laying the foundation for integrating additional overlay users.    </p>"},{"location":"architecture/Splashscreen_Design/#design-detail","title":"Design Detail:","text":"<p>This design shall ensure all functionality is MQTT driven, modifying existing topics and creating new MQTT topics where needed.\\ Connection Control and the REST API are the drivers of the system behaviour. Connection control handles hotkey events from the user and publishes them to MQTT topics picked up by the connection manager. The rest API handles rest requests from Boxilla, where it publishes to MQTT topics picked up by the connection manager. Except for the TOGGLE_LABEL topic, the decision is to route all MQTT messages related to displaying the splashscreen or OSD through the Connection Manager. The connection manager is then responsible for publishing the related MQTT topics to the OSDManager, where control of the overlay mechanism is handled.    </p> <p>The OSD Manager shall be responsible for handling the individual requests to display the overlay and managing all calls to the overlay control function; it will decide how to respond to the request to display the overlay based on the OSD state. i.e. it will not call the overlay control function for the labels if the OSD state is not in a connection.    </p> <p>This overlay control function in the display layer shall control all underlying functions for configuring and displaying the overlay. This will require the creation of new functions for the splashscreen.       </p> graph TB   HK((\"Hotkeys\"))--&gt;| 0-9,P,L,S,O | CC[\"ConnectionControl\"]   CC -- \"Fav\" --&gt; CM[\"ConnectionManager\"]   CC -- \"Prev\" --&gt; CM   CC -- \"OSD\" --&gt; CM   CC -- \"Splash\" --&gt; CM   CC -- \"toggle Label\" --&gt; OM[\"OSDManager\"]   REST[\"REST API\"] -- \"Force\" --&gt; CM   REST -- \"T+s\" --&gt; CM   REST -- \"T+o\" --&gt; CM   REST -- \"logout s\" --&gt; CM   REST -- \"logout o\" --&gt; CM   CM -- \"display OSD\" --&gt; OM   CM -- \"display Splash\" --&gt; OM   CM -- \"display connection\" --&gt; OM   OM &lt;-- \"overlay control()\" --&gt; LO[\"DisplayLayer Common\"]    style HK fill:#f9f,stroke:#333,stroke-width:2px   style CC fill:#ccf,stroke:#333,stroke-width:2px   style CM fill:#ffc,stroke:#333,stroke-width:2px   style OM fill:#ff9,stroke:#333,stroke-width:2px   style REST fill:#f9c,stroke:#333,stroke-width:2px   style LO fill:#fc9,stroke:#333,stroke-width:2px"},{"location":"architecture/Splashscreen_Design/#main-design-impacts","title":"Main Design Impacts:","text":""},{"location":"architecture/Splashscreen_Design/#creation-of-framebuffer","title":"Creation of Framebuffer","text":"<p>A new framebuffer will be needed to be added to the DDR memory map for the custom splashscreen. The size of this framebuffer must fit an 800x600 image on 2K (SS0005) and a 1920x1080 image on 4k (SS0006) boards. On Bootup, the splashscreen image will be written to this framebuffer.    </p> 2K Register address Size 0x31E80000 0x1D4C00 4K Register address Size 0x7BA54000 0x7E9000"},{"location":"architecture/Splashscreen_Design/#uploading-a-custom-splashscreen-from-boxilla","title":"Uploading a custom Splashscreen from Boxilla","text":""},{"location":"architecture/Splashscreen_Design/#bootup-splashscreen","title":"Bootup Splashscreen","text":"<p>The Splashscreen feature will allow Boxilla to upload a custom Splashscreen image directly to the board. This implementation will necessitate the creation of a new API endpoint on the board in webservice.c. The endpoint will be designed to accept image data and transfer it to the board's correct frame buffer location. The image format and size checks will be left on the Boxilla side. However, this can be performed on the board if necessary.    </p> <ul> <li>A custom image loaded onto the board will be stored in     /usr/local/splashscreen with a pre-defined name, such as     custom_boot_splashscreen.rgba, then written to the NAND partition.</li> </ul>"},{"location":"architecture/Splashscreen_Design/#disconnection-splashscreen","title":"Disconnection Splashscreen","text":"<p>The Splashscreen feature will allow Boxilla to upload a custom Splashscreen image directly to the board. This implementation will necessitate the creation of a new API endpoint in webservice.c. The endpoint will be designed to accept image data and transfer it to the correct framebuffer location on the board. The image format and size checks will be left on the web-side. However, this can be performed on the board if deemed necessary.    </p> <ul> <li>A custom image loaded onto the board will be stored in     /usr/local/splashscreen with a pre-defined name, such as     custom_splashscreen.rgba, then written to the framebuffer.</li> </ul>"},{"location":"architecture/Splashscreen_Design/#feature-requirements","title":"Feature Requirements","text":"Current State OSD Displayed \u2013 Logged in OSD Displayed \u2013 At Login screen Connection Displayed with Label ON (assuming Label configured) Connection Displayed with No Label (assuming Label configured) Splashscreen displayed Action --- --- --- --- --- 1 Hotkey 0 Do nothing Do Nothing Exit connection and display OSD Exit connection and display OSD Display OSD 2 Hotkey S Display Splashscreen Display splashscreen Exit connection and display splashscreen Exit connection and display splashscreen Do nothing 3 Hotkey L Do nothing Do Nothing Turn Label OFF Turn Label ON Do nothing 4 Hotkey P Do nothing Do Nothing Launch Previous connection and turn on connection Label Launch Previous connection and turn on connection label Do nothing 5 Hotkey 1-10 (Favourite) Launch connection Do Nothing Exit current connection and launch new one with Label ON Exit current connection and launch new one with label ON Launch connection if User Logged in to the OSD, otherwise do nothing. 6 Connect from OSD Launch connection n/a n/a n/a n/a 7 OSD Crash On Restart, OSD is displayed Same Restart OSD, but leave connection displayed Restart OSD, but leave connection displayed Restart OSD, but leave Splashscreen displayed 8 OSD Controlled Restart Display OSD when it has restarted n/a n/a n/a n/a 9 Rest: Terminate Rest: Terminate + O Do nothing Do nothing Exit connection. Display OSD Exit connection. Display OSD Do nothing 10 Rest: Terminate + S Do nothing Do nothing Terminate connection. Display Splashscreen Terminate Connection. Display splashscreen Do nothing 11 Rest: Terminate_No_OSD Do nothing Do nothing Terminate connection. Display nothing Terminate connection. Display nothing Do nothing 12 Rest: Force Connect Rest : Make Connection (No splashscreen impacts) Login specified user and launch connection same Terminate existing connection and launch new one with Label ON Terminate existing connection and launch new one with Label ON Login specified user and launch connection 13 Rest: Login 14 Rest: Logout Rest: Logout + O Logout user on OSD Do nothing Terminate connection. Display OSD Login screen Terminate connection. Display OSD Login Screen Display OSD Login screen? Or do we stay on splashscreen 15 Rest: Logout + S Logout user on OSD. Display Splashscreen Display Splashscreen? Or do nothing? Logout user on OSD. Exit connection. Display Splashscreen Logout user on OSD. Exit connection. Display splashscreen Logout user on OSD. Stay Displaying splashscreen 16 RX Reboot Boot-up and display OSD. If auto-login/auto connect enabled, login/connect as required same Same Same Same 17 RX Restore Revert to \u2018default\u2019 splashscreen, then proceed as per Reboot same n/a n/a n/a 18 RX Upgrade As per RX Reboot same n/a n/a n/a"},{"location":"architecture/Splashscreen_Design/#mqtt-topic-publishersubscribers","title":"MQTT topic publisher/subscribers","text":"<p>Below is a table of the relevant MQTT topics to this feature. New topics are in green and existing topics which have been modified are in orange. The previous name is listed in the second column when the topic name has been changed.    </p> MQTT Topic Previous Topic Name Publisher Subscriber HOTKEY_TERMINATE TERMINATE_CONNECTION_CC_TOPIC Connection Control (CC) Connection Manager (CM) DISPLAY_OSD SHOW_OSD Connection Manager (CM) OSD Manager (OM) HOTKEY_SPLASH Connection Control (CC) Connection Manager (CM) DISPLAY_SPLASHSCREEN Connection Manager (CM) OSD Manager (OM) TOGGLE_LABEL Connection Control (CC) OSD Manager (OM) DISPLAY_CONNECTION HIDE_OSD Connection Manager (CM) OSD Manager (OM) REST_TERMINATE_OSD TERMINATE_CONNECTION_WEBSERVICE_TOPIC Webservice Connection Manager (CM) REST_TERMINATE_SPLASH Webservice Connection Manager (CM) FORCE_LOGOUT Webservice Connection Manager (CM) FORCE_LOGOUT_SPLASHSCREEN Webservice Connection Manager (CM)"},{"location":"architecture/Splashscreen_Design/#requirement-changes","title":"Requirement changes","text":"<p>Requirement 1: Hotkey O: </p> <p>Currently, CC publishes to Terminate_connection_topic, CM subscribes to this topic and only publishes to the osd_show topic if in a connected state. The OM receives the osd_show topic and displays the OSD.      </p> <p>Proposed changes :    </p> <ul> <li>CC will publish to new topic HOTKEY_TERMINATE</li> <li>CM will subscribe to the new topic and publish to the DISPLAY_OSD     topic in both a connected and idle state. this is now done in an idle state also, to facilitate toggling between the splashscreen and osd.      </li> <li>Any existing connection will be terminated.</li> <li>The OM will subscribe to DISPLAY_OSD, and on receipt, call the new     overlay control function with the osd and ON/OFF value as     parameters.</li> <li>The overlay control function will then call the required functions     to display the OSD.     </li> </ul> <p>Requirement 2 : Hotkey S: </p> <p>Proposed changes :    </p> <ul> <li>A new hotkey s will be created</li> <li>CC will publish to a new topic HOTKEY_SPLASH on the detection of     hotkey s.       </li> <li>The CM will subscribe to HOTKEY_SPLASH and publish to the new     DISPLAY_SPLASHSCREEN topic in both a connected and idle     state.</li> <li>Any existing connection will be terminated.</li> <li>The OM will subscribe to DISPLAY_SPLASHSCREEN and, on receipt, call     the new overlay control function with the splash and ON/OFF value as     parameters.</li> <li>The overlay control function will then call the newly created     functions to display the splashscreen.          </li> </ul> <p>Requirement 3 : Hotkey l: </p> <p>Currently on detection of hotkey l, CC calls the label functions in the display layer to display the label overlay.     </p> <p>Proposed changes :      </p> <ul> <li>CC will now publish to a new TOGGLE_LABEL on detecting hotkey l.</li> <li>The OM will subscribe to the TOGGLE_LABEL topic.</li> <li>On receipt of the TOGGLE_LABEL topic, if the osd_state is OSD_HIDE a function will be called to determine if the label is on or off.      </li> <li>The OM will call the overlay control function to turn the label on if it is off, or call the overlay control to turn it off if it is on( i.e toggling the label).       </li> <li>The OM will calls the overlay control function if the osd state     is OSD_HIDE to prevent labels from being called outside a     connection.        </li> </ul> <p>Requirement 4: Hotkey p: </p> <p>Proposed changes :    </p> <ul> <li>There are no explicit changes required here in order for the functional hotkey P to work the same way for the splashscreen as it does on the OSD.   </li> </ul> <p>Requirement 5: Hotkey 0-9(favourites)</p> <p>Proposed changes :      </p> <ul> <li>There are no explicit changes required here in order for the hotkeys favourites to work both on the splashscreen and OSD.      </li> </ul> <p>Requirement 6: Connect from OSD</p> <p>Proposed changes :    </p> <ul> <li>The CM will publish to the new topic DISPLAY_CONNECTION, which the OM will be subscribed to.      </li> <li>On receipt of DISPLAY_CONNECTION the OM calls the new overlay control function to display the label(if enabled).      </li> </ul> <p>Requirement 7: OSD crash</p> <ul> <li>OM will restart the Cloudgui process      </li> <li>the osd_init function will check if the osd_state is SHOW_OSD_STATE, SHOW_SPLASH_STATE, or HIDE_OSD_STATE.    </li> <li>If the osd or splashscreen are meant to be displayed they will be called, otherwise in a hide state nothing will be displayed.          </li> </ul> <p>Requirement 8: OSD controlled restart</p> <ul> <li>OM will restart the Cloudgui process      </li> <li>The osd_state will be set to SHOW_OSD_STATE.</li> <li>The osd_init function will call the overlay control function to display the OSD in this case.     </li> </ul> <p>Requirement 9: REST: Terminate (or Terminate + O)</p> <ul> <li>The REST API will publish to terminate_connection with the addtion of a new parameter o for the json object     </li> <li>The webservice will parse the topic AS BEFORE with the new parameter O, and publish to the new REST_TERMINATE_OSD mqtt topic     </li> <li>The webservice will parse the topic AS BEFORE with the new parameter O, and publish to the new REST_TERMINATE_OSD mqtt topic     </li> <li>CM will subscribe to new topic and publish to the DISPLAY_OSD topic in both a connected and idle state.     </li> <li>Subsequent behaviour as stated in requirement 1       </li> </ul> <p>Requirement 10: REST Terminate + S</p> <ul> <li>The REST API will publish to terminate_connection with the addtion of a new parameter s for the json object       </li> <li>The webservice will parse the topic as before with the new parameter s, and publish to the new REST_TERMINATE_SPLASH mqtt topic        </li> <li>The webservice will parse the topic as before with the new parameter s, and publish to the new REST_TERMINATE_SPLASH mqtt topic        </li> <li>CM will subscribe to new topic and publish to the DISPLAY_SPLASH topic in both a connected and idle state.        </li> <li>Subsequent behaviour as stated in requirement 2       </li> </ul> <p>Requirement 11: REST: Terminate_No_OSD</p> <ul> <li>No changes required.        </li> </ul> <p>Requirement 12: REST: ForceConnect / makeConnect</p> <ul> <li>The CM will process this request as normal.       </li> <li>Once the connection is successful, it will publish the \"DISPLAY_CONNECTION\" topic.        </li> <li>The OM will subscribe to the \"DISPLAY_CONNECTION\" topic.        </li> <li>On receipt of the \"DISPLAY_CONNECTION\" topic, the OM will call the overlay control functionality to overlay the connection label (if enabled).      </li> </ul> <p>Requirement 13: Rest: Login </p> <ul> <li>No changes required.      </li> </ul> <p>Requirement 14: REST:  Logout / Logout +O</p> <p>Proposed changes:     </p> <ul> <li>The webservice publishes the \"FORCE_LOGOUT\" topic.      </li> <li>Once the CM receives the \"FORCE_LOGOUT\" topic, it terminates the connection if one exists.      </li> <li>The CM then publishes the \"DISPLAY_OSD\" topic.      </li> <li>The OM subscribes to the \"DISPLAY_OSD\" topic and calls the overlay to display the OSD.      </li> </ul> <p>Requirement 15: REST: Logout + S</p> <p>Proposed changes:     </p> <ul> <li>A new topic called \"FORCE_LOGOUT_SPLASHSCREEN\" is required.     </li> <li>The CM subscribes to the \"FORCE_LOGOUT_SPLASHSCREEN\" topic.     </li> <li>Once the CM receives the \"FORCE_LOGOUT_SPLASHSCREEN\" topic, it terminates the connection if required and publishes the \"DISPLAY_SPLASHSCREEN\" topic.      </li> <li>The OM subscribes to the \"DISPLAY_SPLASHSCREEN\" topic and calls the overlay to display the splashscreen.      </li> </ul> <p>Requirement 16: RX Reboot </p> <ul> <li>No changes required.     </li> </ul> <p>Requirement 17: RX Restore</p> <p>Proposed changes:     </p> <ul> <li>Remove any custom splashscreen inmage from /usr/local .      </li> <li>Write the default boot splashscreen to the nand partition.     </li> </ul> <p>Requirement 18: RX Upgrade </p> <ul> <li>The script will check for a custom splashscreen image. If there is a custom splashscreen image the upgrade script will write it to the nand parititon, otherwise it will write the default image to the nand parititon.   </li> </ul>"},{"location":"architecture/Splashscreen_Design/#sequence-diagrams","title":"Sequence Diagrams","text":""},{"location":"architecture/Splashscreen_Design/#splashscreen-sequence","title":"Splashscreen sequence","text":"sequenceDiagram     participant User     participant CC     participant CM     participant OM     participant Client     participant Overlay     User-&gt;&gt;CC: Hotkey S     CC-&gt;&gt;CM: HOTKEY_SPLASH     CM-&gt;&gt;Client: Client Exit     Client-&gt;&gt;CM: client exited     CM-&gt;&gt;OM: DISPLAY_SPLASH     OM-&gt;&gt;Overlay: Display Splashscreen"},{"location":"architecture/Splashscreen_Design/#osd-sequence","title":"OSD sequence","text":"sequenceDiagram     participant User     participant CC     participant CM     participant OM     participant Client     participant Overlay     User-&gt;&gt;CC: Hotkey O     CC-&gt;&gt;CM: HOTKEY_TERMINATE     CM-&gt;&gt;Client: Client Exit     Client-&gt;&gt;CM: client exited     CM-&gt;&gt;OM: DISPLAY_OSD     OM-&gt;&gt;Overlay: Display OSD"},{"location":"architecture/Splashscreen_Design/#splashscreen-boxilla-sequence","title":"Splashscreen Boxilla sequence","text":"sequenceDiagram     participant Boxilla     participant Webservice     participant CM     participant OM     participant Client     participant Overlay     Boxilla-&gt;&gt;Webservice: REST_TERMINATE_SPLASH     Webservice-&gt;&gt;CM: REST_TERMINATE_SPLASH     CM-&gt;&gt;Client: Client Exit     Client-&gt;&gt;CM: client exited     CM-&gt;&gt;OM: DISPLAY_SPLASH     OM-&gt;&gt;Overlay: Display Splashscreen"},{"location":"architecture/Splashscreen_Design/#user-action-result-diagram","title":"User Action Result diagram","text":"graph TB   CC[\"Connection\"]   SS[\"Splashscreen\"]   OSD[\"OSD\"]   L[\"Label On/Off\"]   F[\"Favorite Connection\"]   CC -- \"hotkey   s \" --&gt; SS   CC -- \"hotkey   o \" --&gt; OSD   CC -- \"hotkey   l \" --&gt; L   SS -- \"hotkey   o \" --&gt; OSD   OSD -- \"hotkey   s \" --&gt; SS   SS -- \"hotkey   s \" --&gt; SS   OSD -- \"hotkey   o \" --&gt; OSD   OSD -- \"hotkey   favorite\" --&gt; F   SS -- \"hotkey   favorite\" --&gt; F   linkStyle 0 stroke:#2ecd71,stroke-width:2px;   linkStyle 1 stroke:#2ecd71,stroke-width:2px;   linkStyle 2 stroke:#2ecd71,stroke-width:2px;   linkStyle 3 stroke:#2ecd71,stroke-width:2px;   linkStyle 4 stroke:#2ecd71,stroke-width:2px;   linkStyle 5 stroke:#2ecd71,stroke-width:2px;   linkStyle 6 stroke:#2ecd71,stroke-width:2px;   linkStyle 7 stroke:#2ecd71,stroke-width:2px;   linkStyle 8 stroke:#2ecd71,stroke-width:2px;"},{"location":"architecture/Splashscreen_Design/#low-level-design-changes","title":"Low Level design changes","text":""},{"location":"architecture/Splashscreen_Design/#device-tree-changes","title":"Device Tree Changes","text":"<p>Changes are required in the following files:</p> <p>/board/blackbox/emeraldpe/decoder/devicetree.dts     /board/blackbox/emeraldse/decoder/devicetree.dts     /board/blackbox/emeralde/decoder/devicetree.dts    - The changes will involve adding a new framebuffer configuration for handling the splashscreen display. The addition will include the framebuffer address, size, dimensions, stride, and pixel format.</p>"},{"location":"architecture/Splashscreen_Design/#mqtt-messages","title":"MQTT Messages","text":"<ul> <li>The new MQTT messages that will be added or modified in enhanced_osd_common.h are HOTKEY_SPLASH, HOTKEY_TERMINATE, and TOGGLE_LABEL_TOPIC, REST_TERMINATE_OSD, REST_TERMINATE_SPLASH    </li> </ul>"},{"location":"architecture/Splashscreen_Design/#hotkey-changes","title":"Hotkey Changes","text":"<p>The following hotkey changes are required:    </p> <ul> <li>Add KEY_SPLASH to macros in BBConstants/hotkeyconstants.h and     libinputcontrol/linux/input.h.</li> <li>Add KEY_S to special keys in input_control, and inject KEY_SPLASH on     KEY_S event.</li> <li>Prevent special key KEY_SPLASH from being sent to the server in     bb_libinput.c.   </li> </ul>"},{"location":"architecture/Splashscreen_Design/#connection-control-changes","title":"Connection Control changes","text":"<p>The following connection control changes are required:    </p> <ul> <li>Add KEY_SPLASH case to ConnectionControl/main.c to publish MQTT     messages on HOTKEY_SPLASH topic.</li> <li>Modify the existing case for KEY_HOT_EXIT in     ConnectionControl/main.c to publish MQTT messages on     HOTKEY_TERMINATE topic.</li> <li>Modify the existing case for KEY_LABEL in ConnectionControl/main.c     to publish MQTT messages on TOGGLE_LABEL_TOPIC topic.    </li> </ul>"},{"location":"architecture/Splashscreen_Design/#connection-manager-changes","title":"Connection Manager Changes","text":"<p>The Connection Manager will implement the following changes:</p> <ul> <li>Subscribe to HOTKEY_SPLASH, HOTKEY_TERMINATE MQTT topics.</li> <li>Create cm_show_splashscreen function that works similarly to     cm_show_osd but publishes on DISPLAY_SPLASHSCREEN MQTT topic.</li> <li>Add cases for HOTKEY_TERMINATE_TYPE and HOTKEY_SPLASH_TYPE to all     states in the state machine.</li> <li>Modify turn_on_connection_label() to publish to TOGGLE_LABEL_TOPIC     MQTT topics for KVM and RDP connection types.</li> </ul>"},{"location":"architecture/Splashscreen_Design/#osd-manager-changes","title":"OSD Manager Changes","text":"<p>The following changes are required in the OSD Manager:</p> <ul> <li>Creation of a function to display the splashscreen similar to the     OSD show function, which then calls the overlay control function.</li> <li>Replace all existing calls to display layer functions such as     display_driver_common_configure_osd and     display_driver_common_turn_on_overlay with calls to the new overlay     control function.</li> <li>Subscribe to DISPLAY_SPLASHSCREEN and TOGGLE_LABEL_TOPIC MQTT     topics.</li> <li>Add SHOW_SPLASHSCREEN_EVENT and TOGGLE_LABEL_EVENT to     osd_mesg_types.</li> <li>Addition of the above events as switch cases.</li> <li>Splashscreen event case calling the newly created splashscreen function.   </li> <li>Toggle label event case, only proceeds if osd_state is     HIDE_OSD. It first calls a function that returns what the overlay is     pointed at and whether it is turned on.<ul> <li>If the returned value indicates the overlay is off, then the     overlay control function will be called to turn on the label.</li> <li>Otherwise, if the overlay is on, the overlay control function     will be called to turn off the label.    </li> </ul> </li> </ul>"},{"location":"architecture/Splashscreen_Design/#initd-changes","title":"Init.d Changes","text":"<ul> <li>Create new folders /opt/blackbox/default_splashscreens and     /usr/local/custom_splashscreen. These folders will contain the     default and custom splashscreen files, respectively.</li> <li>Add a script in init.d, which checks for a custom splashscreen     file's existence; if present, writes it to framebuffer 3.     Otherwise, the default splashscreen file is used.</li> </ul>"},{"location":"architecture/Splashscreen_Design/#displaylayer-common-changes","title":"Displaylayer Common Changes","text":"<p>The following new functions will be created in displaylayer_common, which already contains functions to display the OSD/Labels :</p> <ul> <li> <p>An overlay control function that calls the necessary functions to     configure and display the overlay. The comparable popup mechanism     functions are called for boards that don't support the overlay.  </p> <ul> <li>It takes an enum OverlayType (OSD, SPLASH, LABEL), and a switch     (OnOff) as parameters.</li> <li>If the switch value is ON the configure_overlay     function is called to configure the overlay.</li> <li>The function will call the correct configure function based off     board type</li> <li>If the switch value is ON and the current framebuffer IS the     OverlayType passed as a parameter, the overlay is turned on.</li> <li>If the switch value is OFF, the overlay is turned off and     de-configured using the turn_on_off_overlay function.     </li> </ul> </li> <li> <p>A common function that returns what framebuffer the overlay     mechanism is currently pointed at and whether it is on. This     function will call the appropriate function depending on the     resolution (2k or 4k).     </p> </li> <li> <p>An internal common function for configuring the splashscreen. Depending on the     resolution (2k or 4k), this function will call the appropriate     configuration function.</p> </li> <li> <p>An internal common function to configure the popup mechanism for SE dual head.     This function will call the relevant 2k function.</p> </li> <li> <p>A common function that returns whether the overlay is switched on or off. This called by the OSD manager </p> </li> </ul>"},{"location":"architecture/Splashscreen_Design/#overlay-control-function-flow-chart","title":"Overlay control function flow chart","text":"graph TB   Params[Params : enum OverlayType'OSD,SPLASH,LABEL', int OnOff] --&gt; CheckOnOff{Turn Overlay OnOff}   CheckOnOff -- On --&gt; SwitchFrameBuffer{Configure Overlay Switch}   SwitchFrameBuffer --&gt; ConnectionLabel[Configure Connection Label]   SwitchFrameBuffer --&gt; OsdBuffer[Configure OSD]   SwitchFrameBuffer --&gt; SplashScreenBuffer[Configure SplashScreen]   ConnectionLabel --&gt; TurnOn[Turn on overlay]   OsdBuffer --&gt; TurnOn[Turn on overlay]   SplashScreenBuffer --&gt; TurnOn[Turn on overlay]   TurnOn --&gt; End   CheckOnOff -- Off --&gt; SwitchOffOverlay[Turn off overlay]   SwitchOffOverlay --&gt; DeconfigureLabel[Deconfigure overlay]   DeconfigureLabel[Deconfigure overlay] --&gt; End"},{"location":"architecture/Splashscreen_Design/#cloudgui","title":"Cloudgui","text":"<p>While the Splashscreen is displayed, keyboard and mouse (K/M) input to the OSD must be prevented(DPS SS0016). This is performed in the Cloudgui through the use of an event filter, preventing K/M events to the OSD while in a connection and enabling them while out of a connection.     </p> <ul> <li>Previously, the Cloudgui only had to prevent K/M input to the OSD     while the CM was in a Connecting or Connected state for which     Cloudgui is subscribed through MQTT.</li> <li>Now, as the Splashscreen can also be displayed while in an IDLE     state, we must also prevent input to the OSD while the splashscreen is     displayed.      </li> <li>Two functions will be created in mainwindow.cpp that disable and     enable K/M input through an event filter.</li> <li>The mqtt_communicator in cloudgui subscribes to the connection state     and several other mqtt topics used as case switches that emit     signals picked up by mainwindow.cpp.</li> <li>mqtt_communicator will subscribe to the DISPLAY_OSD and     DISPLAY_SPLASH topics and use each as case switches to emit their     respective signals.</li> <li>if the case is DISPLAY_SPLASH, a signal will be emitted to call the     disable K/M input function in mainwindow.cpp.</li> <li>if the case is DISPLAY_OSD, a signal with be emitted to call the     enable K/M input function in mainwindow.cpp.    </li> <li>(Note) this should be further discussed with Olga as it relates to the Cloudgui. </li> </ul> sequenceDiagram     participant CM     participant CLOUDGUI_mqtt_communicator as CLOUDGUI(mqtt_communicator)     participant CLOUDGUI_mainwindow as CLOUDGUI(mainwindow)     CM-&gt;&gt;CLOUDGUI_mqtt_communicator: Publishes CM_STATE_CHANGED     CM-&gt;&gt;CLOUDGUI_mqtt_communicator: Publishes DISPLAY_OSD     CM-&gt;&gt;CLOUDGUI_mqtt_communicator: Publishes DISPLAY_SPLASH     CLOUDGUI_mqtt_communicator-&gt;&gt;CLOUDGUI_mainwindow: IDLE state(enable K/M), other CMstates(disable K/M)     CLOUDGUI_mqtt_communicator-&gt;&gt;CLOUDGUI_mainwindow: On DISPLAY_OSD, enable K/M inputs     CLOUDGUI_mqtt_communicator-&gt;&gt;CLOUDGUI_mainwindow: On DISPLAY_SPLASH, disable K/M inputs"},{"location":"architecture/Splashscreen_Design/#rest","title":"REST","text":"<p>Currently webservice receives REST commands from Boxilla such REST_TERMINATE_OSD. The changes that must be added to the webservice are:</p> <ul> <li>Handling the new commands for the REST_TERMINATE_SPLASHSCREEN. (SS0013)</li> <li>A facility to upload a custom splashscreen image to the board.  (SS0004)   </li> <li>A facility to upload a custom boot splashscreen image to the board.  (VI0016)   </li> <li> <p>Handle the new commands to logout and display the splashscreen instead fo the OSD. (SS0019)</p> </li> <li> <p>(Note) This requires further discussion with the boxilla team during the REST ramp up phase to solidify a design.        </p> </li> </ul>"},{"location":"architecture/Splashscreen_Design/#upgrading-a-board","title":"Upgrading a board","text":"<p>if there is a custom_splashscreen image present in /usr/local/splashscreen this will inform the upgrade script to write the custom image to the NAND partition instead of the default boot-up splashscreen.</p>"},{"location":"architecture/Splashscreen_Design/#restoring-a-board","title":"Restoring a board","text":"<p>Restoring a board will remove the custom_splashscreen image from /usr/local/splashscreen</p>"},{"location":"architecture/Splashscreen_Design/#security-considerations","title":"Security Considerations:","text":"<p>[Discuss any security or system integrity implications of the design change, such as opening new ports, impacting existing security levels, or changing security credentials.]</p>"},{"location":"architecture/Splashscreen_Design/#test-and-validation","title":"Test and Validation:","text":"<p>Use cases for validating the Splashscreen feature include:</p> <ul> <li>OSD expected functionality must be validated to ensure changes have     broken nothing.</li> <li>Labels functionality must be validated to ensure changes have broken     nothing.</li> <li>Ensure no keyboard or mouse inputs other than those outlined in     SS0016 can be made while at the splashscreen.</li> <li>User terminates a connection using hotkey + S, displaying the     Splashscreen instead of the OSD.</li> <li>User switches the overlay from Splashscreen to display the OSD using     hotkey + O.</li> <li>Boxilla terminates a connection and displays the Splashscreen on a     user terminal.</li> <li>User uploads a correct format Splashscreen image from a USB to the     new framebuffer through the OSD menu.</li> <li>User uploads an incorrect format Splashscreen image from a USB to     the new framebuffer through the OSD menu.</li> <li>Boxilla adds the correct format Splashscreen image on the Emerald     receiver.</li> <li>Boxilla adds an incorrect format Splashscreen image on the Emerald     receiver.</li> <li>User switches from the Splashscreen to a favourite connection using     a Favourite Hotkey.</li> <li>Emerald receiver displays the default Black Box Disconnection Splash     screen on factory reset.</li> <li>Emerald receiver displays the default Black Box Boot-up Splash     screen on power-on.</li> <li>Splashscreen displayed -- User moves mouse/hits keys on the keyboard     (events need to be ignored, bar hotkeys).</li> <li>Rest Request to terminate connection -- display OSD or Splashscreen     depending on the data (a new parameter is required to indicate     whether to display OSD or Splashscreen).</li> <li>Rest Request to Logout User -- once the connection is terminated,     either display OSD or Splashscreen depending on the data (new     parameter required to indicate whether to display OSD or     Splashscreen on user logout).</li> <li>Factory restore initiated -- Custom Splashscreen deleted.</li> <li>No custom Splashscreen on RX -- user selects Hotkey 's'. (reliant on     full requirements list)</li> </ul>"},{"location":"architecture/documentation_project/","title":"Estimated Engineering Days for Documentation Project","text":""},{"location":"architecture/documentation_project/#details","title":"Details","text":"<ul> <li>The names here are provisional and need further review</li> </ul> Item Estimate in Engineering Days details owner Main Documentation Preparation 28 Prepare full outline, agree sections and level of detail johnos Hardware Overview 21 Prepare diagrams and outline areas johnos Encoder 21 Description of Encoder Hardware johnos Video Path 21 Discussion on data path and  software role johnos Audio Path Encoder 16 Discussion on data path and  software role manas Decoder 21 Description of Decoder Hardware johnos Video Path Decoder 21 Introduction with diagrams johnos Data Path through the TOE 21 Discussion on data path and  software role manas Audio Path Decoder 16 Discussion on data path and  software role manas Software Architecture Overview 16 Update summary with detail of layers and components johnos Application Layer 5 Describe the main relation ship and roles eamon User Space Application Drivers 3 Show in diagram form Introduction with diagrams Proc File System 21 complete reference manas Init System 10 structure and purpose eamon Kernel Drivers 5 summary johnos Decoder 2 Introduction with diagrams johnos Emerald Software Subsystems 3 Introduction with diagrams johnos Common Software Subsystems 2 Introduction with diagrams johnos Libraries 2 Introduction with diagrams johnos Libsystem 21 Describe the range of functionality johnos Other C Libraries 21 Section on each library Networking 28 Detailed guide and breakdown manas REST API 5 Incorporate existing document and update eamon Webservice 10 Describe with diagrams eamon Software Update 10 Describe with diagrams manas SSH Communication 5 Describe in detail johnos Fan Control 3 Describe in detail manas DAL Data Abstraction layer 5 Describe with diagrams nicheal XML 3 Describe with diagrams johnos Sqlite 2 Describe with diagrams johnos System Watchdog 5 Describe in detail manas System Restore 4 Describe in detail johnos Factory Restore 2 Describe in detail manas System Libraries 2 Introduction with diagrams johnos Stats Monitor 5 Describe with diagrams johnos Fan Control Driver 2 Describe in detail manas Discovery 5 Describe in detail johnos Common Diagnostics 21 Describe in detail johnos USB 5 6 Describe in detail johnos/rodrigo KVM 21 Describe with diagrams johnos VMWare 21 Describe with diagrams johnos RDP 28 Describe with diagrams johnos Decoder Specific Software Subsystems 3 Introduction with diagrams johnos Check Reset Pin - Encoder Only 2 Describe in detail eamon Common Kernel Modules 2 Introduction with diagrams johnos TOE Driver 28 Describe with diagrams from Software perspective manas AVAE Driver 28 Describe with diagrams from Software perspective manas KRDM Driver 3 Describe in detail micheal Audio Codec Drivers 10 Describe in detail micheal Other Kernel Drivers 10 Describe in detail johnos Encoder Specific Subsystems 2 Introduction with diagrams johnos Capture  low level 21 Describe in detail micheal Display Port low level 28 Describe with diagrams from Software perspective micheal DVI  low level 21 Describe with diagrams from Software perspective micheal Capture Layer low level 21 Describe with diagrams from Software perspective micheal Error Handling integration into applications 10 Describe in detail eamon Display Interfacing to main apps 21 Describe with diagrams from Software perspective micheal Display Port Interfacing to main apps 21 Describe with diagrams from Software perspective micheal DVI Interfacing to main apps 21 Describe with diagrams from Software perspective micheal Data Flow Controller Main Configuration for Capture 10 Describe with diagrams from Software perspective johnos Check Button Application 1 Describe in detail eamon Connection Control - Decoder Only 5 Describe in detail johnos Virtual Machine Support 10 Describe in detail johnos VMWare interface to system 21 Describe in detail johnos VM RDP Lossless 4K  interface to system 21 Describe in detail johnos VM RDP 2K interface to system 21 Describe in detail johnos Other Connection Protocols 10 Describe in detail johnos VNC 10 Describe in detail johnos SSH 10 Describe in detail johnos Display Layer 10 Describe in detail eamon OSD 28 Describe in detail eamon, olga KVM Client 28 Describe in detail johnos Error Handling 10 Describe in detail eamon Decoder Kernel Modules 2 Introduction with diagrams johnos Audio 21 Describe in detail manas Display Drivers 10 Describe in detail micheal USB 5 Introduction with diagrams johnos, rodrigo System Wide Connection Management 28 Describe with diagrams from Software perspective johnos, manas Creating an Optimised Unicast Connection 28 Describe with diagrams from Software perspective manas Creating an Optimised Municast Connection 21 Describe with diagrams from Software perspective manas Creating an Lossless Unicast Connection 21 Describe with diagrams from Software perspective manas Creating an Lossless Mulicast Connection 21 Describe with diagrams from Software perspective manas Multiunicast Peer Joining 10 Describe with diagrams from Software perspective manas Multicast Peer Joining 10 Describe with diagrams from Software perspective manas Memory Maps 5 Describe with diagrams from Software perspective micheal Connection Control 21 Describe with diagrams from Software perspective johnos Hot Key Processing 10 Describe with diagrams from Software perspective johnos Decoder Diagnostics 2 Introduction with diagrams johnos Decoder FPGA Register Diagnostics 5 Describe in detail johnos OSD/Connection state control (startgui) 10 Needs revision based on OSD Enhancement eamon Server Application 28 Describe with diagrams from Software perspective johnos Encoder Diagnostics 10 Describe with diagrams from Software perspective johnos Encoder Kernel Modules 2 Introduction with diagrams johnos USB Drivers 28 Describe with diagrams from Software perspective johnos, rodrigo Automation hooks 20 Describe with diagrams from Software perspective johnos"},{"location":"architecture/documentation_project/#total-estimates","title":"Total Estimates","text":"Days Months 1282 9"},{"location":"architecture/documentation_project/#estimated-quarterly-maintenance-to-keep-documentation-up-to-date","title":"Estimated Quarterly Maintenance to keep documentation up to date","text":"Engineering Days Engineering Months 256.4 1.83"},{"location":"architecture/emerald_software_system_reference/","title":"Appliance Software System Reference","text":""},{"location":"architecture/emerald_software_system_reference/#emerald-software-system-reference","title":"Emerald Software System Reference","text":"<p>Original Author: John O\u2019Sullivan</p> <pre><code>This document is a System Reference for Emerald Appliances\n</code></pre>"},{"location":"architecture/emerald_software_system_reference/#references","title":"References","text":"<ul> <li>Marketing Requirements https://bboxjira.atlassian.net/wiki/spaces/EM/pages/1230700564/Emerald+4K-+6.0</li> <li>ENG-0008-026 4K/2K Interoperability Analysis</li> <li>ENG-0008-025 4K/2K Architectural Impact</li> <li>Link Aggregation Control Protocol (LACP),</li> </ul>"},{"location":"architecture/emerald_software_system_reference/#terms-and-definitions-used-in-blackbox","title":"Terms and Definitions used in Blackbox","text":"Term Definition CLU Image A compressed encrypted file format used for 2K appliance software images. Decoder See Receiver Encoder See Transmitter FIT Image A compressed encrypted file format used for 4K appliance software images Municast The use of multiple TCP streams to share a video from a single transmitter to multiple receivers Multicast The use of an individual Multicast UDP stream to share a video from a single transmitter to multiple receivers. Blackbox uses reliable multicast so that any dropped frames are resent and no data loss occurs. Pixel Perfect Mode The original scheme used by 4K products where the entire frame of the source video was captured continuously and sent with compression to the decoder. RFX RemoteFX Codec Extension developed by Microsoft which uses a lossy image codec to encode screen images with efficient and effective compression. This is the lossy scheme used in Blackbox products. Receiver A Blackbox appliance that receives and displays a video stream. A receiver is also referred to as a client or decoder. RPU Real Time Processing Unit. The Zynq Ultrascale+ MPSoC features two A5 RPUs. In our 4K products one of these is used for Display Port functionality using IP provided using Xilinx. The second on the encoder side acts as a video processing feed between FPGA and TOE Shared Mode A generic term used in Blackbox to describe schemes that allow more than one receiver view the video source from a transmitter. See Municast and Multicast Tile Differencing Mode A lossless scheme used to reduce bandwidth; only tiles (portions of the screen) that change are send from encoder to decoder. TOE TCP Offload Engine: A hardware based TCP stack used to accelerate the transmission of data. This is essential in high bandwidth, low latency transmission of video and audio. Technical Debt Technical Dept is a concept in software development that reflects the implied cost of additional rework caused by choosing an easy (limited) solution now instead of using a better approach that would take longer. Transmitter A Blackbox appliance that captures and transmits a video from a source. A transmitter is also referred to as a server or encoder. Video Source A source of input for a Transmitter, normally the DVI or Display Port output of a PC. <p>Table 1: Terms and Definitions</p>"},{"location":"architecture/emerald_software_system_reference/#overview","title":"Overview","text":"<p>The purpose of this document is to provide a system design reference for Emerald appliances. All design and architectural analysis documents should reference this document when proposing changes to the system.</p> <p>For this document to remain current all changes to the system must be reflected here.</p> <p>Because it is not feasible to retrospectively add all of the current design we recommend that you add the required high level design associated with a subsystem for each new feature.</p>"},{"location":"architecture/emerald_software_system_reference/#architectural-walk-through","title":"Architectural Walk Through","text":"<ul> <li>see Hardware Overview </li> <li>see USB Architecture</li> <li>see Client</li> <li>see Server</li> </ul>"},{"location":"architecture/emerald_software_system_reference/#concentration-of-software-effort","title":"Concentration of Software Effort","text":"<ul> <li>Synchronization of software and hardware - A client leaves a shared connection, who detects it and heals the system?</li> <li>Shared modes of operation are complex, parties leaving joining without visible blips, unexpected events, wide range of network bandwidth profiles, Lan versus Wan.</li> <li>Feature development - In recent months it has been hardware led, interoperability, 2K 4K, lossless, optimised, scaling, dual stream.</li> <li>System is very feature rich and as a result very complex.</li> <li>There is a need to move forward with new versions of tools, kernel, Xilinx IP, security patching.</li> <li>Work in the next few months is feature driven, Push and Get, Realtime Status, Slide and Glide. These are all predominantly software driven.</li> </ul>"},{"location":"architecture/emerald_software_system_reference/#hardware-overview","title":"Hardware Overview","text":"<p>For a more detailed description of the hardware, see Hardware Overview </p>"},{"location":"architecture/emerald_software_system_reference/#software-architecture","title":"Software  Architecture","text":"<p>The design of Emerald Software follows the model outlined below:  Figure 3: Emerald Software Architecture</p> <p></p> <p>Figure 4: Emerald Software Components</p>"},{"location":"architecture/emerald_software_system_reference/#application-layer","title":"Application Layer","text":"<p>The application layer consists of application that control and configure the primary modes of operation. For example, on the decoder device, the primary application is the bbfreeRDP client. This is responsible for making a connection and configuring the correct hardware modes for a defined connection type.</p> <ul> <li>Applications should not contain complex logic for configuring hardware. All of that complexity should be in the Application or kernel driver.</li> <li>Applications should call C-Library functions rather than the underlying hardware drivers. This provides an abstraction and will allow us eventually replace the primary applications with more streamlined refactored alternatives.</li> </ul>"},{"location":"architecture/emerald_software_system_reference/#user-space-application-drivers","title":"User Space Application Drivers","text":"<p>There are two User Space Application drivers, a capture layer and a display layer. These provide access to the lower level functionality associated with the Display and capture subsystems.</p>"},{"location":"architecture/emerald_software_system_reference/#proc-file-system","title":"Proc File System","text":"<p>The proc file system provides an API and abstraction into FPGA based IP for the TOE and AVAE. The Proc file system provides simple functional interfaces to the C-Library functions that call them.</p>"},{"location":"architecture/emerald_software_system_reference/#init-system","title":"Init System","text":"<ul> <li> <p>The init system is based on init.d, </p> </li> <li> <p>To be Completed</p> </li> </ul>"},{"location":"architecture/emerald_software_system_reference/#kernel-drivers","title":"Kernel Drivers","text":"<p>Kernel drivers provide hardware abstraction into FPGA based IP. All hardware complexity should be encapsulated in the driver, and the driver should provide simple functional interfaces to the scripts or C Library functions that will call them. We are currently using Kernel version: 4.9.0-xilinx-v2017.4 (the current mainline kernel is at 5.17-rc7)</p>"},{"location":"architecture/emerald_software_system_reference/#encoder","title":"Encoder","text":""},{"location":"architecture/emerald_software_system_reference/#video-path","title":"Video Path","text":"<p>Video data enters the encoder from the DVI/Display Port interfaces. The data is quantised into 64 pixel tiles. Captured video is stored in RGB format in four capture buffers. Video can be sent in lossless form (4K devices only) or in optimised form (2K devices and 4K devices) There are four capture buffers encode buffers which store the incoming data. Each capture buffer holds a frames worth of data. Both 4K an 2K transmitter products have an differencing stage that allows us detect changes between video frames. Only video capture data that differs from the previously captured data is transmitted.</p> <p>For optimised video there is an additional encoding stage required. 2K video is encoded using IP based on the RemoteFX Codec from Microsoft. The encoded video is stored in YUV format if four encoder buffers.</p> <p>The AVAE is responsible for moving the data from the video buffers to the TOE, it services the memory by processing a series of descriptors that point to the video data. Video data must be encapsulated as an RFX packet and the AVAE performs this operation.</p> <ul> <li>To be Completed</li> </ul>"},{"location":"architecture/emerald_software_system_reference/#audio-path","title":"Audio Path","text":"<ul> <li>To be Completed</li> </ul>"},{"location":"architecture/emerald_software_system_reference/#decoder","title":"Decoder","text":""},{"location":"architecture/emerald_software_system_reference/#video-path_1","title":"Video Path","text":"<ul> <li>To be Completed</li> </ul>"},{"location":"architecture/emerald_software_system_reference/#data-path-through-the-toe","title":"Data Path through the TOE","text":"<ul> <li>To be Completed</li> </ul>"},{"location":"architecture/emerald_software_system_reference/#audio-path_1","title":"Audio Path","text":"<ul> <li>To be Completed</li> </ul>"},{"location":"architecture/emerald_software_system_reference/#decoder_1","title":"Decoder","text":"<ul> <li>input_leds</li> </ul>"},{"location":"architecture/emerald_software_system_reference/#emerald-software-subsystems","title":"Emerald Software Subsystems","text":""},{"location":"architecture/emerald_software_system_reference/#common-software-subsystems","title":"Common Software Subsystems","text":""},{"location":"architecture/emerald_software_system_reference/#libraries","title":"Libraries","text":""},{"location":"architecture/emerald_software_system_reference/#libsystem","title":"Libsystem","text":"<ul> <li>To be Completed</li> </ul>"},{"location":"architecture/emerald_software_system_reference/#other-c-libraries","title":"Other C Libraries","text":"<p>A number of C-Libraries provide the functionality required to interface with the hardware drivers that provide access to the TOE, DFC and AVAE components. </p> <ul> <li>gpcbus</li> <li>libb64</li> <li>libbbframework</li> <li>libdatabase</li> <li>libedid</li> <li>libhal</li> <li>libinputcontrol</li> <li>libjwt</li> <li>libkvm</li> <li>librestapi</li> <li>libsecurebus</li> <li>libsystem</li> <li>libvkbd</li> <li>logging</li> </ul>"},{"location":"architecture/emerald_software_system_reference/#networking","title":"Networking","text":"<p>see  Networking System Reference</p>"},{"location":"architecture/emerald_software_system_reference/#rest-api","title":"REST API","text":""},{"location":"architecture/emerald_software_system_reference/#webservice","title":"Webservice","text":""},{"location":"architecture/emerald_software_system_reference/#software-update","title":"Software Update","text":""},{"location":"architecture/emerald_software_system_reference/#ssh-communication","title":"SSH Communication","text":""},{"location":"architecture/emerald_software_system_reference/#fan-control","title":"Fan Control","text":"<p>User Space, </p> <ul> <li> <p>To be Completed </p> </li> <li> <p>/usr/sbin/fancontrol</p> </li> </ul>"},{"location":"architecture/emerald_software_system_reference/#dal-data-abstraction-layer","title":"DAL Data Abstraction layer","text":""},{"location":"architecture/emerald_software_system_reference/#xml","title":"XML","text":""},{"location":"architecture/emerald_software_system_reference/#sqlite","title":"Sqlite","text":""},{"location":"architecture/emerald_software_system_reference/#system-upgrade","title":"System Upgrade","text":""},{"location":"architecture/emerald_software_system_reference/#system-watchdog","title":"System Watchdog","text":""},{"location":"architecture/emerald_software_system_reference/#system-restore","title":"System Restore","text":""},{"location":"architecture/emerald_software_system_reference/#factory-restore","title":"Factory Restore","text":""},{"location":"architecture/emerald_software_system_reference/#system-libraries","title":"System Libraries","text":""},{"location":"architecture/emerald_software_system_reference/#stats-monitor","title":"Stats Monitor","text":"<ul> <li>/usr/bin/statsmonitor</li> </ul> <p>See Statistics Monitor </p>"},{"location":"architecture/emerald_software_system_reference/#fan-control-driver","title":"Fan Control Driver","text":"<p>Responsible for the control of the fans through PWM on the 4K devices</p> <ul> <li>pwm_xlnx      </li> </ul>"},{"location":"architecture/emerald_software_system_reference/#discovery","title":"Discovery","text":"<ul> <li> <p>restart_discovery.sh</p> </li> <li> <p>discovery_appliance</p> </li> </ul>"},{"location":"architecture/emerald_software_system_reference/#common-diagnostics","title":"Common Diagnostics","text":"<p>see  Diagnostics System Reference</p>"},{"location":"architecture/emerald_software_system_reference/#usb","title":"USB","text":"<p>For a more detailed breakdown of USB, see USB System Reference </p>"},{"location":"architecture/emerald_software_system_reference/#kvm","title":"KVM","text":"<p>USB System Reference provides more details</p>"},{"location":"architecture/emerald_software_system_reference/#vmware","title":"VMWare","text":"<ul> <li>/usr/bin/vmware-usbarbitrator</li> </ul>"},{"location":"architecture/emerald_software_system_reference/#rdp","title":"RDP","text":"<p>USB System Reference provides more details</p>"},{"location":"architecture/emerald_software_system_reference/#decoder-specific-software-subsystems","title":"Decoder Specific Software Subsystems","text":""},{"location":"architecture/emerald_software_system_reference/#check-reset-pin-encoder-only","title":"Check Reset Pin - Encoder Only","text":"<ul> <li>/opt/blackbox/check_reset_pin.sh</li> </ul>"},{"location":"architecture/emerald_software_system_reference/#common-kernel-modules","title":"Common Kernel Modules","text":""},{"location":"architecture/emerald_software_system_reference/#toe-driver","title":"TOE Driver","text":"<p>Kernel driver to the TOE hardware described above</p>"},{"location":"architecture/emerald_software_system_reference/#avae-driver","title":"AVAE Driver","text":"<p>Kernel driver to the AVAE hardware described above</p> <ul> <li>blackbox_aae</li> </ul>"},{"location":"architecture/emerald_software_system_reference/#krdm-driver","title":"KRDM Driver","text":"<p>Provides various synchronization functions associated with the YUV mode of operation for KVM and the VM RDP support on 2K products. These drivers are not used on 4K products.</p>"},{"location":"architecture/emerald_software_system_reference/#audio-codec-drivers","title":"Audio Codec Drivers","text":"<p>Provides Encoding and Decoding logic for the audio devices on the RX and TX - see below for encoder and decoder variants</p>"},{"location":"architecture/emerald_software_system_reference/#other-kernel-drivers","title":"Other Kernel Drivers","text":"<ul> <li>uio_pdrv_genirq  </li> </ul>"},{"location":"architecture/emerald_software_system_reference/#encoder-specific-subsystems","title":"Encoder Specific Subsystems","text":""},{"location":"architecture/emerald_software_system_reference/#capture","title":"Capture","text":""},{"location":"architecture/emerald_software_system_reference/#display-port","title":"Display Port","text":""},{"location":"architecture/emerald_software_system_reference/#dvi","title":"DVI","text":""},{"location":"architecture/emerald_software_system_reference/#capture-layer","title":"Capture Layer","text":"<p>The Data Flow Controller is managed by the Display layer library on the Receiver.</p> <ul> <li>To be Completed</li> </ul>"},{"location":"architecture/emerald_software_system_reference/#data-flow-controller-main-configuration-for-capture","title":"Data Flow Controller Main Configuration for Capture","text":"<ul> <li>To be Completed</li> </ul> <p>For a more detailed description of the hardware, see Hardware Overview of Data Flow Controller </p>"},{"location":"architecture/emerald_software_system_reference/#check-button-application-decoder-only","title":"Check Button Application - Decoder Only","text":"<ul> <li>/usr/bin/checkbutton</li> </ul>"},{"location":"architecture/emerald_software_system_reference/#connection-control-decoder-only","title":"Connection Control - Decoder Only","text":"<ul> <li>/usr/bin/connection_control</li> </ul>"},{"location":"architecture/emerald_software_system_reference/#virtual-machine-support","title":"Virtual Machine Support","text":""},{"location":"architecture/emerald_software_system_reference/#vmware_1","title":"VMWare","text":""},{"location":"architecture/emerald_software_system_reference/#vm-rdp-lossless-4k","title":"VM RDP Lossless 4K","text":""},{"location":"architecture/emerald_software_system_reference/#vm-rdp-2k","title":"VM RDP 2K","text":""},{"location":"architecture/emerald_software_system_reference/#other-connection-protocols","title":"Other Connection Protocols","text":""},{"location":"architecture/emerald_software_system_reference/#vnc","title":"VNC","text":""},{"location":"architecture/emerald_software_system_reference/#ssh","title":"SSH","text":""},{"location":"architecture/emerald_software_system_reference/#display-layer","title":"Display Layer","text":"<p>See Display Layer Subsystem</p>"},{"location":"architecture/emerald_software_system_reference/#osd","title":"OSD","text":""},{"location":"architecture/emerald_software_system_reference/#kvm-client","title":"KVM Client","text":"<p>See KVM Client Subsystem</p>"},{"location":"architecture/emerald_software_system_reference/#error-handling","title":"Error Handling","text":"<p>The Error Handling System Reference provides more details</p>"},{"location":"architecture/emerald_software_system_reference/#decoder-kernel-modules","title":"Decoder Kernel Modules","text":""},{"location":"architecture/emerald_software_system_reference/#audio","title":"Audio","text":"<ul> <li>blackbox_tlv320aic26</li> </ul>"},{"location":"architecture/emerald_software_system_reference/#display-drivers","title":"Display Drivers","text":"<ul> <li>emeralddisplay         </li> </ul>"},{"location":"architecture/emerald_software_system_reference/#usb_1","title":"USB","text":"<ul> <li>rdpeusb</li> </ul>"},{"location":"architecture/emerald_software_system_reference/#system-wide-connection-management","title":"System Wide Connection Management","text":""},{"location":"architecture/emerald_software_system_reference/#creating-an-optimised-unicast-connection","title":"Creating an Optimised Unicast Connection","text":""},{"location":"architecture/emerald_software_system_reference/#encoder-side","title":"Encoder Side","text":"<ul> <li>TOE set up</li> <li>AVAE - set up</li> <li>DFC setup</li> </ul>"},{"location":"architecture/emerald_software_system_reference/#decoder-side","title":"Decoder side","text":"<ul> <li>TOE set up</li> <li>AVAE - set up</li> <li>DFC setup</li> </ul>"},{"location":"architecture/emerald_software_system_reference/#creating-an-optimised-municast-connection","title":"Creating an Optimised Municast Connection","text":""},{"location":"architecture/emerald_software_system_reference/#encoder-side_1","title":"Encoder Side","text":"<ul> <li>TOE set up</li> <li>AVAE - set up</li> <li>DFC setup</li> </ul>"},{"location":"architecture/emerald_software_system_reference/#decoder-side_1","title":"Decoder side","text":"<ul> <li>TOE set up</li> <li>AVAE - set up</li> <li>DFC setup</li> </ul>"},{"location":"architecture/emerald_software_system_reference/#creating-an-lossless-unicast-connection","title":"Creating an Lossless Unicast Connection","text":""},{"location":"architecture/emerald_software_system_reference/#encoder-side_2","title":"Encoder Side","text":"<ul> <li>TOE set up</li> <li>AVAE - set up</li> <li>DFC setup</li> </ul>"},{"location":"architecture/emerald_software_system_reference/#decoder-side_2","title":"Decoder side","text":"<ul> <li>TOE set up</li> <li>AVAE - set up</li> <li>DFC setup</li> </ul>"},{"location":"architecture/emerald_software_system_reference/#creating-an-lossless-mulicast-connection","title":"Creating an Lossless Mulicast Connection","text":""},{"location":"architecture/emerald_software_system_reference/#encoder-side_3","title":"Encoder Side","text":"<ul> <li>TOE set up</li> <li>AVAE - set up</li> <li>DFC setup</li> </ul>"},{"location":"architecture/emerald_software_system_reference/#decoder-side_3","title":"Decoder side","text":"<ul> <li>TOE set up</li> <li>AVAE - set up</li> <li>DFC setup</li> </ul>"},{"location":"architecture/emerald_software_system_reference/#multiunicast-peer-joining","title":"Multiunicast Peer Joining","text":"<p>Multiunicast Peer Joining Reference provides more details</p>"},{"location":"architecture/emerald_software_system_reference/#multicast-peer-joining","title":"Multicast Peer Joining","text":"<p>Multicast Peer Joining provides more details</p>"},{"location":"architecture/emerald_software_system_reference/#memory-maps","title":"Memory Maps","text":"<p>Memory Map Reference provides more details</p>"},{"location":"architecture/emerald_software_system_reference/#connection-control","title":"Connection Control","text":""},{"location":"architecture/emerald_software_system_reference/#hot-key-processing","title":"Hot Key Processing","text":""},{"location":"architecture/emerald_software_system_reference/#decoder-diagnostics","title":"Decoder Diagnostics","text":"<p>see  Diagnostics System Reference</p>"},{"location":"architecture/emerald_software_system_reference/#decoder-fpga-register-diagnostics","title":"Decoder FPGA Register Diagnostics","text":""},{"location":"architecture/emerald_software_system_reference/#osdconnection-state-control-startgui","title":"OSD/Connection state control (startgui)","text":"<ul> <li> <p>startgui.sh</p> </li> <li> <p>/usr/bin/cloudgui</p> </li> </ul>"},{"location":"architecture/emerald_software_system_reference/#error-handling_1","title":"Error Handling","text":"<p>For more detail see </p>"},{"location":"architecture/emerald_software_system_reference/#encoder-specific-subsystems_1","title":"Encoder Specific Subsystems","text":""},{"location":"architecture/emerald_software_system_reference/#display-interfacing","title":"Display Interfacing","text":""},{"location":"architecture/emerald_software_system_reference/#display-port_1","title":"Display Port","text":""},{"location":"architecture/emerald_software_system_reference/#dvi_1","title":"DVI","text":""},{"location":"architecture/emerald_software_system_reference/#server-application","title":"Server Application","text":""},{"location":"architecture/emerald_software_system_reference/#encoder-diagnostics","title":"Encoder Diagnostics","text":"<p>see  Diagnostics System Reference</p>"},{"location":"architecture/emerald_software_system_reference/#encoder-kernel-modules","title":"Encoder Kernel Modules","text":""},{"location":"architecture/emerald_software_system_reference/#audio_1","title":"Audio","text":"<ul> <li>blackbox_max9880a</li> <li>snd_dummy</li> </ul>"},{"location":"architecture/emerald_software_system_reference/#usb-drivers","title":"USB Drivers","text":"<ul> <li>f_virtual            </li> <li>usb_f_hid      </li> <li>usb_f_uac1         </li> <li>libcomposite      </li> <li>configfs             </li> <li>g_emerald_usb_gadget  </li> <li>net2272</li> <li>ci_hdrc_usb2     </li> <li>ci_hdrc               </li> <li>udc_core              </li> <li>extcon_core   </li> </ul>"},{"location":"architecture/enhanced_osd/","title":"Enhanced OSD Software Design:","text":"<ul> <li>Introduction</li> <li>Overview</li> <li>Design Detail</li> <li>Enhanced OSD Phase1 Process View</li> <li>Connection Manager</li> <li>OSD Manager</li> <li>Webservice</li> <li>REST API Message to Boxilla</li> <li>Security Considerations</li> <li>Enhanced OSD Phase 2</li> <li>Appendices</li> </ul>"},{"location":"architecture/hardware_acceleration_for_4KRDP_connections/","title":"Hardware Acceleration for 4K Connections","text":""},{"location":"architecture/hardware_acceleration_for_4KRDP_connections/#overview","title":"Overview","text":"<p>Emerald 2K products use an application based on FreeRDP 1.0.1 to allow connection to RDP compliant hosts. The application uses to blit engine in the FPGA to provide acceleration and a local mouse cursor; this creates a responsive user experience. We added USBR redirection to this application allowing us support a wider variety of USBR devices.</p> <p>When the 4K Emerald product was developed this hardware acceleration logic was not available so as a stop gap we used an X11 based version of FreeRDP 2.0 to provide similar functionality; however because we were dependent of software to decode the RFX frames the performance was poor. This version did not support USBR redirection, but it did benefit from security patches incorporated into version 2.0.0 and some additional codec options, including some lossless codecs. This version can also (in theory) support resolutions up to 4K; however, in practice this would be almost unusable due to performance constraints.</p>"},{"location":"architecture/hardware_acceleration_for_4KRDP_connections/#proposal","title":"Proposal","text":"<p>We propose porting the existing 2K application (FreeRDP_Corrib) to the 4K device. This would significantly improve the RDP performance and also add support for USBR.</p>"},{"location":"architecture/hardware_acceleration_for_4KRDP_connections/#limitations","title":"Limitations","text":"<p>There are certain 4K features which will be lost in the port however and these are itemised below:</p> <ul> <li>RDP resolutions would be limited to 2K on the 4K devices.</li> <li>Security patches present in FreeRDP 2.0.0 would be lost (These could be subsequently added back in, but that would be a separate project)</li> <li>Support for newer lossless codecs would be removed.</li> <li>There are some known bugs in the 2K implementation which are not present in the existing 4K version and these would likely introduce some instability into the 4K RDP connections.</li> </ul>"},{"location":"architecture/hardware_acceleration_for_4KRDP_connections/#strategy","title":"Strategy","text":""},{"location":"architecture/hardware_acceleration_for_4KRDP_connections/#phase-1","title":"Phase 1","text":"<ul> <li>Port FreeRDP_Corrib application as is to the 4K platform</li> <li>Make the necessary changes to the hardware definitions to allow the application run on both 2K and 4K</li> <li>Make necessary changes to allow USBR to work on the 4K platform</li> </ul>"},{"location":"architecture/hardware_acceleration_for_4KRDP_connections/#phase-2","title":"Phase 2","text":"<ul> <li>Apply essential security patches from FreeRDP 2.0 to FreeRDP_Corrib</li> <li>Stabilise application by investigating the bugs associated with VM instability</li> </ul>"},{"location":"architecture/hardware_acceleration_for_4KRDP_connections/#phase-3","title":"Phase 3","text":"<ul> <li>Refactor the application to use Micheal's display abstraction layers so that hardware access is isolated from the main application.</li> <li>Look at the possibility of scaling to 4K</li> <li>If we can sufficiently abstract all of the hardware access we should consider encapsulating it into a library and then re-integrating it to a more current version of FreeRDP.</li> </ul>"},{"location":"architecture/hardware_acceleration_for_4KRDP_connections/#technical-details","title":"Technical Details","text":""},{"location":"architecture/hardware_acceleration_for_4KRDP_connections/#memory-and-register-mapping","title":"Memory and Register Mapping","text":"<p>The FreeRDP_Corribb application currently mmaps the memory needed for VM Connections directly this will need some modification</p>"},{"location":"architecture/hardware_acceleration_for_4KRDP_connections/#optimised-fpga-registers","title":"Optimised FPGA Registers","text":"<p>The FPGA registers are at the same position (0x800c_0000) in both mpsoc and Zynq7000 platforms, this means minimal/no changes should be need to any of the direct writing performed in FreeRDP_Corrib.</p>"},{"location":"architecture/hardware_acceleration_for_4KRDP_connections/#optimised-display-memory","title":"Optimised Display Memory","text":"<p>The #define <code>FPGA_BASE_MEMORY</code> is used to map the display memory in the application, on Emerald 4K this refers to the LOSSLESS base memory <code>0x7000_0000</code> for VM connections this will have to be <code>0x6000_0000</code>.</p>"},{"location":"architecture/hardware_acceleration_for_4KRDP_connections/#displaylayer","title":"DisplayLayer","text":"<p>Some FPGA configuration is performed using calls to an older Display driver (DisplayLayer) that is not enabled on Emerald 4K, these calls are the functions using <code>context-&gt;display_context</code>, this driver has no concept of the Emerald4K and has been succceded by displaylayer-common (currently used in FreeRDP_Corrib for label control). Ideally the calls to the older driver should be swapped out for the displaylayer-common equivalent which will support both 2K and 4K platforms.</p>"},{"location":"architecture/hardware_overview/","title":"Hardware Overview","text":""},{"location":"architecture/hardware_overview/#end-to-end-data-paths","title":"End to End Data Paths","text":"<p> Figure 1: 2K System Encoder and Decoder</p>"},{"location":"architecture/hardware_overview/#common-components","title":"Common Components","text":""},{"location":"architecture/hardware_overview/#the-tcp-offload-engine-toe","title":"The TCP Offload Engine (TOE)","text":""},{"location":"architecture/hardware_overview/#toe-hardware","title":"TOE Hardware","text":"<p> Figure 4: TOE Hardware</p>"},{"location":"architecture/hardware_overview/#toe-block-diagram","title":"Toe Block Diagram","text":"<p>The TCP Offload Engine (TOE) is common to both the Encoder and Decoder. It is responsbile for encapsulation and transport of data between the Encoder and Decoder without a need for software intervention. A software based stack could not process the data at the speeds required so the TOE provides all of the functions of a TCP stack at close to wire speed. The TOE has the following functionality.</p> <ul> <li>TOE support 64 channels. Two are reserved for bypass (S/W) channels and the remaining 62 are available for Hardware accelerated TCP connections.</li> <li>The core can handle direct Rx and Tx traffic without intervention1 (\u201cbypass\u201d mode) using channels 0 (ethernet port 0) and 1 (ethernet port 1).</li> <li>A hash-based look up function with buffering is provided on receive to identify the connection and determine whether incoming traffic is to be processed by the TOE or bypassed.</li> <li>Four traffic types are supported as follows:<ul> <li>Accelerated traffic (e.g. video) for up to 62 TCP connections. Hardware statemachines handle all TCP data-plane functions, such as sequence numbering, retransmissions, congestion control, checksums and so on.</li> <li>TOE control plane traffic (SYN, FIN etc) for accelerated connections.</li> <li>Bypassed traffic, which includes TCP traffic for non-accelerated connections, along with all non-TCP traffic.</li> <li>Reliable Multicast (RMC) \u2013 A channel can be set up as a multicast master with data being sent from the master channel in UDP packets. Each slave sends back a UDP packet with an ACK sequence number in the payload. If a particular slave doesn\u2019t receive all the data then the Master channel retries the data from the last acked data. </li> </ul> </li> <li>Buffer Control functions:<ul> <li>Two 64-bit AXI buses connect via the system AXI to memory. One bus is used to perform read and writes accesses to DMA descriptors (AXI descriptor IF), and the second bus provides access to Transmit and Receive data buffering (AXI data IF). This allows parallel access to descriptors and data memory and supports a system design where descriptor and data memory are separate.  Multi-channel Tx and Rx DMA controllers are provided, with a DMA channel per connection. 64 channels supported but this could be increased up to 2K using a Verilog parameter.</li> <li>The Receive DMA engine provides a multi-channel DMA engine with a DMA channel per connection. Each DMA channel has a linked list of Rx Descriptors with pointers to available Rx Data Buffering. There is a one to one correspondence between receive packets and receive descriptors, so the receive buffer must be able to store a max size packet. For connection 0 and 1, the bypass connections, the complete received packet is written to the corresponding receive buffer, the max receive packet is 1518 Bytes, and rounding up to support up to 128 Byte memory accesses means the minimum size of a Bypass Channel buffer is 1536 Bytes. For accelerated connections, only the TCP payload data is written to the corresponding receive buffer. Allowing for the MAC(14), IP(20), TCP(20) headers and Mac CRC(4), the maximums TCP payload is 1460 Bytes, so rounding up to support 128 Byte memory accesses means the minimum Accelerate Channel buffer size is 1536 Bytes.</li> <li>The Transmit DMA engine provides a multi-channel DMA engine with a DMA channel per connection. Each DMA channel has a linked list of Tx Descriptors with pointers to available Tx Data Buffering. The amount of Tx data pointed to by a Tx descriptor is variable and the Tx DMA will concatenate the data from several buffers to build the transmit packet if required.</li> <li>Channel 0 is reserved as the unaccelerated bypass channel to Ethernet port 0, and Channel 1 is reserved as the unaccelerated bypass channel to Ethernet port 1. Packets transmitted on these channels are passed directly to the MACs without modification. For the Bypass channels, each Tx Descriptor points to the buffering for 1 full formed Ethernet transmit packet (note the hardware will pad packets less than 60 Bytes and the MAC appends the Ethernet CRC, but the rest of the packet  must be fully formed). Received packets that are not identified as accelerated connections will be passed with full headers to the Receive DMA channel (bypass) associated with the Ethernet port.</li> <li>TOE has the ability to transmit and receive control packets (SYN/FIN/RESET). If needed each TOE accelerated channel can bring up a TCP link using the SYN/SYNACK/ACK sequence exchanging sequence numbers. The link can be brought down with a RESET or FIN packet. There are receive and transmit statistics counters for TOE accelerated traffic. This includes the number of bytes transmitted/acknowledged/retried and received per channel. </li> </ul> </li> </ul>"},{"location":"architecture/hardware_overview/#toe-main-configuration","title":"TOE Main Configuration","text":"<p>To be Completed</p>"},{"location":"architecture/hardware_overview/#the-audio-video-application-engine-avae","title":"The Audio Video Application Engine (AVAE)","text":"<p> Figure 5: TOE AVAE Interfaces on Encoder</p> <p> Figure 6: TOE AVAE Interfaces Decoder</p> <p>The AVAE can be configured as a Video/Audio Tx or Video/Audio Rx Application engine. The AVAE has two distinct modes of operation, one for sending optimised YUV data and a second for sending lossless Tile Difference data. The AVAE can also process bi-directional audio data.</p> <p>When configured as Video Tx, the AVAE contains a Tx descriptor BRAM which hold the Tx descriptors to be read by the TOE. This is populated when there is frame data to transmit. Space is freed up in the BRAM once the data has been acked by the TCP connection. The differencing funtion  is caried out by the Capture Logic in YUV mode, but in Lossless mode the actual tile differencing is done by the AVAE.</p> <p>When configured as Video Rx, the AVAE takes the ethernet packet payload from the TOE and stores it in a BRAM buffer. If there is a frame location free in DRAM, the AVAE parses the data, writes it away to DRAM and indicates back to the TOE that space has been freed up. If this BRAM fill up (e.g due to Display not being able to handle the rate of received frames), then the TOE-DMA will silently drop the packets and the Encoder will have to retry.</p>"},{"location":"architecture/hardware_overview/#avae-main-configuration","title":"AVAE Main Configuration","text":"<p>To be Completed</p>"},{"location":"architecture/hardware_overview/#data-flow-controller","title":"Data Flow Controller","text":"<p>The Data Flow Controller manages the synchronization of data between capture hardware and the AVAE on the TX side. On the RX side it is responsible for the synchronization of the data from the AVAE to the rendering logic.</p>"},{"location":"architecture/planning/","title":"Roadmap","text":""},{"location":"architecture/planning/#prms","title":"PRMs","text":""},{"location":"architecture/planning/#interop","title":"Interop","text":"<ul> <li>Link to Interop PRM</li> </ul>"},{"location":"architecture/planning/#dual-stream","title":"Dual Stream","text":""},{"location":"architecture/planning/#analysis","title":"Analysis","text":"<ul> <li>Not a licensable feature - on by default</li> <li>Scenario #1: First 4X RX shared to TX is lossless connection to a 4K TX.<ul> <li>A second RX is in optimised mode: - requires a municast optimised connection</li> </ul> </li> <li>Scenario #2: First 4X RX shared to TX is optimised connection to a 4K TX.<ul> <li>A second RX is in lossless mode: - requires a multicast lossless connection</li> </ul> </li> <li>We currently support 16 multicast channels but only 8 municast channels. This is because municast is managed in the avae. We have 8 channels of audio, 1 would be required for multicast, and the other 7 for municast. - Suggestion is that we limit the total shared connections to 8.</li> <li>Performance Issue 1: Framerate will drop on any existing lossless connections when we add municast connections.</li> <li>Performance Issue 2: Suspicion that paths might interfere with each other: We do not believe this is the case, the paths should be independent of each other all the way back to the capture buffer.</li> <li>Because the paths are independent the frames may be out of sync - we need to communicate this so that it is not seen as an issue.</li> <li>We need to claify if interop is managed or unmanaged. Tom\u2019s document seems to suggest that it is a management only feature.</li> </ul>"},{"location":"architecture/planning/#glitch-free-join-and-leave","title":"Glitch Free, Join and Leave","text":"<p>Glitch free Join and Leave PRM</p>"},{"location":"architecture/planning/#enhanced-osd","title":"Enhanced OSD","text":"<p>Enhanced OSD</p>"},{"location":"architecture/planning/#new-platform","title":"New Platform","text":"<p>New platform \u2013 Needs to be completed now we have the detail \u2013 This needed major research.</p>"},{"location":"architecture/planning/#switching-time","title":"Switching Time","text":"<p>Switch time PRM</p>"},{"location":"architecture/planning/#opal","title":"Opal","text":"<p>For Opal John will send out a DPS \u2013 This will be the gold standard and will be tied to a basic PRM \u2013 I.e VM sharing and PCoIP and PCoIP ultra-required.)</p>"},{"location":"architecture/planning/#push-and-get","title":"Push and Get","text":"<p>Push and Get PRM</p>"},{"location":"architecture/planning/#snmp","title":"SNMP","text":"<p>SNMP PRM</p>"},{"location":"architecture/planning/#zero-latency-cut-through","title":"Zero Latency Cut through","text":"<p>Zero Latency (Cut thru) PRM</p> <ul> <li>Are there software implications? We believe that it is a question of setting thresholds.</li> <li>How do we measure the latency improvement? - subjective assessment only - monitor with built in latency may be an option.</li> </ul>"},{"location":"architecture/planning/#glide-and-slide","title":"Glide and Slide","text":"<p>Glide and Switch PRM</p>"},{"location":"architecture/planning/#devlin-keyboard","title":"Devlin Keyboard","text":"<p>Devlin Keyboard and USBr issues are bugs/L4s that we need to reference on a per project basis.</p>"},{"location":"architecture/planning/#vm-refactoring","title":"VM Refactoring","text":"<p>To be defined</p>"},{"location":"architecture/planning/#ability-to-enable-and-disable-an-appliance-from-boxilla","title":"Ability to Enable and Disable an Appliance from Boxilla","text":""},{"location":"architecture/planning/#brief","title":"Brief","text":"<p>Our customer Finnish Defence Force Logistic send me a request for Emerald feature: \u201cIf one development idea could be implemented there could be Enable / Disable operation of the transmitter and / or receiver through Boxilla. That is, in a managed environment, the use of a particular desired transmitter / receiver could be prevented or allowed through Boxilla. Even more wonderful would be that the above-mentioned function could also be implanted with a calendar, a clock with times, which could allow use at certain times or prevent use at certain times\u201d Regards, Jyrki</p>"},{"location":"architecture/sdkvm_openssl_curl/","title":"SDKVM - Open SSL and Curl Issues","text":""},{"location":"architecture/sdkvm_openssl_curl/#introduction","title":"Introduction","text":"<p>This Technote will illustrates an openssl issue discovered on the SDKVM and its resolution.</p>"},{"location":"architecture/sdkvm_openssl_curl/#to-get-the-curl-version-on-the-sdkvm","title":"To get the curl version on the SDKVM","text":"<pre><code>curl -V\n</code></pre> <pre><code>curl 7.81.0 (x86_64-pc-linux-gnu) libcurl/7.81.0 OpenSSL/3.0.2 zlib/1.2.11 brotli/1.0.9 zstd/1.4.8 libidn2/2.3.2 libpsl/0.21.0 (+libidn2/2.3.2) libssh/0.9.6/openssl/zlib nghttp2/1.43.0 librtmp/2.3 OpenLDAP/2.5.14\nRelease-Date: 2022-01-05\nProtocols: dict file ftp ftps gopher gophers http https imap imaps ldap ldaps mqtt pop3 pop3s rtmp rtsp scp sftp smb smbs smtp smtps telnet tftp \nFeatures: alt-svc AsynchDNS brotli GSS-API HSTS HTTP2 HTTPS-proxy IDN IPv6 Kerberos Largefile libz NTLM NTLM_WB PSL SPNEGO SSL TLS-SRP UnixSockets zstd\n</code></pre>"},{"location":"architecture/sdkvm_openssl_curl/#openssl-issue","title":"Openssl Issue","text":"<p>Running the following command:</p> <pre><code>curl -X PUT https://10.231.132.250/bxa-api/devices/kvm/ipaddr -H \"Authorization: Basic UkVTVF9CYkFkbWluVXNlcjpCb3hpbGxAMjAyMA==\" -H \"Content-Type: application/json\" -H \"Accept: application/json\" -d '{\"mac\":\"48:21:0B:35:32:74\",\"ip\":\"10.231.132.55\",\"gateway\":\"10.211.128.1\"}'\n</code></pre> <p>Provides the following response</p> <pre><code>curl: (60) SSL certificate problem: unable to get local issuer certificate\n</code></pre> <pre><code>curl -k -X PUT https://10.231.132.250/bxa-api/devices/kvm/ipaddr -H \"Authorization: Basic UkVTVF9CYkFkbWluVXNlcjpCb3hpbGxAMjAyMA==\" -H \"Content-Type: application/json\" -H \"Accept: application/json\" -d '{\"mac\":\"48:21:0B:35:32:74\",\"ip\":\"10.231.132.55\",\"gateway\":\"10.211.128.1\"}'\n\ncurl: (56) OpenSSL SSL_read: error:0A000126:SSL routines::unexpected eof while reading, errno 0\n{\"status\":\"200\",\"message\":\"Successfully updated IP for 48:21^CB:35:32:74 appliance.\"}\n</code></pre> <p>The application error observed is:</p> <pre><code>ulfius_send_http_streaming_request: libcurl error: 56 message: Failure when receiving data from the peer\n</code></pre> <p>In snuc device we are using a ulfius library which uses curl to communicate to Boxilla (the server in this instance).</p> <p>Multiple attempts were made to handle ssl certificate issue OpenSSL Read error , below are the details of the various strategies used:</p> <ol> <li>Try setting flag to handle the error by implementing new method in ulfius library</li> <li>Try passing ca path option  from ulfius library.</li> <li>Curl  and openssl version downgrading.</li> <li>Interoperability of curl latest version with openssl current version.</li> <li>Different methodology to handle openssl issue</li> </ol> <p>These are discussed in detail</p>"},{"location":"architecture/sdkvm_openssl_curl/#setting-the-ssl_op_ignore_unexpected_eof-flag","title":"Setting the SSL_OP_IGNORE_UNEXPECTED_EOF flag","text":"<p>We tried to set the SSL_OP_IGNORE_UNEXPECTED_EOF flag to handle the error.</p> <p>This flag was added in openssl 3.0 to handle the EOF error.</p> <p>This flag was set in ulfius library as follows:</p> <p>file : Open_Source_SDKVM_LIB/ulfius/src/u_send_request.c</p> <pre><code>static CURLcode sslctx_function(CURL *curl, void *sslctx, void *parm)\n{\nSSL_CTX_set_options(sslctx, SSL_OP_IGNORE_UNEXPECTED_EOF);\n corrib_syslog(LOG_NOTICE, \" inside ctx_function\");\n  return CURLE_OK;\n}\n// to invoke above method , curl_easy_setopt() function must be used in below way :\ncurl_easy_setopt(curl_handle, CURLOPT_SSL_CTX_FUNCTION, sslctx_function);\n</code></pre> <p>This approach did not work; it produced the error: curl(4) error which states :</p> <pre><code> A feature or option that was needed to perform the desired request was not enabled or was explicitly disabled at build-time. To make curl able to do this, you probably need another build of libcurl.\n\nCurl version at device : 7.81\nOpenSSL version at device : 3.0.2 \n</code></pre> <p>With further research it was found that SSL_OP_IGNORE_UNEXPECTED_EOF has not been implemented for the GnuTLS backend.</p> <p>This option only works for libcurl powered by OpenSSL, wolfSSL or mbedTLS. If libcurl was not built against these libraries then this functionality is absent.</p>"},{"location":"architecture/sdkvm_openssl_curl/#passing-ca-path-option-from-ulfius-library","title":"Passing ca path option from ulfius library.","text":"<p>This option involved setting the CURLOPT_CAPATH variable which is a variable that points to the directory holding CA certificates</p> <pre><code>curl_easy_setopt(CURL *handle, CURLOPT_CAPATH, char *capath);\n</code></pre> <p>We pass a char * to a null-terminated string naming a directory holding multiple CA certificates to verify the peer with. If libcurl is built against OpenSSL, the certificate directory must be prepared using the OpenSSL c_rehash utility.</p> <p>While this method worked to resolve certificate issue but the EOF error still causing problem. When the application tries to wait for receiving response from boxilla we get an error as the application doesn\u2019t wait for more inputs from server once the error is received.</p> <p>When manually running the curl commands it still throws EOF error.</p> <p>This methodology helped to resolve 1 part of issue but the issue still remains with the error:</p> <pre><code>ulfius_send_http_streaming_request: libcurl error: 56 message: Failure when receiving data from the peer\nThis methodology gave us new direction of investigation towards interoperability of curl and openssl different version.\n</code></pre>"},{"location":"architecture/sdkvm_openssl_curl/#downgrade-curl-and-openssl-version","title":"Downgrade Curl and openssl version","text":"<p>We downgraded curl and openssl , this resolves the issue.</p> <pre><code>curl Version: curl -V\ncurl 7.54.0 (arm-buildroot-linux-gnueabihf) libcurl/7.54.0 OpenSSL/1.0.2k zlib/1.2.11 libssh2/1.9.0\nProtocols: dict file ftp ftps gopher http https imap imaps pop3 pop3s rtsp scp sftp smb smbs smtp smtps telnet tftp\nFeatures: IPv6 Largefile NTLM SSL libz TLS-SRP UnixSockets HTTPS-proxy\n</code></pre> <pre><code>curl -X PUT https://10.231.132.250/bxa-api/devices/kvm/ipaddr -H \"Authorization: Basic UkVTVF9CYkFkbWluVXNlcjpCb3hpbGxAMjAyMA==\" -H \"Content-Type: application/json\" -H \"Accept: application/json\" -d '{\"mac\":\"48:21:0B:35:32:74\",\"ip\":\"10.231.132.55\",\"gateway\":\"10.211.128.1\"}'\n\n{\"status\":\"200\",\"message\":\"Successfully updated IP for 48:21:0B:35:32:74 appliance.\"}\n\nthe openssl certificate issue and EOF error  was due to strict checking which is introduced in openssl 3.0\n</code></pre> <p>While downgrading resolved the issue, we cannot afford to revert to earlier versions so we looked for another approach.</p>"},{"location":"architecture/sdkvm_openssl_curl/#using-the-latest-version-of-curl-with-openssl-current-version","title":"Using the latest version of curl with openssl current version.","text":"<p>We decided to evaluate the interoperability of different versions of curl and openssl</p> <ul> <li>Downgraded curl : curl 7.70.0 (x86_64-pc-linux-gnu) libcurl/7.70.0 OpenSSL/3.0.2</li> <li>Downgraded openssl : curl 7.81.0 (x86_64-pc-linux-gnu) libcurl/7.81.0 OpenSSL/3.1.0</li> <li>Upgrade curl to latest version 8.0.1: curl 8.0.1 (x86_64-pc-linux-gnu) libcurl/8.0.1 OpenSSL/3.0.2</li> </ul> <p>The 3rd option worked for us and resolved the issue. </p>"},{"location":"architecture/sdkvm_openssl_curl/#to-upgrade-curl","title":"To Upgrade curl","text":"<p>To upgrade curl please follow below link : https://yannmjl.medium.com/how-to-manually-update-curl-on-ubuntu-server-899476062ad6</p> <p>this will remove the existing curl and install the 8.0.1 curl version.</p>"},{"location":"architecture/sdkvm_openssl_curl/#working-code-example","title":"Working code example","text":"<pre><code>network_change_notification response_code: 200 response_message: Successfully updated IP for 48:21:0B:35:32:74 appliance.\n/usr/local/bin/restapi_cli -j network_change_notification\nBroadcast message from systemd-journald@snuc-NUC12WSKi7 (Thu 2023-05-04 13:01:00 IST):\nrestapi_cli[3899]: SESSION:0\nhttps://10.231.132.250/bxa-api/devices/kvm/ipaddr\nMay 4 13:01:00 snuc-NUC12WSKi7 restapi_cli: SESSION:0#012 https://10.231.132.250/bxa-api/devices/kvm/ipaddr\nMay 4 13:01:03 snuc-NUC12WSKi7 restapi_cli: SESSION:0#012 network_change_notification response_code: 200 response_message: Successfully updated IP for 48:21:0B:35:32:74 appliance.\nCurl Command:\nsnuc@snuc-NUC12WSKi7:~$ curl -X PUT https://10.231.132.250/bxa-api/devices/kvm/ipaddr -H \"Authorization: Basic UkVTVF9CYkFkbWluVXNlcjpCb3hpbGxAMjAyMA==\" -H \"Content-Type: application/json\" -H \"Accept: application/json\" -d '{\"mac\":\"48:21:0B:35:32:74\",\"ip\":\"10.231.132.55\",\"gateway\":\"10.211.128.1\"}'\n\nResponse:\n{\"status\":\"200\",\"message\":\"Successfully updated IP for 48:21:0B:35:32:74 appliance.\"}\n</code></pre>"},{"location":"architecture/sdkvm_openssl_curl/#how-to-update-a-certificate-with-standard-end-date","title":"How to update a certificate with standard end date","text":"<p>Run the command:</p> <pre><code>openssl ca -config /home/snuc/SDKVM/security/ssl/openssl.cnf -policy signing_policy -out $SSL_LOCATION/ssl/certs/device.crt -startdate 150815080000Z -enddate 150815090000Z -cert /home/snuc/SDKVM/security/ssl/private/rootCA.crt -keyfile /home/snuc/SDKVM/security/ssl/private/rootCA.key -infiles $SSL_LOCATION/ssl/certs/device.csr\n</code></pre> <p>Once this command is executed it will display a prompt for (y/n) to sign certificate , if one enters (y) it will proceed and create certificate with the specified start and  end date </p> <pre><code>snuc@snuc-NUC12WSKi7:~/experiment/black$ openssl ca -config openssl.cnf -policy signing_policy -out clientcert.pem -startdate 120815080000Z -enddate 120815090000Z -cert /home/snuc/SDKVM/security/ssl/private/rootCA.crt -keyfile /home/snuc/SDKVM/security/ssl/private/rootCA.key -infiles device.csr\n</code></pre> <pre><code>Using configuration from openssl.cnf\n4007969B297F0000:error:0700006C:configuration file routines:NCONF_get_string:no value:../crypto/conf/conf_lib.c:315:group=CA_default name=rand_serial\nCheck that the request matches the signature\nSignature ok\nThe Subject's Distinguished Name is as follows\ncountryName           :PRINTABLE:'US'\nstateOrProvinceName   :ASN.1 12:'PA'\nlocalityName          :ASN.1 12:'Pittsburgh'\norganizationName      :ASN.1 12:'InvisaPC'\norganizationalUnitName:ASN.1 12:'BlackBoxInvisaPC'\ncommonName            :ASN.1 12:'10.231.132.41'\nCertificate is to be certified until Aug 15 09:00:00 2012 GMT (-3918 days)\nSign the certificate? [y/n]:y\n\n1 out of 1 certificate requests certified, commit? [y/n]y\nWrite out database with 1 new entries\nData Base Updated\n</code></pre> <p>To verify the validity of new certificate use the following command:</p> <pre><code>snuc@snuc-NUC12WSKi7:~/experiment/black$ openssl x509 -noout -startdate -enddate -in clientcert.pem\nnotBefore=Aug 15 08:00:00 2012 GMT\nnotAfter=Aug 15 09:00:00 2012 GMT\n</code></pre> <p>This command bypasses the need to pass \u201cy\u201d by using a pipe with openssl command</p> <pre><code>yes | openssl ca -config openssl.cnf -policy signing_policy -out $SSL_LOCATION/ssl/certs/device.crt -startdate 150815080000Z -enddate 150815090000Z -cert /home/snuc/SDKVM/security/ssl/private/rootCA.crt -keyfile /home/snuc/SDKVM/security/ssl/private/rootCA.key -infiles $SSL_LOCATION/ssl/certs/device.csr\n</code></pre>"},{"location":"architecture/sdkvm_openssl_curl/#references","title":"References","text":"<ol> <li>https://yannmjl.medium.com/how-to-manually-update-curl-on-ubuntu-server-899476062ad6</li> <li>https://manpages.ubuntu.com/manpages/focal/man3/CURLOPT_SSL_CTX_FUNCTION.3.html</li> <li>https://www.openssl.org/docs/manmaster/man3/SSL_CTX_set_options.html</li> <li>https://everything.curl.dev/usingcurl/returns</li> <li>https://askubuntu.com/questions/1405100/i-have-problem-with-new-ubuntu-22-04-and-openssl-3-0-2</li> <li>https://www.openssl.org/docs/man3.0/man3/SSL_CTX_set_options.html#SSL_OP_IGNORE_UNEXPECTED_EOF</li> </ol>"},{"location":"architecture/software_architecture_slide_and_glide/","title":"Software architecture slide and glide","text":""},{"location":"architecture/software_architecture_slide_and_glide/#embedded-software-architectural-impact-analysis-slide-and-glide-feature","title":"Embedded Software Architectural Impact Analysis - Slide and Glide Feature","text":""},{"location":"architecture/software_architecture_slide_and_glide/#introduction","title":"Introduction","text":"<p>Slide and Glide is a feature that allows easy switching between multi-monitor-console matrix connected to multiple computers via one keyboard and one mouse connected to a master receiver. The mouse can move seamlessly between a predefined grid of monitors. Each monitor is connected to a separate receiver device so the mouse control must pass from one receiver to the next when the boundary area associated with that receiver is crossed. The feature should support a flexible arrangement of displays and support computers with multi head graphics. The feature will support up to 16 different connections.</p>"},{"location":"architecture/software_architecture_slide_and_glide/#references","title":"References","text":"<ul> <li>Link to Slide and Glide PRM</li> <li>Youtube video explaining Slide and Glide </li> <li>Relative and Absolute Co-Ordinates</li> <li>Absolute Mouse Explained</li> </ul>"},{"location":"architecture/software_architecture_slide_and_glide/#terms-and-definitions-used-in-blackbox","title":"Terms and Definitions used in Blackbox","text":"Term Definition Absolute Mouse Position Devices like digitizing graphics tablets that do not have an embedded screen involve indirect input and sense absolute positions and are often run in an absolute input mode. In this mode they send an X,Y location that corresponds to a specific point on the screen Decoder See Receiver Encoder See Transmitter FIT Image A compressed encrypted file format used for 4K appliance software images. Master In the context of Slide and Glide, the master receiver is the receiver that has the mouse and keyboard attached. Municast The use of multiple individual TCP streams to share a video from a single transmitter to multiple receivers Multicast The use of an individual Multicast UDP stream to share a video from a single transmitter to multiple receivers. Blackbox uses reliable multicast so that any dropped frames are resent and no data loss occurs. Multi-Monitor-Console matrix A defined group of receivers which will act as a single surface for the slide and glide feature Pixel Perfect Mode The original scheme used by 4K products where the entire frame of the source video was captured continuously and sent with compression to the decoder. RFX RemoteFX Codec Extension developed by Microsoft which uses a lossy image codec to encode screen images with efficient and effective compression. This is the lossy scheme used in Blackbox products. Relative Mouse Position A mouse does not have a base position that it can track, so in relative input, the system works on differential changes. So the difference between the current position of the mouse and where you move it to in a certain time period. Receiver A Blackbox appliance that receives and displays a video stream. A receiver is also referred to as a client or decoder. RPU Real Time Processing Unit. The Zynq Ultrascale+ MPSoC features two A5 RPUs. In our 4K products one of these is used for Display Port functionality using IP provided by Xilinx. The second on the encoder side acts a video processing feed between FPGA and TOE Shared Mode A generic term used in Blackbox to describe schemes that allow more than one receiver view the video source from a transmitter. See Municast and Multicast. Tile Differencing Mode A lossless scheme used to reduce bandwidth; only tiles (portions of the screen) that change are sent from encoder to decoder. TOE TCP Offload Engine: A hardware based TCP stack used to accelerate the transmission of data. This is essential in high bandwidth, low latency transmission of video and audio. Technical Debt Technical Debt is a concept in software development that reflects the implied cost of additional rework caused by choosing an easy (limited) solution now instead of using a better approach that would take longer. Transmitter A Blackbox appliance that captures and transmits a video from a source. A transmitter is also referred to as a server or encoder. Video Source A source of input for a Transmitter, normally the DVI or Display Port output of a PC. <p>_Table 1 Terms and Definitions</p>"},{"location":"architecture/software_architecture_slide_and_glide/#architectural-overview","title":"Architectural Overview","text":"<p>Slide and Glide is a feature that allows easy switching between multi-monitor-console matrix connected to multiple computers via one keyboard and one mouse connected to a master receiver. The desktop of the multi-monitor-console matrix can be considered to be a large virtual desktop across which the mouse and keyboard can move seamlessly.</p> <p>Each receiver in the multi-monitor-console matrix is associated with a section of this virtual desktop.</p> <p>The master receiver generates the mouse and keyboard events at all times. It must store a representation of the multi-monitor-console matrix desktop and know when the internal boundaries of this desktop are crossed.</p> <p>If a boundary is crossed the master receiver will start sending its mouse and keyboard events directly to the receiver in the matrix group that controls the active desktop space.</p>"},{"location":"architecture/software_architecture_slide_and_glide/#implications-for-rdp-protocol","title":"Implications for RDP Protocol","text":"<p>The RDP protocol is currently used to communicate mouse and keyboard events. To support Slide and Glide we will need to be able to send the mouse and keyboard events to the different transmitter devices within the multi-monitor-console matrix. RDP is not suitable for this as it would require multiple simultaneous RDP sessions between the mater receiver and the transmitters in the matrix. It is proposed to use an alternative protocol to communicate between devices and this protocol will be used to send mouse and keyboard events from the master receiver to any of the transmitters in the matrix.</p> <p>Given this requirement to use a new protocol, It makes sense then to decouple the mouse and keyboard events from the RDP protocol completely and use this alternative protocol in all instances where mouse and keyboard are exchanged including connections used outside of Slide and Glide.</p>"},{"location":"architecture/software_architecture_slide_and_glide/#implications-for-the-osd","title":"Implications for the OSD","text":"<ul> <li>The OSD will need to provide a means of assigning the hot keys associations for target desktops within a matrix.</li> </ul>"},{"location":"architecture/software_architecture_slide_and_glide/#implications-for-key-handling","title":"Implications for Key Handling","text":"<ul> <li>The current key handling functionality will need to be able to process the new hot key short cuts for the target receivers. This will allow the user to move directly to a target desktop by invoking a hot key sequence.</li> </ul>"},{"location":"architecture/software_architecture_slide_and_glide/#implications-for-transmission-of-mouse-and-keyboard-events","title":"Implications for Transmission of Mouse and Keyboard Events","text":"<p>As discussed above, Slide and Glide will require us to send mouse and keyboard events to different transmitters in the matrix depending on their position in the virtual desktop. This communication will not be able to use RDP so we need to consider alternatives.</p> <p>There are two possible options.</p>"},{"location":"architecture/software_architecture_slide_and_glide/#mqtt","title":"MQTT","text":"<p>We are now using MQTT internally for communications between the Connection Manager on the receiver and other applications. MQTT user the concept of a broker to route messages between clients that subscribe to topics of interest.</p> <p>This protocol is also likely to be used for future features like Real Time Status, and both transmitters and receivers will run MQTT brokers instances making it easy to implement the slide and glide protocol.</p> <p>MQTT may be not be suitable due to the extra cost of message brokering and routing, but previous tests have suggested a brokered MQTT message can be received in around 3 msec across a 1 gigabit link with TLS enabled. If this can be achieved consistently then the latency of brokerage may not be an issue.</p>"},{"location":"architecture/software_architecture_slide_and_glide/#a-new-peer-to-peer-protocol","title":"A New Peer to Peer Protocol","text":"<p>If latency is a critical factor then we could design a lightweight peer to peer protocol over TLS. This would remove the cost of routing and brokerage, but would be a more significant implementation effort.</p>"},{"location":"architecture/software_architecture_slide_and_glide/#implications-for-hot-key-configuration","title":"Implications for Hot Key Configuration","text":"<ul> <li>The assigned hot key for a target within the matrix will need to be stored in the XML file.</li> </ul>"},{"location":"architecture/software_architecture_slide_and_glide/#implications-for-boxilla","title":"Implications for Boxilla","text":"<ul> <li>The OSD or a delegated library will need to be able to fetch or process a configuration file for a defined multi-monitor-console matrix from Boxilla.</li> <li>Boxilla will act as the configuration utility for this feature. A user must be able to visually configure the multi-monitor-console matrix through Boxilla and Boxilla must send the resulting configuration to the master receiver.</li> </ul>"},{"location":"architecture/software_architecture_slide_and_glide/#implications-for-the-control-manager-state-machine","title":"Implications for the Control Manager State Machine","text":"<ul> <li>The Connection Manager will need to provide a means to communicate the transfer of control from one element in a matrix to another using MQTT. This message will be sent to Boxilla who will act as the broker in this exchange.</li> </ul>"},{"location":"architecture/software_architecture_slide_and_glide/#implications-for-the-remote-app","title":"Implications for the Remote App","text":""},{"location":"architecture/software_architecture_slide_and_glide/#other-implications","title":"Other Implications","text":"<p>RX has a frame of reference which is the input absolute mouse resolution. When we send events we send them within the context of incoming absolute resolution. </p>"},{"location":"architecture/software_architecture_slide_and_glide/#use-cases","title":"Use Cases","text":"<p>These are a more detailed explanation of the use cases described in the Slide and Glide Feature Description </p>"},{"location":"architecture/software_architecture_slide_and_glide/#push","title":"Push","text":"<ul> <li>A user will hit a hot key combination to bring up the Push Menu. The Push menu appears on the OSD and presents a list of target devices to which the user can push his current screen.</li> <li>The user will choose a target module whose screen will receive the display he wishes to \"Push\".</li> <li>The user executes the Push by pressing a button.</li> <li>The system confirms that the user has successfully pushed the content.</li> <li>The \"Pushed\" content appears on screen of the target device.</li> </ul>"},{"location":"architecture/software_architecture_slide_and_glide/#get","title":"Get","text":"<ul> <li>A user will hit a hot key combination to bring up the Get Menu.</li> <li>The menu displays all active user modules within the KVM matrix system, which that user has access to.</li> <li>The user selects the source device whose screen content he wants to access and press a button to get it.</li> <li>The display from the selected device appears on his monitor.</li> </ul>"},{"location":"architecture/software_architecture_slide_and_glide/#logical-view","title":"Logical View","text":"<p>Notes to the Authors \u2013 (Delete this explanatory text from final approved version)</p> <p>This section deals with the logical view of the proposed architecture. When the System Reference document is available it will become the primary reference for discussing changes. Diagrams from that document can be copied here and then annotated to indicate impact. The discussion here should be at the modular level focusing on the changes that will occur to the structure of the key functional hardware and software elements in the system.</p> <p>Some guidelines</p> <ul> <li>Show a reference diagram with the main components likely to be impacted.[^1]</li> <li>Highlight the impacts to the main architectural components?</li> <li>How will the interrelationships between those components change. Provide an explanation/reasoning so it is easy in the future to assess if an issue is found whether the solution is as architected deliberately or if it is an oversight or misunderstanding of an ambiguous requirement etc.</li> <li>Reference the products Functional Area breakdown structure as a reference because this will help direct the relevant owners to likely changes in their area of expertise and ownership.</li> </ul> <p>[^1] Use the reference system document and associated drawio drawings. Do not create new drawings unnecessarily.</p>"},{"location":"architecture/software_architecture_slide_and_glide/#process-view","title":"Process View","text":"<p>Notes to the Authors \u2013 (Delete this explanatory text from final approved version)</p> <p>This section will focus on the process view of the architecture; it builds on the logical view by adding the detail required to understand the impact to modular components in terms of their tasks, processes and threads. Again, it is hoped our System Reference document will act as the key reference point here.  </p> <p>Some guidelines</p> <ul> <li>How will this feature change the system's execution, the interactions and configurations of the major components?</li> <li>Will this feature require the introduction of any new components; if so, what are these components and what are their responsibilities. The expectation is that you would have introduced these in the Logical View above, but in this section you should add more specific detail like implications for threading, concurrency and synchronization.</li> <li>Also describes the allocation of objects and classes to tasks.</li> <li>Are there performance considerations that need to be specifically called out?</li> <li>Are there system integrity implications? If there are these need to be made explicit.</li> <li>Are there resource considerations like memory, processing power or bandwidth considerations? If there are be explicit where possible and draw the audience of the documentation to any risks.</li> <li>On completion of this section we should have a reasonably detailed understanding of the key impacts this feature will have to the existing system. Remember however, we are still dealing at an architectural level so maintain the appropriate level of abstraction. The specifics of changes will be dealt with in a Software Design Document.</li> </ul> <p></p>"},{"location":"architecture/software_architecture_slide_and_glide/#deployment-view","title":"Deployment View","text":"<p>Notes to the Authors \u2013 (Delete this explanatory text from final approved version)</p> <p>This view describes the Functional Area environment with the modifications required to implement the new Feature. It describes the physical distribution of the system and the structure of the hardware components that execute the software. This view also shows the system from the user\u2019s point of view and how the feature will be packaged into deployable units. Also included in this section is a consideration on the impact of support services like customer support, field training and documentation. It must comprehend and detail specifically any interaction with other Functional Areas.</p> <p>Some guidelines</p> <ul> <li>How does the software map on to the hardware \u2013 what devices will be impacted by the change.</li> <li>How do these device changes impact the customers system and the typical customer use-models? For example, see the drawing below.</li> <li>How will the feature be distributed across the system \u2013 are there implications for software upgrade or the software distribution services we use.</li> <li>Are there implications for how we package the software?</li> <li>Are there integrity or compatibility implications for system upgrade and different hardware revisions?</li> <li>Will the feature impact device configuration like databases.</li> <li>Is this feature going to be phased in or realised in a single delivery. The possible phasing of the project should be discussed here.</li> <li>Will this feature require a manual upgrade?</li> <li>Will the feature necessitate additional customer training?</li> <li>Will the feature require additional training for field support technicians and engineers?</li> <li>Are there likely to be requirements for on the ground support at customer sites during installation or deployment of the feature?</li> </ul> <p></p>"},{"location":"architecture/software_architecture_template/","title":"Software Architecture Template","text":""},{"location":"architecture/software_architecture_template/#embedded-software-architectural-impact-analysis-specify-feature-name","title":"Embedded Software Architectural Impact Analysis - Specify Feature Name","text":""},{"location":"architecture/software_architecture_template/#master-document-revision-history","title":"Master Document Revision History","text":"Date Version Description Author/Editor 0.1 First Draft 0.2 Second Draft 0.3 Third Draft 0.4 Fourth Draft 0.5 0.6 0.7 0.8 0.9 ## Introduction <p>Notes to the Authors \u2013 (Delete explanatory text from final approved version)</p> <p>Use this section to give an overview of the product whose architecture this document describes and how this document/architecture ties to other architecture documents and Functional Areas of the product as appropriate. There are many models for Software Architecture and this document represents Black Box Embedded Software template for detailing the architecture of product it delivers. It takes a traditional View based model and tailors it to Black Box\u2019s Embedded Software requirements. It is mapped to our product set and the embedded framework we use. The template can evolve over time to take into account the teams experience and learnings.</p>"},{"location":"architecture/software_architecture_template/#references","title":"References","text":"<p>Notes to the Authors \u2013 (Delete explanatory text from final approved version)</p> <p>Include references to any relevant documentation here. For an architectural document we would - at a minimum - expect a reference to the Marketing Requirements. Any Feature Analysis documents or wiki entries for workshop minutes or notes should also be referenced or snapshots included if possible so as making the document definitive. Referencing links must be done with care as they are uncontrolled and it is never a good idea to mix that with a controlled document that must be specific as it reflects an agreement between the technical parties and or customers through its reference to marketing requirements etc.. In time it is expected that the Feature and Functional Area architecture documents will tie to an Embedded SW System Architecture document that will follow a similar format to this document template. That will be a detailed architectural document covering every aspect of the appliance architecture. The intent is to keep this document updated and this should offer a starting point and reference for any discussions on architecture. The references included in this section of the template are for reference only and should be replaced as appropriate in each specific instance.</p> <ul> <li>Marketing Requirements  https://bboxjira.atlassian.net/wiki/spaces/EM/pages/1230700564/Emerald+4K-+6.0</li> <li>ENG-0008-026 4K/2K Interoperability Analysis</li> </ul>"},{"location":"architecture/software_architecture_template/#terms-and-definitions-used-in-blackbox","title":"Terms and Definitions used in Blackbox","text":"<p>Notes to the Authors \u2013 (Delete this explanatory text from final approved version)</p> <p>This section will include Black Box terms and Definitions; more general technology definitions need not be included here. They can, if required for a specific technology impact study, be added but one should exercise common sense and only define the technology terms that are relevant to the feature under consideration. The table of terms included in this section of the template are for reference only and should be replaced as appropriate in each specific instance.</p> Term Definition CLU Image A compressed encrypted file format used for 2K appliance software images. Decoder See Receiver Encoder See Transmitter FIT Image A compressed encrypted file format used for 4K appliance software images. Municast The use of multiple individual TCP streams to share a video from a single transmitter to multiple receivers Multicast The use of an individual Multicast UDP stream to share a video from a single transmitter to multiple receivers. Blackbox uses reliable multicast so that any dropped frames are resent and no data loss occurs. Pixel Perfect Mode The original scheme used by 4K products where the entire frame of the source video was captured continuously and sent with compression to the decoder. RFX RemoteFX Codec Extension developed by Microsoft which uses a lossy image codec to encode screen images with efficient and effective compression. This is the lossy scheme used in Blackbox products. Receiver A Blackbox appliance that receives and displays a video stream. A receiver is also referred to as a client or decoder. RPU Real Time Processing Unit. The Zynq Ultrascale+ MPSoC features two A5 RPUs. In our 4K products one of these is used for Display Port functionality using IP provided by Xilinx. The second on the encoder side acts a video processing feed between FPGA and TOE Shared Mode A generic term used in Blackbox to describe schemes that allow more than one receiver view the video source from a transmitter. See Municast and Multicast. Tile Differencing Mode A lossless scheme used to reduce bandwidth; only tiles (portions of the screen) that change are sent from encoder to decoder. TOE TCP Offload Engine: A hardware based TCP stack used to accelerate the transmission of data. This is essential in high bandwidth, low latency transmission of video and audio. Technical Debt Technical Debt is a concept in software development that reflects the implied cost of additional rework caused by choosing an easy (limited) solution now instead of using a better approach that would take longer. Transmitter A Blackbox appliance that captures and transmits a video from a source. A transmitter is also referred to as a server or encoder. Video Source A source of input for a Transmitter, normally the DVI or Display Port output of a PC. <p>Table 1 Terms and Definitions</p>"},{"location":"architecture/software_architecture_template/#architectural-overview","title":"Architectural Overview","text":"<p>Notes to the Authors \u2013 (Delete this explanatory text from final approved version)</p> <p>In this section you should provide a summary of the feature or Functional Area under consideration and how it is changing through the proposed work. Detail in specific  terms what is this feature doing and what impact will it have on the existing subject architecture. Some guidelines:</p> <ul> <li>What is the marketing forces driving this requirement.</li> <li>What products does it impact?</li> <li>What at a top level perspective is the existing architecture and what is the impact to the architecture in implementing the feature or change?</li> </ul>"},{"location":"architecture/software_architecture_template/#use-cases","title":"Use Cases","text":"<p>Notes to the Authors \u2013 (Delete this explanatory text from final approved version)</p> <p>Use cases are essential in understanding the impact of a feature. If these are not properly understood then any subsequent work may end up missing the intent of the change or compromise the customer\u2019s expectations. Use cases may be provided by marketing, but in their absence the Architect or Engineer may have to write then. They can be presented in tabular form or as a referenced list. These use cases can be used by Test to derive test cases so any assumptions or expectations should be clearly stated with no ambiguity. The Embedded SW System Architecture will address the customer high level use cases. The feature or Functional Area use cases will be a more detailed set of technical use cases that address the specifics of the implementation invisible to the customer.</p>"},{"location":"architecture/software_architecture_template/#logical-view","title":"Logical View","text":"<p>Notes to the Authors \u2013 (Delete this explanatory text from final approved version)</p> <p>This section deals with the logical view of the proposed architecture. When the System Reference document is available it will become the primary reference for discussing changes. Diagrams from that document can be copied here and then annotated to indicate impact.  The discussion here should be at the modular level focusing on the changes that will occur to the structure of the key functional hardware and software elements in the system. </p> <p>Some guidelines</p> <ul> <li>Show a reference diagram with the main components likely to be impacted.[^1]</li> <li>Highlight the impacts to the main architectural components?</li> <li>How will the interrelationships between those components change. Provide an explanation/reasoning so it is easy in the future to assess if an issue is found whether the solution is as architected deliberately or if it is an oversight or misunderstanding of an ambiguous requirement etc.</li> <li>Reference the products Functional Area breakdown structure as a reference because this will help direct the relevant owners to likely changes in their area of expertise and ownership.</li> </ul> <p>[^1] Use the reference system document and associated drawio drawings. Do not create new drawings unnecessarily.</p>"},{"location":"architecture/software_architecture_template/#process-view","title":"Process View","text":"<p>Notes to the Authors \u2013 (Delete this explanatory text from final approved version)</p> <p>This section will focus on the process view of the architecture; it builds on the logical view by adding the detail required to understand the impact to modular components in terms of their tasks, processes and threads. Again, it is hoped our System Reference document will act as the key reference point here.  </p> <p>Some guidelines</p> <ul> <li>How will this feature change the system's execution, the interactions and configurations of the major components?</li> <li>Will this feature require the introduction of any new components; if so, what are these components and what are their responsibilities. The expectation is that you would have introduced these in the Logical View above, but in this section you should add more specific detail like implications for threading, concurrency and synchronization.</li> <li>Also describes the allocation of objects and classes to tasks.</li> <li>Are there performance considerations that need to be specifically called out?</li> <li>Are there system integrity implications? If there are these need to be made explicit.</li> <li>Are there resource considerations like memory, processing power or bandwidth considerations? If there are be explicit where possible and draw the audience of the documentation to any risks.</li> <li>On completion of this section we should have a reasonably detailed understanding of the key impacts this feature will have to the existing system. Remember however, we are still dealing at an architectural level so maintain the appropriate level of abstraction. The specifics of changes will be dealt with in a Software Design Document.</li> </ul> <p></p>"},{"location":"architecture/software_architecture_template/#deployment-view","title":"Deployment View","text":"<p>Notes to the Authors \u2013 (Delete this explanatory text from final approved version)</p> <p>This view describes the Functional Area environment with the modifications required to implement the new Feature. It describes the physical distribution of the system and the structure of the hardware components that execute the software. This view also shows the system from the user\u2019s point of view and how the feature will be packaged into deployable units. Also included in this section is a consideration on the impact of support services like customer support, field training and documentation. It must comprehend and detail specifically any interaction with other Functional Areas.</p> <p>Some guidelines</p> <ul> <li>How does the software map on to the hardware \u2013 what devices will be impacted by the change.</li> <li>How do these device changes impact the customers system and the typical customer use-models? For example, see the drawing below.</li> <li>How will the feature be distributed across the system \u2013 are there implications for software upgrade or the software distribution services we use.</li> <li>Are there implications for how we package the software?</li> <li>Are there integrity or compatibility implications for system upgrade and different hardware revisions?</li> <li>Will the feature impact device configuration like databases.</li> <li>Is this feature going to be phased in or realised in a single delivery. The possible phasing of the project should be discussed here.</li> <li>Will this feature require a manual upgrade?</li> <li>Will the feature necessitate additional customer training?</li> <li>Will the feature require additional training for field support technicians and engineers?</li> <li>Are there likely to be requirements for on the ground support at customer sites during installation or deployment of the feature?</li> </ul> <p></p>"},{"location":"architecture/software_design_document/","title":"Software Design Document Title","text":""},{"location":"architecture/software_design_document/#master-document-revision-history","title":"Master Document Revision History","text":"Date Version Description Author/Editor 0.1 First Draft 0.2 Second Draft 0.3 Third Draft 0.4 Fourth Draft 0.5 0.6 0.7 0.8 0.9"},{"location":"architecture/software_design_document/#references","title":"References","text":"<p>Notes to the Authors - (Delete explanatory text from final approved version)</p> <p>Include references to any relevant documentation here. For an architectural document we would - at a minimum - expect a reference to the Marketing Requirements. Any Feature Analysis documents or wiki entries for workshop minutes or notes should also be referenced or snapshots included if possible so as making the document definitive. Referencing links must be done with care as they are uncontrolled and it is never a good idea to mix that with a controlled document that must be specific as it reflects an agreement between the technical parties and or customers through its reference to marketing requirements etc.. The references included in this section of the template are for reference only and should be replaced as appropriate in each specific instance.</p> <ul> <li>Marketing Requirements https://bboxjira.atlassian.net/wiki/spaces/EM/pages/1230700564/Emerald+4K-+6.0</li> <li>ENG-0008-026 4K/2K Interoperability Analysis</li> <li>ENG-0008-025 4K/2K Architectural Impact</li> <li>REST API: https://bbweb.blackbox.com/sites/Limerick/Engineering/SoftwareEmbedded/ENG-0005-020.docx</li> </ul>"},{"location":"architecture/software_design_document/#terms-and-definitions-used-in-blackbox","title":"Terms and Definitions used in Blackbox","text":"<p>Notes to the Authors \u2013 (Delete this explanatory text from final approved version)</p> <p>This section will include Black Box terms and Definitions; more general technology definitions need not be included here. They can, if required for a specific technology impact study, be added but one should exercise common sense and only define the technology terms that are relevant to the feature under consideration. The table of terms included in this section of the template are for reference only and should be replaced as appropriate in each specific instance.</p> Term Definition CLU Image A optimized encrypted file format used for 2K appliance software images. Decoder See Receiver Encoder See Transmitter FIT Image A optimized encrypted file format used for 4K appliance software images. Municast The use of multiple individual TCP streams to share a video from a single transmitter to multiple receivers Multicast The use of an individual Multicast UDP stream to share a video from a single transmitter to multiple receivers. Blackbox uses reliable multicast so that any dropped frames are resent and no data loss occurs. Pixel Perfect Mode The original scheme used by 4K products where the entire frame of the source video was captured continuously and sent with compression to the decoder. RFX RemoteFX Codec Extension developed by Microsoft which uses a lossy image codec to encode screen images with efficient and effective compression. This is the lossy scheme used in Blackbox products. Reciever A Blackbox appliance that receives and displays a video stream. A receiver is also referred to as a client or decoder. RPU Real Time Processing Unit. The Zynq Ultrascale+ MPSoC features two A5 RPUs. In our 4K products one of these is used for Display Port functionality using IP provided by Xilinx. The second on the encoder side acts a video processing feed between FPGA and TOE Shared Mode A generic term used in Blackbox to describe schemes that allow more than one receiver view the video source from a transmitter. See Municast and Multicast. Tile Differencing Mode A lossless scheme used to reduce bandwidth; only tiles (portions of the screen) that change are sent from encoder to decoder. TOE TCP Offload Engine: A hardware based TCP stack used to accelerate the transmission of data. This is essential in high bandwidth, low latency transmission of video and audio. Technical Debt Technical Debt is a concept in software development that reflects the implied cost of additional rework caused by choosing an easy (limited) solution now instead of using a better approach that would take longer. Transmitter A Blackbox appliance that captures and transmits a video from a source. A transmitter is also referred to as a server or encoder. Video Source A source of input for a Transmitter, normally the DVI or Display Port output of a PC. Table 1 Terms and Definitions"},{"location":"architecture/software_design_document/#overview","title":"Overview","text":"<p>Notes to the Authors \u2013 (Delete this explanatory text from final approved version)</p> <p>In this section you should provide a brief summary of the feature or Functional Area under consideration and how it is changing through the proposed work. Detail in specific terms what this feature is doing and what impact will it have on the existing design of the relevant functional area. This analysis should include an impact analysis on existing software components and System Resources. </p> <p>Some guidelines:</p> <ul> <li> <p>References any Architectural impact studies relevant to this feature.</p> </li> <li> <p>What products are impacted by the design change?</p> </li> <li> <p>Provide a top level description of the existing design and summarise the impact to the current design of this feature or change?</p> </li> <li> <p>Note any design constraints and architectural trade offs</p> </li> </ul>"},{"location":"architecture/software_design_document/#design-detail","title":"Design Detail","text":""},{"location":"architecture/software_design_document/#main-design-impacts","title":"Main Design Impacts","text":"<p>Notes to the Authors \u2013 (Delete this explanatory text from final approved version)</p> <p>In this section you should provide a more detailed statement of the design impact on the current Functional Area.  Some guidelines:</p> <ul> <li>For Emerald appliances present the changes in terms of the receiver side impact and transmitter side impact if that is relevant. </li> <li>The purpose of this document is to allow an engineer provide sufficient detail about the proposed changes in advance of any code development work. The detail you provide here should be sufficient to allow other functional area owners review your proposals and also assess potential impacts to their areas of ownership. </li> <li>If the design impact is best illustrated with a diagram then include that showing the relevant level of detail; for example, show existing objects, classes, queues and messaging that may be impacted. Clearly identify any new elements through the use of colour to differentiate them.</li> <li>Try to assess all of the implications of the change you are proposing; for example:<ul> <li>Are new classes or objects being introduced? If so what is their role and how will they interact with existing objects and classes.</li> <li>Are there new threads or processes which this feature will require. If so, how do these relate to existing threads and processes?</li> <li>Does this feature require additional external libraries? Understand the following implications of introducing these libraries:<ul> <li>What is the license model associated with the library.</li> <li>What is the memory foot print and how does this impact the different product type\u2019s memory budgets.</li> </ul> </li> <li>Are the changes to error handling required for this feature? If so, clearly itemise the requirements.</li> <li>Does this feature require development of test software for validation?</li> <li>Are there specific directives you need to provide to the test and validation groups when this software goes to test.</li> <li>If appropriate identify the main Processes/Threads - explain their responsibilities and priorities.</li> <li>What Error Management will you employ?</li> <li>What debugging mechanism will be employed for this feature. Is there a requirement to add data to existing diagnostic exports?</li> <li>Will new components have a requirement to write to syslog?</li> <li>Is there an impact to software upgrade or system restore and backup?</li> </ul> </li> </ul>"},{"location":"architecture/software_design_document/#system-resource-allocation","title":"System resource allocation","text":"<p>How does the new design impact resource allocation on the system?</p> <ul> <li>Are there changes required to the Memory Map - External, Internal Memory</li> <li>What are the impacts to RAM, Flash, EEPROM, Stack, Heap, Cache Policy</li> <li>Are there impacts to EMIF Bandwidth, Prioritization</li> <li>ARe there changes expected in CPU Load, FPGA occupancy</li> </ul>"},{"location":"architecture/software_design_document/#additional-tools-and-methods-for-documenting-design","title":"Additional Tools and Methods for Documenting Design","text":"<p>The following additional perspectives may be useful when considering what to include in your document:</p>"},{"location":"architecture/software_design_document/#use-cases","title":"Use Cases","text":"<p>Use cases describe the specific actions that a user will take and the responses that the software system will provide in each scenario.</p> <p>Use cases are an excellent tool for gathering requirements for a software system. By describing each use case, you can identify the specific features and functionality that the software must provide to meet the user's needs. They are also an an effective way to communicate the system's intended behavior to stakeholders, including developers, testers, project managers, and users. Use cases provide a clear and concise description of the system's behavior, which can help avoid misunderstandings and miscommunications.</p>"},{"location":"architecture/software_design_document/#use-cases-main-components","title":"Use Cases - main components","text":"<p>The essential components of a use case are:</p> <ul> <li>Actor: An actor is a person, system, or organization that interacts with the software system. The actor initiates the use case and receives the response from the system.</li> <li>Use Case Name: The use case name should be a concise and clear description of the action being performed by the actor.</li> <li>Description: A brief description of the use case that provides an overview of the scenario and the context in which it occurs.</li> <li>Preconditions: Preconditions are the conditions that must be true before the use case can begin. These conditions may include the actor's identity, the system's state, or other environmental conditions.</li> <li>Postconditions: Postconditions are the conditions that must be true after the use case has completed. These conditions may include changes to the system's state, notifications to the actor, or other outcomes.</li> <li>Main Flow: The main flow is the step-by-step description of the use case's normal course of action. It describes the actor's actions and the system's responses.</li> <li>Alternate Flows: Alternate flows describe the variations in the use case that may occur based on different conditions, exceptions, or errors.</li> <li>Exceptions: Exceptions are the conditions that may cause the use case to fail or produce unexpected results. They describe the actions that the system should take to handle these conditions.</li> <li>Includes: The includes section lists other use cases that are included in the current use case. These are typically smaller use cases that are called by the main use case.</li> <li> <p>Extends: The extends section describes the use cases that may be extended or modified by the current use case. These are typically larger use cases that provide additional functionality.</p> </li> <li> <p>Creating use case diagrams</p> </li> </ul>"},{"location":"architecture/software_design_document/#state-machines","title":"State Machines","text":"<p>A state machine is a model that describes the behavior of a system based on its current state and the events that can occur to transition it to a new state. In software design, state machines are used to model the behavior of software systems that have a finite number of states and events.</p> <p>The essential components of a state machine in a software design document include:</p> <ul> <li>States: The states represent the different modes or conditions that the software system can be in. Each state represents a specific behavior of the system.</li> <li>Events: The events represent the stimuli that trigger the system to transition from one state to another. Events can be user input, system messages, or environmental changes.</li> <li>Transitions: The transitions represent the movement of the system from one state to another in response to an event. Transitions may have conditions that must be met before they can occur.</li> <li>Actions: The actions represent the behavior of the system when it transitions from one state to another. Actions can include updating variables, sending messages, or calling other functions.</li> </ul> <p>Not every design will require a state machine and many new designs may change existing state machines. If a state machine is very complex then it will be very difficult to model it in a state machine diagram. The designer should make a determination as to what is practical to capture in the design document.</p> <p></p>"},{"location":"architecture/software_design_document/#state-machine-reference","title":"State Machine Reference","text":"<ul> <li>How to draw a state machine</li> </ul>"},{"location":"architecture/software_design_document/#sequence-diagrams","title":"Sequence Diagrams","text":"<p>Sequence diagrams are a type of diagram used in software design that depicts the interactions between objects or components of a software system in a chronological order. Sequence diagrams are particularly useful for modeling the dynamic behavior of a software system and are often used in conjunction with use cases.</p> <p>Sequence diagrams provide a visual representation of the flow of control between objects or components of the system. They show the sequence of messages that are passed between objects, along with the order in which those messages are sent and received. By using sequence diagrams, developers can better understand how objects interact with each other, identify potential issues or bottlenecks, and ensure that the system behaves as intended.</p> <p>The essential elements of a sequence diagram include:</p> <ul> <li>Actors or Objects: These represent the entities that participate in the interaction. Actors or objects can be users, components, or other systems.</li> <li>Messages: These represent the communication between actors or objects. Messages can be synchronous or asynchronous, and they can have parameters or return values.</li> <li>Lifelines: These represent the objects or components involved in the interaction. Lifelines are typically depicted as vertical lines that run through the sequence diagram, with messages represented as arrows between them.</li> <li>Activation Bar: These represent the time during which an object is active and processing a message. The activation bar is typically depicted as a horizontal bar above the lifeline.</li> </ul> <p>Key behaviours to capture in a sequence diagram include:</p> <ul> <li>Initialization Sequence</li> <li>Shut down sequence</li> <li>Data/Control Flow</li> </ul> <p></p>"},{"location":"architecture/software_design_document/#api-changes-or-changes-to-external-interfaces","title":"API Changes or changes to external interfaces","text":"<p>Notes to the Authors \u2013 (Delete this explanatory text from final approved version) Some guidelines:</p> <ul> <li>Does the proposed design change impact any existing APIs or external interfaces or does it propose any new APIs or interfaces? If so, please clearly state the impact so that the owners of that software can assess the impacts.</li> </ul>"},{"location":"architecture/software_design_document/#rest-api-changes","title":"REST API Changes","text":"<p>Does the design impact the REST API</p>"},{"location":"architecture/software_design_document/#security-considerations","title":"Security Considerations","text":"<p>Notes to the Authors \u2013 (Delete this explanatory text from final approved version) Some guidelines:</p> <ul> <li>Does the design change have security or system integrity implications?<ul> <li>Are you opening new ports?</li> <li>Are you impacting existing security levels or changing security credentials?</li> </ul> </li> </ul>"},{"location":"architecture/software_design_document/#test-and-validation","title":"Test and Validation","text":"<p>Notes to the Authors \u2013 (Delete this explanatory text from final approved version)</p> <p>What test cases are you proposing to use to validate the new functionality? These may be based on the Use Cases identified in the architectural study or marketing requirements, but may also include developer level unit tests. Use cases are also an essential part of software testing because they provide a clear and detailed description of how the system should behave under different scenarios. Testers can use the use cases to ensure that the software behaves as expected.</p> <p>Some guidelines:</p> <ul> <li>How will this feature be validated in System Test.?</li> <li>Is there associated area of the system that might be affected by this change; for example, perhaps a performance change or the risk of indirect impact in another product feature.</li> <li>Identify where you think the major risks are from a test perspective.</li> </ul>"},{"location":"architecture/software_design_document/#database-and-configuration","title":"Database and Configuration","text":"<p>Notes to the Authors \u2013 (Delete this explanatory text from final approved version)</p> <p>Will these design changes require changes to any existing databases or configuration files or will it introduce the requirement for new persistent data structures.</p>"},{"location":"architecture/software_design_document/#performance-and-user-experience","title":"Performance and User Experience","text":"<p>Notes to the Authors \u2013 (Delete this explanatory text from final approved version)</p> <p>Will these design changes impact performance either negatively or positively? Highlight any implications or risks</p>"},{"location":"architecture/ConnectionLabel/label/","title":"Connection Label Feature Design","text":"This document is a Software Design Document for the Connection Label Feature on the Emerald Appliances <p>Master Document Revision History</p> Date Version Description Author / Editor 8/12/2021 0.1 First Draft Eamon Hayden 7/7/2023 0.2 Imported into mkdocs Eamon Hayden 7/7/2023 0.3 Label Colours added Eamon Hayden 17/7/2023 0.4 Updates to label colours Eamon Hayden --- --- --- ---"},{"location":"architecture/ConnectionLabel/label/#list-of-figures","title":"List of Figures","text":""},{"location":"architecture/ConnectionLabel/label/#list-of-tables","title":"List of Tables","text":""},{"location":"architecture/ConnectionLabel/label/#references","title":"References","text":"<ul> <li>Marketing Requirements : [PRM-104] OSD Label - - Jira (atlassian.net)</li> <li>2K AFS - ENG-0005-025_Legacy2k_Register_Specs.docx (blackbox.com)</li> <li>4K AFS - ENG-0006-0011_Emerald_Receiver_AFS.docx (blackbox.com)</li> </ul>"},{"location":"architecture/ConnectionLabel/label/#terms-and-definitions-used-in-blackbox","title":"Terms and Definitions used in Blackbox","text":"Term Definition Startapp The startapp.sh is the file that is created with all details of the connection being launched \u2013 To actually launch the connection, this file is executed Decoder See Receiver Encoder See Transmitter Startgui.sh This is the shell script that alternates between the OSD running and the connection running. Connection_label This is the new binary created to take in a connection name as a parameter and write the resultant Label to a pre-configured Framebuffer Receiver A Blackbox appliance that receives and displays a video stream. A receiver is also referred to as a client or decoder. Transmitter A Blackbox appliance that captures and transmits a video from a source. A transmitter is also referred to as a server or encoder. Video Source A source of input for a Transmitter, normally the DVI or Display Port output of a PC. <p>Table 1 Terms and Definitions</p>"},{"location":"architecture/ConnectionLabel/label/#overview","title":"Overview","text":"<p>The Connection Label feature gives users the ability to see their connection name overlaid on top of their connection. The feature uses a hardware based overlay mechanism to display the connection name in an 840x40 pixel sized box at different locations on the screen. In Release 6.3.1, the feature can only be configured via the OSD, but for future releases, this configuration will also be available via Boxilla. The feature can be enabled on all receivers bar the Emerald SE Dual-Head (No space in the FPGA for the logic). The following elements of the Connection Label can be configured on an RX:</p> <ul> <li>Enable / disable the feature</li> <li>Set the time for the Label to be displayed \u2013 2 Options</li> <li>5 seconds</li> <li>Always On</li> <li>Set the position of the Label</li> <li>Top Centre</li> <li>Top right</li> <li>Bottom Centre</li> <li>Bottom Right</li> </ul> <p>Once the Feature is enabled on the RX, then a hotkey sequence (Hotkey + 'l' or 'L') can also be used to display the Label / dismiss the label.</p> <p>The basic steps for overlaying a Label on top of a connection are as follows:</p> <ol> <li>Enable the Connection Label feature via the OSD</li> <li>When a connection is being launched, add the command to write the label to the framebuffer to the 'startapp' file</li> <li>When the 'startapp' file is executed, the label gets written to the framebuffer</li> <li>When the connection is established, point the overlay logic to the framebuffer that contains the label and turn on the overlay</li> <li>If the Label is set to Timeout after 5s, then start a timer and turn off the Label after 5s</li> <li>Once the connection is terminated, turn off the overlay.</li> </ol> <p>NOTES:</p> <p>In the detail design below, all the main functions will first check that Connection Label is Enabled (read from the Sql DB) before any Label functionality is called.</p>"},{"location":"architecture/ConnectionLabel/label/#design-detail","title":"Design Detail","text":""},{"location":"architecture/ConnectionLabel/label/#connection-label-configuration","title":"Connection Label Configuration","text":"<p>The Connection Label Configuration differs depending on whether the system is Managed or Unmanaged.</p> <ul> <li>Managed Mode Configuration<ul> <li>The Enable / Position / Timeout for the Connection Label can only be configured via the OSD on the RX and as such is specific to that Receiver</li> <li>The Label Colours can Only be configured via Boxilla - This value is configured on a per connection basis.</li> </ul> </li> </ul>   sequenceDiagram     participant User     participant Boxilla     participant OSD     participant SQL DB     participant XML DB      User-&gt;&gt;OSD: Enable Connection Label     User-&gt;&gt;OSD: Select Label Timeout / Position     User-&gt;&gt;SQL DB: Write Connection Label settings (Enable/Timeout/Position)     User-&gt;&gt;Boxilla: Create Connection     Boxilla-&gt;&gt;Boxilla: Select either 'default' or 'custom' Label Colours     User-&gt;&gt;XML DB: Save Connection   <ul> <li>Unmanaged Mode Configuration<ul> <li>The Enable / Position / Timeout / Colours for the connection label are configured via the OSDon the reveiver</li> </ul> </li> </ul>   sequenceDiagram     participant User     participant OSD     participant SQL DB      User-&gt;&gt;OSD: Enable Connection Label     User-&gt;&gt;OSD: Select Label Timeout / Position     User-&gt;&gt;OSD: Select Label Colours     User-&gt;&gt;SQL DB: Write Connection Label settings (Enable/Timeout/Position/Colours)"},{"location":"architecture/ConnectionLabel/label/#connection-label-usage","title":"Connection Label usage","text":"<p>The following sequence diagram details how the Connection Manager gets all the required  information for running the connection_label application to display the Connection Label.</p>   sequenceDiagram     participant Connection Manager     participant SQL DB     participant XML DB     participant Overlay     participant Timer     participant connection_label Application      Connection Manager-&gt;&gt;SQL DB: Is Connection Label Enabled?     SQL DB-&gt;&gt;Connection Manager: Yes / No     Connection Manager-&gt;&gt;Connection Manager: (If No) do nothing     Connection Manager-&gt;&gt;SQL DB: (if yes) Read ConnectionLabel Position and Timeout     SQL DB-&gt;&gt;Connection Manager: Position     SQL DB-&gt;&gt;Connection Manager: Timeout     Connection Manager-&gt;&gt;XML DB: Has Connection associated Label Colours attribute?     XML DB-&gt;&gt;Connection Manager: Yes / No     Connection Manager-&gt;&gt;XML DB: (If Yes) Read Connection Label colours from XML DB     XML DB-&gt;&gt;Connection Manager: Background + Text RGB values     Connection Manager-&gt;&gt;SQL DB: (if No) Read Connection Label colours from SQL DB     SQL DB-&gt;&gt;Connection Manager: Background + Text RGB values     Connection Manager-&gt;&gt;Overlay: Setup overlay configuration based on required Position     Connection Manager-&gt;&gt;Timer: If (Timeout set to 5 secs) - Set timer to 5     Connection Manager-&gt;&gt; connection_label Application: Configure the Connection Label using:  Background + Text RGB values"},{"location":"architecture/ConnectionLabel/label/#creating-a-framebuffer-for-the-label","title":"Creating a Framebuffer for the Label","text":"<p>The framebuffer is created in the device tree of all receivers. The base address depends on whether it is a 2K or 4K receiver.</p> <p>The details of the framebuffers are as follows:</p> <ul> <li> <p>2K</p> <ul> <li>framebuffer@31401000{</li> <li>compatible = \"simple-framebuffer\";</li> <li>reg = \\&lt;0x31401000 0x12C00&gt;;</li> <li>width = \\&lt;0x000001E0&gt;;</li> <li>height = \\&lt;0x00000028&gt;;</li> <li>stride = \\&lt;0x00000780&gt;;</li> <li>format = \"a8r8g8b8\";</li> </ul> </li> <li> <p>4K</p> <ul> <li>fbuf@7A050000{</li> <li>compatible = \"simple-framebuffer\";</li> <li>reg = \\&lt;0x00000000 0x7A050000 0x00000000 0x25800&gt;;</li> <li>width = \\&lt;0x000001E0&gt;;</li> <li>height = \\&lt;0x00000028&gt;;</li> <li>stride = \\&lt;0x00000780&gt;;</li> <li>format = \"a8r8g8b8\";</li> </ul> </li> </ul> <p>The Framebuffer (fb1) is taken as an input to the application that is creating the Label \u2013 The application then writes the Label into this framebuffer. The Overlay will then display the contents of this frame buffer as required.</p>"},{"location":"architecture/ConnectionLabel/label/#generating-the-label","title":"Generating the Label","text":"<p>The label is generated by a QT based application which writes the 'connection name' into a box of fixed size (Width 480 px by Height 40 px).</p>"},{"location":"architecture/ConnectionLabel/label/#arguments","title":"Arguments:","text":"<p>This application requires few mandatory arguments:</p> <ul> <li>-nomouse: provide no mouse cursor displayed when the application is running;</li> <li>-qws -display linuxfb:/dev/fb1: this arguments provide application will be placed in correct frame buffer;</li> <li>-n: the argument which allow as to capture \"connection name\" which should follow immediately after this argument.</li> </ul> <p>The binary to create the label is called 'connection_label' and is located in /usr/bin on the Receivers.</p> <p>The code for this application is located in 'Applications/Decoder/ConnectionLabel</p>"},{"location":"architecture/ConnectionLabel/label/#a-usage-example","title":"A usage example:","text":"<p>/usr/local/connection_label -nomouse -qws -display linuxfb:/dev/fb1 -n Default_TX</p>"},{"location":"architecture/ConnectionLabel/label/#application-flow","title":"Application flow:","text":"<p>During initialization connection_label will parse the arguments searching for connection name. If connection name is not found then it will remain an empty string. Next, the mainwindow class initialization is called. The next step is to pass connection name to mainwindow class - this is accomplished by calling setConnectionName(connectionName) function from mainwindow class. The setConnectionName(connectionName) function will pass connectionName variable to label. When this is completed the mainwindow is shown to user.</p> <p>The mainwindow class ui form has predefined size of 480 px by 40 px and has only one label placed which is occupying all available space of ui form.</p> <p>Within mainwindow initialization the title bar, the close, minimize and help buttons as well as window border are removed to prevent user from moving around display or closing the connection label application.</p> <p>The colour of mainwindow background is set to RGBA (151, 253, 255,255).</p> <p>The mainwindow coordinates are then set to H0, W0 in required framebuffer.</p>"},{"location":"architecture/ConnectionLabel/label/#writing-the-label-to-the-framebuffer","title":"Writing the Label to the Framebuffer","text":"<p>The application to create the label (/usr/bin/connection_label) is called at the start of the startapp.sh script. The startapp.sh script is created and executed every time a connection is being launched.</p> <p>The full sequence is as follows:</p> <ul> <li>Connection is launched (via OSD/ Rest etc.)</li> <li>If the connection is a TX or VM Direct connection, then Connection Labels are applicable</li> <li>If ConnectionLabel is Enabled (check SQL DB)<ul> <li>/usr/bin/connection_label \u2013nomouse \u2013qws \u2013display linuxfb:/dev/fb1 \u2013n 'connection_name' &amp; is written to the start of the /tmp/startapp.sh file</li> </ul> </li> <li>The rest of the contents of /tmp/startapp.sh are filled in as normal</li> <li>The /tmp/startapp.sh file is executed, resulting in the connection being setup and the label being written to fb1.</li> </ul> <p>The result is that (if the connection label feature is enabled) the connection name will be written to /dev/fb1 \u2013 When the overlay is being setup, it will point to /dev/fb1 to pick up the Label.</p>"},{"location":"architecture/ConnectionLabel/label/#configuring-the-overlay-to-display-the-label","title":"Configuring the Overlay to display the Label","text":"<p>The details of how to configure the 2K and 4K overlays is in this section. The overlay only gets configured/re-configured when a connection is setup or when a resolution changes. The Label hotkey does not reconfigure the Label \u2013 It assumes it is correctly configured and just enables/disables it as required.</p>"},{"location":"architecture/ConnectionLabel/label/#4k-overlay-configuration","title":"4K Overlay Configuration","text":"<p>The 4K overlay is done in the FPGA logic. It is configured in software using the following register set:</p> <ul> <li>HW_OSD_SCALE_FACTOR_REG_OFFSET - 1300<ul> <li>The bottom 2 bits of this register are used to scale the overlay (The rest are unused) this allows us to scale the overlay so that it is visible at high resolutions.<ul> <li>For widths of 1920 or less, we set the value to 0x00 for No scaling.</li> <li>For widths between 1920 and 3840, we set the value to 1, which scales the overlay by a factor of 2 (i.e. doubles the size)</li> <li>For widths over 3840, we set the value to 2, which scales the overlay by a factor of 3 (i.e. triples the size)</li> </ul> </li> </ul> </li> <li>HW_OSD_ENABLE_REG_OFFSET - 1304<ul> <li>The bottom bit is the enable/disable bit (The rest are unused). To Enable the overlay, the bottom bit is set to 1</li> </ul> </li> <li>HW_OSD_FLUSH_REG_OFFSET - 1308<ul> <li>This is a placeholder register (I.e. functionality not currently supported), so the contents are set to 0</li> </ul> </li> <li>HW_OSD_READ_BURST_SIZE_REG_OFFSET - 1314<ul> <li>As per the AFS, this should be left at the default value of 0x10</li> </ul> </li> <li>HW_OSD_READ_BURST_PER_FRAME_REG_OFFSET - 1318<ul> <li>This value can be calculated using the following formula: - (width * height *4) /256. In our case (label fixed at 480x40), this equates to: 0x12C</li> </ul> </li> <li>HW_OSD_BASE_ADDRESS_REG_OFFSET - 131C<ul> <li>This register is configured with the address of the Label \u2013 In our case, this is the address of the framebuffer(fb1) that the label is written into \u2013 The value is: 0x7A050000</li> </ul> </li> <li>HW_OSD_TEST_MODE_REG_OFFSET - 1320<ul> <li>This is for hardware test, so we set it to 0</li> </ul> </li> <li>HW_OSD_X_OFFSET_REG_OFFSET - 1324</li> <li>HW_OSD_Y_OFFSET_REG_OFFSET - 1328<ul> <li>The X and Y offset registers are the starting coordinates where the label gets displayed. This is calculated using the following inputs:<ul> <li>The selected position of the label (top/bottom centre/right)</li> <li>The resolution of the display</li> <li>The size of the label (480x40 in this case)</li> </ul> </li> </ul> </li> <li>HW_OSD_WIDTH_REG_OFFSET - 132C<ul> <li>This is set to the Label width \u2013 0x1E0 (480 decimal)</li> </ul> </li> <li>HW_OSD_HEIGHT_REG_OFFSET - 1330<ul> <li>This is set to the label height \u2013 0x28 (40 decimal)</li> </ul> </li> <li>HW_OSD_BACKGROUND_FILL_REG_OFFSET - 1334<ul> <li>This allows us to fill the rest of the screen (outside the label overlay) with black. We want to leave the background as it is, so we set this value to 0x0</li> </ul> </li> </ul>"},{"location":"architecture/ConnectionLabel/label/#2k-overlay-configuration","title":"2K Overlay Configuration","text":"<p>The 2K overlay is done in the Fpga logic. The configuration of the Label is done every time a connection is made and also every time the resolution changes (in the case of RX-TX connections). It is configured by software using the following register set. The overlay can be done for either head (on a 2K receiver), but we only do the overlay for the first head.</p> <p>Overlay base address for H0 (0x800C8380)</p> <p>Overlay base address for H1 (0x800C8390)</p> <p>Specific Registers:</p> <ul> <li>H0_OVERLAY_CONTROL_REG - 0x800C8380 (8 bit)</li> <li>The Control Register has the following details:<ul> <li>Bit 7 Enable bit</li> <li>Bit 6 Dimension update bit</li> <li>Bits 0 \u2013 5 Test Character</li> </ul> </li> <li>Once the configuration of the Label is complete, Bit 6 of the Control Register will be set to update the config values.</li> <li>Once everything is in place and displaying the label is required, Bit 7 of the Control Register is set.</li> <li>To turn off the Label, Bit 7 of the Control Register will be set to 0</li> <li>H0_OVERLAY_BASE_ADDR_REG - 0x800C8384 (32 bit)</li> <li>This register is configured with the address of the Label \u2013 In our case, this is the address of the framebuffer(fb1) that the label is written into \u2013 The value is: 0x31401000</li> <li>H0_OVERLAY_HORIZONTAL_OFFSET - 0x800c8388 (16 bit)</li> <li>H0_OVERLAY_VERTICAL_OFFSET - 0x800C838A (16 bit)</li> <li>The Horizontal and Vertical offset registers are the starting coordinates where the label gets displayed. This is calculated using the following inputs:<ul> <li>The selected position of the label (top/bottom centre/right)</li> <li>The resolution of the display</li> <li>The size of the label (480x40 in this case)</li> </ul> </li> <li>H0_OVERLAY_HORIZONTAL_SIZE - 0x800C838C (16 bit)</li> <li>This is set to the Label width \u2013 0x1E0 (480 decimal)</li> <li>HO_OVERLAY_VERTICAL_SIZE - 0x800C838E (16 bit)</li> <li>This is set to the label height \u2013 0x28 (40 decimal)</li> </ul>"},{"location":"architecture/ConnectionLabel/label/#labels-for-different-connection-types","title":"Labels for different Connection Types","text":"<p>In Release 6.3.1, Connection labels are supported on RX-TX connections and VM RDP Direct connections only.</p>"},{"location":"architecture/ConnectionLabel/label/#turning-on-the-label-after-a-connection-is-launched","title":"Turning on the Label after a connection is launched","text":"<p>Once an RX-TX or VM RDP connection has been setup, the Connection Label will be configured and turned on (assuming it has been enabled). This is done immediately after the connection has been setup in order to ensure that the Label appears immediately after the connection appears on the monitor. Exactly where this is done will depend on the type of connection.</p> <ul> <li>RX-TX Connections</li> <li>In this case, the Label is turned on in the function \"bb_connection_setup_hardware()\"</li> <li>2K VM RDP Connections</li> <li>In this case, the Label is turned on in the function: \"rfx_context_update\"</li> <li>4K RDP Connections</li> <li>TBD</li> </ul>"},{"location":"architecture/ConnectionLabel/label/#timing-out-the-label","title":"Timing out the Label","text":"<p>There are 2 timing options available in release 6.3.1 for Connection Labels \u2013 There are:</p> <ul> <li>Constantly On</li> <li>Timeout after 5sec</li> </ul> <p>These options are configured via the OSD and the resultant selection stored in the Sql DB.</p> <p>The 'Constantly On' option works as the name indicates \u2013 The Label is turned on when a connection is launched and only turned off when the connection is terminated. The only thing that can change this is when the hotkey to turn on/off the Label is used.</p> <p>The 'timeout after 5sec' option is handled as follows:-</p> <p>Once the connection is launched, a timer is started. The timer is checked in the 'interval tasks' function (which is called every second) \u2013 once the timer has expired (determined by comparing the difference between the original timer and the current time), then the connection label is turned off. Turning off is done by the system call: - 'display_layer_cli \u2013label-disable' (see section: 7.12 below)</p>"},{"location":"architecture/ConnectionLabel/label/#turning-off-the-label-when-connection-terminates","title":"Turning off the Label when connection terminates","text":"<p>Once a connection terminates, the Connection Label needs to be turned off (as we don't want to overlay it on top of the OSD screen) and also the application that writes the connection Label to the frame buffer needs to be stopped.</p> <p>The connection label itself is turned off by calling the display_layer_cli (see section: 7.12). This is done via the startgui.sh script.</p> <p>The application that writes the label to the frame buffer (/usr/bin/connection_label) is constantly running while the connection is up due to the fact that exiting the application also flushes the framebuffer. Once the connection terminates, this application also needs to be terminated. This is done in startgui.sh using: - 'killall connection_label'</p>"},{"location":"architecture/ConnectionLabel/label/#enablingdisabling-the-label-using-hotkeys","title":"Enabling/disabling the Label using Hotkeys","text":"<p>The extra Hotley (Hotley + 'l'/'L') has been configured in the connection_control application. These are handled in the same manner as all existing hotleys. When the Label hotkey fires, connection _control enables/disables the Label using the following command (See section: 7.12):</p> <p>display_layer_cli \u2013label-on-off</p>"},{"location":"architecture/ConnectionLabel/label/#reconfiguring-the-label-after-a-resolution-change","title":"Reconfiguring the label after a resolution change","text":"<p>In an RX-TX connection, the resolution on the target device may change while the connection is in place. In this case, a new resolution will be received by the Rx and the display will be reconfigured with this new resolution.</p> <p>If the Connection Label feature is enabled, then the Overlay needs to be reconfigured with this new resolution in order that the Label gets displayed correctly. This reconfiguration of the label is done as per section: 7.4 above. The reconfiguration is done even if the label is currently turned off such that if the Label gets turned on via the hotkey, it is properly configured.</p>"},{"location":"architecture/ConnectionLabel/label/#additional-functionality-added-to-the-display-layer","title":"Additional functionality added to the Display Layer","text":"<p>The following additional functionality has been added to the Display Layer to configure/enable/Disable the Connection Label:</p> <ul> <li>Display_driver_common_configure_connection_label()</li> <li>This function configures the Overlay for the connection label. It does this for either the 4K or 2K overlay. It configures all the required registers (see section: 7.4), but does not turn on/off the label.</li> <li>Display_driver_common_turn_on_connection_label()</li> <li>This function turns ON the Overlay for either 2K or 4K.</li> <li>Display_driver_common_turn_off_connection_label()</li> <li>This function turns OFF the overlay for either 2K or 4K</li> <li>Display_driver_common_turn_on_off_connection_label()</li> <li>This function turns On the Label if it is already Off and turns it Off if it is already On \u2013 It does this for 2K and 4K</li> <li>Display_driver_common_connection_label_on()</li> <li>This function returns TRUE if the Label is currently On \u2013 It does this for 2K and 4K</li> </ul>"},{"location":"architecture/ConnectionLabel/label/#changes-to-display-layer-cli","title":"Changes to Display Layer CLI","text":"<p>2 new options added to the display layer CLI. These are as follows:</p> <ul> <li>Label-disable (display_layer_cli \u2013label-disable)</li> <li>This is used to turn OFF the Overlay in order to no longer display the Connection Label. It is called in startgui.sh when a connection is exiting.</li> <li>Label-on-off (display_layer_cli \u2013 label-on-off</li> <li>This is used to turn ON the Overlay if it is currently OFF and turn OFF the Overlay if it is currently ON. This is used for the Label Hotkey implementation \u2013 When the Label hotkey (hotkey + 'l' or 'L') is triggered, it will turn on the label (if it is currently off) and turn off the label (if it is currently on).</li> </ul>"},{"location":"architecture/ConnectionLabel/label/#api-changes-or-changes-to-external-interfaces","title":"API Changes or changes to external interfaces","text":"<p>There are no API changes associated with this feature for the initial version, as it is only possible to configure it on the OSD. There is a Future requirement however that requires that this feature be configurable on Boxilla \u2013 when this happens, there will need to be API changes to handle the new configuration.</p>"},{"location":"architecture/ConnectionLabel/label/#security-considerations","title":"Security Considerations","text":"<p>This feature has no security impacts.</p>"},{"location":"architecture/ConnectionLabel/label/#test-and-validation","title":"Test and Validation","text":"<p>The following test cases are required:</p> <ul> <li>Validate that the Connection Label works on 4 different connection types:</li> <li>2K RX-TX</li> <li>4K RX-TX</li> <li>2k RDP VM</li> <li>4K RDP VM</li> <li>Validate the different configurations for all 4 connection types</li> <li>Enable/Disable</li> <li>Timeout</li> <li>Label location</li> <li>Validate that the Label times out correctly</li> <li>Validate that a Res change (Rx-Tx only) resizes the Label and turns is on/off based on whether it was on/off before the Res change.</li> <li>Validate that the Label Hotkey functions correctly.</li> <li>Validate that the Label is scaled appropriately on 4K</li> <li>Validate that the Label disappears when a connection is terminated</li> <li>Validate that the label is visible at all resolutions</li> </ul>"},{"location":"architecture/ConnectionLabel/label/#database-and-configuration","title":"Database and Configuration","text":"<p>The Label configuration is stored in the Sql DB on the Rx. A new table has been added to store the values as follows:</p> <p>CREATE TABLE ConnectionLabel (LabelEnable INT, LabelTimeout INT, LabelPosition TEXT);</p> <p>INSERT INTO ConnectionLabel VALUES(1,0,'Bottom Centre');</p> <p>Notes:</p> <p>LabelEnable has 2 possible values \u2013 1/0 (On/Off)</p> <p>LabelTimeout currently has 2 possible values \u2013 0/5 (ConstantlyOn / Timeout after 5secs</p> <p>LabelPosition currently has 4 possible values \u2013 'Bottom Centre', 'Bottom Right' 'Top Centre', 'Top Right'</p> <p>Default values:</p> <p>LabelEnable \u2013 0 (Off)</p> <p>LabelTimeout \u2013 5 (Timeout after 5 secs)</p> <p>LabelPosition \u2013 'Bottom Centre'</p> <p>Database Version:</p> <p>The addition of the connectionLabel to the SQL DB requires the DB to update to version 1.6</p>"},{"location":"architecture/ConnectionLabel/label/#performance-and-user-experience","title":"Performance and user experience","text":"<p>The addition of the connection Label should have no noticeable impact on connection setup/switch/termination times.</p>"},{"location":"architecture/ConnectionLabel/label/#connection-label-colours","title":"Connection Label Colours","text":"<p>Adding the ability to Configure the Connection Label Colours is being added as an Appliance / Boxilla feature. The feature will be added in Appliance version 6.7.0 and Boxilla version 4.8 The details on how this can be configured will differ based on whether the system is Managed or Unmanaged</p>"},{"location":"architecture/ConnectionLabel/label/#configuring-the-connection-label-enable-timeout-location","title":"Configuring the Connection Label - Enable / Timeout / Location","text":"<p>There will be no changes required to how the existing aspects of the Connection Label feature are configured. Regardless of whether the Receiver is Managed or Unmanaged, the configuration will be done via the OSD. Being able to configure the Enable/Timeout/Location is an Optional requirement for Boxilla, so my assumptiuon is that it will not happen in the 4.8 releease. Adding the REST API to allow Boxilla to configure these attributes on the appliance is being considered for the 6.7.0 appliance release however (My recommendation was not to include it, as it requires input from the Boxilla team and they have limited bandwidth at the moment). From a usage point of view, the values will be written to the SQL DB on the Receiver regardless of who configures them - Based on this, there will be no changes to how these values are read/used when/if configuring via Boxilla happens.</p>"},{"location":"architecture/ConnectionLabel/label/#generic-requirements-for-connection-label-colours","title":"Generic requirements for Connection Label Colours","text":"<p>The Connection Label Colour Requirements are as follows:</p> <ul> <li>The values will be RGB values (3 * 8 bit values)</li> <li>RGB values need to be specified for both the Background and Text colour.</li> <li>When configuring the Colours, the administrator needs to be given a preview of the resultant Connection Label to ensure it is what is required</li> <li>In an Unmanaged system, the Label Colours will be configured via the OSD - These colours will apply to all connections launched from this RX.</li> <li>On a managed system, the label colours will be configured via Boxilla on a per connection basis</li> </ul>"},{"location":"architecture/ConnectionLabel/label/#database-and-configuration-updates-for-connection-label-colours","title":"Database and Configuration Updates for Connection Label Colours","text":"<p>Adding Colours to the Connection Label will require additions to the ConnectionLabel Table in the SQL DB.  The additions are the RGB values for the Background and text colours - These will default to the current Background and test colours (black test on a sky blue background). The changes will be appended to the existing table as follows:</p> <ul> <li>ALTER TABLE ConnectionLabel ADD COLUMN Background_R INT;</li> <li>update ConnectionLabel set Background_R=\"151\";</li> <li>ALTER TABLE ConnectionLabel ADD COLUMN Background_G INT;</li> <li>update ConnectionLabel set Background_G=\"253\";</li> <li>ALTER TABLE ConnectionLabel ADD COLUMN Background_B INT;</li> <li>update ConnectionLabel set Background_B=\"255\";</li> <li>ALTER TABLE ConnectionLabel ADD COLUMN Text_R INT;</li> <li>update ConnectionLabel set Text_R=\"0\";</li> <li>ALTER TABLE ConnectionLabel ADD COLUMN Text_G INT;</li> <li>update ConnectionLabel set Text_G=\"0\";</li> <li>ALTER TABLE ConnectionLabel ADD COLUMN Text_B INT;</li> <li>update ConnectionLabel set Text_B=\"0\";</li> </ul> <p>Database Version:</p> <p>The update of the connectionLabel to the SQL DB requires the DB to update to version 1.9</p>"},{"location":"architecture/ConnectionLabel/label/#configuring-connection-label-colours-in-unmanaged-mode","title":"Configuring Connection Label Colours in Unmanaged mode","text":"<p>In unmanaged mode, the functionality will be configured as follows:-</p> <ul> <li>The Label colours will be configured via the OSD. </li> <li>To facilita this, a new 'Colors' tab will be added to the existing Connection Label tab on the OSD. </li> <li>This 'Colours' tab will become active when the Connection Label Enable is selected. </li> <li>This Colours tab will provide 'sliders' to allow the user (admin/power user) to configure the RGB values for both the Background and text colours</li> <li>A preview of the resultant colours will be made available to the user.</li> <li>Once the values are saved, they will be written to the Connection Label Table in the SQL DB<ul> <li>The existing values in this table will not change</li> <li>The colours will be attached to the end of the table</li> <li>The default for the colours are the existing colours (i.e black test on a sky blue gackground)</li> </ul> </li> <li>In the Unmanaged scenario, the Connection Label Colours will be on an RX basis - i.e any connection launched from this RX will use these colours.</li> </ul>"},{"location":"architecture/ConnectionLabel/label/#configuring-connection-label-colours-in-managed-mode","title":"Configuring Connection Label Colours in Managed mode","text":"<p>In managed mode, the functionality will be configured as follows:-</p> <ul> <li>The Label colours will be configured via Boxilla. </li> <li>The Label Colours will be configured on a Per connection basis<ul> <li>The ability to configure global 'default-colours' will be provided to the Boxilla user</li> <li>When creating a connection, the user will have the ability to select either<ul> <li>The 'default-colours'  </li> <li>To create a customer colour combination for this connection</li> </ul> </li> <li>Creating a custom colours on Boxilla will be done in a similar way to how it is done on an Unmanaged RX (for consistency)</li> </ul> </li> <li>The RGB values for the colours will be stored in the XML file as an additional argument/qrguments to a connection</li> <li>Any existing connections will be migrated by Boxilla to this new scheme</li> </ul> <p>NOTE: In managed mode, the facility to configure Connection Label Colours will NOT be available via the OSD</p>"},{"location":"architecture/ConnectionLabel/label/#required-changes-to-the-xml-file","title":"Required changes to the XML file","text":"<p>The change to the XML file needs to be as short as possible. Based on this requirement, the following addition to a connection in the XML filehas been agreed with the Boxilla  team.</p> <p>labelColours='255,0,100,20,0,255'</p> <p>The first 3 values will be the RGB values for the Background colour and the second 3 values will be the RGB values for the Text colour.</p>"},{"location":"architecture/ConnectionLabel/label/#turning-on-the-connection-label-with-different-colours","title":"Turning On the Connection Label with different Colours","text":"<p>There are 2 aspects to this work:</p>"},{"location":"architecture/ConnectionLabel/label/#updates-to-the-connection_label-binary-to-allow-the-caller-connection-manager-to-pass-the-colours-as-parameters","title":"Updates to the connection_label binary to allow the caller (Connection Manager) to pass the Colours as parameters","text":"<p>The connection_label binary currently has the following parameters:</p> <ul> <li>Framebuffere reference - This is the framebuffer that the connection Label needs to be written to</li> <li>Connection Name - This is the text to write into the connection label</li> </ul> <p>The addition of Connection Label Colours will require the following 6 extra arguments</p> <ul> <li>Background R value</li> <li>Bacgground G value</li> <li>Background B value</li> <li>Text R value</li> <li>Text G value</li> <li>Text B value</li> </ul> <p>The new format for this command is:</p> <ul> <li>/usr/bin/connection_label -nomouse -qws -display linuxfb:/dev/fb2:tty=/dev/fb2 -n \"Connection Name\" -bc \"255\" \"0\" \"255\" -tc \"0\" \"255\" \"100\" &amp;</li> </ul> <p>The changes to the connection label binary are to take in the Background and Text colours and to use these as the colours when generating the Connection Label.</p>"},{"location":"architecture/ConnectionLabel/label/#the-logic-in-the-connection-manager-to-figure-out-what-colours-to-pass-to-the-connection_label-binary","title":"The Logic in the Connection Manager to figure out what Colours to pass to the connection_label binary","text":"<p>The changes in the Connection Manager for this feature are to do the folloiwng:-</p> <ul> <li>Figure out what colours to use for the Connection Label</li> <li>Pass the colour values to the connection_label binary. </li> <li>There are no changes required in terms of when / if to call this binary. </li> <li>The logic will need to take into consideration the following:<ul> <li>In Unmanaged mode, the Colour values will be stored int he SQL DB</li> <li>In Managed mode, the colours will be stored in the XML file on a per connection basis</li> <li>In managed mode, the SQL DB will contain the default colours (will never change)</li> <li>Currently the Connection Manager is NOT aware of whether the Reveiver is managed or not - The plan is to  keep it like this.</li> </ul> </li> </ul> <p>The required changes are as follows:</p> <ul> <li> <p>OSD / Rest-API (anywhere that reads the copnnection string from the XML file)</p> <ul> <li>When the connection details are being read from the XML file, we now read the 'labelColours' as well</li> <li>If no 'labelColours' exist in the XML file (as in the Unmanaged scenario), then we set the 'labelColours' string to 'No-specified-color'</li> <li>An extra parameter (labelColours) is added to any MQTT request that relates to Launching / switching a connection. The value of this attribure will be either:<ul> <li>A string containing the Background and test RGB values (assuming that the specified connection has Label Colours associated with it)</li> <li>A string containing: \"No-specified-colour' - This indicates the the Subscriber of the message (Connection Manager) that there is NO associated LabelColour for this connection. </li> </ul> </li> </ul> </li> <li> <p>Connection Manager changes:-</p> <ul> <li>Connection Manager reads the 'labelColours' string from the connection requests<ul> <li>If string contains 'No-Specified-colour', then it reads the Connection Label Colours (Value associated witht he specific RX) from the SQL DB</li> <li>Otherwise, it uses the RGB values specified in the 'labelColours' parameter associated with the connection</li> </ul> </li> <li>In both cases, it calls the 'connection_label' binary with the required RGB values.</li> </ul> </li> </ul> <p>This document contains Proprietary Trade Secrets of Black Box Corporation, and its receipt or possession does not convey any right to reproduce, disclose its contents, or to manufacture, use, or sell anything that it may describe. Reproduction, disclosure, or use without specific authorization from Black Box Corporation, is strictly forbidden. This document is uncontrolled in printed format.</p> <p>Rev 0.1 Black Box Corporation: Copyright \uf0d3 2019 1</p>"},{"location":"architecture/Connection_Management/connection_process_design/","title":"Connection Management - Detailed Design.","text":"<p>The following gives a detailed description of all the individual processes involved in Connection Management on the Emerald Receivers. All the processes involved are individual applications that run on the Emerald Receivers and communicate via Mosquitto messages. In general, the behaviour is the same on all types of receivers - any differences will be identified in the specific sections.</p>"},{"location":"architecture/Connection_Management/connection_process_design/#connection-manager-cm","title":"Connection Manager (CM)","text":""},{"location":"architecture/Connection_Management/connection_process_design/#cm-overview","title":"CM Overview","text":"<p>The Connection Manager (CM) is a state machine based standalone process that handles ALL Connection based requests. It communicates with the other applications that are part of the overall connection process over Mosquitto. The state machine has four states that change as connections are made/switched and terminated. As states are changed, the CM publishes a mosquito message with the current state \u2013 This allows any other application to be aware of the Connection state on the receiver. The CM states are as follows:</p> <ul> <li>Idle</li> <li>Connecting</li> <li>Connected</li> <li>Terminating</li> </ul>"},{"location":"architecture/Connection_Management/connection_process_design/#cm-structure","title":"CM structure","text":"<p>The CM is made up of the following basic parts:\u2013</p> <ul> <li>A mosquito callback function that is called when any of the messages of interest to the CM are Published</li> <li>A message_queue that the Callback function posts to whenever a mosquito message arrives</li> <li>A state Machine that gets driver through its states as mosquito messages get processed</li> </ul>"},{"location":"architecture/Connection_Management/connection_process_design/#cm-initialization","title":"CM Initialization","text":"<p>The CM initialization is as follows:</p> <ul> <li>A new Mosquitto Client is created for the CM</li> <li>The Mosquitto callback function is created for the CM</li> <li>The CM Mosquitto client is connected to the Mosquitto Broker</li> <li>A CM Mosquitto message processing thread is created</li> </ul> <p>The CM subscribes to the Mosquitto messages that it is interested in. A message queue is created (for communicating between the Callback and the CM Thread). The CM thread starts waiting for messages to arrive in its message queue.  </p>"},{"location":"architecture/Connection_Management/connection_process_design/#cm-state-machine-states-and-valid-messages","title":"CM State Machine states and valid messages","text":"<p>The CM state machine is designed to accept any Message in any state. That said, not all messages are valid in every state. If the CM receives a message that is not valid for a particular state, then it logs it to syslog and drops it. This is core to the CM design and ensures that we can function in a deterministic manner. The reason behind this approach is due to the fact that connections can be launched/switched/terminated via the REST API and also from the OSD (In theory, both of these can be active at the same time). The following lists the valid messages in each CM state. Any other message that arrives is flagged as Invalid in syslog and no further action is taken.</p> <ul> <li>State: IDLE<ul> <li>MAKE_OSD_CONNECTION_TOPIC</li> <li>FORCE_CONNECTION_TOPIC</li> <li>FORCE_LOGOUT_TOPIC</li> <li>GET_CURRENT_CM_STATE_TOPIC</li> </ul> </li> <li>State: CONNECTING<ul> <li>CONNECTION_LAUNCHED_TOPIC</li> <li>SEND_EXIT_CODE_TOPIC</li> <li>TERMINATE_CONNECTION_CC_TOPIC</li> <li>GET_CURRENT_CM_STATE_TOPIC</li> </ul> </li> <li>State: CONNECTED<ul> <li>FORCE_LOGOUT_TOPIC</li> <li>TERMINATE_CONNECTION_CC_TOPIC</li> <li>TERMINATE_CONNECTION_WEBSERVICE_TOPIC</li> <li>TERMINATE_WITH_NO_OSD_TOPIC</li> <li>PREVIOUS_CONNECTION_TOPIC</li> <li>FORCE_CONNECTION_TOPIC</li> <li>SEND_EXIT_CODE_TOPIC</li> <li>GET_CURRENT_CM_STATE_TOPIC</li> </ul> </li> <li>State: TERMINATING<ul> <li>TERMINATE_CONNECTION_CC_TOPIC</li> <li>SEND_EXIT_CODE_TOPIC</li> <li>GET_CURRENT_CM_STATE_TOPIC</li> </ul> </li> </ul>"},{"location":"architecture/Connection_Management/connection_process_design/#cm-state-machine-flowchart","title":"CM State Machine Flowchart","text":"<p>The following flow-chart details the Flow through the CM state machine for a basic Connection Launch / terminate sequence.</p> <p> </p> <p></p> <p></p>"},{"location":"architecture/Connection_Management/connection_process_design/#cm-states-detailed-description","title":"CM States \u2013 Detailed Description:","text":""},{"location":"architecture/Connection_Management/connection_process_design/#cm-state-idle","title":"CM state: IDLE","text":"<p>The following details how the CM processes incoming messages in the IDLE state. The required processing depends on the message topic the CM receives in the IDLE state. The basic flow is as per the flow chart above \u2013 The CM state machine is waiting for messages (Topics) to arrive in its message queue. Once a message arrives, it processes it based on the current State Machine state. In this case, the following is how messages are processed in the IDLE state</p> <ul> <li> <p>Incoming Message:- Launch a connection Topic (Make_Osd_Connection or Force_Connection)</p> <ul> <li>The Launch Connection Topic is published<ul> <li>The Connection Launcher Process subscribes to this message. When it receives it, it launched the connection client (see details in the Connection Launcher section of this document)</li> </ul> </li> <li>The State is updated to CONNECTING</li> <li>The CM State Changed Topic is published with the current state</li> <li>Go back to the start of the loop and check for new messages</li> </ul> </li> <li> <p>Incoming Message:- Force Logout Topic (Force_Logout)</p> <ul> <li>The CM Logout Request Topic is published<ul> <li>The Cloudgui Process subscribes to this message. When it receives it, it logs out the user (see details in the Cloudgui section of this document)</li> </ul> </li> <li>The State is NOT changed.</li> <li>Go back to the start of the loop and check for new messages</li> </ul> </li> <li> <p>Incoming Message:- Get CM State Topic (Get_Current_CM_State)</p> <ul> <li>The CM State Changed Topic is published with the current state<ul> <li>Anybody that is interested in the state of the CM will have subscribed to this message and will now receive the current CM state.</li> </ul> </li> <li>The State is NOT changed</li> <li>Go back to the start of the loop and check for new messages</li> </ul> </li> <li> <p>__Incoming Message:- Any other Topic __</p> <ul> <li>Write an Error to Syslog indicating that an Invalid message was received in the IDLE state.</li> </ul> </li> </ul>"},{"location":"architecture/Connection_Management/connection_process_design/#cm-state-connecting","title":"CM state: CONNECTING","text":"<p>The following details how the CM processes incoming messages in the CONNECTING state. The required processing depends on the message topic the CM receives in this state. The basic flow is as per the flow chart above \u2013 The CM state machine is waiting for messages (Topics) to arrive in its message queue. Once a message arrives, it is processed based on the current State Machine state.</p> <ul> <li> <p>Incoming Message:- Connection has successfully launched Topic (Connection Launched)</p> <ul> <li>The OSD_HIDE topic is published<ul> <li>The OSD Manager subscribes to this message \u2013 When it receives it, it no longer displays the OSD \u2013 See the OSD Manager section for more details</li> </ul> </li> <li>The State is changed to CONNECTED.</li> <li>The CM State Changed Topic is published with the current state</li> <li>Go back to the start of the loop and check for new messages</li> </ul> </li> <li> <p>Incoming Message:- Connection has failed to establish Topic (send exit code)</p> <ul> <li>The OSD_SHOW topic is published<ul> <li>The OSD Manager subscribes to this \u2013 When it receives it, it displays the OSD \u2013 See the OSD Manager Section for more details.</li> </ul> </li> <li>The State is changed to IDLE.</li> <li>The CM State Changed Topic is published with the current state</li> <li>Go back to the start of the loop and check for new messages</li> </ul> </li> <li> <p>Incoming Message:- Terminate Connection (Hotkey) Topic (terminate connection CC) (Note: This doesn\u2019t fit in this state \u2013 It has only being included to ensure that we can always Hotkey exit from a connection from all states)</p> <ul> <li>The OSD_SHOW topic is published<ul> <li>The OSD Manager subscribes to this \u2013 When it receives it, it displays the OSD \u2013 See the OSD Manager Section for more details.</li> </ul> </li> <li>The State is changed to IDLE.</li> <li>The CM State Changed Topic is published with the current state</li> <li>Go back to the start of the loop and check for new messages</li> </ul> </li> <li> <p>Incoming Message:- Get CM State Topic (Get Current CM state)</p> <ul> <li>Handled same as in IDLE state</li> </ul> </li> </ul>"},{"location":"architecture/Connection_Management/connection_process_design/#cm-state-connected","title":"CM state: CONNECTED","text":"<p>The following details how the CM processes incoming messages in the CONNECTED state. The required processing depends on the message topic the CM receives in this state. The basic flow is as per the flow chart above \u2013 The CM state machine is waiting for messages (Topics) to arrive in its message queue. Once a message arrives, it is processed based on the current State Machine state.</p> <ul> <li> <p>Incoming Message:- Force Logout / terminate Topic (Force_Logout, Terminate_CC, Terminate_webservice, Terminate_no_osd)</p> <ul> <li>The OSD_SHOW topic is published (In all cases bar \u2018terminate_no_osd\u2019)<ul> <li>The OSD Manager subscribes to this message \u2013 When it receives it, it no longer displays the OSD \u2013 See the OSD Manager section for more details</li> </ul> </li> <li>For KVM and RDP connections, The EXIT_CONNECTION topic is published.<ul> <li>The Client (bbfreerdp, xfreerdp, dfreerdp) subscribe to this message and exit cleanly when received.</li> </ul> </li> <li>For other clients, they are signalled to exit.</li> <li>The State is changed to TERMINATING</li> <li>The CM State Changed Topic is published with the current state.</li> <li>Go back to the start of the loop and check for new messages</li> </ul> </li> <li> <p>Incoming Message:- Switch to Previous / Force Connect Topics (Previous_connection , Force_Connection)</p> <ul> <li>Connection clients are told to exit ( see details in CONNECTED state)</li> <li>The state is set to TERMINATING</li> <li>Flags are set to indicate we are switching to previous or switching to a new connection. The connection details for the new connection are also set.<ul> <li>The rest of this process is handled in the \u2018TERMINATING\u2019 state when the Clients exit and the Connection Launcher published the \u2018send_exit_code\u2019 topic</li> </ul> </li> <li>Go back to the start of the loop and check for new messages</li> </ul> </li> <li> <p>Incoming Message:- Send exit code Topic (send_exit_code)</p> <ul> <li>There are 2 scenarios here that need to be considered:<ul> <li>Connection is NOT Persistent</li> </ul> </li> <li>The OSD_SHOW Topic is published</li> <li>The CM state is changed to IDLE</li> <li>The CM State Changed Topic is published with the current state<ul> <li>Connection IS Persistent</li> </ul> </li> <li>In this case, the Exit Code is checked to see if it is a Controlled Exit or if the connection has exited due to an error.</li> <li>Controlled Exit:- The behaviour is as per the \u2018non persistent\u2019 case and the OSD gets displayed</li> <li>Non-Controlled Exit:- In this case, we do not go back to the OSD.  Instead, we attempt to re-launch the connection (and continue to do so while it exits with a non-controlled exit code). This will continue until either:<ul> <li>The connection succeeds (typically doe to the cause of failure getting resolved)</li> <li>A Hotkey exit is triggered by the user.</li> </ul> </li> </ul> </li> <li> <p>Incoming Message:- Get CM State Topic (Get Current CM state)</p> <ul> <li>Handled same as in IDLE state</li> </ul> </li> </ul>"},{"location":"architecture/Connection_Management/connection_process_design/#cm-state-terminating","title":"CM state: TERMINATING","text":"<p>The following details how the CM processes incoming messages in the TERMINATING state. The required processing depends on the message topic the CM receives in this state. The basic flow is as per the flow chart above \u2013 The CM state machine is waiting for messages (Topics) to arrive in its message queue. Once a message arrives, it is processed based on the current State Machine state.</p> <ul> <li> <p>Incoming Message:- Client has exited Topic (send_exit_code)</p> <ul> <li>If previous_flag or force_flag are set (I.e. if we are in the middle of a switch)<ul> <li>The Launch Connection Topic is published (with the new connection)<ul> <li>The Connection Launcher Process subscribes to this message. When it receives it, it launched the connection client (see details in the Connection Launcher section of this document)</li> </ul> </li> <li>The State is updated to CONNECTING</li> </ul> </li> <li>Otherwise<ul> <li>The state is set to IDLE</li> </ul> </li> <li>The CM State Changed Topic is published with the current state  </li> </ul> </li> <li> <p>Incoming Message:-  Get CM State Topic (Get Current CM state)</p> <ul> <li>Handled same as in IDLE state</li> </ul> </li> </ul>"},{"location":"architecture/Connection_Management/connection_process_design/#osd-manager","title":"OSD Manager","text":""},{"location":"architecture/Connection_Management/connection_process_design/#osd-manager-overview","title":"OSD Manager Overview","text":"<p>The OSD Manager (OM) handles all aspects of displaying / hiding the OSD. The terminology we use moving forward is \u2018show\u2019 and \u2018hide\u2019. The OM also handles controlled restarts of the Cloudgui process and non-controlled restarts in the case of the Cloudgui process exiting unexpectedly. The OM is totally driven by Mosquitto messages.  The OM has the following basic functionality:</p> <ul> <li>Initialization</li> <li>Show</li> <li>Hide</li> <li>Relaunch</li> </ul>"},{"location":"architecture/Connection_Management/connection_process_design/#osd-manager-structure","title":"OSD Manager Structure","text":"<p>The OM is made up of the following basic parts:\u2013</p> <ul> <li>A mosquito callback function that is called when any of the messages of interest to the OM are Published</li> <li>A message queue that the Callback function posts to whenever a mosquito message arrives</li> <li>A thread sitting on the message queue and processing any incoming requests  </li> </ul>"},{"location":"architecture/Connection_Management/connection_process_design/#om-detailed-description","title":"OM Detailed Description","text":"<p>The following flowchart details how the OSD Manager works.</p> <p> </p> <p></p> <p></p>"},{"location":"architecture/Connection_Management/connection_process_design/#initialization","title":"Initialization","text":"<p>OM Initialization has two basic parts. The first one is to do the Mosquitto configuration. The second is to setup the display and display the OSD. The following details the steps involved</p> <ul> <li>A new Mosquitto Client is created for the OM</li> <li>The Mosquitto callback function is created for the OM</li> <li>The OM Mosquitto client is connected to the Mosquitto Broker</li> <li>An OM Mosquitto message processing thread is created</li> <li>The OM subscribes to the Mosquitto messages that it is interested in</li> <li>A message queue is created (for communicating between the Callback and the CM Thread)</li> <li>The CM thread starts waiting for messages to arrive in its message queue</li> <li>Setup the display</li> <li>Run the \u2018cloudgui\u2019 binary</li> <li>Overlay the OSD on the display.</li> </ul>"},{"location":"architecture/Connection_Management/connection_process_design/#show-osd","title":"Show OSD","text":"<p>The \u2018show\u2019 functionality is what is used to configure and display the OSD. This is done under the direction of the Connection Manager. The connection manager requires the OM to \u2018show\u2019 the OSD when a connection has exited (or more precisely when a connection is exiting).  The basic sequence is as follows:</p> <ul> <li>OM callback is called with Show message (published by the CM).</li> <li>Callback adds a message to the OM Message Queue</li> <li>OM thread detects the message and does the following:<ul> <li>Setup the display</li> <li>Overlay the OSD on the display</li> </ul> </li> </ul>"},{"location":"architecture/Connection_Management/connection_process_design/#setup-the-display","title":"Setup the Display","text":""},{"location":"architecture/Connection_Management/connection_process_design/#overlay-the-osd","title":"Overlay the OSD","text":""},{"location":"architecture/Connection_Management/connection_process_design/#hide-osd","title":"Hide OSD","text":"<p>The \u2018hide\u2019 functionality is what is used to remove the OSD from the display. This is done under the direction of the Connection Manager. The connection manager requires the OM to \u2018hide\u2019 the OSD when a connection has successfully established. The basic sequence is as follows:</p> <ul> <li>OM callback is called with Hide message (published by the CM).</li> <li>Callback adds a message to the OM Message Queue</li> <li>OM thread detects the message and does the following:<ul> <li>Turns off the OSD Overlay mechanism</li> </ul> </li> </ul>"},{"location":"architecture/Connection_Management/connection_process_design/#relaunch-osd","title":"Relaunch OSD","text":"<p>Relaunching the Osd process (Cloudgui) is required in the following two cases:</p> <ul> <li>Where the OSD exits due to user changes that require it restart with the new settings<ul> <li>This occurs when either the OSD Resolution of the Keyboard Language is changed. In both these cases, the Cloudgui publishes a Mosquitto Message indicating what has changed and then exits cleanly. The OM subscribes to these messages \u2013 When it receives either of them, it goes through the process of re-launching it.</li> </ul> </li> <li>Where the OSD exits unexpectedly (i.e. Crashes / segments ...)<ul> <li>In this case, the OM is subscribing to a ONE_SECOND Mosquitto topic (published by ConnectionControl). Every time it gets this message, it checks to see if the \u2018cloudgui\u2019 process is still running. If it is not, it increments a count \u2013 If the count hits ten, then it concludes that the cloudgui has exited un-expectedly and goes through the process of relaunching it.</li> </ul> </li> </ul> <p>Relaunching the OSD is achieved in the following three basic steps:</p> <ul> <li>Setup the display</li> <li>Run the \u2018cloudgui\u2019 binary</li> <li>Overlay the OSD on the display.</li> </ul>"},{"location":"architecture/Connection_Management/connection_process_design/#connection-launcher","title":"Connection Launcher","text":""},{"location":"architecture/Connection_Management/connection_process_design/#connection-launcher-overview","title":"Connection Launcher Overview","text":"<p>The Connection Launcher (CL) is an application whose only function is to launch the connection application (bbfreerdp, dfreerdp ...) and publish an Exit Code when the application exits. A dedicated application is required because we need to run the connection application in the foreground in order to know when it has exited \u2013 this means that the CL application will not be able to do anything else while a connection is running.</p> <p>The CL has two basic inputs. The first is a Mosquitto message to \u2018Launch\u2019 a connection. The second is when the connection application exits with an exit code.</p>"},{"location":"architecture/Connection_Management/connection_process_design/#connection-launcher-structure","title":"Connection Launcher structure","text":"<p>The CL is made up of the following basic parts:\u2013</p> <ul> <li>A mosquito callback function that is called when any of the messages of interest to the CL are Published</li> <li>A message queue that the Callback function posts to whenever a mosquito message arrives</li> <li>A thread sitting on the message queue and processing any incoming requests</li> </ul>"},{"location":"architecture/Connection_Management/connection_process_design/#cl-detailed-description","title":"CL Detailed Description","text":"<p>The following flowchart details how the Connection Launcher works.</p> <p> </p> <p></p> <p></p>"},{"location":"architecture/Connection_Management/connection_process_design/#initialization_1","title":"Initialization","text":"<p>CL Initialization is based on setting up the Mosquitto configuration. The following details the steps involved (Note: In this case, we could have used a simpler scheme as the CM only subscribes to one message \u2013 We have stuck with this however to keep a consistent approach in all applications)</p> <ul> <li>A new Mosquitto Client is created for the CL</li> <li>The Mosquitto callback function is created for the CL</li> <li>The CL Mosquitto client is connected to the Mosquitto Broker</li> <li>An CL Mosquitto message processing thread is created</li> <li>The CL subscribes to the Mosquitto messages that it is interested in</li> <li>A message queue is created (for communicating between the Callback and the CL Thread)</li> <li>The CL thread starts waiting for messages to arrive in its message queue</li> </ul>"},{"location":"architecture/Connection_Management/connection_process_design/#operation","title":"Operation","text":"<p>The basic operation is as follows:</p> <ul> <li>The CL message processing thread is sitting on the message queue, waiting for messages to arrive.</li> <li>The CM published the \u2018launch_connection_topic\u2019 (The CL has subscribed to this)</li> <li>The CL callback fires and posts a message to the message queue with details of the connection to be launched</li> <li>The CL then launches the connection application (bbfreerdp, dfreerdp ...) with the parameters supplied</li> <li>&lt; At this point, the CL is effectively locked up while the connection is running &gt;</li> <li>The connection will exit at some point with an Exit Code</li> <li>The CL then publishes the exit_code via the \u2018send_exit_code\u2019 topic.</li> <li>The CL then goes back to waiting for a new message to arrive in its message queue</li> </ul>"},{"location":"architecture/Connection_Management/connection_process_design/#connection-control","title":"Connection control","text":""},{"location":"architecture/Connection_Management/connection_process_design/#connection-control-overview","title":"Connection Control Overview","text":"<p>Connection control is the standalone application that handles the User Hotkeys. The current list of Hot keys are as follows:</p> <ul> <li>Hotkey o (Exit Connection)</li> <li>Hotkey p (Previous Connection)</li> <li>Hotkey 0 to 9 (Launch connection associated with particular favourite key)</li> <li>Hotkey l (Toggle ConnectionLabel)</li> </ul> <p>It also is used to publish a ONE_SECOND topic, as it has a thread running at a 1sec (roughly) interval. This message can be subscribed to by any application that needs to do something on a timed basis.</p>"},{"location":"architecture/Connection_Management/connection_process_design/#connection-control-structure","title":"Connection Control Structure","text":"<p>The basic structure of the connection Control Application is that is has a main thread that is waiting for events to arrive from Libinput. These events are parsed to see if any of they are the particular Hotkey sequences that we are interested in. If they are of interest, then either the CC application handles them itself or more typically tells another application to handle them. Telling another application to process a Hotkey is done via Mosquitto Topics.</p>"},{"location":"architecture/Connection_Management/connection_process_design/#connection-control-mosquitto-setup","title":"Connection Control Mosquitto setup","text":"<p>The Mosquitto setup for the Connection control application is different to the others described above. This application currently does not subscribe to any Mosquitto Topics. The result of this is that we do not need a Mosquitto callback or a thread to sit waiting for incoming Mosquitto messages. A Mosquitto Client is however required, as this application needs to publish Mosquitto topics because of different Hotkeys being detected.</p>"},{"location":"architecture/Connection_Management/connection_process_design/#connection-control-detailed-description","title":"Connection Control detailed description.","text":"<p>The following details how each of the Hotkeys are handled by the Connection Control application.</p>"},{"location":"architecture/Connection_Management/connection_process_design/#connection-exit-hotkey-o","title":"Connection Exit Hotkey (o)","text":"<p>Once this hotkey is detected by the CC application, it is handled by publishing a Mosquitto message. The topic name is: TERMINATE_CONNECTION_CC_TOPIC. The Connection Manager subscribes to this message. See details of how it is handled in the Connection Manager section of this document.</p>"},{"location":"architecture/Connection_Management/connection_process_design/#previous-connection-hotkey-p","title":"Previous Connection Hotkey (p)","text":"<p>Once this hotkey is detected by the CC application, it is handled by publishing a Mosquitto message. The topic name is: PREVIOUS_CONNECTION_TOPIC. The Connection Manager subscribes to this message. See details of how it is handled in the Connection Manager section of this document.</p>"},{"location":"architecture/Connection_Management/connection_process_design/#favourite-hotkey-0-9","title":"Favourite Hotkey (0-9)","text":"<p>Once this hotkey is detected by the CC application, it is handled by publishing a Mosquitto message. The topic name is: FORCE_CONNECT_TOPIC. The Connection Manager subscribes to this message. See details of how it is handled in the Connection Manager section of this document.</p>"},{"location":"architecture/Connection_Management/connection_process_design/#connection-label-toggle-hotkey-l","title":"Connection Label Toggle Hotkey (l)","text":"<p>Once this hotkey is detected by the CC application, it is handled in the CC application. It checks if the ConnectionLabel is on or off (checks the Overlay mechanism to see if it is on/off and also checks to see what application if the overlay mechanism setup to display). If the Label is off, it turns it on and if it is off it turns it on \u2013 This is only done if the Overlay mechanism is configured for the ConnectionLabel.</p>"},{"location":"architecture/Connection_Management/connection_process_design/#cloudgui","title":"Cloudgui","text":""},{"location":"architecture/Connection_Management/connection_process_design/#aspects-taken-into-consideration-within-cloudgui-design","title":"Aspects taken into consideration within Cloudgui design:","text":"<ul> <li>Connection launching process;</li> <li>In connecting state we want to block user from accessing the USB functionality and this remains until the connection is terminated. This prevents someone inadvertently sending events to the OSD when it is in the background. User access to USB related functionality needs to be blocked when connection initialization started, but not completed for managed, unmanaged devices and based on user privilege.</li> <li>When the connection is running the user should not be able to send USB events to the OSD. All keyboard and mouse events to be blocked when connection is running.</li> <li>In terminating state we want to block user from accessing the USB functionality and this remains until the connection is terminated. This prevents someone inadvertently sending events to the OSD when it is in the background. User access to USB related functionality needs to be blocked when connection termination started, but not completed for managed, unmanaged devices and based on user privilege.</li> <li>Allow user access to OSD when connection completed and OSD is visible for managed, unmanaged devices and based on user privilege.</li> <li>Auto login with auto connect option.</li> <li>OSD inactivity timer. If we disable the keyboard and mouse then there is a danger we will invoke these timeouts so this must be disabled when connection is running and cloudgui stay in the background.</li> <li>Last connection name selection in the list when user returns from connection. Not an issue if the OSD stays active, but if there is a crash then we will need to recover and save this file  (see below: Decision required).</li> <li>MQTT msg processing when OSD is running long lasting processes (concurrent processing) which we don\u2019t want to interrupt (such as upgrade, diagnostics, etc). If current user is running a process like diagnostics (which takes time)  we don\u2019t want to interrupt this process because of any of the forced events like login, logout or connect.</li> </ul>"},{"location":"architecture/Connection_Management/connection_process_design/#cloudgui-and-external-interfaces-communication","title":"Cloudgui and external interfaces communication","text":"<p>According to requirements of this feature Cloudgui need to provide mechanism to receive and publish MQTT messages from different external interfaces.  Following diagram is describing cloudgui incoming and outgoing MQTT messages.</p> <p>Figure below Communication between cloudgui and external interfaces</p> <p></p>"},{"location":"architecture/Connection_Management/connection_process_design/#cloudgui-design-changes","title":"Cloudgui design changes","text":"<p>In order to provide communication mechanism to receive and publish MQTT messages new MQTT_Communicator class implemented within cloudgui application.</p> <p>In order to provide constantly running non-blocking process for listening of incoming MQTT messages MQTT_Communicator class is subthreaded from other cloudgui classes and run constantly while cloudgui is executed. Following diagram is showing communication required between cloudgui classes (external MQTT messages simplified).</p> <p>Figure Communication between cloudgui classes </p>"},{"location":"architecture/Connection_Management/connection_process_design/#mqtt_communicator-class","title":"MQTT_Communicator Class","text":"<p>MQTT_Communicator class is responsible for receiving and interpreting incoming MQTT messages and performing relevant functional calls which  implemented within existing cloudgui classes. This class also will provide centralized platform to format and publish MQTT messages.  To handle incoming messages a thread will run asynchronously and outgoing messages sent synchronously blocking so that any transmit failure is immediate. The following diagram describe MQTT_Communicator class</p> <p>Figure MQTT_Communicator class </p> <p>The diagram below is showing the MQTT Communicator class simplified listener loop.</p> <p>Figure Listener loop </p>"},{"location":"architecture/Connection_Management/connection_process_design/#calls-to-mainwindow-class","title":"Calls to mainwindow class:","text":"<p>Set_normal_operation; Prepare_to_hide; Set_hidden; Prepare_to show; Logout; Login(text); Show_error(text); SetLastConnectionName(text); runConnection(text);</p> <p>The calls mentioned above defined in cloudgui mainwindow class (functionality described in relevant section).</p>"},{"location":"architecture/Connection_Management/connection_process_design/#functionality-in-mqtt_communicator-class","title":"Functionality in MQTT_Communicator class:","text":"<p>Resolution_change_rq(param) - Function to receive resolution change arguments and create MQTT formatted msg; Language_change_rq- Function to receive language change and create MQTT formatted msg; Publish_msg(param) \u2013 Function to provide centralized access for putting messages into the msg q.</p>"},{"location":"architecture/Connection_Management/connection_process_design/#cloudgui-mainwindow-class-changes","title":"Cloudgui mainwindow class changes","text":"<p>To provide constantly running non-blocking process for listening of incoming MQTT messages MQTT_Communicator class subthreaded from other cloudgui classes and run constantly while cloudgui is executed. Therefore MQTT_Communicator class need to be initialized and threaded within mainwindow class initialization. Prototype is required.  Figure below is showing MQTT_Communicator class simplified threading. MQTT_Communicator class simplified threading. </p>"},{"location":"architecture/Connection_Management/connection_process_design/#functionality-added-in-mainwindow-class","title":"Functionality added in mainwindow class:","text":"<ul> <li>Set_Idle<ul> <li>Enable Keyboard and Mouse events. Event filtering is already existing in cloudgui. No major work required. To enable Keyboard and Mouse events relevant function (KandM_acceptRqSlot()) should be called</li> <li>If  OSD inactivity timer is enabled Restart OSD inactivity timer. Functionality already exist in cloudgui. No major work required. To start OSD inactivity timer relevant function (startActivityChecks()) should be called.</li> <li>Based on user and managed status enable all relevant buttons. Following buttons should be enabled (might not be required as progress message box will block access to OSD).</li> </ul> </li> </ul> <p>Table 1</p> Unmanaged Managed Privilege/Functionality Administrator Power user User Administrator Power user User Upgrade Yes No No No No No TX device Yes No No No No No Diagnostics Yes No No Yes No No Settings Export Yes No No No No No Settings Import Yes No No No No No <ul> <li>Set_Connecting<ul> <li>Disable buttons which include USB memory related functionality. Following buttons should be disabled (might not be required as progress message box will block access to OSD).</li> </ul> </li> </ul> <p>Table 2</p> Unmanaged Managed Privilege/Functionality Administrator Power user User Administrator Power user User Upgrade Yes No No No No No TX device Yes No No No No No Diagnostics Yes No No Yes No No Settings Export Yes No No No No No Settings Import Yes No No No No No <ul> <li> <p>Set_Connected</p> <ul> <li>Disable Keyboard and Mouse events. Event filtering already exist in cloudgui. No major work required. To disable K&amp;M events relevant function (KandM_ignoreRqSlot()) should be called. NOTE: Function stopActivityChecks() is currently used within KandM_ignoreRqSlot().  o   If  OSD inactivity timer is enabled Stop OSD inactivity timer. Functionality already exist in cloudgui. No major work required. To stop OSD inactivity timer relevant function (stopActivityChecks()) should be called. NOTE: Function stopActivityChecks() is currently used within KandM_ignoreRqSlot()</li> <li>If progress msg is displayed stop and close progress msg. Appropriate functionality to be created.</li> </ul> </li> <li> <p>Set_Disconnecting</p> <ul> <li>Set selected last connection name in ListWidget. Functionality already exist in cloudgui. Functionality will be required only in the unlikely event of OSD failure when connection is in progress (CM states are Connecting, Connected or Terminating). This question is marked for discussion earlier in this document.</li> <li>If progress msg is displayed stop and close progress msg. Appropriate functionality to be created.</li> </ul> </li> <li> <p>Show_error</p> <ul> <li>Display error text received to user. Functionality already exist in cloudgui. Relevant call adjustment is required.</li> </ul> </li> <li> <p>Logout</p> <ul> <li>Logout current user and display Login dialog. Functionality already exist in cloudgui. Relevant call adjustment is required. Relevant only for managed device.</li> </ul> </li> <li> <p>Login(text)</p> <ul> <li>Logout current user and login user specified. Similar functionality already exist in cloudgui (autologin and return after connection \u2013 Login dialog bypass and user login, but it is completed on cloudgui load). Relevant call creation, adjustment and modifications required. Relevant only for managed device.</li> </ul> </li> </ul>"},{"location":"architecture/Connection_Management/connection_process_design/#calls-to-mqtt_communicator-class","title":"Calls to MQTT_Communicator class:","text":"<ul> <li> <p>Res_change_Rq</p> <ul> <li>Prepare and pass required parameters to MQTT Communicator class. </li> </ul> </li> <li> <p>Language_change_Rq</p> <ul> <li>Prepare and pass required parameters to MQTT Communicator class. </li> </ul> </li> <li> <p>Connect_rq(param)     -Prepare and pass required parameters to MQTT_Communicator class in order to perform connection. Because we have different connection via\u2019s available we might want to create centralized place for them.</p> </li> </ul>"},{"location":"architecture/Connection_Management/connection_process_design/#webservice-http_enable","title":"Webservice / Http_Enable","text":""},{"location":"architecture/Connection_Management/connection_process_design/#note-on-http-enable-application","title":"Note on Http Enable Application:","text":"<p>The Webservice / Http Enable applications are very similar. The \u2018http_enable\u2019 application only runs when http is enabled on Boxilla and it only supports a subset of the Rest APIs over Http (Webservice uses https). It is used to allow Control Bridge to make / break connections. The APIs it supports are Force Connect, Make Connection and Terminate Connection. The structure of the code / how it functions is the same as the Webservice application.</p>"},{"location":"architecture/Connection_Management/connection_process_design/#webservice-overview","title":"Webservice Overview","text":"<p>Webservice is the application that is used to handle the rest API. The rest API is the interface to the Emerald appliances that we provide to the outside world \u2013 It is typically used by Boxilla, but can be used by other applications that have been given access. The Webservice application only runs on units that are managed. In the context of this document, we are only interested in the section of the rest API that relates to connections. The following is the list of Connection APIs:-</p> <ul> <li>Force Connect</li> <li>Make Connection</li> <li>Terminate Connection</li> <li>Terminate Connection with No OSD</li> <li>Force Login</li> <li>Force Logout.</li> </ul>"},{"location":"architecture/Connection_Management/connection_process_design/#webservice-mosquitto-setup","title":"Webservice Mosquitto Setup","text":"<p>The Webservice application uses Mosquitto to publish connection related topics for other applications (typically the Connection Manager) to process. Based on this, it needs to create a Mosquitto client and connect to the Mosquitto broker. It does not subscribe to any Mosquitto topics and as such does not need a callback / thread to process incoming Mosquitto messages.</p>"},{"location":"architecture/Connection_Management/connection_process_design/#webservice-detail-description","title":"Webservice Detail Description","text":"<p>This description only relates to how the Connection based APIs are handled.</p>"},{"location":"architecture/Connection_Management/connection_process_design/#force-connection-rest-api","title":"Force Connection REST API","text":"<p>This is the API used by the Boxilla manager to launch a connection. If there is an existing connection on the receiver unit, this is terminated and then the new connection is launched. This request is implemented as follows:</p> <ul> <li>The details of the connection are validated. The Force Connect Rest API specifies a User and a connection name. The XML file is checked to see if the user and connection name exist and also to ensure that the specified user has access to the specified connection.</li> <li>The connection parameters are read from the XML file are formatted into json format</li> <li>A Mosquitto topic is then published \u2013 the topic is FORCE_CONNECT and the details of the connection is the data associated with this message</li> <li>The Connection Manager (It subscribes to this topic) processes the request from here. See details in the CM section of this document.</li> </ul>"},{"location":"architecture/Connection_Management/connection_process_design/#make-connection-rest-api-triggered","title":"Make Connection Rest API triggered","text":"<p>This is similar to Force Connection, but in this case, the rest API parameters are the TX IP only. A hardcoded KVM connection to this TX IP is then created. As in the Force Connect case, any existing connection is terminated before launching this connection.</p> <ul> <li>The connection details are built up from default values into a json format data block.</li> <li>A Mosquitto topic is then published \u2013 the topic is FORCE_CONNECT and the details of the connection is the data associated with this message</li> <li>The Connection Manager (It subscribes to this topic) processes the request from here. See details in the CM section of this document.</li> </ul>"},{"location":"architecture/Connection_Management/connection_process_design/#terminate-connection-rest-api-triggered","title":"Terminate Connection Rest API triggered","text":"<p>This is the main api used by Boxilla to terminate a connection. There is no data associated with this API \u2013 ultimately it means terminate whatever connection is running. This is handled in Webservice as follows: - The Webservice application published a Mosquitto topic called:- TERMINATE_CONNECTION_WEBSERVICE - The Connection Manager (It subscribes to this topic) processes the request from here.</p>"},{"location":"architecture/Connection_Management/connection_process_design/#terminate-connection-no-osd-rest-api-triggered","title":"Terminate Connection No OSD Rest API triggered","text":"<p>This is the Rest API used by Boxilla when it needs to Terminate a connection but does not want the OSD to appear \u2013 This is typically used in Boxilla Presets. The reason it does not want the OSD to appear is because it knows it is planning to launch a different connection on this receiver once the current one is terminated. This is handled in Webservice as follows:</p> <ul> <li>The Webservice application published a Mosquitto topic called:- TERMINATE_WITH_NO_OSD</li> <li>The Connection Manager (It subscribes to this topic) processes the request from here.</li> </ul>"},{"location":"architecture/Connection_Management/connection_process_design/#force-login-over-rest","title":"Force Login over Rest","text":"<p>This is the Rest API user by Boxilla to Login a user into the OSD. It is processed as follows:</p> <ul> <li>The Webservice application publishes a topic called:- FORCE_LOGIN<ul> <li>The data associated with the Mosquitto contains the username to login</li> </ul> </li> <li>The Cloudgui (It subscribes to this topic) processes the request from here.</li> </ul>"},{"location":"architecture/Connection_Management/connection_process_design/#force-logout-over-rest","title":"Force Logout over Rest","text":"<p>This is the Rest API user by Boxilla to Logout a user from the OSD. It is processed as follows: - The Webservice application publishes a topic called:- FORCE_LOGOUT - The Connection Manager (It subscribes to this topic) processes the request from here.</p>"},{"location":"architecture/Connection_Management/connection_process_specifics/","title":"Connection Management - More Details on specific aspects","text":""},{"location":"architecture/Connection_Management/connection_process_specifics/#bonded-connections","title":"Bonded Connections.","text":"<p>Bonded connections are very different to standard connections. As such, they warrant special attention in this document.</p>"},{"location":"architecture/Connection_Management/connection_process_specifics/#bonded-connection-overview","title":"Bonded Connection Overview:","text":"<p>A bonded connection is a group of connections that get launched simultaneously on a group of Receivers. Creating a bonded connection can only be done in a Manager environment. The basic concept is to create a \u2018bonded group\u2019 which is made up of a number of Emerald Receivers. A bonded connection is then created by assigning a specific connection to each of the receivers in the bonded group.</p>"},{"location":"architecture/Connection_Management/connection_process_specifics/#bonded-connection-design","title":"Bonded Connection Design","text":"<p>A bonded connection can be launched by selecting the bonded connection on any of the receivers in the Bonded group and hitting the \u2018Connect\u2019 button. This will result in all the individual connections being established (subject to the required checking on Boxilla). The basic scheme for launching a bonded connection works as follows:</p> <ul> <li>A Bonded connection is selected on a receiver and the Connect button is hit.</li> <li>A Call is then made from the Cloudgui to the RestAPI to launch the bonded connection<ul> <li>This is done by the RestAPI sending a message to Boxilla to request that the Bonded Connection be Launched</li> </ul> </li> <li>Boxilla then checks to see if it is possible to make the connections.<ul> <li>If it is not possible (one transmitter not free would be one reason), then an Error is returned to the RestAPI. The RestAPI in turn published the SET_DISCONNECT_ERROR Topic which is subscribed to by the Cloudgui. The Cloudgui will tell the user that the connection failed and the reason why.</li> <li>If the Boxilla checks pass, the connections are launched by Boxilla using the Force Connect Rest API on all the receivers. This is detailed in the \u2018Webservice\u2019 section of this document.</li> </ul> </li> </ul> <p>The basic scheme for terminating a bonded connection works as follows:</p> <ul> <li>A user on one of the receivers that is part of the bonded connection hits the Exit Hotkey</li> <li>The connection is terminated as normal (See how Hotkey Exit is handled in Connection Control part of this document)</li> <li>A Notification is then send to Boxilla (via restapi) that this connection has exited.</li> <li>Boxilla realises that this is part of a bonded connection and sends Terminate Requests (Rest API) to all the other receivers in the bonded group \u2013 This results in the full bonded connection being terminated.</li> </ul>"},{"location":"architecture/Connection_Management/connection_process_specifics/#changes-required-to-buffers-surfaces-etc-to-allow-the-osd-to-run-constantly","title":"Changes Required to Buffers/ Surfaces etc. to allow the OSD to run constantly.","text":"<p>The previous implementation on both 2K and 4K sees the OSD sharing the same buffer/surface assome of the connection clients. This was implemented in this way because the OSD would never be running at the same time as the clients In this project, the core requirement is that we can run both the OSD and the clients at the same time (to facilitate quicker switching). To be able to facilitate this requirement, we need to ensure that the OSD and the different clients never use the same block of DDR. The new buffers/surfaces will be allocated in the Devicetrees and configured via the DisplayLayer.</p> 2K 6.3.3 Release 2K 6.6.0 Release Address Range Content Address Range Content 0x0 -&gt; 0xA00000 OSD / VM Head 0 0x0 -&gt; 0xA00000 VM Head 0 0xA00000 -&gt; 0x1400000 VM Head 1 0xA00000 -&gt; 0x1400000 VM Head 1 0x1400000 -&gt; 0x1401000 Note 1 0x1400000 -&gt; 0x1E00000 OSD 0x1401000 -&gt; 0x1413C00 ConnectionLabel 0x1E00000 -&gt;0x1E12C00 ConnectionLabel 0x1E12C00 -&gt; Space for more Labels etc as required <p>Note 1: It was discovered in the connectionLabel project that something was using this address range (and overwriting the connectionLabel). The belief (from FPGA team) that this was legacy code and could be removed \u2013 due to the risk and tight timeline for the connectionLabel project, the easiest / less risky approach was to push the OSD label away from this address. From recollection, I did not actually need to jump by 0x1000 \u2013 some of this jump was due to alignment issues I hit. This issue was resolved in V6.6.0 and hence we have reverted to using 0x14000</p> 4K 6.3.3 Release 4K 6.6.0 release - Address Range Content Address Range Content 0x66543000-0x68702FFF OSD Buffer / VM 0x66543000-0x68702FFF VM buffer Only 0x7A050000 ConnectionLabel 0x7A8C0000-0x7FFFFFFF Free 0x7A8C0000-0x7B189FFF ConnectionLabel 0x7B18A000-0x7BA53FFF Dedicated OSD Buffer 0x7BA54000-0x7FFFFFFF Free"},{"location":"architecture/Connection_Management/connection_process_specifics/#overlay-mechanisms","title":"Overlay Mechanisms","text":"<p>In all, there are three different Overlay mechanisms for different types of Emerald Receivers. The 4K overlay mechanism allows scaling (max scale factor 3) \u2013 This is useful to ensure that an 800x600 OSD can be used on a 4K display resolution. The 2K overlay mechanism is available on all 2K receivers bar the SE Dual Head devise \u2013 This is due to the Overlay logic not having enough space in those devices Fpga. A Primary mode Overlay mechanism is available for SE Dual Head boards. The basics of the three schemes are the same \u2013 Point the Overlay to the image being displayed, configure the Overlay and finally turn on the overlay.</p>"},{"location":"architecture/Connection_Management/connection_process_specifics/#4k-overlay","title":"4K Overlay","text":""},{"location":"architecture/Connection_Management/connection_process_specifics/#overview","title":"Overview","text":"<p>A block of Fpga DDR has been allocated to hold the OSD \u2013 A FrameBuffer has been allocated in the 4K RX Devicetree pointing to this DDR Block. The reason for this separate OSD buffer is to ensure that the OSD can run at the same time as any of the clients.  The HW Overlay is the mechanism to be used for displaying the OSD on a 4K RX. The principle will be the same as for the connectionLabel. When a connection is running, the H/W Overlay will (if it is enabled) be displaying the connectionLabel \u2013 when the connection exits, the H/W Overlay will switch to displaying the OSD. Moving forward, the Overlay mechanism will have more uses.</p>"},{"location":"architecture/Connection_Management/connection_process_specifics/#overlay-registers","title":"Overlay Registers","text":"<ul> <li>HW_OSD_SCALE_FACTOR_REG_OFFSET \u2013 1300<ul> <li>The bottom 2 bits of this register are used to scale the overlay (The rest are unused).  This allows us to scale the overlay so that it is visible at high resolutions.</li> </ul> </li> <li>HW_OSD_ENABLE_REG_OFFSET \u2013 1304<ul> <li>The bottom bit is the enable/disable bit (The rest are unused). To Enable the overlay, the bottom bit is set to 1</li> </ul> </li> <li>HW_OSD_FLUSH_REG_OFFSET \u2013 1308<ul> <li>This is a placeholder register (I.e. functionality not currently supported), so the contents are set to 0</li> </ul> </li> <li>HW_OSD_READ_BURST_SIZE_REG_OFFSET \u2013 1314<ul> <li>As per the AFS, this should be left at the default value of 0x10</li> </ul> </li> <li>HW_OSD_READ_BURST_PER_FRAME_REG_OFFSET \u2013 1318<ul> <li>This value can be calculated using the following formula: - (width * height *4) /256.  In our case (label fixed at 480x40), this equates to: 0x12C</li> </ul> </li> <li>HW_OSD_BASE_ADDRESS_REG_OFFSET - 131C</li> <li>HW_OSD_TEST_MODE_REG_OFFSET \u2013 1320<ul> <li>This is for hardware test, so we set it to 0</li> </ul> </li> <li>HW_OSD_X_OFFSET_REG_OFFSET \u2013 1324</li> <li>HW_OSD_Y_OFFSET_REG_OFFSET \u2013 1328<ul> <li>The X and Y offset registers are the starting coordinates where the label is displayed.  This is calculated using the following inputs:<ul> <li>The selected position of the label (top/bottom centre/right)</li> <li>The resolution of the display</li> <li>The size of the label (480x40 in this case)</li> </ul> </li> </ul> </li> <li>HW_OSD_WIDTH_REG_OFFSET - 132C</li> <li>HW_OSD_HEIGHT_REG_OFFSET \u2013 1330</li> <li>HW_OSD_BACKGROUND_FILL_REG_OFFSET \u2013 1334<ul> <li>This allows us to fill the rest of the screen (outside the label overlay) with black. We want to leave the background as it is, so we set this value to 0x0</li> </ul> </li> </ul>"},{"location":"architecture/Connection_Management/connection_process_specifics/#overlay-algorithm","title":"Overlay Algorithm:","text":"<p>The OSD is written to the FrameBuffer at a fixed size of 800x600. The Overlay algorithm is based on what resolution the display is set to. The configuration for the OSD Resolution determines the display resolution (Can be set to a fixed value or left at the resolution of the connection if set to \u2018auto\u2019 mode).  The overlay image can be positioned anywhere and can be scaled as required. The ability to blacken the rest of the display also exists and will be used to ensure that the areas of the display outside the OSD are black. The ability to scale the overlay will help to provide a OSD than is easy to read at all Display Resolutions The following is the algorithm (basically a sequence of register writes)</p> <ul> <li>Configure the 4K Overlay to display the OSD<ul> <li>Setup Scaling (Reg 1300): This will only be used when the OSD resolution is set to \u2018Auto\u2019 In this case, the requirement is that the OSD needs to Display at the same resolution as the connection. If the 4K RX-TX connections resolution is greater than 1920, then the scaling factor will be set as follows:<ul> <li>For widths of 1920 or less, we set the value to 0x00 for No scaling.</li> <li>For widths between 1920 and 3840, we set the value to 1, which scales the overlay by a factor of 2 (i.e. doubles the size)</li> <li>For widths over 3840, we set the value to 2, which scales the overlay by a factor of 3 (i.e. triples the size)</li> </ul> </li> <li>Overlay Base Address (Reg: 131C)<ul> <li>This register is configured with the address of the OSD \u2013 In our case, this is the address of the framebuffer that contains the OSD \u2013 The value is: 0x7B18A000</li> </ul> </li> <li>Overlay Positioning (Regs: 1324, 1328)<ul> <li>These registers will be setup based on the display resolution. The aim will be to display the OSD at the centre of the screen.</li> </ul> </li> <li>Overlay Width/Height (Regs: 132C, 1334<ul> <li>These registers will be programmed with the width and height of the OSD (800x600)</li> </ul> </li> </ul> </li> <li>Turn on the Overlay.<ul> <li>Overlay Enable (Reg: 1304) \u2013 Set the bottom bit to 1.</li> </ul> </li> <li>Turn off the Overlay<ul> <li>Overlay Enable (Reg: 1304) \u2013 Set the bottom bit to 0</li> </ul> </li> </ul>"},{"location":"architecture/Connection_Management/connection_process_specifics/#2k-overlay-bar-se-dual-head","title":"2K Overlay (Bar SE Dual-Head)","text":""},{"location":"architecture/Connection_Management/connection_process_specifics/#overview_1","title":"Overview","text":"<p>A block of Fpga DDR has been allocated to hold the OSD \u2013 A Framebuffer has been allocated in the 2K RX Device tree pointing to this DDR Block. The reason for this separate OSD buffer is to ensure that the OSD can run at the same time as any of the clients.  The Overlay principle will be the same as for the connectionLabel. When a connection is running, the Overlay will (if it is enabled) display the connectionLabel \u2013 when the connection exits, the Overlay will switch to displaying the OSD. Moving forward, the Overlay mechanism will have more uses.</p>"},{"location":"architecture/Connection_Management/connection_process_specifics/#overlay-registers_1","title":"Overlay Registers","text":"<ul> <li>H0_OVERLAY_BASE_ADDR_REG_OFFSET (0x8384)     -This is used to contain the base address of the image being overlaid.</li> <li>HO_OVERLAY_CONTROL_REG_OFFSET (0x8380)<ul> <li>Enable Bit is Bit 7 (1 = Enabled)</li> <li>Update/Apply bit is Bit 6 (1 to apply the value)</li> </ul> </li> <li>H0_OVERLAY_HORIZONTAL_OFFSET_REG (0x8388)</li> <li>HO_OVERLAY_VERTICAL_OFFSET_REG (0x838A)<ul> <li>Horizontal and Vertical position to start the OSD at</li> </ul> </li> <li>H0_OVERLAY_HORIZONTAL_SIZE_REG (0x838C)</li> <li>H0_OVERLAY_VERTICAL_SIZE_REG (0x838E)<ul> <li>Horizontal and vertical size of OSD \u2013 800x600 in our case</li> </ul> </li> </ul>"},{"location":"architecture/Connection_Management/connection_process_specifics/#overlay-algorithm_1","title":"Overlay Algorithm","text":"<p>The algorithm is very simple. The Display resolution is read first and the horiz / vertical offsets are calculated based on this in conjunction with the OSD size *800x600). The offsets are then written to the two offset registers. The size (800x600) is written to the size registers. The Address of the Framebuffer is written to the base address register. The next thing to ensure that the secondary surface is pushed off screen \u2013 Writing 0x780 to the SECONDARY_STREAM_DISPLAY_POS_H_0_ADDR register will achieve this. The last step is to turn ON the overlay and apply the change \u2013 This is done in the Control Register.  Turning off the Overlay will \u2018hide\u2019 the OSD \u2013 This can be done with the Enable/Update bit in the Control register</p>"},{"location":"architecture/Connection_Management/connection_process_specifics/#2k-overlay-se-dual-head","title":"2K Overlay \u2013 SE Dual-Head","text":""},{"location":"architecture/Connection_Management/connection_process_specifics/#overview_2","title":"Overview","text":"<p>The basic principle is the same as per the rest of the 2K receivers - A block of Fpga DDR has been allocated to hold the OSD \u2013 A Framebuffer has been allocated in the 2K RX Device tree pointing to this DDR Block. The overlay mechanism is a primary mode Overlay, so it will not function when the Primary mode is being used (e.g. in an RDP VM connection). This works for Overlaying the OSD (as the connection needs to exit first), but won\u2019t work for the connectionLabel, as this is over laid on top of a connection (+ it will have other limitations moving)</p>"},{"location":"architecture/Connection_Management/connection_process_specifics/#overlay-registers_2","title":"Overlay Registers","text":"<ul> <li>DISPLAY_OUTPUT_FORMAT_CONTROL_0_ADDR (0x8303)<ul> <li>Blank the Display</li> </ul> </li> <li>PRIMARY_STREAM_BASE_ADDR_0_ADDR (0x8330)<ul> <li>Set the Base address of the OSD framebuffer (0x31400000)</li> </ul> </li> <li>PRIMARY_STREAM_DISPLAY_SIZE_H_0_ADDR (0x8320)</li> <li>PRIMARY_STREAM_DISPLAY_SIZE_V_0_ADDR (0x8322)<ul> <li>Set the Size of the Overlay being displayed \u2013 800x600 in this case</li> </ul> </li> <li>PRIMARY_STREAM_DISPLAY_POS_H_0_ADDR (0x8324)</li> <li>PRIMARY_STREAM_DISPLAY_POS_V_0_ADDR (0x8326)<ul> <li>Set the co-ordinates where the OSD will start from</li> </ul> </li> <li>PRIMARY_SURFACE_STRIDE_REGISTER (0x833C)<ul> <li>Set the Primary OSD width to 800</li> </ul> </li> <li>DISPLAY_FETCH_CONTROL_0_ADDR (0x8302)<ul> <li>Set primary fetches only</li> </ul> </li> <li>DISPLAY_TEST_PATTERN_0_ADDR (0x8304)<ul> <li>Turn OFF test modes</li> </ul> </li> <li>H0_OVERLAY_CONTROL_REG_OFFSET (0x8380)<ul> <li>Turn on the Update bit.</li> </ul> </li> </ul>"},{"location":"architecture/Connection_Management/connection_process_specifics/#overlay-algorithm_2","title":"Overlay Algorithm","text":"<p>The algorithm is very simple. The Display resolution is read first and the horiz / vertical offsets are calculated based on this in conjunction with the OSD size (800x600). The offsets are then written to the two offset registers. The size (800x600) is written to the size registers. The Address of the Framebuffer is written to the base address register. The last step is to turn ON the overlay and apply the change \u2013 This is done in the Control Register.  Turning off the Overlay will \u2018hide\u2019 the OSD \u2013 This can be done with the Enable/Update bit in the Control register</p>"},{"location":"architecture/Connection_Management/connection_process_specifics/#setting-the-display-resolution","title":"Setting the Display Resolution","text":"<p>On boot up, OSD Reload and every time the OSD needs to be displayed, a function is called to setup the display resolution. Depending on the configured resolution for the OSD, this may or may not require the display resolution to be changed. The algorithm is slightly different for 4K and 2K receivers, so I will split it into two for clarity</p>"},{"location":"architecture/Connection_Management/connection_process_specifics/#4k-receiver","title":"4K Receiver","text":"<p>The following flow diagram details the sequence</p> <p></p>"},{"location":"architecture/Connection_Management/connection_process_specifics/#2k-receiver","title":"2K Receiver","text":"<p>The following diagram details the sequence.</p> <p></p>"},{"location":"architecture/Connection_Management/connection_process_specifics/#persistent-connections","title":"Persistent Connections","text":"<p>Any connection can have persistence enabled. This means that if the connection fails for any reason, then the connection will be re-launched. The following are important points to note:</p> <ul> <li>If the connection fails on its first attempt, then it will not be re attempted</li> <li>If it is a controlled connection exit (Hotkey / Rest API terminate ...), then it will not be re- attempted</li> <li>Once persistence kicks in, the connection will continuously be re-attempted while it continues to fail</li> <li>The only way to break out of the continuous re launching of the connection is with a Hotkey Exit</li> </ul> <p>The Connection Manager handles connection persistence as follows:</p> <ul> <li>Once a connection exits (CM receives the SEND_EXIT_CODE Topic), the CM checks it the connection is persistent or not.</li> <li>If it is persistent, then it checks the exit code<ul> <li>If the exit code reflects a controlled exit, then nothing further is done and the OSD is displayed</li> <li>If the exit code reflects a failure, then a re-launch of the connection is attempted</li> </ul> </li> </ul>"},{"location":"architecture/Connection_Management/connection_process_summary/","title":"Connection Process Summary","text":"<p>The connection process can be split into two parts:</p> <ol> <li>The connection management aspects \u2013 i.e. Launching the connection client with the appropriate arguments, switching to a different connection and terminating the connection</li> <li>The connection establishment / teardown aspects. This is done in the actual client itself (bbfreerdp/dfreerdp ...)</li> </ol> <p>This design will be focussing on part 1), as part 2) is not changing in this project. The following diagram shows the processes involved in Connection management and the interactions between them. The interactions are for the most part via Mosquitto messages.</p> <p></p> <p> </p> <p>The following Sequence Diagrams show the basics of the three core parts of connection Management \u2013 Setup, teardown and switch.</p> <p> </p> <p></p> <p> </p> <p></p> <p> </p> <p></p> <p> </p>"},{"location":"architecture/Connection_Management/connection_process_summary/#overview-of-processes-involved-in-connection-management","title":"Overview of processes involved in connection management","text":"<p>The connection process has been split into multiple applications on the Emerald Receivers with the Connection Manager at the centre. All the applications are launched at boot-up and run constantly while the receiver is powered up. For the most part, communication between these standalone processes is done through Mosquitto messages, although there are still a few files being used to share data (these are a carry-over from the past, but ultimately need to be removed moving forward) The processes involved in connections are as follows:</p> <ul> <li>Cloudgui - This provides the user with the ability to Launch a connection</li> <li>Connection control - This handles the Hotkeys triggered by the user.</li> <li>Connection Manager - This is the core process in handling connections. It takes in MQTT requests from the other applications to make/break/switch connections and processes them based on its state machine.</li> <li>Connection Launcher - This application runs the connection process (bbfreerdp, dfreerdp ...).  Once the connection application exits, it also handles the exit code.</li> <li>OSD Manager - This application handles the displaying of the OSD. It sets up the display and either Hides (when connection active) the OSD or Shows the OSD (when connection exits). It also handles restarting the OSD due to controlled exits (res change / language change)</li> <li>Webservice - This application handles the Rest based connection requests (This only runs on a Managed Receiver)</li> </ul>"},{"location":"architecture/Connection_Management/connection_process_summary/#connection-use-cases","title":"Connection Use Cases","text":"<p>The following are the list of Connection use cases. The descriptions describe the sunny-day scenarios. In reality, there are significant checks performed at every stage of the processes.</p> <ul> <li>Connection Launched from OSD via the \u2018connect\u2019 button<ul> <li>User on the OSD, selects his connection and hits the \u2018connect\u2019 button</li> <li>Required connection is then launched and OSD is no longer displayed Bonded connection Launched from OSD via the \u2018connect\u2019 button</li> <li>User on the OSD selects a bonded connection and hits the \u2018connect\u2019 button.</li> </ul> </li> <li>Bonded connection request is sent to Boxilla<ul> <li>Boxilla sends Force Connects to all the Receivers in the bonded group</li> <li>Connections are then launched on all the receivers and the OSDs are no longer displayed</li> </ul> </li> <li>Connection Launched from OSD via a Favourite hotkey<ul> <li>User on the OSD Launches a connection by selecting the favourite key</li> <li>Connection that corresponds to favourite hotkey is launched</li> </ul> </li> <li>Connected terminated via the Terminate Hotkey<ul> <li>Connection is running \u2013 The user triggers the \u2018Terminate\u2019 hotkey</li> <li>The connection then terminates and the OSD is displayed.</li> </ul> </li> <li>Connection switched using the Previous Hotkey<ul> <li>Connection is running \u2013 The user requests a switch to the last connection using the Previous Hotkey</li> <li>The current connection is terminated and the previous connection is launched (Note: The Previous Hotkey has no affect when there is no connection running)</li> </ul> </li> <li>Connection switched using a Favourite Hotley<ul> <li>Connection is running \u2013 The user requests a switch to a different connection using a Favourite Hotkey</li> <li>The current connection is terminated and the new connection is launched</li> </ul> </li> <li>Force Connection REST API triggered<ul> <li>The Force Connection Rest API is triggered (See rest spec for details).</li> <li>If there is an existing connection running, then this is terminated and the new connection launched</li> <li>If no current connection exists (i.e. OSD is being displayed), then the new connection is launched and the OSD no longer displays</li> </ul> </li> <li>Make Connection Rest API triggered<ul> <li>The Make Connection Rest API is triggered (See rest spec for details).</li> <li>If there is an existing connection running, then this is terminated and the new connection launched</li> <li>If no current connection exists (i.e. OSD is being displayed), then the new connection is launched and the OSD no longer displays</li> </ul> </li> <li>Terminate Connection Rest API triggered<ul> <li>The Terminate Connection Rest API is triggered (See rest spec for details).</li> <li>If there is a connection running, then it is terminated and the OSD is displayed</li> </ul> </li> <li>Terminate Connection No OSD Rest API triggered<ul> <li>The Make Connection No Osd Rest API is triggered \u2013 (See rest spec for details).</li> <li>If there is a connection running, then it is terminated but the OSD is NOT displayed</li> </ul> </li> <li>Force Login over Rest The Force Login Rest API is triggered<ul> <li>If there is a connection running, then the connection is terminated</li> <li>The new User is now logged into the OSD</li> </ul> </li> <li>Force Logout over Rest<ul> <li>The Force Logout Rest API is called</li> <li>If there is a connection running, then the connection is terminated</li> <li>The current user is logged out of the OSD</li> </ul> </li> </ul>"},{"location":"architecture/Connection_Management/history/","title":"Master Document Revision History","text":""},{"location":"architecture/Connection_Management/history/#master-document-revision-history","title":"Master Document Revision History","text":"Date Version Description Author/Editor 0.1 First Draft Eamon Hayden 0.2 Second Draft"},{"location":"architecture/Connection_Management/mqtt/","title":"MQTT Inter-Process Communications","text":"<p>MQTT is a lightweight publish-subscribe protocol that consists of a Broker and a number of Clients. The MQTT broker we are using is called Mosquitto. The Broker is a server that receives all messages from the clients and routes them to the appropriate destination client/clients. Clients that have information to share will \u2018publish\u2019 it and clients that are interested in the information will \u2018subscribe\u2019 to it. Multiple Clients can \u2018subscribe\u2019 to the same message. In the case of how we handle connections, the \u2018clients\u2019 will be the applications that are running on the board that are involved in the connection process \u2013 example: Cloudgui, Connection Control, Connection Manager, Webservice etc. The messages are called Topics and have associated data (Json formatted in this case). (Note: This document does not detail the data associated with the topics. This is too much detail for a design document and could easily change resulting in this document being Incorrect. Suffice to say that all topics have associated data \u2013 If you wish to see what it is for a particular topic, you should look for where the topic is being published in the code.)</p>"},{"location":"architecture/Connection_Management/mqtt/#details-of-mosquitto-initialization","title":"Details of Mosquitto Initialization","text":"<p>Question: Does our code handle duplicate Messages? \u2013 As we use a QoS of one, this could happen. The Initialization sequence is as follows. All clients that wish to communicate via Mosquitto must do this.</p> <ul> <li>Initialize the mosquito libraries<ul> <li>mosquito_lib_init()</li> </ul> </li> <li>Create a new Mosquitto Client Instance<ul> <li>mosq_handler = mosquito_new(client_id, clean_session, user_ptr)<ul> <li>client_id is a unique string to identify the session</li> <li>clean_session is set to \u2018true\u2019 to indicate that we want clean all messages on disconnect</li> <li>user_ptr that will be passes as an argument to any callbacks \u2013 We don\u2019t use this, so set it to NULL</li> </ul> </li> </ul> </li> <li>Setup the Mosquitto callback function \u2013 This will be called when the Broker receives a message that the client has subscribed to.<ul> <li>mosquito_message_callback_set(mosq_handler, callback_function)<ul> <li>callback_function is the name of the function that gets called when a message that the client has subscribed has been published</li> </ul> </li> </ul> </li> <li>Connect to the Mosquitto Broker<ul> <li>mosquito_connect(mosq_handler, host,port,keepalive)<ul> <li>host is the hostname or IP of the broker \u2013 set to \u2018localhost\u2019</li> <li>port is the network port to connect to \u2013 set to 1883</li> <li>keepalive is the number of seconds after which the broker should ping the client \u2013 set to 60</li> </ul> </li> </ul> </li> <li>Create the Thread to process network Traffic<ul> <li>mosquito_loop_start()</li> </ul> </li> </ul>"},{"location":"architecture/Connection_Management/mqtt/#details-of-mosquitto-publish","title":"Details of Mosquitto Publish","text":"<p>For Clients that wish to publish Mosquitto messages, the following describes how we implement it. -  mosquito_publish(mosq_handler,topic,msg_length, msg,QoS,retain)     - mosq_handler is the Mosquitto Handler for this Mosquitto Client topic is the mosquito topic that is being published, see details of the topic format further on     - msg_lenght is the length of the data associated with this topic     - msg is the actual data \u2013 Json formatted in this case     - QoS is the Quality of Service \u2013 We set it to a QoS of 1, where a QoS of 1 means:- \u201cThe broker/client will deliver the message at least once, with confirmation required\u201d     - Retain is a flag that is set to True to retain the message \u2013 We set it to false</p>"},{"location":"architecture/Connection_Management/mqtt/#details-of-mosquitto-subscribe","title":"Details of Mosquitto Subscribe","text":"<p>For Clients that wish to subscribe to Mosquitto messages, the following describes how we implement it. -  Mosquito_subscribe(mosq_handler, mid, topic, QoS)     - mosq_handler is the Mosquitto Handler for this Mosquitto Client     - mid \u2013 message Id functionality \u2013 Not used, so we set to NULL     - topic is the mosquito topic that is being subscribed to, see details of the topic format further on     - QoS is the Quality of Service \u2013 We set it to a QoS of 1, where a QoS of 1 means:- \u201cThe broker/client will deliver the message at least once, with confirmation required\u201d</p> <p>The Message formats are as per the SDKVM Project. This is extensively documented there, so I will only briefly describe it here, focussing on the specifics for Connections. (Note: They are based off the original version of the message formats \u2013 This has since changed which means that we are no longer in sync)</p> <p>There are three types of messages commands, events and status - Commands: An instruction to the subscribing Application to do something. - Events: An indication to the subscribing application that something of interested to it has changed. - Status: A status message.</p>"},{"location":"architecture/Connection_Management/mqtt/#mosquitto-topics-general-format","title":"Mosquitto Topics \u2013 General Format","text":"<ul> <li>blackbox/product_family/cmd/target_device_id/application_id/request</li> <li>blackbox/product_family/event/target_device_id/application_id/request</li> <li>blackbox/product_family/status/target_device_id/application_id/request</li> </ul>"},{"location":"architecture/Connection_Management/mqtt/#mosquitto-topics-real-examples","title":"Mosquitto Topics \u2013 Real examples","text":"<ul> <li>blackbox/appliance/cmd/Ip_Address/not_specified/force_connection</li> <li>blackbox/appliance/event/Ip_Address/not_specified/connection_launched</li> <li>There are no current examples of Mqtt Status messages</li> </ul>"},{"location":"architecture/Connection_Management/mqtt/#mosquitto-topics-notes","title":"Mosquitto Topics - Notes:","text":"<ul> <li>We currently don\u2019t specify an \u2018application_id\u2019 \u2013 This gets set to \u2018not_specified\u2019</li> <li>We use the Appliance IP address as the \u2018target_device_id\u2019</li> <li>Applications that subscribe to particular topics, use wildcards to ignore fields that they don\u2019t care about. For example:<ul> <li>blackbox/appliance/cmd/+/+/force_connection</li> </ul> </li> </ul>"},{"location":"architecture/Connection_Management/mqtt/#list-of-mosqitto-topic-names-with-publisher-subscribers","title":"List of Mosqitto Topic Names with Publisher / Subscribers","text":"TOPIC Publisher Subscriber Details MAKE_OSD_CONNECTION_TOPIC Cloudgui Connection Manager Request to launch a connection from the OSD FORCE_CONNECTION_TOPIC Webservice Connection Manager REST Request for Force Connect FORCE_LOGOUT_TOPIC Webservice Connection Manager REST request to Logout User FORCE_LOGIN_TOPIC Webservice cloudgui REST request to Login User TERMINATE_CONNECTION_CC_TOPIC Connection Control Connection Manager Hotkey Exit request PREVIOUS_CONNECTION_TOPIC Connection Control Connection Manager Hotkey Previous request ONE_SECOND_TOPIC Connection Control OSD Manager Indication that one second has elapsed. TERMINATE_CONNECTION_WEBSERVICE_TOPIC Webservice Connection Manager REST request to terminate a connection SEND_EXIT_CODE_TOPIC Connection Launcher Connection Manager Exit code details from client as it terminates TERMINATE_WITH_NO_OSD_TOPIC Webservice Connection Manager REST request to terminate a connection and NOT show the OSD CONNECTION_LAUNCHED_TOPIC Clients (bbfreerdp, dfreerdp, xfreerdp) Connection Manager Indication that a connection is fully established LAUNCH_CONNECTION_TOPIC Connection Manager Connection Launcher cloudgui Request to Launch a connection EXIT_CONNECTION_TOPIC Connection Manager Client (BBFREERDP, dfreerdp, xfreerdp \u2026) Request to connection client to exit.. OSD_HIDE_TOPIC Connection Manager OSD Manager Request to hide (i.e. not display) the OSD OSD_SHOW_TOPIC Connection Manager OSD Manager Request to show the OSD OSD_RESOLUTION_CHANGE_TOPIC Cloudgui OSD Manager Indication from Cloudgui that the user has changed the OSD Resolution and that the Cloudgui needs to restart OSD_LANGUAGE_CHANGE_TOPIC Cloudgui OSD Manager Indication from Cloudgui that the user has changed the Keyboard and that the Cloudgui needs to restart GET_CURRENT_CM_STATE_TOPIC Cloudgui Connection Manager Request to send the state of the CM state machine SET_DISCONNECT_ERROR_TOPIC OSD Manager Connection Control RestAPI cloudgui Reason why connection exited CM_STATE_CHANGED_TOPIC Connection Manager cloudgui Indication that the CM state machine has changed state CM_LOGOUT_RQ_TOPIC Connection Manager cloudgui Request to logout a user OSD_CONTROLLED_EXIT_TOPIC Nobody cloudgui Plan was to use this to tell the OSD to exit cleanly. It is not currently used CLOUDGUI_CONNECTION_LAUNCH_TEST_TOPIC Nobody cloudgui Plan was to use this as a way to tell the OSD to launch a connection from the command line."},{"location":"architecture/Connection_Management/overview/","title":"Connection Management Software Design Overview:","text":""},{"location":"architecture/Connection_Management/overview/#background","title":"Background","text":"<p>Prior to Release V6.6.0, the \u2018startgui.sh\u2019 script controlled making/breaking/switching connections. The basic operation of this script was to alternate between having a connection running and having the OSD running. This system was in place since the very start of the Emerald product range and even though it was very reliable, it had the following limitations that needed to be addressed.</p> <ul> <li>Every time a connection exited, the OSD process (cloudgui) was re-launched. This was very slow if there were a large database of users/connections and was starting to be a major issue for customers</li> <li>Launching a connection was also considerably slower than it needed to be. The following were the basic steps involved:<ul> <li>The OSD wrote a connection file (Startapp.sh) with the connection information</li> <li>The OSD exited</li> <li>The startgui.sh script ran connection file to launch the connection</li> </ul> </li> <li>Once Boxilla management was developed, the requirement to be able to launch/terminate a connection over REST required killing the connection Client / OSD at certain times to allow the above scheme to continue to work. It also introduced the issue whereby both the user on the OSD and a user on Boxilla could be making/breaking connections at the same time, which lead to a variety of issues.</li> <li>Another fundamental of the connection process was that all information sharing between the processes involved was done via files. This was far from optimal.</li> <li>Adding any \u2018connection\u2019 based features was becoming more and more difficult.</li> </ul> <p>Based on the above limitations, the \u2018Enhanced OSD\u2019 project kicked off. The fundamentals of this were as follows:</p> <ul> <li>Once a connection is terminated, the OSD should appear immediately. This was done by ensuring that the OSD process stayed alive at all times.</li> <li>Connections should establish as fast as possible. This was to be addressed by no longer using shell scripts in this time critical piece of work</li> <li>Communication between all processes involved in making and terminating connections was to be via MQTT.</li> <li>The dependence on Files was to be reduced (ideally should be no files involved in the connection process)</li> </ul>"},{"location":"architecture/Connection_Management/overview/#requirements","title":"Requirements","text":"<p>The basic marketing requirements were as follows:</p> <ul> <li>OSD to appear within 500ms of connection being told to Exit (assuming Auto OSD Resolution)</li> <li>Connections should be established as quickly as possible \u2013 Guideline within 1sec</li> </ul> <p>The basic Engineering requirements were as follows:</p> <ul> <li> <p>A proper connection framework was required to allow us to be able to add new connection based features more easily. This was to include the following</p> <ul> <li>A proper method of communication between processes on the board (and ultimately between boards)</li> <li>Remove / reduce the need for so many files</li> <li>Remove the need to \u2018kill\u2019 applications \u2013 Replace this with instructions for applications to exit cleanly.</li> </ul> </li> </ul>"},{"location":"architecture/Connection_Management/overview/#summary","title":"Summary","text":"<p>This document provides a detailed design on how Connections are handled on the Emerald Appliances. The project name was \u2018Enhanced OSD\u2019 and the implementation was done in two basic phases. From the point of view of this design document (which is being re-written after the implementation is complete), the design covers all aspects of Connections on the Emerald appliances. The core of the design is as follows:</p> <ul> <li>The OSD process (Cloudgui) will stay running at all times \u2013 This design will detail how/when we display or hide the OSD output (depending on whether a connection is running or not)</li> <li>A state based Connection Manager Application (in future sections of the document, will be referred to CM) that handles all aspects of connections (making, switching, breaking) has been added. All applications that want to make, break or switch a connection need to send a message to the CM and it will handle the request.</li> <li>An Inter process communication mechanism has been added. This is MQTT, which comprises of a Mosquitto broker and a mechanism for applications to publish and subscribe to Mosquitto Topics that they are interested in.</li> <li>An Osd Manager application has also been added \u2013 this is primarily involved in managing when/how to either display of hide the OSD (now that the OSD process is continuously running)</li> <li>A Connection Launcher application has been added \u2013 The sole responsibility of this application is to run the connection binaries (bbfreerdp, dfreerdp ...) on request from the CM and to message the CM (with the exit code) when the connection applications exit.</li> <li>Scripts are no longer used in the connection process \u2013 This improves the connection performance times.</li> <li>For the most part (although not completely), we have removed the use of temporary files in the process of making, breaking and switching connections</li> <li>All existing connection based functionality / behaviour has been maintained. From a user point of view, the only change they will notice is improved performance.</li> </ul>"},{"location":"architecture/Connection_Management/references/","title":"References","text":""},{"location":"architecture/Connection_Management/references/#references","title":"References","text":"<p>Include references to any relevant documentation here. For an architectural document we would - at a minimum - expect a reference to the Marketing Requirements. Any Feature Analysis documents or wiki entries for workshop minutes or notes should also be referenced or snapshots included if possible so as making the document definitive. Referencing links must be done with care as they are uncontrolled and it is never a good idea to mix that with a controlled document that must be specific as it reflects an agreement between the technical parties and or customers through its reference to marketing requirements etc.. The references included in this section of the template are for reference only and should be replaced as appropriate in each specific instance.</p> <ul> <li>Marketing Requirements <ul> <li>https://bboxjira.atlassian.net/Rbrowse/PRM-25</li> <li>https://bboxjira.atlassian.net/Rbrowse/PRM-26</li> </ul> </li> <li>High Level Design: <ul> <li>https://limerick.blackbox.com/EmbSW/ProjPublicDocs/_layouts/15/start.aspx#/Concurrent%20OSD/Forms/Allitems.aspx</li> </ul> </li> <li>Acchitectural Impact:<ul> <li>https://limerick.blackbox.com/EmbSW/ProjPublicDocs/_layouts/15/start.aspx#/Concurrent%20OSD/Forms/Allitems.aspx</li> </ul> </li> <li>REST API: https://bbweb.blackbox.com/sites/Limerick/Engineering/SoftwareEmbedded/ENG-0005-020.docx</li> </ul>"},{"location":"architecture/Connection_Management/termsAndDefinitions/","title":"Terms and Definitions","text":""},{"location":"architecture/Connection_Management/termsAndDefinitions/#terms-and-definitions-used-in-blackbox","title":"Terms and Definitions used in Blackbox","text":"Term Definition CLU Image A optimized encrypted file format used for 2K appliance software images. Decoder See Receiver Encoder See Transmitter FIT Image A optimized encrypted file format used for 4K appliance software images. Municast The use of multiple individual TCP streams to share a video from a single transmitter to multiple receivers Multicast The use of an individual Multicast UDP stream to share a video from a single transmitter to multiple receivers. Blackbox uses reliable multicast so that any dropped frames are resent and no data loss occurs. Pixel Perfect Mode The original scheme used by 4K products where the entire frame of the source video was captured continuously and sent with compression to the decoder. RFX RemoteFX Codec Extension developed by Microsoft which uses a lossy image codec to encode screen images with efficient and effective compression. This is the lossy scheme used in Blackbox products. Reciever A Blackbox appliance that receives and displays a video stream. A receiver is also referred to as a client or decoder. RPU Real Time Processing Unit. The Zynq Ultrascale+ MPSoC features two A5 RPUs. In our 4K products one of these is used for Display Port functionality using IP provided by Xilinx. The second on the encoder side acts a video processing feed between FPGA and TOE Shared Mode A generic term used in Blackbox to describe schemes that allow more than one receiver view the video source from a transmitter. See Municast and Multicast. Tile Differencing Mode A lossless scheme used to reduce bandwidth; only tiles (portions of the screen) that change are sent from encoder to decoder. TOE TCP Offload Engine: A hardware based TCP stack used to accelerate the transmission of data. This is essential in high bandwidth, low latency transmission of video and audio. Technical Debt Technical Debt is a concept in software development that reflects the implied cost of additional rework caused by choosing an easy (limited) solution now instead of using a better approach that would take longer. Transmitter A Blackbox appliance that captures and transmits a video from a source. A transmitter is also referred to as a server or encoder. Video Source A source of input for a Transmitter, normally the DVI or Display Port output of a PC. CM Connection Manager. This is the application that manages all aspects of connections OM OSD Manager. This is the application that manages whether to display or hide the OSD Table 1 Terms and Definitions"},{"location":"architecture/Enhanced_OSD/enhanced_osd/","title":"Enhanced OSD Software Design:","text":"<ul> <li>Introduction</li> <li>Overview</li> <li>Design Detail</li> <li>Enhanced OSD Phase1 Process View</li> <li>Connection Manager</li> <li>OSD Manager</li> <li>Webservice</li> <li>REST API Message to Boxilla</li> <li>Security Considerations</li> <li>Enhanced OSD Phase 2</li> <li>Appendices</li> </ul>"},{"location":"architecture/Enhanced_OSD/Enhanced_OSD_Software_Design/appendix/","title":"Appendices","text":""},{"location":"architecture/Enhanced_OSD/Enhanced_OSD_Software_Design/appendix/#startappsh","title":"Startapp.sh","text":"<p>Startapp File Data:</p> <pre><code>#!/bin/sh\n\n# KVM Connection beginning\n\n/usr/bin/bbfreerdp -C 'Develop_10.231.128.202' -U 'admin' -u demo -p cloud -g 1280x1024 --dfb:no-banner -dfb:mode=1280x1024 -x l -rfx --mode 10 --ignore-certificate --no-tis --no-nia --composition --no-osb -o --inactive 0 10.231.128.202 \n\nexit_code=$?\n\necho $exit_code &gt; /tmp/exit_code\n\nbbox_err_strings -t bbfreerdp -c $exit_code -l en &gt; /tmp/exit_message\n\n# KVM Connection ending\n</code></pre> <p></p> <p>Current Design</p> <ul> <li>Startapp.sh file is created when connect button click on OSD or on connection request from Boxilla. The startapp.sh file used by startgui.sh script to launch the connections.</li> </ul> <p>Proposed Enhanced Design</p> <ul> <li>Connection details send to Connection Manager (CM) through MQTT topics CONNECTION_DETAILS_TOPIC (KVM, SECURE_KVM, RDP, SSH, VNC, VMWARE) from OSD Screen or CONNECTION_FORCE_TOPIC (KVM, RDP, SSH, VNC, VMWARE) from Favorite Connections Hot Keys.</li> <li>Moving the startapp.sh file contents to structure variables. </li> </ul>"},{"location":"architecture/Enhanced_OSD/Enhanced_OSD_Software_Design/appendix/#connection-type","title":"Connection Type","text":"<pre><code>Connection_type File Data: \u201ckvm\u201d/ \u201crdp\u201d / \u201cssh\u201d /\u201dsecure kvm\u201d / \u201cvnc\u201d / \u201cvmware\u201d\n</code></pre> <p>Current Design</p> <ul> <li>This file contain connection type string. Connection Type may be kvm, rdp, vmware etc. Webservice and OSD is writing connection type into this file.</li> <li>Startgui.sh and CC are using this file to launching and terminating connection respectively.</li> </ul> <p>Proposed Enhanced Design</p> <ul> <li>OSD Manager and Webservice publishes the connection type over MQTT topics to Connection Manager and Connection Control.</li> </ul>"},{"location":"architecture/Enhanced_OSD/Enhanced_OSD_Software_Design/appendix/#dfreerdpsignal","title":"Dfreerdp.signal","text":"<p><pre><code>Dfreerdp.signal File Data: \u201cterminate\u201d/ \u201cprevious\u201d \n</code></pre> </p> <p>Current Design</p> <ul> <li>This file contain information about termination event like Terminate message for connection termination, previous message for switch connection.</li> </ul> <p>Proposed Enhanced Design</p> <ul> <li>Connection Control and Web-service publishes MQTT CONNECTION_TERMINATE_TOPIC termination event information to CM and connection binaries like FreeRDP, RDP, SSH, SECURE_KVM, VMWAREM, VNC.CM decides either needs to switch to previous connection or terminate connection on this information.</li> </ul>"},{"location":"architecture/Enhanced_OSD/Enhanced_OSD_Software_Design/appendix/#persistent_connection","title":"Persistent_connection.","text":"<pre><code>Persistent_connection File Data: \u201cNull data, only file name used to find the connection type\u201d\n</code></pre> <p>Current Design</p> <ul> <li>This file don\u2019t contain any data, process uses this file as flag to know whether connection is persistent or not.</li> <li>Webservice get this information from Boxilla and create file if persistent connection is enabled</li> </ul> <p>Proposed Enhanced Design</p> <ul> <li>Webservice provide persistent connection type to CM through MQTT CONNECTION_FORCE_TOPIC</li> </ul>"},{"location":"architecture/Enhanced_OSD/Enhanced_OSD_Software_Design/appendix/#exit-code","title":"Exit code.","text":"<p><pre><code>Exit code File Data: \u201ce.g. 173\u201d\n</code></pre> </p> <p>Current Design</p> <ul> <li>Exit code status is read by rest-api to send exit reason to Boxilla.</li> </ul> <p>Proposed Enhanced Design</p> <ul> <li>CM gets the exit code from connection binaries like FreeRDP, RDP, SSH, SECURE_KVM, VMWAREM, VNC on terminating the connection.</li> </ul> <p>CM publish exit code to OSD Manager using the MQTT topic OSD_SHOW_TOPIC.</p>"},{"location":"architecture/Enhanced_OSD/Enhanced_OSD_Software_Design/appendix/#exit-message","title":"Exit Message","text":"<pre><code>Exit message File Data: \u201cUnexpected event Exit code 173\u201d\n</code></pre> <p>Current Design</p> <ul> <li>Unexpected event occurred caused the termination of connection, exit message uses by Cloudgui.</li> </ul> <p>Proposed Enhanced Design</p> <ul> <li>CM publish exit code to OSD Manager using the MQTT topic OSD_SHOW_TOPIC.</li> </ul> <p>OSD Manger reads the Exit message string based on exit code and run the Cloudgui</p>"},{"location":"architecture/Enhanced_OSD/Enhanced_OSD_Software_Design/appendix/#preset-switch","title":"PRESET SWITCH.","text":"<pre><code>PRESET_SWITCH File Data: \u201cNull data, only file name used to make Preset connection\u201d\n</code></pre> <p>Current Design</p> <ul> <li>Pre-set switch is configured in Boxilla, this file created when bunch of connection requested from Boxilla. Startgui.sh reads the pre-set data.</li> </ul> <p>Proposed Enhanced Design</p> <ul> <li>CM maintains preset_switch status to true on receiving the MQTT CONNECTION_FORCE_TOPIC</li> </ul>"},{"location":"architecture/Enhanced_OSD/Enhanced_OSD_Software_Design/appendix/#no_gui","title":"NO_GUI","text":"<pre><code>NO_GUI File Data: create file on NO GUI operation\n</code></pre> <p>Current Design</p> <ul> <li>This file doesn\u2019t store any data. It is use as flag to don\u2019t show the OSD while switching the connection in force connect event</li> <li>Webservice and control connection will trigger force connection event and create this file</li> </ul> <p>Proposed Enhanced Design</p> <ul> <li>CM maintains NO_GUI flag in the connection details structure to true on receiving the MQTT CONNECTION_FORCE_TOPIC</li> </ul>"},{"location":"architecture/Enhanced_OSD/Enhanced_OSD_Software_Design/appendix/#connection-details","title":"Connection details","text":"<ul> <li>Connection type: Type of connection such as (KVM=0, SECURE_KVM=1, RDP=2, SSH=3, VNC=4, VMWARE=5).</li> <li>Persist:  If value true then retry for connection.</li> <li>Audio: True/false to Enable/disable audio.</li> <li>Usbr: USB Redirection.</li> <li>Shared: True/false to Enable/disable the shared connection.</li> <li>Extended desktop: True/false to Enable/disable extended desktop.</li> <li>View only: True/false to Enable/disable view mode.</li> <li>Connection name: Connection name of encoder.</li> <li>User name: User login name (e.g. admin)</li> <li>IP Address: IP address of encoder to establish connection.</li> <li>Connection Mode: Connection mode type (OPTIMISED, PIXEL_PERFECT,UNKNOWN_COMPRESSION).</li> <li>Timer_val: Connection Inactive Timer Value.</li> </ul>"},{"location":"architecture/Enhanced_OSD/Enhanced_OSD_Software_Design/appendix/#cloudgui-to-connection-manager","title":"Cloudgui to Connection Manager","text":"<p>The below structure gives the example of connection details published to CM when connect button hit on OSD window on MAKE_OSD_CONNECTION_TOPIC.</p> <p><pre><code>kvm_connections_details_t kvm ={\n    connection_type = 0,   //KVM\n    audio = 1,             //if audio enabled\n    usbr = 1,              //if USB Redirection enabled\n    timer_val = timer_val; //connection Inactive Timer Value\n    shared = 1;            //if connection is shared\n    persist = 1;           //if persist is enabled\n    extended_desktop = 1;  //if extended desktop enabled\n    view_only = 1;         //if extended desktop enabled\n    cmode = 10;\n    connection_name = Default_TX_192.168.128.2\n    ip = 192.168.128.2\n    username = \"admin\"\n    connection_mode = 2    //OPTIMISED mode\n}\n</code></pre> Based on the above details CM launches the connecion</p>"},{"location":"architecture/Enhanced_OSD/Enhanced_OSD_Software_Design/appendix/#cm-to-osd-manager","title":"CM to OSD Manager","text":"<p>Below structure gives the example of hide message OSD structure received from CM.</p> <p>Based on the below structure values OSD Manager kill Cloudgui process.</p> <pre><code>Hide_osd_t hide = {.hide_osd = 1}; // 1 hide OSD window\n</code></pre>"},{"location":"architecture/Enhanced_OSD/Enhanced_OSD_Software_Design/bonded_connections/","title":"Bonded Connections","text":"<p>Bonded Connections have a the Connection Attribute \u2018type\u2019 set to \u2018bonded\u2019 in the XML file. These connections differ from normal connections in that they are NOT actually launched from the OSD. When a \u2018bonded\u2019 connection is selected on the OSD and the Connect button is pushed, the following sequence currently happens</p> <ul> <li>A rest message is sent to Boxilla indicating that the user wants to launch a bonded connection</li> <li>The OSD stays alive</li> <li>Boxilla now sends out \u2018Force Connects\u2019 to all the Reveivers in the bonded group</li> </ul> <p>In the existing design two tmp files \u201c/tmp/connection_control/bonded_connection_error_file\" and \u201c/tmp/connection_control/bonded_connection_name_file\" being used to keep track of the bonded connection name and error detail. The bonded_connection_name_file use by Cloudgui main window while selecting the default connection on OSD screen login. The bonded_connection_error_file read by Cloudgui main window and display the Disconnect error reason of the previous connection. There is no major scope in performance optimization to launch connection/OSD by replacing the bonded_connection_name_file and bonded_connection_error_file</p>"},{"location":"architecture/Enhanced_OSD/Enhanced_OSD_Software_Design/connection_manager_user_case/","title":"Connection Manager User Case","text":"<p>The Connection Manager (CM) is a state machine based standalone process and it communicates with other subsystems over MQTT protocol. The state machine driven by MQTT messages from the OSD manager, CC, Webservice, Cloudgui, etc.</p> <p>State machines in CM are:</p> <ul> <li>Idle</li> <li>Connecting</li> <li>Connected</li> <li>Terminating</li> </ul> <p>The Connection Manager handles all aspects of Connection Setup and Teardown (based on messages from OSD/Webservice/Connection Control etc.</p> <p>The Connection Manager handles all the existing functionality associated with connection:</p> <ul> <li>Make/break connections (Requested from OSD and Boxilla)</li> <li>Switch connections (previous/favourites)</li> <li>Exit codes / Exit strings</li> <li>Handling Force Connect </li> <li>Persistence</li> </ul>"},{"location":"architecture/Enhanced_OSD/Enhanced_OSD_Software_Design/connection_manager_user_case/#connection-manager-use-cases","title":"Connection Manager Use cases","text":""},{"location":"architecture/Enhanced_OSD/Enhanced_OSD_Software_Design/connection_manager_user_case/#connection-launch","title":"Connection launch","text":"<p>This section covers \u201cConnection launch request from Cloudgui\u201d use case.</p> <p>CM waiting case:</p> <p>The CM reads a message from message queue to perform the next operation. When the CM tries to read an empty message queue (i.e. when there is no message for processing) then it waits on message queue.</p> <p>The Following steps are perform by the CM to handle the connection launch event:</p> <ol> <li>The User hits connect button from OSD window.</li> <li>Cloudgui publish connection details on MAKE_OSD_CONNECTION_TOPIC. </li> <li>The CM have subscribed to same topic already so respective call-back gets trigger in the CM.</li> <li>In call-back function of CM :<ul> <li>Call-back function updates message type and add received payload into message queue. </li> </ul> </li> <li>The CM reads the message from message queue and then jumps to the current state i.e. IDLE</li> <li>Then the CM sends the connection details to the connection launcher process. </li> <li>The CM updates state to CONNECTING.</li> <li>We can modify bbfreerdp, dfreerdp and xfreerdp and publishes connection successful message from these clients to CM. But some clients like SSH, VNC and VMWARE cannot be modify because we don\u2019t have source code so we don\u2019t get any connected response from these clients.   <ul> <li>In case of bbfreerdp, dfreerdp and xfreerdp: the CM blocks on and wait for a connected response from the client or a connection failure/exit response from the connection launcher process. Once the CM gets a connected response from the client, the CM enters into a current state i.e. CONNECTING state.</li> <li>In case of ssh, vnc and vmware: CM assume connection has established and it directly transits to CONNECTING state instead of going back to read message.</li> </ul> </li> <li>Then the CM publishes a message with a topic of OSD_HIDE_TOPIC to kill the OSD.</li> <li>CM state updates to CONNECTED state.</li> <li>In case of bonded connection, Cloudgui requests to Boxilla and then Boxilla sends connection requests on force connection topic to the CM. </li> </ol>"},{"location":"architecture/Enhanced_OSD/Enhanced_OSD_Software_Design/connection_manager_user_case/#forcefavourite-connection","title":"Force/Favourite Connection","text":"<p>This section covers following use cases:</p> <ol> <li>Switch to favourite connection request from Connection Control.</li> <li>Connection request from Boxilla.</li> </ol> <p>Following steps gets perform by CM:</p> <ol> <li>When favourite connect hotkey detects then Connect Control (CC) publish connection details on FAVOURITE_CONNECTION_TOPIC topic and when connection launch from Boxilla then Webservice publish connection details on FORCE_CONNECTION_TOPIC.</li> <li>The CM has already subscribed to the topic, so the associated call-back gets triggered. The CM wakes up from wait state and executes the call-back and adds the required information into the message queue.</li> <li>In call-back function of CM, as explained, message type gets updated and add received payload to message queue.</li> <li>The CM reads message from message queue. CM\u2019s current state is either CONNECTED or IDLE so CM performs below operation,</li> </ol> <p>If Current state is CONNECTED: we can add MQTT support to bbfreerdp, xfreerdp and dfreerdp as we have source code. So In this case, the CM enters into current state and sends exit request to client. We cannot add MQTT support for ssh, vnc and vmware as we don\u2019t have their source code so in this case, the CM use existing two phased signalling mechanism to terminate a client, first it tries to graceful kill then wait for 3 seconds and if it fails to kill client then it does forceful kill. Then the CM changes the state to TERMINATING and waits for exit code from launcher process. Once exit code received then the CM enters into TERMINATING state and perform post termination operation like tearing down connection and then sends connection details to connection launcher to launch new connection. </p> <p>If current state is IDLE: The CM launches new connection as explained in connection launch, only difference is connection details are received on CONNECTION_FORCE_TOPIC instead of MAKE_OSD_CONNECTION_TOPIC.</p>"},{"location":"architecture/Enhanced_OSD/Enhanced_OSD_Software_Design/connection_manager_user_case/#switch-to-previous-connection","title":"Switch to Previous connection:","text":"<p>This section covers \u201cSwitch to previous connection request from Connection Control\u201d use case.</p> <p>The CM stores previous connection details into its data structure. </p> <p>In existing design, switch to previous connection launches only previous osd connection (launched from OSD) but with this design CM can launch previous connection independent of whether that connection was launched from Boxilla or OSD or favourite. </p> <p>Following steps are perform by CM:</p> <ol> <li>When the Connection Control application detects the previous connection hotkey then it publish a terminate message with a topic of TERMINATE_CONNECTION_CC_TOPIC topic. The CM has already subscribed to this topic so they receives a termination request with the associated termination reason.</li> <li>The CM reads message from message queue. CM enters into current state i.e. CONNECTED and sends exit request to current connection. It changes the state to TERMINATING and waits for exit code from launcher process. Once exit code received then the CM enters into TERMINATING state and handle exit reason. In the switch previous connection case, termination reason is PREVIOUS so the CM fetches the previous connection details and perform post termination operation and then sends connection details to connection launcher to launch new connection.</li> </ol>"},{"location":"architecture/Enhanced_OSD/Enhanced_OSD_Software_Design/connection_manager_user_case/#terminate-connection-terminate-connection-with-no-osd","title":"Terminate Connection/ Terminate Connection with No OSD:","text":"<p>This section covers following use cases:</p> <ol> <li>Terminate connection request from Connection Control</li> <li>Terminate connection request from Boxilla</li> <li>Terminate connection with no osd request from Boxilla</li> </ol> <p>Following steps get performed by the CM:</p> <ol> <li>When CC detects the hotkey to terminate the connection then it publishes the terminate message topic TERMINATE_CONNECTION_CC_TOPIC, in the case of terminating connection from Boxilla, web service publishes the terminate message on TERMINATE_CONNECTION_WEBSERVICE_TOPIC topic and in case of terminating connection with No OSD, web service publishes the terminate message on TERMINATE_WITH_NO_OSD_TOPIC topic. The CM receives terminate message on same topic.</li> <li>The CM enters into its current state i.e. CONNECTED state. In case of KVM, and RDP, the CM sends request to connection for exit and then update CM state to TERMINATING and waits for exit code from connection launcher process and In case of SSH, VNC and VMWARE, the CM uses two phased signalling mechanism to terminate connection.</li> <li>The Client returns exit code to Connection Launcher process and then connection launcher sends that code to CM.</li> <li>The CM publish show osd message to OSD manager only in case of Terminate Connection and \u201dTerminate Connection with No OSD\u201d name itself tells that OSD should not run so CM don\u2019t publish any message to OSD manager.</li> </ol>"},{"location":"architecture/Enhanced_OSD/Enhanced_OSD_Software_Design/connection_manager_user_case/#make-connect","title":"Make Connect:","text":"<p>Make connect is rest API and it used to launch hardcoded connection. When Make connect request comes then Webservice publishes connection details on MAKE_CONNECTION_TOPIC. Then CM perform same operation as force connection but this only launches an RX TX connection.</p>"},{"location":"architecture/Enhanced_OSD/Enhanced_OSD_Software_Design/connection_manager_user_case/#force-logout","title":"Force Logout:","text":"<p>Force logout request comes from Webservice to connection manager. Following actions performed by CM for force logout request.</p> <ul> <li>If CM is in CONNECTED state then CM terminates the connection and publish OSD Manager to show OSD window on\u00a0OSD_SHOW_TOPIC with payload details (forcelogout flag).</li> <li>If CM is in IDLE state then CM publishes OSD_SHOW_TOPIC\u00a0to OSD Manager.</li> </ul>"},{"location":"architecture/Enhanced_OSD/Enhanced_OSD_Software_Design/connection_manager_user_case/#force-login","title":"Force Login:","text":"<p>Force login request comes from REST API to connection manager. Following actions performed by CM for force login request.</p> <ul> <li>If CM is in CONNECTED state then CM terminates the connection and publish OSD Manager to show OSD window on\u00a0OSD_SHOW_TOPIC with payload detail (forcelogin flag).</li> <li>If CM is in IDLE state then CM publishes OSD_SHOW_TOPIC\u00a0to OSD Manager.</li> </ul>"},{"location":"architecture/Enhanced_OSD/Enhanced_OSD_Software_Design/connection_manager_user_case/#internal-structure","title":"Internal Structure:","text":""},{"location":"architecture/Enhanced_OSD/Enhanced_OSD_Software_Design/connection_manager_user_case/#message-queue","title":"Message Queue:","text":"<p>The Connection Manager handles multiple MQTT requests from different subsystems (Cloudgui, Boxilla, Connection Control, Connection Launcher, Client, and Webservice). The CM parses MQTT message in call-back function but call-back is asynchronous to CM so to avoid asynchronous issues we are adding received message into queue from call-back function and reading it in connection manager context. The CM\u2019s MQTT Call back function adds every received request into a queue. CM updates unique message type as per the incoming MQTT topic, adds payload to message and insert message into queue.</p> <p>All messages are received by the CM that don\u2019t apply in the current state deemed to be invalid. The CM reads requests from this message queue and discard the invalid message and also adds error log in syslog. The CM considers only valid message.</p> <p>The CM sets the threshold for messages in queue up to 5 and if message queue crosses that threshold then CM deletes all message by reading them and considering as an invalid message.</p>"},{"location":"architecture/Enhanced_OSD/Enhanced_OSD_Software_Design/connection_manager_user_case/#connection-launcher-process","title":"Connection launcher process:","text":"<p>To Get exit status of client in normal or abnormal termination, client\u2019s parent should launch the client as a foreground process. The CM cannot launch client as a foreground process and block as CM should not block and ready to process any incoming request in message queue. So the Connection launcher is a separate application which is responsible for launching the connection. The Connection launcher launches connection in foreground and block until connection termination. On connection termination (normal/abnormal) the connection launcher collects the exit code of client and sends to CM. The connection launching and clean-up is as per the existing design.</p>"},{"location":"architecture/Enhanced_OSD/Enhanced_OSD_Software_Design/connection_manager_user_case/#message-type","title":"Message Type","text":"<p>Message type represents on which topic message has received. The CM validates received message depending on Message type.</p>"},{"location":"architecture/Enhanced_OSD/Enhanced_OSD_Software_Design/connection_manager_user_case/#message-validation","title":"Message validation:","text":"<p>The CM validates every received message and perform action on valid messages and discard invalid messages. e.g. If the Connection Manager\u2019s current state is TERMINATING then exit code from client is valid message in this state, if the CM receives any other message like terminating request from connection control or launch connection from Cloudgui then it discards that invalid messages.</p>"},{"location":"architecture/Enhanced_OSD/Enhanced_OSD_Software_Design/connection_manager_user_case/#connection-manager-flowchart","title":"Connection Manager Flowchart","text":""},{"location":"architecture/Enhanced_OSD/Enhanced_OSD_Software_Design/connection_manager_user_case/#connection-manager-states","title":"Connection Manager States","text":"<p>The Connection Manager uses a five states to perform its operation. The Connection Manager\u2019s state machines:</p> <ol> <li>IDLE </li> <li>CONNECTING </li> <li>CONNECTED </li> <li>TERMINATING </li> </ol> <p>The CM uses message queue to store all requests (for example, launch connection, terminate connection etc.) from other subsystems. It then reads the message queue to perform that requested operations. So wait state is the message queue\u2019s wait state. When the CM tries to read an empty message queue then the CM enters into a wait state until a message is added into the message queue.</p>"},{"location":"architecture/Enhanced_OSD/Enhanced_OSD_Software_Design/connection_manager_user_case/#current-cm-state-idle","title":"Current CM State: IDLE","text":"<p>In IDLE state, the CM is performing the following operations:</p> <ol> <li>Validate received message. If received message is not valid then CM adds error log into syslog file and wait for next message.</li> <li>valid requests in the IDLE state are:<ul> <li>Force Connect from Boxilla</li> <li>Make Connect from Boxilla.</li> <li>Connect from OSD</li> <li>Favourite switch (hotkey)</li> <li>Force Logout from Boxilla.</li> <li>Force Login from REST API.</li> </ul> </li> <li>In force logout case, the CM publishes show osd message to osd Manager and then waits for next message.</li> <li>In case of valid message, CM sends connection details to Connection Launcher process to launch the connection.</li> <li>CM updates its state to CONNECTING.</li> <li>The CM waits until a message is received.</li> </ol>"},{"location":"architecture/Enhanced_OSD/Enhanced_OSD_Software_Design/connection_manager_user_case/#current-cm-state-connecting-state","title":"Current CM State: CONNECTING STATE:","text":"<p>In CONNECTING state, the CM is performing the following operations:</p> <ol> <li>Validate received message. If received message is not valid then CM adds log into syslog file and waits for next message.</li> <li>valid requests in the CONNECTING state are:<ul> <li>Exit code from Launcher process.</li> <li>Connection established notification from client.</li> </ul> </li> <li>Following operations are performed in below valid message scenarios.<ul> <li>Exit code from Launcher process: If connection (client) failed then the CM receives exit status (exit code) of client from Connection Launcher. Then CM perform post termination operation, sends exit code to osd manager and updates CM state to IDLE.</li> <li>Connection established notification from client: CM informs connection status to Boxilla and then updates the CM state to CONNECTED.</li> </ul> </li> <li>The CM waits until a message is received.</li> </ol>"},{"location":"architecture/Enhanced_OSD/Enhanced_OSD_Software_Design/connection_manager_user_case/#current-cm-state-connected-state","title":"Current CM State: CONNECTED STATE","text":"<p>In CONNECTED state, CM is doing following operations</p> <ol> <li>The CM checks connection status and if connection (client) has already terminated abnormally then there is no need to send exit request to client so the CM enters into TERMINATING state directly. And if connection is running then it performs following operations </li> <li>Validate received message. If received message is invalid then CM adds log in syslog file and waits for next message.</li> <li>In case of abnormal termination of connection, CM gets exit code from Launcher then CM perform post termination operation and sends exit code to osd manager. Then CM updates CM state to IDLE and wait for next message. </li> <li>In case of Force logout, CM updates respective data structure.</li> <li>Valid request in CONNECTED state are:<ol> <li>Terminate request from Connection Control/Webservice.</li> <li>Exit Code from connection launcher process. </li> <li>Force Connect from Boxilla.</li> <li>Favourite Connect from Connection Control.</li> <li>Switch to Previous from Connection Control.</li> <li>Force Logout from Boxilla.</li> </ol> </li> <li>In case of valid message CM sends an exit connection request to client.</li> <li>Updates CM state to TERMINATING</li> <li>The CM waits until a message is received.</li> </ol>"},{"location":"architecture/Enhanced_OSD/Enhanced_OSD_Software_Design/connection_manager_user_case/#current-cm-state-terminating-state","title":"Current CM State: TERMINATING STATE","text":"<ol> <li>Validate received message. If received message is not valid then CM adds log into syslog file and waits for next message.</li> <li>Valid request in TERMINATING state:<ul> <li>Exit code from connection launcher process.</li> <li>Force logout.</li> </ul> </li> <li>In case of Force logout, CM updates respective flag in show osd topic\u2019s data structure and then wait for exit code from launcher process.</li> <li>In case of Exit code from connection launcher process, CM Tear down the connection.</li> <li>The CM notify connection status to Boxilla and the OSD Manager.</li> <li>The CM publish show osd message to osd manager. Updates CM state to IDLE. In case of \u201cForce/fav/switch/persistence connection\u201d, the CM sends connection details to connection launcher process to launch new connection and updates CM state to CONNECTING.</li> <li>The CM waits until a message is received.</li> </ol>"},{"location":"architecture/Enhanced_OSD/Enhanced_OSD_Software_Design/design_detail/","title":"Design Detail","text":""},{"location":"architecture/Enhanced_OSD/Enhanced_OSD_Software_Design/design_detail/#main-design-impacts","title":"Main design impacts","text":"<ul> <li>For Emerald appliances the present changes are in the receiver side impact</li> <li> <p>This design enhances the Performance and user experience of Connection Launch, Connection Switching, and Connection termination time (Phase-1) and Instant OSD (Phase-2)</p> </li> <li> <p>There are new data structures such as Connection details (KVM, SECURE_KVM,\u00a0RDP, SSH, VNC, VMWARE), connection status, exit details, Show osd, Hide osd introduced in this design. </p> </li> <li>The Enhanced OSD design replaces the startgui.sh script with Connection Manager (CM) process and OSD Manager (OSD Manager) process. Refer to the Section 8 for the process interaction details and Section 16 for List of Figures</li> <li>The QA team can develop test software to verify this new design for the MQTT TOPIC related functionality (Optional) and other test case needs to validate as similar to the 6.3.10 release.</li> </ul>"},{"location":"architecture/Enhanced_OSD/Enhanced_OSD_Software_Design/enhanced_osd_phase2/","title":"Enhanced OSD Phase 2","text":"<p>Note: Sections in RED need further work/ review with marketing etc.</p> <p>The enhanced OSD development was split into the following Phases:</p> <ul> <li>Phase1: This was to create a state based connection management system that would handle all aspects of connections. Ultimately, the aim was to have a reliable and efficient system for Connections that would be used as the basis of a lot of new features moving forward. In terms of functionality, this Phase would not add any extra functionality/new behaviour to the system. This is detailed the previous sections of this document.</li> <li>Phase2: This was to add in the concept of keeping the OSD alive at all times to allow seamless switching from the OSD to a connection and ultimately back to the OSD</li> </ul>"},{"location":"architecture/Enhanced_OSD/Enhanced_OSD_Software_Design/enhanced_osd_phase2/#what-is-enhanced-osd-phase2","title":"What is enhanced OSD Phase2:","text":"<ul> <li>Phase2 of the Enhanced OSD project adds the ability to leave the OSD running (albeit not being displayed) while any 2k or 4k connection is running</li> <li>Having the OSD running continuously means that when a connection exits, then the OSD can be displayed immediately<ul> <li>It will only be immediate if the OSD resolution matches the connection resolution. If not, there will be a 1 or 2 sec  delay (depends on the monitor) while the monitor locks on to the new resolution \u2013 This is outside our control and is consistent with our competitors products.</li> </ul> </li> <li>Launching a connection with Phase1 and Phase2 combined gives us the ability to continue to display the OSD until the connection has established \u2013 This allows for seamless witching from OSD to connection</li> <li> <p>The core work here is as follows:</p> <ul> <li>Being able to switch to/from the OSD quickly and reliably as connections are launched and terminated</li> <li>Keeping the OSD aware of what is happening in terms of connections, so that it can make behavioural decisions (Prior to this, the OSD never ran at the same time as a connection, so this did not need to be considered) on kbd/mouse, usb devices etc</li> </ul> </li> <li> <p>The OSD_Manager (in conjunction with the Connection_Manager) will decide when we need to HIDE / SHOW the OSD.</p> </li> </ul>"},{"location":"architecture/Enhanced_OSD/Enhanced_OSD_Software_Design/enhanced_osd_phase2/#enhanced-osd-phase2-requirements","title":"Enhanced OSD Phase2 Requirements:","text":"<p>There are 2 core requirements and they are as follows:</p> <ul> <li>The OSD should be displayed immediately on connection termination</li> <li>Launching a connection (from the OSD or over Rest)  requires the OSD to stay displayed (with an indication that a \u2018connection is being setup\u2019) until the connection is Up \u2013 Once the connection is ready, we need to HIDE the OSD and display the connection (should be seamless)</li> </ul>"},{"location":"architecture/Enhanced_OSD/Enhanced_OSD_Software_Design/enhanced_osd_phase2/#enhanced-osd-phase2-displayhide-the-osd","title":"Enhanced OSD Phase2 Display/Hide the OSD","text":"<p>One of the core parts of Phase2 is to be able to display the OSD or Hide the OSD while leaving the OSD (cloudgui) process running. The following details how this will be achieved.</p>"},{"location":"architecture/Enhanced_OSD/Enhanced_OSD_Software_Design/enhanced_osd_phase2/#terminology","title":"Terminology:","text":"<ul> <li>Launching/Relaunching the OSD \u2013 This refers to running the \u2018cloudgui\u2019 binary. It needs to be done on board bootup, due to certain user actions (OSD res change, kbd selection) and also if the \u2018cloudgui\u2019 binary ever crashes.</li> <li>HIDE_OSD \u2013 For the Phase1 design, this term is used to ensure than there is no OSD process running (if there is it will be killed). For Phase2, this means to no longer Display the OSD \u2013 i.e leave the process running, but no longer display it on the monitor attached to Head0. Hide / Hiding are used at different places in this document, but mean the same thing.</li> <li>SHOW_OSD \u2013 For Phase1 design, this term is used to run the launch the OSD \u2013 i.e run the cloudgui process. For Phase2, this term will be used to Display the OSD. Show / Showing are used at different places in this document, but mean the same thing.</li> </ul>"},{"location":"architecture/Enhanced_OSD/Enhanced_OSD_Software_Design/enhanced_osd_phase2/#changes-required-to-buffers-surfaces-etc-to-allow-the-osd-to-co-exist-with-all-connection-types-these-changes-will-be-made-to-the-appropriate-device-trees","title":"Changes Required to Buffers/ Surfaces etc to allow the OSD to co-exist with all connection types (These changes will be made to the appropriate device trees)","text":"<p>The current implementation on both 2K and 4K sees the OSD sharing the same buffer/surface as some of the connection clients. This was implemented in this way due to the fact that the OSD would never be running at the same time as the clients (see the logic in the startgui.sh script \u2013 when the OSD exits, the client runs and vice versa)</p> <p>In this project, the core requirement is that we can run both the OSD and the clients at the same time (to facilitate quicker switching). To be able to facilitate this requirement, we need to ensure that the OSD and the different clients never use the same block of DDR. The new buffers/surfaces will be allocated in the Devicetrees and configured via the DisplayLayer.</p>"},{"location":"architecture/Enhanced_OSD/Enhanced_OSD_Software_Design/enhanced_osd_phase2/#2k-633-release","title":"2K 6.3.3 Release","text":"Address Range Content 0x0 -&gt; 0xA00000 OSD / VM Head 0 0xA00000 -&gt; 0x1400000 VM Head 1 0x1400000 -&gt; 0x1401000 Note 1 0x1401000 -&gt; 0x1413C00 ConnectionLabel"},{"location":"architecture/Enhanced_OSD/Enhanced_OSD_Software_Design/enhanced_osd_phase2/#2k-enhanced-osd-release-planned","title":"2K Enhanced OSD Release (Planned)","text":"Address Range Content 0x0 -&gt; 0xA00000 VM Head 0 0xA00000 -&gt; 0x1400000 VM Head 1 0x1400000 -&gt; 0x1E00000 OSD 0x1E00000 -&gt;0x1E12C00 ConnectionLabel 0x1E12C00 -&gt; Space for more Labels etc as required <p>Note 1: It was discovered in the connectionLabel project that something was using this address range (and overwriting the connectionLabel). The belief (from FPGA team) that this was legacy code and could be removed \u2013 due to the risk and tight timeline for the connectionLabel project, the easiest / less risky approach was to push the OSD label away from this address. From recollection, I didn\u2019t actually need to jump by 0x1000 \u2013 some of this jump was due to alignment issues I hit.</p> Address Range 4K 6.3.3 release 4K Enhanced OSD Release (Planned) 0x76540000-0x786FFFFF FrameBuffer A FrameBufferA 0x78700000-0x7A8BFFFF FrameBuffer B FrameBufferB 0x74380000-0x7653FFFF FrameBuffer C FrameBufferC 0x70004000 Note1 below 0x66543000-0x68702FFF OSD Buffer / VM VM buffer Only 0x7A050000 ConnectionLabel OSD buffer Only 0x7A8C0000-0x7A8D2BFF free ConnectionLabel (see Note2 below) <p>Note 1:- This is referred to in the code, but not used. 0x66543000 is used for both OSD and VM in 6.3.3 release. Need to rationalise this and do required cleanup.</p> <p>Note2:- Still working this out with FPGA team. Would like to have the Label after the OSD (to allow for growth)</p> <p>Note3 : Other work Requires/Issues to be addressed:</p> <ul> <li>As per the Note above, during connectionLabel implementation/testing, it was found that some aspect of the s/w was writing to address offset 0x1400000. The belief is that this can/should be disabled \u2013 This needs to be investigated and resolved in the context of the Enhanced OSD Phase 2 design.</li> <li>Address 0x70004000 is mentioned in the codebase as FrameBufferD \u2013 This needs to clarified / removed as it is not correct.</li> </ul>"},{"location":"architecture/Enhanced_OSD/Enhanced_OSD_Software_Design/enhanced_osd_phase2/#scenarios-that-need-to-be-considered-when-deciding-ifhow-to-display-the-osd","title":"Scenarios that need to be considered when deciding if/how to Display the OSD:","text":"<ul> <li>Board Bootup<ul> <li>On board bootup, the OSD should be run. This needs to be managed by the OSD Manager. The steps to run the OSD are as follows:<ul> <li>Read the OSD Resolution from the DB and setup the framebuffer as required</li> <li>Setup the Display for the required resolution</li> <li>Launch the OSD</li> <li>Setup and turn ON the Overlay to display the OSD (4K only)</li> </ul> </li> </ul> </li> <li>Launching a connection via the OSD.<ul> <li>In this case, the OSD is displayed until the connection is ready. Once the OSD Manager received the \u2018CONNECTED\u2019 message, it HIDEs the OSD. See details in section 16.3.4.2 below. </li> </ul> </li> <li>Launching a connection over Rest. Basically the same as launching a connection from the OSD \u2013 The difference in this case is that an MQTT message is sent to the OSD to inform it that a connection is being launched.</li> <li>Exiting a connection (Hotkey or via Rest)<ul> <li>In this case, the OSD needs to be displayed immediately \u2013 See section: 16.3.4.3 below</li> </ul> </li> <li>Changing the OSD resolution/ changing kbd<ul> <li>This can only happen when the OSD is being displayed (obviously enough \u2026)</li> <li>In this case, the updated resolution is written to the SQL DB and the OSD exits (after publishing an MQTT message). The OSD is then relaunched as per \u2018Board  Bootup\u2019 above.</li> </ul> </li> <li> <p>Handling OSD Resolution of \u2018Auto\u2019</p> <ul> <li> <p>If the OSD resolution is set to \u2018Auto\u2019 then once a connection terminates, the OSD needs to be displayed at the resolution of the connection. This was relatively simple in the 6.3.3 release (and before), as the OSD was reloaded every time a connection exited. In this project (Enhanced OSD), the problem is much more difficult. The following 2 scenarios need to be handled:</p> <ul> <li>If the connection is launched and the connection resolution is different to the OSD resolution, the following will be done:<ul> <li>Once the connection is successful, the display resolution will be checked and compared to the OSD resolution. If they differ, then an MQTT_EXIT_FOR_RES_CHANGE request is sent to the OSD. </li> <li>The OSD in turn will publish an MQTT RESOLUTION_CHANGE request before exiting gracefully</li> <li>The osd_manager will process the Resolution_change request, and launch the OSD with the updated resolution (the OSD will run but not display until the connection terminates)</li> </ul> </li> <li>If the connection is launched and a resolution change happens some time later which results in the OSD resolution being different to the Connection resolution (This scenario can only happen for RX-TX connections), then the client will publish an MQTT_EXIT_FOR_RES_CHANGE message. The OSD will receive it, and the resulting steps will be as above.</li> </ul> </li> <li> <p>In any of the scenarios above, if the OSD resolution of \u2018Auto\u2019 is read from the DB, then the following needs to happen:</p> <ul> <li>The actual Display resolution is read from the display and the following is done:<ul> <li>The value is written to the /etc/directfbrc file (e.g:- mode=800x600)</li> <li>The display is already at the required resolution, so NO change needed.</li> <li>The framebuffer needs to be setup with the new resolution (fbset \u2013fb /dev/fbx \u2013xres xxx \u2013yres yyy)</li> <li>The OSD will need to be terminated and re-loaded to pick up the correct resolution (as mentioned above)</li> </ul> </li> </ul> </li> </ul> </li> <li> <p>Do we reload the OSD when the connection terminates</p> <ul> <li>This would be easier I think, but NOT the option we want, as the OSD won\u2019t be ready when the connection exits..</li> </ul> </li> <li>OSD Login \u2013 Nothing to do, as the OSD does not need to Exit/Reload.</li> <li>Auto-Connect \u2013 Any user can be configured to \u2018auto-connect\u2019 to a particular connection when the user logs in. If the user is set to auto-Login, then on board bootup, the specified user is Logged In and connected to the specified connection (without any user intervention)<ul> <li>Auto-connect will be handled as if a user has launched a connection from the OSD</li> </ul> </li> <li>Cloudgui crashes. \u2013 See Section 15 above.</li> </ul> <p>QUESTIONs:</p> <p>What happens if we are in the process of loading the OSD with a new resolution when the connection exits?</p> <p>Can we deal with a lot of res changes?</p> <p>Questions: Do we relaunch the OSD while the connection is running</p> <p>This is ideally what we should do. It will mean that the OSD running the correct resolution will be ready when we exit a connection</p> <p>What happens if the connection exits while we are still reloading the OSD?</p>"},{"location":"architecture/Enhanced_OSD/Enhanced_OSD_Software_Design/enhanced_osd_phase2/#launchinghidingshowing-the-osd","title":"Launching/Hiding/Showing the OSD:","text":""},{"location":"architecture/Enhanced_OSD/Enhanced_OSD_Software_Design/enhanced_osd_phase2/#launching-the-osd","title":"Launching the OSD","text":"<p>The following steps are used to do the initial launch of the \u2018cloudgui\u2019 process and any subsequent re-launches:</p> <ul> <li>Reads the configured OSD resolution from the DB</li> <li>Does an \u2018fbset\u2019 to set the framebuffer to the correct res (Note: 2K / 4K will be using different frameBuffers).</li> <li>If the Res is set to Auto:<ul> <li>Read the resolution from the Display</li> <li>Call \u2018fbset\u2019 with the  resolution of the display (i.e the resolution that the connection left the display at)</li> </ul> </li> <li>Call display_layer to set the display to the correct resolution</li> <li>Run the \u2018cloudgui\u2019 binary</li> </ul>"},{"location":"architecture/Enhanced_OSD/Enhanced_OSD_Software_Design/enhanced_osd_phase2/#hiding-the-osd","title":"Hiding the OSD","text":"<p>NOTE: The OSD will only be hidden if there is a connection active. Based on this, the following table identifies how hiding the OSD is done in different scenarios:</p> 2K Scenarios Hiding the OSD due to an RX-TX connection Launching In this case, switching from Primary to Secondary surface will hide the OSD and display the connection. Hiding the OSD due to a VM connection Launching In this case, selecting the Primary surface for the VM connection (as opposed to the OSD Primary surface) will hide the OSD. This is done writing the frame buffer address of the VM Primary surface to register: 0x800c8330 4K Scenarios Any type of connection - If the h/w Overlay is enabled and points to the base address of the OSD framebuffer: The OSD will be hidden in this case by disabling the H/W Overlay."},{"location":"architecture/Enhanced_OSD/Enhanced_OSD_Software_Design/enhanced_osd_phase2/#showing-the-osd","title":"Showing the OSD","text":"2K Scenarios 2K RX-TX connection In this case, the secondary to primary switch functionality is used (The rx-tx connection uses the secondary surface and the OSD uses a primary surface). Currently done via: display_layer_cli \u2013primary 1280 1024 (for example) 2K RDP VM connection In this case, switching to the OSD is done by selecting a different Primary surface (The OSD Primary surface). This is done writing the frame buffer address of the OSD  to the following register: 0x800c8330 4K Scenarios Any connection Type Showing the OSD is done by setting up the h/w Overlay to point to the OSD framebuffer and then enabling the h/w Overlay (details below)"},{"location":"architecture/Enhanced_OSD/Enhanced_OSD_Software_Design/enhanced_osd_phase2/#details-on-displayinghiding-the-osd-for-4k-receiver","title":"Details on Displaying/Hiding  the OSD for 4K Receiver.","text":"<ul> <li>A new framebuffer will be  created specifically for the OSD (FB2). This is to ensure that the OSD can run at the same time as any of the clients.</li> <li>The HW Overlay is the mechanism to be used for displaying the OSD on a 4K RX. The principle will be the same as for the connectionLabel. When a connection is running, the H/W Overlay will (if it is enabled) be displaying the connectionLabel \u2013 when the connection exits, the H/W Overlay will switch to displaying the OSD</li> <li>The register set for  the H/W Overlay is  as follows:<ul> <li>HW_OSD_SCALE_FACTOR_REG_OFFSET - 1300<ul> <li>The bottom 2 bits of this register are used to scale the overlay (The rest are unused) . This allows us to scale the overlay so that it is visible at high resolutions.</li> </ul> </li> <li>HW_OSD_ENABLE_REG_OFFSET - 1304<ul> <li>The bottom bit is the enable/disable bit (The rest are unused). To Enable the overlay, the bottom bit is set to 1</li> </ul> </li> <li>HW_OSD_FLUSH_REG_OFFSET - 1308<ul> <li>This is a placeholder register (I.e. functionality not currently supported), so the contents are set to 0</li> </ul> </li> <li>HW_OSD_READ_BURST_SIZE_REG_OFFSET - 1314<ul> <li>As per the AFS, this should be left at the default value of 0x10</li> </ul> </li> <li>HW_OSD_READ_BURST_PER_FRAME_REG_OFFSET - 1318<ul> <li>This value can be calculated using the following formula: - (width * height *4) /256. In our case (label fixed at 480x40), this equates to: 0x12C</li> </ul> </li> <li>HW_OSD_BASE_ADDRESS_REG_OFFSET - 131C</li> <li>HW_OSD_TEST_MODE_REG_OFFSET - 1320<ul> <li>This is for hardware test, so we set it to 0</li> </ul> </li> <li>HW_OSD_X_OFFSET_REG_OFFSET - 1324</li> <li>HW_OSD_Y_OFFSET_REG_OFFSET - 1328<ul> <li>The X and Y offset registers are the starting coordinates where the label gets displayed. This is calculated using the following inputs:</li> <li>The selected position of the label (top/bottom centre/right)</li> <li>The resolution of the display</li> <li>The size of the label (480x40 in this case)</li> </ul> </li> <li>HW_OSD_WIDTH_REG_OFFSET - 132C</li> <li>HW_OSD_HEIGHT_REG_OFFSET - 1330</li> <li>HW_OSD_BACKGROUND_FILL_REG_OFFSET - 1334<ul> <li>This allows us to fill the rest of the screen (outside the label overlay) with black. We want to leave the background as it is, so we set this value to 0x0</li> </ul> </li> </ul> </li> </ul>"},{"location":"architecture/Enhanced_OSD/Enhanced_OSD_Software_Design/enhanced_osd_phase2/#proposed-algorithm","title":"Proposed Algorithm:","text":"<p>The mechanism being used is the Overlay mechanism. This allows us to overlay any size image on top of the existing display. The overlay image can be positioned anywhere and can be scaled as required. The ability to blacken the rest of the display also exists and will be used as required. Using the Overlay mechanism means that the Display can be left at the connection resolution and the OSD will overlay on top \u2013 The ability to scale the overlay will help to provide a OSD than is easy to read.</p> <ul> <li> <p>Overlay Scaling (Reg 1300): This will only be used when the OSD resolution is set to \u2018Auto\u2019 In this case, the requirement is that the OSD needs to Display at the same resolution as the connection. If the 4K RX-TX connections resolution is greater than 1920, then the scaling factor will be set as follows:</p> <ul> <li>For widths of 1920 or less, we set the value to 0x00 for No scaling.</li> <li>For widths between 1920 and 3840, we set the value to 1, which scales the overlay by a factor of 2 (i.e. doubles the size)</li> <li>For widths over 3840, we set the value to 2, which scales the overlay by a factor of 3 (i.e. triples the size)</li> <li>Overlay Base Address (Reg: 131C)</li> <li>This register is configured with the address of the Label \u2013 In our case, this is the address of the framebuffer(fb1) that the label is written into \u2013 The value is: 0x7A050000</li> <li>Overlay  Positioning (Regs: 1324, 1328)</li> <li>These registers will be setup based on: 1) The display resolution and 2) the OSD resolution. The aim will be to display the OSD att he centre of the screen. </li> <li>Overlay Width/Height (Regs: 132C, 1334</li> <li>These registers will be programmed with the width and height of the OSD</li> </ul> </li> </ul> <p>Hiding the OSD can be done by either turning Off the Overlay or pointing the Overlay to something else (e.g the connectionLabel)</p> <p>TBD :-   Handling different OSD resolutions (+ Auto option) needs to be considered in the context of  using the H/W overlay. I\u2019m not sure that taking the existing behaviour (as in the following 2 points) and bringing it forward is the best thing to do. This will need to be discussed further\u2026.</p> <ol> <li>If the OSD is set to Auto, then the requirement is that we overlay the OSD on a display size of the connection. The scaling will be used to present a useable OSD.</li> <li>If the OSD is set to a specific Resolution, then before switching to the OSD, we need to set the display to the OSD resolution and then overlay the OSD on top.</li> </ol>"},{"location":"architecture/Enhanced_OSD/Enhanced_OSD_Software_Design/enhanced_osd_phase2/#details-on-displayinghiding-the-osd-for-2k-receiver","title":"Details on Displaying/Hiding  the OSD for 2K Receiver.","text":"<ul> <li>A new Primary surface will be added for the OSD on 2K  (New FrameBuffer) \u2013 This is to ensure that it can run at the same time as a 2K VM connection</li> <li>Switching to displaying the OSD (from displaying the connection) depends on the type of connection:<ul> <li>2K RX-TX connection<ul> <li>In this case, the secondary to primary switch functionality is used (The rx-tx connection uses the secondary surface and the OSD uses a primary surface)</li> </ul> </li> <li>2K RDP VM connection<ul> <li>In this case,  switching to the OSD is done by selecting a different Primary surface (The OSD Primary surface). This is done writing the frame buffer (either the VM or OSD) to the following register: 0x800c8330</li> </ul> </li> </ul> </li> <li>Switching from  displaying the OSD to displaying the  connection will be done as follows:<ul> <li>2K RX-TX connection:- In this case the switch will be done by switching from Primary to Secondary mode</li> <li>2K RDP VM connection:- In this case, the switch will be done by selecting the Primary surface for the VM connection</li> </ul> </li> </ul>"},{"location":"architecture/Enhanced_OSD/Enhanced_OSD_Software_Design/enhanced_osd_phase2/#proposed-algorithm_1","title":"Proposed Algorithm","text":"<p>Displaying the OSD required that 1) Primary mode is configured and 2) That the OSD Primary surface is selected (rather than the VM primary surface).  </p> <ul> <li>Switching between secondary and primary modes has already been implemented in the display_layer CLI, so the sequence of register writes already exists for this \u2013 The plan is to use this functionality (Not the CLI) to switch between secondary and primary modes.</li> <li>Switching from displaying one Primary surface to another (as in the case where we are going from displaying a VM connection to displaying the OSD and vice versa) can be done by a single register write (Register: 0x800c8330) \u2013 The value written to this register is the base address of the primary surface to be displayed.</li> </ul>"},{"location":"architecture/Enhanced_OSD/Enhanced_OSD_Software_Design/enhanced_osd_phase2/#enhanced-osd-phase-2-cloudgui-design","title":"Enhanced OSD Phase 2 cloudgui design","text":""},{"location":"architecture/Enhanced_OSD/Enhanced_OSD_Software_Design/enhanced_osd_phase2/#in-phase-2-following-aspects-was-taken-into-consideration","title":"In phase 2 following aspects was taken into consideration:","text":"<ul> <li>Connection launching process;</li> <li>In connecting state we want to block user from accessing the USB functionality and this remains until the connection is terminated. This prevents someone inadvertently sending events to the OSD when it is in the background. User access to USB related functionality needs to be blocked when connection initialization started, but not completed for managed, unmanaged devices and based on user privilege.</li> <li>When the connection is running the user should not be able to send USB events to the OSD. All keyboard and mouse events to be blocked when connection is running.</li> <li>In terminating state we want to block user from accessing the USB functionality and this remains until the connection is terminated. This prevents someone inadvertently sending events to the OSD when it is in the background. User access to USB related functionality needs to be blocked when connection termination started, but not completed for managed, unmanaged devices and based on user privilege.</li> <li>Allow user access to OSD when connection completed and OSD is visible for managed, unmanaged devices and based on user privilege.</li> <li>Auto login with auto connect option.</li> <li>OSD inactivity timer. If we disable the keyboard and mouse then there is a danger we will invoke these timeouts so this must be disabled when connection is running and cloudgui stay in the background.</li> <li>Last connection name selection in the list when user returns from connection. Not an issue if the OSD stays active, but if there is a crash then we will need to recover and save this file  (see below: Decision required).</li> <li>MQTT msg processing when OSD is running long lasting processes (concurrent processing) which we don\u2019t want to interrupt (such as upgrade, diagnostics, etc). If current user is running a process like diagnostics (which takes time)  we don\u2019t want to interrupt this process because of any of the forced events like login, logout or connect.</li> </ul>"},{"location":"architecture/Enhanced_OSD/Enhanced_OSD_Software_Design/enhanced_osd_phase2/#decision-required","title":"Decision required:","text":"<p>What will be the process in the unlikely event of OSD failure when connection is in progress (CM states are Connecting, Connected or Terminating). OSD will require to launch and set currently running connection name in the list (using of /tmp/WAS_CONNECTED file). OSD as well need to limit user access obtaining the state of CM \u2013 how to achieve this. </p> <p>Solutions might include: </p> <ul> <li>Add CM current state to /tmp/WAS_CONNECTED file;</li> <li>Pass CM current state as an arg when cloudgui relaunched;</li> <li>Request CM current state as MQTT msg when cloudgui relaunched;</li> </ul>"},{"location":"architecture/Enhanced_OSD/Enhanced_OSD_Software_Design/enhanced_osd_phase2/#osd-required-mqtt-topics","title":"OSD required MQTT Topics","text":"<p>The table shows existing and new mqtt messages.</p> <p>Figure 1MQTT Required Topics Table: </p>"},{"location":"architecture/Enhanced_OSD/Enhanced_OSD_Software_Design/enhanced_osd_phase2/#cloudgui-mqtt-topics","title":"Cloudgui MQTT topics","text":"TOPIC Parameter type Paramerer description Subscriber Publisher Action Exist in phase 1 CM_STATE_CHANGED_TOPIC json int State value Cloudgui Connection Manager CM publish the Idle state when the state is about to enter No CM_LOGOUT_RQ_TOPIC Cloudgui Connection Manager CM publish the Logout request when Force logout requested from REST Api No CM_LOGIN_RQ_TOPIC json_string_value text Cloudgui Connection Manager CM publish the Login request providing user name when Force login requested from REST Api No SET_DISCONNECT_ERROR_TOPIC json_string_value text Cloudgui OSD Manager OSD Manager publish the error details on disconnection if connection terminated due to error. No MAKE_OSD_CONNECTION_TOPIC json structure variables Connection Manager Cloudgui Cloudgui publish connection details to CM when user hit connect button on OSD screen to the launch connection. Yes OSD_RESOLUTION_CHANGE_TOPIC OSD Manager Cloudgui Cloudgui publish relaunch OSD window to OSD Manager upon resolution change by user. Yes OSD_LANGUAGE_CHANGE_TOPIC OSD Manager Cloudgui Cloudgui publish relaunch OSD window to OSD Manager upon language change by user. No OSD_CONTROLLRD_EXIT_TOPIC To be defined Cloudgui ??? publish request to exit OSD to cloudgui when connection resolution is different from OSD resolution and OSD resolution is configured as \u201cAuto\u201d. No LAUNCH_CONNECTION_TOPIC json structure variables Cloudgui Connection Manager CM publish Encoder details to connection launcher when make connection initiated from OSD or Boxilla. Yes CLOUDGUI_CONNECTION_LAUNCH_TEST_TOPIC Cloudgui Test environment No"},{"location":"architecture/Enhanced_OSD/Enhanced_OSD_Software_Design/enhanced_osd_phase2/#cloudgui-and-external-interfaces-communication","title":"Cloudgui and external interfaces communication","text":"<p>According to requirements of this feature Cloudgui will need to provide mechanism to receive and publish MQTT messages from different external interfaces.  Following diagram is describing cloudgui incoming and outgoing MQTT messages.</p> <p></p>"},{"location":"architecture/Enhanced_OSD/Enhanced_OSD_Software_Design/enhanced_osd_phase2/#connection-manager-changes-required","title":"Connection Manager changes required","text":"<p>This section highlights the additional messages required to support a concurrent OSD. Additional messages are sent to and from the OSD.</p> <p>Current CM state: Idle of document Enhanced OSD detailed Design v0.7 will require changes (changes highlighted in orange colour).</p> <p>In IDLE state, the CM is performing the following operations:</p> <ol> <li>Validate received message. If received message is not valid then CM  adds error log into syslog file and wait for next message.</li> <li>valid requests in the IDLE state are:<ul> <li>Force Connect from Boxilla</li> <li>Make Connect from Boxilla</li> <li>Connect from OSD</li> <li>Favourite switch (hotkey)</li> <li>Force Logout from Boxilla.</li> <li>Force Login from Boxilla.</li> </ul> </li> <li>In force logout case, the CM publishes CM_LOGOUT_RQ_TOPIC message to cloudgui and then waits for next message.</li> <li>In force logout case, the CM publishes CM_LOGIN_RQ_TOPIC message providing user name to be logged in to cloudgui and then waits for next message.</li> <li>In case of valid message, CM sends connection details to Connection Launcher process to launch the connection.</li> <li>CM publishes SET_CONNECTING _STATE_TOPIC message to cloudgui</li> <li>CM updates its state to CONNECTING.</li> <li>The CM waits until a message is received.</li> </ol> <p>Current CM state: CONNECTING STATE of document Enhanced_OSD detailed Design v0.7 will require changes (changes highlighted in orange colour).</p> <p>In CONNECTING state, the CM is performing the following operations:</p> <ol> <li>Validate received message. If received message is not valid then CM adds log into syslog file and waits for next message.</li> <li>valid requests in the CONNECTING state are:<ul> <li>Exit code from Launcher process.</li> <li>Connection established notification from client.</li> </ul> </li> <li>Following operations are performed in below valid message scenarios.<ul> <li>Exit code from Launcher process: If connection (client) failed then the CM receives exit status (exit code) of client from Connection Launcher. Then CM perform post termination operation, sends exit code to osd manager, SET_IDLE_STATE_TOPIC message to cloudgui and updates CM state to IDLE.</li> <li>Connection established notification from client: CM informs connection status to Boxilla, sends exit code to osd manager, SET_CONNECTED_STATE_TOPIC message to cloudgui and then updates the CM state to CONNECTED.</li> </ul> </li> <li>The CM waits until a message is received.</li> </ol> <p>Current CM state: CONNECTED STATE of document Enhanced OSD detailed Design v0.7 will require changes (changes highlighted in orange colour).</p> <p>In CONNECTED state, CM is doing following operations:</p> <ol> <li>The CM checks connection status and if connection (client) has already terminated abnormally then there is no need to send exit request to client so the CM publishes SET_DISCONNECTING _STATE_TOPIC message to cloudgui and enters into TERMINATING state directly. And if connection is running then it performs following operations </li> <li>Validate received message. If received message is invalid then CM adds log in syslog file and waits for next message.</li> <li>In case of abnormal termination of connection, CM gets exit code from Launcher then CM perform post termination operation and sends exit code to osd manager. Then CM publishes SET_IDLE _STATE_TOPIC message to cloudgui and updates CM state to IDLE and wait for next message. </li> <li>In case of Force logout, CM updates respective data structure.</li> <li>Valid request in CONNECTED state are:<ol> <li>Terminate request from Connection Control/Webservice.</li> <li>Exit Code from connection launcher process. </li> <li>Force Connect from Boxilla.</li> <li>Favourite Connect from Connection Control.</li> <li>Switch to Previous from Connection Control.</li> <li>Force Logout from Boxilla.</li> <li>Force Login from Boxilla.</li> </ol> </li> <li>In case of valid message CM sends an exit connection request to client.</li> <li>In force logout case, the CM publishes CM_LOGOUT_RQ_TOPIC message to cloudgui and then waits for next message.</li> <li>In force login case, the CM publishes CM_LOGIN_RQ_TOPIC message providing user name to be logged in to cloudgui and then waits for next message.</li> <li>CM publishes SET_DISCONNECTING _STATE_TOPIC message to cloudgui</li> <li>Updates CM state to TERMINATING</li> <li>The CM waits until a message is received.</li> </ol> <p>Current CM state: TERMINATING STATE of document Enhanced OSD detailed Design v0.7 will require changes (changes highlighted in orange colour).</p> <ol> <li>Validate received message. If received message is not valid then CM adds log into syslog file and waits for next message.</li> <li>Valid request in TERMINATING state:<ul> <li>Exit code from connection launcher process.</li> <li>Force logout.</li> </ul> </li> <li>In case of Force logout, CM updates respective flag in show osd topic\u2019s data structure and then wait for exit code from launcher process. CM publishes CM_LOGOUT_RQ_TOPIC message to cloudgui and then wait for exit code from launcher process.</li> <li>In case of Force logout, CM updates respective flag in show osd topic\u2019s data structure and then wait for exit code from launcher process. CM publishes CM_LOGIN_RQ_TOPIC providing user name to be logged in message to cloudgui and then wait for exit code from launcher process.</li> <li>In case of Exit code from connection launcher process, CM Tear down the connection.</li> <li>The CM notify connection status to Boxilla and the OSD Manager.</li> <li>The CM publish show osd message to osd manager.  CM publishes SET_IDLE _STATE_TOPIC message to cloudgui. Updates CM state to IDLE. In case of \u201cForce/fav/switch/persistence connection\u201d, the CM publishes SET_CONNECTING _STATE_TOPIC message to cloudgui sends connection details to connection launcher process to launch new connection and updates CM state to CONNECTING.</li> <li>The CM waits until a message is received.</li> </ol>"},{"location":"architecture/Enhanced_OSD/Enhanced_OSD_Software_Design/enhanced_osd_phase2/#osd-manager-changes-required","title":"OSD Manager changes required","text":"<p>This section highlights the additional changes required to support a concurrent OSD (changes highlighted in orange colour).</p> <p>Remove Force login/ force logout MQTT messages processing from OSD manager. In phase 2 CM_LOGIN_RQ_TOPIC and CM_LOGOUT_RQ_TOPIC will be processed in cloudgui.</p> <p>Exit message will require changes. In case of abnormal connection termination, Connection Manager publish exit code to OSD Manager on mqtt OSD_SHOW_TOPIC. OSD manager get the exit message using exit code from bbox_error_strings module. OSD Manager update osd state to SHOW_OSD. The exit message displayed by publishing error text SET_DISCONNECT_ERROR_TOPIC to cloudgui on mqtt and it blocks OSD Manager in the SHOW_OSD switch case of the main loop of the OSD Manager.</p>"},{"location":"architecture/Enhanced_OSD/Enhanced_OSD_Software_Design/enhanced_osd_phase2/#cloudgui-changes-required","title":"Cloudgui changes required","text":"<p>In order to provide communication mechanism to receive and publish MQTT messages new MQTT_Communicator class (name to be agreed) implementation is required within cloudgui application. In order to provide constantly running non-blocking process for listening of incoming MQTT messages MQTT_Communicator class will be subthreaded from other cloudgui classes and run constantly while cloudgui is executed. Following diagram is showing communication required between cloudgui classes (external MQTT messages simplified).</p> <p></p>"},{"location":"architecture/Enhanced_OSD/Enhanced_OSD_Software_Design/enhanced_osd_phase2/#mqtt_communicator-class","title":"MQTT_Communicator Class","text":"<p>MQTT_Communicator class is responsible for receiving and interpreting incoming MQTT messages and performing relevant functional calls which will be implemented within existing cloudgui classes. This class also will provide centralized platform to format and publish MQTT messages. </p> <p>To handle incoming messages a separate thread will run asynchronously, and incoming mqtt message process is blocking. Outgoing messages will be sent asynchronously within main cloudgui thread so that any transmit failure is immediate.</p> <p></p>"},{"location":"architecture/Enhanced_OSD/Enhanced_OSD_Software_Design/enhanced_osd_phase2/#calls-to-mainwindow-class","title":"Calls to mainwindow class:","text":"<pre><code>Set_normal_operation;\nPrepare_to_hide;\nSet_hidden;\nPrepare_to show;\nLogout;\nLogin(text);\nShow_error(text);\nSetLastConnectionName(text);\nrunConnection(text);\n</code></pre> <p>The calls mentioned above will be defined in cloudgui mainwindow class (functionality described in relevant section).</p>"},{"location":"architecture/Enhanced_OSD/Enhanced_OSD_Software_Design/enhanced_osd_phase2/#functionality-to-be-added-in-mainwindow-class-to-perform-mqtt_publish","title":"Functionality to be added in Mainwindow class to perform mqtt_publish:","text":"<p>Connect_rq(param) \u2013 Function to receive connection arguments and create MQTT formatted msg (currently implemented within libsystem/system_connections.c;</p> <p>Resolution_change_rq() - Function to receive resolution change arguments and create MQTT formatted msg;</p> <p>Language_change_rq()- Function to receive language change and create MQTT formatted msg;</p> <p>Get_current_cm_state- Function to receive CM state on cloudgui load and create MQTT formatted msg;</p> <p>Publish_msg(param) \u2013 Function to provide centralized access for putting messages into the msg q;</p>"},{"location":"architecture/Enhanced_OSD/Enhanced_OSD_Software_Design/enhanced_osd_phase2/#cloudgui-mainwindow-class-changes-required","title":"Cloudgui mainwindow class changes required","text":"<p>To provide constantly running non-blocking process for listening of incoming MQTT messages MQTT_Communicator class will be subthreaded from other cloudgui classes and run constantly while cloudgui is executed. Therefore MQTT_Communicator class need to be initialized and threaded within mainwindow class initialization. Prototype is required. Figure 7 below is showing MQTT_Communicator class simplified threading.</p> <p></p>"},{"location":"architecture/Enhanced_OSD/Enhanced_OSD_Software_Design/enhanced_osd_phase2/#functionality-to-be-added-in-mainwindow-class","title":"Functionality to be added in mainwindow class:","text":"<ul> <li>Set_normal_operation<ul> <li>If progress msg is displayed stop and close progress msg. Appropriate functionality to be created.</li> <li>Enable Keyboard and Mouse events. Event filtering is already existing in cloudgui. No major work required. To enable Keyboard and Mouse events relevant function (KandM_acceptRqSlot()) should be called</li> <li>If  OSD inactivity timer is enabled Restart OSD inactivity timer. Functionality already exist in cloudgui. No major work required. To start OSD inactivity timer relevant function (startActivityChecks()) should be called.</li> <li>Based on user and managed status enable all relevant buttons. Following buttons should be enabled (might not be required as progress message box will block access to OSD).</li> </ul> </li> </ul>"},{"location":"architecture/Enhanced_OSD/Enhanced_OSD_Software_Design/enhanced_osd_phase2/#unmanaged","title":"Unmanaged","text":"Priviledge/Functionality Administrator Power User User Upgrade Yes No No TX Device Yes No No Diagnostics Yes No No Settings Export Yes No No Settings Import Yes No No"},{"location":"architecture/Enhanced_OSD/Enhanced_OSD_Software_Design/enhanced_osd_phase2/#managed","title":"Managed","text":"Priviledge/Functionality Administrator Power User User Upgrade No No No TX Device No No No Diagnostics Yes No No Settings Export No No No Settings Import No No No <ul> <li>Prepare_to_hide<ul> <li>Show progress msg indicating connection in progress. The progress message box need to be created. The text of message to be set \u201cConnection launching. Please wait\u2026\u201d. The message box should be inaccessible by user (user should not be allowed to close this message). The progress message box will be closed by using code within appropriate functionality.</li> <li>Disable buttons which include USB memory related functionality. Following buttons should be disabled (might not be required as progress message box will block access to OSD).</li> </ul> </li> </ul>"},{"location":"architecture/Enhanced_OSD/Enhanced_OSD_Software_Design/enhanced_osd_phase2/#unmanaged_1","title":"Unmanaged","text":"Priviledge/Functionality Administrator Power User User Upgrade Yes No No TX Device Yes No No Diagnostics Yes No No Settings Export Yes No No Settings Import Yes No No"},{"location":"architecture/Enhanced_OSD/Enhanced_OSD_Software_Design/enhanced_osd_phase2/#managed_1","title":"Managed","text":"Priviledge/Functionality Administrator Power User User Upgrade No No No TX Device No No No Diagnostics Yes No No Settings Import No No No Settings Export No No No <ul> <li> <p>Set_hidden</p> <ul> <li>Disable Keyboard and Mouse events. Event filtering already exist in cloudgui. No major work required. To disable K&amp;M events relevant function (KandM_ignoreRqSlot()) should be called. NOTE: Function stopActivityChecks() is currently used within KandM_ignoreRqSlot(). </li> <li>If  OSD inactivity timer is enabled Stop OSD inactivity timer. Functionality already exist in cloudgui. No major work required. To stop OSD inactivity timer relevant function (stopActivityChecks()) should be called. NOTE: Function stopActivityChecks() is currently used within KandM_ignoreRqSlot()</li> <li>If progress msg is displayed stop and close progress msg. Appropriate functionality to be created.</li> </ul> </li> <li> <p>Prepare_to_show</p> <ul> <li>Set selected last connection name in ListWidget. Functionality already exist in cloudgui. Functionality will be required only in the unlikely event of OSD failure when connection is in progress (CM states are Connecting, Connected or Terminating). This question is marked for discussion earlier in this document.</li> <li>If progress msg is displayed stop and close progress msg. Appropriate functionality to be created.</li> </ul> </li> <li> <p>Show_error</p> <ul> <li>Display error text received to user. Functionality already exist in cloudgui. Relevant call adjustment is required.</li> </ul> </li> <li> <p>Logout</p> <ul> <li>Logout current user and display Login dialog. Functionality already exist in cloudgui. Relevant call adjustment is required. Relevant only for managed device.</li> </ul> </li> <li> <p>Login(text)</p> <ul> <li>Logout current user and login user specified. Similar functionality already exist in cloudgui (autologin and return after connection \u2013 Login dialog bypass and user login, but it is completed on cloudgui load). Relevant call creation, adjustment and modifications required. Relevant only for managed device.</li> </ul> </li> </ul>"},{"location":"architecture/Enhanced_OSD/Enhanced_OSD_Software_Design/introduction/","title":"Introduction","text":""},{"location":"architecture/Enhanced_OSD/Enhanced_OSD_Software_Design/introduction/#master-document-revision-history","title":"Master Document Revision History","text":"Date Version Description Author/Editor Dec 03, 2021 0.1 First Draft Hrishikesh Jadhav, Kesavardhana Gandla, Yashavanth Bhojegowda Dec 07, 2021 0.2   Initial review comments from Mr.Eamon Hayden : <ul> <li>It would be good to list ALL the use cases that the design implements (at the top)</li> <li> It would be good to have a Top level flowchart of CM / OSD Manager (as well as the more detailed ones) \u2013 something that fits on a single page ideally.</li> <li> Need a list of all the rest api calls</li> <li> Is terminate_no_osd rest call missing? (needed for Boxilla Presets)</li> <li> It would be good to list All the Messages being sent to Boxilla over rest in a separate section.</li> </ul> Kesavardhana Gandla  Dec 21,2021 0.3  Addressed core comments given by john and Eamon <ul> <li> Non-blocking connection manager</li> <li> Handling of any type of client crash</li> <li> 4 state machines in CM</li> <ol> <li> CONNECTING</li> <li> CONNECTED</li> <li> TERMINATING</li> <li> TERMINATED</li> </ol> <li>All request should come to CM</li> Hrishikesh Jadhav Jan 05,2022 0.4 <ul> <li> Removed low level details</li> <li> Added table for MQTT topic</li> <li> 3. Explained preset switch case</li> </ul> Hrishikesh Jadhav Jan 11,2022 0.5  Updated the below sections as per John and Eamon review comments on v0.4 <ul> <li>Process view</li> <li>MQTT Topics</li> <li>CM flow chart</li> <li>CM state machine</li> </ul> Hrishikesh Jadhav, Yashavanth Bhojegowda Jan 17, 2022 0.6 Updated  Connection Manger and OSD Manager Flow charts and Connection use cases Hrishikesh Jadhav, Kesavardhana Gandla, Yashavanth Bhojegowda Jan 21, 20220.7  Addressed comments given by John, Eamon and Olga. Add Webservice section, explained forcelogout, updated OSD Manager  Added Mqtt message flow Updated  Connection Manger and OSD Manager as per the 0.6 Design review comments Hrishikesh Jadhav, Yashavanth Bhojegowda Jan 27, 20220.8  OSD Manager updated to use Cloudgui as background process. Addressed comments given by Eamon on CM Hrishikesh Jadhav, Yashavanth Bhojegowda Jan 28, 2022 0.9 Updated OSD Manager state machines Yashavanth Bhojegowda Feb 02 2022 1.0  Added below section in CM and OSD manage <ul> <li>Force login Handle case from REST API.</li> <li>OSD Language change.</li> <li>Added new Mqtt OSD_LANGUAGE_CHANGE_TOPIC, FORCE_LOGIN_TOPIC</li> </ul> Yashavanth Bhojegowda Feb 09 2022 1.1  Added section Phase 2  Added section cloudgui design Olga Birkvalde Feb 11 2022 1.2 Added Overall Phase2 design + specifics on switching in/out the OSD at will Eamon Hayden Feb 14 2022 1.3  Signal  OSD_CONTROLLRD_EXIT_TOPIC added to table   Addition in section for cloudgui design about threading  Olga Birkvalde Feb 18 2022 1.4 Updated with comments received on Phase2 design Eamon / Olga July 01 2022 1.5 Addition in section for cloudgui design added MQTT_topics LAUNCH_CONNECTION_TOPIC and CLOUDGUI_CONNECTION_LAUNCH_TEST_TOPIC Olga Birkvalde"},{"location":"architecture/Enhanced_OSD/Enhanced_OSD_Software_Design/introduction/#terms-and-definitions-used-in-blackbox","title":"Terms and Definitions used in Blackbox","text":"Term Definition CLU Image An optimized encrypted file format used for 2K appliance software images. Decoder See Receiver Encoder See Transmitter FIT Image An optimized encrypted file format used for 4K appliance software images. Receiver A Blackbox appliance that receives and displays a video stream. A receiver is also referred to as a client or decoder. Transmitter A Blackbox appliance that captures and transmits a video from a source. A transmitter is also referred to as a server or encoder. Video Source A source of input for a Transmitter, normally the DVI or Display Port output of a PC. MQTT MQTT (Message Telemetry Transport) is a lightweight open messaging protocol that provides resource-constrained network clients with a simple way to distribute\u00a0telemetry\u00a0information in low-bandwidth environments. The protocol, which employs a publish/subscribe communication pattern, is used for machine-to-machine (M2M) communication. IoT Internet of Things CM Connection Manager OSD On screen display CC Connection Control KPIs Key Performance Indicators T.B.D To be done"},{"location":"architecture/Enhanced_OSD/Enhanced_OSD_Software_Design/introduction/#list-of-tables","title":"List of Tables","text":"<p>Usage of the current 10 Temporary files(scope of enhanced OSD project) by different modules in the Decoder Software.</p>"},{"location":"architecture/Enhanced_OSD/Enhanced_OSD_Software_Design/introduction/#references","title":"References","text":"<ul> <li>concurrent_osd_hld  High Level Design Document</li> <li>enhanced_osd_temp_files_V1.2</li> <li>https://bboxjira.atlassian.net/browse/KVMAPP-1</li> <li>/develop/Applications/Common/MQTTTest/ MQTT test codes</li> <li>KVM bonded connection Feature Design : ENG-0008-037.docx</li> <li>https://limerick.blackbox.com/Engineering/_layouts/15/start.aspx#/Lists/DocControlNum</li> </ul>"},{"location":"architecture/Enhanced_OSD/Enhanced_OSD_Software_Design/introduction/#terms-and-definitions-used-in-black-box","title":"Terms and Definitions used in Black Box","text":"Term Definition CLU Image An optimized encrypted file format used for 2K appliance software images. Decoder See Receiver Encoder See Transmitter FIT Image An optimized encrypted file format used for 4K appliance software images. Receiver A Blackbox appliance that receives and displays a video stream. A receiver is also referred to as a client or decoder. Transmitter A Blackbox appliance that captures and transmits a video from a source. A transmitter is also referred to as a server or encoder. Video Source A source of input for a Transmitter, normally the DVI or Display Port output of a PC. MQTT MQTT (Message Queue Telemetry Transport) is a lightweight open messaging protocol that provides resource-constrained network clients with a simple way to distribute\u00a0telemetry\u00a0information in low-bandwidth environments. The protocol, which employs a publish/subscribe communication pattern, is used for machine-to-machine (M2M) communication. IoT Internet of Things CM Connection Manager OSD On screen display CC Connection Control KPIs Key Performance Indicators T.B.D To be done"},{"location":"architecture/Enhanced_OSD/Enhanced_OSD_Software_Design/osd_manager/","title":"OSD Manager","text":"<p>OSD Manager is standalone process which can launch the Cloudgui and terminate Cloudgui process as per the incoming message request from Connection Manager and Cloudgui (On OSD resolution change). </p> <p>Why OSD Manager: </p> <p>Requirements to have dedicated process to launch Cloudgui process:</p> <ol> <li>On Forcelogout Cloudgui been killed and needs relaunch Cloudgui. </li> <li>On OSD resolution change Cloudgui been terminated and needs to relaunch with new resolution.</li> </ol> <p>To handle the above requirements a separate process must launch and kill Cloudgui. </p> <p>On running Cloudgui as a background process there was an issue, \u201cdisplay subsystem hangs on relaunching Cloudgui with new resolution\u201d, this issue has been resolved in the current design with the below solution approach.</p> <p>Solution Approach:  Running Cloudgui as background process and \u201cConfirm Cloudgui being terminated and then relaunch Cloudgui on resolution change\u201d e.g. while( is process running(Cloudgui_PID)) { sleep of 100 ms; check total wait time handle exception case if Cloudgui not terminated for more than 3 seconds;}</p> <p>Future Design enhancement: The OSD Manager functionality can be triggered from Connection Manager Process by converting the OSD Manager process as a C function calls.</p> <p>State machines in OSD Manager are:</p> <ul> <li>Hide OSD State</li> <li>Show OSD State</li> </ul>"},{"location":"architecture/Enhanced_OSD/Enhanced_OSD_Software_Design/osd_manager/#osd-manager-use-cases","title":"OSD Manager Use cases","text":""},{"location":"architecture/Enhanced_OSD/Enhanced_OSD_Software_Design/osd_manager/#osd-window-launch","title":"OSD Window Launch","text":"<p>OSD manager initializes the Mosquitto library, subscribes the necessary mqtt topics (8.1.1) to receive messages on Mosquitto call-back published by Connection Manager to hide/show OSD (On connection launch/termination) and by Cloudgui to re-launch OSD on osd resolution change by user.</p> <p>OSD Manager setup osd screen resolution, clear TTY terminals, signal Connection control to update hotkey (managed connection), disable hardware cursor on initialization.</p> <p>OSD manager launches Cloudgui process to display osd screen and wait for user input to make connection from OSD or Boxilla. On launch of cloudgui OSD Manager default state is OSD_SHOW.</p> <p>OSD manager High Level  flow chart gives the picture about the OSD launch, hide, and re-launch Cloudgui process.</p> <p>OSD Manager waiting case: After Cloudgui termination, OSD Manager enters to loop (i.e. while (1)) get a request message from queue to perform the next operation. When the OSD Manager tries to read an empty message queue (i.e. no message for processing) then it waits on message queue.</p>"},{"location":"architecture/Enhanced_OSD/Enhanced_OSD_Software_Design/osd_manager/#make-connection-from-osd-or-boxilla","title":"Make Connection from OSD or Boxilla","text":"<p>In Cloudgui each connection type as different function call to launch connection, based on the each connection type.</p> <ul> <li>OSD Connect button hit by user:</li> </ul> <p>On user hit connect button on selecting particular connection name of the connection on Decoder OSD screen then Cloudgui publishes the connection details (e.g. encoder details) to Connection Manager through mqtt MAKE_OSD_CONNECTION_TOPIC. On receiving encoder details the Connection Manager initiate connection launch process and publish message on OSD_HIDE_TOPIC to Hide OSD screen through MQTT call-back. </p> <ul> <li>Force Connection from Boxilla:</li> </ul> <p>Boxilla send launch connection request to Decoder to the particular connection. Webservice publishes the connection details to Connection Manager through mqtt FORCE_CONNECTION_TOPIC. On receiving connection details Connection Manager initiate connection launch process and publish message on OSD_HIDE_TOPIC to Hide OSD screen.</p> <ul> <li>Make Connection:</li> </ul> <p>On Make connection request to launch connection based on a given Transmitter IP address.Webservice publishes the hardcoded connection details to Connection Manager through MAKE_CONNECTION_TOPIC via mqtt. On receiving the connection details Connection Manager initiate connection launch process and publish message on OSD_HIDE_TOPIC to Hide OSD screen. </p> <p>On receiving Hide osd window message from CM, OSD Manager Kill cloudgui and updates its state to SHOW_OSD.</p> <p>In case of Connection error cases CM publish error code via OSD_SHOW_TOPIC and OSD Manager display error message by relaunching Cloudgui (10.1.4 Exit Message).</p>"},{"location":"architecture/Enhanced_OSD/Enhanced_OSD_Software_Design/osd_manager/#showhide-osd-window","title":"SHOW/HIDE OSD Window","text":"<ul> <li> <p>Hide OSD Window</p> <p>On connection launch the Connection Manager publish message on OSD_HIDE_TOPIC to OSD Manager to hide OSD screen. Upon receiving this message in mqtt call-back, OSD manager add osd hide message type into the message queue and kill the Cloudgui to hide OSD and enters to wait state for next message in queue.</p> </li> <li> <p>Show OSD Window</p> </li> <li> <p>On connection terminate, Connection Manager publish message on OSD_SHOW_TOPIC to show osd window.  Upon receiving this message in mqtt call-back, OSD Manager add payload message type into message queue, launch Cloudgui to show OSD window and enters to wait state for next message in queue.</p> </li> <li> <p>On forcelogout event from Boxilla CM publish message on OSD_SHOW_TOPIC to show OSD screen. Upon receiving this message in mqtt call-back OSD Manager adds received payload message with message type to queue to launch cloudgui.</p> <ul> <li>If connection launched CM terminates connection and inform OSD Manager to show OSD.</li> <li>If connection not launched CM inform on OSD_SHOW_TOPIC topic to show OSD screen then OSD Manager Kills Cloudgui and launch Cloudgui to show login screen.</li> </ul> </li> <li> <p>Relaunch OSD Window</p> </li> </ul> <p>On OSD resolution change request by user, the Cloudgui gets terminate and publish message on OSD_RESOLUTION_CHANGE_TOPIC to relaunch OSD window with new osd screen resolution. Upon receiving to this message in mqtt call-back, OSD manager adds received message payload message with message type into the message queue, to relaunch cloudgui with new resolution window.</p> <ul> <li>Force Login</li> </ul> <p>On force login event from REST API, CM publish message on OSD_SHOW_TOPIC to show OSD screen. Upon receiving this message in mqtt call-back OSD Manager add received payload message to queue with message type (force_login_type) to launch Cloudgui.     * If connection launched CM terminates connection and inform OSD Manager to show OSD.     * If connection not launched CM inform on OSD_SHOW_TOPIC topic to show OSD screen then OSD Manager Kills Cloudgui and launch Cloudgui.</p> <ul> <li> <p>Language Change on OSD screen</p> <p>On Language change event from user on OSD screen cloudgui publish message on OSD_SHOW_TOPIC to show OSD screen. Upon receiving this message in mqtt call-back OSD Manager add received payload message to queue with message type (language_type) launch Cloudgui.   * If connection launched CM terminates connection and inform OSD Manager to show OSD.   * If connection not launched CM inform on OSD_SHOW_TOPIC topic to show OSD screen then OSD Manager Kills Cloudgui and launch Cloudgui.   * Cloudgui set the selected language on launching OSD window.</p> </li> </ul>"},{"location":"architecture/Enhanced_OSD/Enhanced_OSD_Software_Design/osd_manager/#exit-message","title":"Exit Message","text":"<p>In case of abnormal connection termination, Connection Manager publish exit code to OSD Manager on mqtt OSD_SHOW_TOPIC. OSD manager get the exit message using exit code from bbox_error_strings module. OSD Manager update osd state to SHOW_OSD.</p> <p>The exit message displayed by relaunching Cloudgui.</p>"},{"location":"architecture/Enhanced_OSD/Enhanced_OSD_Software_Design/osd_manager/#internal-structure","title":"Internal Structure:","text":""},{"location":"architecture/Enhanced_OSD/Enhanced_OSD_Software_Design/osd_manager/#message-queue","title":"Message Queue:","text":"<p>The OSD Manager handles multiple MQTT requests from different subsystems (Cloudgui, Connection Manager). The OSD Manager parses MQTT message in call-back function but call-back is asynchronous to OSD Manager so to avoid asynchronous issues we are adding received message into queue from call-back function and reading it in OSD manager context. The OSD Manager MQTT Call back function adds every received request into a queue. Then OSD Manager read the requests and handle them in the main loop of the OSD Manager as explained in the section 10.1.3.</p> <p>The OSD Manager sets the threshold for messages in queue up to 5 and if message queue crosses the threshold then OSD Manager deletes all message by reading them and considering as an invalid message.</p>"},{"location":"architecture/Enhanced_OSD/Enhanced_OSD_Software_Design/osd_manager/#message-type","title":"Message Type","text":"<p>Message type represents on which topic message has received. The OSD Manager validates received message depending on Message type.</p>"},{"location":"architecture/Enhanced_OSD/Enhanced_OSD_Software_Design/osd_manager/#osd-manager-call-back-function","title":"OSD Manager call-back function","text":"<p>OSD manager has MQTT call-back function to get message published by other subsystem. This call back function gets trigger when Cloudgui or Connection manager publish message on the topic which has already subscribed by OSD manager during the initialization.</p>"},{"location":"architecture/Enhanced_OSD/Enhanced_OSD_Software_Design/osd_manager/#osd-manager-high-level-flow-chart","title":"OSD Manager High Level Flow Chart","text":""},{"location":"architecture/Enhanced_OSD/Enhanced_OSD_Software_Design/osd_manager/#osd-manager-states","title":"OSD Manager States","text":"<p>The OSD Manager uses a three states to perform its operation. The OSD Manager\u2019s state machines:</p> <ul> <li>HIDE OSD</li> <li>SHOW OSD</li> </ul> <p>OSD manager uses message queue to store all requests from other subsystems. It then reads the message queue to perform the requested operations. When the OSD manager tries to read an empty message queue then the OSD manager enter into a wait state until a message is added into the message queue.</p>"},{"location":"architecture/Enhanced_OSD/Enhanced_OSD_Software_Design/osd_manager/#hide-osd-state-osd-manager-current-state","title":"HIDE OSD STATE: (OSD Manager current state)","text":"<p>In HIDE OSD state OSD Manager perform following operation.</p> <ul> <li>Validate received message, if not valid then OSD Manager logs error into syslog file and wait for next message in queue from mqtt call-back.</li> <li>Valid requests in this state is Hide Osd on connection launching.</li> <li>On launch connection CM publish to Hide osd window, in mqtt call back function adds received payload message with message type to queue to launch Cloudgui e.g. if publish message to Hide osd screen, add received payload with HIDE_OSD_TYPE message type to queue based on this message type kill cloudgui and update state to HIDE OSD.</li> <li>In case of valid message, OSD Manager Kill Cloudgui process and update to HIDE OSD state. Then wait next incoming requests in message queue.</li> </ul>"},{"location":"architecture/Enhanced_OSD/Enhanced_OSD_Software_Design/osd_manager/#show-osd-state-osd-manager-current-state","title":"SHOW OSD STATE: (OSD Manager current state)","text":"<p>In SHOW OSD state OSD Manager perform following operation.</p> <ul> <li>Validate received message, if not valid then OSD Manager logs error into syslog file and wait for next message in queue from mqtt call-back.</li> <li>In case of valid message,<ul> <li>Launch OSD on connection termination.</li> <li>Relaunch OSD with new resolution.</li> <li>Forcelogout </li> <li>Force login</li> <li>Language change </li> <li>On all above valid case launch cloudgui based on connection type and Update OSD Manager state to SHOW_OSD state. Then wait for next requests in message queue.</li> </ul> </li> <li>On connection Error cases Error message displayed on launch of cloudgui.</li> <li>In OSD Manager mqtt call back function add received payload message with message type to queue to launch Cloudgui e.g. if publish message to Show osd screen, add received payload with SHOW_OSD_TYPE message type to queue based on this message type launch cloudgui and update state to SHOW OSD.</li> </ul>"},{"location":"architecture/Enhanced_OSD/Enhanced_OSD_Software_Design/overview/","title":"Overview","text":"<p>This document provides detailed design for the Enhanced OSD Phase-1 which targets improvements in connection launch speed and connections switching speed between different connections (KVM, SECURE_KVM, RDP, SSH, VNC, VMWARE) in the Emerald Decoder product.</p> <ul> <li>Re Architecting the existing OSD implementation to provide a platform to improve the connection switching speed, OSD launching speed efficiently.</li> <li>It will not change the existing design functionality and features of the Connections.</li> <li>Remove the 10 temporary files that are currently being used to control the connections and replace them through Data Structures and MQTT Client Server publish/subscribe messaging transport protocol.</li> <li>Files:<ul> <li>/tmp/startapp.sh</li> <li>/tmp/startapp.exec</li> <li>/tmp/connection_control/connection_type</li> <li>/tmp/connection_control/connection_type_prev</li> <li>/tmp/connection_control/persistent_connection</li> <li>/tmp/connection_control/dfreerdp.signal</li> <li>/tmp/NO_GUI</li> <li>/tmp/exit_message</li> <li>/tmp/exit_code</li> <li>/tmp/PRESET_SWITCH</li> </ul> </li> <li>Replacing the startgui.sh script with<ul> <li>Connection Manager (CM) process</li> <li>OSD Manager (OSD_Manager) process</li> </ul> </li> <li>Inter process communication using MQTT Mosquitto broker and MQTT topics across the Connection Manager, OSD Manager, WebService, Connection Control, Cloudgui, BBFreeRDP, Enhanced Restapi, Libsystem(Library interfaces used by Webservice, Cloudgui)</li> </ul>"},{"location":"architecture/Enhanced_OSD/Enhanced_OSD_Software_Design/overview/#enhanced-osd-use-cases","title":"Enhanced OSD Use Cases","text":"<p>Major scope of Enhanced OSD design is to improve the performance of Emerald Decoder devices below use cases.</p> <ul> <li>Instant Connection Launch (KPI: &lt; 1 second) (KVM, RDP, SSH, VNC, VMWARE) through OSD GUI or using Favorite Keys.</li> <li>Quick Connection Switching to Previous (KPI: &lt;1.4 second) using Hot Keys.</li> <li>Instant OSD Launch on Connection Termination (KPI: &lt;1 second) using Hot keys (Phase-2).</li> </ul>"},{"location":"architecture/Enhanced_OSD/Enhanced_OSD_Software_Design/phase1_process_view/","title":"Enhanced OSD Phase 1 Process View","text":""},{"location":"architecture/Enhanced_OSD/Enhanced_OSD_Software_Design/phase1_process_view/#mqtt-topics","title":"MQTT Topics","text":""},{"location":"architecture/Enhanced_OSD/Enhanced_OSD_Software_Design/phase1_process_view/#mqtt-topics_1","title":"MQTT TOPICS","text":""},{"location":"architecture/Enhanced_OSD/Enhanced_OSD_Software_Design/phase1_process_view/#connection-manager-mqtt-topics","title":"Connection Manager MQTT topics","text":"TOPIC Subscriber Publisher Action MAKE_OSD_CONNECTION_TOPIC Connection Manager Cloudgui Cloudgui publish encoder details (refer Appendix) to CM when user hit connect button on OSD screen to the launch connection. MAKE_CONNECTION_TOPIC Connection Manager Webservice Webservice publish encoder detail to CM on Make Connection request from Boxilla. FORCE_CONNECTION_TOPIC Connection Manager Webservice Webservice publish encoder detail to CM on Force connection request from Boxilla. FORCE_LOGOUT_TOPIC Connection Manager Webservice Webservice publish forcelogout to CM on forcelogout request to show OSD login screen. FORCE_LOGIN_TOPIC Connection Manager Webservice Webservice publish forcelogin to CM on forcelogin request to show OSD logged screen FAVOURITE_CONNECTION_TOPIC Connection Manager Connection Control CC publish encoder details to CM when user select favourite hotkey. TERMINATE_CONNECTION_CC_TOPIC Connection Manager Connection Control CC publish terminate connection request to CM on termination hotkey selection by user (e.g. PtrScr+ PtrScr + O). TERMINATE_CONNECTION_WEBSERVICE_TOPIC Connection Manager Webservice Webservice publish terminate connection request to CM when user terminate connection from Boxilla. SEND_EXIT_CODE_TOPIC Connection Manager Connection Launcher Connection Launcher publishes exit code to CM on connection termination. TERMINATE_WITH_NO_OSD_TOPIC Connection Manager Webservice Webservice publish terminate connection with no OSD to CM when user terminate connection from Boxilla. CONNECTION_LAUNCHED_TOPIC Connection Manager Client Client (BBFREERDP, DFREERDP [2K], XFREERDP [4K]) publish connection started status to CM upon connection established."},{"location":"architecture/Enhanced_OSD/Enhanced_OSD_Software_Design/phase1_process_view/#connection-launcher-mqtt-topics","title":"Connection Launcher MQTT topics","text":"Topic Subscriber Publisher Action LAUNCH_CONNECTION_TOPIC Connection Launcher Connection Manager CM publish Encoder details to connection launcher when make connection initiated from OSD or Boxilla. EXIT_CONNECTION_TOPIC Client (BBFREERDP, SSH, \u2026) Connection Manager CM publish terminate connection request to Client."},{"location":"architecture/Enhanced_OSD/Enhanced_OSD_Software_Design/phase1_process_view/#osd-manager-mqtt-topics","title":"OSD Manager MQTT topics","text":"TOPIC Subscriber Publisher Action OSD_HIDE_TOPIC OSD Manager Connection Manager CM publish hide OSD request to OSD manager upon connection established. OSD_SHOW_TOPIC OSD Manager Connection Manager CM publish show OSD request to OSD Manager upon connection terminated or force logout. OSD_RESOLUTION_CHANGE_TOPIC OSD Manager Cloudgui Cloudgui publish relaunch OSD window to OSD Manager upon resolution change by user. OSD_LANGUAGE_CHANGE_TOPIC OSD Manager Cloudgui Cloudgui publish language change request to OSD Manager to display OSD login screen."},{"location":"architecture/Enhanced_OSD/Enhanced_OSD_Software_Design/rest_api_message_to_boxilla/","title":"Rest API Message To Boxilla","text":"<p>Connection Manager sends the below messages to Boxilla as per the below use case.</p> <ul> <li>restapi_cli -j active_to_previous # Set active connections to previous connections</li> <li>/usr/local/bin/restapi_cli -j post_connection &amp;  # Notify Boxilla that connection is being established</li> <li>/usr/local/bin/restapi_cli -j delete_connection &amp; # Notify Boxilla that connection is being terminated.</li> </ul>"},{"location":"architecture/Enhanced_OSD/Enhanced_OSD_Software_Design/security_considerations/","title":"Security Considerations","text":"<p>There should be no changes to security as a result of this feature. (Note: for Phase two, we need to understand the impact of the OSD timeout feature once the OSD is always running)</p>"},{"location":"architecture/Enhanced_OSD/Enhanced_OSD_Software_Design/security_considerations/#test-and-validation","title":"Test and Validation","text":"<ul> <li>How will this feature be validated in System Test?</li> </ul> <p>Because this feature is likely to affect connection times we will have to refactor existing Automated Connection Tests, Build Verification Tests and existing Test plans will need to be reviewed for the impact of this change.</p> <ul> <li>Is there associated area of the system that might be affected by this change?</li> </ul> <p>No, as this design change is a performance change there is no risk of direct or indirect impact in another product feature.</p> <ul> <li>Identify where you think the major risks are from a test perspective.</li> </ul> <p>Test should cover all the three models of Emerald SE, Emerald PE, Emerald 4K test cases right from</p> <ol> <li>Boot up the Decoder device with and without Auto connection feature enabled from Boxilla check OSD screen or Connection launch</li> <li>Testing both Managed and Unmanaged system</li> <li>Testing different screen resolutions set in the OSD screen</li> <li>Make connection / Break Connection</li> <li>Switching to previous Connection</li> <li>Launching connections from OSD screen</li> <li>Launching connections from Boxilla</li> <li>Stress testing of Make /Break connections and Switching to previous connections.</li> <li>Test and Validation can Automate test cases related MQTT Mosquitto topics using the below tools MQTT Lens<ul> <li>MQTTLens This tool can be installed via the Google Chrome Web Store with just one click, making it easy and convenient to get started.</li> <li>MQTT.fx (available for Win/MacOSX/Linux, Link):MQTT.fx is an MQTT Client written in Java and based on Eclipse Paho.</li> <li>MQTT-Spy (based on Java 8, Link, and Open Source): MQTT-Spy has a very nice way to display basic MQTT publish/subscribe mechanisms.</li> </ul> </li> </ol>"},{"location":"architecture/Enhanced_OSD/Enhanced_OSD_Software_Design/security_considerations/#database-and-configuration","title":"Database and Configuration","text":"<ul> <li>Removed the 10 temporary files that are currently being used to control the connections and replace them through Data Structures and MQTT Client Server publish/subscribe messaging transport protocol.</li> <li>Files:<ul> <li>/tmp/startapp.sh</li> <li>/tmp/startapp.exec</li> <li>/tmp/connection_control/connection_type</li> <li>/tmp/connection_control/connection_type_prev</li> <li>/tmp/connection_control/persistent_connection</li> <li>/tmp/connection_control/dfreerdp.signal</li> <li>/tmp/NO_GUI</li> <li>/tmp/exit_message</li> <li>/tmp/exit_code</li> <li>/tmp/PRESET_SWITCH</li> </ul> </li> <li>Enhanced OSD design replaced the startgui.sh script with Connection Manager (CM) process and  OSD Manager (OSD_Manager) process which can store the above said database required in the local runtime  data structures</li> </ul>"},{"location":"architecture/Enhanced_OSD/Enhanced_OSD_Software_Design/security_considerations/#performance-and-user-experience","title":"Performance and user experience","text":"<p>These design changes impact performance positively</p> <ul> <li>Make Connection (via-Tx) optimized (Connection Launch from OSD under 500 ms) [Tested on 2K (SE, PE)]</li> <li>Switching connection(via-Tx) to previous connection optimized (Under 1.4 Second) [Tested on 2K (SE, PE)]</li> <li>Bonded connection launch time can be optimized with this enhanced design in the decoder device where the bonded connection being launched, Boxilla may launch the other devices connections with additional time. (T.B.D)</li> <li>This design is the basis for the Phase-2 design where the Instant OSD launch can be achieved upon connection termination.</li> </ul>"},{"location":"architecture/Enhanced_OSD/Enhanced_OSD_Software_Design/security_considerations/#time-calculation-logging","title":"Time calculation logging","text":"<p>To know the connection launch time on make connection initiation from OSD and Relaunch of OSD window on connection termination.</p> <p>Connection Launch:</p> <ol> <li>On user click to make the connection on the OSD screen insert MAKE_CONNECT keyword into syslog from Cloudgui.</li> <li>On Connection launch by CM insert CONNECTION_ESTABLISHED keyword into syslog at CM CONNECTED state.</li> </ol> <p>Connection Termination (OSD RELUANCH TIME):</p> <ol> <li>On Hot key selection by user to terminate the connection the Connection Control insert TERMINATE_CONNECTION keyword into syslog.</li> <li>On Connection termination Cloudgui insert a log CONNECTION_TERMINATED into syslog before running Qt exec loop.</li> </ol> <p>Syslog log messages has time stamps. Based on the above keyword we determine the Connection launch time and Connection termination time.</p>"},{"location":"architecture/Enhanced_OSD/Enhanced_OSD_Software_Design/security_considerations/#enhanced-osd-recovery","title":"Enhanced OSD recovery","text":"<p>In case of abnormal system crash Enhanced OSD software solution needs to have restart mechanism. Need investigation how it can be recovered from crash/fail and document will be updated.</p>"},{"location":"architecture/Enhanced_OSD/Enhanced_OSD_Software_Design/webservice/","title":"Webservice","text":"<p>This section covers the Force Logout event from Boxilla, handles in Webservice. </p> <p>When Force logout requested from Boxilla, to show OSD login screen. Following steps performed </p> <ol> <li>Webservice remove and create below files, which are created at the time of connection launched.<ul> <li>/tmp/guiBootCount.txt this file is created in order to prevent auto login user from being logged in.</li> <li>Remove this file  /tmp/logAfterConnect.xml </li> <li>Remove this file /tmp/WAS_CONNECTED</li> <li>Terminate the connection and Kill the Cloudgui process.    Based on the above files OSD show login screen at time of the Cloudgui launch.</li> </ul> </li> <li>On forcelogout request from Boxilla Webservice publish message on FORCE_LOGOUT_TOPIC to Connection Manager (refer CM section).Based on this information OSD Manager launch Cloudgui.</li> </ol>"},{"location":"architecture/Enhanced_OSD/OSD_Message/appendix/","title":"Appendix","text":""},{"location":"architecture/Enhanced_OSD/OSD_Message/appendix/#full-list-of-possible-return-errors-which-might-be-returned-by-upgrade-process-on-rx-or-tx-521-system","title":"Full list of possible return errors which might be returned by upgrade process on RX or TX 5.2.1 system;","text":"<pre><code>    SSH_OK,                           /* 0 */\n    SSH_GENERAL_ERROR,                /* 1 */\n    SSH_INIT_FAIL,                    /* 2 */\n    SSH_GET_SOCKET_FAIL,              /* 3 */\n    SSH_CREATE_SESSION_FAIL,          /* 4 */\n    SSH_CONNECT_FAIL,                 /* 5 */\n    SSH_TX_CHECK_FAIL,                /* 6 */\n    SSH_VER_CHECK_FAIL,               /* 7 */ \n    SSH_LED_FLASH_FAIL,               /* 8 */\n    SSH_SCP_SEND_FAIL,                /* 9 */\n    SSH_PERMISSION_CHANGE_FAIL,       /* 10 */\n    SSH_EXTRACT_UPGRADE_FAIL,         /* 11 */\n    SSH_RUN_UPGRADE_FAIL,             /* 12 */\n    SSH_REBOOT_FAIL,                  /* 13 */\n    SSH_FILE_SEARCH_FAIL,             /* 14 */\n    SSH_SOCKET_LISTEN_ERROR,          /* 15 */\n    SSH_SOCKET_OPTION_ERROR,          /* 16 */\n    SSH_SOCKET_BIND_ERROR,            /* 17 */\n    SSH_RECVFROM_ERROR,               /* 18 */\n    SSH_GET_INFO_FAIL,                /* 19 */\n    SSH_COMPATIBILITY_FAIL,           /* 20 */\n    SSH_BRAND_CHECK_FAIL,             /* 21 */ \n    SSH_CLASS_CHECK_FAIL,             /* 22 */\n    SSH_PACKAGE_CHECK_FAIL,           /* 23 */ \n    SSH_NO_UPGRADE_REQUIRED,          /* 24 */\n    SSH_MANAGED_STATE_ERROR,          /* 25 */ \n    SSH_USB_MOUNT_ERROR,              /* 26 */\n    SSH_MANAGED_TOKEN_ERROR,          /* 27 */\n    SSH_DEVICE_RESPOND_ERROR,         /* 28 */\n    SSH_DEVICE_TYPE_CHECK_FAIL,       /* 29 */\n    SSH_COMMAND_EXECUTION_FAIL,       /* 30 */\n    SSH_CHANNEL_ERROR,                /* 31 */\n    SSH_SET_EDID_ERROR,               /* 32 */\n    SSH_GET_DEVICE_TYPE_ERROR,        /* 33 */\n    SSH_GET_HID_ERROR,                /* 34 */\n    SSH_GET_EDID_ERROR,               /* 35 */\n    SSH_SET_TX_PREFS_ERROR,           /* 36 */\n    SSH_GET_SPN_ERROR,                /* 37 */\n    SSH_GET_MODEL_FAIL,               /* 38 */\n    SSH_GET_SERIAL_FAIL,              /* 39 */\n    SSH_SCP_RECV_ERROR,               /* 40 */\n    SSH_GET_BROADCAST_ERROR,          /* 41 */\n    SSH_XML_WRITE_ERROR,              /* 42 */\n    SSH_FILENAME_LENGTH_ERROR,        /* 43 */\n    SSH_SAVE_FILE_ERROR,              /* 44 */\n    SSH_GET_NOISE_FILTER_ERROR,       /* 45 */\n    SSH_XML_READ_ERROR,               /* 46 */\n    SSH_FILE_OPEN_ERROR,              /* 47 */\n    SSH_GET_TOKEN_ERROR,              /* 48 */\n    SSH_UPGRADE_FILE_ERROR,           /* 49 */ \n    SSH_GET_ENV_NUM_ERROR,            /* 50 */\n    SSH_FILE_CLOSE_ERROR,             /* 51 */\n    SSH_DB_ERROR,                     /* 52 */\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/appendix/#full-list-of-possible-return-errors-which-might-be-returned-by-upgrade-process-on-rx-or-tx-531-system","title":"Full list of possible return errors which might be returned by upgrade process on RX or TX 5.3.1 system","text":"<pre><code>    SSH_OK,                           /* 0 */\n    SSH_GENERAL_ERROR,                /* 1 */\n    SSH_INIT_FAIL,                    /* 2 */\n    SSH_GET_SOCKET_FAIL,              /* 3 */\n    SSH_CREATE_SESSION_FAIL,          /* 4 */\n    SSH_CONNECT_FAIL,                 /* 5 */\n    SSH_TX_CHECK_FAIL,                /* 6 */\n    SSH_VER_CHECK_FAIL,               /* 7 */ \n    SSH_LED_FLASH_FAIL,               /* 8 */\n    SSH_SCP_SEND_FAIL,                /* 9 */\n    SSH_PERMISSION_CHANGE_FAIL,       /* 10 */\n    SSH_EXTRACT_UPGRADE_FAIL,         /* 11 */\n    SSH_RUN_UPGRADE_FAIL,             /* 12 */\n    SSH_REBOOT_FAIL,                  /* 13 */\n    SSH_FILE_SEARCH_FAIL,             /* 14 */\n    SSH_SOCKET_LISTEN_ERROR,          /* 15 */\n    SSH_SOCKET_OPTION_ERROR,          /* 16 */\n    SSH_SOCKET_BIND_ERROR,            /* 17 */\n    SSH_RECVFROM_ERROR,               /* 18 */\n    SSH_GET_INFO_FAIL,                /* 19 */\n    SSH_COMPATIBILITY_FAIL,           /* 20 */\n    SSH_BRAND_CHECK_FAIL,             /* 21 */ \n    SSH_CLASS_CHECK_FAIL,             /* 22 */\n    SSH_PACKAGE_CHECK_FAIL,           /* 23 */ \n    SSH_NO_UPGRADE_REQUIRED,          /* 24 */\n    SSH_MANAGED_STATE_ERROR,          /* 25 */ \n    SSH_USB_MOUNT_ERROR,              /* 26 */\n    SSH_MANAGED_TOKEN_ERROR,          /* 27 */\n    SSH_DEVICE_RESPOND_ERROR,         /* 28 */\n    SSH_DEVICE_TYPE_CHECK_FAIL,       /* 29 */\n    SSH_COMMAND_EXECUTION_FAIL,       /* 30 */\n    SSH_CHANNEL_ERROR,                /* 31 */\n    SSH_SET_EDID_ERROR,               /* 32 */\n    SSH_GET_DEVICE_TYPE_ERROR,        /* 33 */\n    SSH_GET_HID_ERROR,                /* 34 */\n    SSH_GET_EDID_ERROR,               /* 35 */\n    SSH_SET_TX_PREFS_ERROR,           /* 36 */\n    SSH_GET_SPN_ERROR,                /* 37 */\n    SSH_GET_MODEL_FAIL,               /* 38 */\n    SSH_GET_SERIAL_FAIL,              /* 39 */\n    SSH_SCP_RECV_ERROR,               /* 40 */\n    SSH_GET_BROADCAST_ERROR,          /* 41 */\n    SSH_XML_WRITE_ERROR,              /* 42 */\n    SSH_FILENAME_LENGTH_ERROR,        /* 43 */\n    SSH_SAVE_FILE_ERROR,              /* 44 */\n    SSH_GET_NOISE_FILTER_ERROR,       /* 45 */\n    SSH_XML_READ_ERROR,               /* 46 */\n    SSH_FILE_OPEN_ERROR,              /* 47 */\n    SSH_GET_TOKEN_ERROR,              /* 48 */\n    SSH_UPGRADE_FILE_ERROR,           /* 49 */ \n    SSH_GET_ENV_NUM_ERROR,            /* 50 */\n    SSH_FILE_CLOSE_ERROR,             /* 51 */\n    SSH_DB_ERROR,                     /* 52 */\n    SSH_INVALID_USER,                 /* 53 */\n    SSH_INVALID_SIGNATURE             /* 54 */\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/appendix/#mpn-translation-table","title":"MPN translation table","text":"models spn devices techString brandString upgradePrefix 300-010 DTX1000-R RX_Barrow_BB obsolete obsolete obsolete 300-011 DTX1000-T TX_Barrow_BB obsolete obsolete obsolete 300-012 DTX1002-R RX_Corrib_BB Tech2 DTX RX_DTX 300-013 DTX1000-R RX_Corrib_BB Tech2 DTX RX_DTX 300-014 DTX1002-T TX_Corrib_BB Tech2 DTX TX_DTX 300-015 DTX1000-T TX_Corrib_BB Tech2 DTX TX_DTX 300-016 DTX1000-R-S RX_Deel_BB Tech3 DTX RX_DTX 300-017 DTX1000-T-S TX_Deel_BB Tech3 DTX TX_DTX 300-020 VCA2100 RX_Barrow_CL obsolete obsolete obsolete 300-021 VSA2100 TX_Barrow_CL Obsolete Obsolete Obsolete 300-021 VSA2100 TX_Barrow_CL Obsolete Obsolete Obsolete 300-022 CLR2200 RX_Corrib_CL Obsolete Obsolete Obsolete 300-023 CLR2100 RX_Corrib_CL Obsolete Obsolete Obsolete 300-024 CLT2200 TX_Corrib_CL Obsolete Obsolete Obsolete 300-025 CLT2100 TX_Corrib_CL Obsolete Obsolete Obsolete 300-030 DTX1032-R RX_Manager_BB Obsolete Obsolete Obsolete 300-031 VCA-MANAGER RX_Manager_CL Obsolete Obsolete Obsolete 300-040 EMD4000R RX_Emerald_BB N/A N/A RX_EMD4K 300-041 EMD4000T TX_Emerald_BB N/A N/A TX_EMD4K 300-046 EMD2000SE-R RX_EmeraldSESH_BB Tech6 EMD RX_EMDSE 300-047 EMD2000SE-T TX_EmeraldSESH_BB Tech6 EMD TX_EMDSE 300-060 EMD2002SE-R RX_EmeraldSEDH_BB Tech7 EMD RX_EMDSE 300-061 EMD2002SE-T TX_EmeraldSEDH_BB Tech7 EMD TX_EMDSE 300-066 EMD2000PE-R RX_EmeraldPESH_BB Tech9 EMD RX_EMDPE 300-067 EMD2000PE-T TX_EmeraldPESH_BB Tech9 EMD TX_EMDPE 300-068 EMD2002PE-R RX_EmeraldPEDH_BB Tech9 EMD RX_EMDPE 300-069 EMD2002PE-T TX_EmeraldPEDH_BB Tech9 EMD TX_EMDPE 300-070 EMD200DV-T TX_EmeraldZU_BB Tech8 EMD TX_EMDZU 300-071 EMD200EDV-T TX_EmeraldZUE_BB Tech8 EMD TX_EMDZU UNKNOWN UNKNOWN UNKNOWN UNKNOWN UNKNOWN"},{"location":"architecture/Enhanced_OSD/OSD_Message/approval/","title":"Approval","text":"<p>This document requires the approval of each of the individuals listed below. By signing below, each member (or their designee) acknowledges that they understand and agree with the contents as described in this document.  Modification of this document requires a re-issue of this document that clearly identifies the changes and must also be signed by each of these individuals.</p> <p>Date        15/11/2019</p> <p>Date        15/11/2019</p>"},{"location":"architecture/Enhanced_OSD/OSD_Message/introduction/","title":"Master Document Revision History","text":"Date Version Description Author/Editor Oct 31, 2019 0.1 First Draft Olga Birkvalde Nov 11, 2019 0.2 Draft Updated Olga Birkvalde Nov 14, 2019 0.3 Draft updated with message texts required to be changed in the OSD code Olga Birkvalde"},{"location":"architecture/Enhanced_OSD/OSD_Message/introduction/#introduction","title":"Introduction","text":"<p>This SDD document describes all messages shown to user by OSD, messages location and causes.</p> <p>The intended audience includes development and test engineers, product managers and documentation.</p>"},{"location":"architecture/Enhanced_OSD/OSD_Message/introduction/#purpose","title":"Purpose","text":"<p>The purpose of this SDD document is to provide a description of all messages which user can see on GUI level for the purpose of considering provided to user information correctness.</p>"},{"location":"architecture/Enhanced_OSD/OSD_Message/introduction/#scope","title":"Scope","text":"<p>This SDD document referred only to OSD messages displayed on additional pop up dialogs.</p>"},{"location":"architecture/Enhanced_OSD/OSD_Message/introduction/#definitions-acronyms-and-abbreviations","title":"Definitions, Acronyms and Abbreviations","text":"Term Description CLU Image A compressed encrypted file format used for 2K appliance software images. Decoder See Receiver Encoder See Transmitter FIT Image A compressed encrypted file format used for 4K appliance software images. Municast The use of multiple individual TCP streams to share a video from a single transmitter to multiple receivers Multicast The use of an individual Multicast UDP stream to share a video from a single transmitter to multiple receivers. Blackbox uses reliable multicast so that any dropped frames are resent and no data loss occurs. Pixel Perfect Mode The original scheme used by 4K products where the entire frame of the source video was captured continuously and sent with compression to the decoder. RFX RemoteFX Codec Extension developed by Microsoft which uses a lossy image codec to encode screen images with efficient and effective compression. This is the lossy scheme used in Blackbox products. Receiver A Blackbox appliance that receives and displays a video stream. A receiver is also referred to as a client or decoder. RPU Real Time Processing Unit. The Zynq Ultrascale+ MPSoC features two A5 RPUs. In our 4K products one of these is used for Display Port functionality using IP provided by Xilinx. The second on the encoder side acts a video processing feed between FPGA and TOE Shared Mode A generic term used in Blackbox to describe schemes that allow more than one receiver view the video source from a transmitter. See Municast and Multicast. Tile Differencing Mode A lossless scheme used to reduce bandwidth; only tiles (portions of the screen) that change are sent from encoder to decoder. TOE TCP Offload Engine: A hardware based TCP stack used to accelerate the transmission of data. This is essential in high bandwidth, low latency transmission of video and audio. Technical Debt Technical Debt is a concept in software development that reflects the implied cost of additional rework caused by choosing an easy (limited) solution now instead of using a better approach that would take longer. Transmitter A Blackbox appliance that captures and transmits a video from a source. A transmitter is also referred to as a server or encoder. Video Source A source of input for a Transmitter, normally the DVI or Display Port output of a PC."},{"location":"architecture/Enhanced_OSD/OSD_Message/introduction/#references","title":"References","text":""},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.2_change_password_class/","title":"Change Password Class","text":""},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.2_change_password_class/#5211-user-message","title":"5.2.1.1 User message","text":"<p>Location: Main window-&gt;Control-&gt;Password Button clicked (new window pop up)</p> <p>Action: User hit Save Button</p> <p>Causes:  User type wrong password in the Confirm Your Password field</p> <p>Scenario to reproduce: type wrong password in the Confirm Your Password field and hit Save button</p> <p>System management: unmanaged</p> <pre><code>5.2.1 Correspond to 5.3.1\n5.3.1 message heading: \"Information\"\n5.3.1 message text: Your entered password is incorrect.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.2_change_password_class/#5212-user-message","title":"5.2.1.2 User message","text":"<p>Location: Main window-&gt;Control-&gt;Password Button clicked (new window pop up)</p> <p>Action: User hit Save Button</p> <p>Causes:  User type different password in the field New Password and Confirm New Password</p> <p>Scenario to reproduce: type different password in the field New Password and Confirm New Password and hit Save button</p> <p>System management: unmanaged</p> <pre><code>5.2.1 Correspond to 5.3.1\n5.3.1 message heading: \"Information\"\n5.3.1 message text: New password does not match.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.3_new_connection_class/","title":"New Connection Class","text":""},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.3_new_connection_class/#5311-user-message","title":"5.3.1.1 User message","text":"<p>Location: Main window-&gt;Connections-&gt;New Button clicked (new window pop up)</p> <p>Action: User hit Save Button</p> <p>Causes:  Name field left blank</p> <p>Scenario to reproduce: User create new connection, but connection name field left empty and user hit Save button</p> <p>System management: unmanaged</p> <pre><code>5.2.1 message heading: \"Information\"\n5.2.1 message text: At least one symbol should identify Connection Name.\n5.3.1 message heading: \" Information\"\n5.3.1 message text: Cannot leave connection name blank.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.3_new_connection_class/#5312-user-message","title":"5.3.1.2 User message","text":"<p>Location: Main window-&gt;Connections-&gt;New Button clicked (new window pop up)</p> <p>Action: User hit Save Button</p> <p>Causes:  IP Address field left blank </p> <p>Scenario to reproduce: User create new connection, but connection IP address field left empty and user hit Save button</p> <p>System management: unmanaged</p> <pre><code>5.2.1 message heading: \"Information\"\n5.2.1 message text: IP address/Host name field is mandatory.\n5.3.1 not supported BUG-1712\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.3_new_connection_class/#5313-user-message","title":"5.3.1.3 User message","text":"<p>Location: Main window-&gt;Connections-&gt;New Button clicked (new window pop up)</p> <p>Action: User hit Save Button</p> <p>Causes:  User specify connection name which already exist</p> <p>Scenario to reproduce: User creates new connection and enter connection name which already exist and hit Save button</p> <p>System management: unmanaged</p> <pre><code>5.2.1 message heading: \"Information\"\n5.2.1 message text: Same connection name already exists.\n5.3.1 message heading: \"Information\"\n5.3.1 message text: Connection with that name already exists.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.3_new_connection_class/#5314-user-message","title":"5.3.1.4 User message","text":"<p>Location: Main window-&gt;Connections-&gt;New Button clicked (new window pop up)</p> <p>Action: User hit Save Button</p> <p>Causes:  User specify User Name which contain one or more of restricted characters</p> <p>Scenario to reproduce: User creates new connection and enter connection name which contain for example / character and hit Save button</p> <p>System management: unmanaged</p> <pre><code>5.2.1 Correspond to 5.3.1\n5.3.1 message heading: \"WARNING\"\n5.3.1 message text: Connection name cannot contain certain characters. Invalid characters are: \u201c ' / \\ [ ] : ; | = , + * ? &lt; &gt; `\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.3_new_connection_class/#5315-user-message","title":"5.3.1.5 User message","text":"<p>Location: Main window-&gt;Connections-&gt;New Button clicked (new window pop up)</p> <p>Action: User hit Save Button</p> <p>Causes:  User specify user name which contain one or more of restricted characters</p> <p>Scenario to reproduce: User creates new connection and enter connection name which contain for example ' character and hit Save button</p> <p>System management: unmanaged</p> <pre><code>5.2.1 Correspond to 5.3.1\n5.3.1 message heading: \"WARNING\"\n5.3.1 message text: Username cannot contain certain characters. Invalid characters are: \u201c ' / \\ [ ] : ; | = , + * ? &lt; &gt; `\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.3_new_connection_class/#5316-user-message","title":"5.3.1.6 User message","text":"<p>Location: Main window-&gt;Connections-&gt;New Button clicked (new window pop up)</p> <p>Action: User hit Save Button</p> <p>Causes:  User specify IP address which contain one or more of restricted characters</p> <p>Scenario to reproduce: User creates new connection and enters connection IP address which contain for example / character and hit Save button</p> <p>System management: unmanaged</p> <pre><code>5.2.1 message heading: \"Information\"\n5.2.1 message text: &lt; user entered string &gt; is not a valid IP address or DNS Host name.\n5.3.1 message heading: \"WARNING\"\n5.3.1 message text: &lt; user entered string &gt; is not a valid IP address or DNS Host name. Invalid characters are:\u201c ' / \\ [ ] : ; | = , + * ? &lt; &gt; `\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.3_new_connection_class/#5317-user-message","title":"5.3.1.7 User message","text":"<p>Location: Main window-&gt;Connections-&gt;New Button clicked (new window pop up)</p> <p>Action: User hit Save Button</p> <p>Causes:  User specify Domain or/and load balance which contain one or more of restricted characters</p> <p>Scenario to reproduce: User creates new connection and enters Domain which contain for example / character and hit Save button</p> <p>System management: unmanaged</p> <pre><code>5.2.1 not supported\n5.3.1 message heading: \"WARNING\"\n5.3.1 message text: Domain cannot contain certain characters. Invalid characters are: \u201c ' / \\ [ ] : ; | = , + * ? &lt; &gt; `\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.3_new_connection_class/#5318-user-message","title":"5.3.1.8 User message","text":"<p>Location: Main window-&gt;Connections-&gt;New Button clicked (new window pop up)</p> <p>Action: User hit Save Button</p> <p>Causes:  User specify Password which contain one or more of restricted characters</p> <p>Scenario to reproduce: User creates new connection and enter password which contain for example ' character and hit Save button</p> <p>System management:</p> <pre><code>5.2.1 Correspond to 5.3.1\n5.3.1 message heading: \"WARNING\"\n5.3.1 message text: Password cannot contain certain characters. Invalid characters are: \u201c ; ' `\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.4_edit_connection_class/","title":"Edit Connection Class","text":""},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.4_edit_connection_class/#5411-user-message","title":"5.4.1.1 User message","text":"<p>Location: Main window-&gt;Connections-&gt;Edit Button clicked (new window pop up)</p> <p>Action: User hit Save Button</p> <p>Causes:  Name field left blank</p> <p>Scenario to reproduce: User edit connection, but connection name field left empty and user hit Save button</p> <p>System management: unmanaged</p> <pre><code>5.2.1 message heading: \"Information\"\n5.2.1 message text: At least one symbol should identify Connection Name.\n5.3.1 message heading: \"Information\"\n5.3.1 message text: Cannot leave connection name blank.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.4_edit_connection_class/#5412-user-message","title":"5.4.1.2 User message","text":"<p>Location: Main window-&gt;Connections-&gt;Edit Button clicked (new window pop up)</p> <p>Action: User hit Save Button</p> <p>Causes:  IP Address field left blank </p> <p>Scenario to reproduce: User edit connection, but connection IP address field left empty and user hit Save button</p> <p>System management: unmanaged</p> <pre><code>5.2.1 message heading: \"Information\"\n5.2.1 message text: IP address field is mandatory.\n5.3.1 not supported BUG-1712\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.4_edit_connection_class/#5413-user-message","title":"5.4.1.3 User message","text":"<p>Location: Main window-&gt;Connections-&gt;Edit Button clicked (new window pop up)</p> <p>Action: User hit Save Button</p> <p>Causes:  User specify connection name which already exist</p> <p>Scenario to reproduce: User edits connection and enter connection name which already exist and hit Save button</p> <p>System management: unmanaged</p> <pre><code>5.2.1 message heading: \"Information\"\n5.2.1 message text: Same connection name already exists.\n5.3.1 message heading: \"Information\"\n5.3.1 message text: Connection with that name already exists.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.4_edit_connection_class/#5414-user-message","title":"5.4.1.4 User message","text":"<p>Location: Main window-&gt;Connections-&gt;Edit Button clicked (new window pop up)</p> <p>Action: User hit Save Button</p> <p>Causes:  User specify Connection Name which contain one or more of restricted characters</p> <p>Scenario to reproduce: User edits connection and enter connection name which contain for example / character and hit Save button</p> <p>System management: unmanaged</p> <pre><code>5.2.1 Correspond to 5.3.1\n5.3.1 message heading: \"WARNING\"\n5.3.1 message text: Connection name cannot contain certain characters. Invalid characters are: \u201c ' / \\ [ ] : ; | = , + * ? &lt; &gt; `\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.4_edit_connection_class/#5415-user-message","title":"5.4.1.5 User message","text":"<p>Location: Main window-&gt;Connections-&gt;Edit Button clicked (new window pop up)</p> <p>Action: User hit Save Button</p> <p>Causes:  User specify user name which contain one or more of restricted characters</p> <p>Scenario to reproduce: User edits connection and enter user name which contain for example / character and hit Save button</p> <p>System management: unmanaged</p> <pre><code>5.2.1 Correspond to 5.3.1\n5.3.1 message heading: \"WARNING\"\n5.3.1 message text: Username cannot contain certain characters. Invalid characters are: \u201c ' / \\ [ ] : ; | = , + * ? &lt; &gt; `\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.4_edit_connection_class/#5416-user-message","title":"5.4.1.6 User message","text":"<p>Location: Main window-&gt;Connections-&gt;Edit Button clicked (new window pop up)</p> <p>Action: User hit Save Button</p> <p>Causes:  User specify IP address which contain one or more of restricted characters</p> <p>Scenario to reproduce: User edits connection and enters connection IP address which contain for example / character and hit Save button</p> <p>System management: unmanaged</p> <pre><code>5.2.1 message heading: \"WARNING\"\n5.2.1 message text: &lt; user entered string &gt; is not a valid IP address or DNS Host name.\n5.3.1 message heading: \"WARNING\"\n5.3.1 message text: IP Address cannot contain certain characters. Invalid characters are:\u201c ' / \\ [ ] : ; | = , + * ? &lt; &gt; `\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.4_edit_connection_class/#5417-user-message","title":"5.4.1.7 User message","text":"<p>Location: Main window-&gt;Connections-&gt;Edit Button clicked (new window pop up)</p> <p>Action: User hit Save Button</p> <p>Causes:  User specify Domain or/and load balance which contain one or more of restricted characters</p> <p>Scenario to reproduce: User edits connection and enters Domain which contain for example / character and hit Save button</p> <p>System management: unmanaged</p> <pre><code>5.2.1 not supported\n5.3.1 message heading: \"WARNING\"\n5.3.1 message text: Domain cannot contain certain characters. Invalid characters are: \u201c ' / \\ [ ] : ; | = , + * ? &lt; &gt; `\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.4_edit_connection_class/#5418-user-message","title":"5.4.1.8 User message","text":"<p>Location: Main window-&gt;Connections-&gt;Edit Button clicked (new window pop up)</p> <p>Action: User hit Save Button</p> <p>Causes:  User specify Password which contain one or more of restricted characters</p> <p>Scenario to reproduce: User edits connection and enter password which contain for example ' character and hit Save button</p> <p>System management: unmanaged</p> <pre><code>5.2.1 Correspond to 5.3.1\n5.3.1 message heading: \"WARNING\"\n5.3.1 message text: Password cannot contain certain characters. Invalid characters are: \u201c ' ; `\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.5_user_data_class/","title":"User Data Class","text":""},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.5_user_data_class/#5511-user-message","title":"5.5.1.1 User message","text":"<p>Location: Main window-&gt;Users-&gt;Add Button clicked (new window pop up)</p> <p>Action: User hit Save Button</p> <p>Causes: User Name field left blank</p> <p>Scenario to reproduce: User adding new user, User Name field left empty and user hit Save Button</p> <p>System management: unmanaged</p> <pre><code>5.2.1 Correspond to 5.3.1\n5.3.1 message heading: \"Information\"\n5.3.1 message text: Blank Username is not valid.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.5_user_data_class/#5512-user-message","title":"5.5.1.2 User message","text":"<p>Location: Main window-&gt;Users-&gt;Add Button clicked (new window pop up)</p> <p>Action: User hit Save Button</p> <p>Causes: User enter different text in Password and Confirm Password fields</p> <p>Scenario to reproduce: User adding new user and User enter different text in Password and Confirm Password fields and hit Save Button</p> <p>System management: unmanaged</p> <pre><code>5.2.1 Correspond to 5.3.1\n5.3.1 message heading: \" Information\"\n5.3.1 message text: Password does not match.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.5_user_data_class/#5513-user-message","title":"5.5.1.3 User message","text":"<p>Location: Main window-&gt;Users-&gt;Add Button clicked (new window pop up)</p> <p>Action: User hit Save Button</p> <p>Causes:  User specify User Name which already exist</p> <p>Scenario to reproduce: User adding new user, User enter user name which already exist and hit Save Button</p> <p>System management: unmanaged</p> <pre><code>5.2.1 Correspond to 5.3.1\n5.3.1 message heading: \"Information\"\n5.3.1 message text: Same Username already exist.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.6_edit_u_data_class/","title":"Edit U Data Class","text":""},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.6_edit_u_data_class/#5611-user-message","title":"5.6.1.1 User message","text":"<p>Location: Main window-&gt;Users-&gt;Edit Button clicked (new window pop up)</p> <p>Action: User hit Save Button</p> <p>Causes: User Name field left blank</p> <p>Scenario to reproduce: Editing user, User Name field left empty and user hit Save Button</p> <p>System management: unmanaged</p> <pre><code>5.2.1 Correspond to 5.3.1\n5.3.1 message heading: \"Information\"\n5.3.1 message text: Blank Username is not valid.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.6_edit_u_data_class/#5612-user-message","title":"5.6.1.2 User message","text":"<p>Location: Main window-&gt;Users-&gt;Edit Button clicked (new window pop up)</p> <p>Action: User hit Save Button</p> <p>Causes:  User specify User Name which already exist</p> <p>Scenario to reproduce: Editing user, User Name field contain user which already exist and hit Save Button</p> <p>System management: unmanaged</p> <pre><code>5.2.1 Correspond to 5.3.1\n5.3.1 message heading: \"Information\"\n5.3.1 message text: Same Username already exist.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.7_login_dialog_class/","title":"Login Dialog Class","text":""},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.7_login_dialog_class/#5711-user-message","title":"5.7.1.1 User message","text":"<p>Location: Logon </p> <p>Action: User hit Log On Button</p> <p>Causes:  User specify User Name which does not exist in database or Password does not match specified user password</p> <p>Scenario to reproduce: User authentication via AD/Broker old implementation. </p> <p>System management: managed and unmanaged</p> <pre><code>5.2.1 message heading:  \"Status\"\n5.2.1 message text: User authentication was successful but no Virtual Machine to this Domain User or the Domain Group.\n5.3.1 Not supported\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.7_login_dialog_class/#5712-user-message","title":"5.7.1.2 User message","text":"<p>Location: Logon </p> <p>Action: User hit Log On Button</p> <p>Causes:  User specify User Name which does not exist in database or Password does not match specified user password</p> <p>Scenario to reproduce: User authentication via AD/Broker old implementation. </p> <p>System management: managed and unmanaged</p> <pre><code>5.2.1 message heading:  \"Warning\"\n5.2.1 message text: Log on failed, Username or password is not valid locally or for domain. Please check log on credentials.\n5.3.1 Not supported\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.7_login_dialog_class/#5713-user-message","title":"5.7.1.3 User message","text":"<p>Location: Logon </p> <p>Action: User hit Log On Button</p> <p>Causes:  User specify User Name which does not exist in database or Password does not match specified user password</p> <p>Scenario to reproduce: User authentication via AD/Broker old implementation. Device not connected to network.</p> <p>System management: managed and unmanaged</p> <pre><code>5.2.1 message heading:  \"Network Status\"\n5.2.1 message text: Connection failed. Network is down.\n5.3.1 Not supported\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.7_login_dialog_class/#5714-user-message","title":"5.7.1.4 User message","text":"<p>Location: Logon </p> <p>Action: User hit Log On Button</p> <p>Causes:  User specify User Name which does not exist in database or Password does not match specified user password</p> <p>Scenario to reproduce: User authentication via AD/Broker old implementation. Device configured for DHCP, but IP not issued.</p> <p>System management: managed and unmanaged</p> <pre><code>5.2.1 message heading:  \"Network Status\"\n5.2.1 message text: Connection failed.  DHCP server not found.\n5.3.1 Not supported\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.7_login_dialog_class/#5715-user-message","title":"5.7.1.5 User message","text":"<p>Location: Logon </p> <p>Action: User hit Log On Button</p> <p>Causes:  User specify User Name which does not exist in database or Password does not match specified user password</p> <p>Scenario to reproduce: type User Name which does not exist in database</p> <p>System management: managed and unmanaged</p> <p>NOTE: Action performed in NORMAL MODE</p> <pre><code>5.2.1 Correspond to 5.3.1\n5.3.1 message heading: \"Warning\"\n5.3.1 message text: Username or Password entered is incorrect.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.7_login_dialog_class/#5716-user-message","title":"5.7.1.6 User message","text":"<p>Location: Logon </p> <p>Action: User hit Log On Button</p> <p>Causes:  User specify User Name exist in database and Password is correct, but user does not have Administrator privilege</p> <p>Scenario to reproduce: unknown, see Note</p> <p>System management: managed and unmanaged</p> <pre><code>5.2.1 message heading:   \"WARNING: SAFE MODE\"\n5.2.1 message text: Only Administrator may Log In in SAFE MODE.\n(NOTE: Action performed in SAFE MODE.  5.3.1 SAFE MODE is available only on 4K system)\n5.3.1 message heading: \"Warning\"\n5.3.1 message text: Only Administrator may Log In in SAFE MODE.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.7_login_dialog_class/#5717-user-message","title":"5.7.1.7 User message","text":"<p>Location: Logon </p> <p>Action: User hit Log On Button</p> <p>Causes:  User specify User Name which does not exist in database or Password does not match specified user password </p> <p>Scenario to reproduce: unknown, see Note</p> <p>System management: managed and unmanaged</p> <pre><code>5.2.1 Correspond to 5.3.1\n(NOTE: Action performed in SAFE MODE. 5.3.1 SAFE MODE is available only on 4K system)\n5.3.1 message heading: \"Warning\"\n5.3.1 message text: Only Administrator may Log In in SAFE MODE.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.7_login_dialog_class/#5718-user-message","title":"5.7.1.8 User message","text":"<p>Location: Logon</p> <p>Action: User hit Help Button (new window popup)</p> <p>Causes:  Normal processing </p> <p>Scenario to reproduce: User hit Help Button on logon screen</p> <p>System management: managed and unmanaged</p> <pre><code>5.2.1 Correspond to 5.3.1\n5.3.1 message heading: \"Help\"\n5.3.1 message text: Please visit www.blackbox.com\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.7_login_dialog_class/#5719-user-message","title":"5.7.1.9 User message","text":"<p>Location: Logon</p> <p>Action: User hit Help Button (new window popup)</p> <p>Causes:  Normal processing </p> <p>Scenario to reproduce: User hit Help Button on logon screen, see Note</p> <p>System management: managed and unmanaged</p> <pre><code>5.2.1 message heading: \"Help\"\n5.2.1 message text:   Please visit www.cloudiumsystems.com\nNOTE: Unit model starts with 300-02\nObsolete on 5.3.1 system\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.7_login_dialog_class/#57110-user-message","title":"5.7.1.10 User message","text":"<p>Location: Logon</p> <p>Action: User hit Help Button (new window popup)</p> <p>Causes:  Normal processing </p> <p>Scenario to reproduce: User hit Help Button on logon screen, see Note</p> <p>System management: managed and unmanaged</p> <pre><code>5.2.1 message heading: \"Help\"\n5.2.1 message text:   \n(NOTE: Unit model does not start with 300-01 or 300-02)\nObsolete on 5.3.1 system\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.7_login_dialog_class/#57111-user-message","title":"5.7.1.11 User message","text":"<p>Location: Logon</p> <p>Action: User hit Login button</p> <p>Causes:  User specify User Name which is defined as AD user and Password is correct or incorrect</p> <p>System management: managed</p> <pre><code>5.2.1 not supported\n5.3.1 message heading: \"Authentication\"\n5.3.1 message text: Internal error. Error code 'number'\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.7_login_dialog_class/#57112-user-message","title":"5.7.1.12 User message","text":"<p>Location: Logon</p> <p>Action: User hit Login button</p> <p>Causes:  User specify User Name which is defined as AD user and Password is incorrect</p> <p>Scenario to reproduce: Login attempt as AD user, but password is incorrect</p> <p>System management: managed</p> <pre><code>5.2.1 not supported\n5.3.1 message heading: \"Authentication\"\n5.3.1 message text: Authentication failed. Please try again.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.7_login_dialog_class/#57113-user-message","title":"5.7.1.13 User message","text":"<p>Location: Logon</p> <p>Action: User hit Login button</p> <p>Causes:  User specify User Name which is defined as AD user and Password is correct or incorrect</p> <p>Scenario to reproduce: Login attempt as AD user with correct password, but Boxilla did not reply within 30 sec</p> <p>System management: managed</p> <pre><code>5.2.1 not supported\n5.3.1 message heading: \"Authentication Timeout\"\n5.3.1 message text: System busy. Please try again.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.7_login_dialog_class/#57114-user-message","title":"5.7.1.14 User message","text":"<p>Location: Logon</p> <p>Action: User hit Login button</p> <p>Causes:  User specify User Name which is defined as AD user and Password is correct or incorrect</p> <p>Scenario to reproduce: Login attempt as AD user with correct password, but Boxilla is offline</p> <p>System management: managed</p> <pre><code>5.2.1 not supported\n5.3.1 message heading: \"Authentication\"\n5.3.1 message text: Boxilla manager can not be contacted. Check Boxilla Configuration.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.7_login_dialog_class/#57115-user-message","title":"5.7.1.15 User message","text":"<p>Location: Logon</p> <p>Action: User hit Login button</p> <p>Causes:  User specify User Name which is defined as AD user and Password is correct or incorrect</p> <pre><code>5.2.1 not supported\n5.3.1 message heading: \"Authentication\"\n5.3.1 message text: Authentication error. Error code &lt; error number (integer)&gt;.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.8_tx_settings_class/","title":"TX Settings Class","text":""},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.8_tx_settings_class/#5811-user-message","title":"5.8.1.1 User message","text":"<p>Location: Main window-&gt;Control-&gt;Transmitter Button clicked (new window pop up) </p> <p>Action: User edits IP address in correct IPV4 format and hit Apply button</p> <p>Causes: Device with this IP address not found</p> <p>Scenario to reproduce: On Transmitter dialog User edit IP address in correct IPV4 format and hit Apply button, but device with that IP does not exist on network</p> <p>System management: managed and unmanaged</p> <pre><code>5.2.1 not supported\n5.3.1 message heading: \"Error\"\n5.3.1 message text: Can not connect to Transmitter.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.8_tx_settings_class/#5812-user-message","title":"5.8.1.2 User message","text":"<p>Location: Main window-&gt;Control-&gt;Transmitter Button clicked (new window pop up) </p> <p>Action: User edits IP address in incorrect IPV4 format and hit Apply button</p> <p>Causes: Progress bar is shown until information is gathered from TX</p> <p>Scenario to reproduce: On Transmitter dialog User edits IP address in incorrect IPV4 format and hit Apply button</p> <p>System management: managed and unmanaged</p> <pre><code>5.2.1 Correspond to 5.3.1\n5.3.1 message heading: \"Transmitter Information\"\n5.3.1 message text: Transmitter IP Address is not valid.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.8_tx_settings_class/#5813-user-message","title":"5.8.1.3 User message","text":"<p>Location: Main window-&gt;Control-&gt;Transmitter Button clicked (new window pop up) </p> <p>Action: User hit edit IP address in correct IPV4 format and hit Apply button</p> <p>Causes: Progress bar is shown until information is gathered from TX</p> <p>Scenario to reproduce:</p> <p>System management: managed and unmanaged</p> <pre><code>5.2.1 not supported\n5.3.1 message heading: \"Transmitter Information\"\n5.3.1 message text: Please wait...\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.8_tx_settings_class/#5814-user-message","title":"5.8.1.4 User message","text":"<p>Location: Main window-&gt;Control-&gt;Transmitter Button clicked (new window pop up) </p> <p>Action: User hit Information Button</p> <p>Causes: Transmitter information gathered successfully message presented to user</p> <p>Scenario to reproduce: On Transmitter dialog User edits IP address in correct IPV4 format and hit Apply button.</p> <p>System management: managed and unmanaged</p> <pre><code>5.2.1 message heading:  \"Device Information\"\n5.2.1 message text: The device with IP Address &lt; device IPV4 address &gt; is reachable.\nDevice Model: &lt; device model number &gt;\nDevice Serial Number: &lt; device serial number &gt;\nDevice MAC: &lt; device MAC &gt;\nDevice Software Version: &lt; device software version number &gt;\n5.3.1 message heading: \"Transmitter Information\"\n5.3.1 message text: \nThe appliance with IP Address &lt; device IPV4 address &gt; is reachable.\"\nMPN: &lt; device MPN value &gt;\nSerial Number: &lt; device serial number &gt;\nMAC:  &lt; device MAC &gt;\nSoftware Version: &lt; device software version number &gt;\nMulticast Address: &lt; device multicast address &gt;\nMulticast Port: &lt; device multicast port &gt;\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.8_tx_settings_class/#5815-user-message","title":"5.8.1.5 User message","text":"<p>Location: Main window-&gt;Control-&gt;Transmitter Button clicked (new window pop up) -&gt;System Button clicked</p> <p>Action: User hit Information Button</p> <p>Causes: Transmitter Information reading failed. </p> <p>Scenario to reproduce: On Transmitter dialog user hit Information button</p> <p>System management: unmanaged</p> <pre><code>5.2.1 message heading: \"Error\"\n5.2.1 message text: Error &lt; error number (integer)&gt;. Unable to Acquire Device Information.\n5.3.1 message heading: \"Error\"  \n5.3.1 message text: Upgrade failed. Cannot retrieve information fromapplience.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.8_tx_settings_class/#5816-user-message","title":"5.8.1.6 User message","text":"<p>Location: Main window-&gt;Control-&gt;Transmitter Button clicked (new window pop up)</p> <p>Action: User hit Upgrade Button</p> <p>Causes: Failed to mount USB</p> <p>Scenario to reproduce: User hit Upgrade button on Transmitter dialog, but USB is not inserted.</p> <p>System management: unmanaged</p> <pre><code>5.2.1 not supported\n5.3.1 message heading: \"Error\"\n5.3.1 message text: Upgrade failed! Error checking USBmemory device.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.8_tx_settings_class/#5817-user-message","title":"5.8.1.7 User message","text":"<p>Location: Main window-&gt;Control-&gt;Transmitter Button clicked (new window pop up) </p> <p>Action: User hit Upgrade Button and select upgrade file from USB</p> <p>Causes: Process continue with progress bar</p> <p>Scenario to reproduce: User hit Upgrade button on Transmitter dialog and select upgrade file from usb </p> <p>System management: unmanaged</p> <pre><code>5.2.1 Correspond to 5.3.1\n5.3.1 message heading: \"Transmitter Upgrade\" \n5.3.1 message text: Please wait while Transmitter upgrading...\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.8_tx_settings_class/#5818-user-message","title":"5.8.1.8 User message","text":"<p>Location: Main window-&gt;Control-&gt;Transmitter Button clicked (new window pop up) </p> <p>Action: User hit Upgrade Button</p> <p>Causes: Transmitter Upgrade successful</p> <p>Scenario to reproduce: User hit Upgrade button on Transmitter dialog and select upgrade file from usb and process successfully completed</p> <p>System management: unmanaged</p> <pre><code>5.2.1 Correspond to 5.3.1\n5.3.1 message heading: \"Transmitter Upgrade\"\n5.3.1 message text: Transmitter Upgrade was successful.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.8_tx_settings_class/#5819-user-message","title":"5.8.1.9 User message","text":"<p>Location: Main window-&gt;Control-&gt;Transmitter Button clicked (new window pop up) </p> <p>Action: User hit Upgrade Button</p> <p>Causes: Transmitter Upgrade failed. &lt; error number (integer)&gt; represent one of error codes listed above</p> <p>Scenario to reproduce:</p> <p>System management:</p> <pre><code>5.2.1 message heading: \"Transmitter Upgrade\"\n5.2.1 message text: Transmitter Upgrade failed. Error &lt; error number (integer)&gt;\n5.3.1 message header and text in the case of error presented below (see 5.3.1 system error handling)\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.8_tx_settings_class/#58110-user-message","title":"5.8.1.10 User message","text":"<p>Location: Main window-&gt;Control-&gt;Transmitter Button clicked (new window pop up) </p> <p>Action: User hit Restore Button</p> <p>Causes: Transmitter Restore progress bar shown</p> <p>Scenario to reproduce: User hit Restore Button on Transmitter dialog</p> <p>System management: managed and unmanaged</p> <pre><code>5.2.1 Correspond to 5.3.1\n5.3.1 message header: \"Transmitter Restore\"\n5.3.1 message text: Restoring Transmitter Appliance. Please wait...\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.8_tx_settings_class/#58111-user-message","title":"5.8.1.11 User message","text":"<p>Location: Main window-&gt;Control-&gt;Transmitter Button clicked (new window pop up) </p> <p>Action: User hit Restore Button </p> <p>Causes: Transmitter Restore successful</p> <p>Scenario to reproduce: User hit Restore Button on Transmitter dialog and process completed successfully</p> <p>System management: managed and unmanaged</p> <pre><code>5.2.1 message heading: Transmitter Restore\n5.2.1 message text: Transmitter Restore was successful.\n5.3.1 message header: \"Transmitter Restore\"\n5.3.1 message text: Transmitter Restored successfully. Transmitter Rebooting.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.8_tx_settings_class/#58112-user-message","title":"5.8.1.12 User message","text":"<p>Location: Main window-&gt;Control-&gt;Transmitter Button clicked (new window pop up)</p> <p>Action: User hit Restore Button</p> <p>Causes: Transmitter Restore failed. &lt; error number (integer)&gt; represent one of error codes listed above</p> <p>Scenario to reproduce: User hit Restore Button on Transmitter dialog and process failed</p> <p>System management: managed and unmanaged</p> <pre><code>5.2.1 message heading: \"Error\"\n5.2.1 message text: Error &lt; error number (integer)&gt;. Transmitter Restore failed.\n5.3.1 message header and text in the case of error presented below (see 5.3.1 system error handling)\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.8_tx_settings_class/#58113-user-message","title":"5.8.1.13 User message","text":"<p>Location: Main window-&gt;Control-&gt;Transmitter Button clicked (new window pop up) </p> <p>Action: User hit Reboot Button</p> <p>Causes: Transmitter Reboot progress bar shown</p> <p>Scenario to reproduce: User hit Reboot Button on Transmitter dialog</p> <p>System management: unmanaged</p> <pre><code>5.2.1 Correspond to 5.3.1\n5.3.1 message header: \"Transmitter Reboot\"\n5.3.1 message text: Appliance reboot in progress. Please wait...\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.8_tx_settings_class/#58114-user-message","title":"5.8.1.14 User message","text":"<p>Location: Main window-&gt;Control-&gt;Transmitter Button clicked (new window pop up) -&gt;System Button clicked</p> <p>Action: User hit Reboot Button</p> <p>Causes: Normal processing</p> <p>Scenario to reproduce: User hit Reboot Button on Transmitter dialog</p> <p>System management: unmanaged</p> <pre><code>5.2.1 message heading: \"Transmitter Reboot\"\n5.2.1 message text: Transmitter will reboot now.\n5.3.1 not supported\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.8_tx_settings_class/#58115-user-message","title":"5.8.1.15 User message","text":"<p>Location: Main window-&gt;Control-&gt;Transmitter Button clicked (new window pop up) -&gt;System Button clicked</p> <p>Action: User hit Reboot Button</p> <p>Causes: TX reboot completed</p> <p>Scenario to reproduce: User hit Reboot Button on Transmitter dialog and process completed successfully</p> <p>System management: unmanaged</p> <pre><code>5.2.1 message heading: \"Reboot\"\n5.2.1 message text: Transmitter Rebooted successfully.\n5.3.1 message header: \"Transmitter Reboot\"\n5.3.1 message text: Appliance rebooted successfully.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.8_tx_settings_class/#58116-user-message","title":"5.8.1.16 User message","text":"<p>Location: Main window-&gt;Control-&gt;Transmitter Button clicked (new window pop up) -&gt;System Button clicked</p> <p>Action: User hit Reboot Button</p> <p>Causes: Transmitter Restore failed. &lt; error number (integer)&gt; represent one of error codes listed above</p> <p>Scenario to reproduce: User hit Reboot Button on Transmitter dialog but process failed</p> <p>System management: unmanaged</p> <pre><code>5.2.1 message heading: \"Error\"\n5.2.1 message text: Error &lt; error number (integer)&gt;. Transmitter Reboot failed.\n5.3.1 message header and text in the case of error presented below (see 5.3.1 system error handling)\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.8_tx_settings_class/#58117-user-message","title":"5.8.1.17 User message","text":"<p>Location: Main window-&gt;Control-&gt;Transmitter Button clicked (new window pop up) -&gt;System Button clicked</p> <p>Action: User hit Network Button</p> <p>Causes: Internal error ONLY 4K Devices</p> <p>Scenario to reproduce: unknown</p> <p>System management: unmanaged</p> <pre><code>5.3.1 message header: \"Error\"\n5.3.1 message text: Unable to retrieve settings fromTransmitter.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.8_tx_settings_class/#58118-user-message","title":"5.8.1.18 User message","text":"<p>Location: Main window-&gt;Control-&gt;Transmitter Button clicked (new window pop up) </p> <p>Action: User specifies Transmitter network settings and hit Apply Button</p> <p>Causes:  IP address left blank</p> <p>Scenario to reproduce: on Transmitter dialog User specifies Transmitter network settings, but IP field left empty and hit Apply Button</p> <p>System management: unmanaged</p> <pre><code>5.2.1 Correspond to 5.3.1\n5.3.1 message header: \"Information\"\n5.3.1 message text: IP address field is mandatory.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.8_tx_settings_class/#58119-user-message","title":"5.8.1.19 User message","text":"<p>Location: Main window-&gt;Control-&gt;Transmitter Button clicked (new window pop up) </p> <p>Action: User specifies Transmitter network settings and hit Apply Button</p> <p>Causes:  Network Mask left blank</p> <p>Scenario to reproduce: on Transmitter dialog User specifies Transmitter network settings, but Network Mask field left empty and hit Apply Button</p> <p>System management: unmanaged</p> <pre><code>5.2.1 Correspond to 5.3.1\n5.3.1 message header: \"Information\"\n5.3.1 message text: Network mask field is mandatory.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.8_tx_settings_class/#58120-user-message","title":"5.8.1.20 User message","text":"<p>Location: Main window-&gt;Control-&gt;Transmitter Button clicked (new window pop up) </p> <p>Action: User specifies Transmitter network settings and hit Apply Button</p> <p>Causes:  Gateway left blank</p> <p>Scenario to reproduce: on Transmitter dialog User specifies Transmitter network settings, but Gateway field left empty and hit Apply Button</p> <p>System management: unmanaged</p> <pre><code>5.2.1 Correspond to 5.3.1\n5.3.1 message header: \" Information\"\n5.3.1 message text: Default gateway field is mandatory.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.8_tx_settings_class/#58121-user-message","title":"5.8.1.21 User message","text":"<p>Location: Main window-&gt;Control-&gt;Transmitter Button clicked (new window pop up) </p> <p>Action: User specifies Transmitter network settings and hit Apply Button</p> <p>Causes:  IP address invalid</p> <p>Scenario to reproduce: on Transmitter dialog User specifies Transmitter network settings, but IP octets are not in 0:255 range and hit Apply Button</p> <p>System management: unmanaged</p> <pre><code>5.2.1 Correspond to 5.3.1\n5.3.1 message header: \"Transmitter IP Validation\"\n5.3.1 message text: New IP Address is not valid.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.8_tx_settings_class/#58122-user-message","title":"5.8.1.22 User message","text":"<p>Location: Main window-&gt;Control-&gt;Transmitter Button clicked (new window pop up) -&gt;Network Button clicked</p> <p>Action: User specifies Transmitter network settings and hit Apply Button</p> <p>Causes: Network Mask specified invalid</p> <p>Scenario to reproduce: on Transmitter dialog User specifies Transmitter network settings, but Network Mask octets are not in 0:255 range and hit Apply Button</p> <p>System management: unmanaged</p> <pre><code>5.2.1 Correspond to 5.3.1\n5.3.1 message header: \"Network Mask Validation\"\n5.3.1 message text: Network Mask is out of valid range. Reset default subnet mask.\nor\n5.3.1 message header: \"Network Mask Validation\"\n5.3.1 message text: Network Mask is out of valid range.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.8_tx_settings_class/#58123-user-message","title":"5.8.1.23 User message","text":"<p>Location: Main window-&gt;Control-&gt;Transmitter Button clicked (new window pop up) </p> <p>Action: User specifies Transmitter network settings and hit Apply Button</p> <p>Causes:  Gateway is same as IP address</p> <p>Scenario to reproduce: on Transmitter dialog User specifies Transmitter network settings, but IP and Gateway are the same and hit Apply Button</p> <p>System management: unmanaged</p> <pre><code>5.2.1 Correspond to 5.3.1\n5.3.1 message header: \"Default Gateway Validation\"\n5.3.1 message text: Device IP address and Gateway IP address cannot be the same\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.8_tx_settings_class/#58124-user-message","title":"5.8.1.24 User message","text":"<p>Location: Main window-&gt;Control-&gt;Transmitter Button clicked (new window pop up) </p> <p>Action: User specifies Transmitter network settings and hit Apply Button</p> <p>Causes:  Gateway invalid</p> <p>Scenario to reproduce: on Transmitter dialog User specifies Transmitter network settings, but Gateway octets are not in 0:255 range and hit Apply Button</p> <p>System management: unmanaged</p> <pre><code>5.2.1 Correspond to 5.3.1\n5.3.1 message header: \"Default Gateway Validation\"\n5.3.1 message text: New Gateway is not valid.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.8_tx_settings_class/#58125-user-message","title":"5.8.1.25 User message","text":"<p>Location: Main window-&gt;Control-&gt;Transmitter Button clicked (new window pop up) </p> <p>Action: User specifies Transmitter network settings and hit Apply Button</p> <p>Causes:  IP is same as on this receiver</p> <p>Scenario to reproduce: on Transmitter dialog User specifies Transmitter network settings, but IP is set to this Receiver IP address and user hit Apply Button</p> <p>System management: unmanaged</p> <pre><code>5.2.1 Correspond to 5.3.1\n5.3.1 message header: \"Information\"\n5.3.1 message text: IP address entered is already in use by this Receiver\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.8_tx_settings_class/#58126-user-message","title":"5.8.1.26 User message","text":"<p>Location: Main window-&gt;Control-&gt;Transmitter Button clicked (new window pop up) </p> <p>Action: User specifies Transmitter network settings and hit Apply Button</p> <p>Causes:  Multicast empty 4K devices only</p> <p>Scenario to reproduce: on Transmitter dialog User specifies Transmitter network settings, but Multicast field left empty and user hit Apply Button</p> <p>System management: unmanaged</p> <pre><code>5.2.1 not supported\n5.3.1 message header: \"Information\"\n5.3.1 message text: Cannot leave Multicast IP empty!\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.8_tx_settings_class/#58127-user-message","title":"5.8.1.27 User message","text":"<p>Location: Main window-&gt;Control-&gt;Transmitter Button clicked (new window pop up) </p> <p>Action: User specifies Transmitter network settings and hit Apply Button</p> <p>Causes:  Displayed Progress bar</p> <p>Scenario to reproduce: on Transmitter dialog User specifies Transmitter network settings correctly and user hit Apply Button</p> <p>System management: unmanaged</p> <pre><code>5.2.1 Correspond to 5.3.1\n5.3.1 message header: \"Transmitter Network Settings\"\n5.3.1 message text: Applying changes. Please wait...\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.8_tx_settings_class/#58128-user-message","title":"5.8.1.28 User message","text":"<p>Location: Main window-&gt;Control-&gt;Transmitter Button clicked (new window pop up) -&gt;Network Button clicked</p> <p>Action: User specifies Transmitter network settings and hit Apply Button</p> <p>Causes: Transmitter Network Settings successfully changed</p> <p>Scenario to reproduce: on Transmitter dialog User specifies Transmitter network settings correctly and hit Apply Button. Process completed successfully.</p> <p>System management: unmanaged</p> <pre><code>5.2.1 message heading:  \"Transmitter Network\"\n5.2.1 message text: Transmitter Network Settings changed successfully.\n5.3.1 message header: \"Transmitter Restore\" (need to open bug about wrong header and typo in text)\n5.3.1 message text: Transmitter Network settings changed successfully. \n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.8_tx_settings_class/#58129-user-message","title":"5.8.1.29 User message","text":"<p>Location: Main window-&gt;Control-&gt;Transmitter Button clicked (new window pop up) -&gt;Network Button clicked</p> <p>Action: User specifies Transmitter network settings and hit Apply Button</p> <p>Causes: Transmitter Network Settings changes failed. &lt; error number (integer)&gt; represent one of error codes listed above</p> <pre><code>5.2.1 message heading: \"Error\"\n5.2.1 message text: Error &lt; error number (integer)&gt;. Transmitter Network Settings change failed.\n5.3.1 message header and text in the case of error presented below (see 5.3.1 system error handling) \n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.8_tx_settings_class/#58130-user-message","title":"5.8.1.30 User message","text":"<p>Location: Main window-&gt;Control-&gt;Transmitter Button clicked (new window pop up) </p> <p>Action: User hit Discover Button</p> <p>Causes:  Normal processing. Information provided on the actions necessary to perform for TX IP Address Discovery</p> <p>Scenario to reproduce: on Transmitter dialog User hit Discover Button</p> <p>System management: unmanaged</p> <pre><code>5.2.1 message heading:  \"Information\"\n5.2.1 message text: To find Transmitter IP Address, perform the following actions:\n\n1. Connect directly to Transmitter \n2. Now Power cycle Transmitter and hit Next Button immediately\n3. Searching for Transmitter IP Address...\n\n5.3.1 message heading:  \"Discover\"\n5.3.1 message text: To find Transmitter IP Address, perform the following actions:\n\n1. Connect directly to Transmitter \n2. Power cycle Transmitter.\n3. Searching for Transmitter IP Address...\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.8_tx_settings_class/#58131-user-message","title":"5.8.1.31 User message","text":"<p>Location: Main window-&gt;Control-&gt;Transmitter Button clicked (new window pop up) </p> <p>Action: User hit Discover Button</p> <p>Causes:  Any of listed below errors is returned. &lt; error number (integer)&gt; represent error code</p> <p>Scenario to reproduce: on Transmitter dialog User hit Discover Button, then Next button, but process failed</p> <p>System management: unmanaged</p> <pre><code>5.2.1 message heading:  \"Error\"\n5.2.1 message text: Can not find Transmitter on network. Error &lt; error number (integer)&gt;\n5.3.1 message header and text in the case of error presented below (see 5.3.1 system error handling) \n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.8_tx_settings_class/#58132-user-message","title":"5.8.1.32 User message","text":"<p>Location: Main window-&gt;Control-&gt;Transmitter Button clicked (new window pop up) </p> <p>Action: User hit Discover Button</p> <p>Causes: successfully completed</p> <p>Scenario to reproduce: on Transmitter dialog User hit Discover Button, then Next button and process successfully completed</p> <p>System management: unmanaged</p> <pre><code>5.2.1 Correspond to 5.3.1\n5.3.1 message heading: \"Discover\"\n5.3.1 message text if all values returned: Transmitter IP address: &lt; device IPV4 address &gt; discovered.\nTransmitter Network Mask: &lt; network mask value &gt;\nTransmitter Gateway: &lt; gateway value &gt;\nor otherwise\n5.3.1 message text: Transmitter IP address: &lt; device IPV4 address &gt; discovered.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.8_tx_settings_class/#58133-user-message","title":"5.8.1.33 User message","text":"<p>Location: Main window-&gt;Control-&gt;Transmitter Button clicked (new window pop up) </p> <p>Action: User hit Preferences Button</p> <p>Causes: Progress bar displayed</p> <p>Scenario to reproduce: on Transmitter dialog User hit Preferences button</p> <p>System management: managed and unmanaged</p> <pre><code>5.2.1 Correspond to 5.3.1\n5.3.1 message heading:  \"Transmitter Preferences\"\n5.3.1 message text: Please wait...\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.8_tx_settings_class/#58134-user-message","title":"5.8.1.34 User message","text":"<p>Location: Main window-&gt;Control-&gt;Transmitter Button clicked (new window pop up) </p> <p>Action: User hit Preferences Button</p> <p>Causes: Read process failure</p> <p>Scenario to reproduce: on Transmitter dialog User hit Preferences button and process return HID reading error (script not found)</p> <p>System management: managed and unmanaged</p> <pre><code>5.2.1 message heading: \"Error\"\n5.2.1 message text: Transmitter HID settings read failed.\n5.3.1 not supported\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.8_tx_settings_class/#58135-user-message","title":"5.8.1.35 User message","text":"<p>Location: Main window-&gt;Control-&gt;Transmitter Button clicked (new window pop up) </p> <p>Action: User hit Preferences Button</p> <p>Causes: Read error occur within SSH process (errors SSH_GENERAL_ERROR, SSH_INIT_FAIL, SSH_GET_SOCKET_FAIL, SSH_CREATE_SESSION_FAIL, SH_DEVICE_RESPOND_ERROR).</p> <p>Scenario to reproduce: unknown</p> <p>System management: managed and unmanaged</p> <pre><code>5.2.1 Correspond to 5.3.1\n5.3.1 message heading: \"Error\"\n5.3.1 message text: Unable to connect with Transmitter. Error &lt; error number (integer)&gt;. \n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.8_tx_settings_class/#58136-user-message","title":"5.8.1.36 User message","text":"<p>Location: Main window-&gt;Control-&gt;Transmitter Button clicked (new window pop up) </p> <p>Action: User hit Preferences Button</p> <p>Causes: Read error occurs within SSH process (error SSH_SOCKET_OPTION_ERROR).</p> <p>Scenario to reproduce: unknown</p> <p>System management: managed and unmanaged</p> <pre><code>5.2.1 Correspond to 5.3.1\n5.3.1 message heading: \"Error\"\n5.3.1 message text:  Unable to connect with Transmitter. Error &lt; error number (integer)&gt;.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.8_tx_settings_class/#58137-user-message","title":"5.8.1.37 User message","text":"<p>Location: Main window-&gt;Control-&gt;Transmitter Button clicked (new window pop up) </p> <p>Action: User hit Preferences Button</p> <p>Causes: Read error occurs within SSH process (error SSH_SOCKET_BIND_ERROR).</p> <p>Scenario to reproduce: unknown</p> <p>System management: managed and unmanaged</p> <pre><code>5.2.1 message header:  \"Error\"\n5.2.1 message text:  Setting SSH socket bind failed.\n5.3.1 message heading: \"Error\"\n5.3.1 message text:  Unable to connect with Transmitter. Error &lt; error number (integer)&gt;. \n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.8_tx_settings_class/#58138-user-message","title":"5.8.1.38 User message","text":"<p>Location: Main window-&gt;Control-&gt;Transmitter Button clicked (new window pop up) </p> <p>Action: User hit Preferences Button</p> <p>Causes: Read error occurs within SSH process (error SSH_LED_FLASH_FAIL).</p> <p>Scenario to reproduce: Remove flash_led.sh on transmitter and run upgrade.</p> <p>System management: managed and unmanaged</p> <pre><code>5.2.1 not supported\n5.3.1 message heading: \"Error\"\n5.3.1 message text: LED Flash failed\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.8_tx_settings_class/#58139-user-message","title":"5.8.1.39 User message","text":"<p>Location: Main window-&gt;Control-&gt;Transmitter Button clicked (new window pop up) </p> <p>Action: User hit Preferences Button</p> <p>Causes: Read error occurs within SSH process (error SSH_CLASS_CHECK_FAIL).</p> <p>Scenario to reproduce: lsm-&gt;upgrade_format is incompatible (expected Dual, but set to Single or otherwise)</p> <p>System management: managed and unmanaged</p> <pre><code>5.2.1 Correspond to 5.3.1\n5.3.1 message heading:  \"Warning\"\n5.3.1 message text: Warning: You cannot upgrade a Transmitter with a Receiver file or visa versa. Upgrade process cancelled.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.8_tx_settings_class/#58140-user-message","title":"5.8.1.40 User message","text":"<p>Location: Main window-&gt;Control-&gt;Transmitter Button clicked (new window pop up) </p> <p>Action: User hit Preferences Button</p> <p>Causes: Read error occurs within SSH process (error SSH_BRAND_CHECK_FAIL).</p> <p>Scenario to reproduce: lsm-&gt;board_brand is incompatible (for example expected EMD, but it is set to some other value</p> <p>System management: managed and unmanaged</p> <pre><code>5.2.1 Correspond to 5.3.1\n5.3.1 message heading:  \"Warning\"\n5.3.1 message text: Warning: This is not a valid upgrade file. Upgrade process cancelled.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.8_tx_settings_class/#58141-user-message","title":"5.8.1.41 User message","text":"<p>Location: Main window-&gt;Control-&gt;Transmitter Button clicked (new window pop up) </p> <p>Action: User hit Preferences Button</p> <p>Causes: Read error occurs within SSH process (error SSH_USB_MOUNT_ERROR).</p> <p>Scenario to reproduce: USB not present when performing transmitter diagnostics</p> <p>System management: managed and unmanaged</p> <pre><code>5.2.1 not supported\n5.3.1 message heading: \"Error\"\n5.3.1 message text: An error occurred on mounting the USB memory device.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.8_tx_settings_class/#58142-user-message","title":"5.8.1.42 User message","text":"<p>Location: Main window-&gt;Control-&gt;Transmitter Button clicked (new window pop up) </p> <p>Action: User hit Preferences Button</p> <p>Causes: Read error occurs within SSH process (error SSH_PACKAGE_CHECK_FAIL).</p> <p>Scenario to reproduce: lsmData.package1 value is incompatible (for example Deel board expects \"Tech3\", but actual value is different)</p> <p>System management: unmanaged</p> <pre><code>5.2.1 Correspond to 5.3.1\n5.3.1 message heading: \"Warning\"\n5.3.1 message text: Warning: No relevant upgrade package is present. Please check release notes. Upgrade process cancelled.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.8_tx_settings_class/#58143-user-message","title":"5.8.1.43 User message","text":"<p>Location: Main window-&gt;Control-&gt;Transmitter Button clicked (new window pop up) </p> <p>Action: User hit Preferences Button</p> <p>Causes: Read error occurs within SSH process (error SSH_COMPATIBILITY_FAIL).</p> <p>Scenario to reproduce: board compatibility is bigger than lsm compatibility</p> <p>System management: unmanaged</p> <pre><code>5.2.1 Correspond to 5.3.1\n5.3.1 message heading: \"Warning\"\n5.3.1 message text: Warning: It is not possible to upgrade to this upgrade file version. Please check release notes. Upgrade process cancelled.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.8_tx_settings_class/#58144-user-message","title":"5.8.1.44 User message","text":"<p>Location: Main window-&gt;Control-&gt;Transmitter Button clicked (new window pop up) </p> <p>Action: User hit Preferences Button</p> <p>Causes: Read error occurs within SSH process (error SSH_FILE_SEARCH_FAIL).</p> <p>Scenario to reproduce: For example when it is necessary to transfer cloned EDID, but file is not found.</p> <p>System management: unmanaged</p> <pre><code>5.2.1 Correspond to 5.3.1\n5.3.1 message heading: \"Error\"\n5.3.1 message text: Upgrade failed: Cannot find upgrade file.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.8_tx_settings_class/#58145-user-message","title":"5.8.1.45 User message","text":"<p>Location: Main window-&gt;Control-&gt;Transmitter Button clicked (new window pop up) </p> <p>Action: User hit Preferences Button</p> <p>Causes: Read error occur within SSH process (error SSH_SCP_SEND_FAIL, SSH_PERMISSION_CHANGE_FAIL, SSH_EXTRACT_UPGRADE_FAIL, SSH_RUN_UPGRADE_FAIL, SSH_REBOOT_FAIL).</p> <p>Scenario to reproduce: unknown</p> <p>System management: unmanaged</p> <pre><code>5.2.1 Correspond to 5.3.1\n5.3.1 message heading: \"Error\"\n5.3.1 message text: Upgrade failed: Upgrade file error\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.8_tx_settings_class/#58146-user-message","title":"5.8.1.46 User message","text":"<p>Location: Main window-&gt;Control-&gt;Transmitter Button clicked (new window pop up) </p> <p>Action: User hit Preferences Button</p> <p>Causes: Read error occurs within SSH process (error SSH_GET_INFO_FAIL).</p> <p>Scenario to reproduce: unknown (failed to retrieve ethaddr from remote device)</p> <p>System management: manager and unmanaged</p> <pre><code>5.2.1 Correspond to 5.3.1\n5.3.1 message heading: \"Error\"  \n5.3.1 message text: Upgrade failed: Cannot retrieve information from appliance.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.8_tx_settings_class/#58147-user-message","title":"5.8.1.47 User message","text":"<p>Location: Main window-&gt;Control-&gt;Transmitter Button clicked (new window pop up) </p> <p>Action: User hit Upgrade Button</p> <p>Causes: Read error occurs within SSH process (error SSH_VER_CHECK_FAIL).</p> <p>Scenario to reproduce: unknown (post upgrade transmitter: software version on device does not correspond to software version in lsm)</p> <p>System management: unmanaged</p> <pre><code>5.2.1 Correspond to 5.3.1\n5.3.1 message heading: \"Error\"\n5.3.1 message text: Upgrade failed: Software version did not update\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.8_tx_settings_class/#58148-user-message","title":"5.8.1.48 User message","text":"<p>Location: Main window-&gt;Control-&gt;Transmitter Button clicked (new window pop up) </p> <p>Action: User hit Upgrade Button</p> <p>Causes: Read error occurs within SSH process (error SSH_NO_UPGRADE_REQUIRED).</p> <p>Scenario to reproduce: software version on device is the same as software version in lsm</p> <p>System management: managed and unmanaged</p> <pre><code>5.2.1 Correspond to 5.3.1\n5.3.1 message heading: \"Warning\"\n5.3.1 message text: Warning: No upgrade required.  Software version is already on appliance.\n.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.8_tx_settings_class/#58149-user-message","title":"5.8.1.49 User message","text":"<p>Location: Main window-&gt;Control-&gt;Transmitter Button clicked (new window pop up) </p> <p>Action: User hit Discover</p> <p>Causes: Read error occurs within SSH process (error SSH_RECVFROM_ERROR). Failed to receive valid IP address</p> <p>Scenario to reproduce: unknown </p> <p>System management: managed and unmanaged</p> <pre><code>5.2.1 message header: \"Error\"\n5.2.1 message text: An error occured on receiving data from SSH host\n5.3.1 not supported\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.8_tx_settings_class/#58150-user-message","title":"5.8.1.50 User message","text":"<p>Location: Main window-&gt;Control-&gt;Transmitter Button clicked (new window pop up) </p> <p>Action: User hit Preferences Button</p> <p>Causes: Read error occurs within SSH process (error SSH_MANAGED_TOKEN_ERROR).</p> <p>Scenario to reproduce: Transmitter managed in another domain</p> <p>System management: managed and unmanaged</p> <pre><code>5.2.1 Correspond to 5.3.1\n5.3.1 message heading: \"Restricted Action\"\n5.3.1 message text: You do not have permission to reconfigure this Transmitter. It is part of another domain\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.8_tx_settings_class/#58151-user-message","title":"5.8.1.51 User message","text":"<p>Location: Main window-&gt;Control-&gt;Transmitter Button clicked (new window pop up) </p> <p>Action: User hit Preferences Button</p> <p>Causes: Read error occurs within SSH process (error SSH_TX_CHECK_FAIL).</p> <p>Scenario to reproduce: Device is not Transmitter</p> <p>System management: managed and unmanaged</p> <pre><code>5.2.1 Correspond to 5.3.1\n5.3.1 message heading: \"Access Denied\"\n5.3.1 message text: The appliance you are trying to access is not a Transmitter.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.8_tx_settings_class/#58152-user-message","title":"5.8.1.52 User message","text":"<p>Location: Main window-&gt;Control-&gt;Transmitter Button clicked (new window pop up) </p> <p>Action: User hit Preferences Button</p> <p>Causes: Read error occurs within SSH process (error SSH_COMMAND_EXECUTION_FAIL).</p> <p>Scenario to reproduce: unknown</p> <p>System management: managed and unmanaged</p> <pre><code>5.2.1 Correspond to 5.3.1\n5.3.1 message heading: \"Error\"\n5.3.1 message text:  Process error.  Error &lt; error number (integer)&gt;.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.8_tx_settings_class/#58153-user-message","title":"5.8.1.53 User message","text":"<p>Location: Main window-&gt;Control-&gt;Transmitter Button clicked (new window pop up) </p> <p>Action: User hit Preferences Button</p> <p>Causes: Read error occurs within SSH process (error SSH_CHANNEL_ERROR).</p> <p>Scenario to reproduce: unknown</p> <p>System management: managed and unmanaged</p> <pre><code>5.2.1 Correspond to 5.3.1\n5.3.1 message heading: \"Error\"\n5.3.1 message text:  Unable to connect with Transmitter. Error &lt; error number (integer)&gt;.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.8_tx_settings_class/#58154-user-message","title":"5.8.1.54 User message","text":"<p>Location: Main window-&gt;Control-&gt;Transmitter Button clicked (new window pop up) </p> <p>Action: User hit Preferences Button</p> <p>Causes: Read error occurs within SSH process (error SSH_SET_EDID_ERROR).</p> <p>Scenario to reproduce: unknown</p> <p>System management: managed and unmanaged</p> <pre><code>5.2.1 Correspond to 5.3.1\n5.3.1 message heading: \"Error\"\n5.3.1 message text: An error occurred whensetting the EDID option\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.8_tx_settings_class/#58155-user-message","title":"5.8.1.55 User message","text":"<p>Location: Main window-&gt;Control-&gt;Transmitter Button clicked (new window pop up) </p> <p>Action: User hit Preferences Button</p> <p>Causes: Read error occurs within SSH process (error SSH_GET_EDID_ERROR).</p> <p>Scenario to reproduce: unknown</p> <p>System management: managed and unmanaged</p> <pre><code>5.2.1 Correspond to 5.3.1\n5.3.1 message heading: \"Error\"\n5.3.1 message text: An error occurred whengetting the EDID option\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.8_tx_settings_class/#58156-user-message","title":"5.8.1.56 User message","text":"<p>Location: Main window-&gt;Control-&gt;Transmitter Button clicked (new window pop up) </p> <p>Action: User hit Preferences Button</p> <p>Causes: Read error occur within SSH process (error SSH_SET_TX_PREFS_ERROR).</p> <p>Scenario to reproduce: unknown</p> <p>System management: managed and unmanaged</p> <pre><code>5.2.1 Correspond to 5.3.1\n5.3.1 message heading: \"Error\"\n5.3.1 message text: An error occurred when setting Transmitter preferences.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.8_tx_settings_class/#58157-user-message","title":"5.8.1.57 User message","text":"<p>Location: Main window-&gt;Control-&gt;Transmitter Button clicked (new window pop up) </p> <p>Action: User hit Preferences Button</p> <p>Causes: Read error occurs within SSH process (error SSH_GET_SPN_ERROR).</p> <p>Scenario to reproduce: unknown</p> <p>System management: managed and unmanaged</p> <p><pre><code>5.2.1 Correspond to 5.3.1\n5.3.1 message heading: \"Error\"\n5.3.1 message text: An error occurred when getting the appliance Model.\n</code></pre> NOTE: If appliance MPN is 300-016 then Model is DTX1000-R-S (Within software Model is called spn). Please see full table of mpn translation in appendix .</p>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.8_tx_settings_class/#58158-user-message","title":"5.8.1.58 User message","text":"<p>Location: Main window-&gt;Control-&gt;Transmitter Button clicked (new window pop up) </p> <p>Action: User hit Preferences Button</p> <p>Causes: Read error occurs within SSH process (error SSH_GET_SERIAL_FAIL).</p> <p>Scenario to reproduce: unknown</p> <p>System management: managed and unmanaged</p> <pre><code>5.2.1 Correspond to 5.3.1\n5.3.1 message heading: \"Error\"\n5.3.1 message text: An error occurred when getting the appliance Serial Number.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.8_tx_settings_class/#58159-user-message","title":"5.8.1.59 User message","text":"<p>Location: Main window-&gt;Control-&gt;Transmitter Button clicked (new window pop up) </p> <p>Action: User hit Preferences Button</p> <p>Causes: Read error occurs within SSH process (error SSH_SCP_RECV_ERROR).</p> <p>Scenario to reproduce: unknown</p> <p>System management: managed and unmanaged</p> <pre><code>5.2.1 not Supported\n5.3.1 message heading: \"Error\"\n5.3.1 message text: Process error.  Error &lt; error number (integer)&gt;.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.8_tx_settings_class/#58160-user-message","title":"5.8.1.60 User message","text":"<p>Location: Main window-&gt;Control-&gt;Transmitter Button clicked (new window pop up) </p> <p>Action: User hit Preferences Button</p> <p>Causes: Read error occurs within SSH process (error SSH_GET_BROADCAST_ERROR).</p> <p>Scenario to reproduce: unknown</p> <p>System management: managed and unmanaged</p> <pre><code>5.2.1 not Supported\n5.3.1 message heading: \"Error\"\n5.3.1 message text: An error occurred when getting the applience broadcast address\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.8_tx_settings_class/#58161-user-message","title":"5.8.1.61 User message","text":"<p>Location: Main window-&gt;Control-&gt;Transmitter Button clicked (new window pop up) </p> <p>Action: User hit Preferences Button</p> <p>Causes: Read error occurs within SSH process (error SSH_SAVE_FILE_ERROR).</p> <p>Scenario to reproduce: unknown</p> <p>System management: managed and unmanaged</p> <pre><code>5.2.1 Correspond to 5.3.1\n5.3.1 message heading: \"Error\"\n5.3.1 message text:  Process error.  Error &lt; error number (integer)&gt;.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.8_tx_settings_class/#58162-user-message","title":"5.8.1.62 User message","text":"<p>Location: Main window-&gt;Control-&gt;Transmitter Button clicked (new window pop up) </p> <p>Action: User hit Preferences Button</p> <p>Causes: Read error occurs within SSH process (error SSH_GET_TOKEN_ERROR).</p> <p>Scenario to reproduce: unknown</p> <p>System management: managed and unmanaged</p> <pre><code>5.2.1 Correspond to 5.3.1\n5.3.1 message heading: \"Error\"\n5.3.1 message text:  Process error.  Error &lt; error number (integer)&gt;.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.8_tx_settings_class/#58163-user-message","title":"5.8.1.63 User message","text":"<p>Location: Main window-&gt;Control-&gt;Transmitter Button clicked (new window pop up) </p> <p>Action: User hit Preferences Button</p> <p>Causes: Read error occurs within SSH process (error SSH_FILE_OPEN_ERROR).</p> <p>Scenario to reproduce: unknown</p> <p>System management: managed and unmanaged</p> <pre><code>5.2.1 Correspond to 5.3.1\n5.3.1 message heading: \"Error\"\n5.3.1 message text:  Process error.  Error &lt; error number (integer)&gt;.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.8_tx_settings_class/#58164-user-message","title":"5.8.1.64 User message","text":"<p>Location: Main window-&gt;Control-&gt;Transmitter Button clicked (new window pop up) </p> <p>Action: User hit Preferences Button</p> <p>Causes: Read error occurs within SSH process (error SSH_XML_READ_ERROR).</p> <p>Scenario to reproduce: unknown</p> <p>System management: managed and unmanaged</p> <pre><code>5.2.1 not Supported\n5.3.1 message heading: \"Error\"\n5.3.1 message text:  Process error.  Error &lt; error number (integer)&gt;.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.8_tx_settings_class/#58165-user-message","title":"5.8.1.65 User message","text":"<p>Location: Main window-&gt;Control-&gt;Transmitter Button clicked (new window pop up) </p> <p>Action: User hit Preferences Button</p> <p>Causes: Read error occurs within SSH process (error SSH_GET_NOISE_FILTER_ERROR).</p> <p>Scenario to reproduce: unknown</p> <p>System management: managed and unmanaged</p> <pre><code>5.2.1 Correspond to 5.3.1\n5.3.1 message heading: \"Error\"\n5.3.1 message text: An error occurred when getting the noise filter settings.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.8_tx_settings_class/#58166-user-message","title":"5.8.1.66 User message","text":"<p>Location: Main window-&gt;Control-&gt;Transmitter Button clicked (new window pop up) </p> <p>Action: User hit Preferences Button</p> <p>Causes: Read error occurs within SSH process (error SSH_FILENAME_LENGTH_ERROR).</p> <p>Scenario to reproduce: unknown</p> <p>System management: managed and unmanaged</p> <pre><code>5.2.1 not Supported\n5.3.1 message heading: \"Error\"\n5.3.1 message text:  Process error.  Error &lt; error number (integer)&gt;.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.8_tx_settings_class/#58167-user-message","title":"5.8.1.67 User message","text":"<p>Location: Main window-&gt;Control-&gt;Transmitter Button clicked (new window pop up) </p> <p>Action: User hit Preferences Button</p> <p>Causes: Read error occurs within SSH process (error SSH_XML_WRITE_ERROR).</p> <p>Scenario to reproduce: unknown</p> <p>System management: managed and unmanaged</p> <pre><code>5.2.1 not supported\n5.3.1 message heading: \"Error\"\n5.3.1 message text:  Process error.  Error &lt; error number (integer)&gt;.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.8_tx_settings_class/#58168-user-message","title":"5.8.1.68 User message","text":"<p>Location: Main window-&gt;Control-&gt;Transmitter Button clicked (new window pop up) </p> <p>Action: User hit Preferences Button</p> <p>Causes: Read error occurs within SSH process (error SSH_GET_MODEL_FAIL).</p> <p>Scenario to reproduce: unknown</p> <p>System management: managed and unmanaged</p> <pre><code>5.2.1 Correspond to 5.3.1\n5.3.1 message heading: \"Error\"\n5.3.1 message text: An error occurred when getting the appliance MPN.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.8_tx_settings_class/#58169-user-message","title":"5.8.1.69 User message","text":"<p>Location: Main window-&gt;Control-&gt;Transmitter Button clicked (new window pop up) </p> <p>Action: User hit Preferences Button</p> <p>Causes: Read error occurs within SSH process (error SSH_GET_HID_ERROR).</p> <p>Scenario to reproduce: unknown</p> <p>System management: managed and unmanaged</p> <pre><code>5.2.1 Correspond to 5.3.1\n5.3.1 message heading: \"Error\"\n5.3.1 message text: An error occurred when getting the HID option\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.8_tx_settings_class/#58170-user-message","title":"5.8.1.70 User message","text":"<p>Location: Main window-&gt;Control-&gt;Transmitter Button clicked (new window pop up) </p> <p>Action: User hit Preferences Button</p> <p>Causes: Read error occurs within SSH process (error SSH_GET_DEVICE_TYPE_ERROR).</p> <p>Scenario to reproduce: unknown</p> <p>System management: managed and unmanaged</p> <pre><code>5.2.1 Correspond to 5.3.1\n5.3.1 message heading: \"Error\"\n5.3.1 message text: An error occurred when getting the appliance type.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.8_tx_settings_class/#58171-user-message","title":"5.8.1.71 User message","text":"<p>Location: Main window-&gt;Control-&gt;Transmitter Button clicked (new window pop up) </p> <p>Action: User hit Preferences Button</p> <p>Causes: Read error occurs within SSH process (error SSH_DEVICE_TYPE_CHECK_FAIL).</p> <p>Scenario to reproduce: unknown</p> <p>System management: managed and unmanaged</p> <pre><code>5.2.1 Correspond to 5.3.1\n5.3.1 message heading: \"Error\"\n5.3.1 message text: An error occurred when checking the appliance type.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.8_tx_settings_class/#58172-user-message","title":"5.8.1.72 User message","text":"<p>Location: Main window-&gt;Control-&gt;Transmitter Button clicked (new window pop up) </p> <p>Action: User hit Preferences Button</p> <p>Causes: Read error occurs within SSH process (error SSH_COMPATIBILITY_FAIL).</p> <p>Scenario to reproduce: unknown</p> <p>System management: managed and unmanaged</p> <pre><code>5.2.1 Correspond to 5.3.1\n5.3.1 message heading: \"Video Preferences\"\n5.3.1 message text: Selected option is not supported on this Transmitter. model\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.8_tx_settings_class/#58173-user-message","title":"5.8.1.73 User message","text":"<p>Location: Main window-&gt;Control-&gt;Transmitter Button clicked (new window pop up) </p> <p>Action: User hit Preferences Button</p> <p>Causes: Read error occurs within SSH process (any other error).</p> <p>Scenario to reproduce: Device is not Transmitter</p> <p>System management: managed and unmanaged</p> <pre><code>5.2.1 Correspond to 5.3.1\n5.3.1 message header: \"Error\"\n5.3.1 message text:  Error &lt; error number (integer)&gt;. \n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.8_tx_settings_class/#58174-user-message","title":"5.8.1.74 User message","text":"<p>Location: Main window-&gt;Control-&gt;Transmitter Button clicked (new window pop up) </p> <p>Action: User hit Diagnostics Button</p> <p>Causes: Progress bar displayed</p> <p>Scenario to reproduce: on Transmitter dialog User hit Diagnostics Button</p> <p>System management: managed and unmanaged</p> <pre><code>5.2.1 Correspond to 5.3.1\n5.3.1 message heading:  \"Diagnostics Progress\"\n5.3.1 message text: Transmitter diagnostics is in progress. Please wait...\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.8_tx_settings_class/#58175-user-message","title":"5.8.1.75 User message","text":"<p>Location: Main window-&gt;Control-&gt;Transmitter Button clicked (new window pop up) </p> <p>Action: User hit Diagnostics Button</p> <p>Causes: USB not found</p> <p>Scenario to reproduce: on Transmitter dialog User hit Diagnostics Button, but USB not inserted</p> <p>System management: managed and unmanaged</p> <pre><code>5.2.1 message heading: \"Error\"\n5.2.1 message text: Error 2. Can't open USB device..., Transmitter diagnostics file export failed.\n5.3.1 message heading: \"Error\"\n5.3.1 message text: Export failed, USB memory device not found\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.8_tx_settings_class/#58176-user-message","title":"5.8.1.76 User message","text":"<p>Location: Main window-&gt;Control-&gt;Transmitter Button clicked (new window pop up) </p> <p>Action: User hit Diagnostics Button</p> <p>Causes: New dialog where user specify file name </p> <p>Scenario to reproduce: on Transmitter dialog User hit Diagnostics Button, dialog shown to set filename.</p> <p>System management: managed and unmanaged</p> <pre><code>5.2.1 Correspond to 5.3.1\n5.3.1 message heading:  \"Save As\"\n5.3.1 message text: &lt;list of files&gt;\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.8_tx_settings_class/#58177-user-message","title":"5.8.1.77 User message","text":"<p>Location: Main window-&gt;Control-&gt;Transmitter Button clicked (new window pop up) </p> <p>Action: User hit Diagnostics Button</p> <p>Causes: New dialog where user specify file name but then hit cancel</p> <p>Scenario to reproduce: on Transmitter dialog User hit Diagnostics Button, dialog shown to set filename, but user hit Cancel</p> <p>System management: managed and unmanaged</p> <pre><code>5.2.1 Correspond to 5.3.1\n5.3.1 message heading:  \"Transmitter Diagnostics\"\n5.3.1 message text: Transmitter diagnostics file export cancelled.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.8_tx_settings_class/#58178-user-message","title":"5.8.1.78 User message","text":"<p>Location: Main window-&gt;Control-&gt;Transmitter Button clicked (new window pop up) </p> <p>Action: User hit Diagnostics Button</p> <p>Causes: New dialog where user specify file name, then hit Save, but file with this name already exist (Yes or No)</p> <p>Scenario to reproduce: on Transmitter dialog User hit Diagnostics Button, dialog shown to set filename, user set filename which already exist on USB </p> <p>System management: managed and unmanaged</p> <pre><code>5.2.1 Correspond to 5.3.1\n5.3.1 message heading:  \"Diagnostics File\"\n5.3.1 message text: Diagnostics file with same name already exist. Are you sure you want to overwrite the existing file?\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.8_tx_settings_class/#58179-user-message","title":"5.8.1.79 User message","text":"<p>Location: Main window-&gt;Control-&gt;Transmitter Button clicked (new window pop up) </p> <p>Action: User hit Diagnostics Button</p> <p>Causes: User decided No in previous option</p> <p>Scenario to reproduce: on Transmitter dialog User hit Diagnostics Button, dialog shown to set filename, user set filename which already exist on USB, and then select not to save it. System management: managed and unmanaged</p> <pre><code>5.2.1 Correspond to 5.3.1\n5.3.1 message heading:  \"Transmitter Diagnostics\"\n5.3.1 message text: Transmitter diagnostics file export cancelled.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.8_tx_settings_class/#58180-user-message","title":"5.8.1.80 User message","text":"<p>Location: Main window-&gt;Control-&gt;Transmitter Button clicked (new window pop up) </p> <p>Action: User hit Diagnostics Button</p> <p>Causes: Process successfully completed</p> <p>Scenario to reproduce: on Transmitter dialog User hit Diagnostics Button, dialog shown to set filename, user set unique name and Save.</p> <p>System management: managed and unmanaged</p> <pre><code>5.2.1 Correspond to 5.3.1\n5.3.1 message heading: \"Transmitter Diagnostics\"\n5.3.1 message text: Transmitter diagnostics file successfully saved on USB memory device.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.8_tx_settings_class/#58181-user-message","title":"5.8.1.81 User message","text":"<p>Location: Main window-&gt;Control-&gt;Transmitter Button clicked (new window pop up) </p> <p>Action: User hit Diagnostics Button</p> <p>Causes: TX diagnostics file transfer to USB failed</p> <p>Scenario to reproduce: on Transmitter dialog User hit Diagnostics Button, dialog shown to set filename, user set unique name and Save, but there is not enough space on USB</p> <p>System management: managed and unmanaged</p> <pre><code>5.2.1 Correspond to 5.3.1\n5.3.1 message heading:  \"Error\"\n5.3.1 message text: Transmitter diagnostics file export failed. Unknown error.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.9_debug_dialog_class/","title":"Debug Dialog Class","text":""},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.9_debug_dialog_class/#5911-user-message","title":"5.9.1.1 User message","text":"<p>Location: Main window-&gt;Control-&gt;System Diagnostics Button clicked (new window pop up) </p> <p>Action: User hit Run Button</p> <p>Causes: Internal. Fail to open /proc/mounts</p> <pre><code>5.2.1 Correspond to 5.3.1\n5.3.1 message heading:  \"Error\"\n5.3.1 message text: Export Receiver diagnostics failed. Unknown error.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.9_debug_dialog_class/#5912-user-message","title":"5.9.1.2 User message","text":"<p>Location: Main window-&gt;Control-&gt;System Diagnostics Button clicked (new window pop up) </p> <p>Action: User hit Run Button</p> <p>Causes: USB not found</p> <p>Scenario to reproduce: User run Receiver diagnostics, but USB is not inserted</p> <p>System management: managed and unmanaged</p> <pre><code>5.2.1 Correspond to 5.3.1\n5.3.1 message heading:  \"Error\"\n5.3.1 message text: Export failed. USB memory device not found.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.9_debug_dialog_class/#5913-user-message","title":"5.9.1.3 User message","text":"<p>Location: Main window-&gt;Control-&gt;System Diagnostics Button clicked (new window pop up) </p> <p>Action: User hit Run Button</p> <p>Causes: User asked to provide file name to save diagnostics, but user hit Cancel Button</p> <p>Scenario to reproduce: User run Receiver diagnostics, provide file name to save diagnostics, but hit Cancel button</p> <p>System management: managed and unmanaged</p> <pre><code>5.2.1 Correspond to 5.3.1\n5.3.1 message heading:  \"Receiver Diagnostics\"\n5.3.1 message text: Receiver diagnostics file export cancelled.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.9_debug_dialog_class/#5914-user-message","title":"5.9.1.4 User message","text":"<p>Location: Main window-&gt;Control-&gt;System Diagnostics Button clicked (new window pop up) </p> <p>Action: User hit Run Button</p> <p>Causes: User asked to provide file name to save diagnostics, but file with same name already exist. Confirm choice \"Yes\" or \"No\"</p> <p>Scenario to reproduce: User run Receiver diagnostics provide file name to save diagnostics, but file with same name already exist.</p> <p>System management: managed and unmanaged</p> <pre><code>5.2.1 Correspond to 5.3.1\n5.3.1 message heading:  \"Diagnostics File\"\n5.3.1 message text: Diagnostics file with same name already exist. Are you sure you want to overwrite the existing file?\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.9_debug_dialog_class/#5915-user-message","title":"5.9.1.5 User message","text":"<p>Location: Main window-&gt;Control-&gt;System Diagnostics Button clicked (new window pop up) </p> <p>Action: User hit Run Button</p> <p>Causes: User asked to provide file name to save diagnostics, but file with same name already exist. Confirm choice \"Yes\" or \"No\" and user select No</p> <p>Scenario to reproduce: User run Receiver diagnostics, provide file name to save diagnostics, but file with same name already exist and user select No (not to save file)</p> <p>System management: managed and unmanaged</p> <pre><code>5.2.1 Correspond to 5.3.1\n5.3.1 message heading:  \"Diagnostics File\"\n5.3.1 message text: Receiver diagnostics file export cancelled.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/5.9_debug_dialog_class/#5916-user-message","title":"5.9.1.6 User message","text":"<p>Location: Main window-&gt;Control-&gt;System Diagnostics Button clicked (new window pop up) </p> <p>Action: User hit Run Button</p> <p>Causes: Process successfully completed</p> <p>Scenario to reproduce: User run Receiver diagnostics and process completed successfully.</p> <p>System management: managed and unmanaged</p> <pre><code>5.2.1 Correspond to 5.3.1\n5.3.1 message heading:  \"Information\"\n5.3.1 message text: Diagnostics file successfully saved on USB memory device.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/Main_Window_Class/5.1.10_main_window_control_import/","title":"Main Window Control Import","text":""},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/Main_Window_Class/5.1.10_main_window_control_import/#51101-user-message","title":"5.1.10.1 User message","text":"<p>Location: Main window-&gt;Control-&gt;System</p> <p>Action: User click Import Button</p> <p>Causes: Internal error, /proc/mounts can\u2019t be read.</p> <p>Scenario to reproduce: unknown</p> <p>System management: unmanaged</p> <pre><code>5.2.1 Correspond to 5.3.1\n5.3.1 message heading: \"Error\"\n5.3.1 message text: Import failed. Cannot openUSB memory device, so the Import can't proceed.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/Main_Window_Class/5.1.10_main_window_control_import/#51102-user-message","title":"5.1.10.2 User message","text":"<p>Location: Main window-&gt;Control-&gt;System</p> <p>Action: User click Import Button</p> <p>Causes: USB can\u2019t be mounted.</p> <p>Scenario to reproduce: User click Import Button but USB not inserted</p> <p>System management: unmanaged</p> <pre><code>5.2.1 Correspond to 5.3.1\n5.3.1 message heading: \"Error\"\n5.3.1 message text: Import failed. USB memory device not found.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/Main_Window_Class/5.1.10_main_window_control_import/#51103-user-message","title":"5.1.10.3 User message","text":"<p>Location: Main window-&gt;Control-&gt;System</p> <p>Action: User click Import Button</p> <p>Causes: Internal error, mnt/usb can\u2019t be read.</p> <p>Scenario to reproduce: unknown (possible incorrect format of USB)</p> <p>System management: unmanaged</p> <pre><code>5.2.1 Correspond to 5.3.1\n5.3.1 message heading: \"Error\"\n5.3.1 message text: \n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/Main_Window_Class/5.1.10_main_window_control_import/#51104-user-message","title":"5.1.10.4 User message","text":"<p>Location: Main window-&gt;Control-&gt;System</p> <p>Action: User click Import Button</p> <p>Causes: User selected file extension is not *.ccfg</p> <p>Scenario to reproduce: unknown, see NOTE</p> <p>System management: unmanaged</p> <pre><code>5.2.1 message heading: \"Error\"\n5.2.1 message text: Bad file error.\n5.3.1 message heading: \"Error\"\n5.3.1 message text: Cannot find directory.\nNOTE: This is obsolete now as user can not see the files with other extensions.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/Main_Window_Class/5.1.10_main_window_control_import/#51105-user-message","title":"5.1.10.5 User message","text":"<p>Location: Main window-&gt;Control-&gt;System</p> <p>Action: User click Import Button</p> <p>Causes:  Internal error, mnt/perm can't be read</p> <pre><code>5.2.1 message heading: \"Error\"\n5.2.1 message text: Cannot open target directory.\n5.3.1 message heading: \"Error\"\n5.3.1 message text: Import failed. Internal error.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/Main_Window_Class/5.1.10_main_window_control_import/#51106-user-message","title":"5.1.10.6 User message","text":"<p>Location: Main window-&gt;Control-&gt;System</p> <p>Action: User click Import Button</p> <p>Causes: User asked to provide action confirmation with selection \"Yes\" or \"No\"</p> <p>Scenario to reproduce: User click Import Button</p> <p>System management: unmanaged</p> <pre><code>5.2.1 Correspond to 5.3.1\n5.3.1 message heading: \"Import\"\n5.3.1 message text: Are you sure you want to overwrite the existing device configurations?\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/Main_Window_Class/5.1.10_main_window_control_import/#51107-user-message","title":"5.1.10.7 User message","text":"<p>Location: Main window-&gt;Control-&gt;System</p> <p>Action: User click Import Button</p> <p>Causes: Encrypted file corrupted</p> <p>Scenario to reproduce: click Import Button and Select corrupted file for import</p> <p>System management: unmanaged</p> <pre><code>5.2.1 Correspond to 5.3.1\n5.3.1 message heading: \"Error\"\n5.3.1 message text: Import failed. Configurations file is corrupted.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/Main_Window_Class/5.1.10_main_window_control_import/#51108-user-message","title":"5.1.10.8 User message","text":"<p>Location: Main window-&gt;Control-&gt;System</p> <p>Action: User click Import Button</p> <p>Causes: Encrypted file successfully decrypted, but it's xml structure is corrupted (not xml or some mandatory Elements are missing)</p> <p>Scenario to reproduce: unknown</p> <p>System management: unmanaged</p> <pre><code>5.2.1 Correspond to 5.3.1\n5.3.1 message heading: \"Error\"\n5.3.1 message text:  Import failed. Configurations file is corrupted.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/Main_Window_Class/5.1.10_main_window_control_import/#51109-user-message","title":"5.1.10.9 User message","text":"<p>Location: Main window-&gt;Control-&gt;System</p> <p>Action: User click Import Button</p> <p>Causes: Number of defined connections/users/devices exceeds licence value. For example when database exported from Manager and imported to unmanaged device.</p> <p>Scenario to reproduce: Database should contain more than 32 connections/users/devices (exported from manager) and user tries to import it to unmanaged device</p> <p>System management: unmanaged</p> <pre><code>5.2.1 Correspond to 5.3.1\n5.3.1 message heading: \"Error\"\n5.3.1 message text: Unable to import configuration file. This file was exported from a Manager with incompatible license configuration.\nNOTE: obsolete for 5.3.1\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/Main_Window_Class/5.1.10_main_window_control_import/#511010-user-message","title":"5.1.10.10 User message","text":"<p>Location: Main window-&gt;Control-&gt;System</p> <p>Action: User click Import Button</p> <p>Causes: Read of updated xml after import failed</p> <p>Scenario to reproduce: unknown</p> <p>System management: unmanaged</p> <pre><code>5.2.1 Correspond to 5.3.1\n5.3.1 message heading: \"Error\"\n5.3.1 message text: Import failed. Applience has been returned to factory default.\nNOTE: in 5.3.1 A and B databases are overwritten, but at this stage we could try to read CloudDataB.xml.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/Main_Window_Class/5.1.10_main_window_control_import/#511011-user-message","title":"5.1.10.11 User message","text":"<p>Location: Main window-&gt;Control-&gt;System</p> <p>Action: User click Import Button</p> <p>Causes: If import successfully completed and interfaces file was modified  </p> <p>Scenario to reproduce: Import success</p> <p>System management: managed and unmanaged</p> <pre><code>5.2.1 message heading: \"Information\"\n5.2.1 message text: Configuration settings successfully imported. The system will reboot now.\n5.3.1 not supported\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/Main_Window_Class/5.1.10_main_window_control_import/#511012-user-message","title":"5.1.10.12 User message","text":"<p>Location: Main window-&gt;Control-&gt;System</p> <p>Action: User click Import Button</p> <p>Causes: If import successfully completed and interfaces file was not modified  </p> <p>Scenario to reproduce: Import success</p> <p>System management: managed and unmanaged</p> <pre><code>5.2.1 message heading: \"Information\"\n5.2.1 message text: Import successfully completed.\n5.3.1 not supported\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/Main_Window_Class/5.1.10_main_window_control_import/#511013-user-message","title":"5.1.10.13 User message","text":"<p>Location: Main window-&gt;Control-&gt;System</p> <p>Action: User click Import Button</p> <p>Causes: Export success</p> <p>Scenario to reproduce: Import success</p> <p>System management: unmanaged</p> <pre><code>5.2.1 message heading: \"Information\"\n5.2.1 message text: Configuration settings successfully imported. The system will reboot now.\n5.3.1 message heading: \"Information\"\n5.3.1 message text: Import successfully completed. The system will reboot now.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/Main_Window_Class/5.1.11_main_window_user/","title":"Main Window User","text":""},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/Main_Window_Class/5.1.11_main_window_user/#51111-user-message","title":"5.1.11.1 User message","text":"<p>Location: Main window-&gt;Users</p> <p>Action: User click Add Button</p> <p>Causes: Message pop up in the case when max number of users (according to license value) already defined</p> <p>Scenario to reproduce: Maximum amount of users already defined on this Receiver and user click Add new user button</p> <p>System management: unmanaged</p> <pre><code>5.2.1 Correspond to 5.3.1\n5.3.1 message heading: \"Information\"\n5.3.1 message text: The maximum number of users is limited to &lt; licence value (integer)&gt;. Remove any existing user before adding new user.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/Main_Window_Class/5.1.11_main_window_user/#51112-user-message","title":"5.1.11.2 User message","text":"<p>Location: Main window-&gt;Users</p> <p>Action: User click Remove Button</p> <p>Causes: Message pop up in the case when admin is selected in the list</p> <p>Scenario to reproduce: User selects admin in user list and click Remove button</p> <p>System management: unmanaged</p> <pre><code>5.2.1 Correspond to 5.3.1\n5.3.1 message heading: \"Information\"\n5.3.1 message text: User \u201cadmin\u201d is protected and can not be removed.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/Main_Window_Class/5.1.11_main_window_user/#51113-user-message","title":"5.1.11.3 User message","text":"<p>Location: Main window-&gt;Users</p> <p>Action: User click Remove Button</p> <p>Causes: User click Remove Button when currently logged user is selected in the list</p> <p>Scenario to reproduce: Logged in User select himself in user list and click Remove button</p> <p>System management: unmanaged</p> <pre><code>5.2.1 Correspond to 5.3.1\n5.3.1 message heading: \"Information\"\n5.3.1 message text: User &lt; user name &gt; is currently logged in and can not be removed.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/Main_Window_Class/5.1.11_main_window_user/#51114-user-message","title":"5.1.11.4 User message","text":"<p>Location: Main window-&gt;Users</p> <p>Action: User click Remove Button</p> <p>Causes: User have to confirm that selected user has to be removed by selecting Yes or Cancel</p> <p>Scenario to reproduce: User selects another in user list (not himself and not admin) and click Remove button</p> <p>System management: unmanaged</p> <pre><code>5.2.1 Correspond to 5.3.1\n5.3.1 message heading: \"Information\"\n5.3.1 message text: Do you want to remove user &lt; user name &gt;?\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/Main_Window_Class/5.1.12_main_window_read_write_database/","title":"Main Window Read or Write Databases","text":""},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/Main_Window_Class/5.1.12_main_window_read_write_database/#51121-user-message","title":"5.1.12.1 User message","text":"<p>Location: All Read or write of database file. Function currentFileCheck()</p> <p>Action: Saving any changes to xml database or read some values from xml database</p> <p>Causes: Can not create or write /mnt/perm/CloudDataB.xml</p> <p>Scenario to reproduce: difficult to reproduce. Should be very small memory available in /usr/local to update CloudDataA.xml, but not enough to save changes to CloudDataB.xml</p> <p>System management: managed and unmanaged</p> <pre><code>5.2.1 Correspond to 5.3.1\n5.3.1 message heading: \"WARNING\"\n5.3.1 message text: Can not create local configuration backup file.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/Main_Window_Class/5.1.12_main_window_read_write_database/#51122-user-message","title":"5.1.12.2 User message","text":"<p>Location: All Read or write of database file. Function currentFileCheck()</p> <p>Action: Saving any changes to xml database or read some values from xml database</p> <p>Causes: Can not create or write /mnt/perm/CloudDataA.xml</p> <p>Scenario to reproduce: /usr/local is out of space and user makes some changes in CloudDataA.xml (add Connection or User)</p> <p>System management: managed and unmanaged</p> <pre><code>5.2.1 Correspond to 5.3.1\n5.3.1 message heading: \"WARNING\"\n5.3.1 message text: Can not create main local configuration file.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/Main_Window_Class/5.1.1_main_window_class/","title":"MainWindow Class","text":""},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/Main_Window_Class/5.1.1_main_window_class/#511-returning-from-connection","title":"5.1.1 Returning from connection","text":""},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/Main_Window_Class/5.1.1_main_window_class/#5111-user-message","title":"5.1.1.1 User message","text":"<p>Location: FreeRDP Errors on returning to OSD (Main window-&gt;Connections)</p> <p>Action: Connection attempt</p> <p>Causes: Error code 7</p> <p>Scenario to reproduce: Attempt to connect to target to which is already connected another user.</p> <p>System management: managed and unmanaged.</p> <pre><code>5.2.1 message heading: \u201cUnable To Connect To Target\u201d\n5.2.1 message text: **Device at address &lt; connection name &gt; is in use by another user. Unable to connect.**\n5.3.1 message heading: \u201cDisconnect Reason\u201d\n5.3.1 message text: **The connection &lt; connection name &gt; is in use by another user. Unable to connect**\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/Main_Window_Class/5.1.1_main_window_class/#5112-user-message","title":"5.1.1.2 User message","text":"<p>Location: FreeRDP Errors on returning to OSD (Main window-&gt;Connections)</p> <p>Action: Connection attempt</p> <p>Causes: Error code 132 or 138.</p> <p>We can't connect to server because local Ethernet is gone the following message will appear:</p> <ul> <li>Scenario to reproduce: Connection successfully started, but then network cable is unplugged on local host</li> </ul> <p>System management: managed and unmanaged.</p> <pre><code>5.2.1 message heading: \u201cLost Connection\u201d\n5.2.1 message text: Lost connection to &lt; connection name &gt; due to connection problem. Please confirm local Ethernet connection.\n5.3.1 message heading: \"Disconnect Reason\"\n5.3.1 message text: Lost connection to &lt; connection name &gt; due to connection problem. Please confirm local Ethernet connection.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/Main_Window_Class/5.1.1_main_window_class/#5113-user-message","title":"5.1.1.3 User message","text":"<p>Location: FreeRDP Errors on returning to OSD (Main window-&gt;Connections)</p> <p>Action: Connection attempt</p> <p>Causes: Error code 132 or 138. We can't connect to server because Server is not online or is powered off.</p> <p>Scenario to reproduce: Connection successfully started, but then unplug network cable on transmitter side.</p> <p>System management: managed and unmanaged.</p> <p>If local network is up then following message will appear: <pre><code>5.2.1 message heading: \"Lost Connection\"\n5.2.1 message text: Lost connection to &lt; connection name &gt;. Please confirm &lt; connection name &gt; is powered up and connected to the network.\n5.3.1 message heading: \"Disconnect Reason\"\n5.3.1 message text: Lost connection to &lt; connection name &gt;. Please confirm &lt; connection name &gt; is powered up and connected to the network.\n</code></pre></p>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/Main_Window_Class/5.1.1_main_window_class/#5114-user-message","title":"5.1.1.4 User message","text":"<p>Location: FreeRDP Errors on returning to OSD (Main window-&gt;Connections)</p> <p>Action: Connection attempt</p> <p>Causes: Error code 131</p> <p>Scenario to reproduce: Attempt connection to transmitter with unplugged network cable on transmitter side</p> <p>System management: managed and unmanaged.</p> <pre><code>5.2.1 message heading: \"Unable To Connect To Target\"\n5.2.1 message text: Unable to connect to &lt; connection name &gt;. Please confirm &lt; connection name &gt; is powered up and connected to the network.\n5.3.1 message heading: \"Disconnect Reason\"\n5.3.1 message text: Unable to connect to &lt; connection name &gt;. Please confirm &lt; connection name &gt; is powered up and connected to the network.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/Main_Window_Class/5.1.1_main_window_class/#5115-user-message","title":"5.1.1.5 User message","text":"<p>Location: FreeRDP Errors on returning to OSD (Main window-&gt;Connections)</p> <p>Action: Connection attempt</p> <p>Causes: Error code 139</p> <p>Scenario to reproduce: NLA is required, but is turned off for this connection (see connections settings).</p> <p>System management: managed and unmanaged.</p> <pre><code>5.2.1 message heading: \"Unable To Connect To Target\"\n5.2.1 message text: Unable to connect to &lt; connection name &gt;. Network level authentication failure. Check NLA is enabled.\n5.3.1 message heading: \"Disconnect Reason\"\n5.3.1 message text: Unable to connect to &lt; connection name &gt;. Please confirm &lt; connection name &gt;. Network level authentication failure. Check NLA is enabled.\n</code></pre> <p>NOTE: code should be removed from bbfreerdp messages as NLA never used for connections via transmitter.</p>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/Main_Window_Class/5.1.1_main_window_class/#5116-user-message","title":"5.1.1.6 User message","text":"<p>Location: FreeRDP Errors on returning to OSD (Main window-&gt;Connections)</p> <p>Action: Connection attempt</p> <p>Causes: Error code 140</p> <p>Scenario to reproduce: NLA is required and is turned on, but user name or password is incorrect</p> <p>System management: managed and unmanaged.</p> <pre><code>5.2.1 message heading: \"Unable To Connect To Target\"\n5.2.1 message text: Unable to connect to &lt; connection name &gt;. Network level authentication failure. Check NLA credentials are valid.\n5.3.1 message heading: \"Disconnect Reason\"\n5.3.1 message text: ViaTX: Unable to connect to &lt; connection name &gt;. Network level authentication failure. Check NLA credentials are valid.\n</code></pre> <p>NOTE: code should be removed from bbfreerdp messages as NLA never used for connections via transmitter.</p>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/Main_Window_Class/5.1.1_main_window_class/#5117-user-message","title":"5.1.1.7 User message","text":"<p>Location: FreeRDP Errors on returning to OSD (Main window-&gt;Connections)</p> <p>Action: Connection attempt</p> <p>Causes: Error code 142</p> <p>Scenario to reproduce: Connection successful, but no user activity detected within Connection inactivity timer (set on OSD-&gt;System-&gt;Preferences).</p> <p>System management:  managed and unmanaged.</p> <pre><code>5.2.1 message heading: \"Connection Timeout\"\n5.2.1 message text: Disconnection from &lt; connection name &gt; due to user inactivity.\n5.3.1 message heading: \"Disconnect Reason\"\n5.3.1 message text: Disconnection from &lt; connection name &gt; due to user inactivity.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/Main_Window_Class/5.1.1_main_window_class/#5118-user-message","title":"5.1.1.8 User message","text":"<p>Location: FreeRDP Errors on returning to OSD (Main window-&gt;Connections)</p> <p>Action: Connection attempt</p> <p>Causes: Error code 143</p> <p>Scenario to reproduce: Unknown</p> <p>System management: managed and unmanaged.</p> <pre><code>5.2.1 message heading: \"Access Denied\"\n5.2.1 message text: Access to Server &lt; connection name &gt; denied.\n5.3.1 message heading: \"Disconnect Reason\"\n5.3.1 message text: Access to Server &lt; connection name &gt; denied.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/Main_Window_Class/5.1.1_main_window_class/#5119-user-message","title":"5.1.1.9 User message","text":"<p>Location: FreeRDP Errors on returning to OSD (Main window-&gt;Connections)</p> <p>Action: Connection attempt</p> <p>Causes: Error code 145</p> <p>Scenario to reproduce: Unknown</p> <p>System management: managed and unmanaged.</p> <pre><code>5.2.1 message heading: \"Access Denied\"\n5.2.1 message text: Connection unsuccessful. &lt; connection name &gt; is busy.\n5.3.1 message heading: \"Disconnect Reason\"\n5.3.1 message text: Connection unsuccessful. &lt; connection name &gt; is busy.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/Main_Window_Class/5.1.1_main_window_class/#51110-user-message","title":"5.1.1.10 User message","text":"<p>Location: FreeRDP Errors on returning to OSD (Main window-&gt;Connections)</p> <p>Action: Connection attempt</p> <p>Causes: Error code 146</p> <p>Scenario to reproduce: Attempt to connect to target to which is already connected another user.</p> <p>System management: managed and unmanaged.</p> <pre><code>5.2.1 message heading: \"Access Denied\"\n5.2.1 message text: Connection unsuccessful. &lt; connection name &gt; is in use by another user.\n5.3.1 message heading: \"Disconnect Reason\"\n5.3.1 message text: Connection unsuccessful. &lt; connection name &gt; is in use by another user.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/Main_Window_Class/5.1.1_main_window_class/#51111-user-message","title":"5.1.1.11 User message","text":"<p>Location: FreeRDP Errors on returning to OSD (Main window-&gt;Connections)</p> <p>Action: Connection attempt</p> <p>Causes: Error code 147</p> <p>Scenario to reproduce: Attempt to connect to transmitter which is managed in another domain</p> <p>System management: managed and unmanaged.</p> <pre><code>5.2.1 message heading: \"Access Denied\"\n5.2.1 message text: Connection unsuccessful. You do not have permission to make this connection.\n5.3.1 message heading: \"Disconnect Reason\"\n5.3.1 message text: Connection unsuccessful. You do not have permission to make this connection. \n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/Main_Window_Class/5.1.1_main_window_class/#51112-user-message","title":"5.1.1.12 User message","text":"<p>Location: FreeRDP Errors on returning to OSD (Main window-&gt;Connections)</p> <p>Action: Connection attempt</p> <p>Causes: Error code 148 - BBFREERDP_EXIT_FPGA_RESET_ERROR_CODE</p> <p>Scenario to reproduce: Unknown</p> <p>System management: managed and unmanaged.</p> <pre><code>5.2.1 message heading: \"System Error\"\n5.2.1 message text: We have detected an error, it may take up to a minute to resolve.\n5.3.1 message heading: \"Disconnect Reason\"\n5.3.1 message text: We have detected an error, it may take up to a minute to resolve.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/Main_Window_Class/5.1.1_main_window_class/#51113-user-message","title":"5.1.1.13  User message","text":"<p>Location: FreeRDP Errors on returning to OSD (Main window-&gt;Connections)</p> <p>Action: Connection attempt</p> <p>Causes: Error code 150 - BBFREERDP_EXIT_LEGACY_MODE_NOT_SUPPORTED_ERROR_CODE</p> <p>Scenario to reproduce: Attempt a connection to a VM in Legacy (non RFX) mode</p> <p>System management: managed and unmanaged.</p> <pre><code>6.0.4 message heading: \"Disconnect Reason\"\n6.0.4 message text: RDP (Non RFX) mode not supported.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/Main_Window_Class/5.1.1_main_window_class/#51114-user-message","title":"5.1.1.14 User message","text":"<p>Location: FreeRDP Errors on returning to OSD (Main window-&gt;Connections)</p> <p>Action: Connection attempt</p> <p>Causes: Any other Error codes returned by bbfreerdp</p> <p>Scenario to reproduce: Unknown</p> <p>System management: managed and unmanaged.</p> <pre><code>5.2.1 message heading: \"Unable To Connect To Target\"\n5.2.1 message text: Unable to connect to &lt; connection name &gt;. Exit code &lt; error number (integer)&gt;.\n5.3.1 message heading: \"Disconnect Reason\"\n5.3.1 message text: Unknown error: &lt; error number (integer)&gt;.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/Main_Window_Class/5.1.2_osd_initialization/","title":"5.1.2 OSD Initialization","text":""},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/Main_Window_Class/5.1.2_osd_initialization/#5121-user-message","title":"5.1.2.1 User message","text":"<p>Location: OSD Initialization</p> <p>Action: Receiver power up/ reboot / post upgrade/ returning from connection etc.</p> <p>Causes: Screen changed and selected screen resolution is not listed in EDID table</p> <p>Scenario to reproduce: Screen changed when Receiver was powered off and it does not support selected resolution</p> <p>System management:  managed and unmanaged.</p> <pre><code>5.2.1 message heading:  \"Error\"\n5.2.1 message text: Preferred Screen Resolution not supported \n5.3.1 message system not supported see [5.1.5.1]()\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/Main_Window_Class/5.1.2_osd_initialization/#5122-user-message","title":"5.1.2.2 User message","text":"<p>Location: OSD Initialization Read Screen Resolution</p> <p>Action: Receiver power up/ reboot / post upgrade/ returning from connection etc.</p> <p>Causes: tfp410_port_t error</p> <p>Scenario to reproduce: Not reproducible without hardware reprogramming. Pure software failure.</p> <p>System management:  managed and unmanaged.</p> <pre><code>5.2.1 message heading: \" Error\"\n5.2.1 message text:  Error retrieving monitor's EDID\n5.3.1 message system not supported\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/Main_Window_Class/5.1.2_osd_initialization/#5123-user-message","title":"5.1.2.3 User message","text":"<p>Location: OSD Initialization Read Screen Resolution</p> <p>Action: Receiver power up/ reboot / post upgrade/ returning from connection etc.</p> <p>Causes:  Monitor's EDID is not supported</p> <p>Scenario to reproduce: Attach monitor with unsupported EDID version or EDID revision (see note).</p> <p>System management:  managed and unmanaged.</p> <p>NOTE: Supported EDID version is 1, supported EDID revisions are 3 and 4.</p> <pre><code>5.2.1 message heading: \"Error\"\n5.2.1 message text: Attached monitor's EDID &lt; edid version number &gt; and &lt; edid revision &gt; is not supported.\n5.3.1 message system not supported\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/Main_Window_Class/5.1.2_osd_initialization/#5124-user-message","title":"5.1.2.4 User message","text":"<p>Location: OSD Initialization Read Screen Resolution</p> <p>Action: Receiver power up/ reboot / post upgrade/ returning from connection etc. </p> <p>Causes: Can not read display preferred Resolution from particular register (last resolution in the block).</p> <p>Scenario to reproduce: Not reproducible without hardware reprogramming. Pure software failure.</p> <p>System management:  managed and unmanaged.</p> <pre><code>5.2.1 message heading: \"Error\"\n5.2.1 message text: Error retrieving preferred resolution from EDID \n5.3.1 message system not supported\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/Main_Window_Class/5.1.2_osd_initialization/#5125-user-message","title":"5.1.2.5 User message","text":"<p>Location: OSD Initialization Read Screen Resolution</p> <p>Action: Receiver power up/ reboot / post upgrade/ returning from connection etc. </p> <p>Causes: Selected RDP Resolution is not in the available screen resolution list </p> <p>Scenario to reproduce: Need 2 displays with different resolutions. Attach first display, set RDP resolution which is not supported in second display and save settings. Power off receiver and change display. Power on receiver. On OSD  load you should see this message.</p> <p>System management:  managed and unmanaged.</p> <pre><code>5.2.1 message heading: \"Error\"\n5.2.1 message text: Preferred display resolution &lt; screen resolution value &gt; is not supported .\n5.3.1 message system not supported\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/Main_Window_Class/5.1.2_osd_initialization/#5126-user-message","title":"5.1.2.6 User message","text":"<p>Location: OSD Initialization Read Screen Resolution</p> <p>Action: Receiver power up/ reboot / post upgrade/ returning from connection etc. </p> <p>Causes: There is no common resolutions in cloudium supported list and EDID table</p> <p>Scenario to reproduce:</p> <p>Attach display which does not support any of following resolutions:</p> <ul> <li>\"1920x1200 60Hz\";</li> <li>\"1920x1080 60Hz\";</li> <li>\"1680x1050 60Hz\";</li> <li>\"1600x1200 60Hz\";</li> <li>\"1440x900 60Hz\";</li> <li>\"1400x1050 60Hz\";</li> <li>\"1280x1024 60Hz\";</li> <li>\"1280x960 60Hz\";</li> <li>\"1280x800 60Hz\";</li> <li>\"1280x768 60Hz\";</li> <li>\"1280x720 60Hz\";</li> <li>\"1152x864 60Hz\";</li> <li>\"1024x768 60Hz\";</li> <li>\"800x600 60Hz\";</li> <li>\"640x480 60Hz\".</li> <li>Reboot receiver.</li> </ul> <p>System management:  managed and unmanaged.</p> <pre><code>5.2.1 message heading: \"Critical Error\"\n5.2.1 message text: Attached monitor is not supported. Please replace and try again.\n5.3.1 message system not supported\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/Main_Window_Class/5.1.3_main_window_power_menu/","title":"Main Window Power Menu","text":""},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/Main_Window_Class/5.1.3_main_window_power_menu/#5131-user-message","title":"5.1.3.1 User message","text":"<p>Location: Main window-&gt;Power menu</p> <p>Action: User selects Shut Down option in power menu</p> <p>Causes:  User has to confirm system Shut Down by clicking Yes or No</p> <p>Scenario to reproduce: User click power button, select Shut Down option and confirm his choice by clicking Yes</p> <p>System management: managed and unmanaged.</p> <pre><code>5.2.1 message heading: \"Shut Down\"\n5.2.1 message text: Are you sure you want to Shut Down the system?\n(NOTE: This option is currently disabled)\n5.3.1 message system not supported\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/Main_Window_Class/5.1.3_main_window_power_menu/#5132-user-message","title":"5.1.3.2 User message","text":"<p>Location: Main window-&gt;Power menu</p> <p>Action: User selects Reboot option in power menu</p> <p>Causes:  User has to confirm system Reboot by clicking Yes or No</p> <p>Scenario to reproduce: User click power button, select Reboot option and confirm his choice by clicking Yes</p> <p>System management: managed and unmanaged.</p> <pre><code>5.2.1 Correspond to 5.3.1\n5.3.1 message heading: \"Reboot\"\n5.3.1 message text: Are you sure that you want to reboot the system?\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/Main_Window_Class/5.1.4_main_window_connection/","title":"Main Window Connection","text":""},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/Main_Window_Class/5.1.4_main_window_connection/#5141-user-message","title":"5.1.4.1 User message","text":"<p>Location: Main window-&gt;Connections</p> <p>Action: User click New Button</p> <p>Causes: Message pop up in the case when 32 connections already defined</p> <p>Scenario to reproduce: 32 connections already defined and user click button New on Connections Tab</p> <p>System management: unmanaged</p> <pre><code>5.2.1 Correspond to 5.3.1\n5.3.1 message heading: \"Information\"\n5.3.1 message text: The maximum number of connections is limited to &lt; licence value (integer)&gt;. Remove any connection before adding new connection.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/Main_Window_Class/5.1.4_main_window_connection/#5142-user-message","title":"5.1.4.2 User message","text":"<p>Location:  Main window-&gt;Connections</p> <p>Action: User click Connect Button </p> <p>Causes: No connections in the list </p> <p>Scenario to reproduce: Unknown. See Note.</p> <p>System management: managed and unmanaged</p> <p>NOTE: This message is now obsolete as if no connections in the list Connect button is disabled.</p> <pre><code>5.2.1 Correspond to 5.3.1\n5.3.1 message heading: \"Information\"\n5.3.1 message text: Create new connection and data to perform connection.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/Main_Window_Class/5.1.4_main_window_connection/#5143-user-message","title":"5.1.4.3 User message","text":"<p>Location:  Main window-&gt;Connections</p> <p>Action: User click Connect Button </p> <p>Causes: No connection selected in the list</p> <p>Scenario to reproduce: Unknown. See Note.</p> <p>System management: managed and unmanaged</p> <p>NOTE: This message is now obsolete as if no connections in the list Connect button is disabled.</p> <pre><code>5.2.1 Correspond to 5.3.1\n5.3.1 message heading: \"Information\"\n5.3.1 message text: No connection specified.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/Main_Window_Class/5.1.4_main_window_connection/#5144-user-message","title":"5.1.4.4 User message","text":"<p>Location: Main window-&gt;Connections</p> <p>Action:  User click Connect Button</p> <p>Causes: IP is static but Network is down.</p> <p>Scenario to reproduce: Unplug network cable from Receiver, select connection and click Connect button.</p> <p>System management: managed and unmanaged</p> <pre><code>5.2.1 Correspond to 5.3.1\n5.3.1 message heading: \"Network Status\"\n5.3.1 message text: Connection failed. Network  not found.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/Main_Window_Class/5.1.4_main_window_connection/#5145-user-message","title":"5.1.4.5 User message","text":"<p>Location: Main window-&gt;Connections</p> <p>Action: User click Connect Button</p> <p>Causes: Network is up, unit configured for DHCP, but IP address is not issued.</p> <p>Scenario to reproduce: DHCP server is offline.</p> <p>System management: managed and unmanaged</p> <pre><code>5.2.1 Correspond to 5.3.1\n5.3.1 message heading: \"Network Status\"\n5.3.1 message text: Connection failed. DHCP server not found.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/Main_Window_Class/5.1.4_main_window_connection/#5146-user-message","title":"5.1.4.6 User message","text":"<p>Location: Main window-&gt;Connections</p> <p>Action: User click Connect Button</p> <p>Causes: Network is down.</p> <p>Scenario to reproduce: Unplug network cable from Receiver, select connection and click Connect button.</p> <p>System management: managed and unmanaged</p> <pre><code>5.2.1 Correspond to 5.3.1\n5.3.1 message heading: \"Network Status\"\n5.3.1 message text: Connection failed. Network  not found.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/Main_Window_Class/5.1.4_main_window_connection/#5147-user-message","title":"5.1.4.7 User message","text":"<p>Location: Main window-&gt;Connections</p> <p>Action: User click Remove Button</p> <p>Causes: User have to confirm that selected connection has to be removed by selecting Yes or Cancel</p> <p>Scenario to reproduce: Select connection from list and click Remove button</p> <p>System management: unmanaged</p> <pre><code>5.2.1 Correspond to 5.3.1\n5.3.1 message heading: \"Remove connection\"\n5.3.1 message text: Do you want to remove connection &lt; connection name &gt;?\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/Main_Window_Class/5.1.5_main_window_control_preference_resolution/","title":"Main Window Control Preference Resolution","text":""},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/Main_Window_Class/5.1.5_main_window_control_preference_resolution/#5151-user-message","title":"5.1.5.1 User message","text":"<p>Location: Resolution settings page</p> <p>Action: User open Resolution settings page</p> <p>Causes: Selected RDP screen resolution is not listed in EDID list.</p> <p>Scenario to reproduce: Screen changed when Receiver was powered off and it does not support selected RDP resolution</p> <p>System management: managed and unmanaged</p> <pre><code>5.2.1 not supported see 5.1.2.1\n5.3.1 message heading:  \"Warning\"\n5.3.1 message text: Selected RDP Resolution not supported.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/Main_Window_Class/5.1.5_main_window_control_preference_resolution/#5152-user-message","title":"5.1.5.2 User message","text":"<p>Location: Main window-&gt;Control-&gt;System</p> <p>Action: User changes OSD Resolution and hit Apply Button</p> <p>Causes: OSD Resolution changes</p> <p>Scenario to reproduce: select OSD resolution from drop-down menu and hit Apply button</p> <p>System management: managed and unmanaged</p> <pre><code>5.2.1 message heading: \"GUI Resolution\"\n5.2.1 message text: GUI Resolution has changed. The GUI will reload now.\n5.3.1 message system not supported\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/Main_Window_Class/5.1.6_main_window_control_network/","title":"Main Window Control Network","text":""},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/Main_Window_Class/5.1.6_main_window_control_network/#5161-user-message","title":"5.1.6.1 User message","text":"<p>Location: Main window-&gt;Network</p> <p>Action: User selects DHCP option and click Apply Button</p> <p>Causes:  Network is down.</p> <p>Scenario to reproduce: Unplug network cable, select DHCP option and click Apply Button</p> <p>System management: unmanaged</p> <pre><code>5.2.1 Correspond to 5.3.1.\n5.3.1 message heading: \"Network Status\"\n5.3.1 message text: Network settings changes failed. Network is down.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/Main_Window_Class/5.1.6_main_window_control_network/#5162-user-message","title":"5.1.6.2 User message","text":"<p>Location: Main window-&gt;Network</p> <p>Action: User selects DHCP option and click Apply Button</p> <p>Causes:  Network is up</p> <p>Scenario to reproduce: select DHCP option and click Apply Button, but DHCP server not on network</p> <p>System management: unmanaged</p> <pre><code>5.2.1 Correspond to 5.3.1.\n5.3.1 message heading: \"Network Status\"\n5.3.1 message text: Network settings changes failed. DHCP server not found.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/Main_Window_Class/5.1.6_main_window_control_network/#5163-user-message","title":"5.1.6.3 User message","text":"<p>Location: Main window-&gt;Network</p> <p>Action: User selects DHCP option and click Apply Button</p> <p>Causes:  Server fail to issue IP details</p> <p>Scenario to reproduce: DHCP server is offline</p> <p>System management: unmanaged</p> <pre><code>5.2.1 Correspond to 5.3.1\n5.3.1 message heading: \"Network Status\"\n5.3.1 message text: Network settings changes failed.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/Main_Window_Class/5.1.6_main_window_control_network/#5164-user-message","title":"5.1.6.4 User message","text":"<p>Location: Main window-&gt;Network</p> <p>Action: User selects DHCP option and click Apply Button</p> <p>Causes:  Success</p> <p>Scenario to reproduce: select DHCP option and click Apply Button</p> <p>System management: unmanaged</p> <pre><code>5.2.1 Correspond to 5.3.1\n5.3.1 message heading: \"Network Status\"\n5.3.1 message text: Network settings changed successfully.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/Main_Window_Class/5.1.6_main_window_control_network/#5165-user-message","title":"5.1.6.5 User message","text":"<p>Location: Main window-&gt;System-&gt;Network</p> <p>Action: User selects Static IP and click Apply Button</p> <p>Causes:  IP address field left empty</p> <p>Scenario to reproduce: IP address field left empty and user click Apply Button</p> <p>System management: unmanaged</p> <pre><code>5.2.1 Correspond to 5.3.1\n5.3.1 message heading: \"Information\"\n5.3.1 message text: IP address field is mandatory.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/Main_Window_Class/5.1.6_main_window_control_network/#5166-user-message","title":"5.1.6.6 User message","text":"<p>Location: Main window-&gt;Network</p> <p>Action: User selects Static IP and click Apply Button</p> <p>Causes:  Subnet mask field left empty</p> <p>Scenario to reproduce: Subnet mask field left empty and user click Apply Button</p> <p>System management: unmanaged</p> <pre><code>5.2.1 Correspond to 5.3.1.\n5.3.1 message heading: \"Network Mask Validation\"\n5.3.1 message text: Network Mask is out of valid range. \n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/Main_Window_Class/5.1.6_main_window_control_network/#5167-user-message","title":"5.1.6.7 User message","text":"<p>Location: Main window-&gt;Network</p> <p>Action: User selects Static IP and click Apply Button</p> <p>Causes:  Network Mask field is set to 0.0.0.0</p> <p>Scenario to reproduce: Network Mask field is set to 0.0.0.0 and user click Apply Button</p> <p>System management: unmanaged</p> <pre><code>5.2.1 Correspond to 5.3.1.\n5.3.1 message heading: \"Network Mask Validation\"\n5.3.1 message text: Network Mask is out of valid range. \n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/Main_Window_Class/5.1.6_main_window_control_network/#5168-user-message","title":"5.1.6.8 User message","text":"<p>Location: Main window-&gt;Network</p> <p>Action: User selects Static IP and click Apply Button </p> <p>Causes: Default Gateway is same as IP address</p> <p>Scenario to reproduce: Default Gateway is same as IP address and user click Apply Button</p> <p>System management: unmanaged</p> <pre><code>5.2.1 Correspond to 5.3.1.\n5.3.1 message heading:  \"Default Gateway Validation\"\n5.3.1 message text: Device IP address and Gateway IP address cannot be the same.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/Main_Window_Class/5.1.6_main_window_control_network/#5169-user-message","title":"5.1.6.9 User message","text":"<p>Location: Main window-&gt;Network-&gt;Static IP</p> <p>Action: User click Apply Button </p> <p>Causes: Any of IP Address octets is out of range 0:255</p> <p>Scenario to reproduce: Any of IP Address octets is out of range 0:255 and user click Apply Button</p> <p>System management: unmanaged</p> <pre><code>5.2.1 Correspond to 5.3.1.\n5.3.1 message heading: \"IP Address Validation\"\n5.3.1 message text: IP address is out of valid range.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/Main_Window_Class/5.1.6_main_window_control_network/#51610-user-message","title":"5.1.6.10 User message","text":"<p>Location: Main window-&gt;Network-&gt;Static IP</p> <p>Action: User click Apply Button </p> <p>Causes: Any of Network Mask octets is out of range 0:255</p> <p>Scenario to reproduce: Any of Network Mask octets is out of range 0:255 and user click Apply Button</p> <p>System management: unmanaged</p> <pre><code>5.2.1 Correspond to 5.3.1\n5.3.1 message heading:  \"Network Mask Validation\"\n5.3.1 message text: Network Mask is out of valid range.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/Main_Window_Class/5.1.6_main_window_control_network/#51611-user-message","title":"5.1.6.11 User message","text":"<p>Location: Main window-&gt;Network-&gt;Static IP</p> <p>Action: User click Apply Button </p> <p>Causes: Any of Default Gateway octets is out of range 0:255</p> <p>Scenario to reproduce: Any of Default Gateway octets is out of range 0:255 and user click Apply Button</p> <p>System management: unmanaged</p> <pre><code>5.2.1 Correspond to 5.3.1\n5.3.1 message heading: \"Gateway Validation\"\n5.3.1 message text: Default Gateway is out of valid range.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/Main_Window_Class/5.1.6_main_window_control_network/#51612-user-message","title":"5.1.6.12 User message","text":"<p>Location: Main window-&gt;Network</p> <p>Action: User change network configurations and click Apply Button </p> <p>Causes: Informative message before system reboot</p> <p>Scenario to reproduce: all fields set correctly and user click Apply button</p> <p>System management: unmanaged</p> <pre><code>5.2.1 Correspond to 5.3.1\n5.3.1 message heading: \"Network Settings\"\n5.3.1 message text: Network settings changed successfully.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/Main_Window_Class/5.1.7_main_window_control_system_upgrade/","title":"Main Window Control System Upgrade","text":""},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/Main_Window_Class/5.1.7_main_window_control_system_upgrade/#5171-user-message","title":"5.1.7.1 User message","text":"<p>Location: Main window-&gt;Control-&gt;System</p> <p>Action: User click Upgrade Button</p> <p>Causes: Cannot open /proc/mounts </p> <pre><code>5.2.1 message heading: \"Error\"\n5.2.1 message text: Upgrade failed. Cannot open USB memory device. The upgrade can't proceed.\n5.3.1 message heading: \"Error\"\n5.3.1 message text: Upgrade Failed. Cannot open USB memory device.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/Main_Window_Class/5.1.7_main_window_control_system_upgrade/#5172-user-message","title":"5.1.7.2 User message","text":"<p>Location: Main window-&gt;Control-&gt;System</p> <p>Action: User click Upgrade Button</p> <p>Causes: USB is not found</p> <p>Scenario to reproduce: User click Upgrade Button, but USB is not inserted</p> <p>System management: unmanaged</p> <pre><code>5.2.1 message heading:  \"Error\"\n5.2.1 message text: Upgrade failed. Cannot read USB memory device.The upgrade can't proceed.\n5.3.1 message heading: \"Error\"\n5.3.1 message text: Upgrade Failed! Error in checking  USB memory device.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/Main_Window_Class/5.1.7_main_window_control_system_upgrade/#5173-user-message","title":"5.1.7.3 User message","text":"<p>Location: Main window-&gt;Control-&gt;System</p> <p>Action: User click Upgrade Button</p> <p>Causes: When user selects file for upgrade with extension other then .clu or .fit</p> <p>Scenario to reproduce: User click Upgrade Button and selects file for upgrade with extension other then .clu (for 2K Receiver) or .fit (for 4K Receiver)</p> <p>System management: unmanaged</p> <p>NOTE: this is absolete as filter is implemented in OSD for correspomding file extentions</p> <pre><code>5.2.1 Correspond to 5.3.1\n5.3.1 message heading: \"Error\"\n5.3.1 message text: Specified File type is not compatible.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/Main_Window_Class/5.1.7_main_window_control_system_upgrade/#5174-user-message","title":"5.1.7.4 User message","text":"<p>Location: Main window-&gt;Control-&gt;System</p> <p>Action: User click Upgrade Button</p> <p>Causes: User has to select file for upgrade and click Yes or No before file extraction</p> <p>Scenario to reproduce: User clicks Upgrade Button, select file for upgrade and click Yes before file extraction</p> <p>System management: unmanaged</p> <pre><code>5.2.1 Correspond to 5.3.1\n5.3.1 message heading: \"Confirm Upgrade\"\n5.3.1 message text: Found upgrade file &lt; file name &gt; in USB memory device. Do you wish to proceed?\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/Main_Window_Class/5.1.7_main_window_control_system_upgrade/#5175-user-message","title":"5.1.7.5 User message","text":"<p>Location: Main window-&gt;Control-&gt;System</p> <p>Action: User click Upgrade Button</p> <p>Causes:  File extraction failed</p> <p>Scenario to reproduce:</p> <p>System management: Corrupt file by interrupting file transfer to USB stick (cancel file transfer before transfer completed) and try to upgrade with this file.</p> <pre><code>5.2.1 message heading:  \"Error\"\n5.2.1 message text: File extraction failed. The upgrade can't proceed.\n5.3.1 not supported\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/Main_Window_Class/5.1.7_main_window_control_system_upgrade/#5176-user-message","title":"5.1.7.6 User message","text":"<p>Location: Main window-&gt;Control-&gt;System</p> <p>Action: User click Upgrade Button</p> <p>Causes:  For some reason RELEASE* dir is not found</p> <p>NOTE: Obsolete.</p> <pre><code>5.2.1 message heading: \"Error\"\n5.2.1 message text: Upgrade failed. RELEASE* dir is not found, so the upgrade can't proceed  .\n5.3.1 not supported\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/Main_Window_Class/5.1.7_main_window_control_system_upgrade/#5177-user-message","title":"5.1.7.7 User message","text":"<p>Location: Main window-&gt;Control-&gt;System</p> <p>Action: User click Upgrade Button</p> <p>Causes:  Multiple RELEASE Directories found on USB</p> <p>Scenario to reproduce: unknown, see NOTE</p> <p>System management: unmanaged</p> <p>NOTE: Obsolete as now we are providing the choice of files available for upgrade and user select one of them.</p> <pre><code>5.2.1 message heading: \"Error\"\n5.2.1 message text: Upgrade failed. Your memory stick has multiple RELEASE Directories..., so the upgrade can't proceed.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/Main_Window_Class/5.1.7_main_window_control_system_upgrade/#5178-user-message","title":"5.1.7.8 User message","text":"<p>Location: Main window-&gt;Control-&gt;System</p> <p>Action: User click Upgrade Button</p> <p>Causes:  Upgrade version is less then 1.3.1</p> <p>Scenario to reproduce: Use upgrade version below 1.3.1</p> <p>System management: unmanaged</p> <pre><code>5.2.1 message heading: \"Error\"\n5.2.1 message text: Upgrade failed. The Version you are upgrading to is too OLD - You can only upgrade to version 1.3.1 or Newer via the GUI...\n5.3.1 not supported\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/Main_Window_Class/5.1.7_main_window_control_system_upgrade/#5179-user-message","title":"5.1.7.9 User message","text":"<p>Location: Main window-&gt;Control-&gt;System</p> <p>Action: User click Upgrade Button</p> <p>Causes:  Upgrade error SSH_VER_CHECK_FAIL</p> <p>Scenario to reproduce: /VERSION file not found</p> <p>System management: unmanaged</p> <pre><code>5.2.1 message not supported \n5.3.1 message heading: \"Upgrade failed\"\n5.3.1 message text: Upgrade failed. Error &lt; error number (integer)&gt;.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/Main_Window_Class/5.1.7_main_window_control_system_upgrade/#51710-user-message","title":"5.1.7.10 User message","text":"<p>Location: Main window-&gt;Control-&gt;System</p> <p>Action: User click Upgrade Button</p> <p>Causes:  Upgrade error SSH_CLASS_CHECK_FAIL</p> <p>Scenario to reproduce:</p> <p>System management: unmanaged</p> <pre><code>5.2.1 Correspond to 5.3.1\n5.3.1 message heading: \"Upgrade failed\"\n5.3.1 message text: Warning: You cannot upgrade a Receiver with a Transmitter file or vise versa. Upgrade process cancelled.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/Main_Window_Class/5.1.7_main_window_control_system_upgrade/#51711-user-message","title":"5.1.7.11 User message","text":"<p>Location: Main window-&gt;Control-&gt;System</p> <p>Action: User click Upgrade Button</p> <p>Causes:  Upgrade error SSH_BRAND_CHECK_FAIL</p> <p>Scenario to reproduce: Try to upgrade CloudiumSystems branded device with BlackBox upgrade file</p> <p>System management: unmanaged</p> <pre><code>5.2.1 Correspond to 5.3.1\n5.3.1 message heading: \"Upgrade failed\"\n5.3.1 message text: Warning: This is not a valid upgrade file. Upgrade process cancelled.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/Main_Window_Class/5.1.7_main_window_control_system_upgrade/#51712-user-message","title":"5.1.7.12 User message","text":"<p>Location: Main window-&gt;Control-&gt;System</p> <p>Action: User click Upgrade Button</p> <p>Causes:  Upgrade error SSH_PACKAGE_CHECK_FAIL</p> <p>Scenario to reproduce:</p> <p>System management: unmanaged</p> <pre><code>5.2.1 Correspond to 5.3.1\n5.3.1 message heading: \"Upgrade failed\"\n5.3.1 message text: Warning: No relevant upgrade package present. Please check release notes. Upgrade process cancelled.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/Main_Window_Class/5.1.7_main_window_control_system_upgrade/#51713-user-message","title":"5.1.7.13 User message","text":"<p>Location: Main window-&gt;Control-&gt;System</p> <p>Action: User click Upgrade Button</p> <p>Causes:  Upgrade error SSH_COMPATIBILITY_FAIL</p> <p>Scenario to reproduce: Possible to reproduce if /COMPATIBILITY contains number bigger than lsm number for corresponding Tech.</p> <p>System management: unmanaged</p> <pre><code>5.2.1 5.2.1 Correspond to 5.3.1\n5.3.1 message heading: \"Upgrade failed\"\n5.3.1 message text: Warning: It is not possible to upgrade to this upgrade file version. Please check release notes. Upgrade process cancelled.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/Main_Window_Class/5.1.7_main_window_control_system_upgrade/#51714-user-message","title":"5.1.7.14 User message","text":"<p>Location: Main window-&gt;Control-&gt;System</p> <p>Action: User click Upgrade Button</p> <p>Causes:  Upgrade error SSH_FILE_SEARCH_FAIL</p> <p>Scenario to reproduce: remove validate_/opt/cloudium/upgrade_package.sh and run receiver upgrade.</p> <p>System management: unmanaged</p> <pre><code>5.2.1 Correspond to 5.3.1\n5.3.1 message heading: \"Upgrade failed\"\n5.3.1 message text: Upgrade failed: Cannot find upgrade file.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/Main_Window_Class/5.1.7_main_window_control_system_upgrade/#51715-user-message","title":"5.1.7.15 User message","text":"<p>Location: Main window-&gt;Control-&gt;System</p> <p>Action: User click Upgrade Button</p> <p>Causes:  Upgrade error SSH_SCP_SEND_FAIL, SSH_PERMISSION_CHANGE_FAIL, SSH_EXTRACT_UPGRADE_FAIL, SSH_RUN_UPGRADE_FAIL, SSH_REBOOT_FAIL</p> <p>Scenario to reproduce: One example is to corrupt upgrade file (cancel upgrade file transfer to usb when it is in progress) and run upgrade selecting this file.</p> <p>System management: unmanaged</p> <pre><code>5.2.1 message not supported \n5.3.1 message heading: \"Upgrade failed\"\n5.3.1 message text: Upgrade failed: Upgrade file error\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/Main_Window_Class/5.1.7_main_window_control_system_upgrade/#51716-user-message","title":"5.1.7.16 User message","text":"<p>Location: Main window-&gt;Control-&gt;System</p> <p>Action: User click Upgrade Button</p> <p>Causes:  Upgrade error SSH_GET_INFO_FAIL</p> <p>Scenario to reproduce: If new device type is tested but MPN translation code was not updated. Currently supported device type list: Deel, Corrib, Manager, EmeraldSESH, EmeraldSEDH.</p> <p>System management: unmanaged</p> <pre><code>5.2.1 message not supported \n5.3.1 message heading: \"Upgrade failed\"\n5.3.1 message text: Upgrade failed: Cannot retrieve information from device.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/Main_Window_Class/5.1.7_main_window_control_system_upgrade/#51717-user-message","title":"5.1.7.17 User message","text":"<p>Location: Main window-&gt;Control-&gt;System</p> <p>Action: User click Upgrade Button</p> <p>Causes:  Upgrade error SSH_GET_INFO_FAIL</p> <p>Scenario to reproduce:</p> <p>System management: unmanaged</p> <p>NOTE: duplicate of 5.1.7.17 and will be removed.</p> <pre><code>5.2.1 message not supported \n5.3.1 message heading: \"Upgrade\"\n5.3.1 message text: Upgrade failed: Cannot retrieve information from device.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/Main_Window_Class/5.1.7_main_window_control_system_upgrade/#51718-user-message","title":"5.1.7.18 User message","text":"<p>Location: Main window-&gt;Control-&gt;System</p> <p>Action: User click Upgrade Button</p> <p>Causes:  Upgrade error SSH_NO_UPGRADE_REQUIRED</p> <p>Scenario to reproduce: Upgrade file is the same version as software version on device</p> <p>System management: unmanaged</p> <pre><code>5.2.1 Correspond to 5.3.1\n5.3.1 message heading: \"Upgrade\"\n5.3.1 message text: No upgrade required. Software version is already on appliance.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/Main_Window_Class/5.1.7_main_window_control_system_upgrade/#51719-user-message","title":"5.1.7.19 User message","text":"<p>Location: Main window-&gt;Control-&gt;System</p> <p>Action: User click Upgrade Button</p> <p>Causes:  Upgrade error SSH_INVALID_SIGNATURE</p> <p>Scenario to reproduce: If the combo script/binary content has been modified in any way the signature check will fail (It leaves out old package versions). Open the .clu file in vi and delete/modify a few lines it will fail the signature check. So if you open the .clu file in vi and delete/modify a few lines it will fail the signature check.</p> <p>System management: unmanaged</p> <pre><code>5.2.1 message not supported \n5.3.1 message heading: \"Upgrade failed\"\n5.3.1 message text: Upgrade failed. Error &lt; error number (integer)&gt;.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/Main_Window_Class/5.1.7_main_window_control_system_upgrade/#51720-user-message","title":"5.1.7.20 User message","text":"<p>Location: Main window-&gt;Control-&gt;System</p> <p>Action: User click Upgrade Button</p> <p>Causes:  Upgrade error Any of remaining errors returned (see full list below for 5.3.1 or 5.2.1 errors definitions)</p> <p>Scenario to reproduce: unknown</p> <p>System management: unmanaged</p> <pre><code>5.2.1 message heading: \"Error\"\n5.2.1 message text: Upgrade failed. Error &lt; error number (integer)&gt;.\n5.3.1 message heading: \"Upgrade failed\"\n5.3.1 message text: Upgrade failed. Error &lt; error number (integer)&gt;.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/Main_Window_Class/5.1.7_main_window_control_system_upgrade/#51721-user-message","title":"5.1.7.21 User message","text":"<p>Location: Main window-&gt;Control-&gt;System</p> <p>Action: User click Upgrade Button</p> <p>Causes: Progress bar while Signature validation in process on 5.3.1 system, Valid only for 2K system</p> <p>Scenario to reproduce: Normal upgrade procedure</p> <p>System management: unmanaged</p> <pre><code>5.3.1 message heading: \"Receiver Upgrade\"\n5.3.1 message text: Please wait while files are verified............. \n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/Main_Window_Class/5.1.7_main_window_control_system_upgrade/#51722-user-message","title":"5.1.7.22 User message","text":"<p>Location: Main window-&gt;Control-&gt;System</p> <p>Action: User click Upgrade Button</p> <p>Causes:  User have to confirm that upgrade can proceed by clicking Yes or Cancel after file extraction</p> <p>Scenario to reproduce: Normal upgrade procedure</p> <p>System management: unmanaged</p> <pre><code>5.2.1 Correspond to 5.3.1\n5.3.1 message heading: \"Upgrade in progress... \"\n5.3.1 message text: Do not power off the system until upgrade has completed and the system has rebooted... Hit OK to start the Upgrade...\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/Main_Window_Class/5.1.7_main_window_control_system_upgrade/#51723-user-message","title":"5.1.7.23 User message","text":"<p>Location: Main window-&gt;Control-&gt;System</p> <p>Action: User click Upgrade Button</p> <p>Causes: Unknown error is detected;</p> <p>Scenario to reproduce: unknown</p> <p>System management: unmanaged</p> <pre><code>5.2.1 message heading: \"Error\"\n5.2.1 message text: Upgrade failed. Unknown Error ...\n5.3.1 not supported.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/Main_Window_Class/5.1.7_main_window_control_system_upgrade/#51724-user-message","title":"5.1.7.24 User message","text":"<p>Location: Main window-&gt;Control-&gt;System</p> <p>Action: User click Upgrade Button</p> <p>Causes: Upgrade success;</p> <p>Scenario to reproduce: Normal upgrade processing</p> <p>System management: unmanaged</p> <pre><code>5.2.1 not supported\n5.3.1 message heading: \"Information\"\n5.3.1 message text: Upgrade Complete. The system will now reboot.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/Main_Window_Class/5.1.8_main_window_control_restore/","title":"Main Window Control Restore","text":""},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/Main_Window_Class/5.1.8_main_window_control_restore/#5181-user-message","title":"5.1.8.1 User message","text":"<p>Location: Main window-&gt;Control-&gt;System</p> <p>Action: User click Restore Button</p> <p>Causes: Message pop up asking user to confirm his choice with options \"Yes\" or \"Cancel\"</p> <p>Scenario to reproduce: User click Restore Button </p> <p>System management: managed and unmanaged</p> <pre><code>5.2.1 Correspond to 5.3.1\n5.3.1 message heading: \"Restore\"\n5.3.1 message text: Do you want to restore to factory default settings?\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/Main_Window_Class/5.1.8_main_window_control_restore/#5182-user-message","title":"5.1.8.2 User message","text":"<p>Location: Main window-&gt;Control-&gt;System</p> <p>Action: User click Restore Button</p> <p>Causes: Message pop up asking user to confirm his choice with options \"Yes\" or \"Cancel\" and user select \"Yes\"</p> <p>Scenario to reproduce: User clicks Restore Button and confirms his choice with options \"Yes\" System management: managed and unmanaged</p> <pre><code>5.2.1 Correspond to 5.3.1\n5.3.1 message heading: \"Restore\"\n5.3.1 message text: Appliance will Reboot now.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/Main_Window_Class/5.1.9_main_window_control_export/","title":"Main Window Control Export","text":""},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/Main_Window_Class/5.1.9_main_window_control_export/#5191-user-message","title":"5.1.9.1 User message","text":"<p>Location: Main window-&gt;Control-&gt;System</p> <p>Action: User click Export Button</p> <p>Causes: Internal error, /proc/mounts can\u2019t be read.</p> <pre><code>5.2.1 Correspond to 5.3.1\n5.3.1 message heading: \"Error\"\n5.3.1 message text: Export failed. Cannot open USB memory device. The export can't proceed.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/Main_Window_Class/5.1.9_main_window_control_export/#5192-user-message","title":"5.1.9.2 User message","text":"<p>Location: Main window-&gt;Control-&gt;System</p> <p>Action: User click Export Button</p> <p>Causes: USB can\u2019t be mounted.</p> <p>Scenario to reproduce: User click Export Button, but USB is not inserted</p> <p>System management: unmanaged</p> <pre><code>5.2.1 Correspond to 5.3.1\n5.3.1 message heading: \"Error\"\n5.3.1 message text: Export failed. USB memory device not found.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/Main_Window_Class/5.1.9_main_window_control_export/#5193-user-message","title":"5.1.9.3 User message","text":"<p>Location: Main window-&gt;Control-&gt;System</p> <p>Action: User click Export Button</p> <p>Causes: Internal error, /mnt/perm can\u2019t be read.</p> <pre><code>5.2.1 Correspond to 5.3.1\n5.3.1 message heading: \"Error\"\n5.3.1 message text: Export failed. Internal error.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/Main_Window_Class/5.1.9_main_window_control_export/#5194-user-message","title":"5.1.9.4 User message","text":"<p>Location: Main window-&gt;Control-&gt;System</p> <p>Action: User click Export Button</p> <p>Causes: Both xml databases are corrupted.</p> <p>Scenario to reproduce: Make both checksum files invalid or remove them before User click Export Button.</p> <p>System management: unmanaged</p> <pre><code>5.2.1 message heading: \"Error\"\n5.2.1 message text: Export failed. Local Configuration file is not found.\n5.3.1 message heading: \"Error\"\n5.3.1 message text:  Export failed. Local Configuration file is not found.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/Main_Window_Class/5.1.9_main_window_control_export/#5195-user-message","title":"5.1.9.5 User message","text":"<p>Location: Main window-&gt;Control-&gt;System</p> <p>Action: User click Export Button</p> <p>Causes: Both xml databases are not found on device</p> <p>Scenario to reproduce: Remove both xml databases before User click Export Button.</p> <pre><code>5.2.1 message heading: \"Error\"\n5.2.1 message text: Export failed. Settings file not found.\n5.3.1 message heading: \"Error\"\n5.3.1 message text:  Export failed. Local Configuration file is not found.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/Main_Window_Class/5.1.9_main_window_control_export/#5196-user-message","title":"5.1.9.6 User message","text":"<p>Location: Main window-&gt;Control-&gt;System</p> <p>Action: User click Export Button</p> <p>Causes: USB can\u2019t be read.</p> <p>Scenario to reproduce: USB incompatible</p> <p>System management:  unmanaged</p> <pre><code>5.2.1 message heading: \"Error\"\n5.2.1 message text: Export failed. USB memory device not found.\n5.3.1 message heading: \"Error\"\n5.3.1 message text: Export failed.  USB memory device not found.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/Main_Window_Class/5.1.9_main_window_control_export/#5197-user-message","title":"5.1.9.7 User message","text":"<p>Location: Main window-&gt;Control-&gt;System</p> <p>Action: User click Export Button</p> <p>Causes: USB not inserted</p> <p>Scenario to reproduce: User click Export Button but USB not inserted</p> <p>System management: unmanaged</p> <pre><code>5.2.1 Correspond to 5.3.1\n5.3.1 message heading: \"Error\"\n5.3.1 message text: Export failed.  USB memory device not found.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/Main_Window_Class/5.1.9_main_window_control_export/#5198-user-message","title":"5.1.9.8 User message","text":"<p>Location: Main window-&gt;Control-&gt;System</p> <p>Action: User click Export Button</p> <p>Causes: xml file can't be encrypted. </p> <p>Scenario to reproduce: User click Export Button but there is not enough space in /usr/local</p> <p>System management: unmanaged</p> <pre><code>5.2.1 Correspond to 5.3.1\n5.3.1 message heading: \"Error\"\n5.3.1 message text:  Export failed. Can not create Local Configuration file.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/Main_Window_Class/5.1.9_main_window_control_export/#5199-user-message","title":"5.1.9.9 User message","text":"<p>Location: Main window-&gt;Control-&gt;System</p> <p>Action: User click Export Button</p> <p>Causes: user selects the filename which already exist on USB. Options to answer \"Yes\" or \"No\"</p> <p>Scenario to reproduce: User clicks Export Button and selects the filename which already exist on USB.</p> <p>System management: unmanaged</p> <pre><code>5.2.1 message heading: \"Export File\"\n5.2.1 message text: Configuration file with same name already exists. Are you sure you want to overwrite the existing file?\n5.3.1 message heading: \"Export File\"\n5.3.1 message text:  Local Configuration file with same name already exists. Are you sure you want to overwrite the existing file?\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/Main_Window_Class/5.1.9_main_window_control_export/#51910-user-message","title":"5.1.9.10 User message","text":"<p>Location: Main window-&gt;Control-&gt;System</p> <p>Action: User click Export Button</p> <p>Causes: Export success</p> <p>Scenario to reproduce: User click Export Button and process successfully completed</p> <p>System management: unmanaged</p> <pre><code>5.2.1 Correspond to 5.3.1\n5.3.1 message heading: \"Information\"\n5.3.1 message text: Export successfully completed.\n</code></pre>"},{"location":"architecture/Enhanced_OSD/OSD_Message/OSD_Messages/Main_Window_Class/5.1.9_main_window_control_export/#51911-user-message","title":"5.1.9.11 User message","text":"<p>Location: Main window-&gt;Control-&gt;System</p> <p>Action: User click Export Button</p> <p>Causes: Export failed. </p> <p>Scenario to reproduce: unknown (possible: not enough space to write encrypted file to USB or internal error)</p> <p>System management: unmanaged</p> <pre><code>5.2.1 Correspond to 5.3.1\n5.3.1 message heading: \"Error\"\n5.3.1 message text: Export failed. Unknown error.\n</code></pre>"},{"location":"architecture/REST_API/receiver_to_boxilla_connection_status_over_rest/","title":"Receiver to Boxilla connection status notification over REST","text":""},{"location":"architecture/REST_API/receiver_to_boxilla_connection_status_over_rest/#master-document-revision-history","title":"Master Document Revision History","text":"Date Version Description Author/Editor Oct 10th 2019 0.1 First Draft Marcus McInerney Nov 1st 2019 0.2 Second Draft Marcus McInerney Aug 17th 2021 0.3 Set status to approved Marcus McInerney"},{"location":"architecture/REST_API/receiver_to_boxilla_connection_status_over_rest/#introduction","title":"Introduction","text":"<p>Boxilla version 3.3.3 requires that manged Rx appliances send notification to Boxilla when an Rx-Tx connection is established and terminated. This feature is required for two reasons:</p> <ol> <li>To allow Boxilla to activate usb_extender connections when appropriate (see Ref 1).</li> <li>To allow Boxilla to maintain an accurate log of active connections. At present, this is done by means of an audit that occurs every 60s. </li> </ol> <p>The managed Rx will send notification to Boxilla in the following scenarios:</p> <ul> <li>OSD connection launch and termination</li> <li>Connection launch and termination from Boxilla over REST</li> <li>Connection launch and termination from Control Bridge over non-secure REST.</li> </ul> <p>Ref 1 proposes that the Rx appliance notifies Boxilla of these changes via https calls to a secure web server running on Boxilla. This document defines the REST system that will be used to notify Boxilla of the Rx-Tx connection status and specifies the events will cause the Rx appliance to issue these REST calls.</p> <p>As of V5.2.3, the Rx appliance will issue a https call to notify Boxilla of connection status changes.  This call will be made regardless of the version of the Boxilla manager (see 4.3).</p>"},{"location":"architecture/REST_API/receiver_to_boxilla_connection_status_over_rest/#assumptions-and-dependencies","title":"Assumptions and Dependencies","text":"<p>This document details the change requirements in terms of the Rx appliance.  It corresponds to ENG-007-084.docx (Ref 1). The system applies to all Black Box KVM Receiver hardware variants (EM-4k and EM-2K). </p>"},{"location":"architecture/REST_API/receiver_to_boxilla_connection_status_over_rest/#references","title":"References","text":"<p>Ref 1. https://bbweb.blackbox.com/sites/Limerick/Engineering/SoftwareApplication/ENG-0007-084.docx Ref 2. https://bbweb.blackbox.com/sites/Limerick/Engineering/SoftwareApplication/ENG-0007-068.docx</p>"},{"location":"architecture/REST_API/receiver_to_boxilla_connection_status_over_rest/#implementation","title":"Implementation","text":"<p>This section describes the implementation of the client calls to Boxilla\u2019s Connection Status Server (CSS). </p>"},{"location":"architecture/REST_API/receiver_to_boxilla_connection_status_over_rest/#https-security","title":"https security","text":"<p>Https calls from the Rx appliance to the CSS occur over https protocol using cryptographic keys located on the Rx appliance and Boxilla server. The system used for encryption is identical to that implemented for Rx interfacing with Boxilla\u2019s LDAP server (Ref. 2). </p>"},{"location":"architecture/REST_API/receiver_to_boxilla_connection_status_over_rest/#libcurl-https-request-timeout","title":"Libcurl https request timeout","text":"<p>Libcurl provides an option to set a timeout for https requests. In the common code base, this timeout is hardcoded to 3 seconds. This means that if an https request does not receive a response after 3 seconds have elapsed, libcurl will return an error to the calling function. The timeout exists so that the binary or library making the call does not end up in a blocked state in the event of a server crash. </p>"},{"location":"architecture/REST_API/receiver_to_boxilla_connection_status_over_rest/#libcurl-maximum-file-size","title":"Libcurl maximum file size","text":"<p>Libcurl provides an option to limit the size of a file coming from a server. In the common code base, this has been set to 100kB. This means that if response from a server contains a binary body greater than 100kB, libcurl will return an error before the file copied to appliance memory. The limit of 100kB is selected for the following reasons:</p> <ol> <li>If the Rx appliance makes an http call to a non-existent uri on Boxilla, a \u201chelp\u201d file representing a full trace of its http framework is generated as part of the 404 response. The size of this trace is ~1MB and is copied to the response body, and eventually processed by libcurl using appliance cache memory. Setting maximum file size to 100kB will prevent the file from being copied from the response. Setting this limit is necessary because when an Rx appliance running V5.2.3 (or greater) is managed by a Boxilla V3.3 (or less) the appliance will be making a call to a non-existent endpoint and processing files of this size may impact on performance.  </li> <li>The Rx application software executes GET and PUT calls to uri\u2019s which are defined on an internal sever, for instance, when generating audio_statistics. The binary bodies of the data generated by these calls can be as large as 20kB. The 100kB limit will provide sufficient headroom to allow the appliance internal server to function correctly.  </li> </ol>"},{"location":"architecture/REST_API/receiver_to_boxilla_connection_status_over_rest/#process-backgrounding","title":"Process backgrounding","text":"<p>All https calls made to the CSS are backgrounded via a system call to the restapi command line interface. The reason for this is to ensure that the time required to make the request and receive a response (~100ms) is not added to the time required to establish an Rx-Tx connection. </p>"},{"location":"architecture/REST_API/receiver_to_boxilla_connection_status_over_rest/#error-handling","title":"Error handling","text":"<p>The https status code along with the uri are logged to syslog.</p> Status code Description 200 OK 400 BAD REQUEST 403 FORBIDDEN 404 NOT FOUND 500 INTERNAL SERVER ERROR"},{"location":"architecture/REST_API/receiver_to_boxilla_connection_status_over_rest/#overview","title":"Overview","text":"<p>The https server will reside on Boxilla and will allow the Rx to notify Boxilla of any change in its connection status. When the Rx-Tx connection is launched, the Rx will send an http request to the server to notify that the connection is active. When the Rx-Tx connection is terminated, the Rx will send an http request to the server to say that the connection is no longer active. Section 4.6 provides detail on events that will trigger notification of changes connection status.</p> <p>The Rx will notify Boxilla of any change via the following uri:</p> <p>api/usb_extender/v1/connection </p> <p>The uri will accept two types of request, determined by the http verb used - POST or DELETE:</p> <ol> <li>POST - this request notifies Boxilla that a connection is launched. </li> <li>DELETE- this request notifies Boxilla that a connection is terminated. </li> </ol> <p>The following section provides implementation details. </p>"},{"location":"architecture/REST_API/receiver_to_boxilla_connection_status_over_rest/#post-connection-https-request","title":"POST connection https request","text":"<p>Launching an Rx-Tx connection on a managed Rx causes a POST request to the connection endpoint. This section defines the endpoint and specifies the events that initiate a call to the endpoint from the Rx.</p> Http verb URI Content-Type parameter bytes parameter description POST /api/usb_extension/v1/connection json MAC 16 MAc address of RX(upper case) connection name 32 Conenction name as specified in xml user 32 Associated user as specified in xml"},{"location":"architecture/REST_API/receiver_to_boxilla_connection_status_over_rest/#event-that-initiate-post-request","title":"Event that initiate POST request","text":""},{"location":"architecture/REST_API/receiver_to_boxilla_connection_status_over_rest/#on-completion-of-decoder_startsh","title":"On completion of decoder_start.sh","text":"<p>The Rx appliance will make a POST call to the endpoint on completion of decoder_start.sh. This requires parsing of the startapp.sh file in order to obtain the user and connection_name. </p>"},{"location":"architecture/REST_API/receiver_to_boxilla_connection_status_over_rest/#delete-connection-https-request","title":"DELETE connection https request","text":"<p>The Rx issues an https DELETE request to this endpoint when an Rx-Tx connection terminates. This section defines the endpoint and specifies the events that initiate a call to the endpoint from the Rx.</p> Http verb URI Content-Type parameter bytes parameter description DELETE /api/usb_extender/v1/connection json MAC 16 MAC address of RX (upper case) exit_reason(see 6) - unsigned integer representing exit reason"},{"location":"architecture/REST_API/receiver_to_boxilla_connection_status_over_rest/#events-that-initiate-delete-request","title":"Events that initiate DELETE request","text":""},{"location":"architecture/REST_API/receiver_to_boxilla_connection_status_over_rest/#startguish","title":"startgui.sh","text":"<p>The Rx appliance will make a DELETE call to the endpoint defined in 4.6.1 directly after the connection is terminated from startgui.sh. This precedes launch of OSD. </p>"},{"location":"architecture/REST_API/receiver_to_boxilla_connection_status_over_rest/#on-creation-of-preset_switch-file-on-switching-connection-via-preset","title":"On creation of PRESET_SWITCH file (on switching connection via preset)","text":"<p>Boxilla \u201cpreset\u201d allows for a connection to be terminated with no subsequent launch of OSD. This is to minimise the time required to establish a switched connection, for instance  Terminating connection_1 (RX1-&gt;TX1) and launching connection_2 (RX1-&gt;TX2). </p> <p>In this case, a file is written to the temporary folder which causes startgui.sh to block the OSD from launching. This requires a call to DELETE on the endpoint defined in 4.6.1 on exiting function terminate_connection_no_osd. </p>"},{"location":"architecture/REST_API/receiver_to_boxilla_connection_status_over_rest/#notes","title":"Notes","text":""},{"location":"architecture/REST_API/receiver_to_boxilla_connection_status_over_rest/#appliance-may-send-numerous-delete-s-in-succession","title":"Appliance may send numerous DELETE s in succession","text":"<p>Numerous reboots of the Rx causes the OSD to reload. This causes a call to DELETE on uri defined in 4.6.1. </p>"},{"location":"architecture/REST_API/receiver_to_boxilla_connection_status_over_rest/#connection-launched-by-boxilla-overrides-osd-launched-connection","title":"Connection launched by Boxilla overrides OSD launched connection","text":"<p>If a connection is launched via OSD then another (or the same connection) is launched from Boxilla, the OSD launched connection is overridden. This terminates the dfreerdp instance, causing the OSD to launch. When this occurs the CSS receives a DELETE request followed by a POST request.</p> <p></p>"},{"location":"architecture/REST_API/receiver_to_boxilla_connection_status_over_rest/#exit-codes","title":"Exit codes","text":"Name Code Description (included where not explicit) DF_EXIT_SUCCESS 0 DF_EXIT_DISCONNECT 1 DF_EXIT_LOGOFF 2 DF_EXIT_IDLE_TIMEOUT 3 DF_EXIT_LOGON_TIMEOUT 4 DF_EXIT_CONN_REPLACED 5 DF_EXIT_OUT_OF_MEMORY 6 DF_EXIT_CONN_DENIED 7 DF_EXIT_CONN_DENIED_FIPS 8 DF_EXIT_USER_PRIVILEGES 9 DF_EXIT_FRESH_CREDENTIALS_REQUIRED 10 DF_EXIT_DISCONNECT_BY_USER 11 DF_EXIT_LOGOFF_BY_USER 12 DF_EXIT_LICENSE_INTERNAL 16 DF_EXIT_LICENSE_NO_LICENSE_SERVER 17 DF_EXIT_LICENSE_NO_LICENSE 18 DF_EXIT_LICENSE_BAD_CLIENT_MSG 19 DF_EXIT_LICENSE_HWID_DOESNT_MATCH 20 DF_EXIT_LICENSE_BAD_CLIENT 21 DF_EXIT_LICENSE_CANT_FINISH_PROTOCOL 22 DF_EXIT_LICENSE_CLIENT_ENDED_PROTOCOL 23 DF_EXIT_LICENSE_BAD_CLIENT_ENCRYPTION 24 DF_EXIT_LICENSE_CANT_UPGRADE 25 DF_EXIT_LICENSE_NO_REMOTE_CONNECTIONS 26 DF_EXIT_RDP 32 DF_EXIT_MEMORY 129 DF_EXIT_PROTOCOL 130 DF_EXIT_CONN_FAILED 131 DF_EXIT_CLOUDIUM_PIPE 132 DF_EXIT_IHSE_ERROR 133 IHSE Specific does not concern Blackbox Rx. DF_EXIT_KILL 134 Used when user enters key combo to load previous connection DF_EXIT_PREVIOUS 135 Used when user enters key combo to load next connection DF_EXIT_NEXT 136 DF_EXIT_RESTORE 137 Restore the current connection DF_EXIT_TIMEOUT 138 DF_EXIT_NLA_NEG_FAIL 139 NLA connection failure DF_EXIT_NLA_AUTH_FAIL 140 NLA authentication failure DF_EXIT_DEV_NODE_FAIL 141 Dev Nodes Fail to Open DF_EXIT_INACTIVITY_TIMEOUT 142 Inactivity timeout DF_EXIT_PREEMPTION_ACCESS_DENIED 143 Preemption access denied DF_EXIT_PREEMPTION_ACCESS_GRANTED 144 DF_EXIT_PREEMPTION_IN_PROGRESS 145 DF_EXIT_NON_PREEMPTIBLE_CONNECTION 146 DF_EXIT_DOMAIN_KEY_ERROR 147 DF_EXIT_FPGA_RESET_ERROR 148 DF_EXIT_UNKNOWN 255 <ul> <li>Next Document in Series-&gt; Zone Support</li> </ul>"},{"location":"architecture/REST_API/rest_api_zone_support/","title":"REST API Zone Support","text":""},{"location":"architecture/REST_API/rest_api_zone_support/#master-document-revision-history","title":"Master Document Revision History","text":"Date Version Description Author/Editor March 9th 2020 0.1 First Draft Marcus McInerney March 9th 2020 0.2 Second Draft Marcus McInerney"},{"location":"architecture/REST_API/rest_api_zone_support/#introduction","title":"Introduction","text":"<p>In order to optimise management of KVM systems composed of large numbers of appliances, Boxilla will allow managed appliances to be assigned to specific zones. The managed Rx will support a REST endpoint which will allow the manager to:</p> <ul> <li>Set a Zone</li> <li>Get a Zone</li> <li>Delete a zone</li> </ul> <p>The zone name will be used to download a zone-specific XML database.  The zone-specific XML database contains a shortened list of connections that are zone-specific. </p>"},{"location":"architecture/REST_API/rest_api_zone_support/#references","title":"References","text":"<p>Ref 1. ENG-0007-099</p>"},{"location":"architecture/REST_API/rest_api_zone_support/#overview","title":"Overview","text":"<p>The zone will be assigned over REST via JSON request structure. Likewise, the zone will be read from the appliance over REST via a JSON response structure. </p>"},{"location":"architecture/REST_API/rest_api_zone_support/#specification","title":"Specification","text":"<p>This section specifies Rx appliance zone support. This will be implemented in Appliance firmware v5.6. </p> <ol> <li>The PUT, GET and DELETE zone endpoints are specific to the Rx appliance.</li> <li>The zone name is stored in the Rx sqlite3 database</li> <li>The Rx requires that a valid CloudDataA.xml and its md5sum checksumA be present in /usr/local/gui_files. Depending on the state of the Rx, whether it is in a Zone or whether an AD user is logging into its OSD, the Rx will fetch a different XML database from Boxilla. The source name of this file (its name on the Boxilla system) may vary but it is always written to /usr/local/gui_files/CloudDataA.xml. The same applied for checksumA.</li> <li>If the Zone entry in the Rx sqlite3 database is empty then any subsequent SCP of the XML database will use the following source file: <p>/mnt/perm/CloudDataA.xml</p> </li> <li>If the Zone entry in the Rx sqlite3 database is empty then any subsequent SCP of the XML database checksum will use the following source file: <p>/mnt/perm/checksumA</p> </li> <li>Once the zone is set on the Rx appliance, every subsequent SCP of the XML database from the manager will require that the zone name is part of the the source file in the SCP process. For example, if the zone name is \u201czone-45\u201d, the source file will be: <p>/mnt/perm/Zone_-zone-45-_DataA.xml</p> </li> <li>Once the zone is set on the Rx appliance, every subsequent SCP of the XML database checksum file from the manager require that the zone name is part of the the source file in the SCP process. For example, if the zone name is \u201czone-45\u201d, the source file will be: <p>/mnt/perm/Zone_-zone-45-_checksumA</p> </li> <li>When the manager DELETES a zone the sqlite3 database \u201cZone\u201d entry will be removed.  This will cause the Rx appliance to use the source names specified in 3 and 4 above. </li> <li>The scheme to update the XML database is identical to that implemented in Rx  appliance V5.5. When the manager sets or deletes the zone on the Rx appliance, this does not cause an update of the XML database. In order to obtain the Zone-specific XML database, either of the following must occur:<ul> <li>A non-AD user must log-out and log back in to the Rx appliance.</li> <li>The appliance must be rebooted</li> </ul> </li> <li>When Boxilla changes the Rx Zone via REST there is no action triggered to download a Zone specific XML file. The user must log out and log back in in order to obtain the Zone specific XML file</li> <li>If the user logging in is an AD user then the AD user specific XML file is downloaded, not the Zone specific XML file. This is the case regardless of the state of the Zone entry in the sqlite3 db. For AD users that are logging into a Zoned RX, all necessary filtering (what connections to include in the XML file) is carried out by Boxilla.</li> <li>If the Zone is set on the Appliance but for some reason the SCP of the Zone xml file and or checksum fails then an error will be logged to syslog and the login dialog of the OSD will appear.</li> <li>On appliance downgrade: The sqlite database is overwritten with the default database and the patch to create the Zone entry is not applied. </li> <li>On appliance upgrade: The patch is not applied and the sqlite Zone entry is maintained.</li> <li>On appliance restore: The sqlite database is overwritten with the default database and the patch to create the Zone</li> </ol>"},{"location":"architecture/REST_API/rest_api_zone_support/#zone-name","title":"Zone name","text":"<p>The zone name has the following restrictions: </p> <ul> <li>32 byte character (maximum)</li> <li>Alphanumeric</li> <li>\u2018.\u2019and \u2018-\u2018</li> </ul> <p>When copying an XML file from Boxilla the zoned RX must specify the XML file and its checksum as described in the sections below. The destination filenames for the XML file and its checksum are: </p> <ul> <li>CloudDataA.xml</li> <li>checksumA.xml</li> <li>The same principle applies when downloading the Active Directory specific XML file and its checksum. </li> </ul>"},{"location":"architecture/REST_API/rest_api_zone_support/#rx-xml-database","title":"Rx XML database","text":"<p>Once the zone is set on the Rx, the source file (the file name used to SCP the XML database file from Boxilla) takes the following format:</p> <p>/mnt/perm/Zone_--_DataA.xml."},{"location":"architecture/REST_API/rest_api_zone_support/#rx-xml-database-checksum-file","title":"Rx XML database checksum file","text":"<p>Once the zone is set on the Rx, the source file (the file name used to SCP the XML database checksum file from Boxilla) takes the following format:</p> <p>/mnt/perm/Zone_--_checksumA.xml."},{"location":"architecture/REST_API/rest_api_zone_support/#zone-representation-of-osd-mainwindow","title":"Zone representation of OSD MainWindow","text":""},{"location":"architecture/REST_API/rest_api_zone_support/#zone-set","title":"Zone set","text":"<p>The following image shows OSD representation of the Zone when it is set </p> <p></p>"},{"location":"architecture/REST_API/rest_api_zone_support/#zone-not-set","title":"Zone not set","text":"<p>When the Zone is not set there will be no text label on bottom r.h.s. of OSD.</p>"},{"location":"architecture/REST_API/rest_api_zone_support/#implementation","title":"Implementation","text":"<p>Appliance version 5.6 will support two REST endpoints to </p>"},{"location":"architecture/REST_API/rest_api_zone_support/#set-zone","title":"SET zone","text":""},{"location":"architecture/REST_API/rest_api_zone_support/#verb","title":"Verb","text":"<p>Setting the zone requires the use of the PUT verb.</p>"},{"location":"architecture/REST_API/rest_api_zone_support/#url","title":"URL","text":"<p>https://IP:port_number/control/configuration/zone</p>"},{"location":"architecture/REST_API/rest_api_zone_support/#request-json-structure","title":"Request JSON structure","text":"<pre><code>{\n    \"zone\": \"ZONE-A1\"\n}\n</code></pre>"},{"location":"architecture/REST_API/rest_api_zone_support/#response-json-structure","title":"Response JSON structure","text":"<p>N/a</p>"},{"location":"architecture/REST_API/rest_api_zone_support/#get-zone","title":"GET zone","text":""},{"location":"architecture/REST_API/rest_api_zone_support/#verb_1","title":"Verb","text":"<p>Setting the zone requires the use of the GET verb.</p>"},{"location":"architecture/REST_API/rest_api_zone_support/#url_1","title":"URL","text":"<p>https://IP:port_number/control/configuration/zone</p>"},{"location":"architecture/REST_API/rest_api_zone_support/#request-json-structure_1","title":"Request JSON structure","text":"<p>N/A</p>"},{"location":"architecture/REST_API/rest_api_zone_support/#response-json-structure_1","title":"Response JSON structure","text":"<pre><code>{\n    \"zone\": \"ZONE-A1\"\n}\n</code></pre>"},{"location":"architecture/REST_API/rest_api_zone_support/#delete-zone","title":"DELETE zone","text":""},{"location":"architecture/REST_API/rest_api_zone_support/#verb_2","title":"Verb","text":"<p>Setting the zone requires the use of the DELETE verb.</p>"},{"location":"architecture/REST_API/rest_api_zone_support/#url_2","title":"URL","text":"<p>https://IP:port_number/control/configuration/zone</p>"},{"location":"architecture/REST_API/rest_api_zone_support/#request-json-structure_2","title":"Request JSON structure","text":"<p>N/A</p>"},{"location":"architecture/REST_API/4._URI-API_versionTable/4.1_GET_endpoints/","title":"GET Endpoints","text":"<p>The following table specifies endpoints accessed using the GET verb.</p> URL Verb 1.0.11 1.0.10 1.0.9 1.0.8 1.0.7 1.0.6 1.0.5 1.0.4 /alerts GET \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /capabilities GET \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2573 /control/configuration/rx_settings GET \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /control/configuration/tx_settings GET \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /control/configuration/tx_clone_name* GET \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 \u2713 \u2713 /control/configuration/rx_edid_table_1* GET \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 \u2713 \u2713 /control/configuration/rx_edid_table_2* GET \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 \u2713 \u2713 /control/configuration/zone GET \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2573 \u2573 /control/configuration/bonded_group GET \u2713 \u2713 \u2713 \u2713 \u2713 \u2573 \u2573 \u2573 /control/configuration/timers_configuration GET \u2713 \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 /control/diags GET \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2573 /control/diags/files GET \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2573 /control/diags/loglevel GET \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2573 /control/diags/debugmode GET \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2573 /control/user GET \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /control/process? GET \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /control/safemode GET \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /control/led GET \u2713 \u2713 \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 /statistics/facts/system_facts GET \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /statistics/facts/video_facts GET \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /statistics/facts/analog_audio_facts GET \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /statistics/facts/usb_facts GET \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /statistics/facts/network/physical GET \u2713 \u2713 \u2713 \u2713 \u2573 \u2573 \u2573 \u2573 /statistics/facts/network/toe_connections GET \u2713 \u2713 \u2713 \u2713 \u2573 \u2573 \u2573 \u2573 statistics/previous_connections GET \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /statistics/active_connections GET \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /statistics/connection_control GET \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /version GET \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 <p>*Deprecated</p>"},{"location":"architecture/REST_API/4._URI-API_versionTable/4.2_Post_endpoints/","title":"POST Endpoints","text":"<p>The following table specifies endpoints accessed using the POST verb.</p> URL Verb 1.0.11 1.0.10 1.0.9 1.0.8 1.0.7 1.0.6 1.0.5 1.0.4 /control/diags/run POST \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2573 /control/diags/sync POST \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2573"},{"location":"architecture/REST_API/4._URI-API_versionTable/4.3_Put_endpoints/","title":"PUT Endings","text":"<p>The following table specifies endpoints accessed using the PUT verb.</p> URL Control Object Verb 1.0.11 1.0.10 1.0.9 1.0.8 1.0.7 1.0.6 1.0.5 1.0.4 /control/configuration/rx_settings - PUT \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /control/configuration/tx_settings - PUT \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /control/configuration/tx_edid_table_1* - PUT \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 \u2713 \u2713 /control/configuration/tx_edid_table_2* - PUT \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 \u2713 \u2713 /control/configuration/zone - PUT \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2573 \u2573 /control/configuration/bonded_group - PUT \u2713 \u2713 \u2713 \u2713 \u2713 \u2573 \u2573 \u2573 /control/configuration/timers_configuration - PUT \u2713 \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 /control flush PUT \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /control transform_active_previous PUT \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /control reset_authentication_stats PUT \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /control reboot_device PUT \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2573 \u2573 /control log_off PUT \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /control make_connection PUT \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /control force_connection PUT \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /control terminate_connection PUT \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /control terminate_connection_no_osd PUT \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /control connection_terminationexit_code PUT \u2713 \u2713 \u2713 \u2713 \u2713 \u2573 \u2573 \u2573 /control/diags/loglevel - PUT \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2573 /control/diags/run - PUT \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2573 /control/diags/sync - PUT \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2573 /control/led led_enable/led_disable PUT \u2713 \u2713 \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 /user/login - PUT \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2573 \u2573"},{"location":"architecture/REST_API/4._URI-API_versionTable/4.4_Delete_endpoints/","title":"Delete Endpoints","text":"<p>The following table specifies endpoints accessed using the DELETE verb.</p> URL Verb 1.0.11 1.0.10 1.0.9 1.0.8 1.0.7 1.0.6 1.0.5 1.0.4 /control/configuration/zone DELETE \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2573 \u2573"},{"location":"architecture/REST_API/5._REST_API_GET_Endpoints/5.33_GET_Timers_Config/","title":"GET Receiver Timer Configurations","text":""},{"location":"architecture/REST_API/5._REST_API_GET_Endpoints/5.33_GET_Timers_Config/#url","title":"URL","text":"<p>https://IP:8888/control/configuration/timers_configuration</p>"},{"location":"architecture/REST_API/5._REST_API_GET_Endpoints/5.33_GET_Timers_Config/#implementation-notes","title":"Implementation Notes","text":"<p>This node returns the appliance timers configuration, Local OSD Inactivity timer value and Local Connection Inactivity timer value.</p>"},{"location":"architecture/REST_API/5._REST_API_GET_Endpoints/5.33_GET_Timers_Config/#response-class-definition","title":"Response Class Definition","text":"Parameter Format timers_config 32 byte char array local_osd_inactivity int local_connection_inactivity int"},{"location":"architecture/REST_API/5._REST_API_GET_Endpoints/5.33_GET_Timers_Config/#response-class-json-structure","title":"Response Class JSON Structure","text":"<pre><code>{\n    \"timers_config\": \"global\",\n    \"local_osd_inactivity\": 0,\n    \"local_connection_inactivity\": 0\n\n}\n</code></pre>"},{"location":"architecture/REST_API/7._REST_API_PUT_Commands/7.26_PUT_Timers_Config/","title":"PUT Receiver Timer Configurations","text":""},{"location":"architecture/REST_API/7._REST_API_PUT_Commands/7.26_PUT_Timers_Config/#url","title":"URL","text":"<p>https://IP:8888/control/configuration/timers_configuration</p>"},{"location":"architecture/REST_API/7._REST_API_PUT_Commands/7.26_PUT_Timers_Config/#implementation-notes","title":"Implementation Notes","text":"<p>This node sets the appliance timers configuration, Local OSD Inactivity timer value and Local Connection Inactivity timer value.</p>"},{"location":"architecture/REST_API/7._REST_API_PUT_Commands/7.26_PUT_Timers_Config/#request-class-json-structure","title":"Request Class JSON Structure","text":"<pre><code>{\n    \"timers_config\": \"global\",\n    \"local_osd_inactivity\": 0,\n    \"local_connection_inactivity\": 0\n\n}\n</code></pre>"},{"location":"architecture/REST_API/7._REST_API_PUT_Commands/7.26_PUT_Timers_Config/#request-class-formats","title":"Request Class Formats","text":"Parameter Format timers_config 32 byte char array local_osd_inactivity int 0 or 2-60 local_connection_inactivity int 0 or 2-60"},{"location":"architecture/Summary/summary/","title":"Emerald Architecture","text":"<p>Emerald System Reference</p>"},{"location":"architecture/Summary/summary/#documents-in-use-in-blackbox","title":"Documents in use in Blackbox","text":"<ul> <li>Emerald Architectural Impact Document - This document describes the architectural impact of a new feature on the existing architecture. The document is high level and identifies the impact on the existing architecture of a new feature. It should allow the software engineer make a rough estimate of the scope of the work required to realise this feature.</li> <li>Emerald Software Design Document - This document describes the software design for the feature. It uses the system reference document for context and should provide specific references to that document.</li> <li>System Reference Document - The system reference document describes the overall system in detail. I is used as a reference for all future feature development. Functional owners are required to maintain their section of the document. </li> </ul>"},{"location":"architecture/Summary/summary/#guidelines-for-system-reference","title":"Guidelines for System Reference","text":"<p>Please follow the guidelines below to ensure a consistency in the style and level of detail required. - Do not include code or pseudo code in the document unless absolutely necessary. The document is meant to be a high level design document and should provide sufficient detail to allow someone understand the basic elements of a particular subsystem. You may reference a relevant software package and individual files within that package.</p> <ul> <li> <p>If possible use drawio to create the diagrams. </p> </li> <li> <p>Explain the function of the subsystem by answering the following questions:</p> <ul> <li>What is the role of the subsystem with the system?</li> <li>What other components does it interact with?</li> <li>What are the main sub modules of the subsystem?</li> <li>How do these interact with each other</li> </ul> </li> <li> <p>Outline the process and threading structure for the subsystem.</p> </li> <li> <p>Indicate which software packages provide the functionality associated with the subsystem.</p> </li> </ul>"},{"location":"architecture/Summary/summary/#document-templates","title":"Document Templates","text":"<p>Software Design Document Template</p> <p>Architectural Impact Analysis Document Template</p>"},{"location":"architecture/Summary/summary/#proposals","title":"Proposals","text":"<p> Slide and Glide Proposal - Click to Download </p>"},{"location":"architecture/Summary/summary/#reference","title":"Reference","text":"<p>Emerald System Reference</p> <p> Emerald USB HID Reference - Click to Download </p>"},{"location":"architecture/Summary/summary/#performance-analysis","title":"Performance Analysis","text":"<p> System Latency Analysis - Click to Download </p> <p> Performance Analysis - Click to Download </p> <p> Emerald Embedded Design Document Template - Click to Download </p>"},{"location":"architecture/Summary/Contents/bonded_connections/","title":"Emerald Bonded Connections","text":""},{"location":"architecture/Summary/Contents/bonded_connections/#launching-a-bonded-connection","title":"Launching a Bonded Connection","text":""},{"location":"architecture/Summary/Contents/data_flow_controller/","title":"Data Flow Controller","text":""},{"location":"architecture/Summary/Contents/data_flow_controller/#tx-data-flow-controller-on-the-transmitter","title":"TX Data Flow Controller on the Transmitter","text":"<p>In high level terms, the Data Flow Controller manages moving the capture and encode masks while the capture and encode blocks handle the capture and encode enable bits. </p> <p></p>"},{"location":"architecture/Summary/Contents/data_flow_controller/#the-role-of-the-data-flow-controller-on-the-receiver","title":"The Role of the Data Flow Controller on the Receiver","text":"<p>The main functions of the Data Flow Controller on the Decoder side are to let the Tile Engine Decoder block know when there is another frame ready to decode (based on notification from the AV AppEngine that a packet has been received and stored), and let the AV AppEngine know when a frame has been decoded (based on notification from the Tile Engine Decoders)</p> <p>For lossless connections on the Receiver side the DFC has no involvement in the data path.</p> <p></p>"},{"location":"architecture/Summary/Contents/diagnostics/","title":"Common Diagnostics","text":"<ul> <li>/opt/blackbox/networking/logger.sh</li> <li>/opt/blackbox/networking/check_discovery.sh</li> <li>/opt/blackbox/networking/show_connection_table.sh</li> <li>/opt/blackbox/networking/check_multicast.sh</li> <li>/opt/blackbox/networking/tcpmonitor.sh</li> <li>/opt/blackbox/networking/show_link_status.sh</li> </ul>"},{"location":"architecture/Summary/Contents/diagnostics/#retrieving-diagnostics-from-boxilla","title":"Retrieving Diagnostics from Boxilla.","text":"<p>Diagnostics are sent to Boxilla using the script run_diagnostics.sh in /opt/blackbox. These are sent using scp. The system library cli provides an interface: libsystem_cli \u2013scp for this purpose. The southbound user name and password are used for this purpose.</p> <ul> <li>/opt/blackbox/run_diagnostics.sh</li> </ul>"},{"location":"architecture/Summary/Contents/diagnostics/#avae-diagnostics-information","title":"AVAE Diagnostics Information","text":"<ul> <li>/opt/blackbox/networking/newaae_dump_stats.sh</li> </ul>"},{"location":"architecture/Summary/Contents/diagnostics/#toe-diagnostic-information","title":"TOE Diagnostic Information","text":"<ul> <li>/opt/blackbox/networking/newaae_dump_stats.sh</li> </ul>"},{"location":"architecture/Summary/Contents/discovery/","title":"Discovery","text":"<p>This document focuses on the discovery implementation on the SDKVM (deskvue)</p>"},{"location":"architecture/Summary/Contents/discovery/#references","title":"References","text":""},{"location":"architecture/Summary/Contents/discovery/#discovery-and-ldap","title":"Discovery and LDAP","text":"<ul> <li>Boxilla LDAP SDD</li> <li>Discovery Appliance SDD</li> <li>Technical note explaining how discovery works on the SDKVM</li> <li>Discovery on SDKVM Test Plan</li> </ul>"},{"location":"architecture/Summary/Contents/discovery/#dependent-libraries","title":"Dependent Libraries","text":"<p>On the SDKVM discovery depends on the following libraries:</p> <ul> <li>openssl - library for applications that secure communications over computer networks against eavesdropping</li> <li>systemutils  - systemlib. Blackbox's system library for embedded appliances</li> <li>libdatabase -&gt; sqlite3 based library for appliance configuration storage</li> <li>ssh2 - library implementing the SSH2 protocol for ssh clients</li> <li>logging - Blackbox logging library - perhaps use systemd journal logging for output</li> </ul>"},{"location":"architecture/Summary/Contents/discovery/#discovery-process-flow","title":"Discovery Process Flow","text":"<p>When appliances are shipped they are configured with a default IP address. The discovery process allows a Boxilla to discover the device without knowing its actual IP address. Once discovered the user has the option of setting the IP of the unit by using the discovery protocol.</p> <p></p> <ol> <li> <p>When, in the Idle state, an appliance receives a discover request, the discovery appliance state machine captures Boxilla's MAC Address and IP Address from the discovery pdu and stores these values in the appliance datastore It then sets the default route for eth0 to 0.0.0.0, generates a discover response message and transitions to the Discovered state.</p> </li> <li> <p>Once Boxill has received the discovery resonse it will list it in its table of devices and provide an option for the user to set the IP address of the unit. If the user choses to set the IP address then a Set_IP protocol message is sent to configure the appliance or SDKVMs network settings e.g. IP Address, Netmask and Gateway. The Set_IP protocol message is only processed when the discover state machine is in the Discovered state. Following receipt of the Set_IP protocol message the discovery appliance binary updates the local network configuration and transitions to the Configuring state.</p> </li> <li> <p>Once the network settings have been successfully applied, the discovery appliance generates a Set_IP response message with the status set to Success. It then transitions to the Configured state.</p> </li> <li> <p>If the discovery appliance binary was unable to apply the network settings, the binary generates a Set_IP response message with the status set to Failed. It then reverts to the Discovered state.</p> </li> <li> <p>The discovery protocol does not generate explicit Manage protocol messages to transition appliances into the Managed state; this transition occurs as a result of the Audit request received from Boxilla. Appliances transition from the Discovered state to the Managed state following receipt of the first Audit request.</p> </li> <li> <p>Appliances may also become unmanaged, on the appliance this is achieved via the SSH interface whereby the unit is restored to factory defaults. This causes all discovery persistent data to be removed, forcing the unit to revert to the Idle state. On the SDKVM the system is unmanaged through the REST API.</p> </li> </ol> <p>Note: On the SDKVM the webservice runs on bootup. On the appliance it only runs if the system is managed.</p>"},{"location":"architecture/Summary/Contents/discovery/#files-used-by-the-discovery-process","title":"Files used by the Discovery Process","text":""},{"location":"architecture/Summary/Contents/discovery/#test-scripts","title":"Test Scripts","text":"<p>setup_rest_assure.sh is a test script for generating the discovery and mgr_ip file</p> <pre><code>#!/bin/bash\nDISCOVERY_FILE=\"/usr/local/discovery\"\nMANAGER_FILE=\"/usr/local/mgr_ip\"\nrm -rf $DISCOVERY_FILE\necho \"MGR=0:8c:10:1c:c6:2e\" &gt; $DISCOVERY_FILE\necho \"STATE=Managed\" &gt;&gt; $DISCOVERY_FILE\necho \"DEBUG=OFF\" &gt;&gt; $DISCOVERY_FILE\nrm /usr/local/webservice #remove any existing binaries\nrm $MANAGER_FILE\necho \"MGR_IP=10.211.129.45\" &gt; $MANAGER_FILE\nmkdir -p /usr/local/webservice\ntouch /usr/local/webservice/development\necho \"System will reboot for these changes to take effect\"\nsync\nreboot\n</code></pre>"},{"location":"architecture/Summary/Contents/discovery/#using-nmcli-in-the-discovery-process","title":"Using nmcli in the discovery process","text":"<p>On the SDKVM nmcli is used to configure networking. This has become standard on Ubuntu 22.04 and Ubuntu 20.04.</p>"},{"location":"architecture/Summary/Contents/discovery/#command-to-create-static-connection-with-basic-detail-ip-address-and-gateway","title":"Command to create static connection with basic detail ip address and gateway","text":"<pre><code> nmcli con add type ethernet con-name STATIC_CONNECTION ifname ens160 ipv4.method manual ipv4.addresses 10.231.134.2/21 gw4 10.231.128.1\n</code></pre>"},{"location":"architecture/Summary/Contents/discovery/#command-to-look-all-the-connection-list","title":"Command to look all the connection list","text":"<pre><code> nmcli connection show\n</code></pre>"},{"location":"architecture/Summary/Contents/discovery/#command-to-modifyadd-dns-for-particular-connection","title":"Command to modify/add dns for particular connection","text":"<pre><code> nmcli con mod STATIC_CONNECTION ipv4.dns 8.8.8.8\n</code></pre>"},{"location":"architecture/Summary/Contents/discovery/#command-to-add-routes-for-connection","title":"Command to add routes for connection","text":"<pre><code> nmcli connection modify STATIC_CONNECTION +ipv4.routes 10.231.132.50/21\n</code></pre>"},{"location":"architecture/Summary/Contents/discovery/#command-to-delete-routes-for-connection","title":"Command to delete routes for connection","text":"<pre><code> nmcli connection modify STATIC_CONNECTION -ipv4.routes 10.231.132.50/21\n</code></pre>"},{"location":"architecture/Summary/Contents/discovery/#command-to-delete-a-connection","title":"Command to delete a connection","text":"<pre><code> nmcli connection delete STATIC_CONNECTION\n</code></pre>"},{"location":"architecture/Summary/Contents/discovery/#command-to-make-connection-static","title":"Command to make connection static","text":"<pre><code> nmcli connection modify STATIC_CONNECTION ifname ens160 ipv4.method manual\n</code></pre>"},{"location":"architecture/Summary/Contents/discovery/#command-to-make-a-connection-up-or-active","title":"Command to make a connection up or active","text":"<pre><code>nmcli con up id STATIC_CONNECTION\n</code></pre>"},{"location":"architecture/Summary/Contents/discovery/#command-to-set-no-default-configuartion-for-network-details","title":"Command to set no default configuartion for network details","text":"<pre><code> nmcli connection modify STATIC_CONNECTION ipv4.never-default yes\n</code></pre>"},{"location":"architecture/Summary/Contents/discovery/#command-to-set-gateway-for-connection","title":"Command to set gateway for connection","text":"<pre><code> nmcli connection modify STATIC_CONNECTION ipv4.gateway 192.0.2.1ed (D-Bus active path: /org/freedesktop/NetworkManager/\n ActiveConnection/4)\n</code></pre>"},{"location":"architecture/Summary/Contents/discovery/#discovery-file","title":"Discovery File","text":"<ul> <li>Created by the discovery binary in discovery_ds_writeDiscoveryData. On the appliance this can be found in /usr/local/discovery and on the SDKVM it is located in ~/SDKVM/boxilla/discovery</li> </ul>"},{"location":"architecture/Summary/Contents/discovery/#manager-ip-file","title":"Manager IP File","text":"<ul> <li>Created by the discovery binary in discovery_ds_writeMgrIPAddress. In the appliance this file resides in /usr/local/mgr_ip and in the SDKVM it can be found in ~/SDKVM/boxilla/mgr_ip</li> </ul> <p>/usr/local/resolv.conf</p> <ul> <li>What does discovery use the contents of this file for specifically?</li> <li>Is it actively using this file?</li> </ul>"},{"location":"architecture/Summary/Contents/discovery/#starting-discovery-on-the-sdkvm","title":"Starting discovery on the SDKVM","text":"<ul> <li>The discovery binary exists in /usr/local/bin</li> <li>The discovery service is managed by a systemd user service</li> <li>The service is managed and started by /usr/bin/startdiscovery.sh</li> <li>The configuration service file for restart_discovery exists in ~/.config/systemd/user/discovery.service.</li> <li>To enable discovery as a service we use: systemctl --user enable discovery</li> <li>On boot up the discovery service is started in the autostart.sh script in ~/.config/openbox. This script is called by the window manager.</li> </ul>"},{"location":"architecture/Summary/Contents/discovery/#debugging-discovery-issues-in-boxilla","title":"Debugging Discovery Issues in Boxilla","text":"<ul> <li>At present, all appliances are configured to use address 224.0.1.249 from the INTERNETWORK_MULTICAST_GROUP. This address is currently an unallocated IETF address. The Discovery protocol uses UDP port 39150, this is also an unallocated IETF address. </li> <li>We can use the following link to observe the data returned to discovery: http://192.168.1.177:8000/example/discover</li> <li>We can also observe the Boxilla alerts which should identify errors in the discovery process.</li> </ul>"},{"location":"architecture/Summary/Contents/discovery/#manually-adding-a-route","title":"Manually adding a route","text":"<p>On the appliance the following command is used to add a route:</p> <pre><code>sudo route add -net 10.211.128.192 netmask 255.255.255.255 dev enp86s0\n</code></pre> <p>On the SDKVM we will use nmcli to add the route</p> <pre><code> nmcli connection modify STATIC_CONNECTION +ipv4.routes 10.231.132.50/21\n</code></pre>"},{"location":"architecture/Summary/Contents/discovery/#deleting-a-route","title":"Deleting a route","text":"<pre><code>sudo route del -host 10.211.128.192\n</code></pre> <p>On the SDKVM we will use nmcli to delete the route</p> <pre><code> nmcli connection modify STATIC_CONNECTION -ipv4.routes 10.231.132.50/21\n</code></pre>"},{"location":"architecture/Summary/Contents/discovery/#method-to-supress-the-repetitive-debug-level-discovery-audit-and-pinggateway-logs","title":"Method to supress the repetitive debug level discovery audit and PingGateway logs","text":"<p>Create file /home/snuc/SDKVM/debug/TROTTLE_DISCOVERY_LOGS on SDKVM by using below command <pre><code> touch home/snuc/SDKVM/debug/TROTTLE_DISCOVERY_LOGS\n</code></pre></p>"},{"location":"architecture/Summary/Contents/discovery/#issues-with-the-discovery-process-on-startup","title":"Issues with the discovery process on startup","text":"<ul> <li>see BUG-5163</li> </ul>"},{"location":"architecture/Summary/Contents/display_layer/","title":"DisplayLayer Common","text":""},{"location":"architecture/Summary/Contents/display_layer/#overview-and-responsibilities","title":"Overview and Responsibilities","text":"<p>DisplayLayer-common provides the interface for controlling and configuring the display output for the decoder devices. It provides a shared library and CLI for performing these operations. Its principle responsibilities are:</p> <ul> <li>Configure display resolution</li> <li>Switch between different display modes (Primary and Secondary for 2K, OSD, YUV, Pixel Perfect and Tile Differencing for 4K)</li> <li>Set quantisation values for compressed connections</li> <li>Signal the RPU on 4K Systems</li> </ul>"},{"location":"architecture/Summary/Contents/display_layer/#interaction-with-other-components","title":"Interaction with other components","text":"<p> Figure 9: DisplayLayer Interaction</p> <ul> <li>DisplayLayer-Common interacts with a number of other components. These are shown in Figure 2 DisplayLayer Interactions above.</li> <li>DisplayLayer-Common utilises libmetal to interact with the Real-time processing Unit (RPU) running the DP_Emerald_Decoder software on 4K systems.</li> <li>DisplayLayer-Common interacts directly with the Decoder FPGA registers directly using mmap\u2019d memory for all 2K configuration.</li> </ul>"},{"location":"architecture/Summary/Contents/display_layer/#sub-components","title":"Sub-components","text":"<p> Figure 10: DisplayLayer-Common sub Components</p>"},{"location":"architecture/Summary/Contents/display_layer/#displaylayer-common-public-api","title":"DisplayLayer-Common Public API","text":"<p>The Public API component contains the high level calls for configuring the Decoder Displays; this API is common to the 4K and 2K products.</p>"},{"location":"architecture/Summary/Contents/display_layer/#2kyuv-and-2k-timings","title":"2K/YUV and 2K Timings","text":"<p>These component controls configuration of the following functionality</p> <ul> <li>2K and 4K Configuration for:</li> <li>Quantization Values</li> <li>YUV Block Initialisation (reset error registers, set Decoder engines, screen blanking)</li> <li>2K Production Configuration for:</li> <li>Surface Selection (Primary/Secondary)</li> <li>Display Resolution</li> <li>Data Flow Controller Configuration</li> <li>Configuration of the external Pixel Clock generator IC\u2019s over I2C</li> </ul>"},{"location":"architecture/Summary/Contents/display_layer/#4k-and-libmetal","title":"4K and libmetal","text":"<p>These components interact with the RPU to allow configuration of the Decoder and DisplayPort IP. It provides this functionality using libmetal https://github.com/OpenAMP/libmetal for APU to RPU messaging via interrupts and shared memory.</p>"},{"location":"architecture/Summary/Contents/display_layer/#modelinecvt-timing-calculator","title":"Modeline/CVT Timing Calculator","text":"<p>On the 4K system CVT and CVT-RB timings are calculated programmatically based on the desired screen resolution and refresh rate. These values are then passed to the RPU; this method provides maximum interoperability with different monitor standards.</p>"},{"location":"architecture/Summary/Contents/display_layer/#rpu0-displayport-emerald-tx","title":"RPU0 DisplayPort Emerald TX","text":""},{"location":"architecture/Summary/Contents/display_layer/#overview-and-responsibilities_1","title":"Overview and Responsibilities","text":"<p>The DP_Emerald_Decoder application is a bare-metal C application that runs on a Real Time Processing Unit internal to the MPSoC. It provides functionality to configure the Xilinx DisplayPort TX IP and the Blackbox Decoder &amp; Render IP on the Emerald 4K product.</p>"},{"location":"architecture/Summary/Contents/display_layer/#interaction-with-other-components_1","title":"Interaction with other components","text":"<ul> <li>DP_Emerald_Decoder interacts solely with DisplayLayer-Common from an application space perspective see Figure 2 DisplayLayer Interactions.</li> <li>Libmetal provides the messaging framework to facilitate this interaction.</li> <li>It uses a Xilinx provides board support package (BSP) to provide a programming API for the Xilinx DisplayPort TX.</li> <li>Interact directly with FPGA registers for Decoder &amp; Render logic configuration.</li> </ul>"},{"location":"architecture/Summary/Contents/display_layer/#sub-components_1","title":"Sub-components","text":"<p> Figure 11: DP_Emerald_Decoder Components</p>"},{"location":"architecture/Summary/Contents/display_layer/#displayport-state-machine","title":"DisplayPort State Machine","text":"<p>This component controls the following functionality</p> <ul> <li>DisplayPort Resolution Changes</li> <li>DisplayPort Hotplug Disconnect and Reconnect Handling</li> <li>DisplayPort Training</li> <li>DisplayPort AUX channel reading</li> </ul>"},{"location":"architecture/Summary/Contents/display_layer/#blackbox-decoder-render-logic-configuration","title":"Blackbox Decoder &amp; Render logic configuration","text":"<p>This component controls the following functionality</p> <ul> <li>Decode and Render Initialisation</li> <li>Mode Configuration (HW OSD, SW OSD, Tile Differencing and YUV mode)</li> <li>Decode and Render resolution configuration</li> </ul>"},{"location":"architecture/Summary/Contents/display_layer/#pixel-clock-configuration","title":"Pixel Clock Configuration","text":"<p>This component controls configuration of an FPGA based Clock Wizard IP supplied by Xilinx. For a given pixel clock it will calculate and configure the dividers and multipliers necessary to generate that clock.</p>"},{"location":"architecture/Summary/Contents/display_layer/#libmetal-message-handler","title":"Libmetal Message Handler","text":"<p>This component parses and acknowledges messages from the APU and provides messages for the following functionality</p> <ul> <li>Mode Change requests</li> <li>Resolution change requests</li> <li>EDID reading from DisplayPort AUX channel</li> </ul>"},{"location":"architecture/Summary/Contents/display_layer/#dvi-layer-render","title":"DVI Layer Render","text":""},{"location":"architecture/Summary/Contents/display_layer/#display-layer-render","title":"Display Layer Render","text":""},{"location":"architecture/Summary/Contents/display_layer/#dvi-layer-render_1","title":"DVI Layer Render","text":""},{"location":"architecture/Summary/Contents/dual_stream/","title":"EMERALD DUAL STREAM FEATURE","text":""},{"location":"architecture/Summary/Contents/dual_stream/#problem-statement","title":"Problem Statement","text":"<p>The Primary aim of V6.3.10 is to achieve full interoperability among all emerald platforms. This interoperability requires video scaling in certain circumstances. This involves scaling the 4K video down at the transmitter side and then scaling it back up to 4K on the receiver side. This is shown in figure 1, 4K video is scaled down and scaled up again on a 4K RX within a shared session. This type od scaling can result in poor video quality.</p> <p> Figure 1: Scaled UP 4K Stream</p>"},{"location":"architecture/Summary/Contents/dual_stream/#proposed-solution","title":"Proposed Solution","text":"<p>The Dual Stream solution will support both a lossless and optimized connection on 4K transmitters. This will allow 2K devices to receive an optimised connection and 4K devices to receive a lossless stream in a mixed 2K/4K shared session. With Dual Stream, the 4K RX will get unscaled lossless 4K video over a multicast stream and the 2K devices will get a scaled down optimized stream over municast. This arrangement is shown in figure 2.</p> <p> Figure 2: Dual Stream Proposal</p>"},{"location":"architecture/Summary/Contents/dual_stream/#performance-aspects","title":"Performance Aspects","text":"<p>Having two simultaneous dual streams of data can affect the performance and cause high bandwidth. From a design perspective, most of the data path is independent for each stream except in the TOE block. On a 4K TX, the TOE can handle up to 10Gbps of throughput. The TOE will process the data for each channel in a round robin fashion. This scheme could cause starvation on high bandwidth channels while channel with low bandwidth would work without issue. This may result in performance degradation on the multicast lossless channels with frame loss.</p> <p>Furthermore, the data path for each stream is independent up to AVAE block. This means the capture block for both the streams may not stay in sync and there are chances of frames going out of sync between both video streams.</p> <p>From a future proofing perspective, the dual stream approach could be reused for WAN/LAN based connections. If we have two independent data paths, a WAN based connection could be kept separate from a LAN based connection. This will avoid latency bottleneck in LAN based connection introduced due to WAN based connections.</p>"},{"location":"architecture/Summary/Contents/dual_stream/#connection-sharing-aspects","title":"Connection Sharing Aspects","text":"<p>We support up to 16 multicast channel in a lossless shared connection and up to 8-municast channels in an optimized shared connection. To have a uniform sharing scheme all across the platform we propose to have a maximum of eight sharing connections irrespective of the type of connection. Figure 3 provides an overview of how the connections would share in dual stream mode.</p> <p>The decision to have maximum eight-shared connection is largely driven by the requirement for audio sharing. In case of Audio, the AVAE block allows only up to eight channels. With dual stream running, one slot will be used for the multicast stream and the remaining seven channels for the municast streams. Sharing audio in this manner does not satisfy our requirements and adds more complexity in handling shared connections. Hence, the decision to have maximum of eight-shared connection (including both Municast and Multicast) reduces the design and technical complexity of the system; it also accommodates audio sharing uniformly among the different platforms.</p> <p> Figure 3: Dual Stream connection sharing capabilities</p>"},{"location":"architecture/Summary/Contents/dual_stream/#high-level-design-of-dual-stream-encoder-side","title":"High-level design of dual stream (Encoder side)","text":"<p>Figure 4 shows a simplified view of encoder side changes to handle dual stream. The Decoder side is transparent to these changes and works as before. The changes on the 4K encoder use the  principle of two independent data paths for both tile diff and YUV compression. As shown in the figure there are two separate capture blocks along with two AVAE processing blocks both streams independently. The TOE block is a common part of the implementation.</p> <p> Figure 4: Dual Stream Data path</p>"},{"location":"architecture/Summary/Contents/dual_stream/#software-impact","title":"Software Impact","text":"<p>The Server freerdp application is designed to handle one type of connection at a time be it multicast or municast. The first connection type determines the method of sharing the connection. To handle the dual stream feature, the application along with relevant libraries is required to support both types of connection simultaneously. The feature will affect following areas.</p>"},{"location":"architecture/Summary/Contents/dual_stream/#avae-and-toe-driver","title":"AVAE and TOE driver","text":"<p>Following changes are required in AVAE driver</p> <ol> <li>Support lossless connection on Head 0 and YUV connection on Head 1. The change should only be applicable on 4K platform, as YUV will only work on Head 0 in 2K based TX platforms.</li> <li>Integrate statistics of H1 YUV stream through proc filesystem.</li> <li>Integrate the dual stream debug register in the AVAE driver.</li> <li>Support for toggling <code>Dual Stream Mode</code> in AVAE.</li> </ol>"},{"location":"architecture/Summary/Contents/dual_stream/#capture-layer","title":"Capture Layer","text":"<p>No changes are required to capture-layer, handling of the <code>COMPRESSION_MODE</code> bitwise operations will be taken care of in <code>server_emerald</code>.</p>"},{"location":"architecture/Summary/Contents/dual_stream/#hardware-manager","title":"Hardware manager","text":"<p>The following changes are required in hardware manager</p> <ol> <li>The hardware manager data structure shall be modified to have separate structures for ingress video and lossless/optimised egress video.</li> <li>Video routines (sync loss, res change) will need to be updated to handle these new data structures.</li> <li>Stop capture for both modes (hardware_manager_stop_capture_subsystem)</li> <li>Initialize and start capture for both modes (hardware_manager_init_capture_subsystem)</li> <li>Move CaptureLayer calls from connection manager to hardware_manager to simplify dual stream handling.</li> </ol>"},{"location":"architecture/Summary/Contents/dual_stream/#connection-management","title":"Connection Management","text":"<p>Following changes are required in connection manager.</p> <ol> <li>Connection manager state machine should accepts both optimized and Lossless connection.</li> <li>Server compression mode should reflect both type of stream. We can use Bit wise operations to distinguish between streams.</li> <li>Server operating mode should reflect both type of sharing mode (Municast and Multicast). These can now be distiguished using bitwise operation.</li> <li>As mentioned in sharing aspects we need to limit MAX SHARED connection to eight regardless of type of sharing (multicast or municast).</li> <li>In case of 4K, modification in client.c to start optimize connection on H1 AVAE.</li> <li>Maintaining different ingress/egress resolution for each peer.</li> <li>Modifications in connection termination to handle both compression type.</li> <li>While terminating the connection, make sure capture for both streams terminated together (Requirement from FPGA).</li> <li>In dual stream feature, both sharing modes (Multicast and Municast) would run in parallel. This would require changes in TOE channel allocation scheme as per below given table.</li> </ol>"},{"location":"architecture/Summary/Contents/dual_stream/#current-toe-allocation-scheme","title":"Current TOE allocation scheme","text":"Sharing Mode Video Channel Audio Channel Municast CT02, CT04 to CT0A (8 Video Channel) CT03, CT14 to CT1A (8 Audio Channel) Multicast CT02 (Master), CT04 to CT13 (16 Video Master response) CT03 (Master), CT14 to CT23 (16 Audio Master response)"},{"location":"architecture/Summary/Contents/dual_stream/#updated-toe-allocation-scheme","title":"Updated TOE allocation scheme","text":"Sharing Mode Video Channels Audio Channels Municast Mode CT02 to CT09 (8 Video Channels) CT0A to CT11 (8 Audio Channels) Multicast Mode CT12 (Master) and CT13 to CT1A (8 Video Master Response) CT1B (Master) and CT1C to CT23 (8 Audio Master Response)"},{"location":"architecture/Summary/Contents/dual_stream/#resolution-changesync-loss","title":"Resolution change/sync-loss","text":"<ol> <li>Maintaining different ingress/egress resolution for each peer.</li> <li>In resolution change feedback, matching resolution based on effective compression mode.</li> </ol>"},{"location":"architecture/Summary/Contents/dual_stream/#scaling-impact","title":"Scaling impact","text":"<p>No impact to RX or TX scaling.</p>"},{"location":"architecture/Summary/Contents/dual_stream/#fpga-register-updates","title":"FPGA Register Updates","text":"<p>TODO: YET TO CONFIRM ALL REGISTER LEVEL CHANGES FROM FPGA TEAM AFTER FINAL TESTING.</p>"},{"location":"architecture/Summary/Contents/dual_stream/#emd4k-ddr-region-updates","title":"EMD4K DDR Region updates","text":"<p>To accomodate dual mode, DDR region of lossless mode is updated in EMD4K memory map.</p> <p>Optimized mode (2K Mode)</p> Address Range Memory Region Size 0x6000_0000 \u2013 0x6027_FFFF Frame 0 Y 2.621MB 0x6028_0000 \u2013 0x604F_FFFF Frame 0 U 2.621MB 0x6050_0000 \u2013 0x6077_FFFF Frame 0 V 2.621MB 0x6078_0000 \u2013 0x609F_FFFF Frame 1 Y 2.621MB 0x60A0_0000 \u2013 0x60C7_FFFF Frame 1 U 2.621MB 0x60C8_0000 \u2013 0x60EF_FFFF Frame 1 V 2.621MB 0x60F0_0000 \u2013 0x6117_FFFF Frame 2 Y 2.621MB 0x6118_0000 \u2013 0x613F_FFFF Frame 2 U 2.621MB 0x6140_0000 \u2013 0x6167_FFFF Frame 2 V 2.621MB 0x6168_0000 \u2013 0x618F_FFFF Frame 3 Y 2.621MB 0x6190_0000 \u2013 0x61B7_FFFF Frame 3 U 2.621MB 0x61B8_0000 \u2013 0x61DF_FFFF Frame 3 V 2.621MB 0x61E0_0000 \u2013 0x61E0_FFFF TCL Frame 0 65.536KB 0x61E1_0000 \u2013 0x61E1_FFFF TCL Frame 1 65.536KB 0x61E2_0000 \u2013 0x61E2_FFFF TCL Frame 2 65.536KB 0x61E3_0000 \u2013 0x61E3_FFFF TCL Frame 3 65.536KB 0x61E4_0000 \u2013 0x61EA_FFFF Encode Overflow Frame 0 0.44MB 0x61EB_0000 \u2013 0x61F1_FFFF Encode Overflow Frame 1 0.44MB 0x61F2_0000 \u2013 0x61F8_FFFF Encode Overflow Frame 2 0.44MB 0x61F9_0000 \u2013 0x61FF_FFFF Encode Overflow Frame 3 0.44MB 0x6200_0000 \u2013 0x637F_FFFF Encode Frame 0 25.165MB 0x6380_0000 \u2013 0x64FF_FFFF Encode Frame 1 25.165MB 0x6500_0000 \u2013 0x667F_FFFF Encode Frame 2 25.165MB 0x6680_0000 \u2013 0x67FF_FFFF Encode Frame 3 25.165MB <p>Lossless mode (4K Mode)</p> Address Range Memory Region Size 0x7000_0000 \u2013 0x721B_FFFF Capture Frame 0 34560KB 0x721C_0000 \u2013 0x7437_FFFF Capture Frame 1 34560KB 0x7438_0000 \u2013 0x7653_FFFF Capture Frame 2 34560KB 0x7654_0000 \u2013 0x7886_FFFF Capture Frame 3 34560KB 0x7900_4000 \u2013 0x7900_4FFF TOE TX DMA engine transmit descriptor base 4KB 0x7900_5000 \u2013 0x7900_5FFF TOE RX DMA engine transmit descriptor base 4KB 0x7a00_0000 \u2013 0x7a4F_FFFF Frame Header 5.242MB 0x7a50_0000 \u2013 0x7a50_FFFF TCL Frame 0 65.536KB 0x7a51_0000 \u2013 0x7a51_FFFF TCL Frame 1 65.536KB 0x7a52_0000 \u2013 0x7a52_FFFF TCL Frame 2 65.536KB 0x7a53_0000 \u2013 0x7a53_FFFF TCL Frame 3 65.536KB 0x7153_0000 \u2013 0x7153_0000 TCL Frame 3 65.536KB"},{"location":"architecture/Summary/Contents/dual_stream/#avae-registers","title":"AVAE Registers","text":"<p>Encoder side Updates.</p> Register Address Register description Current Value Changed Value 0xdf00_0000 EMD 4K DDR BANK ADDRESS 0x0000_0006 0x0000_0007 0xa030_0504 AVAE_PIXEL_TX_HEAD0_FRAME_HDR_ADDR 0x7100_0000 0x7a00_0000 0xa030_0508 AVAE_PIXEL_TX_HEAD0_FRAME_ADDR_0 0x6000_0000 0x7000_0000 0xa030_050C AVAE_PIXEL_TX_HEAD0_FRAME_ADDR_1 0x621C_0000 0x721C_0000 0xa030_0510 AVAE_PIXEL_TX_HEAD0_FRAME_ADDR_2 0x6438_0000 0x7438_0000 0xa030_0514 AVAE_PIXEL_TX_HEAD0_FRAME_ADDR_3 0x6654_0000 0x7654_0000 0xa030_0518 AVAE_PIXEL_TX_HEAD0_TCL_ADDR_0 0x7150_0000 0x7a50_0000 0xa030_051C AVAE_PIXEL_TX_HEAD0_TCL_ADDR_1 0x7151_0000 0x7a51_0000 0xa030_0520 AVAE_PIXEL_TX_HEAD0_TCL_ADDR_2 0x7152_0000 0x7a52_0000 0xa030_0524 AVAE_PIXEL_TX_HEAD0_TCL_ADDR_3 0x7153_0000 0x7a53_0000 <p>Decoder Side updates.</p> Register Address Register description Current Value Changed Value 0x8000_1400 EMD 4K Tile Diff Frame 0 Base Address 0x7654_0000 0x7000_0000 0x8000_1404 EMD 4K Tile Diff Frame 1 Base Address 0x7870_0000 0x721c_0000 0x8000_1408 EMD 4K Tile Diff Frame 2 Base Address 0x7438_0000 0x7438_0000 0x8000_13fc EMD 4K Tile Diff Frame 3 Base Address 0x7000_4000 0x7654_0000 0xa030_0600 AVAE_PIXEL_RX_HEAD0_FRAME_ADDR_0 0x7654_0000 0x7000_0000 0xa030_0604 AVAE_PIXEL_RX_HEAD0_FRAME_ADDR_1 0x7870_0000 0x721c_0000 0xa030_0608 AVAE_PIXEL_RX_HEAD0_FRAME_ADDR_2 0x7438_0000 0x7438_0000 0xa030_060C AVAE_PIXEL_RX_HEAD0_FRAME_ADDR_3 0x7000_4000 0x7654_0000"},{"location":"architecture/Summary/Contents/dual_stream/#capture-registers","title":"Capture Registers","text":"<p>TODO: YET TO CONFIRM FROM FPGA TEAM</p>"},{"location":"architecture/Summary/Contents/dual_stream/#statistics-and-boxilla-impact","title":"Statistics and Boxilla impact","text":"<p>Appliance reports video statistics such as FPS, Dropped frames, bandwidth etc to Boxilla using north bound RESTAPI \"https://IP:8888/statistics/facts/video_facts\". In the case of dual stream mode, stats for both the streams will be required for Boxilla reporting. We plan to keep the same REST API across all of the platforms and change the internal of JSON body so that in single call to REST provide stats data for both the streams.</p> <p>The proposed design will add a <code>compression</code> tag to the <code>kvm_video_facts</code> structure to differentiate between different connection compression types. A video fact will be returned for each compression mode running on a transmitters video head. See below for an example of a Emerald 4K Transmitter running a dual mode connection.</p> <pre><code>{\n    \"kvm_video_facts\": [\n        {\n            \"id\": 16,\n            \"head\": 1,\n            \"compression\": \"lossless\",\n            \"mac\": \"00:cf:10:1b:05:88\",\n            \"min_tiles_per_frame\": 510,\n            \"max_tiles_per_frame\": 0,\n            \"avg_tiles_per_frame\": 0,\n            \"frames_per_second\": 0,\n            \"min_frames_per_sec\": 0,\n            \"max_frames_per_sec\": 0,\n            \"min_tile_size\": 0,\n            \"max_tile_size\": 0,\n            \"avg_tile_size\": 0,\n            \"min_video_bw\": 0,\n            \"max_video_bw\": 0,\n            \"avg_video_bw\": 0.0,\n            \"video_bw\": 0.0,\n            \"min_rtt\": 0.28000000000000003,\n            \"max_rtt\": 0.28000000000000003,\n            \"avg_rtt\": 0.28000000000000003,\n            \"rtt\": 0.28000000000000003,\n            \"user_response\": 0.0,\n            \"resolution\": \"3840x2160\",\n            \"dropped_frames\": 0.0,\n            \"timestamp\": 65059404\n        },\n        {\n            \"id\": 12,\n            \"head\": 1,\n            \"compression\": \"optimised\",\n            \"mac\": \"00:cf:10:1b:05:88\",\n            \"min_tiles_per_frame\": 510,\n            \"max_tiles_per_frame\": 0,\n            \"avg_tiles_per_frame\": 0,\n            \"frames_per_second\": 0,\n            \"min_frames_per_sec\": 0,\n            \"max_frames_per_sec\": 0,\n            \"min_tile_size\": 0,\n            \"max_tile_size\": 0,\n            \"avg_tile_size\": 0,\n            \"min_video_bw\": 0,\n            \"max_video_bw\": 0,\n            \"avg_video_bw\": 0.0,\n            \"video_bw\": 0.0,\n            \"min_rtt\": 0.10000000000000001,\n            \"max_rtt\": 0.28000000000000003,\n            \"avg_rtt\": 0.20200000000000001,\n            \"rtt\": 0.28000000000000003,\n            \"user_response\": 0.0,\n            \"resolution\": \"3840x2160\",\n            \"dropped_frames\": 0.0,\n            \"timestamp\": 65059404\n        }\n    ]\n}\n</code></pre>"},{"location":"architecture/Summary/Contents/dual_stream/#automation","title":"Automation","text":""},{"location":"architecture/Summary/Contents/dual_stream/#dual-stream-will-affect-the-automation-effort-in-a-number-of-ways","title":"Dual stream will affect the automation effort in a number of ways:","text":"<ul> <li>The connection test will need to be modified to accommodate dual stream operation. This may primarily be focused on the configuration of the test for mixed mode operation. The me ans of verifying the video data will largely remain the same.</li> <li>The nightly test cases will require a new set of test cases that explicitly test the dual stream operation. These will be added to the Test Cases Table Here</li> </ul>"},{"location":"architecture/Summary/Contents/error_handling/","title":"Error Handling","text":"<ul> <li>The Error handling subsystem reports errors generated by the Connection Management subsystem</li> <li>Error are generated for a variety of reasons; For example:</li> <li>It is not possible to mix modes of operation. There are a number of combinations, but the intent is that optimized and lossless modes cannot be mixed. These messages complement the existing messages that signal errors associated with Private connections attempting to join existing shares and shared connections trying to join existing private connections.</li> </ul>"},{"location":"architecture/Summary/Contents/error_handling/#bberror-messages","title":"BBError Messages","text":"<p>BBErrorStrings module provides a facility to route the error information from Client applications (BBFreeRDP DFreeRDP or XFreeRDP) to the OSD.</p> <p>The application can be run with the following command :-</p> <pre><code>    ./bbox_err_strings -t &lt;application_name&gt;  -c &lt;error_code&gt;  -l &lt;language&gt;\n</code></pre> <p>Example:</p> <pre><code>    ./bbox_err_strings -t xfreerdp -c 123 -l en\n</code></pre>"},{"location":"architecture/Summary/Contents/error_handling/#bberror-message-call-flow","title":"BBError Message Call flow","text":"<p> Figure 16: BBError Message Flow</p>"},{"location":"architecture/Summary/Contents/interoperability/","title":"Interoperability","text":"<ul> <li>Feature Description</li> <li>Phase 1 - Interoperability</li> <li>Phase 2 - Interoperability</li> <li>Phase 3 - Dual Stream</li> </ul>"},{"location":"architecture/Summary/Contents/kvm_bonded_connection/","title":"KVM Bonded Connection","text":""},{"location":"architecture/Summary/Contents/kvm_bonded_connection/#master-document-revision-history","title":"Master Document Revision History","text":"Date Version Description Author/Editor Sept, 29th 2020 0.1 First Draft Marcus McInerney"},{"location":"architecture/Summary/Contents/kvm_bonded_connection/#references","title":"References","text":""},{"location":"architecture/Summary/Contents/kvm_bonded_connection/#terms-and-definitions-used-in-blackbox","title":"Terms and Definitions used in Blackbox","text":"Term Definition Receiver A Blackbox appliance that receives and displays a video stream. A receiver is also referred to as a client or decoder. Transmitter A Blackbox appliance that captures and transmits a video from a source. A transmitter is also referred to as a server or encoder. Video Source A source of input for a Transmitter, normally the DVI or Display Port output of a PC."},{"location":"architecture/Summary/Contents/kvm_bonded_connection/#overview","title":"Overview","text":"<p>A bonded connection is a set of up to 8 connections. The elements of the set can comprise any supported connection type, regular TX, VM, Horizon VM etc. The bonded connection is launched via the receiver OSD connection window. On launching a bonded connection, a REST call is made to Boxilla which in turn checks that the target appliances are online and establishes the connections using the force connect mechanism.This new feature runs on all black box KVM receivers running V&gt;=6.1.X that are managed by Boxilla 4.1. </p>"},{"location":"architecture/Summary/Contents/kvm_bonded_connection/#design-detail","title":"Design Detail","text":"<p>Bonded connection system works on the basis of two ordered lists which are configured in Boxilla\u2019s Connections tab. </p> <ul> <li>bonded receiver group  This is an ordered list of up to 8 receivers. Numerous bonded receiver groups can be defined in Boxilla, however any given receiver can only be assigned a single bonded receiver group.</li> <li>bonded connection. This is an ordered list of up to 8 connections. Numerous bonded connections can be defined in Boxilla and any given connection can be assigned to any given bonded connection.</li> </ul>"},{"location":"architecture/Summary/Contents/kvm_bonded_connection/#requirements","title":"Requirements","text":"<p>This section defines the requirements that I believe we need to implement.</p> <ul> <li>Bonded connection </li> <li>Launch bond one rx exits then rejoins using previous what does boxilla regard this as ?</li> </ul>"},{"location":"architecture/Summary/Contents/kvm_bonded_connection/#receiver-group-configuration","title":"Receiver group configuration","text":""},{"location":"architecture/Summary/Contents/kvm_bonded_connection/#assigning-a-receiver-to-a-bonded-receiver-group","title":"Assigning a receiver to a bonded receiver group","text":"<p>On assigning a receiver to a bonded receiver group, Boxilla sends a REST call to the receiver in question to assign the name of the bonded receiver group to the receiver. This is used </p> <ul> <li>By the OSD to indicate to the user what bonded group the receiver is a member of.</li> <li>By the OSD to filter bonded connections if the receiver is not assigned to a bonded group </li> </ul>"},{"location":"architecture/Summary/Contents/kvm_bonded_connection/#listing-bonded-connection-on-receiver-osd","title":"Listing bonded connection on receiver OSD","text":"<p>On user login the OSD must filter the XML database such that bonded connections are only ever listed on receivers that are members of a bonded receiver group. This means that a given user logging in to different receivers won\u2019t necessarily see the same connections listed. </p>"},{"location":"architecture/Summary/Contents/kvm_bonded_connection/#bonded-connection-launch","title":"Bonded connection launch","text":"<p>Bonded connections can only be launched from receivers that are part of a bonded receiver group.The bonded connection can be launched via the receiver OSD and via hotkey. Bonded connection can not be launched via REST as is the case for other connection types</p> Connection launch method Notification required Method of notification Bonded connection via OSD connect button no - Bonded connection via OSD using \u201cfavourite\u201d hotkey no -"},{"location":"architecture/Summary/Contents/kvm_bonded_connection/#bonded-connection-launch-via-osd-connect-button","title":"Bonded connection launch via OSD \u201cConnect\u201d button","text":"<p>The bonded connection can be launched from the Receiver OSD. </p> <p>On selecting a bonded connection from the Connections listed on the Connection tab the receiver sends a REST call to Boxilla to initiate the launch of a bonded connection. The request object contains the logged in username, the MAC address of the receiver and the name of the bonded connection. </p> <p>See flowchart below. </p> <p>If one or more elements of the bonded connection fail then Boxilla retries the connection launch 3 times. If a subset of the bonded connection does not connect the remainder of the set remains in the bonded connection. This is implemented via the OSD connectionstab.cpp class.</p>"},{"location":"architecture/Summary/Contents/kvm_bonded_connection/#bonded-connection-launch-via-osd-using-favourite-hotkey","title":"Bonded connection launch via OSD using favourite hotkey","text":"<p>A user operating the receiver OSD can launch a bonded connection using a hotkey. A given bonded connection can be assigned to a hotkey as a favourite as is the case for other connection types.  On pressing the hotkey assigned to bonded connection, the OSD sends a REST request to Boxilla to launch the bonded connection. This is implemented via the connection control binary.</p>"},{"location":"architecture/Summary/Contents/kvm_bonded_connection/#bonded-connection-switching-via-hotkey-favourites","title":"Bonded connection switching via hotkey (favourites)","text":"<p>Bonded connections can be assigned to a hotkey using the favourites functionality. This means that a user can switch to or from a bonded connection via a hotkey. This section details the various scenarios that must be accounted for in implementing bonded connection support with hotkeys. </p> Connection launch method Notification required on deleting existing connection Method of notification Switch non-bonded to bonded via hotkey (favorite) no - Switch bonded to non-bonded using hotkey (favorite) yes Connection status request object exit reason Switch bonded to bonded using hotkey (favorite) no - Previous connection from bonded connection using hotkey yes Connection status request object exit reason"},{"location":"architecture/Summary/Contents/kvm_bonded_connection/#switch-from-a-non-bonded-connection-to-a-bonded-connection","title":"Switch from a non-bonded connection to a bonded connection","text":"<p>A user running a non-bonded connection can switch to a bonded connection using a hotkey. </p> <p>When this happens the receiver sends a REST call to Boxilla to launch the bonded connection. If the Boxilla prechecks pass then Boxilla launches the bonded connection using the force connection mechanism. This will cause the existing connection to be terminated and the bonded connection to be established.</p>"},{"location":"architecture/Summary/Contents/kvm_bonded_connection/#switch-from-a-bonded-connection-to-a-non-bonded-connection","title":"Switch from a bonded connection to a non-bonded connection","text":"<p>A user running a bonded connection can switch to a non-bonded connection using a hotkey. When this happens it is necessary for the receiver to first send notification to Boxilla to indicate:</p> <ol> <li>That the current bonded connection is being terminated </li> <li>That the user intends to launch a non-bonded connection. </li> </ol> <p>This information is necessary in order to prevent Boxilla from terminating the entire bonded connection. As specified in marketing requirement DPS (is this what is required?). This information is passed to Boxilla\u2019s existing connection status endpoint  https://10.211.129.2/bxa-api/connections/kvm/status</p> <p>This endpoint requires a json object containing:</p> <ol> <li>The MAC address of the receiver</li> <li>The exit reason code</li> </ol> <p>The exit reason code will indicate the type of switch being executed by the user. In this case a hotkey switch from bonded to non-bonded connection. This code will indicate to Boxilla to not terminate the entire set of connection in the bonded group. </p> <p>Q: how do I know that rx is in a bonded connection \u2013 I don\u2019t so send a cs_delete_connection indicating that I\u2019m going in to a non bonded connection</p>"},{"location":"architecture/Summary/Contents/kvm_bonded_connection/#switch-from-a-bonded-connection-to-another-bonded-connection","title":"Switch from a bonded connection to another bonded connection","text":"<p>A user running a bonded connection can switch to another bonded connection using a hotkey. When this happens it is necessary for the receiver to first send notification to Boxilla to indicate:</p> <ol> <li>That the current bonded connection is being terminated </li> <li>That the user intends to launch a different bonded connection.</li> <li>This information is passed to Boxilla\u2019s existing connection status endpoint  https://10.211.129.2/bxa-api/connections/kvm/status</li> </ol> <p>This endpoint requires a json object containing:</p> <ol> <li>The MAC address of the receiver</li> <li>The exit reason code </li> </ol> <p>The exit reason code will indicate the type of switch being executed by the user. In this case a hotkey switch from bonded to non-bonded connection.  </p>"},{"location":"architecture/Summary/Contents/kvm_bonded_connection/#launch-previous-connection-from-bonded-connection-using-hotkey","title":"Launch previous connection from bonded connection using hotkey","text":"<p>A user running a bonded connection can launch previous connection using a hotkey. When this happens it is necessary for the receiver to first send notification to Boxilla to indicate:</p> <ol> <li>That the current bonded connection is being terminated </li> <li>That the user intends to launch a non-bonded connection. </li> </ol> <p>This information is necessary in order to prevent Boxilla from terminating the entire bonded connection. This information is passed to Boxilla\u2019s existing connection status endpoint  https://10.211.129.2/bxa-api/connections/kvm/status</p> <p>This endpoint requires a json object containing:</p> <ol> <li>The MAC address of the receiver</li> <li>The exit reason code </li> </ol> <p>The exit reason code will indicate the type of switch being executed by the user. In this case a hotkey switch from bonded to non-bonded connection. This code will indicate to Boxilla to not terminate the entire set of connection in the bonded group. </p>"},{"location":"architecture/Summary/Contents/kvm_bonded_connection/#bonded-connection-termination","title":"Bonded connection termination","text":"<p>Bonded connection can be terminated from Boxilla connection page and from the receiver using the hotkey (default printscrn + O)</p>"},{"location":"architecture/Summary/Contents/kvm_bonded_connection/#bonded-connection-termination-via-boxilla-osd","title":"Bonded connection termination via Boxilla OSD","text":"<p>This terminates all connections in the bonded connection</p>"},{"location":"architecture/Summary/Contents/kvm_bonded_connection/#bonded-connection-termination-via-printscreen-o-keyboard-shortcut","title":"Bonded connection termination via printscreen O (keyboard shortcut)","text":"<p>This terminates all connections in the bonded connection. Any receiver in the bonded group can terminate the bonded connection using printscrn + O key combination. Boxilla requires that the receiver make a REST call to the connection status endpoint.</p>"},{"location":"architecture/Summary/Contents/kvm_bonded_connection/#libraries-binaries-and-databases-impacted-by-this-feature","title":"Libraries, binaries and databases impacted by this feature","text":"<p>This section details the changes needed to implement the bonded connection feature in terms of the receiver libraries, binaries and databases.</p>"},{"location":"architecture/Summary/Contents/kvm_bonded_connection/#xml-database","title":"XML database","text":"<p>The XML structure will be modified to store bonded connection information \u2013 the proposed changes are outlined in green rectangles in Figure 1 below.  There are two changes to the structure:</p> <ol> <li>The bonded connection will be listed in the Connections node and identified as bonded connection using the type attribute, see below.</li> <li>In addition to listing associated connections entries for each user, the new structure will store associated bonded connections. OSD logic must be modified to ensure that both associated connection and associated bonded connections are listed when a user logs in.  See below. </li> </ol> <p>Clarify steps in launching connection </p> <pre><code>&lt;?xml version = \"1.0\"?&gt;\n&lt;Data&gt;\n-  &lt;Connections&gt;\n     &lt;Connection cmode= \"10\" ViewOnly= \" \" Horizon= \"false\" Preemption_mode= \"false\" Persistent= \"false\" Password= \"cloud\" User_Name= \"demo\" type= \" \" Audio_Source= \" \" IP_address= \"10.10.10.188\" Colour_depth= \"32\" viaTX= \"true\" USB_Redirection= \" \" Connection_type= \"Private\" Name= \"INVISAPC_TX188_2\" Audio=\"YES\" ExtDesk= \" \"/&gt;\n     &lt;Connection ViewOnly= \" \" Horizon= \"false\" PreEmption_mode= \"false\" Persistent= \"false\" Password=\" \" User_Name=\" \" type= \"bonded\" Audio_Source= \" \" Colour_depth=\"32\" viaTX=\"false\" USB_Redirection=\" \" Connection_type= \"Shared\" Name= \"bonded_connection_11\" Audio=\" \" ExtDesk= \" \"/&gt;\n     &lt;Connection ViewOnly= \" \" Horizon= \"false\" PreEmption_mode= \"false\" Persistent= \"false\" Password= \" \" User_Name= \" \" type= \"bonded\" Audio_Source= \" \" Colour_depth= \"32\" viaTX= \"false\" USB_Redirection= \" \" Connection_type= \"shared\" Name=\"bonded 1\" Audio= \" \" ExtDesk= \" \"/&gt;\n     &lt;Connection ViewOnly= \" \" Horizon= \"false\" PreEmption_mode= \"false\" Persistent= \"false\" Password=\" \" User_Name= \" \" type= \"bonded\" Audio_Source= \" \" Colour_depth= \"32\" viaTX= \"false\" USB_Redirection= \" \" Connection_type= \"Shared\" Name= \"bonded 2\" Audio= \" \" ExtDesk= \" \"/&gt;\n     &lt;Connection ViewOnly= \" \" Horizon= \"false\" PreEmption_mode= \"false\" Persistent= \"false\" Password= \" \" User_Name= \" \" type= \"bonded\" Audio_Source= \" \" Colour_depth= \"32\" viaTX= \"false\" USB_Redirection= \" \" Connection_type= \"Shared\" Name= \"bonded_33\" Audio= \" \" ExtDesk= \" \"/&gt;\n     &lt;Connection ViewOnly= \" \" Horizon= \"false\" PreEmption_mode= \"false\" Persistent= \"false\" Password= \" \" User_Name= \" \" type= \"bonded\" Audio_Source= \" \" Colour_depth= \"32\" viaTX= \"false\" USB_Redirection= \" \" Connection_type= \"shared\" Name=\"demo_bonded\" Audio= \" \" ExtDesk=\" \"/&gt;\n     &lt;Connection cmode= \"10\" ViewOnly= \" \" Horizon= \"false\" PreEmption_mode= \"false\" Persistent= \"false\" Password= \"cloud\" User_Name= \"DEMO\" type= \" \" Audio_Source= \" \" Ip_address= \"10.211.129.52\" Colour_depth= \"32\" viaTX= \"true\" USB_Redirection= \" \" Connection_type= \"Private\" Name= \"marcus-tx-129.52_default\" Audio= \" \" ExtDesk= \" \"/&gt;\n     &lt;Connection cmode= \"10\" ViewOnly= \" \" Horizon= \"false\" PreEmption_mode= \"false\" Persistent= \"false\" Password= \"cloud\" User_Name= \"demo\" type= \" \" Audio_Source= \" \" IP_address= \"10.211.130.209\" Colour_depth= \"32\" viaTX= \"true\" USB_Redirection= \" \" Connection_type= \"Private\" Name= \"marcus-tx-211.130.209_default\" Audio= \" \" ExtDesk= \" \"/&gt;\n     &lt;Connection cmode= \"10\" ViewOnly= \" \" Horizon= \"false\" PreEmption_mode= \"false\" Persistent= \"false\" Password= \"cloud\" User_Name= \"demo\" type= \" \" Audio_Source= \" \" IP_address= \"10.211.129.52\"  Colour_depth=\"32\" viaTX= \"true\" USB_Redirection= \" \" Connection_type= \"Private\" Name= \"tx52\" Audio= \" \" ExtDesk= \" \"/&gt;\n     &lt;Connection cmode= \"10\" ViewOnly= \" \" Horizon= \"false\" PreEmption_mode= \"false\" Persistent= \"false\" Password= \"cloud\" User_Name= \"demo\" type= \" \" Audio_Source= \" \" IP_address=\"10.211.130.209\"  Colour_depth= \"32\" viaTX= \"true\" USB_Redirection= \" \" Connection_type= \"Private\" Name= \"tx-130.209_default\" Audio= \" \" ExtDesk= \" \"/&gt;\n     &lt;Connection ViewOnly= \" \" Horizon= \"false\" PreEmption_mode= \"false\" Persistent= \"false\" Password= \" \" User_Name= \" \" type= \"bonded\" Audio_Source= \" \" Colour_depth= \"32\" viaTX= \"false\" USB_Redirection= \" \" Connection_type= \"Shared\" Name= \"colm_bonded\" Audio= \" \" ExtDesk= \" \"/&gt;\n   &lt;/Connections&gt;\n- &lt;Users&gt;\n    &lt;User Password= \"boxilla\" User_Name= \"Boxilla\" AD= \"false\" Priviledge= \"Administrator\"&gt;\n     &lt;Associated_bonded_connection Connection_Name= \"bonded_connection_11\"/&gt;\n     &lt;Associated_bonded_connection Connection_Name= \"bonded 1\"/&gt;\n     &lt;Associated_bonded_connection Connection_Name= \"bonded 2\"/&gt;\n     &lt;Associated_bonded_connection Connection_Name= \"bonded_33\"/&gt;\n     &lt;Associated_bonded_connection Connection_Name= \"demo_bonded\"/&gt;\n     &lt;Associated_connections Connection_Name= \"marcus-tx-129.52_default\"/&gt;\n     &lt;Associated_connections Connection_Name= \"marcus-tx-211.130.209_default\"/&gt;\n     &lt;Associated_connections Connection_Name= \"tx52\"/&gt;\n     &lt;Associated_connections Conenction_Name= \"tx-130.209_default\"/&gt;\n     &lt;Associated_bonded_connections Connection_Name= \"colm_bonded\"/&gt;\n     &lt;Associated_bonded_connections Connection_Name= \"marcus_bonded\"/&gt;\n  &lt;/User&gt;  \n</code></pre>"},{"location":"architecture/Summary/Contents/kvm_bonded_connection/#sqlite-3-database","title":"SQLITE 3 database","text":"<p>The Sqlite 3 database rx_settings.db will store the bonded receiver group in a maximum 32 byte string. Its default value is an empty string and can be modified via a REST call from Boxilla. The endpoint will support the following verbs: GET to read and PUT to assign a value.</p>"},{"location":"architecture/Summary/Contents/kvm_bonded_connection/#libdatabase","title":"Libdatabase","text":""},{"location":"architecture/Summary/Contents/kvm_bonded_connection/#xmlc","title":"xml.c","text":"<p>The xml parsing system must be modified to parse the bonded connection information from the db.</p>"},{"location":"architecture/Summary/Contents/kvm_bonded_connection/#dalc","title":"dal.c","text":"<p>The sqlite 3 database parsing system must be modified to read and write the bonded group name to the sqlite 3 db.</p>"},{"location":"architecture/Summary/Contents/kvm_bonded_connection/#osd","title":"OSD","text":"<p>The OSD will require the following changes: </p>"},{"location":"architecture/Summary/Contents/kvm_bonded_connection/#osd-frontend","title":"OSD frontend","text":"<ol> <li>If assigned to a bonded connection group this string will be displayed on the Connections tab as a text box. In order for any change to this sqlite 3 db entry to be shown on the OSD, the OSD must be reloaded via reboot or log out and log in.</li> <li>Display the bonded connections in the Connections list.</li> </ol>"},{"location":"architecture/Summary/Contents/kvm_bonded_connection/#osd-backend","title":"OSD backend","text":"<ol> <li>Update to the XML parsing functions to support parsing of the bonded connection data.</li> <li>On click connect, if the connection is a bonded connection, the OSD remains onscreen providing status update of how the connection establishment is progressing. This information will be shown in a modal message box. If the bonded connection fails during the polling phase then the failure reason is displayed on the message box. </li> </ol>"},{"location":"architecture/Summary/Contents/kvm_bonded_connection/#librestapi-binary","title":"Librestapi binary","text":"<p>The librestapi binary must provide the following additions to the REST API:</p> <ol> <li>Receiver to Boxilla REST call to launch connection. PUT to Boxilla endpoint with a json request object containing the bonded connection name.</li> <li>Receiver to Boxilla REST call to obtain status. GET call that will return a status code to describe the connection progress </li> </ol>"},{"location":"architecture/Summary/Contents/kvm_bonded_connection/#webservice","title":"Webservice","text":"<p>Two new endpoints are required for the receiver webservice, these changes are detailed in ENG-0005-020 (ref 3). </p> <ol> <li>Endpoint to allow the name of the bonded connection group to be written and read by Boxilla.</li> <li>Endpoint to terminate_bonded connection. This is needed in order to write an exit code to the receiver indicating that the bonded connection did not establish correctly. This should be written to all receivers in the bonded receiver group and should trigger an appropriate message on OSD relaunch.</li> </ol>"},{"location":"architecture/Summary/Contents/kvm_bonded_connection/#flowchart","title":"Flowchart","text":""},{"location":"architecture/Summary/Contents/kvm_bonded_connection/#error-handling","title":"Error handling","text":""},{"location":"architecture/Summary/Contents/kvm_bonded_connection/#north-bound-rest-error-handling","title":"North bound REST error handling","text":"<p>Error handling for north bound REST (receiver to Boxilla) is implemented on two levels. </p> <ol> <li>All errors in the transport layer, tcp or curl layers are logged to syslog as per the current scheme (active directory log in). Every function call to these layers returns an error code to librestapi.</li> <li>If librestapi receives a non-zero error code from the processes listed in 1. then it returns a generalised error code to the OSD. The OSD then displays a message based on the error code received. The reason for this generalisation is because the number of error codes returned from 1. are large in number \u2013 e.g. there are about ~60 possible curl error codes and we do not have the time to write a message for each one. </li> </ol>"},{"location":"architecture/Summary/Contents/kvm_bonded_connection/#error-codes-for-bonded-connection-launch","title":"Error codes for bonded connection launch","text":"<p>The following errors are used to provide status update and error states to the OSD user</p> BC_OK / 0 / BC_REST_CLIENT_ERROR, / 1 / BC_REST_SERVER_ERROR, / 2 / BC_IDLE, / 3 / BC_WAITING, / 4 / BC_ESTABLISHING_CONNECTION, / 5 / BC_AUTHENTICATION_FAILURE, / 6 / BC_TIMEOUT_ERROR, / 7 /"},{"location":"architecture/Summary/Contents/kvm_bonded_connection/#on-bonded-connection-failure","title":"On bonded connection failure","text":"<p>If a subset of the connections from the bonded group fails to establish, this does not affect other connection in the bonded group. Also, if a subset of the connections from the bonded group fails,  the user of the OSD that launched the bonded connection is not notified. </p>"},{"location":"architecture/Summary/Contents/kvm_bonded_connection/#security-considerations","title":"Security Considerations","text":"<p>Any interactions between receiver and Boxilla will use existing security measures implemented as part of the webservice and librestapi library. </p>"},{"location":"architecture/Summary/Contents/kvm_bonded_connection/#test-and-validation","title":"Test and Validation","text":"<p>Engineering testing will be carried out as follows:</p> <ol> <li>Unit tests for changes to C/C++ QT logic</li> <li>Postman regression tests to validate new web service endpoints. </li> <li>Librestapi_cli to validate changes to librestapi library.</li> <li>Boxilla integration testing to validate XML, sqlite3 and northbound REST interaction. </li> </ol> <p>Note: Engineering testing cannot validate all permutations due to the limits of available hardware.</p>"},{"location":"architecture/Summary/Contents/kvm_bonded_connection/#performance-and-user-experience","title":"Performance and user experience","text":"<p>Status updates will be displayed on the receiver OSD that launches the bonded connection. </p> <p>All other receivers in the bonded receiver group will be given no warning that the bonded connection is being launched. </p> <p>Customers may want to know what receivers are members of the bonded connection that is listed on the receiver OSD. The SDD does not require that we display the names/ip BCdresses of the receivers in the bonded group. </p>"},{"location":"architecture/Summary/Contents/kvm_client/","title":"Client Application","text":""},{"location":"architecture/Summary/Contents/kvm_client/#reference-documentation","title":"Reference Documentation","text":""},{"location":"architecture/Summary/Contents/kvm_client/#overview-and-responsibilities","title":"Overview and Responsibilities","text":"<p>The client application bbfreerdp provides the decoder side functionality for a KVM connection. It interacts with a number of other decoder side components to facilitate the establishment and management of a KVM connection. Its principle responsibilities are:</p> <ul> <li>Establish a connection to a KVM Server using the modified RDP protocol.</li> <li>Based on the specified connection type the client application will select the appropriate set of scripts.</li> <li>The client application implements a heartbeat to determine the health of an established connection. If there heartbeat exchange fails then the client will terminate the connection.</li> <li>The client application is responsible for the orderly teardown of the connection after the user terminates it. It calls the relevant set of scripts to return the decoder hardware to a quiescent state.</li> <li>The client application is responsible for the handling of a non-graceful teardown of a connection if the remote side becomes unresponsive.</li> <li>The client application manages the decoder side handling of resolution changes. These are communicated from the encoder over the RDP protocol and the client application communicates with decoder hardware through the Display Layer to facilitate the change to the new resolution.</li> </ul>"},{"location":"architecture/Summary/Contents/kvm_client/#interaction-with-other-components","title":"Interaction with Other Components","text":"<p> Figure 12: Client Application Interactions</p> <ul> <li>The client application interacts with a number of other components. These are shown in \u201cFigure 1: Client Application Interactions.\u201d above</li> <li>The client application uses various system libraries to interact with services like data abstraction, system utilities and hardware abstraction.</li> <li>The client application launches and terminates connections through connection management scripts.</li> <li>The client application interacts with the display logic through the display layer and the display manager.</li> <li>The client application is launched by the OSD or REST Interface when a user requires a connection.</li> </ul>"},{"location":"architecture/Summary/Contents/kvm_client/#sub-components","title":"Sub Components","text":"<p>The client application has the following subcomponents.  Figure 13: Client Application Subcomponents</p>"},{"location":"architecture/Summary/Contents/kvm_client/#video-and-audio-management","title":"Video and Audio Management","text":""},{"location":"architecture/Summary/Contents/kvm_client/#connection-management","title":"Connection Management","text":""},{"location":"architecture/Summary/Contents/kvm_client/#command-line-argument-processing","title":"Command Line Argument Processing","text":""},{"location":"architecture/Summary/Contents/kvm_client/#mouse-and-keyboard-handling","title":"Mouse and Keyboard Handling","text":""},{"location":"architecture/Summary/Contents/kvm_client/#main-state-machine","title":"Main State Machine","text":"<p>The main state machine is responsible to processing messages sent and received from the connection manager and routing these to and from the message parser. Mouse and Keyboard messages are taken from libUSB and routed to the message parser where they are transported over the RDP protocol.  Figure 15: Client Application High Level Design</p> <p></p>"},{"location":"architecture/Summary/Contents/kvm_server/","title":"KVM Server","text":""},{"location":"architecture/Summary/Contents/kvm_server/#encoder-hardware","title":"Encoder Hardware","text":""},{"location":"architecture/Summary/Contents/kvm_server/#the-all-tiles-functionality","title":"The All Tiles Functionality","text":"<p>There is an all tiles mode bit (per head) that is bit[3] of 0x800c840b (hd0) or 0x800c850b (hd1). This will force all subsequent captured tiles to be marked as updated while the bit is set.</p> <p>There is an all tiles mode turn off bit (per head) that is [bit[3] of 0x800c7000 (hd0) or bit[4] of 0x800c7000 (hd1) This will turn off the all tiles mode after 2 frames have been encoded subsequent to the bit being set. At this point all tiles mode turn off bit also self clears. (so you should check that it is off before setting again)</p> <p>So both bits should be set for a head in order to cause at least 1 all tiles frame to be set.</p>"},{"location":"architecture/Summary/Contents/kvm_server/#dropped-frames","title":"Dropped Frames","text":"<p>DF counts are read every second from the FPGA registers (1 per head). The DF count is then divided by 60 because we sample and report them every minute to give a DF count per second. If there is an actual count of between 1 and 59, it will result in a Dropped Frames per second count of 0 for that minute because the division by 60 will result in an value less than one which will be rounded down to zero. Previously we rounded this up to 1 but this then resulted in the test team opening bugs citing dropped frames of 1 even on static or light bandwidth content.</p> <p>If the above calculation results in a DF count of greater than 0, then we subtract 1 from the value \u2013 This is done because the TX rate controller is set to drop 1 in 64 frames (to ensure that over time, the pipe between the TX and RX doesn\u2019t fill up). This intentional drop would be reported as a dropped frame which was not acceptable to test.</p>"},{"location":"architecture/Summary/Contents/kvm_server/#processing-mouse-events","title":"Processing Mouse Events","text":"<p>The Receiver can send both absolute or relative mouse events. In USB High Speed it is 4 _ 125us = 0,5ms, in Full Speed it is 1 _ 1ms = 1ms. This polling interval depends on the variable bInterval in one of the HID Endpoint Descriptors and it has been modified in development_interop branch revision r7926 for Draco Device previous value for FS was 10 * 1ms = 10ms. Actually one of the next updates I would like to add this driver is to change HS bInterval variable to match 1ms as it will make the application layer more consistant. We are a HS device but we need to be backward compatible with FS so different descriptors will be used in each case.  Encoder Side Processing  *Figure 17 Low Level Mouse Handling*</p>"},{"location":"architecture/Summary/Contents/kvm_server/#blackbox-messaging","title":"Blackbox Messaging","text":""},{"location":"architecture/Summary/Contents/kvm_server/#rdp-stack","title":"RDP Stack","text":""},{"location":"architecture/Summary/Contents/kvm_server/#main-thread","title":"Main Thread","text":""},{"location":"architecture/Summary/Contents/kvm_server/#message-handling-thread","title":"Message Handling Thread","text":""},{"location":"architecture/Summary/Contents/kvm_server/#mouse-handling-thread","title":"Mouse Handling Thread","text":""},{"location":"architecture/Summary/Contents/kvm_server/#rfx-event-thread","title":"RFX Event Thread","text":""},{"location":"architecture/Summary/Contents/kvm_server/#libusb-event-thread","title":"libUSB Event Thread","text":""},{"location":"architecture/Summary/Contents/lacp/","title":"LACP","text":""},{"location":"architecture/Summary/Contents/lacp/#lacp-overview","title":"LACP Overview","text":"<p>The PE and 4K variants of the Emerald appliance platform provide 2 Ethernet ports for the purpose of link redundancy; if the active link goes down, the Ethernet traffic should migrate seamlessly to the other link.</p> <p>The state of the link (the next-hop connection to the adjacent switch), is reported by the Ethernet PHY. When the PHY detects that the link goes down on the active port (e.g. the cable is unplugged), an interrupt is triggered to inform the TOE kernel driver. If the link on the redundant port is up, a switchover takes place and Ethernet traffic is now directed through that port instead. This is achieved by updating registers on the TOE to select the alternative port. However, there are some cases where the PHY cannot detect a loss of link to the switch. For example, if connected via a fiber-to-copper media converter, it could happen that the cable on the far end of the convertor is unplugged from the switch but the PHY on the Emerald appliance would still see the near-side link to the converter as up and thus a switchover to the redundant port would not be triggered.</p> <p>A number of methods exist to overcome this. For example, application-level messaging protocols can be crafted to detect end-to-end connectivity failures, and ICMP or ARP pings to a known IP address could also be used, but these approaches depend on other nodes in the network whose IP addresses are known and whose connections are guaranteed to be stable.  Figure 7: Redundant connection to switch via media converter</p> <p>The Link Aggregation Control Protocol (LACP), part of the IEEE 802.3ad networking standard, is a widely-adopted approach for bundling several physical ports together to form a single logical channel, providing both fault-tolerance and bandwidth aggregation. LACP is commonly supported on smart switches, and also supported on Linux with the \u2018bonding\u2019 kernel driver. Once configured on the switch, it is possible for the Emerald appliances to automatically detect LACP support on the link and leverage LACP keep-alive PDUs sent periodically by the switch to detect link failures without any additional user configuration.</p> <p>Having configured a number of possible implementation options, it was decided to implement a partial level of support, sufficient for detecting link failures, within the existing Emerald TOE kernel driver. The bandwidth-aggregation aspect of LACP is not a requirement, as it is assumed that only a single physical link will be active at any time (a limitation imposed by the existing TOE driver design).</p>"},{"location":"architecture/Summary/Contents/lacp/#lacp-functionality-on-emerald","title":"LACP Functionality on Emerald","text":"<p>When LACP is enabled in the TOE driver (allowed only on dual-MAC hardware variants), the Emerald appliance will operate in either a Passive or Active LACP mode (configurable).</p>"},{"location":"architecture/Summary/Contents/lacp/#passive-mode","title":"Passive Mode","text":"<p>In Passive mode, the TOE driver will only send LACPDUs in response to receiving them from the switch. Once an LACPDU is received, the TOE driver will parse it and send a response to the switch, and the received LACPDU will then be discarded (not passed up the stack). From there, the Emerald device will expect to receive a new LACPDU from the switch approximately once-per-second and will start a timer to monitor this. The following conditions are considered when evaluating a switch-over in LACP Passive mode:</p> <ul> <li>A: The standby physical link is up, according to the PHY</li> <li>B: The current physical link is down, according to the PHY</li> <li>C: The following LACP conditions are all met: - LACP is currently enabled in the TOE driver - LACP support has been detected on the link (LACPDUs received from the switch) - A new LACPDU has not been received in the last 3 seconds (LACP fast-mode timeout) - No other inbound traffic has been detected on the link in the last 3 seconds   If (A AND (B OR C)) is TRUE, a switch-over to the other link will occur.</li> </ul>"},{"location":"architecture/Summary/Contents/lacp/#active-mode","title":"Active Mode","text":"<p>In Active mode, the driver will send unsolicited LACPDUs periodically, and will attempt link-switchover if no LACPDU or other inbound frames are received within the timeout interval. The following conditions are considered when evaluating a switch-over in LACP Active mode:</p> <ul> <li>A: The standby physical link is up, according to the PHY</li> <li>B: The current physical link is down, according to the PHY</li> <li>C: The following LACP conditions are all met: - LACP is currently enabled in the TOE driver - A new LACPDU has not been received in the last 3 seconds (LACP fast-mode timeout) - No other inbound traffic has been detected on the link in the last 3 seconds   If (A AND (B OR C)) is TRUE, a switch-over to the other link will occur.   LACP Active mode will be the recommended option, as it covers more scenarios than Passive mode. For example, even if LACP is not supported or not yet detected on the switch, this mode will still detect a link failure and attempt a switchover to the redundant link.</li> </ul>"},{"location":"architecture/Summary/Contents/lacp/#hunting-for-an-active-link","title":"Hunting for an active link","text":"<p>Due to the fact that the TOE driver will only allow one physical link to be active at any time, it is not possible to assess the LACP connectivity status of the standby link concurrently in the background. The implications of this require a mechanism to \u201chunt\u201d for an active link in some cases. For example, consider the following scenario:</p> <ol> <li>Port A, the active port, is connected via a media converter, and LACPDUs are exchanged on the link. The link is up.</li> <li>Port B, the standby port, is currently disconnected so the link is down.</li> <li>An LACPDU timeout occurs, but a link switchover does not occur because Port B link is down.</li> <li>Port B cable is subsequently connected, but the existing TOE link switchover mechanism doesn\u2019t switch the active link to Port B because Port A is still up according to the PHY.</li> <li>So we must continue to assess the LACPDU connectivity state, by rearming the LACP timer, and trying again to switchover to the standby port whenever the timer expires. This is one case of \u201chunting\u201d for an active link.    Also, another possible scenario is that both ports are relying on LACP to detect a loss of connectivity to the switch, such that both ports always appear up according to the PHY. If connectivity is lost on both links with LACP timeouts, the Emerald device does not know which link may become active again, so must check both links alternately for LACPDUs or other signs of received traffic. Thus, it must \u201chunt\u201d for an active link, switching to the other port whenever the LACP timeout expires, as both ports cannot be activated at the same time.    If Active Mode is selected, this hunting process will occur regardless of whether the remote switch supports LACP communication. If Passive Mode is selected, hunting will only occur if an LACP timeout occurs.</li> </ol>"},{"location":"architecture/Summary/Contents/lacp/#lacp-processing-flow","title":"LACP processing flow","text":"<p>Figure 6 - LACP processing flow, illustrates the high-level LACP handling process, encompassing both Active and Passive modes. Note that the actual switchover itself is not described below, as this is logic already implemented in the current TOE driver.  Figure 8: LACP processing flow</p>"},{"location":"architecture/Summary/Contents/mouse_events/","title":"Emerald Mouse Event Handling Architecture","text":""},{"location":"architecture/Summary/Contents/networking/","title":"Networking","text":"<ul> <li>To be Completed</li> </ul>"},{"location":"architecture/Summary/Contents/networking/#lacp","title":"LACP","text":"<p>see  LACP System Reference</p>"},{"location":"architecture/Summary/Contents/networking/#latency-and-rtt","title":"Latency and RTT","text":"<p>The calculation of RTO includes both average and variance so we would typically see a RTO of 200 msec for a latency of 50 msec and this would provide some tolerance of jitter. Once RTO is triggered we will see retransmissions but the determination to bring down a connection is controlled by the Keep Alive mechanism.</p>"},{"location":"architecture/Summary/Contents/networking/#keep-alive-mechanism","title":"Keep Alive Mechanism","text":"<p>The connection will only drop if the keep-alive detector fires (a 5 seconds detection window) and we have also failed to see audio or video movement within that 5 second window. We monitor audio and video sequence numbers, and as long as these continue to increment we keep the connection alive.</p> <p>The TOE has a 5 second timeout on establishing a new connection so that is the likely timescale for a connection failing to establish due to network delays.</p>"},{"location":"architecture/Summary/Contents/networking/#reliable-multicast","title":"Reliable MultiCast","text":""},{"location":"architecture/Summary/Contents/networking/#municast","title":"Municast","text":""},{"location":"architecture/Summary/Contents/networking/#unicast","title":"Unicast","text":""},{"location":"architecture/Summary/Contents/performance/","title":"Performance","text":""},{"location":"architecture/Summary/Contents/performance/#current-performance-issues","title":"Current Performance Issues","text":"<p>The objective of this exercise is to help clarify areas of ambiguity in the performance criteria of the product. These measurements are based on release 6.3.10.</p> Device Test Scenario Configuration FPS Dropped Frames Bandwidth Resolution Mode Quality Setting EMD-4K RX-TX Avitar Playing Full Screen Lossless 4K TX, audio enabled fps=60 DF=0 Mbps=2984.00 AvgMbps=2851.67 2K 1920 x 1080 60Hz Private Default EMD-4K RX-TX Avitar Playing Full Screen Lossless 4K TX, audio enabled fps=47 DF=12 Mbps=9344.00 AvgMbps=9345.67 4K 3840 x 2160 60Hz Private Default SE-2K RX-TX SH Avitar Playing Full Screen Optimised 2K TX, audio enabled fps=57 DF=0 Mbps=120 AvgMbps=120 2K 1920 x 1080 60Hz Private Default 4k TX - 2K RX SH Avitar Playing Full Screen Optimised 2K TX, audio enabled fps=58 DF=0 Mbps=104.8 AvgMbps=104 4K 3840 x 2160 60Hz Private Default 4K TX - 2K RX DH Avitar Playing Full Screen Optimised 4K TX, audio enabled fps=58 DF=0 Mbps=86.3 AvgMbps=112 4K 3840 x 2160 60Hz Private Default 2K TX - 4K RX Avitar Playing Full Screen Optimised 2K TX, 4K RX, audio enabled fps=58 DF=0 Mbps=64 AvgMbps=64 2K 1920 x 1080 60Hz Private Default 2K TX SH - 2K RX SH Avitar Playing Full Screen Optimised 2K TX, 2K RX, audio enabled fps=56 DF=0 Mbps=50.57 AvgMbps=96 2K 1920 x 1080 60Hz Shared Default 2K TX DH - 2K RX DH Avitar Playing Full Screen Optimised 2K TX, 2K RX, audio enabled fps=58 DF=0 Mbps=56 AvgMbps=64 2K 1920 x 1080 60Hz Private Default 2K TX SH - 2K RX DH Avitar Playing Full Screen Optimised 2K SH TX, 2K DH RX, audio enabled fps=55 DF=0 Mbps=71.44 AvgMbps=104 2K 1920 x 1080 60Hz Shared Default 2K TX DH - 2K RX SH Avitar Playing Full Screen Optimised 2K DH TX, 2K SH RX, audio enabled fps=58 DF=0 Mbps=59 AvgMbps=64 2K 1920 x 1080 60Hz Private Default 4K TX  - 2K RX DH Avitar Playing Full Screen Optimised 4K TX, 2K RX DH, audio enabled fps=30 DF=0 Mbps=236 AvgMbps=240 1920 x 1080 60Hz Private Best Quality 4K TX - 2K RX SH Avitar Playing Full Screen Optimised 4K TX, 2K RX SH, audio enabled fps=30 DF=0 Mbps=236 AvgMbps=240 1920 x 1080 60Hz Private Best Quality 2K TX - 2K RX SH Avitar Playing Full Screen Optimised 2K TX, 2K RX, audio enabled fps=54 DF=0 Mbps= AvgMbps=110 1920 x 1080 60Hz Private Best Quality 2K TX - 2K RX DH Avitar Playing Full Screen Optimised 2K TX, 2K RX, audio enabled fps=52 DF=0 Mbps= AvgMbps=110 1920 x 1080 60Hz Private Best Compression 4K TX - 2K RX DH Avitar Playing Full Screen Optimised 4K TX, 2K RX DH, audio enabled fps=53 DF=0 Mbps=56 AvgMbps=56 1920 x 1080 60Hz Private Best Compression 4K TX - 2K RX SH Avitar Playing Full Screen Optimised 4K TX, 2K RX SH, audio enabled fps=53 DF=0 Mbps=51 AvgMbps=56 1920 x 1080 60Hz Private Best Compression # Appliance Capabilities Platform Engines Memory Comments Emerald 4K Encoder 8 3504576 Emerald 4K Decoder 8 3504356 Emerald 2K DH PE Encoder 8 757604 Emerald 2K DH PE Decoder 8 757588 Emerald 2K SH PE Encoder 8 757604 Emerald 2K SH PE Decoder 8 757588 Emerald 2K DP Encoder 8 Emerald SE DP Encoder 8 Emerald SE SH Encoder 5 757612 Emerald SE SH Decoder 5 757612 Emerald SE DH Encoder 5 757612 Emerald SE DH Decoder 5 757612 No support for Labels Emerald ZeroU Encoder 5 Emerald ZeroU DP Encoder 5"},{"location":"architecture/Summary/Contents/performance/#obsolete-models","title":"Obsolete Models","text":"Platform Engines Memory Comments Deel Encoder 5 Deel Decoder 5 Corrib Encoder 5 Corrib Decoder 5 Corrib SH Encoder 5 Corrib SH Decoder 5"},{"location":"architecture/Summary/Contents/software_architecture_push_and_get/","title":"Push and Get","text":""},{"location":"architecture/Summary/Contents/software_architecture_push_and_get/#embedded-software-architectural-impact-analysis-push-and-get-feature","title":"Embedded Software Architectural Impact Analysis - Push and Get Feature","text":""},{"location":"architecture/Summary/Contents/software_architecture_push_and_get/#introduction","title":"Introduction","text":"<p>Notes to the Authors \u2013 (Delete explanatory text from final approved version)</p> <p>The Push-Get function enables a user to shift (or push) the image to or get the image from any computer connected to the KVM system managed network to the monitor of another user console. This feature allows a user to exchange and edit computer or display contents collaboratively with other users. The target user console can be a standard console or a large screen projection, for example, a video wall.</p>"},{"location":"architecture/Summary/Contents/software_architecture_push_and_get/#references","title":"References","text":"<ul> <li>Push and Get PRM from Marketing</li> <li>Push and Get Feature Description </li> </ul>"},{"location":"architecture/Summary/Contents/software_architecture_push_and_get/#terms-and-definitions-used-in-blackbox","title":"Terms and Definitions used in Blackbox","text":"<p>Notes to the Authors \u2013 (Delete this explanatory text from final approved version)</p> Term Definition Decoder See Receiver Encoder See Transmitter FIT Image A compressed encrypted file format used for 4K appliance software images. Municast The use of multiple individual TCP streams to share a video from a single transmitter to multiple receivers Multicast The use of an individual Multicast UDP stream to share a video from a single transmitter to multiple receivers. Blackbox uses reliable multicast so that any dropped frames are resent and no data loss occurs. Pixel Perfect Mode The original scheme used by 4K products where the entire frame of the source video was captured continuously and sent with compression to the decoder. RFX RemoteFX Codec Extension developed by Microsoft which uses a lossy image codec to encode screen images with efficient and effective compression. This is the lossy scheme used in Blackbox products. Receiver A Blackbox appliance that receives and displays a video stream. A receiver is also referred to as a client or decoder. RPU Real Time Processing Unit. The Zynq Ultrascale+ MPSoC features two A5 RPUs. In our 4K products one of these is used for Display Port functionality using IP provided by Xilinx. The second on the encoder side acts a video processing feed between FPGA and TOE Get Source The term Source is commonly used to describe the PC connected to a transmitter appliance. However, in the context of this document we will be using Source to identify the receiver appliance that is the source for the get function. Shared Mode A generic term used in Blackbox to describe schemes that allow more than one receiver view the video source from a transmitter. See Municast and Multicast. Push Target The term Target is used in the context of this document to describe the receiver appliance that will receive the pushed connection. Tile Differencing Mode A lossless scheme used to reduce bandwidth; only tiles (portions of the screen) that change are sent from encoder to decoder. TOE TCP Offload Engine: A hardware based TCP stack used to accelerate the transmission of data. This is essential in high bandwidth, low latency transmission of video and audio. Technical Debt Technical Debt is a concept in software development that reflects the implied cost of additional rework caused by choosing an easy (limited) solution now instead of using a better approach that would take longer. Transmitter A Blackbox appliance that captures and transmits a video from a source PC. A transmitter is also referred to as a server or encoder. Video Source A source of input for a Transmitter, normally the DVI or Display Port output of a PC. Video Wall A video wall is a special multi-monitor setup that consists of multiple computer monitors, video projectors, or television sets tiled together contiguously or overlapped in order to form one large screen. Typical display technologies include LCD panels, Direct View LED arrays, blended projection screens, Laser Phosphor Displays, and rear projection cubes. <p>Table 1 Terms and Definitions</p>"},{"location":"architecture/Summary/Contents/software_architecture_push_and_get/#architectural-overview","title":"Architectural Overview","text":"<p>The Push and Get feature will impact the existing architecture in a number of ways. The feature will facilitate invocation from either the OSD or from within a connection using a pre-defined hot key sequence. The user hits a pre-defined hot key sequence to invoke a specific target or source device. This would require a pre-configured list of associated targets and sources. A range of hot keys would be associated with Push targets and a second range would be associated with Get sources. Boxilla would maintain and facilitate configuration of these hot key associations, but it should also be possible to make the association through the OSD. The user can see a visual indication of the target or source devices before making a selection by using a special hotkey to invoke a pop-up window that displays the current mappings between hotkeys and available targets and sources.</p>"},{"location":"architecture/Summary/Contents/software_architecture_push_and_get/#use-case-view-scenarios","title":"Use Case View -Scenarios","text":"<p>These are a more detailed explanation of the use cases described in the Push and Get Feature Description </p>"},{"location":"architecture/Summary/Contents/software_architecture_push_and_get/#push-for-basic-hot-key-based-operation-in-a-private-connection","title":"Push for Basic Hot Key Based Operation in a Private Connection","text":"<ul> <li>A user will hit a unique hot key combination to select the target device he wishes to push to.</li> <li>The appliance communicates this request to Boxilla providing the IP Address of the target receiver and a list of attributes associated with the originating connection.</li> <li>Boxilla checks that the currently logged in user on the target receiver has permission to access the pushed connection.</li> <li>Boxilla also checks that the target receiver is compatible with the pushed request from a technology perspective.</li> <li>Boxilla terminates any existing connections on the target receiver and launches the Pushed connection on the target receiver.</li> </ul>"},{"location":"architecture/Summary/Contents/software_architecture_push_and_get/#get-for-basic-hot-key-operation-in-a-private-connection","title":"Get for Basic Hot Key Operation in a Private Connection","text":"<ul> <li>A user will hit a unique hot key combination to select the source device whose screen content he wants to access. </li> <li>The appliance communicates this request to Boxilla providing the IP Address of the target receiver. </li> <li>The appliance terminates any existing connections.</li> <li>Boxilla checks that the currently logged in user on the requesting receiver has permission to access the requested connection.</li> <li>Boxilla also checks that the requesting receiver is compatible with the requested request from a technology perspective.</li> <li>Boxilla retrieves the attributes of the requested connection on the requested source.</li> <li>Boxilla terminate the connection on the requested source.</li> <li>Boxilla creates a new connection on the requesting receiver using the attributes retrieved from the requested source.</li> </ul>"},{"location":"architecture/Summary/Contents/software_architecture_push_and_get/#push-for-basic-hot-key-based-operation-in-a-shared-connection","title":"Push for Basic Hot Key Based Operation in a Shared Connection","text":"<ul> <li>A user will hit a unique hot key combination to select the target device he wishes to push to.</li> <li>The appliance communicates this request to Boxilla providing the IP Address of the target receiver and a list of attributes associated with the originating connection.</li> <li>Boxilla checks that the currently logged in user on the target receiver has permission to access the pushed connection.</li> <li>Boxilla also checks that the target receiver is compatible with the pushed request from a technology perspective.</li> <li>Boxilla terminates any existing connections on the target receiver and launches the Pushed connection.</li> </ul>"},{"location":"architecture/Summary/Contents/software_architecture_push_and_get/#get-for-basic-hot-key-operation-in-a-shared-connection","title":"Get for Basic Hot Key Operation in a Shared Connection","text":"<ul> <li>A user will hit a unique hot key combination to select the source device whose screen content he wants to access. </li> <li>The appliance communicates this request to Boxilla providing the IP Address of the target receiver. </li> <li>The appliance terminates any existing connections.</li> <li>Boxilla checks that the currently logged in user on the requesting receiver has permission to access the requested connection.</li> <li>Boxilla also checks that the requesting receiver is compatible with the requested request from a technology perspective.</li> <li>Boxilla retrieves the attributes of the requested connection on the requested source.</li> <li>Boxilla terminate the connection on the requested source.</li> <li>Boxilla creates a new connection on the requesting receiver using the attributes retrieved from the requested source.</li> </ul>"},{"location":"architecture/Summary/Contents/software_architecture_push_and_get/#logical-view","title":"Logical View","text":""},{"location":"architecture/Summary/Contents/software_architecture_push_and_get/#implications-for-the-osd","title":"Implications for the OSD","text":"<ul> <li>The OSD will need to be able to display a list of targets in a Push menu.<ul> <li>The target details should include IP address and the Boxilla name of the Receiver.</li> </ul> </li> <li>The OSD will need to be able to display a list of sources in a Get menu.<ul> <li>The sources details should include IP address and the Boxilla name of the Receiver.</li> </ul> </li> <li>The OSD will not provide a means of assigning the hot keys associated with the Push and Get functions.<ul> <li>This can only be done through Boxilla</li> </ul> </li> <li>The OSD will need to display a pop-up window that displays the current mappings between hotkeys and available targets and sources when this information is requested via a hot key sequence.<ul> <li>This window provides a summary of all of the current mappings and will allow the users quickly verify and check key mappings.</li> </ul> </li> </ul>"},{"location":"architecture/Summary/Contents/software_architecture_push_and_get/#implications-for-connection-control-and-key-handling","title":"Implications for Connection Control and Key Handling","text":"<ul> <li>The current key handling functionality will need to be able to process the new hot key associations and communicate this to Boxilla.<ul> <li>Once connection_control detects the sequence it will send a REST API request to Boxilla requesting the connection associated with the selected Hot-Key combination.</li> </ul> </li> </ul>"},{"location":"architecture/Summary/Contents/software_architecture_push_and_get/#implications-for-connection-manager","title":"Implications for Connection Manager","text":""},{"location":"architecture/Summary/Contents/software_architecture_push_and_get/#implications-for-osd-manager","title":"Implications for OSD Manager","text":""},{"location":"architecture/Summary/Contents/software_architecture_push_and_get/#implications-for-connection-control","title":"Implications for Connection Control","text":"<ul> <li>The current key handling functionality will need to be able to process the new hot key associations and communicate this to Boxilla.<ul> <li>Once connection_control detects the sequence it will send a REST API request to Boxilla requesting the connection associated with the selected Hot-Key combination.</li> </ul> </li> </ul>"},{"location":"architecture/Summary/Contents/software_architecture_push_and_get/#implications-for-hot-key-configuration","title":"Implications for Hot Key Configuration","text":"<ul> <li>The assigned hot key will need to be stored in the XML file and maintained by Boxilla. When a user on a RX modifies a hot-key mapping on Boxilla, Boxilla will update the XML and this will be retrieved by the device when the user logs in.</li> </ul>"},{"location":"architecture/Summary/Contents/software_architecture_push_and_get/#implications-for-boxilla","title":"Implications for Boxilla","text":"<ul> <li>Boxilla must provide a list of suitable target devices for the Push Targets popup.</li> <li>Boxilla must provide a list of suitable source devices for the Get Sources popup.</li> <li>Boxilla will allow the user associate hot-key mappings to Push Targets and Get Sources.</li> <li>Boxilla will need to configure the appliance XML files with the hot-key associations assigned by the user and make these available to the appliances.</li> </ul>"},{"location":"architecture/Summary/Contents/software_architecture_push_and_get/#implications-for-rest-api","title":"Implications for Rest API","text":"<ul> <li>The REST API on the receiver from which the connection is pushed will need to provide a means of communicating the identity of the Pushed connection to Boxilla.</li> <li>The REST API on the target receiver will need to provide a means of allowing Boxilla execute the Pushed connection. This may use the existing force-connect interfaces.</li> <li>The REST API will need to provide a means of allowing Boxilla determine the currently active connection on a receiver to support the Get operation. This may be available on existing REST interfaces.</li> <li>The REST API will need to provide a means of allowing Boxilla communicate the connection associated with a Get request to the requesting receiver. This may use the existing force-connect interfaces.</li> </ul>"},{"location":"architecture/Summary/Contents/software_architecture_push_and_get/#implications-for-the-remote-app","title":"Implications for the Remote App","text":"<ul> <li>The Remote App will not support this feature.</li> </ul>"},{"location":"architecture/Summary/Contents/software_architecture_push_and_get/#process-view-to-be-completed","title":"Process View (to be Completed)","text":"<p>Notes to the Authors \u2013 (Delete this explanatory text from final approved version)</p> <p>This section will focus on the process view of the architecture; it builds on the logical view by adding the detail required to understand the impact to modular components in terms of their tasks, processes and threads. Again, it is hoped our System Reference document will act as the key reference point here.  </p> <p>Some guidelines</p> <ul> <li>How will this feature change the system's execution, the interactions and configurations of the major components?</li> <li>Will this feature require the introduction of any new components; if so, what are these components and what are their responsibilities. The expectation is that you would have introduced these in the Logical View above, but in this section you should add more specific detail like implications for threading, concurrency and synchronization.</li> <li>Also describes the allocation of objects and classes to tasks.</li> <li>Are there performance considerations that need to be specifically called out?</li> <li>Are there system integrity implications? If there are these need to be made explicit.</li> <li>Are there resource considerations like memory, processing power or bandwidth considerations? If there are be explicit where possible and draw the audience of the documentation to any risks.</li> <li>On completion of this section we should have a reasonably detailed understanding of the key impacts this feature will have to the existing system. Remember however, we are still dealing at an architectural level so maintain the appropriate level of abstraction. The specifics of changes will be dealt with in a Software Design Document.</li> </ul> <p></p>"},{"location":"architecture/Summary/Contents/software_architecture_push_and_get/#deployment-view-to-be-completed","title":"Deployment View (To be completed)","text":"<p>Notes to the Authors \u2013 (Delete this explanatory text from final approved version)</p> <p>This view describes the Functional Area environment with the modifications required to implement the new Feature. It describes the physical distribution of the system and the structure of the hardware components that execute the software. This view also shows the system from the user\u2019s point of view and how the feature will be packaged into deployable units. Also included in this section is a consideration on the impact of support services like customer support, field training and documentation. It must comprehend and detail specifically any interaction with other Functional Areas.</p> <p>Some guidelines</p> <ul> <li>How does the software map on to the hardware \u2013 what devices will be impacted by the change.</li> <li>How do these device changes impact the customers system and the typical customer use-models? For example, see the drawing below.</li> <li>How will the feature be distributed across the system \u2013 are there implications for software upgrade or the software distribution services we use.</li> <li>Are there implications for how we package the software?</li> <li>Are there integrity or compatibility implications for system upgrade and different hardware revisions?</li> <li>Will the feature impact device configuration like databases.</li> <li>Is this feature going to be phased in or realised in a single delivery. The possible phasing of the project should be discussed here.</li> <li>Will this feature require a manual upgrade?</li> <li>Will the feature necessitate additional customer training?</li> <li>Will the feature require additional training for field support technicians and engineers?</li> <li>Are there likely to be requirements for on the ground support at customer sites during installation or deployment of the feature?</li> </ul> <p></p>"},{"location":"architecture/Summary/Contents/stats_monitor/","title":"The Stats Monitor","text":"<p>The Stats Monitor is a process that periodically generates statistics for the TOE and AVAE.</p> <p>It also provides a command runner features that allows one run a command independently of a SSH shell. The command runner can be enabled by creating a file in /usr/local/</p> <ul> <li>To enable the command runner create   /usr/local/ENABLE_COMMAND_RUNNER</li> <li>Define your commands in     /tmp/command.txt</li> <li>The command output or response can then be found in /tmp/response.txt</li> <li>Example Usage: echo /usr/local/check_for_errors.sh &gt; /tmp/command.txt; touch /usr/local/ENABLE_COMMAND_RUNNER, the response will appear in /tmp/response.txt</li> </ul>"},{"location":"architecture/Summary/Contents/system_login/","title":"System Login","text":""},{"location":"architecture/Summary/Contents/system_login/#current-appliance-login","title":"Current Appliance Login","text":"<ul> <li>And XML file can contain both static users (Non Active Directory users) and Active Directory users.</li> <li>When a user logs in to the system, there name is checked in the XML file. </li> <li>If they are a NON-AD user, then their login credentials are checked against those in the XML file. The status of the login is sent to Boxilla over REST.</li> <li>If they are a AD user then a request is sent to Boxilla to verify their credentials. The appliance polls Boxilla to await verification. See Boxilla LDAP SDD</li> </ul>"},{"location":"architecture/Summary/Contents/system_upgrade/","title":"System Upgrade","text":""},{"location":"architecture/Summary/Contents/system_upgrade/#command-line","title":"Command Line","text":""},{"location":"architecture/Summary/Contents/system_upgrade/#2k","title":"2K","text":"<ul> <li>\u200bA combo file will get created by default by the buildsystem each time a make is invoked in output/images directory, To create a combo file you can also invoke ./run create-combo in the buildroot directory.</li> <li>The following commands demonstrate how to put the image onto the target board run the upgrade process:</li> <li>scp  root@:/usr/local/ <li>ssh root@ <li>cd /usr/local/  ( The image must be invoked from /usr/local/ )</li> <li> --noexec (--noexec stops the built in setup script from running which is only used via OSD upgrades) <li>Enter \"N@vi1_Cloudium\" if prompted for a password (This only applies for encrypted images)</li> <li>cd  <li>upgrade</li> <li>reboot</li>"},{"location":"architecture/Summary/Contents/system_upgrade/#4k","title":"4K","text":"<ul> <li>emerald_upgrade -f"},{"location":"architecture/Summary/Contents/system_upgrade/#sdkvm","title":"SDKVM","text":""},{"location":"architecture/Summary/Contents/system_upgrade/#using-cloudgui-osd","title":"Using CloudGui OSD","text":"<ul> <li>See here</li> </ul>"},{"location":"architecture/Summary/Contents/system_upgrade/#using-sdkvm-osd","title":"Using SDKVM OSD","text":""},{"location":"architecture/Summary/Contents/system_upgrade/#using-boxilla","title":"Using Boxilla","text":"<ul> <li>Boxilla checks system capabilities through REST endpoint.</li> <li>Boxilla verifies upgrade file meta-data against system capabilities.</li> <li>Boxilla uploads the upgrade file</li> <li>Boxilla calls the upgrade script</li> </ul>"},{"location":"architecture/Summary/Contents/system_upgrade/#proposed-method-for-sdkvm-and-boxilla","title":"Proposed method for SDKVM and Boxilla","text":"<p>See here</p>"},{"location":"architecture/Summary/Contents/tbc/","title":"Emerald Architecture","text":""},{"location":"architecture/Summary/Contents/tbc/#to-be-completed","title":"To Be Completed","text":""},{"location":"architecture/Summary/Contents/toe/","title":"TOE","text":""},{"location":"architecture/Summary/Contents/toe/#reference","title":"Reference","text":"<ul> <li>Training sessions frm Crevin handover can be found in \\10.211.128.208\\shared_area\\Training\\TOE-AVAE-Recordings</li> </ul>"},{"location":"architecture/Summary/Contents/transmitter_settings/","title":"Transmitter Settings","text":"<p>Documents the implementatiion of transmitter settings functionality on the Appliance and the proposed implementation on the SDKVM</p> <p>The appliance currently uses SSH to communicate TX settings from RX to TX. For the SDKVM we will use the REST API (where possible) to set Transmitter Preferences. This is the interface that Boxilla already uses.</p> <p>One exception to this is software upgrade. There is no REST equivalent on the applinaces so this feature will have to be implemented over the existing SSH based service on the appliance.</p> <p>We should where possible follow the model that Boxilla uses to implement transmitter settings. This is written in Ruby, but the principle should be the same and the algorithm and state machine ported to flutter.</p>"},{"location":"architecture/Summary/Contents/transmitter_settings/#references","title":"References","text":"<p>Boxilla 1.2 / InvisaPC Parameters Rest API SDD</p> <ul> <li>https://limerick.blackbox.com/Engineering/SoftwareApplication/ENG-0007-035.docx</li> </ul> <p>Here is a link to the BXA User Manual, Section 7 Devices, covers the configuration of appliance settings.</p> <p>Boxilla 4.6 User Manual (Section 7, Devices).</p> <ul> <li>https://limerick.blackbox.com/Engineering/SoftwareApplication/EN_KVM_Manual_BXAMGR-R2_Ver4.6_Rev1_29206.pdf</li> </ul>"},{"location":"architecture/Summary/Contents/transmitter_settings/#requirements","title":"Requirements","text":""},{"location":"architecture/Summary/Contents/transmitter_settings/#transmitter-configuration","title":"Transmitter Configuration","text":"<ul> <li>A User with Administrator rights should be able to configure a Transmitter. (DPS Reference: UI0055)</li> <li>A User with Power-User rights will have limited view and configuration rights and a User with Basic rights will not have any visibility of Transmitter settings. (DPS Reference: UI0055)</li> <li>A User with Administrator or Power-User rights can enable pairing on a Receiver by entering the Transmitter IP address and confirming that a management connection can be made. (DPS Reference: UI0056)</li> <li>Once the Transmitter is paired, then it shall be possible to see the existing Transmitter settings and Information. (DPS Reference: UI0056b)</li> <li>It shall be possible to upgrade the paired Transmitter via the Deskvue Receiver OSD in an unmanaged system. (DPS Reference: UI0057)</li> <li>It shall be possible to change the network settings (IP address, Network mask) on the pairedTransmitter via the Deskvue Receiver OSD. (DPS Reference: UI0058) </li> <li>It shall be possible to determine the IP address, port and netmask of a directly connected Transmitter via the  Deskvue Receiver OSD. (Discovery Process) (DPS Reference: UI0059).</li> <li>It shall be possible for a User with Administrator or Power-User rights to reboot the paired Transmitter via the Deskvue Receiver OSD. (DPS Reference: UI0061).</li> <li>It shall be possible to configure a Multicast address for the Emerald4K Transmitter via the Deskvue Receiver OSD. (DPS Reference: UI0062b).</li> <li>It shall be possible to configure the Mouse and Keyboard Release Timeout via the Emerald Receiver OSD. The valid range shall be from 0-5 seconds in 1 second steps. (DPS Reference: UI0597a)  </li> <li>The Administrator on an unmanaged Deskvue Receiver shall be able to change the EDID table on an Emerald Transmitter to have a different preferred resolution to the default.  (DPS Reference: UI0152a,UI0152c) </li> <li>The Administrator on an unmanaged Deskvue Receiver shall be able to run and recover diagnostics on a connected Emerald Transmitter. </li> <li>The Administrator on a managed Deskvue Receiver shall be able to run and recover diagnostics on a connected managed Emerald Transmitter, provided that both Emerald Transmitter and Deskvue Receiver are in the same domain. </li> <li>The Administrator on an unmanaged Deskvue Receiver shall be able to change the Video Quality Settings on a Transmitter. The Video Quality Settings change the quantisation values on the Optimized codec. (DPS Reference: UI0173)</li> <li>The Administrator on a managed 2K Receiver shall be able to change the Video Quality Settings on a managed Transmitter in its domain. The video quality settings change the quantisation values on the Optimized codec.  (DPS Reference: UI0174b)</li> <li>The Administrator on an unmanaged Deskvue Receiver shall be able to change the HID settings on a Emerald Transmitter. The Default HID is the factory default. The Default HID is the factory default. (DPS Reference: UI0177)</li> <li>The Administrator on a managed Deskvue Receiver shall be able to configure mouse acceleration for the absolute HID interface on managed Emerald Transmitters in the same domain. No Acceleration is the factory default. (DPS Reference: UI0629) </li> <li>The Administrator on an unmanaged Deskvue Receiver shall be able to configure mouse acceleration for the absolute HID interface on an unmanaged Emerald Transmitter. No Acceleration is the factory default. (DPS Reference: UI0630)</li> <li>The Administrator on a Receiver shall be able to select audio outputs on a connected Transmitter (with DisplayPort connections) to either the DisplayPort path or analog audio connection. (DPS Reference: UI0638)</li> </ul>"},{"location":"architecture/Summary/Contents/transmitter_settings/#sdkvm-osd-requirements","title":"SDKVM OSD Requirements","text":"<p>The SDKVM should provide an ability to configure TX settings in a similar manner to an unmanaged RX. I have attached a number of screen shots from the appliance. This functionality must be added to the OSD in a tab called TX settings. The tab will appear on both managed and unmanged modes, but in managed mode only a subset of the options are available. It should be modelled on the existing appliance layout but should follow the style of the current OSD.</p> <p></p>"},{"location":"architecture/Summary/Contents/transmitter_settings/#summary-of-current-appliance-interface-dependencies","title":"Summary of Current Appliance Interface Dependencies","text":"Feature Currently Rest API Availability transmitter info ssh No current REST API Equivalent transmitter upgrade ssh Tx still requires SSH for upgrades  for now restore to factory default ssh No current REST API Equivalent transmitter reboot ssh /control - PUT different version support on TX/RX Network settings ssh No current REST API Equivalent Discover Transmitter Ip address ssh No current REST API Equivalent Transmitter preferences ssh control/configuration/tx_settings -PUT Transmitter diagnostics ssh No current REST API Equivalent"},{"location":"architecture/Summary/Contents/transmitter_settings/#restore-to-factory-default","title":"Restore to factory default","text":""},{"location":"architecture/Summary/Contents/transmitter_settings/#current-appliance-implementation","title":"Current Appliance Implementation","text":"<ul> <li>restore - on_txRestoreButton_clicked() -&gt; postTxRestore() - cloudgui function</li> <li>su_restore_tx_unit() called from system_utils.c</li> <li>ssh to connect to transmitter</li> <li>scripts TX_restore.sh is called on the transmitter</li> <li>This restores transmitter settings to default. </li> </ul>"},{"location":"architecture/Summary/Contents/transmitter_settings/#discovery-process","title":"Discovery Process","text":"<ul> <li>Code location: svn://svn-server/Emerald/branches/development_se_p2/Applications/Encoder/MulticastIP</li> <li>The discovery application is used to find the corresponding TX by listening on the Multicast Port.</li> <li>The TX side application sends the content of \"/etc/networks/interface\" over the defined Multicast address.</li> <li>The application is executed in the start sequence stage of encoder.</li> <li>RX side logic is implemented in OSD itself and listens to the multicast address to fetch the network credentials. </li> </ul>"},{"location":"architecture/Summary/Contents/transmitter_settings/#sdkvm-implementation","title":"SDKVM Implementation","text":"<p>For the SDKVM the Restore to Factory Default button will send the appropriate call to the TX over REST using a flutter API client.</p>"},{"location":"architecture/Summary/Contents/transmitter_settings/#network-settings","title":"Network settings","text":""},{"location":"architecture/Summary/Contents/transmitter_settings/#current-appliance-implementation_1","title":"Current Appliance Implementation","text":"<ul> <li>Network - on_networkButtonTX_clicked()</li> <li>only tx LACP (active mode) is available in OSD</li> <li>LACP - It should be available on TX and RX which have dual MACs.</li> <li>rest all options in network settings are disabled by default such as</li> <li>TX new ip</li> <li>TX new network mask</li> <li>TX new default gateway</li> </ul>"},{"location":"architecture/Summary/Contents/transmitter_settings/#transmitter-preferences","title":"Transmitter preferences","text":""},{"location":"architecture/Summary/Contents/transmitter_settings/#current-appliance-implementation_2","title":"Current Appliance Implementation","text":"<ul> <li>preferences - on_txButtonPreferences_clicked() -&gt; postGetTxPrefs()</li> <li>on_txButtonPreferences_clicked() - cloudgui function</li> <li>su_get_tx_preferences called from system_utils.called</li> <li>postGetTxPrefs() inline function for new values</li> <li>changed values are passed to transmitter connecting through ssh</li> <li>Available options to modify in preferences<ul> <li>video quality</li> <li>video source</li> <li>hid configuration</li> <li>EDID HD 1 options available</li> </ul> </li> </ul>"},{"location":"architecture/Summary/Contents/transmitter_settings/#proposed-sdkvm-implementation","title":"Proposed SDKVM Implementation","text":"<p>For the SDKVM the Transmitter Preferences button will call a script in /home/snuc/SDKVM/scripts/restore_tx.sh. This script should call the rest /usr/local/bin/stats_cli utility to send the appropriate call to the TX over REST.</p>"},{"location":"architecture/Summary/Contents/transmitter_settings/#transmitter-diagnostics","title":"Transmitter diagnostics","text":""},{"location":"architecture/Summary/Contents/transmitter_settings/#current-appliance-implementation_3","title":"Current Appliance Implementation","text":"<ul> <li>diagnostics - on_txDiagnosticsButton_clicked() -&gt; postTxDiag ()</li> <li>su_run_tx_diagnostics called from system_utils</li> <li>/opt/blackbox/diagostics.sh is called</li> <li>connecting to transmitter through ssh</li> <li>diagnostic file saving on usb memory</li> <li>remove /usr/local/diagnostic</li> </ul>"},{"location":"architecture/Summary/Contents/transmitter_settings/#current-sdkvm-implementation","title":"Current SDKVM Implementation","text":""},{"location":"architecture/Summary/Contents/transmitter_settings/#dependencies-for-existing-appliance-implementation","title":"Dependencies for Existing Appliance Implementation","text":"<ul> <li>systemutils</li> <li>ssh2_cloudium.c(cloudgui files) which has dependency on libssh2</li> </ul>"},{"location":"architecture/Summary/Contents/transmitter_settings/#sdkvm-architecture-for-transmitter-settings","title":"SDKVM Architecture for Transmitter Settings","text":"<p>Example Message:</p> <p>OSD sends an mqtt message. The processor receives this on the MQTT listener and determines the nature of the request and sends a message to the TX using the REST API. The processor must then wait for a response for this request from the TX. When it receives this response it must handle the response and then send the appropriate message back to the OSD using MQTT.</p> <p>The Listners must run all of the time waiting for incoming messages. These messages are then routed to the message processor for processing. The publishers could be launched synchronous (if they do not block for too long) within the main message processor thread. We will also need to be able to handle commands that come from the SSH service. For some functions like upgrade we will need to be able to send an command and then await the response. These commands and responses must also travel between the MQTT domain and the SSH domain, so a similar implementation is required.</p> <p>Some REST based requests may return immediately, others may require the message processor to wait on a response. Waiting should never block the main thread for too long.</p> <p>Single Transaction for Getting TX Information</p> <p></p>"},{"location":"architecture/Summary/Contents/transmitter_settings/#mqtt-messages-format","title":"MQTT messages format","text":"<p>Example Message</p> <p>OSD</p> <p>OSD topic name : transmitter_info</p> <p>publish :</p> <p>{</p> <pre><code>\"IP\": \"10.231.132.23\"\n</code></pre> <p>}</p> <p>TX_sett</p> <p>topic name for transmitter information response : tx_info_response</p> <p>publish :</p> <p>{</p> <pre><code> \"IP\": \"10.231.132.23\",\n\n \"manufacturing_partnumber\": \"300-061-001\",\n\n \"serial_number\" : \"SEBB18A99013\",\n\n \"MAC\": \"01:23:45:56:78\",\n\n \"software_version\": \"v6.3.10_r1\"\n</code></pre> <p>}</p> <p>topic : TX_state</p> <p>publish :</p> <p>{</p> <pre><code> \"tx_state\": \"processing/response/recieved/published\"\n</code></pre> <p>}</p>"},{"location":"architecture/Summary/Contents/transmitter_settings/#functionality-to-be-ported","title":"Functionality to be Ported","text":"<p>Tx info</p> Item Comments Strategy su_get_store  - su_base64_decode,su_charxor - alternative available su_ssh_params_init su_get_tx_device_info su_get_rx_sets su_ssh_comm_init su_tx_unit_check su_device_check su_get_permission su_ssh_disconnect su_get_sw_version su_get_remote_mpn su_get_remote_serial_number su_get_remote_mac su_get_remote_safemode_status su_get_remote_tech_type libmodels_get_max_resolution_from_mpn libmodels_get_analog_audio_support_from_mpn libmodels_get_displayport_audio_support_from_mpn <p>TX upgrade</p> Item Comments Strategy su_upgrade_tx_unit su_get_device_compat_info su_get_spn su_extract_signature su_compatibility_check su_upgrade_cleanup su_ssh_led_control su_update_dest_file_path su_get_dest_file_name su_ssh_scp_send su_get_remote_display_interface su_ssh_get_command_status su_ssh_get_exit_code su_get_sw_version su_verify_sw_version <p>4K</p> Item Comments Strategy su_firmware_crypt su_parse_header <p>Tx restore</p> Item Comments Strategy su_restore_tx_unit su_get_remote_model_number su_get_device su_flush_eth0 <p>TX reboot</p> Item Comments Strategy su_reboot_tx_unit su_ssh_init su_ssh_get_socket su_ssh_create_session su_ssh_connect su_tx_unit_check su_ssh_exec_cmd <p>Discover</p> Item Comments Strategy su_listen_for_ip su_get_net_mask_from_interfaces <p>TX Pref</p> Item Comments Strategy su_set_tx_prefs su_set_tx_video_quality su_set_tx_hid_settings su_set_tx_edid su_check_tx_prefs <p>TX diagnostics</p> Item Comments Strategy su_run_tx_diagnostics su_save_tx_diag_to_usb su_mount_usb_drive su_unmount_usb_drive <p>TX network setting</p> Item Comments Strategy su_get_tx_network_settings"},{"location":"architecture/Summary/Contents/transmitter_settings/#agreed-strategy-for-tx-settings","title":"Agreed Strategy for TX Settings","text":"<ol> <li>JohnO's will be discussing with the director , how to approach ssh/rest .For now John recommends to use existing Rest API as per availability  ,if no equivalent Rest API is available we should use ssh for that TX feature . Answer: Sent an email and received no response.</li> <li>Also JohnO's told me to ask Prasad, to have same discussion with director on ssh/rest and confirm about it. Answer: Agreed with Prasad on the way forward.</li> <li>systemutils methods to be ported to libstubsystem?  Answer: before that we must see how many things need to be ported if a lot? we will port whole library </li> <li>Which component need to handle usb path for upgrade and diagnostic ?osd can handle as it already has some method to get usb path.</li> <li>Initial validation of ip before giving all the options on tx setting UI , which component should handle this OSD/tx_sett? Answer: The TX Settig component should handle this.</li> <li>Standard naming conventions for MQTT discussed. http://10.211.129.241:8000/architecture/mqtt/mqtt/</li> </ol> <p>Discussion on 29/08/23</p> <ol> <li>tx_sett binary will handle all ssh2 functionality using libssh2 api's.</li> </ol>"},{"location":"architecture/Summary/Contents/transmitter_settings/#proposed-topic-names","title":"Proposed Topic Names","text":""},{"location":"architecture/Summary/Contents/transmitter_settings/#tx_information","title":"TX_information","text":"<p>Request</p> <p>Topic: blackbox/sdkvm/deskvue/cmd/tx_sett/request_info</p> <p>Body:</p> <pre><code>  {\n    \"IP\": \"10.231.128.01\"\n}\n</code></pre> <p>Response</p> <p>Topic: blackbox/sdkvm/deskvue/event/tx_sett/response_info </p> <p>Body for Success: </p> <pre><code>2K: \n{\n\"status\":\"success\",\n\"IP\":\"10.231.128.01\",\n\"mpn\":\"300-061-001\",\n\"sernum\":\"SEBB18A99013\",\n\"mac\":\"01:23:45:56:78\",\n\"softver\":\"V6.3.10_r9988\",\n\"txtype\":\"2K\"\n}\n\n4K: \n{\n\"status\":\"success\",\n\"IP\":\"10.231.128.01\",\n\"mpn\":\"300-061-001\",\n\"sernum\":\"SEBB18A99013\",\n\"mac\":\"01:23:45:56:78\",\n\"softver\":\"V6.3.10_r9988\",\n\"txtype\":\"4K\",\n\"multicast_address\":\"239.0.0.1\",\n\"multiport\":\"2008\"\n}\n</code></pre> <p>Body for Failure: </p> <pre><code>{\n{\n    \"status\": \"failure\",\n    \"error_code\" : 400\n}\n}\n</code></pre>"},{"location":"architecture/Summary/Contents/transmitter_settings/#restore","title":"Restore","text":"<p>Request</p> <p>Topic: blackbox/sdkvm/deskvue/cmd/tx_sett/request_restore</p> <p>Body:</p> <p><pre><code>  {\n    \"IP\": \"10.231.128.01\"\n}\n</code></pre> Response</p> <p>Topic: blackbox/sdkvm/deskvue/event/tx_sett/response_restore</p> <p>Body for Success:</p> <p><pre><code>{\n\"status\":\"success\"\n}\n</code></pre> Body for Failure:</p> <pre><code>{\n    \"status\": \"failure\",\n    \"error_code\" : 400\n}\n</code></pre>"},{"location":"architecture/Summary/Contents/transmitter_settings/#reboot","title":"Reboot","text":"<p>Request</p> <p>Topic: blackbox/sdkvm/deskvue/cmd/tx_sett/request_reboot</p> <p>Body:</p> <pre><code>  {\n    \"IP\": \"10.231.128.01\"\n}\n</code></pre> <p>Response</p> <p>Topic: blackbox/sdkvm/deskvue/event/tx_sett/response_reboot</p> <p>Body:</p> <p><pre><code>  {\n    \"status\": \"success\"\n}\n</code></pre> Body for Failure:</p> <pre><code>{\n    \"status\": \"failure\",\n    \"error_code\" : 400\n}\n</code></pre>"},{"location":"architecture/Summary/Contents/transmitter_settings/#ip_validation","title":"Ip_validation","text":"<p>Request</p> <p>Topic: blackbox/sdkvm/deskvue/cmd/tx_sett/request_ip_validation </p> <p>Body:</p> <pre><code>  {\n    \"IP\": \"10.231.128.01\",\n    \"Mode\": \"Managed/Unmanaged\"\n\n}\n</code></pre> <p>Response</p> <p>Topic: blackbox/sdkvm/deskvue/event/tx_sett/response_ip_validation</p> <p>Body for Success:</p> <pre><code>{\n    \"status\": \"success\",\n \"mode\":\"Managed/Unmanaged\"\n}\n</code></pre> <p>Body for Failure:</p> <pre><code>{\n    \"status\": \"failure\",\n    \"error_code\" : 400\n}\n</code></pre>"},{"location":"architecture/Summary/Contents/transmitter_settings/#update-network","title":"Update network","text":"<p>Request</p> <p>Topic: blackbox/sdkvm/deskvue/cmd/tx_sett/request_update_network</p> <p>Body:</p> <p><pre><code>4k\n  {\n\n   \"IP\": \"10.231.128.01\",\n   \"newip\": \"10.231.132.8\" ,\n   \"gateway\":\"10.231.28.1\",\n   \"netmask\":\"255.255.255.0\",\n   \"lacp_mode\":\"0/1\"\n   \"tx_type\":\"4K\",\n   \"multicast_address\":\"239.0.0.1\",\n\n}\n\n2k\n  {\n    \"IP\": \"10.231.128.01\",\n    \"newip\": \"10.231.132.8\" ,\n    \"gateway\":\"10.231.128.1\",\n    \"netmask\":\"255.255.255.0\"\n    \"lacp_mode\":\"0/1\"\n    \"tx_type\":\"2K\"\n\n}\n</code></pre> Response</p> <p>Topic: blackbox/sdkvm/deskvue/event/tx_sett/response_update_network</p> <p>Body for Success:</p> <pre><code>{\n    \"status\": \"success\"\n}\n</code></pre> <p>Body for Failure:</p> <pre><code>{\n    \"status\": \"failure\",\n    \"error_code\" : 400\n}\n</code></pre>"},{"location":"architecture/Summary/Contents/transmitter_settings/#network","title":"Network","text":"<p>Request</p> <p>Topic: blackbox/sdkvm/deskvue/cmd/tx_sett/request_network</p> <p>Body:</p> <pre><code>  {\n    \"IP\": \"10.231.128.01\"\n}\n</code></pre> <p>Response</p> <p>Topic: blackbox/sdkvm/deskvue/event/tx_sett/response_network</p> <p>Body for Success:</p> <pre><code>{\n    {\n\"status\":\"success\",\n\"ip\": \"10.231.132.8\" ,\n\"netmask\":\"255.255.255.0\",\n\"gateway\":\"10.231.128.1\",\n\"lacp_mode\":\"0/1\"\n\"tx_type\":\"2K\",\n}\n\n4k\n{\n\"status\":\"success\",\n\"ip\": \"10.231.132.8\" ,\n\"netmask\":\"255.255.255.0\",\n\"gateway\":\"10.231.128.1\",\n\"lacp_mode\":\"0/1\"\n\"tx_type\":\"4K\",\n\u201cmulticast_address\u201d:\"239.0.0.1\"\n}\n\n}\n</code></pre> <p>Body for Failure:</p> <pre><code>{\n    \"status\": \"failure\",\n    \"error_code\" : 400\n}\n</code></pre>"},{"location":"architecture/Summary/Contents/transmitter_settings/#tx-preferences","title":"Tx Preferences","text":"<p>Request</p> <p>Topic: blackbox/sdkvm/deskvue/cmd/tx_sett/request_prefs</p> <p>Body:</p> <pre><code>  {\n    \"IP\": \"10.231.128.01\"\n}\n</code></pre> <p>Response</p> <p>Topic: blackbox/sdkvm/deskvue/event/tx_sett/response_prefs</p> <p>Body for Success:</p> <pre><code>Single Head\n{\"status\": \"success\", \"head\": \"1\", \"video_quality\": 2, \"video_source_opt\": 0, \"HID_Conf\": 0, \"EDID_HD1\": 0}\n\nDual Head\n {\"status\": \"success\", \"head\": \"2\", \"video_quality\": 2, \"HID_Conf\": 0, \"EDID_HD1\": 0, \"EDID_HD2\": 0}\n</code></pre>"},{"location":"architecture/Summary/Contents/transmitter_settings/#update-preferences","title":"Update Preferences","text":"<p>Request</p> <p>Topic: blackbox/sdkvm/deskvue/cmd/tx_sett/request_update_prefs</p> <p>Body:</p> <pre><code>Single Head\n{\n    \"IP\": \"10.231.128.01\",\n    \"head\":\"1\",\n    \"video_quality \": 1/2/3/4/5,\n    \"video_source_opt\":1/2/3/4/5,\n    \"HID_Conf\":1/2/3/4/5/6,\n    \"EDID_HD1\":1/2/3/4/5\n}\n\nDual Head\n{\n    \"IP\": \"10.231.128.01\",\n    \"head\":\"2\",\n    \"video_quality \": 1/2/3/4/5 ,\n    \"HID_Conf\":1/2/3/4/5/6,\n    \"EDID_HD1\":1/2/3/4/5,\n    \"EDID_HD2\":1/2/3/4/5\n}\n</code></pre> <p>Response</p> <p>Topic: blackbox/sdkvm/deskvue/event/tx_sett/response_update_prefs</p> <p>Body for Success:</p> <pre><code>{\n    \"status\": \"success\"\n}\n</code></pre> <p>Body for Failure:</p> <pre><code>{\n    \"status\": \"failure\",\n    \"error_code\" : 400\n}\n</code></pre>"},{"location":"architecture/Summary/Contents/transmitter_settings/#tx-diagnostics","title":"Tx Diagnostics","text":"<p>Request</p> <p>Topic: blackbox/sdkvm/deskvue/cmd/tx_sett/request_diag</p> <p>Body:</p> <p><pre><code>  {\n    \"IP\": \"10.231.128.01\",\n    \"usb_path\": \"/media/128_gb\"\n}\n</code></pre> Response</p> <p>Topic: blackbox/sdkvm/deskvue/event/tx_sett/response_diag</p> <p>Body for Success:</p> <pre><code>{\n    \"status\": \"success\"\n}\n</code></pre> <p>Body for Failure:</p> <pre><code>{\n    \"status\": \"failure\",\n    \"error_code\" : 400\n}\n</code></pre>"},{"location":"architecture/Summary/Contents/transmitter_settings/#tx-upgrade","title":"Tx Upgrade","text":"<p>Request</p> <p>Topic: blackbox/sdkvm/deskvue/cmd/tx_sett/request_upgrade</p> <p>Body:</p> <p><pre><code>  {\n    \"IP\": \"10.231.128.01\",\n    \"file_path\": \"/media/128_gb/TX_EMD4K_RELEASE_enc_V6.7.0_r11625.fit\"\n}\n</code></pre> Response</p> <p>Topic: blackbox/sdkvm/deskvue/event/tx_sett/response_upgrade</p> <p>Body for Success:</p> <pre><code>{\n    \"status\": \"success\"\n}\n ```\n\n__Body__ for Failure:\n\n```json\n{\n    \"status\": \"failure\",\n    \"error_code\" : 400\n}\n</code></pre>"},{"location":"architecture/Summary/Contents/transmitter_settings/#tx-discover","title":"Tx Discover","text":"<p>Request</p> <p>Topic: blackbox/sdkvm/deskvue/cmd/tx_sett/request_discover</p> <p>Body:</p> <p><pre><code>  {\n    \"IP\": \"10.231.128.01\"\n}\n</code></pre> Response</p> <p>Topic: blackbox/sdkvm/deskvue/event/tx_sett/response_discover</p> <p>Body for Success:</p> <pre><code>{\n    \"status\": \"success\",\n    \"ip\": \"10.231.132.8\" ,\n    \"netmask\":\"255.255.255.0\"\n}\n ```\n\n__Body__ for Failure:\n\n```json\n{\n    \"status\": \"failure\",\n    \"error_code\" : 400\n}\n</code></pre>"},{"location":"architecture/Summary/Contents/transmitter_settings/#source-code-details","title":"Source code details","text":"<p>https://github.com/blackbox-common-apps/SDKVM_WORKREPO/tree/tx_sett</p>"},{"location":"architecture/Summary/Contents/transmitter_settings/#error-codes-for-osd-and-tx_sett-communication","title":"Error codes for OSD and tx_sett communication","text":"<p>500 - json error 200 -  if ip is not tx 100 - when domain is different managed/unmanged 300 - cannot retireve information 400 - ssh errors /socket/connection </p> Topic names Comments blackbox/sdkvm/deskvue/cmd/tx_sett/request_info blackbox/sdkvm/deskvue/cmd/tx_sett/request_upgrade blackbox/sdkvm/deskvue/cmd/tx_sett/request_restore blackbox/sdkvm/deskvue/cmd/tx_sett/request_reboot blackbox/sdkvm/deskvue/cmd/tx_sett/request_network blackbox/sdkvm/deskvue/cmd/tx_sett/request_discover blackbox/sdkvm/deskvue/cmd/tx_sett/request_pref blackbox/sdkvm/deskvue/cmd/tx_sett/request_diag blackbox/sdkvm/deskvue/event/tx_sett/response_info blackbox/sdkvm/deskvue/event/tx_sett/response_upgrade blackbox/sdkvm/deskvue/event/tx_sett/response_restore blackbox/sdkvm/deskvue/event/tx_sett/response_reboot blackbox/sdkvm/deskvue/event/tx_sett/response_network blackbox/sdkvm/deskvue/event/tx_sett/response_discover blackbox/sdkvm/deskvue/event/tx_sett/response_pref blackbox/sdkvm/deskvue/event/tx_sett/response_diag blackbox/sdkvm/deskvue/event/tx_sett/tx_state_change blackbox/sdkvm/deskvue/cmd/tx_sett/request_ip_validation blackbox/sdkvm/deskvue/event/tx_sett/response_ip_validation blackbox/sdkvm/deskvue/cmd/tx_sett/request_update_network blackbox/sdkvm/deskvue/event/tx_sett/response_update_network blackbox/sdkvm/deskvue/cmd/tx_sett/request_prefs blackbox/sdkvm/deskvue/event/tx_sett/response_prefs blackbox/sdkvm/deskvue/event/tx_sett/response_update_prefs blackbox/sdkvm/deskvue/cmd/tx_sett/request_update_prefs <ol> <li>Link to request and response MQTT json structure(https://limerick.blackbox.com/Engineering/SoftwareApplication/Propsed_request_and_response.xlsx?d=wfd8444cfcbd1484ba4190962f5f664c8)</li> </ol>"},{"location":"architecture/Summary/Contents/transmitter_settings/#qa","title":"Q&amp;A","text":"<p>Existing SSH methods have dependency on below libararies too</p> <p>libmodel ex :  libmodels_get_device_from_mpn libmodels_get_max_resolution_from_mpn</p> <p>To support reboot feature using ssh.There might be some more methods which might have dependencies on other libraries. will it be correct ? to port methods to stubmodel from libmodel library for actual purpose or any other strategy ? - okay for now to port dependent methods(JohnO's)</p>"},{"location":"architecture/Summary/Contents/transmitter_settings/#new-queries","title":"New queries","text":"<p>Existing SSH methods has dependency on Libssh2 below are libssh versions deatils of Appliance(2k/4k) and SNUC</p> <p>2k Reciever libssh2 version curl -V</p> <p>curl 7.54.0 (arm-buildroot-linux-gnueabihf) libcurl/7.54.0 OpenSSL/1.0.2k zlib/1.2.11 libssh2/1.9.0</p> <p>2k transmitter curl -V</p> <p>curl 7.54.0 (arm-buildroot-linux-gnueabihf) libcurl/7.54.0 OpenSSL/1.0.2k zlib/1.2.11 libssh2/1.9.0</p> <p>SNUC snuc@snuc:~$ curl -V</p> <p>curl 7.81.0 (x86_64-pc-linux-gnu) libcurl/7.81.0 OpenSSL/3.0.2 zlib/1.2.11 brotli/1.0.9 zstd/1.4.8 libidn2/2.3.2 libpsl/0.21.0 (+libidn2/2.3.2) libssh/0.9.6/openssl/zlib nghttp2/1.43.0 librtmp/2.3 OpenLDAP/2.5.15</p> <p>currently SNUC doesnt have libssh2 library.</p> <ol> <li>shall we add support for this library from build system side itself or how to handle this in any other way?</li> </ol> <p>Answer: I think we can install ssh2 on snuc</p> <p>There is architecture differences that we need to overcome between appliance and SNUC for using existing SSH methods for transmitter settings.Some examples which are hurdles when using existing methods are give below: </p> <p>for ex:</p> <p>xml_managed_check() methods that is from libdatabase libarary implemented in xml.c.which  is internally used in all ssh functionality via su_get_rx_sets() to check the state of rx device initially before proceeding with other process for reboot/information,diagnostics etc.</p> <p>It uses \"/usr/local/gui_files/CloudDataA.xml\" file to read certain data about managed tx/rx .but in SNUC device case we dont have this file as we have moved to JSON startegy instead of XML</p> <ol> <li>What should be our startegy to handle above scenario? </li> </ol> <p>Answer: The xml files are not present on the snuc. Data is stored in json files. There are methods available to get required values from the json files once we understand what is required.</p> <p>Proposal to tackle down this dependencies and complications :</p> <p>we can do new simplified implementation as existing ssh methods will not be compatible with our SNUC architecture and it can lead to complications with many dependent libararies when ported.(Sanjay)</p> <p>Answer: I think you clarified this, so we agreed that we would implement </p> <p>Query : Why do we support unencrypted images for TX upgrades from tx settings , when we only supply encrypted images to customers. Is there any specific reason for that? Please share knowledge on same with respect to our product.</p> <p>I would like to propose/suggest that we should only support upgrade for encrypted images for TX Upgrade from TX settings due to below reasons: 1) Intel NUC is build with hardware encryption focused on security and this will be good time for us also, if we only support encrypted images for upgrades and negate security concerns and showcase true secure features . 2) As we also have plan to replace ssh commands with REST API very soon in Future due to security concerns.</p>"},{"location":"architecture/Summary/Contents/unplanned_leave/","title":"Unplanned Leave","text":"<ul> <li>We agreed at the PRB on 04/05/2022 that a delay of a second is acceptable for unplanned leave.</li> </ul>"},{"location":"architecture/Summary/Contents/unplanned_leave/#reference-documentation","title":"Reference Documentation","text":"<ul> <li>Alex's proposal's on unplanned leave testing</li> </ul>"},{"location":"architecture/Summary/Contents/video_latency/","title":"Video Memory and Latency","text":"<p>The current TX BRAM can hold 8K of TX Descriptors. This corresponds to 2048 tiles which is slightly more than 4 full frames (a 2k frame with all tiles changes is 510 tiles). [^1] In our current implementation the encode buffers are not freed until the previously sent frame have been acknowledged. When the network latency increases beyond a certain point that single buffer is insufficient. [^2]</p> <p>Increasing the number of descriptors will allow buffering of additional frames which allows encoded data to be processed asynchronously while waiting for existing in-flight data to be acknowledged. If we increase the amount of descriptors it means that we do not have to wait for a frame in flight to be fully acknowledged before allowing further encoded data to be queued for transfer from the encoder to the TOE.</p> <p>By increasing the size of the TX BRAM and increasing the TCP window scale we can increase the FPS in high latency networks. A BRAM of 8K in a high latency WAN means we can achieve zero dropped frames with a network latency of 24ms. With a Network latency of 32ms, we drop 3 frames.</p> <p>A 4K buffer would allow two frames to be stored and an 8K buffer would allow 4 frames to be stored. However, there is a trade-off- increasing the buffer size could also allow stale frames to accumulate. In this case we would see an increased frame rate and throughput, but the user experience may not improve.</p> <p>[^1]: The actual size of BRAM is 64Kb as 8 bytes are needed to represent a TX descriptor. This was originally 2K (16kb) [^2]: The original design used a TX BRAM can hold 2k of TX Descriptors. This corresponded to 512 tiles which is slightly more than 1 full frame (current 2k frame with all tiles changes is 510 tiles). It was deemed insufficient when the network latency increased beyond a certain point.</p> <p> Figure 2: Current 8K BRAM Implementation With a 2K BRAM we can store 2048 of these descriptors - enough for one frame[^3]. By increasing this BRAM to 4K (or 8K) we can store two (or four) frames and this then allows us prepare additional frame sets of descriptors while waiting for the first frame on the wire to be acknowledged.</p> <p>[^3]: There is a TX descriptor for the frame header and one for the metadata. This is just an extra 2 descriptors per video frame. Then there are 4 descriptors per tile (tile header, Y, U, V)</p>"},{"location":"architecture/Summary/Contents/webservice_restapi/","title":"Webservice and Rest Api Architecture","text":""},{"location":"architecture/Summary/Contents/webservice_restapi/#references","title":"References","text":"<ul> <li>Boxilla Northbound REST API for Deskvue Appliance</li> </ul>"},{"location":"architecture/Summary/Contents/webservice_restapi/#dependent-libraries","title":"Dependent Libraries","text":"<ul> <li>webservice</li> <li>systemutils</li> <li>ulfius</li> <li>yder</li> <li>jansson</li> <li>orcania</li> <li>logging</li> <li>m</li> <li>model - blackbox abstraction of appliance model information</li> <li>microhttpd  - http server based library used by the webservice</li> <li>jwt - javacript tokens</li> </ul>"},{"location":"architecture/Summary/Contents/webservice_restapi/#libsys-apis-used-in-web-services","title":"libsys API's used in web services:","text":"<p>Diagnostic dependent API's: - su_get_file_name:  - su_get_list_size: - su_get_file_list: - su_run_diag: On the SDKVM this will invoke a script in ~/SDKVM/scripts/diagnostic.sh</p> <p>Eprom dependent code to read board details like serial, model number - su_check_if_eeprom_programmed:  - sdkvm_su_get_compat_numberL</p> <p>Target specific API's: su_read_hid su_read_video_quality: su_read_noise_filter su_read_edid su_format_edid_command su_read_rx_power_mode</p> <p>Connection types based on protocol process: create_vm_connection create_vnc_connection create_horizon_connection  create_via_tx_connection</p> <p>Required file to get connection settings during force connect: usr/local/gui_files/CloudDataA.xml\" -&gt; this file is handled by clougui app</p>"},{"location":"architecture/Summary/Contents/webservice_restapi/#specific-dependencies-which-need-to-be-resolved","title":"Specific Dependencies which need to be resolved","text":"Dependency Current location Proposed Location Comments restart_webservice.sh /usr/local/ ~/SDKVM/scripts This will be called by discovery as well as init script to initiate the webservices security.sh /usr/local / ~/SDKVM/scripts create create_certs.sh will generate client certificates which are passed as command line arguments for webservice to comminicate in scecure mode rx_database.sh ? / ~/SDKVM/scripts script_output.sh ? ~/SDKVM/scripts database system lib is using database for reading and writing some data for connection template,  RXDiagnostics,TouchScreenRedirection int, HttpEnable int,LoggedInUserName varchar,MouseKeyboardTimeout int, OSDResolution TEXT, Zone TEXT, BondedGroup TEXT, rx_scaling in /usr/local/configuration/ /usr/local/configuration/ ? What is our dependency on this?It is being used to have rx and tx settings.db file for maintaining SQL database, if we go with no data base, then it is not required /usr/bin/cloudgui /usr/bin/cloudgui There is no cloudgui binary on the SDKVM On the appliance we use this to determine if we should instantiate a RX or TX database. On the SDKVM we will only have an RX database (if a database is required) VERSION VERSION ~/SDKVM/info We should replace this reference for SDKVM implementation to ~/SDKVM/info/version.txt syslog.log /usr/local/syslog.log /var/log/syslog.log The workspace server should generate a session based on the worskapce ID discovery /usr/local/discovery ~/SDKVM/boxilla/discovery Created by discovery process mgr_ip /usr/local/mgr_ip ~/SDKVM/boxilla/mgr_ip Created by discovery process SSL_LOCATION SSL_LOCATION=\"/usr/local\" SSL_LOCATION=\"~/SDKVM/security\" This appear to set an environment variable for SSL_LOCATION not sure what is referencing this file or variable?This path used to store client ssl/tls certifcates which will be used for webservice to communicate with Boxilla in secure mode create_certs.sh ? ~/SDKVM/security/ssl/create_certs.sh source /opt/blackbox/security.sh is used to set the SSL location, but this seems unnecessary? it may need if we use same path in mutliple scripts /opt/blackbox/ssl -&gt; usr/local/ssl ? ? I do not believe we need to copy this, we just locate the files in ~/SDKVM/security/ssl? On applience side,the  /opt/blackbox/ssl folder will have root key along with certs_create.sh script and this folder will be copied to SSL_LOCATION path when ip is changed on fly or generated newly and client certifcates willbe genrated using certs_create.sh LAST_IP_FILE /usr/local/webservice/LAST_IP_ADDRESS /home/snuc/SDKVM/info/LAST_IP_ADDRESS Why do we need this? This file is to track IP on appliance. restartwebservice.sh script will generate certificates whenever ip changed on device and that ip will be written in LAST_IP_ADDRESS /usr/local/webservice ? ~/SDKVM/info What is this location used for: The only reference I can see is: if (sdkvm_su_file_exists(\"/usr/local/webservice/development\") and they also seem to be storing: \"LAST_IP_FILE=\"/usr/local/webservice/LAST_IP_ADDRESS\"\" ? setup_rest_assure.sh and remove_rest_assure.sh script will create and delete this directory to manange and unmange the discovery with default ip and mac address. these scripts are not calling by any one connections /tmp ? used to write and read connection count along with connection name ex:# cat /tmp/connections, kvm=2, rdp=2. We need to understand more about this. /tmp/connection_control /tmp/connection_control ? used to have files to read and write connection_type(ex:kvm or rdp) connection_mode(ex optimized or lossless) and dfreerdp.signal( type of singal for termainaltion)# ex: cd connection_control/,# ls connection_mode connection_type_prev dfreerdp.signal,# cat connection_type_prev,kvm # cat connection_mode,OPTIMISED.# cat dfreerdp.signal, terminate startapp.sh /tmp ? used to launch the connections on the appliance. This will not be used on the SDKVM. CloudDataA.xml /usr/local/gui_files/ This is the main appliance configuration file for the RX. The SDKVM will use a json file instead, but there will be a need to translate the xml file into json. rx_scaling_enable /usr/local/ ? SDKVM will not support scaling in the same way as the appliance. So as they stand these are not relevant gui_authentication.stat /usr/local/gui_files /home/snuc/SDKVM/gui_files authentication stats, this file is used to track the how many times connection is established successfulyy or not by having below parameters in file QString logSuccess = \"successful_login=0\";QString logFailed = \"failed_login=0\";QString mgrUnreacable = \"manager_unreachable=0\";QString connBusy = \"connection_in_use=0\";QString connNotReacable = \"connection_not_reachable=0\";QString connRefused = \"connection_refused=0\";QString connErr = \"connection_error=0\"; exit_code /tmp ? SDKVM will not support this in the same way as the appliance. So as they stand these are not relevant. exit_message /tmp ? SDKVM will not support this in the same way as the appliance. So as they stand these are not relevant. tile_differencing_enabled /usr/local ? SDKVM will not support this feature. So as they stand these are not relevant. CONNECTION_DATA /tmp ? used to read and write user name and connection details, need more details? this file is mainly used for launching connection based on keyevents to support OSD feature. source code ref:Application/decoder/Cloudgui/mainwindow.cpp PRESET_SWITCH /tmp ? Need more details? there is no proper clarifcation i found in source code./ TODO: Add comment explaining why a random file is being removed? if(access (PRESET_SWITCH_MODE, F_OK) != -1) NO_GUI /tmp ? SDKVM will not support this feature. So as they stand this is not relevant. guiBootCount.txt /tmp ? SDKVM will not support this feature. So as they stand these are not relevant. WAS_CONNECTED /tmp ? if connection is already established with username, then username and connection name will be written in to this file and those will be copied in another file called /tmp/CONNECTION_DATA. Why do we do this? this file is mainly used for launching connection based on keyevents to support OSD feature. source code ref:Application/decoder/Cloudgui/mainwindow.cpp /usr/local/diagnostics /usr/local/diagnostics /home/snuc/SDKVM/diagnostics This will be done differently on the SDKVM - the REST API will call a script in /home/snuc/SDKVM/scripts/run_diagnostics.sh. This will create the diagnostic files. Boxilla must downlaod these over an API LOG_LEVEL /usr/local/ /home/snuc/SDKVM/info We wil probably have a similar feature on the SDKVM stored in ~/SDKVM/system_level_settings run_diagnostics.sh /opt/blackbox ? to run diagnostics on target based on ip and mgr_ip and send tar file to Boxilla SAFEMODE SAFEMODE ? SDKVM will not support this. COMPATIBILITY COMPATIBILITY ? SDKVM will not support this directly, but the SDKVM will only support a subset of the current REST API endpoints. /usr/local /usr/local ? On the appliance this is used to get disk free and disk total for image upgrade, but on the SDKVM we will not use this area. getVideoQuality.sh, getVideoNoiseFilter.sh /opt/blackbox ? SDKVM will not support video quality settings in the same way as the appliance. So as they stand these are not relevant. get_custom_config.sh /opt/blackbox ? I need more detail on what this is doing? this is used to get TXHID settings using ssh. source code ref:Application/decoder/Cloudgui5/ssh2_cloudium.c get_edid_config.sh /opt/blackbox/edid_config ? SDKVM will not support EDID settings in the same way as the appliance. So as they stand these are not relevant, but there may be a similar ability to get the edid of attached monitors. edid_head0.cfg, edid_head1.cfg, edid_0_cloned.cfg, edid_1_cloned.cfg /usr/local/ ? See previous checksumA /usr/local/gui_files /home/snuc/SDKVM/gui_files to get check sum(not sure what is the exact usage)? might be used to check checksum value when we download guifiles from Boxilla DECODER DECODER ? file to check database integity? Need more details? S61Configuration init scrit will check databse is present or not on Appliance based on this file using database_cli app setup_network_interface.sh /opt/blackbox/networking ? On the appliance this is used to push network settings, but on the SDKVM we will use nmcli instead /usr/local/disable_files/post_connection /usr/local/disable_files/post_connection ? This folder allows you to disable  below applications when developing # Current list of files ,# discovery, # rdm # cloudgui, # webservice # statsmonitor. SDKVM will not support these settings in the same way as the appliance. So as they stand these are not relevant. diagnosticsTX.enc, diagnosticsRX.enc /usr/local /home/snuc/SDKVM These are the diagnostic files sent to Boxilla as part of the diagnostics feature. They are encrypted before being sent. These will need to be retrievable over a REST API endpoint. Only diagnosticsRX.enc is relevant."},{"location":"architecture/Summary/Contents/webservice_restapi/#other-dependencies","title":"Other Dependencies","text":"<ul> <li>technology- &gt; Device type like EMERALD OR CORRIB(EEPROM). On the SDKVM this should be:  DeskVuE  As defined here</li> <li>config-&gt; Single or DUAL HEAD (EEPROM). On the SDKVM this should be: Multi-Head</li> <li>brand -&gt; CLOUDIUM or BLACKBOX (EEPROM). On the SDKVM this should be Blackbox meta_data-&gt;sw_compat -&gt; Compatability check for 4k or 2k (COMATABILITY file). On the SDKVM this should be sdkvm</li> <li>meta_data-&gt;e2_revision-&gt; (EEPROM). Not used, so it will not be returned in any REST APIs.</li> <li>product_display -&gt; DVI/DISPLAY_PORT/HDMI/VGA  (EEPROM). On the SDKVM this should be HDMI/DP</li> <li>serial -&gt; (EEPROM). In the form of SEBB22C89823. On the SDKVM this should be read from /home/snuc/SDKVM/info/serial.txt</li> <li>MPN -&gt;  (EEPROM). On the SDKVM this should be of the form 300-115-xxx  As defined here and to be found in /home/snuc/SDKVM/info/mpn.txt</li> <li>Model -&gt;(EEPROM). On the SDKVM this should be EMD4416-R  As defined here and to be found in /home/snuc/SDKVM/info/model.txt</li> <li>There is a legacy issue where MPN and Model are mixed up on the appliance. Discovery code incorrectly calls get_model but it does in fact return the MPN number and not the model.</li> </ul>"},{"location":"architecture/Summary/Contents/webservice_restapi/#starting-the-webservice-on-sdkvm","title":"Starting the webservice on SDKVM","text":""},{"location":"architecture/Summary/Contents/webservice_restapi/#on-the-appliance-on-4k","title":"On the appliance on 4k","text":"<p>The webservice is started by calling the /etc/init.d/S68Discovery script calling -&gt;opt/blackbox/restart_discovery.sh </p>"},{"location":"architecture/Summary/Contents/webservice_restapi/#on-the-appliance-on-2k","title":"On the appliance on 2k","text":"<p>The webservice is started by calling the /etc/init.d/S69Webservice script calling -&gt;opt/blackbox/restart_webservice.sh</p>"},{"location":"architecture/Summary/Contents/webservice_restapi/#starting-webservice-on-the-sdkvm","title":"Starting webservice On the SDKVM","text":"<ul> <li>The webservice binary exists in /usr/local/bin</li> <li>The restart_webservice script is managed by a systemd user service</li> <li>The service is managed and started by /home/snuc/SDKVM/scripts/restart_webservice.sh. This also operates a systemd user service.</li> <li>The configuration service file for restart_webservice exists in ~/.config/systemd/user/restart_webservice.service.</li> <li>To enable restart_webservice as a service we use: systemctl --user enable restart_webserivice</li> <li>The webservice itself is not run as a service because it is stopped and started by the restart_webservice script.</li> </ul>"},{"location":"architecture/Summary/Contents/webservice_restapi/#database-dependencies","title":"Database dependencies","text":"database Key comments SDKVM Relevance connection label if conectionlable is enbaled then they are writing below data in to startapp.sh script for launching connection fprintf(f, \"%s -nomouse -qws -display linuxfb:/dev/fb1 -n '%s' &amp; \\n\", CONNLABEL_BIN, connection_name); #database table for connectionlable: CREATE TABLE ConnectionLabel (LabelEnable INT, LabelTimeout INT, LabelPosition TEXT); INSERT INTO ConnectionLabel VALUES(0,5,'Bottom Centre'); Connection label will not be supported in SDKVM 1.0.0 logged in user On an appliance the logged in user name is read from the system table of the data base (field name: LoggedInUserName). On the SDKVM we will determine the currently logged in user by reading the ~/SDKVM/system_level_settings file (see) http enable used by legacy products for a non-secure instance of the webservice. On the appliance this data is read from the System table. The field name is HttpEnable This is not used on the SDKVM. We should never enable the non-secure instance of the webservice mouse_keyboard_timeout Used to determine the period of inactivity that must occur for the ownership of keyboard and mouse to be acquired by a new client. On an transmitter appliance this is read from the system table of the data base (field name:  MouseKeyboardTimeout) On the SDKVM this setting is not relevant. rx zone On an appliance the logged in user name is read from the system table of the data base (field name: Zone). We need to understand the concept of zones more fully before we can determine whether this is relevant on the SDKVM bonded group On an appliance the bonded group is read from the system table of the data base (field name:  BondedGroup). This indicates the bonded group to which a receiver appliance belongs On the SDKVM this setting will be stored in ~/SDKVM/system_level_settings (see)"},{"location":"architecture/Summary/Contents/webservice_restapi/#capabilities-on-appliances","title":"Capabilities on Appliances","text":"Capabilities format Values on 4K TX Values on 4K RX Values on 2K TX Values on 2K RX Values on Corrib and Deel TX Values on Corrib and Deel RX Values on SDKVM http_enable JSON - \"0, 1\" - \"0, 1\" - \"0, 1\" - rx_scaling JSON - \"0, 1\" - - - - - power mode JSON - - - - - \"0, 1\" - dual_stream_suported JSON true - false - false - - video_quality JSON \"0,1,2,3,4\" - \"0,1,2,3,4\" - \"0,1,2,3,4\" - - video_source_optimisation(SINGLE HEAD) JSON \"0,1,2,3,4\" - \"0,1,2,3,4\" - \"0,1,2,3,4\" - - hid JSON \"0,1,2,3,4\" - \"0,1,2,3,4\" - \"0,1,2,3,4\" - - mouse_keyboard_timeout JSON \"0,1,2,3,4\" - \"0,1,2,3,4\" - \"0,1,2,3,4\" - - head_1_edid JSON \"0,1,2,3,4\" - \"0,1,2,3,4\" - \"0,1,2,3,4\" - - head_2_edid(DUAL HEAD) JSON \"0,1,2,3,4\" - \"0,1,2,3,4\" - \"0,1,2,3,4\" - - audio_source JSON \"0,1\" - \"0,1\" - \"0,1\" - -"},{"location":"architecture/Summary/Contents/webservice_restapi/#the-end-point-is-common-for-both-tx-and-rx-appliance","title":"The End Point is common for both TX and RX Appliance","text":""},{"location":"architecture/Summary/Contents/webservice_restapi/#end-point","title":"End point:","text":"<p>https://IP:8888/system/capabilities</p>"},{"location":"architecture/Summary/Contents/webservice_restapi/#end-point-api-url","title":"End point api URL","text":"<p>ulfius_add_endpoint_by_val(&amp;instance, \"GET\", PREFIX, \"/capabilities\", &amp;auth_func, &amp;_user_data, \"auth_basic\", &amp;ws_get_capabilities, &amp;_user_data);</p>"},{"location":"architecture/Summary/Contents/webservice_restapi/#postman-endpoint-responses-for-both-2k-pe-tx-rx","title":"POSTMAN EndPoint responses for both  2K PE TX &amp; RX","text":""},{"location":"architecture/Summary/Contents/webservice_restapi/#2k-pe-rx-capability-endpoint-response","title":"2K PE RX capability endpoint response","text":"<ul> <li>URL:GET https://10.231.132.22:8888/capabilities</li> <li>Result:200</li> <li>Response Body:{\"http_enable\":\"0,1\"}</li> </ul>"},{"location":"architecture/Summary/Contents/webservice_restapi/#2k-pe-tx-capability-endpoint-response","title":"2K PE TX capability endpoint response","text":"<ul> <li>URL:GET https://10.231.132.23:8888/capabilities</li> <li>Result:200</li> <li>Response Body:{\"dual_stream_supported\":false,\"video_quality\":\"0,1,2,3,4\", \"video_source_optimisation\":\"0,1,2,3,4\",\"hid\":\"0,1,2,3,4,5\", \"mouse_keyboard_timeout\":\"0,1,2,3,4,5\",\"head_1_edid\":\"0,1,2,3,4,5\",\"audio_source\":\"0\"}</li> </ul>"},{"location":"architecture/Summary/Contents/webservice_restapi/#capability-endpoints-for-sdkvm","title":"Capability Endpoints for SDKVM","text":"<p>Based on the current set of capabilities returned from an appliance I think we should return the following:</p> <p><pre><code>Response Body:{\"http_enable\":\"0\"}\n</code></pre> or perhaps</p> <p><pre><code>Response Body:{}\n</code></pre> as we do not support http_enable or any of the other parameters.</p> <p>I think we may have to agree with the Boxilla team what a suitable set of capabilities might be for the SDKVM. This would require expanding the current list. Ideally we want this to summarise the actual end-points we will support.</p>"},{"location":"architecture/Summary/Contents/webservice_restapi/#how-the-sdkvm-will-be-managed-by-boxilla","title":"How the SDKVM will be managed by Boxilla","text":"<p>A list of the operations that boxilla will do to manage the device, The operations that affect the appliances are on step 3 (ssh session), the reset operations are fine for now:</p> <pre><code>1.  Internal boxilla local prechecks\n  - get device type (RX/TX) from spn (what is spn?)\n  - check if zone is enabled:\n    -- get zone xml file and checksum (Is this internal to Boxilla?)\n  - check license limit:\n    -- reject if license limit reached (I assume internal check)\n  - check if appliance already been managed: (Is this an internal database check)\n    -- reject if appliance already been managed (How is the rejection communicated. Is it just on Boxilla screen)\n  - check appliance name isn't taken\n     -- reject if name is take\n2. send manage request to smart proxy (DiscoveryManager) (I assume internal Boxilla check only)\n3. start ssh session to appliance\n  - check compatibility: `cat /COMPATIBILITY |cut -c 23-`\n    -- or `cat /COMPATIBILITY` for emerald devices\n    == example output: Compatibility-Tech2:0x02 (You will be getting new values here for SDKVM. We will provide them, but you will need to retrieve them over REST at https://IP:8888/version called compatability and add a default hex string of 0x02, but REST will not be running because the device is not yet managed.)\n  - create Active record (insert into in boxilla DB)\n  - for TX:\n    -- check the license limit\n    -- create default connection if not reach the limitation\n  - create xml database for connection lists\n  - upload xml to apliance (cloudDataA.xml) (Currently over scp, moving to file upload. Is file upload working for you now?)\n  - restart GUI on appliance: (How to do you do this?\")\n    -- start ssh session (Did you not already start it earlier?)\n    -- check /usr/bin/libsystem_cli exists (it will not exist on the SDKVM so this check will not be valid)\n    -- get appliance version: cat /VERSION (You must fetch this over REST:  https://IP:8888/version instead. but REST will not be running until it is in a managed state!)\n    -- for 4K devices, obtain multicast IP and master port:\n      -- libsystem_cli --db --get multicast-ip (We will need to fetch this over REST)\n      -- libsystem_cli --db --get master-port (We will need to fetch this over REST)\n      -- update Active record to include multicast IP and port\n    -- kill GUI: /usr/bin/killall cloudgui (This should not be required. We do not want Boxilla killing things on the SDKVM. We do need something on the SDKVM to dtect it is managed and then restart the OSD in managed mode, but for this it would need necessary user and connection files in json format)\n  - update appliance if upgrade required  (?) (Is this automatic?)\n  - reassign zone for RX if zone specified:  REST call /control/configuration/zone\n  - upload zone xml file if required \n</code></pre>"},{"location":"architecture/Summary/Contents/webservice_restapi/#compatability-string-details","title":"Compatability String Details","text":""},{"location":"architecture/Summary/Contents/webservice_restapi/#sdkvm","title":"SDKVM","text":"<ul> <li>A compatability.txt file will exist in /home/snuc/info/compatability.txt. For the SDKVm this will have the value of 0x02.</li> </ul>"},{"location":"architecture/Summary/Contents/webservice_restapi/#current-appliance-values","title":"Current Appliance Values","text":"<pre><code>- Reading below values from EEPROM based on appliance type:\n1.typedef enum _TECHNOLOGY { UNKNOWN_PRODUCT, BARROW = 0x1, CORRIB = 0x2, DEEL = 0x3, EMERALD_SE = 0x4, EMERALD =0x5, EMERALD_ZU= 0x8, EMERALD_PE = 0x9 } Technology;\n\n2.typedef enum _PRODUCT_TYPE { UNKNOWN_PRODUCT_TYPE, RECEIVER, TRANSMITTER } ProductType;\n\n3.typedef enum _PRODUCT_CONFIG { UNKNOWN_PRODUCT_CONFIG, SINGLE_HEAD, DUAL_HEAD } ProductConfig;\n\n4.typedef enum _PRODUCT_DISPLAY { UNKNOWN_PRODUCT_DISPLAY, DVI, DISPLAY_PORT, HDMI, VGA } ProductDisplay;\n\n5. typedef enum _PRODUCT_BRAND { UNKNOWN_PRODUCT_BRAND, CLOUDIUM = 0x1, BLACK_BOX = 0x2 } ProductBrand;\n6. sw_compat: will be reading reading from compatability file as a integer\n7. e2_revision: On the SDKVM this has no significance so for now we will return a hardcoded value of 15.\n8. serial and mpn values are character strings only\n</code></pre>"},{"location":"architecture/Summary/Contents/webservice_restapi/#proposed-sdkvm-values","title":"Proposed SDKVM Values","text":"<pre><code>.typedef enum _TECHNOLOGY { UNKNOWN_PRODUCT, BARROW = 0x1, CORRIB = 0x2, DEEL = 0x3, EMERALD_SE = 0x4, EMERALD =0x5, EMERALD_ZU= 0x8, EMERALD_PE = 0x9, DESKVUE = 0x10 } Technology; - We will introduce a new value called DESKVUE = 0x10 \n\n2.typedef enum _PRODUCT_TYPE { UNKNOWN_PRODUCT_TYPE, RECEIVER, TRANSMITTER, SDKVM } ProductType; - We will introduce a new value called SDKVM = 0x03\n\n3.typedef enum _PRODUCT_CONFIG { UNKNOWN_PRODUCT_CONFIG, SINGLE_HEAD, DUAL_HEAD, MULTI_HEAD } ProductConfig; -  We will introduce a new value called MULTI_HEAD  = 0x03\n\n4.typedef enum _PRODUCT_DISPLAY { UNKNOWN_PRODUCT_DISPLAY, DVI, DISPLAY_PORT, HDMI, VGA, HDMI_DP} ProductDisplay; -  We will introduce a new value called HDMI_DP  = 0x05\n\n5. typedef enum _PRODUCT_BRAND { UNKNOWN_PRODUCT_BRAND, CLOUDIUM = 0x1, BLACK_BOX = 0x2 } ProductBrand; -  We will use BLACK_BOX = 0x2 \n</code></pre>"},{"location":"architecture/Summary/Contents/webservice_restapi/#logoff-or-terminate-connection-on-appliance-side","title":"Logoff or terminate connection on appliance side","text":""},{"location":"architecture/Summary/Contents/webservice_restapi/#appliance","title":"Appliance","text":"<pre><code>Logoff:\n1.Kill the apps:vncviewer,vms,bbfreerdp,xterm\n2.\"touch /tmp/guiBootCount.txt\"); // required in order to prevent auto login user from being logged in\n3.Removing logAfterConnect.xml, startapp.sh,prevConnection.sh WAS_CONNECTED files to remove connection details\n4.kill the gui\n\nTerminate connection:\n1.Kill the apps:vncviewer,vms,bbfreerdp,xterm\n2.Remove preset switch mode file\n</code></pre>"},{"location":"architecture/Summary/Contents/webservice_restapi/#sdkvm_1","title":"SDKVM","text":"<p>On the SDKVM the Log-off REST API should call a script /home/snuc/SDKVM/scripts/log_off.sh Note Narayana, how does the current scheme work. Do we pass any arguments?</p>"},{"location":"architecture/Summary/Contents/webservice_restapi/#how-to-run-alerts-cli-on-the-sdkvm","title":"How to run alerts cli on the SDKVM:","text":"<p>resp api internal posting:</p> <p><pre><code>        /usr/local/bin/stats_cli -alert alert_category alert_condition alert_compoenet alert_command alert_status ctx1 ctx2 ctx3 ctx3 ctx4\n        /usr/local/bin/stats_cli -video_facts\n        /usr/local/bin/stats_cli -audio_facts\n        /usr/local/bin/stats_cli -system_facts\n        /usr/local/bin/stats_cli -usb_facts\n        /usr/local/bin/stats_cli -analog_audio_facts\n        /usr/local/bin/stats_cli -flush_authentication_stats  successful_logins_value failed_logins_value manager_unreachable_value\n        /usr/local/bin/stats_cli -connection_control  connection_in_use_value connection_not_reachable_value connection_refused_value connectio\n</code></pre> Alerts variables which needs to be passed based on alert type</p> <pre><code>typedef enum { CRITICAL, WARNING, INFO } alert_category;\ntypedef enum { METRIC, TRAIT, AVAILABILITY, OPERATION, SEVERITY, MONITOR } alert_condition;\ntypedef enum { SUCCESS, FAILED, INPROGRESS, CANCELLED, TIMEOUT, ONLINE } alert_status;\ntypedef enum { USER, APPLIANCE, CONNECTION, ETHERNET } alert_component;\ntypedef enum { LOGIN, AUTO_LOGIN, MANUAL_LOGIN, POST_CONNECT_LOGIN, MANUAL_LOGOUT, GUI_TIMEOUT_LOGOUT, REBOOT, UPGRADE,\n               START, DISCONNECT, RDP_CONNECTION, ETHERNET_LINK } alert_command;\n</code></pre>"},{"location":"architecture/Summary/Contents/webservice_restapi/#alerts","title":"Alerts:","text":""},{"location":"architecture/Summary/Contents/webservice_restapi/#alert-1","title":"Alert 1:","text":"<p>Indicate from where they are sent:</p> <p><pre><code>tatsmonitor_toe.c -&gt; network_link_health_check -&gt; if network fault detected\n\nstatistcs_send_json_alert_object(WARNING, MONITOR, ETHERNET, ETHERNET_LINK, ONLINE,\n                             alert_msg,  ctx_1, ctx_2, ctx_3, \"\");\n</code></pre> Indicate where they receive or generate the required information:</p> <p>It copies in to internal queue and those data will be sent to boxilla when they ask request</p> <p>Clarify the format of any data sent:</p> <pre><code>context messsage:\n#define NETWORK_LINK_FAULTS_THRESHOLD 3\nsnprintf(alert_msg, sizeof(alert_msg),\n                 \"Ethernet link errors detected on port %u. \"\n                 \"May indicate faulty network cable connection.\",\n                 active_mac);\nsnprintf(ctx_1, sizeof(ctx_1), \"port: %u\", active_mac);\nsnprintf(ctx_2, sizeof(ctx_2), \"errors: %u\", network_link_faults[active_mac]);\nsnprintf(ctx_3, sizeof(ctx_3), \"threshold: %u\", NETWORK_LINK_FAULTS_THRESHOLD);\n</code></pre>"},{"location":"architecture/Summary/Contents/webservice_restapi/#alert-2","title":"Alert 2:","text":"<p>Indicate from where they are sent:</p> <p>statsmonitor_toe.c -&gt; toe_connection_stats_populate -&gt; if retry rate is &gt; TOE_TX_RETRY_RATE_THRESHOLD</p> <p>statistcs_send_json_alert_object(WARNING, MONITOR, CONNECTION, RDP_CONNECTION, ONLINE,                                      alert_msg, ctx_1, ctx_2, ctx_3, \"\");</p> <p>Indicate where they receive or generate the required information: It copies in to internal queue and those data will be sent to boxilla when they ask request</p> <p>Clarify the format of any data sent:</p> <pre><code>context messsage:\nsnprintf(alert_msg, sizeof(alert_msg),\n                         \"TCP re-transmissions at %u%% on connection ct%02x. \"\n                         \"May indicate network congestion or receiver saturation.\",\n                         retry_rate, cid);\n\nsnprintf(ctx_1, sizeof(ctx_1), \"channel: ct%02x\", cid);\nsnprintf(ctx_2, sizeof(ctx_2), \"re-transmissions: %u%%\", retry_rate);\nsnprintf(ctx_3, sizeof(ctx_3), \"threshold: %u%%\", TOE_TX_RETRY_RATE_THRESHOLD);\n</code></pre>"},{"location":"architecture/Summary/Contents/webservice_restapi/#alert-3","title":"Alert 3:","text":"<p>Indicate from where they are sent: statsmonitor_toe.c -&gt; process_netlink_event -&gt;new netlink event available to read from the socket</p> <p>statistcs_send_json_alert_object(INFO, OPERATION, ETHERNET, ETHERNET_LINK, SUCCESS,                      alert_msg, active_port, active_phy_status,                      standby_phy_status, standby_lacp_status);</p> <p>Indicate where they receive or generate the required information: It copies in to internal queue and those data will be sent to boxilla when they ask request</p> <p>Clarify the format of any data sent:</p> <p>context messsage:</p> <pre><code>snprintf(alert_msg, sizeof(alert_msg),\n         \"%s network link state changed: \"\n         \"active_port=%s, active_phy_status=%s, standby_phy_status=%s, standby_lacp_status=%s\",\n         device, active_port, active_phy_status, standby_phy_status, standby_lacp_status);\nactive_port = (active_mac == 1) ? \"1\" : \"0\";\n    active_phy_status = (link_status[active_mac] == 1) ? \"up\" : \"down\";\n    if (num_macs &gt; 1) {\n        unsigned standby_mac = active_mac ^ 1;\n\n        standby_phy_status = (link_status[standby_mac] == 1) ? \"up\" : \"down\";\n\n        if (! lacp_enabled)\n            standby_lacp_status = \"disabled\";\n        else if (! lacp_detected[standby_mac])\n            standby_lacp_status = \"undetected\";\n        else if (! lacp_timedout[standby_mac])\n            standby_lacp_status = \"ok\";\n        else\n            standby_lacp_status = \"timedout\";\n    }\n</code></pre>"},{"location":"architecture/Summary/Contents/webservice_restapi/#alert-4","title":"Alert 4:","text":"<p>Indicate from where they are sent: on_logonButton_clicked failure case OSD statistcs_send_json_alert_object(WARNING, OPERATION, USER, MANUAL_LOGIN, FAILED, \"OSD_LOGIN\", username.toLatin1().data(),\"\",\"\",\"\")</p> <p>Indicate where they receive or generate the required information: It copies in to internal queue and those data will be sent to boxilla when they ask request</p> <p>Clarify the format of any data sent: refer first point</p>"},{"location":"architecture/Summary/Contents/webservice_restapi/#alert-5","title":"Alert 5:","text":"<p>Indicate from where they are sent: on_logonButton_clicked sucess case OSD: statistcs_send_json_alert_object(INFO, OPERATION, USER, MANUAL_LOGIN, SUCCESS, \"OSD_LOGIN\", username.toLatin1().data(), \"\", \"\", \"\");</p> <p>Indicate where they receive or generate the required information: It copies in to internal queue and those data will be sent to boxilla when they ask request</p> <p>Clarify the format of any data sent: refer first point</p>"},{"location":"architecture/Summary/Contents/webservice_restapi/#alert-6","title":"Alert 6:","text":"<p>Indicate from where they are sent: checkLoginAfterConnection and when detect cursor OSD: statistcs_send_json_alert_object(INFO, OPERATION, USER, AUTO_LOGIN, SUCCESS, \"OSD_LOGIN\", usr_name, \"\", \"\", \"\");</p> <p>Indicate where they receive or generate the required information: It copies in to internal queue and those data will be sent to boxilla when they ask request</p> <p>Clarify the format of any data sent: refer first point</p>"},{"location":"architecture/Summary/Contents/webservice_restapi/#alert-7","title":"Alert 7:","text":"<p>Indicate from where they are sent: createPowreOffMenu OSD:  statistcs_send_json_alert_object(INFO, OPERATION, USER, MANUAL_LOGOUT, SUCCESS, \"OSD_LOGOUT\", usr_name, \"\", \"\", \"\");</p> <p>Indicate where they receive or generate the required information: It copies in to internal queue and those data will be sent to boxilla when they ask request</p> <p>Clarify the format of any data sent: refer first point</p>"},{"location":"architecture/Summary/Contents/webservice_restapi/#alert-8","title":"Alert 8:","text":"<p>Indicate from where they are sent: guiTimerTimeout OSD:  statistcs_send_json_alert_object(INFO, OPERATION, USER, GUI_TIMEOUT_LOGOUT, SUCCESS, \"OSD_LOGOUT\", usr_name, \"\", \"\",       \"\");</p> <p>Indicate where they receive or generate the required information: It copies in to internal queue and those data will be sent to boxilla when they ask request</p> <p>Clarify the format of any data sent: refer first point</p>"},{"location":"architecture/Summary/Contents/webservice_restapi/#alert-9","title":"Alert 9:","text":"<p>Indicate from where they are sent: detectCurUsr OSD statistcs_send_json_alert_object(INFO,OPERATION,USER,POST_CONNECT_LOGIN,SUCCESS,\"OSD_LOGIN\",usr_name,\"\",\"\",\"\");</p> <p>Indicate where they receive or generate the required information: It copies in to internal queue and those data will be sent to boxilla when they ask request</p> <p>Clarify the format of any data sent: refer first point</p>"},{"location":"architecture/Summary/Contents/webservice_restapi/#alert-10","title":"Alert 10:","text":"<p>Indicate from where they are sent: detectCurUsr (if auto login user name exists)  OSD:statistcs_send_json_alert_object(INFO,OPERATION,USER,AUTO_LOGIN,SUCCESS,\"OSD_LOGIN\",usr_name,\"\",\"\",\"\");</p> <p>Indicate where they receive or generate the required information: It copies in to internal queue and those data will be sent to boxilla when they ask request</p> <p>Clarify the format of any data sent: refer first point</p>"},{"location":"architecture/Summary/Contents/webservice_restapi/#alert-11","title":"Alert 11:","text":"<p>Indicate from where they are sent: sendlogoff_alret during poweroff button statistcs_send_json_alert_object(INFO,OPERATION,USER,MANUAL_LOGOUT,SUCCESS,\"OSD_LOGOUT\",usr_name,\"\",\"\",\"\");</p> <p>Indicate where they receive or generate the required information: It copies in to internal queue and those data will be sent to boxilla when they ask request</p> <p>Clarify the format of any data sent: refer first point</p>"},{"location":"architecture/Summary/Contents/webservice_restapi/#alert-12","title":"Alert 12:","text":"<p>Indicate from where they are sent: gui timeout alert statistcs_send_json_alert_object(INFO,OPERATION,USER,GUI_TIMEOUT_LOGOUT,SUCCESS,\"OSD_LOGOUT\",usr_name,\"\",\"\",\"\");</p> <p>Indicate where they receive or generate the required information: It copies in to internal queue and those data will be sent to boxilla when they ask request</p> <p>Clarify the format of any data sent: refer first point</p>"},{"location":"architecture/Summary/Contents/webservice_restapi/#alert-13","title":"Alert 13:","text":"<p>Indicate from where they are sent: EQ_EVENT_CLIENT_SIDE_READY event from connection manager statistcs_send_json_alert_object(INFO,             OPERATION,CONNECTION,             START,             SUCCESS,\"New Connection\",client_domain_key_string,client-&gt;hostname,\"\",\"\");</p> <p>Indicate where they receive or generate the required information: It copies in to internal queue and those data will be sent to boxilla when they ask request</p> <p>Clarify the format of any data sent: refer first point</p>"},{"location":"architecture/Summary/Contents/webservice_restapi/#alert-14","title":"Alert 14:","text":"<p>Indicate from where they are sent: EQ_EVENT_PEER_TERMINATED event from connection manager statistcs_send_json_alert_object(INFO,             OPERATION,CONNECTION,             START,             SUCCESS,\"New Connection\",client_domain_key_string,client-&gt;hostname,\"\",\"\");</p> <p>Indicate where they receive or generate the required information: It copies in to internal queue and those data will be sent to boxilla when they ask request</p> <p>Clarify the format of any data sent: refer first point</p>"},{"location":"architecture/Summary/Contents/webservice_restapi/#upgrade-process-on-sdkvm","title":"Upgrade process on SDKVM","text":"<ul> <li>Get disk space before starting upgrade. The end point to be used is  (see)</li> <li>Upload image file using following endpoint \"https://IP:8888/control/largefileupload\"(see), if space is available</li> <li>start upgrade if image file uploaded correctly and the end point link is (see)</li> <li>check upgrade status if upgrade started, the end point link is (see)</li> <li>Remove uprade image files once the upgrade is done, the end point link is (see)</li> </ul>"},{"location":"architecture/Summary/Contents/webservice_restapi/#current-apppliance-login-implementation","title":"Current Apppliance Login Implementation","text":""},{"location":"architecture/Summary/Contents/webservice_restapi/#user-log-in-workflow-on-appliance","title":"User log in workflow on appliance","text":"<ul> <li>OSD-&gt;on_logonButton_clicked: username and password</li> <li>OSD--&gt;on_logonButton_clicked: a) if device is in managed state, copies CloudDataA.xml to secondary file CloudDataB.xml</li> <li>OSD--&gt;on_logonButton_clicked: b) check the checksum of appliance and boxilla xml using ssh</li> <li>OSD--&gt;on_logonButton_clicked: c) get new clouddata xml file from Boxilla if checksum not matched using ssh</li> <li>on_logonButton_clicked-&gt;authenticateviaxml: credentials validation</li> <li>authenticateviaxml--&gt;check login:Get the username, password, privilege and AD from xml based on keys</li> <li>authenticateviaxml--&gt;check login:Send manual login success alert and authentication stats, if device is safemode,and username,password is matched in xml file along with privilege is Administrator</li> <li>authenticateviaxml--&gt;check login:Send manual login failure alert and authentication stats,if device is safemode,and either of username and password is not matched in xml or privilege is not  Administrator</li> <li>authenticateviaxml--&gt;check login:Send manual login success alert and authentication stats,if device is not safemode and username,password are matched in xml along with ad user is false</li> <li>authenticateviaxml--&gt;check login:Send manual login failure alert and authentication stats,if device is not safemode,and either of username and password is not matched in xml along with ad user is false</li> <li>authenticateviaxml--&gt;check login:check authenticationViaAD,if device is not safemode and username is matched in xml along with ad user is true</li> <li>on_logonButton_clicked-&gt;authenticationViaAD:ad user validation</li> <li>on_logonButton_clicked--&gt;authenticationViaAD:send ad login request to boxilla</li> <li>on_logonButton_clicked--&gt;authenticationViaAD:get ad user auth_status request until auth status is OK from boxila if ad login request is OK</li> <li>on_logonButton_clicked--&gt;authenticationViaAD:copies CloudDataA.xml to secondary file CloudDataB.xml once ad auth status is OK</li> <li>on_logonButton_clicked--&gt;authenticationViaAD:check the checksum of appliance and boxilla xml using ssh</li> <li>on_logonButton_clicked--&gt;authenticationViaAD:get new clouddata xml file from Boxill if checksum not matched using ssh</li> <li>on_logonButton_clicked--&gt;authenticationViaAD:send ad auth complete to boxilla once xml validation done</li> <li>on_logonButton_clicked--&gt;authenticationViaAD:Send manual login success alert and authentication stats after ad authentication sucess</li> <li>on_logonButton_clicked--&gt;authenticationViaAD:logs the error if ad login request or ad userauth_status or ad auth complete or xml validation failed</li> </ul>"},{"location":"architecture/Summary/Contents/webservice_restapi/#proposal-for-login-process-on-the-sdkvm","title":"Proposal for login process on the SDKVM","text":""},{"location":"architecture/Summary/Contents/webservice_restapi/#static-user-scenario","title":"Static User Scenario","text":"<ol> <li>OSD-&gt;flutter:User enters username and password on the OSD</li> <li>OSD--&gt;on_logonButton_clicked:<ul> <li>(a) if device is managed state the existing users.json file is copied to users_backup.json. The OSD presents an indication that it is checking credentials. Once the file has been downloaded the webservice logic will send an MQTT message to the OSD indicating that the users.json is now available for validation of the user's credentials.</li> <li>(b) the SDKVM then checks the checksum of this file (users.json)against the checksum of the Boxilla version of the file (a new Boxilla endpoint will be provided for this)</li> <li>(c) If the checksums differ then the SDKVM will download the current Boxilla version and overwrite the local users.json version.</li> </ul> </li> <li>on_logonButton_clicked-&gt;authenticateviajson: After the file has been downloaded the credentials are verified.</li> <li>authenticatevijson--&gt;check login: If sucessful then the OSD sends a manual login success alert using the webservice CLI</li> <li>authenticateviajson--&gt;check login: If unsucessful then the OSD will send a manual login failure alert and authentication stats using the webservice CLI</li> </ol>"},{"location":"architecture/Summary/Contents/individual_inactivity_timers/individual_inactivity_timers_hld/","title":"Individual Inactivity timers (managed mode) HLD","text":""},{"location":"architecture/Summary/Contents/individual_inactivity_timers/individual_inactivity_timers_hld/#references","title":"References","text":"<p>Notes to the Authors - (Delete explanatory text from final approved version)</p> <p>Include references to any relevant documentation here. For an architectural document we would - at a minimum - expect a reference to the Marketing Requirements. Any Feature Analysis documents or wiki entries for workshop minutes or notes should also be referenced or snapshots included if possible so as making the document definitive. Referencing links must be done with care as they are uncontrolled and it is never a good idea to mix that with a controlled document that must be specific as it reflects an agreement between the technical parties and or customers through its reference to marketing requirements etc.. The references included in this section of the template are for reference only and should be replaced as appropriate in each specific instance.</p> <ul> <li>Marketing Requirements https://bboxjira.atlassian.net/wiki/spaces/EM/pages/1230700564/Emerald+4K-+6.0</li> <li>ENG-0008-026 4K/2K Interoperability Analysis</li> <li>ENG-0008-025 4K/2K Architectural Impact</li> <li>REST API: https://bbweb.blackbox.com/sites/Limerick/Engineering/SoftwareEmbedded/ENG-0005-020.docx</li> </ul>"},{"location":"architecture/Summary/Contents/individual_inactivity_timers/individual_inactivity_timers_hld/#terms-and-definitions-used-in-blackbox","title":"Terms and Definitions used in Blackbox","text":"<p>Notes to the Authors \u2013 (Delete this explanatory text from final approved version)</p> <p>This section will include Black Box terms and Definitions; more general technology definitions need not be included here. They can, if required for a specific technology impact study, be added but one should exercise common sense and only define the technology terms that are relevant to the feature under consideration. The table of terms included in this section of the template are for reference only and should be replaced as appropriate in each specific instance.</p> Term Definition CLU Image A optimized encrypted file format used for 2K appliance software images. Decoder See Receiver Encoder See Transmitter FIT Image A optimized encrypted file format used for 4K appliance software images. Municast The use of multiple individual TCP streams to share a video from a single transmitter to multiple receivers Multicast The use of an individual Multicast UDP stream to share a video from a single transmitter to multiple receivers. Blackbox uses reliable multicast so that any dropped frames are resent and no data loss occurs. Pixel Perfect Mode The original scheme used by 4K products where the entire frame of the source video was captured continuously and sent with compression to the decoder. RFX RemoteFX Codec Extension developed by Microsoft which uses a lossy image codec to encode screen images with efficient and effective compression. This is the lossy scheme used in Blackbox products. Reciever A Blackbox appliance that receives and displays a video stream. A receiver is also referred to as a client or decoder. RPU Real Time Processing Unit. The Zynq Ultrascale+ MPSoC features two A5 RPUs. In our 4K products one of these is used for Display Port functionality using IP provided by Xilinx. The second on the encoder side acts a video processing feed between FPGA and TOE Shared Mode A generic term used in Blackbox to describe schemes that allow more than one receiver view the video source from a transmitter. See Municast and Multicast. Tile Differencing Mode A lossless scheme used to reduce bandwidth; only tiles (portions of the screen) that change are sent from encoder to decoder. TOE TCP Offload Engine: A hardware based TCP stack used to accelerate the transmission of data. This is essential in high bandwidth, low latency transmission of video and audio. Technical Debt Technical Debt is a concept in software development that reflects the implied cost of additional rework caused by choosing an easy (limited) solution now instead of using a better approach that would take longer. Transmitter A Blackbox appliance that captures and transmits a video from a source. A transmitter is also referred to as a server or encoder. Video Source A source of input for a Transmitter, normally the DVI or Display Port output of a PC. Table 1 Terms and Definitions"},{"location":"architecture/Summary/Contents/individual_inactivity_timers/individual_inactivity_timers_hld/#overview","title":"Overview","text":"<p>Notes to the Authors \u2013 (Delete this explanatory text from final approved version)</p> <p>In this section you should provide a brief summary of the feature or Functional Area under consideration and how it is changing through the proposed work. Detail in specific terms what this feature is doing and what impact will it have on the existing design of the relevant functional area. Some guidelines:</p> <ul> <li> <p>References any Architectural impact studies relevant to this feature.</p> </li> <li> <p>What products are impacted by the design change?</p> </li> <li> <p>Provide a top level description of the existing design and summarise the impact to the current design of this feature or change?</p> </li> </ul> <p>This feature provide the ability to configure the OSD inactivity and connection inactivity timers applicable to individual Receiver on managed domain via the OSD and later from Boxilla. To provide OSD inactivity and connection inactivity timers applicable to individual Receiver on managed domain new \u201cLocal\u201d timers configuration introduced. The user will be able to select which timer configurations to apply on managed Receiver \u2013 Global or Local. The feature will not affect:</p> <ul> <li> <p>Existing (Global \u2013 configurable only from Boxilla) OSD inactivity and Connection inactivity timers on managed Receivers;</p> </li> <li> <p>Timer settings on unmanaged Receivers.</p> </li> </ul> <p>This document describe only design changes applicable on Receiver</p> <ul> <li> <p>Design changes for Boxilla are out of scope of this document;</p> </li> <li> <p>The design changes made on assumption that OSD inactivity and Connection inactivity timer configuration changes applicable together.</p> </li> </ul>"},{"location":"architecture/Summary/Contents/individual_inactivity_timers/individual_inactivity_timers_hld/#current-inactivity-timers-overview","title":"CURRENT INACTIVITY TIMERS OVERVIEW","text":"<p>Our system has 2 inactivity timers:</p> <ul> <li> <p>OSD Inactivity Timer;</p> </li> <li> <p>Connection Inactivity Timer.</p> </li> </ul> <p>Currently Inactivity timer settings are stored in XML database file.</p>"},{"location":"architecture/Summary/Contents/individual_inactivity_timers/individual_inactivity_timers_hld/#osd-inactivity-timer-description","title":"OSD INACTIVITY TIMER DESCRIPTION","text":"<p>The purpose of OSD Inactivity Timer in the case when configured to be ON (check box is ticked) is to monitor user activity within OSD application. If the system does not capture user activity within the specified amount of time, the system proceeds to log out user automatically. User activity within the system is defined as mouse and keyboard event detection. OSD Inactivity Timer valid settings are 2 to 60 minutes. In the case if OSD Inactivity Timer configured to be OFF (check box is unticked), user will never logout automatically no matter the period of inactivity. OSD Inactivity Timer value read from XML database file and applied in following cases:</p> <ul> <li> <p>User open \u2018Timers\u2019 page;</p> </li> <li> <p>user login success;</p> </li> <li> <p>user change timer settings;</p> </li> <li> <p>timer is activated and user activity is detected;</p> </li> <li> <p>user return to OSD after disconnection (enhanced osd only).</p> </li> </ul>"},{"location":"architecture/Summary/Contents/individual_inactivity_timers/individual_inactivity_timers_hld/#connection-inactivity-timer-description","title":"CONNECTION INACTIVITY TIMER DESCRIPTION","text":"<p>The purpose of Connection Inactivity Timer in the case when configured to be ON (check box is ticked) is to monitor user activity within RDP client application. If the system does not capture user activity within the specified amount of time, the system proceeds to RDP client termination and user returned to OSD automatically. User activity within the system is defined as mouse and keyboard event detection. Connection Inactivity Timer valid settings are 2 to 60 minutes. In the case if Connection Inactivity Timer configured to be OFF (check box is unticked), user not returned to OSD automatically no matter the period of inactivity. Connection Inactivity Timer value read from XML database file and applied in following cases:</p> <ul> <li> <p>User open \u2018Timers\u2019 page;</p> </li> <li> <p>Before connection initialization, Connection Inactivity Timer value passed as an argument to relevant client on connection initialization. The client processing of Connection Inactivity Timer value is out of scope of this document.</p> </li> </ul>"},{"location":"architecture/Summary/Contents/individual_inactivity_timers/individual_inactivity_timers_hld/#current-system-design","title":"CURRENT SYSTEM DESIGN","text":"<p>In managed system current design only Boxilla can configure Inactivity timers. Timer configurations implemented on Global level. Timer reconfigurations on individual receiver is not possible.  Boxilla can configure:</p> <ul> <li> <p>Inactivity timers with same timeouts for all receivers within domain;</p> </li> <li> <p>Inactivity timers disabled for all receivers within domain;</p> </li> <li> <p>OSD Inactivity timer disabled and Connection Inactivity timer enabled for 2 \u2013 60min for all receivers within domain;</p> </li> <li> <p>Connection Inactivity timer disabled and OSD Inactivity timer enabled for 2 \u2013 60min for all receivers within domain; OSD on managed Receivers restricting Inactivity timer settings. Figure below demonstrates timer values accessed from cloudgui in current managed system (blue lines \u2013 simplified path to access data). Timer values read accessed on user request (when user open \u201cTimers\u201d page). Timer\u2019s values modification restricted within cloudgui.</p> </li> </ul> <p>Figure 1 Current design Cloudgui Timers data access  Current system call sequence presented on diagram below</p> <p>Figure 2 Current design timers read </p> <p>In current design of managed system Timer settings presented to user as shown on picture below. Please note user cannot modify timer\u2019s settings.</p> <p>Figure 3 Current Design OSD Timers presentation to user </p>"},{"location":"architecture/Summary/Contents/individual_inactivity_timers/individual_inactivity_timers_hld/#design-detail","title":"Design Detail","text":""},{"location":"architecture/Summary/Contents/individual_inactivity_timers/individual_inactivity_timers_hld/#individual-timers-design","title":"INDIVIDUAL TIMER\u2019S DESIGN:","text":"<p>To configure the OSD inactivity and Connection inactivity timers that are applicable to individual Receiver on managed domain the new concept of Local timers introduction is needed.</p> <p>The information about Timer settings and Local timer values should be stored on individual Receivers and be accessible from OSD and Boxilla (as per requirements of this feature). In our current system we have SQLite database on each individual Receiver which is storing particular Receiver information and is not updated globally for domain. This is where new configurations and settings will be stored. New timer settings/values accessed by read/write requests from OSD (and Boxilla).</p>"},{"location":"architecture/Summary/Contents/individual_inactivity_timers/individual_inactivity_timers_hld/#main-design-impacts","title":"Main Design Impacts","text":""},{"location":"architecture/Summary/Contents/individual_inactivity_timers/individual_inactivity_timers_hld/#summary-of-individual-inactivity-timers-feature-on-receiver","title":"SUMMARY OF INDIVIDUAL INACTIVITY TIMERS FEATURE ON RECEIVER","text":"<p>Notes to the Authors \u2013 (Delete this explanatory text from final approved version)</p> <p>In this section you should provide a more detailed statement of the design impact on the current Functional Area.  Some guidelines:</p> <ul> <li>For Emerald appliances present the changes in terms of the receiver side impact and transmitter side impact if that is relevant. </li> <li>The purpose of this document is to allow an engineer provide sufficient detail about the proposed changes in advance of any code development work. The detail you provide here should be sufficient to allow other functional area owners review your proposals and also assess potential impacts to their areas of ownership. </li> <li>If the design impact is best illustrated with a diagram then include that showing the relevant level of detail; for example, show existing objects, classes, queues and messaging that may be impacted. Clearly identify any new elements through the use of colour to differentiate them.</li> <li>Try to assess all of the implications of the change you are proposing; for example:<ul> <li>Are new classes or objects being introduced? If so what is their role and how will they interact with existing objects and classes.</li> <li>Are there new threads or processes which this feature will require. If so, how do these relate to existing threads and processes?</li> <li>Does this feature require additional external libraries? Understand the following implications of introducing these libraries:<ul> <li>What is the license model associated with the library.</li> <li>What is the memory foot print and how does this impact the different product type\u2019s memory budgets.</li> </ul> </li> <li>Are the changes to error handling required for this feature? If so, clearly itemise the requirements.</li> <li>Does this feature require development of test software for validation?</li> <li>Are there specific directives you need to provide to the test and validation groups when this software goes to test.</li> </ul> </li> </ul> <p>Following aspects considered within Individual Inactivity timers (managed mode) design:</p> <ul> <li> <p>SQLite database changes: new timers values to be added and set to default values within SQLite database patch (version also to be modified);</p> </li> <li> <p>Upgrade process: </p> <ul> <li>SQLite database changes: new timers values to be added and set to default values within SQLite database patch (version also to be modified);<ul> <li>After first upgrade to version with individual timers support when system will reboot SQLite database will be patched to have new fields with default values;</li> </ul> </li> <li>Any subsequent upgrade SQLite database is not modified and timers values kept from previous version;</li> </ul> </li> <li> <p>Downgrade process:</p> <ul> <li>System downgrade to the version where Individual Inactivity timers not supported timer values remain in SQLite database, but not accessible.</li> </ul> </li> <li> <p>OSD changes:</p> <ul> <li>Add appropriate Timers Configurations on UI forms;</li> <li>On cloudgui load add global timers comparison between xml file and SQLite and if different update values in SQLite to values stored in xml;</li> <li>In managed mode add Timers Configurations read from SQLite database.</li> <li>In the case of error accessing Timers Configurations in SQLite database \u2018Global\u2019 timers configuration to be applied and \u2018Local\u2019 timers configuration should be disabled on UI</li> <li>In managed mode add Local OSD Inactivity and Local Connection Inactivity timers read from SQLite database.</li> <li>In managed mode add Timers Configurations write to SQLite database.</li> <li>In managed mode add Local OSD Inactivity and Local Connection Inactivity timers write to SQLite database.</li> <li>In managed mode Global OSD Inactivity and Global Connection Inactivity write to SQLite database and xml file should be restricted.</li> </ul> </li> <li> <p>RESTAPI changes: </p> <ul> <li>Add new Get commands;</li> <li>Modify existing Get commands;</li> <li>Add new Put commands</li> </ul> </li> <li> <p>Import/Export:</p> <ul> <li>This feature implementation does not modify XML database  file, therefore processes of Import/Export are not affected;</li> <li>Local timers not Exported/Imported from/to managed Receivers.</li> </ul> </li> <li> <p>Restore process: No changes needed. SQLite database removed on restore. On boot-up after restore default SQLite database created and patched.</p> </li> <li> <p>Diagnostics process: No changes needed. SQLite database extracted within Diagnostics process.</p> </li> </ul>"},{"location":"architecture/Summary/Contents/individual_inactivity_timers/individual_inactivity_timers_hld/#sqlite-database-changes","title":"SQLITE DATABASE CHANGES","text":"<p>Current SQLite database example is in the Appendix.</p> <p>Timer settings and Local timer values will be stored in SQLite database. The changes include 1 new record \u2013 \u201cTimers\u201d. \u201cTimers\u201d have 3 entries \u201cTimeoutConfiguration\u201d in Text format \u201cLocalOSDInactivity\u201d and \u201cLocalConnectionInactivity\u201d for value storage in int format (see table below).</p>"},{"location":"architecture/Summary/Contents/individual_inactivity_timers/individual_inactivity_timers_hld/#new-values-addition-to-sqlite-database","title":"New values addition to SQLite database:","text":"<p>Table 1 SQLite Timers table and values description</p> New table name New value name New value format Valid options Value description Timers TimeoutConfiguration Text \u201cglobal\u201d or \u201clocal\u201d \u201cTimeout configuration\u201d value is \u201cglobal\u201d the inactivity timers values to be read and applied from XML database file; \u201cTimeout configuration\u201d value is \u201clocal\u201d the inactivity timers values to be read and applied from SQLite database; Timers LocalOSDInactivity int 0, 2-60 \u201cLocal OSD inactivity timer\u201d value is 0 - OSD inactivity timer is disabled; \u201cLocal OSD inactivity timer\u201d value is between 2 and 60 - OSD inactivity timer is enabled for specified number of minutes; Timers LocalConnectionInactivity int 0, 2-60 \u201cLocal Connection inactivity timer\u201d value is 0 - OSD inactivity timer is disabled; \u201cLocal Connection inactivity timer\u201d value is between 2 and 60 - OSD inactivity timer enabled for specified number of minutes; <p>Default value settings</p> <p>Timeout configuration - \u201cglobal\u201d;</p> <p>Local OSD inactivity timer \u2013 0;</p> <p>Local Connection inactivity timer \u2013 0;</p> <p>The new default entries will be following:</p> <pre><code>CREATE TABLE Timers (TimeoutConfigurations TEXT, LocalOSDInactivity INT, LocalConnectionInactivity INT);\n\nINSERT INTO Timers VALUES('Global\u20190,0);\n</code></pre>"},{"location":"architecture/Summary/Contents/individual_inactivity_timers/individual_inactivity_timers_hld/#sqlite-database-versioning-handling","title":"SQLite database versioning handling","text":"<p>To add new tables and entries to SQLite database the patching process is used. SQLite database patches are stored in one designated place within our system and applied within system boot up process sequentially. SQLite database version checked on bootup and only patches with a higher version are applied. New patch rx_database_patch_1_8.sql addition required to the system within implementation. This patch will do following: </p> <ul> <li>SQLite database version will be updated to 1.8;</li> <li>Add Timers table (as described in section above);</li> <li>Set default values for Timers Table.</li> </ul>"},{"location":"architecture/Summary/Contents/individual_inactivity_timers/individual_inactivity_timers_hld/#sqlite-database-restore-to-factory-default","title":"SQLite database restore to factory default","text":"<p>Restore process: No changes needed. SQLite database removed on restore. On boot-up after restore default SQLite database created and patched.</p>"},{"location":"architecture/Summary/Contents/individual_inactivity_timers/individual_inactivity_timers_hld/#cloudgui-design-changes","title":"CLOUDGUI DESIGN CHANGES","text":"<p>Figure 4 Local Timers access general dataflow </p> <p>Diagram below demonstrates new simplified implementation flowchart of calls for timers read (blue lines \u2013 simplified path to access data)</p> <p>Figure 5 Cloudgui sequence of calls for timers read </p>"},{"location":"architecture/Summary/Contents/individual_inactivity_timers/individual_inactivity_timers_hld/#ui-timers-page-default-settings-on-managed-domain","title":"UI Timers Page Default Settings on Managed domain","text":"<p>OSD UI Timers page have default settings from initial timers development. The existing default values on managed domain are following:</p> <ul> <li>'OSD Inactivity Timer' chechbox = unchecked, Disabled </li> <li>'OSD Inactivity Timer' spinbox = 15, Disabled</li> <li>'Connection Inactivity Timer' chechbox = unchecked, Disabled </li> <li>'Connection Inactivity Timer' spinbox = 15, Disabled  </li> <li>'Apply' button = Disabled </li> </ul> <p>Note</p> <p>Inactivity timer values of spinboxes set to 15, Disabled does not correspond to value stored in database (database holds value \u20180\u2019). This value based on a user questionnaire from past, when timers were initially introduced into our design. Value \u201815\u2019 the most often set choice by users in case when the timer is active. </p> <p>To provide user presentation of new timer settings OSD UI Timers page default settings require modification. New default values are following:</p> <p>(New) 'Timers settings' label = enabled  (New) Radio button 'Global' = checked  (New) Radio button 'Local' = unchecked (Changed) 'Apply' button = Enabled</p> <p>\u201cTimers\u201d page is initially set to default values on cloudgui load within user login process and has dependency on user privilege. Only user with \u2018Administrator\u2019 privilege can reconfigure timers. User with \u2018Power user\u2019 privilege can only view Timers settings. For ordinary user \u2018Timers\u2019 page is not accessible.  The actual timer settings read and set on UI form when user request to open \u2018Timers\u2019 page.</p>"},{"location":"architecture/Summary/Contents/individual_inactivity_timers/individual_inactivity_timers_hld/#timer-configuration-access-within-cloudgui","title":"Timer configuration access within Cloudgui:","text":"<p>Additional timers read logic required when user change selection of Global/Local radio button to reflect currently saved OSD and Connection inactivity timer values from corresponding database.</p> <p>OSD inactivity timer values read require modifications to provide value corresponding to newly introduced settings. This include additional logic for Global/Local timer detection and corresponding value read. The following cases affected by this change:</p> <ul> <li>cloudgui load;</li> <li>User open \u2018Timers\u2019 page;</li> <li>user login success;</li> <li>user change timers settings;</li> <li>timer is activated and user activity is detected;</li> <li>user returned to OSD after connection (enhanced osd only).</li> </ul> <p>Connection inactivity timer value read require modifications to provide value corresponding to newly introduced settings. This include additional logic for Global/Local timer detection and corresponding value read. The following cases affected by this change:</p> <ul> <li>User open \u2018Timers\u2019 page;</li> <li>Just before connection initialized. Connection Inactivity Timer value is passed as an argument to relevant client on connection initialization. </li> </ul>"},{"location":"architecture/Summary/Contents/individual_inactivity_timers/individual_inactivity_timers_hld/#use-case-examples","title":"Use case examples","text":"<p>In this section is described step-by-step process of user actions on \u2018Timers\u2019 page with new timers configurations.</p> <p>Step 1: Following call sequence diagram is showing data access when user request to open \u2018Timers\u2019 page in the case when database values are default: </p> <p>Figure 6 Global Timers read with default values </p> <p>Example of cloudgui Timers Page with default settings presented in Figure below.</p> <p>Figure 7 Global Timer with default settings on OSD </p> <p>Figure above is showing concept of Global/Local timers with default settings presentation. Please note OSD and Connection Inactivity Timers are disabled when \u201cGlobal\u201d configurations are set, This is to protect OSD and Connection Inactivity Timers values update in xml file on managed domain.</p> <p>Please note the \u201cApply\u201d button is now available and user can save Timers configurations. New configurations saved in SQLite database only.  Step 2: Call sequence diagram below is showing case when user select Local option on the \u2018Timers\u2019 page UI form.</p> <p>Figure 8 Local Timers read with default values </p> <p>If user select Local option all fields on this page are enabled. The UI result of this user action shown on picture below.</p> <p>Figure 9 Local Timers selection with default values. </p> <p>Note: OSD and Connection timers checkboxes are unticked and therefore are disabled, in this case SQLite database both Local Timers values are 0.</p> <p>Step 3a: Should user now decide to save settings (hit \u2018Apply\u2019 button) following call sequence will take place: Diagram below demonstrates call sequence for \u2018Local\u2019 Timers write case with default values</p> <p>Figure 10 Local timers write with default values </p> <p>Step 3b: Diagram below is demonstrating call sequence for \u2018Local\u2019 Timers write case with modified values</p> <p>Figure 11 Local timers write with modified values </p> <p>Diagram below demonstrates flowchart for \u2018Local\u2019 Timers write case </p> <p>Figure 12 Cloudgui Timers write sequence </p> <p>Step 4: If now user will change his mind and select \u2018Global\u2019 radio button, following sequence calls performed (see diagram below):</p> <p>Figure 13 Global timers read on selection change </p> <p>Should user now decide to save settings (hit \u2018Apply\u2019 button) following call sequence will take place:</p> <p>Figure 14 Global timers write </p>"},{"location":"architecture/Summary/Contents/individual_inactivity_timers/individual_inactivity_timers_hld/#api-changes-or-changes-to-external-interfaces","title":"API Changes or changes to external interfaces","text":"<p>Notes to the Authors \u2013 (Delete this explanatory text from final approved version) Some guidelines:</p> <ul> <li>Does the proposed design change impact any existing APIs or external interfaces or does it propose any new APIs or interfaces? If so, please clearly state the impact so that the owners of that software can assess the impacts.</li> </ul>"},{"location":"architecture/Summary/Contents/individual_inactivity_timers/individual_inactivity_timers_hld/#restapi-changes","title":"RESTAPI CHANGES","text":"<p>Decision from 16/02/2023: Agreed with Boxilla team.</p> <p>To provide functionality for local Inactivity timers values read/write on requests from Boxilla RestAPI require following additions:  RestApi on RX add following GET calls: </p> <ul> <li> <p>GET_Timers_Config (add new)</p> <ul> <li> <p>Parameter: timers_config, osd_inactivity, connection_inactivity</p> </li> <li> <p>Format: char array, int, int</p> </li> </ul> </li> </ul> <p>RestApi on RX modify following GET calls:</p> <ul> <li> <p>GET_System_Capabilities (modification of existing call)</p> <ul> <li> <p>Parameters: timers_configuration, osd_inactivity, connection_inactivity</p> </li> <li> <p>Formats; \"global, local\", \"0,2-60\", \"0,2-60\".</p> </li> </ul> </li> <li> <p>GET_Version_info (modification of existing call)</p> <ul> <li> <p>Parameter: api_version; </p> </li> <li> <p>Format: char array </p> <ul> <li>Current version according document 1.0.10 to be changed to 1.0.11</li> </ul> </li> </ul> </li> </ul> <p>RestApi on RX add following PUT calls: </p> <ul> <li> <p>PUT_Timers_Config</p> <ul> <li> <p>Parameter: timers_config, osd_inactivity, connection_inactivity </p> </li> <li> <p>Format: char array, int, int</p> <ul> <li>Note: if timers_config ==\u201dglobal\u201d only timers_config will be modified in SQLite database</li> </ul> </li> </ul> </li> </ul> <p>Full changes list will be added to the Appliance Blackbox KVM REST API ENG-0005-020 document (currently may be found in Appendix).</p>"},{"location":"architecture/Summary/Contents/individual_inactivity_timers/individual_inactivity_timers_hld/#boxilla-rx-communication-related-to-individual-inactivity-timers-settings","title":"Boxilla - RX communication related to Individual Inactivity Timers Settings","text":"<p>In the section \"RESTAPI CHANGES\" above 2 new functions are introduced to provide Boxilla access to newly introduced Individual Inactivity Timers Settings within SQLite database for read and write access. Below diagrams demonstrate call sequence between Boxilla and RX for relevant access.</p> <p>Picture below demonstrates example of reading Individual Inactivity Timers Settings. </p> <p>Picture below demonstrates example of setting Individual Inactivity Timers Settings. </p> <p>OSD will require to notify Boxilla when Individual Inactivity Timers Settings are modified locally. The example of sequence calls demonstrated below </p>"},{"location":"architecture/Summary/Contents/individual_inactivity_timers/individual_inactivity_timers_hld/#security-considerations","title":"Security Considerations","text":"<p>Notes to the Authors \u2013 (Delete this explanatory text from final approved version) Some guidelines:</p> <ul> <li>Does the design change have security or system integrity implications?<ul> <li>Are you opening new ports?</li> <li>Are you impacting existing security levels or changing security credentials?</li> </ul> </li> </ul>"},{"location":"architecture/Summary/Contents/individual_inactivity_timers/individual_inactivity_timers_hld/#test-and-validation","title":"Test and Validation","text":"<p>Notes to the Authors \u2013 (Delete this explanatory text from final approved version)</p> <p>What test cases are you proposing to use to validate the new functionality? These may be based on the Use Cases identified in the architectural study or marketing requirements, but may also include developer level unit tests. Some guidelines:</p> <ul> <li>How will this feature be validated in System Test.?</li> <li>Is there associated area of the system that might be affected by this change; for example, perhaps a performance change or the risk of indirect impact in another product feature.</li> <li>Identify where you think the major risks are from a test perspective.</li> </ul> <p>SQLite database patch testing DAL testing OSD areas of test for managed/unmanaged domain with user privilege user/power user/administrator - OSD tests read/modify values in database; - OSD inactivity tests timer tests; - OSD Connection inactivity timer tests;</p> <p>REST API test.</p>"},{"location":"architecture/Summary/Contents/individual_inactivity_timers/individual_inactivity_timers_hld/#database-and-configuration","title":"Database and Configuration","text":"<p>Notes to the Authors \u2013 (Delete this explanatory text from final approved version)</p> <p>Will these design changes require changes to any existing databases or configuration files or will it introduce the requirement for new persistent data structures.</p>"},{"location":"architecture/Summary/Contents/individual_inactivity_timers/individual_inactivity_timers_hld/#performance-and-user-experience","title":"Performance and User Experience","text":"<p>Notes to the Authors \u2013 (Delete this explanatory text from final approved version)</p> <p>Will these design changes impact performance either negatively or positively? Highlight any implications or risks</p>"},{"location":"architecture/Summary/Contents/individual_inactivity_timers/individual_inactivity_timers_hld_appendix/","title":"Individual Inactivity timers (managed mode) HLD Appendix","text":""},{"location":"architecture/Summary/Contents/individual_inactivity_timers/individual_inactivity_timers_hld_appendix/#general-dataflow-in-current-managed-system","title":"General dataflow in current managed system","text":""},{"location":"architecture/Summary/Contents/individual_inactivity_timers/individual_inactivity_timers_hld_appendix/#osd-outstanding-questions","title":"OSD OUTSTANDING QUESTIONS:","text":"<p>Decision from 01/02/2023: use following UI design on OSD to present new timers configurations.</p> <p>Figure 15 Option with radio buttons Local timers </p> <p>Figure above are showing same settings Local timers in use, OSD Inactivity timer disabled, Connection inactivity timer enabled for 30 minuts.</p> <p>Another example: Global timers in use, OSD Inactivity timer enabled for 20 minuts, Connection inactivity timer disabled.</p> <p>Figure 16 Option with radio buttons Global timers </p>"},{"location":"architecture/Summary/Contents/individual_inactivity_timers/individual_inactivity_timers_hld_appendix/#current-sqlite-database-example","title":"Current SQLite database example","text":"<pre><code>sqlite&gt; .dump\n\nPRAGMA foreign_keys=OFF;\n\nBEGIN TRANSACTION;\n\nCREATE TABLE System(TouchScreenRedirection int, HttpEnable int,LoggedInUserName varchar,MouseKeyboardTimeout int, OSDResolution TEXT, Zone TEXT, BondedGroup TEXT, rx_scaling int);\n\nINSERT INTO System VALUES(0,0,'admin',1,'800x600','','',0);\n\nCREATE TABLE Version(DatabaseVersionMajor int, DatabaseVersionMinor int);\n\nINSERT INTO Version VALUES(1,7);\n\nCREATE TABLE RXDiagnostics(TerminateConnection int,TCNumberOfFrames int,PreemptionTestMode int,PreemptionTestTimeout int,ConnectionTestMode int);\n\nINSERT INTO RXDiagnostics VALUES(0,1000,0,0,0);\n\nCREATE TABLE ConnectionLabel (LabelEnable INT, LabelTimeout INT, LabelPosition TEXT);\n\nINSERT INTO ConnectionLabel VALUES(1,0,'Bottom Centre');\n\nCOMMIT;\n\nsqlite&gt;\n</code></pre>"},{"location":"architecture/Summary/Contents/individual_inactivity_timers/individual_inactivity_timers_hld_appendix/#restapi-individual-inactivity-timers-requirements","title":"RESTAPI INDIVIDUAL INACTIVITY TIMERS REQUIREMENTS","text":"<ul> <li>Boxilla will default to have the Receiver timers set to \u2018use global timer\u2019;</li> <li>Boxilla will default to having the global timers set to disabled</li> <li>Boxilla will send the configuration of both timers to the specific receiver in one message;</li> <li>Boxilla will query the receiver to ensure that it supports individual Receiver timers;</li> <li>Boxilla will query the receiver to get the timer configuration.</li> </ul>"},{"location":"architecture/Summary/Contents/individual_inactivity_timers/individual_inactivity_timers_hld_appendix/#full-changes-list-for-restapi-document","title":"Full changes list for RESTAPI document","text":"<p>This section will be modified on agreement with Boxilla team</p> <p>Add new:</p> <p>architecture/REST_API/5._REST_API_GET_Endpoints/5.33_GET_Timers_Config /</p> <p>URL: https://IP:8888/control/configuration/timers_configuration</p> <p>Parameter: timers_config, osd_inactivity, connection_inactivity</p> <p>Format: 32 byte char array, int, int</p> <p>Response Class JSON Structure</p> <p>{</p> <pre><code>\" timers_config \": \"global\"\n\n\" osd_inactivity \": 0,\n\n\" connection_inactivity \": 0\n</code></pre> <p>}</p> <p>architecture/REST_API/7._REST_API_PUT_Commands/7.26_PUT_Timers_Config /</p> <p>URL: https://IP:8888/control/configuration/timers_configuration</p> <p>Parameter: timers_config </p> <p>Format: 32 byte char array, osd_inactivity, connection_inactivity</p> <p>Request Class JSON Structure</p> <p>{</p> <pre><code>\" timers_config \": \"global\"\n\n\" osd_inactivity \": 0,\n\n\" connection_inactivity \": 0\n</code></pre> <p>}</p> <p>To be updated: </p> <p>architecture/REST_API/4._URI-API_versionTable/4.1_GET_endpoints/</p> <p>Version: 1.0.11 </p> <p>control/configuration/timers_configuration GET</p> <p>control/configuration/local_timers GET</p> <p>architecture/REST_API/4._URI-API_versionTable/4.3_Put_endpoints/</p> <p>Version: 1.0.11 </p> <p>control/configuration/timers_configuration PUT</p> <p>control/configuration/local_timers PUT</p> <p>/architecture/REST_API/5._REST_API_GET_Endpoints/5.25_GET_System_Capabilities/</p> <p>\" timers_configuration \":\"global/local\",</p> <p>\" osd_inactivity \":\"0,2-60\", </p> <p>\" connection_inactivity \":\"0,2-60\"</p>"},{"location":"architecture/Summary/Contents/individual_inactivity_timers/individual_inactivity_timers_hld_appendix/#should-we-move-global-timers-to-sqlite-in-the-future","title":"SHOULD WE MOVE GLOBAL TIMERS TO SQLITE IN THE FUTURE?","text":"<p>This is the consideration we should take into account when designing this feature. Accessing one values from xml file and another from SQLite database is making codes long, messy and difficult to understand. Also, in general, xml file is putting limitations on our system (xml file size is affecting system performance) and therefore it is good step to migrate from xml file usage to SQLite database in the future. But this big movement should be done for all data stored in xml file in one go.</p> <p>For \u2018Local\u2019 timers implementation I suggest avoid moving \u2018Global\u2019 timers configurations from xml file to SQLite database. The reason for that is maintenance (code changes) of other functionality not directly connected to timers configuration (it will make codes even longer, messier and difficult to understand). However, detailed information presented below in the case such decision is made.</p> <p>Decision from 01/02/2023: Do not move \u201cglobal timers\u201d from XML \u2013 that would change things from Boxilla viewpoint, so not part of this plan.</p>"},{"location":"architecture/Summary/Contents/individual_inactivity_timers/individual_inactivity_timers_hld_appendix/#moving-global-inactivity-times-on-managed-domain-to-sqlite-database-in-the-future","title":"Moving Global inactivity times on managed domain to SQLite database in the future","text":"<p>Considering the case if Glogal inactivity times on managed system will be stored in SQLite in the future the flowing scheme can be implemented: Create additional table entries for Global Inactivity timers: GlobalOSDInactivity and GlobalConnectionInactivity. Example of additional entries shown below in red colour:</p> <pre><code>CREATE TABLE Timers (TimeoutConfigurations TEXT, LocalOSDInactivity INT, LocalConnectionInactivity INT, GlobalOSDInactivity INT, GlobalConnectionInactivity INT);\n\nINSERT INTO Timers VALUES(Global,0,0,0,0);\n</code></pre> <p>New values can be accessed on OSD only for read with one exclusion (see description below of initial migration process) on managed domain and read/write in unmanaged domain;</p> <p>New values can be accessed on Boxilla for read/write for managed receivers;</p> <p>OSD will first read timers configurations and if it is \u2018global\u2019 will try to read GlobalOSDInactivity and GlobalConnectionInactivity from SQLite database. In the case table entries for Global Inactivity timers not found in SQLite database OSD will read these values from xml file.</p> <p>Boxilla will need to take responsibility to update Global Inactivity timers in SQLite database and xml files as well for backward compatibility for managed receivers.</p> <p>Note</p> <p>Values modified in SQLite database will be applied immediately after modification, where values modified in xml file will require user re-login.</p> <p>Export/Import: need to implement inactivity timers comparison within SQLite database and xml file before exporting and after importing.</p> <p>With new implementation of enhanced OSD it is possible to notify OSD that xml database update is required</p>"},{"location":"architecture/Summary/Contents/individual_inactivity_timers/individual_inactivity_timers_hld_appendix/#moving-inactivity-times-on-unmanaged-domain-to-sqlite-database-in-the-future","title":"Moving inactivity times on unmanaged domain to SQLite database in the future","text":"<p>Considering the case if Glogal inactivity times on unmanaged system will be stored in SQLite in the future the flowing scheme can be implemented:</p> <p>Create additional table entries for Global Inactivity timers: GlobalOSDInactivity and GlobalConnectionInactivity. Example of additional entries shown below in red colour:</p> <pre><code>CREATE TABLE Timers (TimeoutConfigurations TEXT, LocalOSDInactivity INT, LocalConnectionInactivity INT, GlobalOSDInactivity INT, GlobalConnectionInactivity INT);\n\nINSERT INTO Timers VALUES(Global,0,0,0,0);\n</code></pre> <p>Unmanaged OSD: only Global Timers are displayed and accessed for read/write (Local timers settings are hidden) </p> <p>OSD in unmanaged system: timers configurations will be always set as \u2018global\u2019. OSD will try to access GlobalOSDInactivity and GlobalConnectionInactivity in SQLite database. In the case table entries for Global Inactivity timers not found in SQLite database OSD will read these values from xml file. Should user modify inactivity timers settings write will be applied to SQLite database and to xml file (xml file write must be performed to maintain export/import functionality) or within export copy current inactivity timers settings from SQLite database to xml file and within import copy inactivity timers settings from xml file to SQLite database.</p>"},{"location":"architecture/Summary/Contents/individual_inactivity_timers/individual_inactivity_timers_hld_appendix/#initial-migration-process","title":"Initial migration process","text":"<p>The functionality of initial setup of Global Inactivity timers might be considered in following way:</p> <ul> <li> <p>Add new entries with default values (GlobalOSDInactivity default = 0, GlobalConnectionInactivity default = 0) to SQLite database using patch script (version also need to be updated);</p> </li> <li> <p>Within OSD load (after xml file pull from Boxilla for managed domain) implement functionality to compare Global Inactivity timers in xml file and SQLite database. If values are different set Global Inactivity timers values in SQLite database to values stored in xml file.</p> </li> </ul>"},{"location":"architecture/Summary/Contents/memory_map/nand_memory_map/","title":"2K Devices NAND Memory Map","text":"Offset Name Partition Num Size (MBytes) 0x0 fsbl1 mtd0 1 0x100000 fsbl2 mtd1 1 0x200000 fsbl3 mtd2 1 0x300000 fsbl4 mtd3 1 0x400000 fsbl5 mtd4 1 0x500000 fpga1 mtd5 14 0x1300000 fpga2 mtd6 14 0x2100000 uboot mtd7 2 0x2300000 uboot env mtd8 1 0x2400000 safe uImage mtd9 9 0x2d00000 uImage mtd10 9 0x3600000 safe devicetree mtd11 1 0x3700000 devicetree mtd12 1 0x3800000 rootfs mtd13 63 0x7700000 dummy rootfs mtd14 1 0x7800000 /usr/local mtd15 370 0x1ea00000 splash 1 mtd16 10 0x11400000 splash 2 mtd17 10 0x1fe00000 permanent mtd18 2"},{"location":"architecture/Summary/Contents/upgrades/upgrades_2k/","title":"Emerald 2K Product Upgrade Files","text":"<p>Upgrade files for Emerald 2K products (devices based on the Zynq7000 SoC) are provided using <code>.clu</code> files, these files are created using <code>makeself</code>.</p>"},{"location":"architecture/Summary/Contents/upgrades/upgrades_2k/#makeself-images","title":"Makeself Images","text":"<p>makeself.sh is a shell script that generates a self-extractable compressed tar archive from a directory. The resulting file appears as a shell script, and can be launched as is. The archive will then decompress itself to a temporary directory and then <code>setup.sh</code> will be executed. Makeself archives also include checksums for integrity self-validation and encryption mechanisms.</p> <p>makeself website Upgrade files for Emerald 2K products (devices based on the Zynq7000 SoC) are provided using <code>.clu</code> files.</p>"},{"location":"architecture/Summary/Contents/upgrades/upgrades_2k/#lsm-data","title":"LSM Data","text":"<p>As part of the clu file information is embedded into it using a LSM file, LSM files describe a software package in a way that is easily parsable. An example of the embedded LSM data can be seen below</p> <pre><code>Begin3\nSoftware-Version:V6.5.0_r10997\nSoftware-Version-Dual:V6.5.0_r10997\nBuild-Date:12-16-2022\nBoard Type:Tech10\nBoard Class:Transmitter\nBoard Brand:EMD\nDisplay-Port-Support:Yes\nCompatibility-Tech10:0x02\nEncryption:On\nUpgrade-Format:Dual\nPackage-Number:1\nPackage-1:Tech10\nEnd\n</code></pre> <p>Each board type has a specific Tech number and Tech name associated with it the below table gives the current values</p> Board Type Tech Name Tech Number Emerald SE SH EMDSE 6 Emerald SE DH EMDSE 7 ZeroU EMDZU 8 Emerald PE EMDPE 9 Emerald PE DP EMDPEDP 10 Emerald SE DP EMDSEDP 11 Emerald SE R2 EMDSER2 12 Emerald PE R2 EMDPER2 13 <p>The tech name is used as part of the clu filename e.g. TX_EMDPER2 for a Emerald PE Revision 2 Transmitter, the tech number is embedded into the LSM data in the <code>Board Type</code> and <code>Package-X</code> fields.</p>"},{"location":"architecture/Summary/Contents/usb/usbr/","title":"Emerald USB Architecture","text":""},{"location":"architecture/Summary/Contents/usb/usbr/#emerald4kse-software-design-for-vusb-devices","title":"Emerald4K/SE Software Design for vUSB Devices","text":""},{"location":"architecture/Summary/Contents/usb/usbr/#introduction","title":"Introduction","text":""},{"location":"architecture/Summary/Contents/usb/usbr/#purpose","title":"Purpose","text":"<p>The document details a new model of USB virtual device which will be a key module of USB Redirection implementation. This model focuses on trying to support all kind of USB transfers and solve known issues of previous implementations.</p>"},{"location":"architecture/Summary/Contents/usb/usbr/#scope","title":"Scope","text":"<p>The document focuses on the desired Software Architecture; it does not outline the phasing of work or migration strategies for moving from the current architecture to the desired one. Only specific details of USB related functionality is discussed in this document.</p>"},{"location":"architecture/Summary/Contents/usb/usbr/#overview-of-document-organization","title":"Overview of Document Organization","text":""},{"location":"architecture/Summary/Contents/usb/usbr/#design-and-implementation-constraints","title":"Design and Implementation Constraints","text":"<p>Many aspects of the current USB Redirection architecture are unsuitable for current market requirements. They constrain timely development of features and impose significant maintenance challenges. From a development perspective this constantly pushes us into development dead ends and no optimal implementation so it was decided to make a new approach backward compatible with previous ones already on field. Furthermore, this new design must be transversal to Black Box Emerald KVM family and keep portability between kernel versions in mind.</p>"},{"location":"architecture/Summary/Contents/usb/usbr/#assumptions-and-dependencies","title":"Assumptions and Dependencies","text":"<p>TBD</p>"},{"location":"architecture/Summary/Contents/usb/usbr/#definitions-acronyms-and-abbreviations","title":"Definitions, Acronyms and Abbreviations","text":""},{"location":"architecture/Summary/Contents/usb/usbr/#definitions","title":"Definitions","text":"Term Description 3DES Triple DES (Data Encryption Standard) AC Alternating Current AD Active Directory AAE Audio Application Engine AE Application Engines AES Advanced Encryption Standard AGC Automatic Gain Control ASIC Application Specific Integrated Circuit Barrow Project code for an early version of DTX1000 that is now obsolete BIST BIST In Self-Test CAP CloudAccel Protocol CD Compact Disk CE Conformit\u00e9 Europ\u00e9enne Corrib Project code for current DTX1000/DTX1002 products CMN Certification Model Number CMU Central Management Unit CPU Central Processing Unit CTS Clear to Send Deel Project code for DTX1000SA product \u2013 which is a Corrib unit with audio/serial added with a metal enclosure (versus plastic body for Corrib). HDCP High-bandwidth Digital Content Protection DC Direct Current DES Data Encryption Standard DHCP Dynamic Host Configuration Protocol DNS Domain Name System DPS Detailed Product Specifications DRAM Dynamic Random Access Memory DSP Digital Signal Processing DVI Digital Video Interface EDID Extended Display Identification Data ELMD Entry Level Management Device ESD Electrostatic Discharge EuP Energy using Products FCC Federal Communications Commission FPGA Field Programmable Gate Array FQDN Fully Qualified Domain Name GUI Graphical User Interface HDCP High-bandwidth Digital Content Protection HID Human Interface Devices HTTP Hypertext Transfer Protocol IC Integrated Circuit IEC International Electrotechnical Commission IGMP Internet Group Management Protocol IP Internet Protocol ISTA International Safe Transit Authority JSON JavaScript Object Notation KVM Keyboard, Video, Mouse LAN Local Area Network LED Light Emitting Diode MAC Media Access Control MPS Multipoint Server MRD Marketing Requirements Document MST Multi-Stream Transport NLA Network Level Authentication NOC Network Operating Centre OEM Original Equipment Manufacturer OS Operating System OSD On Screen Display PC Personal Computer PCI Peripheral Component Interconnect PCB Printed Circuit Board PID Peripheral ID PSU Power Supply Unit QIG Quick Install Guide RDP Remote Desktop Protocol RDSH Remote Desktop Session Host (formally Terminal Services) REST Representational state transfer ROHS Restriction Of Hazardous Substances RF Radio Frequency SDI Serial Data Interface SFP Small Form factor Pluggable SSH Secure Shell SST Single Stream Transport TCP Transmission Control Protocol UDP User Datagram Protocol UI User Interface UL Underwriters Laboratories URL Uniform Resource Locator USB Universal Serial Bus VDI Virtual Desktop Infrastructure VESA Video Electronics Standards Association VGA Video Graphics Adaptor VID Vendor ID VM Virtual Machine VNC Virtual Network Computing WAN Wide Area Network WEEE Waste Electrical and Electronic Equipment XML eXensible Markup Language UDC USB Device Controller"},{"location":"architecture/Summary/Contents/usb/usbr/#references","title":"References","text":"<ol> <li>Microsoft RDP Base Standard: MS_RDPBCGR Version 48.0</li> <li>InvisaPC DPS \u2013 EDD-0003-001</li> <li>Emerald MRD</li> <li>VESA DisplayPort Standard; Version 1, Revision 2a</li> <li>DVI 1.0 Standard</li> <li>VESA</li> <li>PC99 http://www.microsoft.com/whdc/archive/pcguides.mspx</li> <li>RemoteFX RDP Specification: MS_RDPRFX</li> <li>USB Redirection Specification :MS_RDPEUSB</li> <li>Domain Names - Implementation and Specification https://tools.ietf.org/html/rfc1035</li> <li>Boxilla DPS \u2013 EDD-0007-030.</li> </ol>"},{"location":"architecture/Summary/Contents/usb/usbr/#overall-description","title":"Overall Description","text":"<p>The ultimate purpose of USB Redirection is to create a transparent path between a hardware USB device and host that are not physically connected each other. This feature is widely used in consumer software as Virtual Box, VMware Player, etc. but in those cases a second software USB host is used by creating a virtual USB port so there is no need of an entity in charge of capturing or inject USB packets, everything is done by software. The actual challenge comes when an unknown remote hardware USB host is desired to be supported.</p> <p>If a remote hardware USB host has to be supported, a way of capturing and replying USB packets will be required. There are specific hardware on board Emerald family appliances for this task, specifically on Tx side. It is equipped with a Peripheral Controller IC which will be connected to remote hardware USB host. Peripheral Controller IC will be able to handle USB traffic but it cannot do anything by itself, it will need a way to communicate with remote device, take its response to a given USB host request and inject that response to the bus where it is connected. On the other hand, it will have to expose correct USB device status and endpoints to the bus so it will be necessary to not only to capture and write USB packets but to locally model a complete USB device.</p> <p>This document will focus on the design of the piece of software required to successfully read and write USB traffic by using a Peripheral Controller IC from a Linux user space application. This software will be referred as USB virtual device.</p>"},{"location":"architecture/Summary/Contents/usb/usbr/#architecture-overview","title":"Architecture Overview","text":""},{"location":"architecture/Summary/Contents/usb/usbr/#usb-redirection-scenario","title":"USB Redirection Scenario","text":"<p>The scenario where a Virtual USB device is required is shown below.</p> <p> Figure 1 USB Redirection scheme for hardware USB Host</p> <p>USB hardware configuration of Tx is designed to support up to four Peripheral Controllers. In case of Emerald 4K, there are three net2272 ICs and one USB3320C IC. All of them are accesed by USB host through a USB hub.</p> <p> Figure 2 USB Redirection hardware</p> <p>Peripheral Controllers used for USB Redirection will be net2272 due to its flexibility and number of endpoints supported.</p>"},{"location":"architecture/Summary/Contents/usb/usbr/#usb-redirection-software-components","title":"USB Redirection Software Components","text":""},{"location":"architecture/Summary/Contents/usb/usbr/#net2272-ic","title":"Net2272 IC","text":"<p>Net2272 is a dedicated integrated circuit that will be used as USB Device Physical Layer implementation, it will be required for interacting with USB target host. This IC is interfaced against Linux Kernel by modelling it as a UDC (USB Device Controller) through a dynamically loadable kernel module \u201cnet2272.ko\u201d.</p>"},{"location":"architecture/Summary/Contents/usb/usbr/#linux-usb-gadget-api","title":"Linux USB Gadget API","text":"<p>This API is used by Linux Kernel to interact with a UDC as net2272, dwc3 or chipidea. It will be intensively used during the whole development as long as endpoints, transfers and bus signalling are accessed through this API.</p>"},{"location":"architecture/Summary/Contents/usb/usbr/#composite-device-framework","title":"Composite Device Framework","text":"<p>Composite Device Framework is used to facilitate USB device representation to USB host. It is designed to easily create USB composite devices that support several USB functions under Linux (for example: keyboard, mouse and audio USB functions on the same USB gadget device). It will use Linux USB Gadget API to interact with hardware. Default use of this framework is NOT suitable for USB Redirection solution because it assumes that all information about USB device will be available \u201ca priori\u201d but this is not possible because at the beginning of USB Redirection process nothing is known about remote USB device and a dynamic construction of virtual USB device is required. All the information needed will be provided by control transfers triggered by USB target host. However, several functions from this framework will be used to create a virtual USB Device.</p>"},{"location":"architecture/Summary/Contents/usb/usbr/#kvm-clientserver-application","title":"KVM Client/Server Application","text":"<p>KVM Client/Server Applications are responsible for the following:</p> <ul> <li>Implementing the RDP protocol</li> <li>Creating an RDP connection and calling the relevant connection scripts</li> <li>Create a channel against USB redirected device</li> <li>Complete all USB transfers initiated by USB Host</li> <li>Close session correctly</li> </ul> <p>The functionality of the application layer will not be discussed in this document.</p>"},{"location":"architecture/Summary/Contents/usb/usbr/#usb-virtual-device-driver","title":"USB Virtual Device Driver","text":"<p>Virtual USB Device will be implemented as a Linux Kernel module and it will be a local soft representation of a remote hard USB device. It will handle USB transfers initiated by USB host that comes from USB bus through a UDC, typically net2272 and change its state representing the remote USB on local USB bus. The functionality of this module is similar to the one provided by Composite Device Framework. This module must not use the default composite driver, its use would be a misconception. A new composite driver is required and only some auxiliary functions from Composite Device Framework will be used.</p>"},{"location":"architecture/Summary/Contents/usb/usbr/#simplified-logical-usb-scheme","title":"Simplified Logical USB Scheme","text":"<p> Figure 3 Virtual USB Device scheme</p> <p>Virtual USB device needs to be smart enough to satisfy and maintain, Gadget API and Composite Framework inside Linux Kernel with the information provided by control transfers. For this reason, it will need to parse descriptors and control requests that comes through Gadget API.</p>"},{"location":"architecture/Summary/Contents/usb/usbr/#user-space-interface","title":"User Space Interface","text":"<p>Communication with user space will be based on a very simple interface with eight commands. A half of them are specific to trigger some actions on Linux Kernel and the rest are designed for USB packets bypassing.</p>"},{"location":"architecture/Summary/Contents/usb/usbr/#message-format","title":"Message Format","text":"<p>This module provides an interface for user space to access USB host transfers. The format messages is shown belown.</p> Offset Field Size Description 0 Type 1 Type of message 1 Result 1 Result of Message 2 Request 2 USB 2.0 Spec. chapter 9 (CONTROL XFER ONLY) 4 Value 2 USB 2.0 Spec. chapter 9 (CONTROL XFER ONLY) 6 Index 2 USB 2.0 Spec. chapter 9 (CONTROL XFER ONLY) 8 address 1 Endpoint address 9 attributes 1 Endpoint attributes 10 maxPacketSize 4 Depending on transfer direction, it could be expected transfer length or maximum length allowed. 14 data N Message payload <p>Figure 4 Virtual USB device interface, generic message format</p> <p>Message format will be different in case of ISOCHRONOUS IN transfers. Several USB packets needs to be passed together from userspace to kernel in same message.</p> Offset Field Size Description 0 type 1 Type of message 1 result 1 Result of Message 2 request 2 USB 2.0 Spec. chapter 9 (CONTROL XFER) 4 value 2 USB 2.0 Spec. chapter 9 (CONTROL XFER) 6 index 2 USB 2.0 Spec. chapter 9 (CONTROL XFER) 8 address 1 Endpoint address 9 attributes 1 Endpoint attributes 10 maxPacketSize 4 Depending on transfer direction, it could be expected transfer length or maximum length allowed. 14 isoch_packet_desc_num 4 Number of isoch descriptors 18 isoch_descs 12*K Isochronous packet descriptors is a complex extructure defined later. K is equal isoch_packet_desc_num 18+12*K Isoch packets N Lengths and limits of pckets must be deducted from isochronous packet descriptors <p>Figure 5 Virtual USB device interface, ISOCHRONOUS IN message format</p> Offset Field Size Description 0 length 4 Max length expected for a packet 1 actual_length 4 Actual length of packet returned. This field is expected to be used for \u201cIsoch packets\u201d processing. 2 status 4 Status of packet <p>Figure 6 Isochronous packet descriptor</p>"},{"location":"architecture/Summary/Contents/usb/usbr/#commands","title":"Commands","text":""},{"location":"architecture/Summary/Contents/usb/usbr/#usbqt_request_resource","title":"USBQT_REQUEST_RESOURCE","text":"<p>This type of command is the initial user space to kernel communication. It will claim and check communication through interface against Kernel since it has to acknowledge it.</p>"},{"location":"architecture/Summary/Contents/usb/usbr/#usbqt_release_resource","title":"USBQT_RELEASE_RESOURCE","text":"<p>This will be the last command sent from user space in a USBR session. It will release the interface and its resources. All used usb gadget driver resources must be cleared.</p>"},{"location":"architecture/Summary/Contents/usb/usbr/#usbqt_configure_resource","title":"USBQT_CONFIGURE_RESOURCE","text":"<p>A Linux UDC will be requested when this command gets executed inside Kernel. It means that usb_gadget_probe_driver() will get executed and if it returns success, virtual USB device will be presented to the USB host and control transfers will start to come.</p>"},{"location":"architecture/Summary/Contents/usb/usbr/#usbqt_transfer_in_request","title":"USBQT_TRANSFER_IN_REQUEST","text":"<p>It will be used to mark transfers from remote USB device to USB host. It may contain any type of transfer.</p>"},{"location":"architecture/Summary/Contents/usb/usbr/#usbqt_transfer_out_request","title":"USBQT_TRANSFER_OUT_REQUEST","text":"<p>It will be used to mark transfers from USB host to remote USB device. It may contain any type of transfer.</p>"},{"location":"architecture/Summary/Contents/usb/usbr/#usbqt_urb_completion_data-and-usbqt_usb_completion_no_data","title":"USBQT_URB_COMPLETION_DATA and USBQT_USB_COMPLETION_NO_DATA","text":"<p>These commands will be used in conjunction with USBQT_TRANSFER_XXX_REQUEST. They will finish a transfer or urb.</p>"},{"location":"architecture/Summary/Contents/usb/usbr/#linux-usb-gadget-api_1","title":"Linux USB Gadget API","text":"<p>This is the API used to access the USB hardware which is in charge of enumerating the device and signalling connections and disconnections of the virtual USB device, any event that is not handled at this level will be probably handled by UDC level and will not be visible at all from user space. Several callbacks must be correctly implemented to keep virtual USB device working even when USB cable or port is faulty, user has disconnected it or any other process that requires a reenumeration i.e: USB host reboot has been triggered.</p> <p>The most important structure used in this API is showed below.</p> <pre><code>struct usb_gadget_driver {\n    char *function;\n    enum usb_device_speed  max_speed;\n    int(*bind)(struct usb_gadget *gadget, struct usb_gadget_driver *driver);\n    void(*unbind)(struct usb_gadget *);\n    int(*setup)(struct usb_gadget *, const struct usb_ctrlrequest);\n    void(*disconnect)(struct usb_gadget *);\n    void(*suspend)(struct usb_gadget *);\n    void(*resume)(struct usb_gadget *);\n    void(*reset)(struct usb_gadget *);\n    struct device_driver  driver;\n    char *udc_name;\n    struct list_head        pending;\n    unsigned match_existing_only:1;\n}\n</code></pre> <p>Figure 7 usb_gadget_driver structure</p> <p>Bind/unbind() functions are instrumentation to perform memory allocation and some USB gadget configurations before probing this driver to kernel. Setup() callback will be called during enumeration in order to satisfy control requests from host if it is connected. Disconnect(), suspend(), resume(), reset() are used for handling of those bus events.</p> <p>Setup callback is key for enumeration process of USB virtual device, it will deploy a complex configuration process which will set up Composite Framework. From USB Redirection perspective, every setup request must be propagated over the network towards the actual redirected USB device. This callback will be continuously selecting correct device configuration in terms of USB configuration, function, interfaces and non control endpoints.</p> <p>Disconnect, suspend, resume and reset callbacks must be implemented.</p>"},{"location":"architecture/Summary/Contents/usb/usbr/#virtual-usb-configuration-and-usb-functions","title":"Virtual USB Configuration and USB Functions","text":"<p>Composite Framewok is fundamental for implementation of USB devices based on Linux, it allows to build complex devices with more than 1 configuration or 1 function.</p> <p>The conventional use of USB Composite Framework layer adds a lot of complexity to USB Redirection development. It was designed to implement USB devices with a known structure but in USBR context no data about remote USB device is given until transfers between host and device are going on through the bus.</p> <p>Only some structures and auxiliary functions from this layer will be used. The use of usb_composite_probe() will be completely avoided, it is used to load the standard composite driver which is not needed in our context. This will make our USB approach portable to other platforms.</p> <p>Virtual USB device will be modelled with this framework by using only 1 USB configuration and 1 USB function that will be capable of representing all possible configurations and functions that remote device offers.</p> <pre><code>struct usb_composite_dev {\n struct usb_gadget  *gadget;\n struct usb_request  *req;\n struct usb_request  *os_desc_req;\n\n struct usb_configuration *config;\n\n /* OS String is a custom (yet popular) extension to the USB standard. */\n u8    qw_sign[OS_STRING_QW_SIGN_LEN];\n u8    b_vendor_code;\n struct usb_configuration *os_desc_config;\n unsigned int   use_os_string:1;\n\n /* private: */\n /* internals */\n unsigned int   suspended:1;\n struct usb_device_descriptor desc;\n struct list_head  configs;\n struct list_head  gstrings;\n struct usb_composite_driver *driver;\n u8    next_string_id;\n char    *def_manufacturer;\n\n /* the gadget driver won't enable the data pullup\n  * while the deactivation count is nonzero.\n  */\n unsigned   deactivations;\n\n /* the composite driver won't complete the control transfer's\n  * data/status stages till delayed_status is zero.\n  */\n int    delayed_status;\n\n /* protects deactivations and delayed_status counts*/\n spinlock_t   lock;\n\n /* public: */\n unsigned int   setup_pending:1;\n unsigned int   os_desc_pending:1;\n};\n</code></pre> <p>Figure 8 usb_composite_dev structure</p> <p>This structure will be maintained in USB virtual device module, It is the basis representation of the USB device represented to USB bus. It will link to structures representing USB configurations and functions.</p> <p>USB Virtual device needs to maintain a list with all endpoint descriptors and interfaces of remote device. USB Host will switch through them.</p>"},{"location":"architecture/Summary/Contents/usb/usbr/#usb-enumeration-and-descriptors-handling","title":"USB Enumeration and Descriptors Handling","text":"<p>Ideally, virtual kernel module will be required to bypass communication between USB host and USB device in order to be transparent from USB Host perspective but during enumeration of remote USB device it needs to store useful descriptors that will be required by Linux Kernel to maintain all USB Gadget Framework correctly. It means that the module will keep track of every descriptor.</p>"},{"location":"architecture/Summary/Contents/usb/usbr/#usb-30-descriptors-considerations","title":"USB 3.0 Descriptors Considerations","text":"<p>Part of USB 3.0 devices enumeration is done by using USB 2.0 physical layer due to backward compatibility. If USB 3.0 related descriptors are bypassed to a USB 3.0 host, it will try to enable all USB 3.0 features but this is not possible because only USB 2.0 is supported by hardware.</p> <p>Only in this case a modification in descriptors will be proposed. During enumeration, host will always request a Device Descriptor, it specifies in WbcdUSB\u201d field the USB specification number that the device complies, if it is different than 2.0 it will be modified.</p>"},{"location":"architecture/Summary/Contents/usb/usbr/#usb-non-control-transfers","title":"USB Non-control Transfers","text":"<p>During setting alternate interface function which is part of Composite Framework, it will be required to correctly handle non control endpoints. Addresses of locally enabled enpoint must be the same as remote endpoints.</p>"},{"location":"architecture/Summary/Contents/usb/usbr/#usb-bus-events","title":"USB Bus Events","text":"<p>It is required to signal all USB events to upper layers. In current implementation of USB virtual device some of the events are processed locally. For example, in static void net2272_handle_stat0_irqs(struct net2272 *dev, u8 stat) some USB events are masked: USB_REQ_GET_STATUS, USB_REQ_CLEAR_FEATURE, USB_REQ_SET_FEATURE, USB_REQ_SET_ADDRESS.</p> <p>All those events will be delegated to setup() callback in gadget driver structure.</p> <p>This events need to be correctly handled by user space layer as well.</p>"},{"location":"architecture/Summary/Contents/usb/usbr/#current-architecture-overview-end-to-end","title":"Current Architecture Overview: End to End","text":""},{"location":"architecture/Summary/Contents/usb/usbr/#current-architecture-transmission-and-reception","title":"Current Architecture Transmission and Reception","text":""},{"location":"architecture/Summary/Contents/usb/usbr/#application-level-current-implementation","title":"Application Level Current Implementation","text":"<p>The Threads and Queues used in the Server Application are shown below.</p> <p></p>"},{"location":"architecture/Summary/Contents/usb/usbr/#current-usb-architecture-detailed","title":"Current USB Architecture Detailed","text":""},{"location":"architecture/Summary/Contents/usb/usbr/#proposed-new-usb-ip-phasing","title":"Proposed New USB IP Phasing","text":""},{"location":"architecture/Summary/Contents/usb/usbr/#phase-1","title":"Phase 1","text":""},{"location":"architecture/Summary/Contents/usb/usbr/#phase-2-and-3","title":"Phase 2 and 3","text":""},{"location":"architecture/Summary/Contents/usb/usbr/#phase-4","title":"Phase 4","text":""},{"location":"architecture/Summary/Contents/usb/usbr/#analysis-of-usb-queues-in-kvm-connection-wip","title":"Analysis of USB Queues in KVM Connection (WIP)","text":"<p>event_usb_command_available commands (EQ_EVENT_USB_COMMAND_AVAILABLE) are created in ep_process_virtual_command. These are sent to the hm_cm_queue.</p>"},{"location":"architecture/Summary/Contents/usb/usbr/#usb-user-interface-thread","title":"USB User Interface Thread","text":"<p> Figure 14: Application Client Process View and Threading</p>"},{"location":"architecture/Summary/Contents/usb/usbr/#notes-on-futher-automation","title":"Notes on Futher Automation","text":"<p>With reference to the Phase 2 diagram above, we could create an automation by using the USB Software Defined Logical Device (Kernel Version) to define an endpoint configuration.</p> <p>An application of a PC (Linux or Windows) could then be used to confirm the correct end points (shown as Linux User Space Driver in the same diagram)</p> <p>Once Phase 3 is developed we would then test from USB Software Defined Logical Device (Application Space Version).</p>"},{"location":"architecture/Summary/Contents/usb/usbr/#dependencies","title":"Dependencies","text":"<p>How_to_use_libusb_on_Windows</p> <p>SOFTWARE DEFINED USB DEVICE - Based on USB Gadget API, configurable to be a BASIC BULK/INT/ISOCH device SOURCE CODE: svn://10.211.128.12/Emerald/branches/develop_aws_ip/Applications/KernelModules/tx_usb_modules/oot-usblogicaldevice</p> <p>DEVICE DRIVER ON HOST SIDE SOURCE CODE: svn://10.211.128.12/Emerald/branches/develop_aws_ip/Applications/Debugging/Encoder/USB/usb_logical_device_driver GUIDE: http://10.211.129.241:8000/architecture/usb/usbr_utilities/</p> <p>SCRIPT TO SELECT USB DEVICE CONTROLLER AND CONFIGURE XFER TYPE, XFER SIZE, EP ADDRESSES AND B_INTERVAL for ISOCH XFERS</p> <pre><code>______________________________________________________________________________________________\n# cat ./usbdev.sh\nAWSUDCIP=\"80120000.awsudcip\"\nCHIPIDEA=\"ci_hdrc.0\"\n\nUDC=${AWSUDCIP}\n\nif [ \"${UDC}\" = \"${AWSUDCIP}\" ]; then\n        echo \"WAIT\"\n        rmmod awsudcip\n        sleep 4\n        insmod awsudcip.ko long_word_operation=1\n        modprobe libcomposite\nelif [ \"${UDC}\" = \"${CHIPIDEA}\" ]; then\n        echo \"\" &gt; /sys/kernel/config/usb_gadget/bb_composite_hid/UDC\nfi\n\ninsmod usblogicaldevice.ko udc=${UDC} xfer_type=2 xfer_size=512 in_ep_no=1 out_ep_no=1\n______________________________________________________________________________________________\n</code></pre>"},{"location":"architecture/Summary/Contents/usb/usbr_msc_transport/","title":"USB/R Mass Storage Transport Compatibility","text":""},{"location":"architecture/Summary/Contents/usb/usbr_msc_transport/#overview","title":"Overview","text":"<p>In order to increase performance, USBr parses USB HOST requests in the context of mass storage devices redirection. The purpose of the parsing is to detect the length of the SCSI operations expected by the host. By doing this, the Tx will be able to gather OUT data packets before sending them in a big network transfer to the Rx. The same will happen on the Rx side with IN packets, Rx will be aware of how many packets it expects from the actual device in order to send all of them in one big network transfer to the Tx.</p>"},{"location":"architecture/Summary/Contents/usb/usbr_msc_transport/#design-detail","title":"Design detail","text":""},{"location":"architecture/Summary/Contents/usb/usbr_msc_transport/#technical-context","title":"Technical context","text":"<p>Common USB mass storage devices as flash drives will follow the \"USB Mass Storage Class Specification\". The specification establishes which industry transport protocols are acceptable to use in the following table:</p> <p>Figure Mass Storage Transport Protocol </p> <p>The protocol to be used by a given device can be checked via \"USB Interface Descriptor\", the content of bInterfaceProtocol field in the descriptor will be the identifier of the protocol.</p> <p>Warning</p> <p>Current optimized USB Mass Storage redirection is validated against \"USB Mass Storage Class Bulk-Only Transport\" (0x50h) protocol only.</p> <p>If redirected device follows \"USB Mass Storage Class Bulk-Only Transport\", it must have at least two bulk endpoints plus the control endpoint. One data endpoint must be IN and OUT the other, USBr will parse all payloads that pass trough those endpoints in order to identify some SCSI transport protocol useful information.</p>"},{"location":"architecture/Summary/Contents/usb/usbr_msc_transport/#parsing-scsi-bulk-only-transport-protocol","title":"Parsing SCSI Bulk-Only Transport Protocol","text":"<p>Transport protocol means that he protocol will be operating at layer 4 of the OSI model. USBr driver will have access to the headers of this layer only and the rest of the payload received by USB HOST will be considered as unknown.</p> <p>Figure Command Data Status Flow </p> <p>As depicted in previous figure, every SCSI operation will have a command phase, data phase and status phase. From low level USB perspective, any CBW will arrive to the driver via BULK OUT endpoint directly from Target PC USB Host. USBr driver will listen to those and will decode them according to Table 5.1 from \"USB Mass Storage Class Bulk-Only Transport\". On the other hand, CSW will arrive from the actual remote device on the other side of the network and it will be decoded as per Table 5.2 from \"USB Mass Storage Class Bulk-Only Transport\".</p>"},{"location":"architecture/Summary/Contents/usb/usbr_msc_transport/#command-block-wrapper","title":"Command Block Wrapper","text":"<p>There are 3 important fields that will be extracted from the CBW, these are dCBWSignature, dCBWDataTransferLength and bmCBWFlags. dCBWSignature will be used to detect when a CBW is getting received from the host, dCBWDataTransferLength is the field that contains how many bytes USBr should gather before sending the transfer and bit 7 in bmCBWFlags field indicates the direction of the transfer. If this flag is cleared then it indicates an OUT SCSI operation thus packet gathering will be performed on Tx side, if set then it indicates an IN SCSI operation thus gathering is performed on the Rx side.</p> <p>Figure Command Block Wrapper </p>"},{"location":"architecture/Summary/Contents/usb/usbr_msc_transport/#command-status-wrapper","title":"Command Status Wrapper","text":"<p>As previously stated, it is expected to receive a CSW after each CBW is executed. Tx will watch the payloads received from the Rx in order to find the CSW. The field that it will use for this purpose is dCSWSignature.</p> <p>Figure Command Status Wrapper </p> <p>The reception of the CSW will be used to mark the end of a SCSI operation.</p>"},{"location":"architecture/Summary/Contents/usb/usbr_msc_transport/#device-incompatibilities","title":"Device Incompatibilities","text":"<p>Even though the most simple approach has been utilized for years, it turned out to not to support some flashdrives as Sandisk or Integral, Elecom encrypted flashdrives. This is because those flashdrives are not fully compliant with \"USB Mass Storage Class Bulk-Only Transport\". More specifically, they are not compliant with the section 5.3 of that specification.</p> <p>Figure Status Transport Flow </p> <p>According to the previous figure, if BULK IN data endpoint is STALLed then the USB HOST needs to clear the STALL condition of the endpoint and then attempt to read the CSW. This behavior is not followed by all Mass Storage Devices.</p> <p>During the execution of some particular commands, non-compliant devices send a STALL packet and data payload immediately after it. This is not compliant with the transport flow which requires the endpoint to be cleared after a STALL packet.</p> <p>In order to solve these situations it was decided to access the layer on top of transport which in this case is the SCSI application layer. In that layer the USBr driver will have access to SCSI Operation Codes. The purpose of having visibility on this layer is to be able to use cherry pick which operation codes will enable the gathering of packets and which will be processed transparently.</p> <p>The ultimate goal of making the USBr driver aware of SCSI transport protocols is to increase performance. The SCSI operation codes that are relevant for performance are only the ones that have a data phase with long data lengths. The commands that tipically fall in this case are in the following table:</p> SCSI Operation Code Transport Layer Direction <code>READ (6)</code> IN <code>READ (10)</code> IN <code>READ (12)</code> IN <code>WRITE (6)</code> OUT <code>WRITE (10)</code> OUT <code>WRITE (12)</code> OUT <p>Any other command will get bypassed as raw USB traffic. This allows the driver to be less restrictive with device behaviour.</p>"},{"location":"architecture/Summary/Contents/usb/usbr_msc_transport/#scsi-write-sequence-diagram","title":"SCSI Write Sequence Diagram","text":"sequenceDiagram     participant USB Redirected Device     participant RDPEUSB Plugin (Rx)     participant USBr driver (Tx)     participant USB Host      USB Host-&gt;&gt;USBr driver (Tx): CBW [Write Op.]     USBr driver (Tx)-&gt;&gt;RDPEUSB Plugin (Rx): RDP(URB)     RDPEUSB Plugin (Rx)-&gt;&gt;USB Redirected Device:CBW [Write Op.]     USB Redirected Device--&gt;&gt;RDPEUSB Plugin (Rx):ACK     RDPEUSB Plugin (Rx)--&gt;&gt;USBr driver (Tx):ACK     USBr driver (Tx)--&gt;&gt;USB Host:ACK     USB Host-&gt;&gt;USBr driver (Tx): PAYLOAD0     USB Host-&gt;&gt;USBr driver (Tx): PAYLOAD1     USB Host-&gt;&gt;USBr driver (Tx): PAYLOAD2     USB Host-&gt;&gt;USBr driver (Tx): ...     USB Host-&gt;&gt;USBr driver (Tx): PAYLOADN     USBr driver (Tx)-&gt;&gt;RDPEUSB Plugin (Rx): RDP(URB)     RDPEUSB Plugin (Rx)-&gt;&gt;USB Redirected Device:USB Transfer(PAYLOAD0..PAYLOADN)     USB Redirected Device--&gt;&gt;RDPEUSB Plugin (Rx):ACK     RDPEUSB Plugin (Rx)--&gt;&gt;USBr driver (Tx):RDP(URB)     Note left of USB Redirected Device: CSW via IN ep     USB Redirected Device--&gt;&gt;RDPEUSB Plugin (Rx):CSW     RDPEUSB Plugin (Rx)--&gt;&gt;USBr driver (Tx):RDP(URB)     USBr driver (Tx)--&gt;&gt;USB Host:CSW"},{"location":"architecture/Summary/Contents/usb/usbr_msc_transport/#scsi-read-sequence-diagram","title":"SCSI Read Sequence Diagram","text":"sequenceDiagram     participant D as USB Redirected Device     participant C as RDPEUSB Plugin (Rx)     participant B as USBr driver (Tx)     participant A as USB Host        A-&gt;&gt;B: CBW [Read Op.]     B-&gt;&gt;C: RDP(URB)     C-&gt;&gt;D:CBW [Read Op.]     D--&gt;&gt;C:ACK     C--&gt;&gt;B:ACK     B--&gt;&gt;A:ACK     Note left of D: Payload and ACK via IN ep     D-&gt;&gt;C: PAYLOAD0     D-&gt;&gt;C: PAYLOAD1     D-&gt;&gt;C: PAYLOAD2     D-&gt;&gt;C: ...     D-&gt;&gt;C: PAYLOADN     C-&gt;&gt;B: RDP(URB)     B-&gt;&gt;A:USB Transfer(PAYLOAD0..PAYLOADN)     D--&gt;&gt;C:ACK     C--&gt;&gt;B:RDP(URB)     B--&gt;&gt;A:CSW"},{"location":"architecture/Summary/Contents/usb/usbr_msc_transport/#references","title":"References","text":"<ul> <li>USB Mass Storage Class Specification Overview</li> <li>USB Mass Storage Class Bulk-Only Transport</li> <li>SCSI Commands Reference Manual (Seagate)</li> </ul>"},{"location":"architecture/Summary/Contents/usb/usbr_udc/","title":"USB Device Controller","text":"<p>USB Device Controller drivers are the lowest level software layer of the Linux USB software stack. These drivers must be compatible with USB Gadget API on one side and designed to be interfaced directly with the HW on the other. They are typically in charge of servicing all interrupt requests from hardware and they handle the communication over each endpoint enabled at any given time.</p>"},{"location":"architecture/Summary/Contents/usb/usbr_udc/#net2272","title":"Net2272","text":"<p>It is an integrated circuit supplied by PLX/Broadcom. It has 3 hardware configurable endpoints but it is possible to set the chip to support up to 15 endpoints in each direction by using endpoint virtualization. Note that endpoint virtualization is not a USB standard technique, only some ICs from PLX/Broadcom support it and it takes advantage of flow control mechanism of int and bulk endpoint types.</p> <p>Datasheet: \\\\10.211.128.208\\shared_area\\rodrigo\\shared\\NET2272F.pdf</p> <p>Driver source code: (branch)/Applications/KernelModules/tx_usb_modules/oot-net2272/</p>"},{"location":"architecture/Summary/Contents/usb/usbr_udc/#asicws-usb-20-device-ip-core","title":"ASICws USB 2.0 Device IP Core","text":"<p>This USB Device Controller is a soft core that resides in the Emerald FPGA.</p> <p>Datasheet: \\\\10.211.128.208\\shared_area\\rodrigo\\shared\\udev_um.pdf</p> <pre><code>insmod awsudcip.ko long_word_operation=1 ftraces_enable=1 stall_not_supp=0\n\n# long_word_operation: enables 32 bits HW accesses. 8 bits otherwise (r/w) (default=1)\n# ftraces_enable: enables ftrace debug (default=0)\n# stall_not_supp: reports STALL xfers are not supported to OS (default=0)\n</code></pre>"},{"location":"architecture/Summary/Contents/usb/usbr_utilities/","title":"USB Device Controller Debugging Utilities","text":"<p>There are some utilities developed by Black Box Embedded Software Team that can be used to debug any USB Device Controller (UDC) supported by Linux. These have been specifically developed for the integration of ASICSws USB 2.0 Device IP Core hence it will be assumed that UDC is under test.</p>"},{"location":"architecture/Summary/Contents/usb/usbr_utilities/#usb-logical-device","title":"USB Logical Device","text":"<p>An UDC is unable to represent a USB device by itself, in order to have a model of a USB device is required to have an object that is able to respond every USB Host request with coherent data about its auto-description via control enpoint.</p> <p>This object is going to be implemented by a kernel module (usblogicaldevice.ko) that will use the most basic linux framework to talk to the hardware UDC: USB Gadget API. This API allows upper layers to enable hardware, configure physical endpoints, receive/send USB requests over control and data endpoints, detect Suspend, Resume, Reset, Disconnect events, etc.</p> <p>Descriptors contained in this kernel module are going to be used by USB host to enumerate the device. They describe the architecture of the device and provide some information as address and type of each endpoint the USB device is going to expose to USB Host. This has to be coherent with underlying hardware capabilities and configuration.</p> <p>The USB device described by this particular driver doesn't belong to any USB Class so no USB host is going to be able to communicate with it via data endpoints unless a custom driver is provided.</p> <p>Device will get enumerated with VID/PID 325a/0001.</p> <p>The following command is used to insert this kernel module:</p> <pre><code>insmod usblogicaldevice.ko udc=80120000.awsudcip xfer_size=64\n\n# Enables two bulk data endpoints with addresses 0x81 (IN) and 0x01 (OUT)\n</code></pre> <p>List of available UDCs (some of them can be in use for other purposes i.e: ci_hdrc.0 on EMSE/EMPE/EM2K/ZEROU or dwc3 on 4K are typically used for the implementation of HID device):</p> <p><pre><code>ls /sys/class/udc/\n</code></pre> The device driver will enable two data endpoints on the hardware. Both will be BULK and will have endpoint number set to 1 but one of them will be IN direction and the other will be OUT direction. Their addresses will be 0x81 and 0x01 respectively.</p> <pre><code>Example:\ninsmod usblogicaldevice.ko udc=80120000.awsudcip xfer_type=1 xfer_size=1024 in_ep_no=1 out_ep_no=2 in_binterval=4 out_binterval=4\n\nParameters:\n    xfer_type: set transfer type [0=int 1=isoc 2=bulk]\n    xfer_size: set transfer size\n    in_ep_no: set in endpoint number\n    out_ep_no: set out endpoint number\n    in_binterval: set bIntervalVariable\n    out_binterval: set bIntervalVariable\n</code></pre> <p>Check limitations given by USB Spec. 2.0 Chapter 9 Section 9.6.6 (Endpoint descriptor) for each parameters. It will create a custom device with two isochronous endpoints with addresses 0x81(IN) and 0x02(OUT). Given the bInterval values, each endpoint will be polled every 1ms if device is HighSpeed and every 8ms if FullSpeed.</p> <p>Note</p> <p>This kernel module is currently being parameterized to enable/disable data integrity validation</p>"},{"location":"architecture/Summary/Contents/usb/usbr_utilities/#linux-mass-storage-device-driver","title":"Linux Mass Storage Device Driver","text":"<p>A custom version of the Linux Mass Storage Device Driver has been internally developed in order to make it suitable for UDC testing. The most important feature that has been added is the posibility of changing the endpoint number of its two bulk endpoints. This driver has two parts, a Linux USB function driver (usb_f_mass_storage.ko) and a Linux USB gadget driver (g_mass_storage.ko). All changes made by blackbox are in the function driver.</p> <p>The most simple way to use this driver is by running the following commands: <pre><code>insmod usb_f_mass_storage.ko in_ep_num=0x81 out_ep_num=0x02\nmodprobe g_mass_storage file=/usr/local/mass_storage.disk\n</code></pre> The main disadvantage of using this method is that it is not possible to select what UDC to use programatically. Also there are several USB parameters that are hardcoded in g_mass_storage.ko driver and not configurable by the user (vid, pid, serial, strings, etc...).</p> <p>The custom version of usb_f_mass_storage.ko can be found at \\\\10.211.128.208\\shared_area\\rodrigo\\shared\\usb_f_mass_storage.ko. Modprobe command uses the default version of g_mass_storage.ko installed on the board.</p> <p>Linux Mass Storage driver also requires a correctly formatted \"virtual\" disk to be enumerated and handled correctly by a USB host. A suitable disk for test has been uploaded to \\\\10.211.128.208\\shared_area\\rodrigo\\shared\\mass_storage.disk</p> <p>The recommended way to use usb_f_mass_storage.ko driver is as follows:</p> <pre><code>#!/bin/bash -xe\n\n# \"manual\" insertion of Black Box custom driver. If it is not inserted, Linux is\n# going to interpret we want to use the default version installed on the board.\ninsmod usb_f_mass_storage.ko in_ep_num=0x81 out_ep_num=0x02\n\nUDC_NAME=\"80120000.awsudcip\"\n\nCONFIGFS_BASE_PATH=\"/sys/kernel/config\"\nCONFIGFS_GADGET_PATH=${CONFIGFS_BASE_PATH}\"/usb_gadget/bb_mass_storage\"\n\n\nGADGET_SERIAL_NUMBER=$(libsystem_cli --serial)\nGADGET_MANUFACTURER=\"Black Box Corp.\"\nGADGET_PRODUCT=\"Black Box Mass Storage Test Device\"\nGADGET_CONFIG_DESCRIPTION=\"BLACKBOX_MASS_STORAGE_TEST_DEVICE\"\n\nmodprobe libcomposite\nif [ ! -e ${CONFIGFS_BASE_PATH} ]\nthen\n    mount none ${CONFIGFS_BASE_PATH} -t configfs\nfi\n\nmkdir -p ${CONFIGFS_GADGET_PATH}\n\necho 0x325a &gt; ${CONFIGFS_GADGET_PATH}/idVendor   # Black Box Corporation\necho 0x0002 &gt; ${CONFIGFS_GADGET_PATH}/idProduct  # Mass Storage Test Device assigned PID\necho 0x00  &gt; ${CONFIGFS_GADGET_PATH}/bDeviceClass\necho 0x00 &gt; ${CONFIGFS_GADGET_PATH}/bDeviceSubClass\necho 0x00 &gt; ${CONFIGFS_GADGET_PATH}/bDeviceProtocol\n\nmkdir -p ${CONFIGFS_GADGET_PATH}/strings/0x409\n\necho ${GADGET_SERIAL_NUMBER} &gt; ${CONFIGFS_GADGET_PATH}/strings/0x409/serialnumber\necho ${GADGET_MANUFACTURER} &gt; ${CONFIGFS_GADGET_PATH}/strings/0x409/manufacturer\necho ${GADGET_PRODUCT} &gt; ${CONFIGFS_GADGET_PATH}/strings/0x409/product\n\nmkdir -p ${CONFIGFS_GADGET_PATH}/configs/c.1/strings/0x409\necho ${GADGET_CONFIG_DESCRIPTION} &gt; ${CONFIGFS_GADGET_PATH}/configs/c.1/strings/0x409/configuration\n\n###################### mass storage ########################\nmkdir -p ${CONFIGFS_GADGET_PATH}/functions/mass_storage.usb0\necho /usr/local/mass_storage.disk &gt; ${CONFIGFS_GADGET_PATH}/functions/mass_storage.usb0/lun.0/file\nln -s ${CONFIGFS_GADGET_PATH}/functions/mass_storage.usb0 ${CONFIGFS_GADGET_PATH}/configs/c.1/\n############################################################\n\necho ${UDC_NAME} &gt; ${CONFIGFS_GADGET_PATH}/UDC\n</code></pre>"},{"location":"architecture/Summary/Contents/usb/usbr_utilities/#usb-logical-device-driver","title":"USB Logical Device Driver","text":"<p>The driver provided for the USB Logical Device is an application written in C and potentially portable to any OS compatible with libusb (https://libusb.info/)</p> <p>This application will generate arbitrary traffic over the two data endpoints. The type of traffic to be generated is parameterized and can be bulk or isochronous. There is also a parameter for the transfer size.</p> <p>It is important to note that endpoint addresses, type of transfers supported, transfer sizes are not imposed by this application but by the device itself via its descriptors shared with USB Host during the enumeration.</p> <p>List of parameters supported by host application:</p> <pre><code>./blackbox_logical_device_driver\n./blackbox_logical_device_driver: &lt;compilation date&gt;\nMust have root permissions (sudo) to successfully run\nUSAGE: ./blackbox_logical_device_driver &lt;vendor-id&gt; &lt;product-id&gt;\n        must be run with root permissions (sudo)!\n--packet_count: number of packets to send/receive (default: infinite)\n--disable_rx: disable receive packets\n--disable_tx: disable transmit packets\n--rx_crc: display rx crc debug info\n--tx_crc: display tx crc debug info\n--ignore_rx_crc: ignore rx crc verification failure\n--rx_data: display rx debug data\n--tx_data: display tx debug data\n--xfer_size=&lt;numbytes&gt;: set transfer size (default=512 bytes)\n--xfer_type=&lt;transfertype&gt;: set transfer type [0=int 1=isoch 2=bulk] (default=2)\n--vendor_id=&lt;xxxx&gt;: 4 digit vendor id (default=325a)\n--product_id=&lt;xxxx&gt;: 4 digit product id (default=0001)\n--flush: clear the buffers\n--scenario=&lt;scenario&gt;: set test scenario (default=0)\n--help: this help\n--loud:  increase verbosity\n--quiet: reduce verbosity\n</code></pre>"},{"location":"architecture/Summary/Contents/video/cut-through/","title":"Video Cut-Through","text":""},{"location":"architecture/Summary/Contents/video/cut-through/#master-document-revision-history","title":"Master Document Revision History","text":"Date Version Description Author/Editor 13-Feb-2023 0.1 First Draft Micheal Donohue 24-Feb-2023 1.0 Initial Release Micheal Donohue"},{"location":"architecture/Summary/Contents/video/cut-through/#introduction","title":"Introduction","text":"<p>The video cut-through feature allows reduction of system video latency by allowing the transmission of partial frames from the Encoder to the Decoder.</p> <p>Note</p> <p>Video Cut Through is currently only enabled for Lossless connections</p>"},{"location":"architecture/Summary/Contents/video/cut-through/#configuration-of-cut-through-for-lossless-connections","title":"Configuration of Cut-Through for Lossless connections","text":"<p>Info</p> <p>All registers offsets referenced are located in the Emerald 4K IP which base address is currently <code>0x8000_0000</code>.</p> <p>The cut-through threshold stands for the number of the cut-through rows and it starts from 0. Each row consists of a number of 64x64 pixel tiles depending on the screen resolution. The cut-through threshold should not be higher than the maximum row coordinate. While the encoder and decoder threshold values can be set independently, cut through must be enabled on both sides for connections to work.</p>"},{"location":"architecture/Summary/Contents/video/cut-through/#transmitter-registers","title":"Transmitter Registers","text":"Register Address Register Name Register Width (bits) 0x8E0C Cut-through Threshold 8 0x8E10 Cut-through enable 8"},{"location":"architecture/Summary/Contents/video/cut-through/#receiver-registers","title":"Receiver Registers","text":"Register Address Register Name Register Width (bits) 0x1418 Cut-through Threshold 8 0x1414 Cut-through enable 8"},{"location":"architecture/Summary/Contents/video/cut-through/#transmitter-configuration","title":"Transmitter Configuration","text":"<p>The cut-through threshold on the transmitter shall be set to the second row (threshold set to 0x01). Setting of the register shall be performed in the <code>DP_Emerald_Encoder</code> application running on RPU0.</p>"},{"location":"architecture/Summary/Contents/video/cut-through/#receiver-configuration","title":"Receiver Configuration","text":"<p>The cut-through threshold on the receiver shall be set to a 1/4 frame, the threshold value will be calculated as follows</p> <pre><code>//Calculate the number of rows with the values rounded up\nquarter_pixels = (screen_height + 4 - 1 ) / 4;\nthreshold = ((quarter_pixels + 64 - 1) / 64) - 1;\n</code></pre> <p>Each time a resolution change is required the receiver cut-through threshold shall be re-calculated and reprogrammed in the <code>DP_Emerald_Decoder</code> application running on RPU0.</p>"},{"location":"architecture/Summary/Contents/video/emerald4k_rx_scaling/","title":"Emerald 4K Receiver Scaling","text":"<p>Emerald4K Receivers supports hardware resolution upscaling on all data paths. This document describes the first implementation of scaling which only supports the optimized datapath. Due to limitations of the IP not all resolutions are supported by upscaling, see the table below for latest supported configs. The maximum supported output resolution of the scaler is 4096x2160@60Hz.</p>"},{"location":"architecture/Summary/Contents/video/emerald4k_rx_scaling/#scaler-ip-and-configuration","title":"Scaler IP and Configuration","text":"<p>The scaler implementation uses the Video Processing Subsystem IP from Xilinx. This IP is configured in the <code>DP_Emerald_Decoder</code> application which runs on RPU0 using the API provided by the Xilinx BSP. MD put link to RPU documentation here.</p>"},{"location":"architecture/Summary/Contents/video/emerald4k_rx_scaling/#fpga-hardware-overview","title":"FPGA Hardware Overview","text":"<p>The upscaling functionality is implemented using a group of blocks of IP\u2019s connected together in hardware to capture the actual DVI video, upscale it and regenerates a new DVI video. The below block diagram gives a detailed breakdown of the hardware. </p> <p></p> <p>Upscaling is the process of converting an input video with a given resolution to an output video with a larger resolution. It converts a specific rectangular area from original grid to a bigger rectangular area. The video upscaler runs in stream mode, it means that there is no frame buffer, the video is process \u201cas it comes\u201d from the 4k Decoder IP. The process latency is around 7 video lines (6 tap process).</p> <p>The design has two DVI timing generators and two video clocks, for input and output resolutions respectively. The output video will have a custom resolution calculated based in the input resolution multiplied by the scale factor that will be applied (it can be the opposite, external resolution fixed and internal custom).</p>"},{"location":"architecture/Summary/Contents/video/emerald4k_rx_scaling/#software-implementation-overview","title":"Software Implementation Overview","text":"<p>Info</p> <p>Though the hardware supports upscaling in both the Tile Differencing and YUV datapath the current implementation only uses the YUV path.</p>"},{"location":"architecture/Summary/Contents/video/emerald4k_tx_scaling/","title":"Emerald 4K Transmitter Scaling","text":"<p>Emerald4K currently supports hardware resolution scaling on the YUV data-path. The maximum supported resolution of the YUV data-path is 1920x1200 any input resolution over this will be scaled. Where possible the input resolution shall be scaled to a resolution with a similar aspect ratio.</p>"},{"location":"architecture/Summary/Contents/video/emerald4k_tx_scaling/#scaler-ip-and-configuration","title":"Scaler IP and Configuration","text":"<p>The scaler implementation uses the Video Processing Subsystem IP from Xilinx. This IP is configured in the <code>DP_Emerald_Encoder</code> application which runs on RPU0 using the API provided by the Xilinx BSP.</p>"},{"location":"architecture/Summary/Contents/video/emerald4k_tx_scaling/#fpga-hardware-overview","title":"FPGA Hardware Overview","text":"<p>To facilitate downscaling the Video Process IP block has been added after the Emerald Line Buffer IP with two scaler bypass muxs before each Encoder block (Tile Diff and YUV) as can be seen in the diagram below.</p> <p></p> <p>As the scaler is in parallel with the unscaled input path it can be fully configured after each resolution change with the relevant downscaled resolution without effecting the unscaled path. To facilitate scaling support the FPGA configuration now has the concept of an <code>external</code> and <code>internal</code> resolution, the <code>external</code> resolution is the input video received from the DisplayPort RX IP and the <code>internal</code> resolution can either be the unscaled or scaled resolution received by the Encoder blocks.</p>"},{"location":"architecture/Summary/Contents/video/emerald4k_tx_scaling/#software-implementation-overview","title":"Software Implementation Overview","text":"<p>Info</p> <p>Though the hardware supports scaling in both the Tile Differencing and YUV datapath the current implementation only uses the YUV path.</p>"},{"location":"architecture/Summary/Contents/video/emerald4k_tx_scaling/#configuration","title":"Configuration","text":""},{"location":"architecture/Summary/Contents/video/emerald4k_tx_scaling/#video-process-ip","title":"Video Process IP","text":"<p>Initialisation and configuration of the Video Process block is done using the Xilinx API provided through the BSP code in the <code>bb_scaler.c</code> module. As part of the configuration detailed video timing must be provided to the video process block for the output resolution, this timing defaults to <code>CVT-RB</code> and is calculated in the module <code>bb_modeline.c</code>.</p>"},{"location":"architecture/Summary/Contents/video/emerald4k_tx_scaling/#encoder-block-ip","title":"Encoder Block IP","text":"<p>Currently the maximum supported resolution of the YUV datapath is 1920x1200 60Hz hence if the video outputted by the DisplayPort RX IP is greater than this we can assume scaling must be enabled on the YUV path. Where possible the input aspect ratio shall be maintained, however some resolutions will not display well on HD panels e.g. 32:9, ~21:9. These shall be scaled to 1920x1080. The below table maps the most common aspect ratios to the scaler output resolution and aspect ratios, common resolutions with an already covered Input aspect ratio have been omitted from the table for brevity.</p>"},{"location":"architecture/Summary/Contents/video/emerald4k_tx_scaling/#input-to-output-resolution-table","title":"Input to Output Resolution Table","text":"Input Resolution Input Aspect Ratio Scaled Output Output Aspect Ratio 4096x2160 ~17:9 1920x1080 16:9 3840x2160 16:9 1920x1080 16:9 3840x1600 21:9 1920x1080 16:9 3840x1080 32:9 1920x1080 16:9 2560x1600 8:5 1680x1050 8\u22365 2560x1440 16:9 1920x1080 16:9 2560x2048 5:4 1280x1024 5:4 2048x2048 1:1 1080x1080 1:1 2048x1536 4:3 1600x1200 4:3"},{"location":"architecture/Summary/Contents/video/emerald4k_tx_scaling/#user-space-configuration","title":"User Space Configuration","text":""},{"location":"architecture/Summary/Contents/video/emerald4k_tx_scaling/#capture-layer","title":"Capture-Layer","text":"<p>Scaling configuration information has been added to the APU/RPU Shared memory space at the following positions.</p> Memory Offset Data Units Data Type <code>0x5EC0_000C</code> Scaled Width Pixels uint16_t <code>0x5EC0_000E</code> Scaled Height Pixels uint16_t <code>0x5EC0_0010</code> Scaled Refresh Rate Hertz uint16_t <code>0x5EC0_0012</code> Scaler Enabled bool bool <p>The <code>Capture-Layer</code> API has been updated to provide a method to read these values. </p>"},{"location":"architecture/Summary/Contents/video/emerald4k_tx_scaling/#server-emerald","title":"Server Emerald","text":"<p>When performing resolution detection the scaled resolution details must also be read and maintained in <code>hardware_manager</code>. When configuring the YUV FPGA block the scaled resolution values must be used if the Scaler Enabled bit is set. At the point of YUV block configuration if the Scaler Enabled bit is set then the YUV scaler MUX bit (0xDFA1 Bit[0]) is automatically enabled in capture-layer.</p> <p>As the connection resolution could be either the input/unscaled resolution or the scaled resolution depending on connection type a check is needed in the connection manager state machine once the connection compression type has been determined. The below sequence diagram shows when this check occurs</p> sequenceDiagram     participant TX Connection Manager State Machine     participant TX Connection Manager     participant RDP Client      RDP Client-&gt;&gt;TX Connection Manager: cm_new_client()     TX Connection Manager-&gt;&gt;TX Connection Manager: connection_manager_handle_server_peer_ready()     TX Connection Manager-&gt;+TX Connection Manager State Machine: connection_manager_state_machine     Note left of TX Connection Manager State Machine:If EMD4K Server and connection type is OPTIMISED then use scaled resolution     TX Connection Manager State Machine-&gt;-TX Connection Manager: okay"},{"location":"architecture/appliance_rest_api/appliance_rest_api/","title":"Device REST API","text":"<ul> <li>Current Version: REST API v1.0.11</li> <li>Current Document Version: 0.11(this is the 0.10 version reformatted)</li> </ul>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#master-document-revision-history","title":"Master Document Revision History","text":"Date Version Description Author/Editor 27/11/17 0.1 First Draft Marcus McInerney 1/12/17 0.2 Second Draft Marcus McInerney 29/05/18 0.3 Third Draft Marcus McInerney 27/11/19 0.4 Fourth Draft Marcus McInerney 22/10/20 0.5 Fifth Draft John O'Sullivan 02/12/20 0.6 REST API v1.0.8 updates Dan O'Donovan 07/07/21 0.7 REST API v1.0.9 Marcus McInerney 24/03/22 0.8 REST API v1.0.10 Pratima Deshpande 30/06/22 0.9 REST API v1.0.11 John O'Sullivan 21/02/23 0.10 REST API v1.0.11 Olga Birkvalde 16/05/23 0.11 REST API v1.0.11 John O'Sullivan <p>This document describes REST API for all Black Box Appliances (It does not include SDKVM and GE).</p> <p>All API command request class parameters must be specified unless otherwise stated.</p> <p>Note on representation formats: The section on Error Handling and Get Endpoints provide tables that specify the formats of request and response class parameters. The formats used are as follows:</p> <ul> <li> <p>Character arrays: The numbers specified indicate the maximum size of the character array, for example 256 byte char array means that the character array has a capacity of 256, in practice its content may be less than this.</p> </li> <li> <p>Integers: All int values used in the response classes are formatted using the json_integer function defined in the jansson framework. Int values are unsigned and can have a maximum value of 264<sup>1</sup>.</p> </li> <li> <p>Doubles: All double values used in the response classes are formatted using the json_real function defined in the jansson framework. Double parameters and can have a minimum of 10<sup>-18</sup> and a maximum of 232 .</p> </li> </ul>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#references","title":"References","text":"<ul> <li>Reference 1</li> <li>Reference 2</li> <li>Reference 3</li> <li>Reference 4</li> <li>REST API Test report</li> </ul>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#versioning","title":"Versioning","text":"<p>The version of the API is defined as a key-value pair whereby the key is api-version and the value represents the version.</p> <p>Key = api-version value = 1.0.4</p> <p>The format for the version value is x.y.z (major.minor.revision). Validation of the key-value pair is case insensitive. The API version obtained using the version URL 4.1</p> <p>If a new URL or a new version of an existing URL is defined, the API version minor field will be incremented and the updated URL will be defined in get end point summary table. The same applies for deprecated endpoints.</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#error-handling","title":"Error handling","text":"<p>Version 1.0.4 of the REST API will use the following subset of HTTP status codes for error handling, defined in 10</p> <ul> <li>200 OK</li> <li>400 Bad Request</li> <li>403 Forbidden</li> <li>404 Not Found</li> <li>500 Internal Server Error</li> </ul>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#configuration-codes","title":"Configuration Codes","text":""},{"location":"architecture/appliance_rest_api/appliance_rest_api/#transmitter-settings-codes","title":"Transmitter Settings Codes","text":"<p>The following table provides the numeric code for each of the transmitter configuration settings.</p> code video quality video source optimization hid 2K head1 edid 2k head2 edid 4k head1 edid mouse/keyboard timeout audio source 0 Best quality off default 1920x1080 1920x1080 default 0 analog source 1 2 dvi optimised basic 1920 x 1200 1920 x 1200 3840x2160p60Hz 1 display port source 2 default vga high performance mac 1680 x 1050 1680 x 1050 3840x2160p30Hz 2 3 4 vga optimised absolute 1280 x 1024 1280 x 1024 2560x1440p60Hz 3 4 best compression vga low bandwidth absolute mac 1024 x 768 1024 x 768 1920x1080p60Hz 4 5 - - absolute basic clone clone clone 5"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#receiver-settings-codes","title":"Receiver Settings Codes","text":"<p>The following table provides the numeric code for each of the transmitter configuration settings.</p> code power mode http enable rx scaling 0 manual disabled disabled 1 auto enabled enabled \" \" not supported \" \" <p>PS: Please note, power_mode is a feature supported only for CORRIB and DEEL devices and not supported anymore for Emerald devices.</p> <p>rx_scaling is supported for only 4K emerald devices.</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#osd-log-in-status-strings","title":"OSD log in status strings","text":"<p>The following table provides the context strings for each log in type.</p> context rest login auto login manual login post connection login"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#http-status-codes","title":"HTTP Status Codes","text":"<p>The following table specified the HTTP status codes used by the REST API. (ref: https://en.wikipedia.org/wiki/List_of_HTTP_status_codes)</p> type description 200 OK General success status code. This is the most common code. Used to indicate success. 400 BAD REQUEST General error for when fulfilling the request would cause an invalid state. Domain validation errors, missing data, etc. are some examples. It is generally used when there is PARAMETER ERROR with the request. 401 UNAUTHORISED Similar to\u00a0403 Forbidden, but specifically for use when authentication is required and has failed or has not yet been provided. The response must include a WWW-Authenticate header field containing a challenge applicable to the requested resource. See\u00a0Basic access authentication\u00a0and\u00a0Digest access authentication.[33]\u00a0401 semantically means \"unauthorised\",[34]\u00a0the user does not have valid authentication credentials for the target resource. 403 FORBIDDEN The request contained valid data and was understood by the server, but the server is refusing action. This may be due to the user not having the necessary permissions for a resource or needing an account of some sort, or attempting a prohibited action (e.g. creating a duplicate record where only one is allowed). This code is also typically used if the request provided authentication via the WWW-Authenticate header field, but the server did not accept that authentication. The request should not be repeated. 404 NOT FOUND The requested resource could not be found but may be available in the future. Subsequent requests by the client are permissible. 500 INTERNAL SERVER ERROR A generic error message, given when an unexpected condition was encountered and no more specific message is suitable."},{"location":"architecture/appliance_rest_api/appliance_rest_api/#uri-hardware-matrices","title":"URI Hardware Matrices","text":""},{"location":"architecture/appliance_rest_api/appliance_rest_api/#appliance-configuration","title":"Appliance configuration","text":"URI rx corrib rx emerald se rx emerald pe rx zerou rx emerald 4K tx corrib tx emerald se tx emerald pe tx zerou /configuration/rx_settings \u2713 \u2713 \u2713 \u2713 \u2713 \u2573 \u2573 \u2573 \u2573 /configuration/tx_settings \u2573 \u2573 \u2573 \u2573 \u2573 \u2713 \u2713 \u2713 \u2713 /configuration/tx_clone_name \u2573 \u2573 \u2573 \u2573 \u2573 \u2713 \u2713 \u2713 \u2713 /configuration/rx_edid_table1 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2573 \u2573 \u2573 /configuration/rx_edid_table2 \u2713 \u2713 \u2713 \u2713 \u2713 \u2573 \u2573 \u2573 \u2573 /configuration/tx_edid_table1 \u2573 \u2573 \u2573 \u2573 \u2573 \u2713 \u2713 \u2713 \u2713 /configuration/tx_edid_table2 \u2573 \u2573 \u2573 \u2573 \u2573 \u2713 \u2713 \u2713 \u2713"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#statistics","title":"Statistics","text":"URI rx corrib rx emerald se rx emerald pe rx zerou rx emerald 4K tx corrib tx emerald se tx emerald pe tx zerou tx emerald4K /statistics/facts/system_facts \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /statistics/facts/video_facts \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /statistics/facts/audio_facts \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /statistics/facts/analog_audio_facts \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /statistics/facts/usb_audio_facts \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /statistics/facts/usb_facts \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /statistics/previous_connections \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /statistics/active_connections \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /statistics/connection_control \u2713 \u2713 \u2713 \u2713 \u2713 \u2573 \u2573 \u2573 \u2573 \u2573 /statistics/facts/network/physical \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /statistics/facts/network/toe_connections \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#control","title":"CONTROL","text":"URI action rx corrib rx emerald se rx emerald pe rx zerou rx emerald 4K tx corrib tx emerald se tx emerald pe /control flush \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /control flush_authentication_stats \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /control flush_active_connections \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /control transform_active_previous \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /control reset_authentication_stats \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /control reboot_device \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /control/user - \u2713 \u2713 \u2713 \u2713 \u2713 \u2573 \u2573 \u2573 /control/user log_off \u2713 \u2713 \u2713 \u2713 \u2713 \u2573 \u2573 \u2573 /control/connections make_connection \u2713 \u2713 \u2713 \u2713 \u2713 \u2573 \u2573 \u2573 /control/connections force_connection \u2713 \u2713 \u2713 \u2713 \u2713 \u2573 \u2573 \u2573 /control/connections terminate_connection \u2713 \u2713 \u2713 \u2713 \u2713 \u2573 \u2573 \u2573 /control/connections terminate_connection_no_osd \u2713 \u2713 \u2713 \u2713 \u2713 \u2573 \u2573 \u2573 /control/connections connection_termination,exit code,exit_message \u2713 \u2713 \u2713 \u2713 \u2713 \u2573 \u2573 \u2573 /control/safe_mode - \u2573 \u2573 \u2573 \u2573 \u2713 \u2573 \u2573 \u2573 /control/process? - \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /control/upgrade/diskspace - \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 /control/upgrade/process/status - \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 /control/upgrade/process/status - \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 /control/upload - \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 /control/largefileupload - \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 /control/upgrade/start - \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 /control/configure/network - \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 /control/unmanage - \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 /control/upgrade/remove - \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 /control/zone - \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /control/diags/loglevel - \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /control/led - \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /control/configuration/timers_configuration - \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /control/configuration/bonded_group - \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /control/configuration/tx_edid_table_1* - \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /control/configuration/tx_edid_table_2* - \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#misc","title":"MISC","text":"URI action rx corrib rx emerald se rx emerald pe rx zerou rx emerald 4K tx corrib tx emerald se tx emerald pe /control flush \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /version - \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /alerts - \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#end-points","title":"End Points","text":""},{"location":"architecture/appliance_rest_api/appliance_rest_api/#rest-api-put-commands","title":"REST API PUT Commands","text":"<p>The following table specifies endpoints accessed using the PUT verb.</p> URL Control Object (action) Verb 1.0.11 1.0.10 1.0.9 1.0.8 1.0.7 1.0.6 1.0.5 1.0.4 /control/configuration/rx_settings - PUT \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /control/configuration/tx_settings - PUT \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /control/configuration/tx_edid_table_1* - PUT \u2573 \u2573 \u2573 \u2573 \u2573 \u2713 \u2713 /control/configuration/tx_edid_table_2* - PUT \u2573 \u2573 \u2573 \u2573 \u2573 \u2713 \u2713 /control/configuration/zone - PUT \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2573 \u2573 /control/configuration/bonded_group - PUT \u2713 \u2713 \u2713 \u2713 \u2713 \u2573 \u2573 \u2573 /control/configuration/timers_configuration - PUT \u2713 \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 /control flush PUT \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /control transform_active_previous PUT \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /control reset_authentication_stats PUT \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /control reboot_device PUT \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2573 /control log_off PUT \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /control make_connection PUT \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /control force_connection PUT \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /control/connections action: terminate_connection PUT \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /control/connections action: terminate_connection_no_osd PUT \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /control/connections action: connection_termination, exit_message: \"\",exit_code: \"\" PUT \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2573 \u2573 /control/diags/loglevel - PUT \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /control/diags/run - PUT \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /control/led led_enable/led_disable PUT \u2713 \u2713 \u2713 \u2573 \u2573 \u2573 \u2573 \u2573 /user/login - PUT \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2573"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#put-logoff-user","title":"PUT Logoff User","text":""},{"location":"architecture/appliance_rest_api/appliance_rest_api/#url","title":"URL","text":"<p>https://IP:8888/control/user</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#implementations-notes","title":"Implementations Notes","text":"<p>This node logs off the current user.</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#request-class-definition","title":"Request Class Definition","text":"Parameter Format action 32 byte char array"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#request-class-json-structure","title":"Request Class JSON Structure","text":"<pre><code>{\n  \"action\": \"log_off\"\n}\n</code></pre>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#put-reboot","title":"PUT Reboot","text":""},{"location":"architecture/appliance_rest_api/appliance_rest_api/#url_1","title":"URL","text":"<p>https://IP:8888/control</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#implementations-notes_1","title":"Implementations Notes","text":"<p>This node reboots the appliance.</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#request-class-definition_1","title":"Request Class Definition","text":"Parameter Format action 32 byte char array"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#request-class-json-structure_1","title":"Request Class JSON Structure","text":"<pre><code>{\n  \"action\": \"reboot_device\"\n}\n</code></pre>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#put-connectionlegacy","title":"PUT Connection(Legacy)","text":""},{"location":"architecture/appliance_rest_api/appliance_rest_api/#url_2","title":"URL","text":"<p>http://IP:7778/corrib/control/connections</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#implementations-notes_2","title":"Implementations Notes","text":"<p>This node establishes a connection between the Receiver and the Transmitter specified. The transmitter value represents the IP address of the transmitter.</p> <p>The connection is established with the following fixed parameters:</p> <ul> <li>resolution 1920 x 1080</li> <li>Connection type set to Private</li> <li>USB redirection is disabled</li> <li>NLA disabled</li> <li>Persistent connection is disabled</li> </ul>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#request-class-definition_2","title":"Request Class Definition","text":"Parameter Format action log-off user 32 byte char transmitter ip addressof tx"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#request-class-json-structure_2","title":"Request Class JSON Structure","text":"<pre><code>{\n  \"action\": \"make_connection\",\n  \"user\": \"demo\",\n  \"transmitter\": \"10.211.129.54\"\n}\n</code></pre>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#put-connection-secure","title":"PUT Connection Secure","text":""},{"location":"architecture/appliance_rest_api/appliance_rest_api/#url_3","title":"URL","text":"<p>https://IP:8888/control/connections</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#implementation-notes","title":"Implementation Notes","text":"<p>This node establishes a connection between the Receiver and the Transmitter specified.</p> <p>The transmitter value represents the IP address of the transmitter. The connection is established with the following fixed parameters:</p> <ul> <li>resolution 1920 x 1080</li> <li>Connection type set to Private</li> <li>USB redirection is disabled</li> <li>NLA disabled</li> <li>persistent connecyion is disabled</li> </ul>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#request-class-json-structure_3","title":"Request Class JSON Structure","text":"<pre><code>{\n  \"action\": \"make_connection\",\n  \"user\": \"demo\",\n  \"transmitter\": \"10.211.129.54\"\n}\n</code></pre>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#request-class-formats","title":"Request Class Formats","text":"Parameter Format action make connection user 32 byte char array transmitter 45 byte char array"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#put-force-conenction","title":"PUT Force Conenction","text":""},{"location":"architecture/appliance_rest_api/appliance_rest_api/#url_4","title":"URL","text":"<p>http://IP:7778/control/connections</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#implementation-notes_1","title":"Implementation Notes","text":"<p>This node establishes a connection between the Receiver and the Transmitter specified over HTTP. This object contains parameters used to log in a user and launch an associated connection. The user and associated connection must be configured prior calling this URL.</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#request-class-json-structure_4","title":"Request Class JSON Structure","text":"<pre><code>{\n  \"action\": \"force_connection\",\n  \"connection\": \"default-connection\",\n  \"user\": \"cb-user\"\n}\n</code></pre>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#request-class-formats_1","title":"Request Class Formats","text":"Parameter Format action force connection connection 32 byte char array user 32 byte char array"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#put-force-connection-secure","title":"PUT Force Connection Secure","text":""},{"location":"architecture/appliance_rest_api/appliance_rest_api/#url_5","title":"URL","text":"<p>http://IP:8888/control/connections</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#implementation-notes_2","title":"Implementation Notes","text":"<p>This node establishes a connection between the Receiver and the Transmitter specified over HTTP. This object contains parameters used to log in a user and launch an associated connection. The user and associated connection must be configured prior calling this URL.</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#request-class-json-structure_5","title":"Request Class JSON Structure","text":"<pre><code>{\n    \"action\": \"force_connection\",\n    \"connection\": \"default-connection\"\n    \"user\": \"cb-user\",\n}\n</code></pre>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#request-class-formats_2","title":"Request Class Formats","text":"Parameter Format action force connection connection 32 byte char array user 32 byte char array"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#put-terminate-connection-legacy","title":"PUT Terminate Connection Legacy","text":""},{"location":"architecture/appliance_rest_api/appliance_rest_api/#url_6","title":"URL","text":"<p>http://IP:7778/corrib/control/connections</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#implementation-notes_3","title":"Implementation Notes","text":"<p>This node terminates an existing connection over HTTP.</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#request-class-json-structure_6","title":"Request Class JSON Structure","text":"<pre><code>{\n  \"action\": \"terminate_connection\"\n}\n</code></pre>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#request-class-formats_3","title":"Request Class Formats","text":"Parameter Format action terminate connection"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#put-terminate-conenction-secure","title":"PUT Terminate Conenction Secure","text":""},{"location":"architecture/appliance_rest_api/appliance_rest_api/#url_7","title":"URL","text":"<p>https://IP:8888/corrib/control/connections</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#implementation-notes_4","title":"Implementation Notes","text":"<p>This node terminates an existing connection over HTTPS.</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#request-class-json-structure_7","title":"Request Class JSON Structure","text":"<pre><code>{\n  \"action\": \"terminate_connection\"\n}\n</code></pre>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#request-class-formats_4","title":"Request Class Formats","text":"Parameter Format action terminate connection"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#put-terminate-connection-no-osd","title":"PUT Terminate Connection No OSD","text":""},{"location":"architecture/appliance_rest_api/appliance_rest_api/#url_8","title":"URL","text":"<p>https://IP:8888/corrib/control/connections</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#implementation-notes_5","title":"Implementation Notes","text":"<p>This node terminates an existing connection over HTTPS.</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#request-class-json-structure_8","title":"Request Class JSON Structure","text":"<pre><code>{\n  \"action\": \"terminate_connection_no_osd\"\n}\n</code></pre>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#request-class-formats_5","title":"Request Class Formats","text":"Parameter Format action terminate connection no osd"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#put-terminate-with-exit-code-and-reason-message","title":"PUT Terminate with Exit Code and Reason message","text":""},{"location":"architecture/appliance_rest_api/appliance_rest_api/#url_9","title":"URL","text":"<p>https://IP:8888/control/connections</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#implementation-notes_6","title":"Implementation Notes","text":"<p>This node terminates a bonded connection over HTTPS.</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#request-class-json-structure_9","title":"Request Class JSON Structure","text":"<pre><code>{\n  \"action\": \"connection_termination\",\n  \"exit_message\": \"Bonded connection terminated by REC-1A\",\n  \"exit_code\": 1\n}\n</code></pre>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#request-class-formats_6","title":"Request Class Formats","text":"Parameter Format action terminate connection exit message 512 byte char array exit code integer"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#exit-code-options","title":"Exit code options","text":"Parameter Format 0 Non-bonded connection termination 1 Bonded connection termination"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#put-flush","title":"PUT Flush","text":""},{"location":"architecture/appliance_rest_api/appliance_rest_api/#url_10","title":"URL","text":"<p>https://IP:8888/control</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#implementation-notes_7","title":"Implementation Notes","text":"<p>This node flushes JSON queues.</p> <p>The options are as follows:</p> <ul> <li>flush: Flushes all records</li> <li>flush_authentication_stats: Flushes authentication records</li> <li>flush_active_connections: Flushes active connections</li> <li>transform_active_previous: Transforms active records to previous</li> <li>reset_authentication_stats: Resets authentication statistics</li> </ul>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#request-class-json-structure_10","title":"Request Class JSON Structure","text":"<pre><code>{\n  \"action\": \"flush_active_connection\"\n}\n</code></pre>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#request-class-formats_7","title":"Request Class Formats","text":"Parameter Format action 255 byte char array"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#put-reciever-settings","title":"PUT Reciever Settings","text":""},{"location":"architecture/appliance_rest_api/appliance_rest_api/#url_11","title":"URL","text":"<p>https://IP:8888/control/configuration/rx_setting</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#implementation-notes_8","title":"Implementation Notes","text":"<p>This node sets Receiver device settings. The request class parameters are optional.</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#request-class-json-structure_11","title":"Request Class JSON Structure","text":"Parameter Format power mode int 0 or 1 string \" \" http_enable int 0 or 1 rx_scaling int 0 or 1"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#request-class-formats_8","title":"Request Class Formats","text":"<pre><code>{\n       \"power_mode\": 1\n       \"http_enable\": 1\n       \"rx_scaling\": 1\n}\n</code></pre> <p>PS: Please note, power_mode is a feature supported only for CORRIB and DEEL devices and not supported anymore for Emerald devices.</p> <p>rx_scaling is supported for only 4K emerald devices.</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#put-transmitter-settings","title":"PUT Transmitter Settings","text":""},{"location":"architecture/appliance_rest_api/appliance_rest_api/#url_12","title":"URL","text":"<p>https://IP:8888/control/configuration/tx_setting</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#implementation-notes_9","title":"Implementation Notes","text":"<p>_This node sets Transmitter device settings. _</p> <p>Note that the request class differs depending on whether the transmitter is single or dual head. All applicable request class parameters must be specified.</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#request-class-json-structure-single-head-transmitter","title":"Request Class JSON Structure Single Head Transmitter","text":"<pre><code>{\n    \"video_quality\": 1,\n    \"video_source_optimisation\": 1,\n    \"mouse_keyboard_timeout\":1,\n    \"hid\": 1,\n    \"head_1_edid\":5\n    \"audio_source\":1\n\n}\n</code></pre>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#request-class-json-structure-dual-head-transmitter","title":"Request Class JSON Structure Dual Head Transmitter","text":"<pre><code>{\n  \"video_quality\": 1,\n  \"hid\": 1,\n  \"mouse_keyboard_timeout\": 1,\n  \"head_1_edid\": 1,\n  \"head_2_edid\": 5,\n  \"audio_source\": 1\n}\n</code></pre>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#request-class-formats_9","title":"Request Class Formats","text":"Parameter Format Single Head Dual Head video quality int \u2713 \u2713 video source optimization int \u2713 \u2573 hid int \u2713 \u2713 mouse keyboard timeout int \u2713 \u2713 head 1 edid int \u2713 \u2713 head 2 edid int \u2573 \u2713 audio source int \u2713 \u2713"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#put-edid-on-transmitter-head-1","title":"PUT EDID on Transmitter Head 1","text":""},{"location":"architecture/appliance_rest_api/appliance_rest_api/#url_13","title":"URL","text":"<p>https://IP:8888/control/configuration/tx_edid_table_1</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#implementation-notes_10","title":"Implementation Notes","text":"<p>This node copies the specified EDID information to a Transmitter device. This represents the EDID information previously read from the Receiver.</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#request-class-json-structure-single-head-transmitter_1","title":"Request Class JSON Structure Single Head Transmitter","text":"<pre><code>{\n  \"edid_table\": \"GUI OPTION 6 DELL_E2210HBB\\n0 ff ff ff ff ff ff 0 \\n10 ac 31 d0 d2 2 96 49 \\na 14 1 3 80 30 1b 78 \\nee ee 95 a3 54 4c 99 26 \\nf 50 54 a5 4b 0 71 4f \\n81 80 d1 c0 1 1 1 1 \\n1 1 1 1 1 1 2 3a \\n80 18 71 38 2d 40 58 2c \\n45 0 dd c 11 0 0 1e \\n0 0 0 ff 0 44 35 35 \\n33 52 30 33 39 30 59 5a \\n4c a 0 0 0 fc 0 44 \\n45 4c 4c 20 45 32 32 31 \\n30 48 42 42 0 0 0 fd \\n0 32 4c 1e 53 11 0 a \\n20 20 20 20 20 20 0 13 \\n\"\n}\n</code></pre>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#put-edid-on-transmitter-head-2","title":"PUT EDID on Transmitter Head 2","text":""},{"location":"architecture/appliance_rest_api/appliance_rest_api/#url_14","title":"URL","text":"<p>https://IP:8888/control/configuration/tx_edid_table_2</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#implementation-notes_11","title":"Implementation Notes","text":"<p>This node copies the specified EDID information to a Transmitter device. This represents the EDID information previously read from the Receiver.</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#request-class-json-structure-single-head-transmitter_2","title":"Request Class JSON Structure Single Head Transmitter","text":"<pre><code>{\n  \"edid_table\": \"GUI OPTION 6 DELL_E2210HBB\\n0 ff ff ff ff ff ff 0 \\n10 ac 31 d0 d2 2 96 49 \\na 14 1 3 80 30 1b 78 \\nee ee 95 a3 54 4c 99 26 \\nf 50 54 a5 4b 0 71 4f \\n81 80 d1 c0 1 1 1 1 \\n1 1 1 1 1 1 2 3a \\n80 18 71 38 2d 40 58 2c \\n45 0 dd c 11 0 0 1e \\n0 0 0 ff 0 44 35 35 \\n33 52 30 33 39 30 59 5a \\n4c a 0 0 0 fc 0 44 \\n45 4c 4c 20 45 32 32 31 \\n30 48 42 42 0 0 0 fd \\n0 32 4c 1e 53 11 0 a \\n20 20 20 20 20 20 0 13 \\n\"\n}\n</code></pre>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#request-class-formats_10","title":"Request Class Formats","text":"Parameter Format edid table 256 byte char array"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#request-class-formats_11","title":"Request Class Formats","text":"Parameter Format edid table 265 byte char array"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#put-zone","title":"PUT Zone","text":""},{"location":"architecture/appliance_rest_api/appliance_rest_api/#url_15","title":"URL","text":"<p>https://IP:8888/control/configuration/zone</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#implementation-notes_12","title":"Implementation Notes","text":"<p>This node sets the appliance zone. When this endpoint is called the zone variable written to the sqlite3 database on the appliance. This entry is used to ensure that the zone-relevant xml database is copied from Boxilla on next log-in or reboot.</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#request-class-json-structure-single-head-transmitter_3","title":"Request Class JSON Structure Single Head Transmitter","text":"<pre><code>{\n  \"zone\": \"ZONE-1A\"\n}\n</code></pre>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#request-class-formats_12","title":"Request Class Formats","text":"Parameter Format zone 32 byte char array"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#put-bonded-group-name","title":"PUT Bonded Group Name","text":""},{"location":"architecture/appliance_rest_api/appliance_rest_api/#url_16","title":"URL","text":"<p>https://IP:8888/control/configuration/bonded_group</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#implementation-notes_13","title":"Implementation Notes","text":"<p>This node sets the bonded group name to the receiver. When this endpoint is called the bonded group name is written to the sqlite3 database on the appliance. This name is displayed on the OSD connection tab to indicate to the user what bonded group the receiver is part of. This sqlite entry is also used to determine whether or not to display bonded connections that are associated to a user. For example, if the user has a list of associated bonded connection but the bonded connection entry in the sqlite database is an empty string then the OSD will not list the bonded connection.</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#request-class-json-structure-single-head-transmitter_4","title":"Request Class JSON Structure Single Head Transmitter","text":"<pre><code>{\n  \"bonded_group\": \"bonded-group-1A\"\n}\n</code></pre>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#request-class-formats_13","title":"Request Class Formats","text":"Parameter Format bonded group 32 byte char array"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#put-debug-log-level","title":"PUT Debug Log Level","text":""},{"location":"architecture/appliance_rest_api/appliance_rest_api/#url_17","title":"URL","text":"<p>https://IP:8888/control/diags/loglevel/?level=7</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#implementation-notes_14","title":"Implementation Notes","text":"<p>This node sets the value of loglevel to the one specified in the URL</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#request-class-formats_14","title":"Request Class Formats","text":"<p>This log level is specified in the URL as shown above. Log level must be an integer on following interval [0,7]. Setting the loglevel during an active connection will cause any active connections to terminate.</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#put-user-login","title":"PUT User Login","text":""},{"location":"architecture/appliance_rest_api/appliance_rest_api/#url_18","title":"URL","text":"<p>https://IP:8888/user/login</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#implementation-notes_15","title":"Implementation Notes","text":"<p>Logs a user in to Rx OSD</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#request-class-json-structure_12","title":"Request Class JSON Structure","text":"<pre><code>{\n            \"user\": \"kvm_user\",\n            \"force\": 1,\n            \"ad\": 1,\n            \"md5sum\": \u201ca7d794f4a687efd2094c589714e310e3\u201c\n}\n</code></pre>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#request-class-formats_15","title":"Request Class Formats","text":"Parameter Format user 32 byte char array max force 1/0 ad 1/0 md5sum 32 byte char array"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#response","title":"Response","text":"<p>Http status code.</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#put-led-flash","title":"PUT LED Flash","text":""},{"location":"architecture/appliance_rest_api/appliance_rest_api/#url_19","title":"URL","text":"<p>https://IP:8888/control/led</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#implementation-notes_16","title":"Implementation Notes","text":"<p>Enables or disables the power led flashing. Boxilla manager will send request to start or stop the power led flashing and based on the request, the appliance would enable or disable the flashing of the power led at its end.</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#request-json-structure","title":"Request JSON structure","text":"<pre><code>{\n     \u201caction\u201d: \u201cled_enable\u201d\n}\n{\n     \u201caction\u201d: \u201cled_disable\u201d\n}\n</code></pre>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#response_1","title":"Response","text":"<p>Http status code.</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#put-receiver-timer-configurations","title":"PUT Receiver Timer Configurations","text":""},{"location":"architecture/appliance_rest_api/appliance_rest_api/#url_20","title":"URL","text":"<p>https://IP:8888/control/configuration/timers_configuration</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#implementation-notes_17","title":"Implementation Notes","text":"<p>This node sets the appliance timers configuration, Local OSD Inactivity timer value and Local Connection Inactivity timer value.</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#request-class-json-structure_13","title":"Request Class JSON Structure","text":"<pre><code>{\n  \"timers_config\": \"global\",\n  \"local_osd_inactivity\": 0,\n  \"local_connection_inactivity\": 0\n}\n</code></pre>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#request-class-formats_16","title":"Request Class Formats","text":"Parameter Format timers_config 32 byte char array local_osd_inactivity int 0 or 2-60 local_connection_inactivity int 0 or 2-60"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#rest-api-post-commands","title":"REST API POST Commands","text":"<p>The following URLs are accessed using the POST verb. This section specifies the URLs along with the request JSON object.</p> URL Verb 1.0.11 1.0.10 1.0.9 1.0.8 1.0.7 1.0.6 1.0.5 1.0.4 /control/diags/run POST \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2573 /control/diags/sync POST \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2573"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#post-run-appliance-diagnostics","title":"POST Run Appliance Diagnostics","text":""},{"location":"architecture/appliance_rest_api/appliance_rest_api/#url_21","title":"URL","text":"<p>https://IP:8888/control/diags/run/?mgr_ip=MGR_IP</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#implementation-notes_18","title":"Implementation Notes","text":"<p>Calls the appliance diagnostics script and scp\u2019s the resultant diagnostics files in .tar form to the manager IP specified.</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#request-class-definition_3","title":"Request class definition","text":"<p>n/a</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#response-class-definition","title":"Response Class Definition","text":"<p>HTTP code 200 or 500.</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#post-insert-synchronisation-point","title":"POST Insert Synchronisation Point","text":""},{"location":"architecture/appliance_rest_api/appliance_rest_api/#url_22","title":"URL","text":"<p>https://IP:8888/control/diags/sync/?bb_timestamp=2019-12-19 06:25:00</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#implementation-notes_19","title":"Implementation Notes","text":"<p>Inserts a Boxilla synchronisation point to syslog as follows:</p> <p>Jan 1 01:56:23 TX_008C101EDF04 user.info webservice: SESSION:12345678</p> <p>[SYNCHRONISATION_POINT 2019-12-19 06:25:00 6983524]</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#request-class-definition_4","title":"Request class definition","text":"<p>n/a</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#response-class-definition_1","title":"Response Class Definition","text":"<p>HTTP code 200 or 500.</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#response-class-definition_2","title":"Response Class Definition","text":"<p>HTTP code 200(string_body file uploaded) or 500 (string_body with corresponding error).</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#delete-endpoints","title":"Delete Endpoints","text":"<p>The following table specifies endpoints accessed using the DELETE verb.</p> URL Verb 1.0.4 1.0.5 1.0.6 1.0.7 1.0.8 1.0.9 1.0.10 1.0.10 /control/configuration/zone DELETE \u2573 \u2573 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#delete-zone","title":"Delete Zone","text":""},{"location":"architecture/appliance_rest_api/appliance_rest_api/#url_23","title":"URL","text":"<p>https://IP:8888/control/configuration/zone</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#implementation-notes_20","title":"Implementation Notes","text":"<p>This node removes the appliance zone.</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#request-class-json-structure-single-head-transmitter_5","title":"Request Class JSON Structure Single Head Transmitter","text":"<p>n/a</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#request-class-formats_17","title":"Request Class Formats","text":"<p>n/a</p> <ul> <li>Next Document in Series-&gt; Configuration Codes</li> </ul>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#get-endpoints","title":"Get Endpoints","text":"<p>This section describes supported URLs that are accessed using the GET verb. The URLs are specified using an abbreviation for the IP address, whereby IP represents an IPv4 address with the format: x.x.x.x where x stands for an octet on the interval: [0,255]. Request and response classes are formatted as JSON objects. Certain request and response class parameters are formatted as numeric codes which are defined in the section delete endpoints below.</p> <p>The following table lists supported URLs accessed using the GET verb. Each of these is accessed via https on port 8888. The section Configuration Codes provides a hardware-URL support matrix which defines what URLs are supported on the various hardware types.</p> URL Verb 1.0.11 1.0.10 1.0.9 1.0.8 1.0.7 1.0.6 1.0.5 1.0.4 /alerts GET \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /capabilities GET \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2573 /control/configuration/rx_settings GET \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /control/configuration/tx_settings GET \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /control/configuration/tx_clone_name* GET \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 \u2713 \u2713 /control/configuration/rx_edid_table_1* GET \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 \u2713 \u2713 /control/configuration/rx_edid_table_2* GET \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 \u2713 \u2713 /control/configuration/zone GET \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2573 \u2573 /control/configuration/bonded_group GET \u2713 \u2713 \u2713 \u2713 \u2713 \u2573 \u2573 \u2573 /control/configuration/timers_configuration GET \u2713 \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 /control/diags GET \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2573 /control/diags/files GET \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2573 /control/diags/loglevel GET \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2573 /control/diags/debugmode GET \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /control/user GET \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /control/process? GET \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /control/safemode GET \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /control/led GET \u2713 \u2713 \u2713 \u2573 \u2573 \u2573 \u2573 \u2573 /statistics/facts/system_facts GET \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /statistics/facts/video_facts GET \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /statistics/facts/analog_audio_facts GET \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /statistics/facts/usb_facts GET \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /statistics/facts/network/physical GET \u2713 \u2713 \u2713 \u2713 \u2713 \u2573 \u2573 \u2573 /statistics/facts/network/toe_connections GET \u2713 \u2713 \u2713 \u2713 \u2713 \u2573 \u2573 \u2573 statistics/previous_connections GET \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /statistics/active_connections GET \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /statistics/connection_control GET \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /version GET \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /control/configure/network GET \u2713 \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 /control/upgrade/diskspace GET \u2713 \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 /control/upgrade/process/status GET \u2713 \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 \u2573"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#get-version-info","title":"GET Version Info","text":""},{"location":"architecture/appliance_rest_api/appliance_rest_api/#url_24","title":"URL","text":"<p>https://IP:8888/version</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#implementation-notes_21","title":"Implementation Notes","text":"<p>This node provides system level version information.</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#appliance-response-class-definition","title":"Appliance Response Class Definition","text":"Parameter Format api_version 16 byte char array software_version 255 byte char array manufacturing_partnumber 255 byte char array serial_number 255 byte char array product_type 255 byte char array product_brand 255 byte char array product_configuration 255 byte char array ethernet_speed int"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#appliance-response-class-json-structure","title":"Appliance Response Class JSON Structure","text":"<pre><code>kvm_get_version_info : [\nAPI version : 1.0.4\n\nSoftware version : V1.4.0_r6244\n\nManufacturing Partnumber : 300-041-001\n\nSerial Number : SEBB18B00615\n\nProduct_type : transmitter\n\nProduct_Brand : Black Box\n\nProduct Configuration : Single Head\n\nEthernet Speed : 10000\n]\n</code></pre>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#get-system-facts","title":"GET System Facts","text":""},{"location":"architecture/appliance_rest_api/appliance_rest_api/#url_25","title":"URL","text":"<p>https://IP:8888/statistics/facts/system_facts</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#implementation-notes_22","title":"Implementation Notes","text":"<p>This node provides system level facts.</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#response-class-definition_3","title":"Response Class Definition","text":"Parameter Format id Int mac 50 char byte array total memory int free memory int total disk int free disk int up time int load_avg_1min double load_avg_5min double load_avg_15min double capture_time int crcs int temperature int user response int timestamp int"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#response-class-json-structure","title":"Response Class JSON Structure","text":"<pre><code>kvm_system_facts: [\n\n    id : 16\n\n    mad : 1c:37:bf:00:11:91\n\n    total memory : 244108\n\n    free memory : 3123716\n\n    total disk : 1645.0\n\n    free disk : 1631.0\n\n    uptime : 62486\n\n    load_avg_1min : 0.080000000000000002\n\n    load_avg_5min : 0.029999999999999999\n\n    load_avg_15min : 0.01\n\n    capture_time : 0.0\n\n    crcs : 0.0\n\n    temperature : 0\n\n    user_response : 510.0\n\n    timestamp : 127278148\n]\n</code></pre>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#get-video-facts","title":"GET Video Facts","text":""},{"location":"architecture/appliance_rest_api/appliance_rest_api/#url_26","title":"URL","text":"<p>https://IP:8888/statistics/facts/video_facts</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#implementation-notes_23","title":"Implementation Notes","text":"<p>This node provides video facts.</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#response-class-definition_4","title":"Response Class Definition","text":"Parameter Format id int head int mac 50 byte cchar array min_tiles_per_frame int max_tiles_per_frame int avg_tiles_per_frame int frames_per_second int min_frames_per_second int max_frames_per_second int min_tile_size int max_tile_size int min_video_bw int max_video_bw int avg_video_bw double video_bw double min_rtt double max_rtt double avg_rtt double rtt double user_response double resolution 255 byte char array dropped_frames double"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#response-class-json-structure_1","title":"Response Class JSON Structure","text":"<pre><code>KVM_Video_Facts: [{\n\nid : 73\nhead : 1\nmac : 00:8c:10:1e:d3:ce\nmin_tiles_per_frame: 0\nmax_tiles_per_frame: 0\navg_tiles_per_frame: 0\nframes_per_secoond : 59\nmin_frames_per_second : 0\nmax_frames_per_second : 59\nmin_tile_size : 0\nmax_tile_size : 0\navg_tile_size : 0\nmin_video_bw : 0\nmax_video_bw : 3256\navg_video_bw : 3256.0\nvideo_bw : 3256.0\nmin_rtt : 0.0\nmax_rtt : 3.2560000419616699\navg_rtt : 3.2560000419616699\nrtt : 3.2560000419616699\nuser_response : 11.25600004196167\nresolution : 1920 x 1200\ndropped_frames : 0.0\ntimestamp : 68938164\n}\n\n{\nid : 67\nhead : 1\nmac : 00:8c:10:1e:d3:ce\nmin_tiles_per_frame: 0\nmax_tiles_per_frame: 0\navg_tiles_per_frame: 0\nframes_per_secoond : 0\nmin_frames_per_second : 0\nmax_frames_per_second : 0\nmin_tile_size : 0\nmax_tile_size : 0\navg_tile_size : 0\nmin_video_bw : 0\nmax_video_bw : 0\navg_video_bw : 0.0\nvideo_bw : 0.0\nmin_rtt : 0.0\nmax_rtt : 0.0\nuser_response : 0.0\nresolution : 1920 x 1200\ndropped_frames : 0.0\ntimestamp : 68871727\n}]\n</code></pre>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#get-audio-facts","title":"GET Audio Facts","text":""},{"location":"architecture/appliance_rest_api/appliance_rest_api/#url_27","title":"URL","text":"<p>https://IP:8888/statistics/facts/audio_facts</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#implementation-notes_24","title":"Implementation Notes","text":"<p>This node provides audio facts.</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#response-class-definition_5","title":"Response Class Definition","text":"Parameter Format id int mac 50 byte char array min_audio_bw double max_audio_bw double avg_audio_bw double audio_bw double timestamp int"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#response-class-json-structure_2","title":"Response Class JSON Structure","text":"<pre><code>KVM_Audio_Facts: [\n\nid : 1495\n\nmac : 00:8c:10:1e:d3:ce\n\nmin_audio_bw : 0.0\n\nmax_audio_bw : 72.0\n\navg_audio_bw : 72.0\n\naudio_bw : 72.0\n\ntimestamp : 137289260\n]\n</code></pre>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#get-usb-audio-facts","title":"GET USB Audio Facts","text":""},{"location":"architecture/appliance_rest_api/appliance_rest_api/#url_28","title":"URL","text":"<p>https://IP:8888/statistics/facts/usb_audio_facts</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#implementation-notes_25","title":"Implementation Notes","text":"<p>This node provides usb audio facts.</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#response-class-definition_6","title":"Response Class Definition","text":"Parameter Format id int mac 50 byte char array min_audio_bw double max_audio_bw double avg_audio_bw double audio_bw double timestamp int"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#response-class-json-structure_3","title":"Response Class JSON Structure","text":"<pre><code>KVM_analog_audio_facts: [\n\nid : 1495\n\nmac : 00:8c:10:1e:d3:ce\n\nmin_audio_bw : 0.0\n\nmax_audio_bw : 72.0\n\navg_audio_bw : 72.0\n\naudio_bw : 72.0\n\ntimestamp : 137289260\n]\n</code></pre>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#get-analog-audio-facts","title":"GET Analog Audio Facts","text":""},{"location":"architecture/appliance_rest_api/appliance_rest_api/#url_29","title":"URL","text":"<p>https://IP:8888/statistics/facts/analog_audio_facts</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#implementation-notes_26","title":"Implementation Notes","text":"<p>This node provides analog audio facts.</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#response-class-definition_7","title":"Response Class Definition","text":"Parameter Format id int mac 50 byte char array min_audio_bw double max_audio_bw double avg_audio_bw double audio_bw double timestamp int"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#response-class-json-structure_4","title":"Response Class JSON Structure","text":"<pre><code>KVM_analog_audio_facts: [\n\nid : 1495\n\nmac : 00:8c:10:1e:d3:ce\n\nmin_audio_bw : 0.0\n\nmax_audio_bw : 72.0\n\navg_audio_bw : 72.0\n\naudio_bw : 72.0\n\ntimestamp : 137289260\n]\n</code></pre>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#get-usb-facts","title":"GET USB Facts","text":""},{"location":"architecture/appliance_rest_api/appliance_rest_api/#url_30","title":"URL","text":"<p>https://IP:8888/statistics/facts/usb_facts</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#implementation-notes_27","title":"Implementation Notes","text":"<p>This node provides USB facts.</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#response-class-definition_8","title":"Response Class Definition","text":"Parameter Format id int mac 50 byte char array min_usb_egress_bw double max_usb_egress_bw double avg_usb_egress_bw double min_usb_ingress_bw double max_usb_ingress_bw double avg_usb_ingress_bw double timestamp int"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#response-class-json-structure_5","title":"Response Class JSON Structure","text":"<pre><code>    \"kvm_usb_facts\": [\n        {\n            \"id\": 51,\n            \"mac\": \"00:8c:10:1e:d3:ce\",\n            \"min_usb_egress_bw\": 0.0,\n            \"max_usb_egress_bw\": 127.33333587646484,\n            \"avg_usb_egress_bw\": 127.33334350585938,\n            \"usb_egress_bw\": 127.33333587646484,\n            \"min_usb_ingress_bw\": 0.0,\n            \"max_usb_ingress_bw\": 1246.5333251953125,\n            \"avg_usb_ingress_bw\": 1246.5333251953125,\n            \"usb_ingress_bw\": 1246.5333251953125,\n            \"timestamp\": 65592049\n        },\n        {\n            \"id\": 46,\n            \"mac\": \"00:8c:10:1e:d3:ce\",\n            \"min_usb_egress_bw\": 0.0,\n            \"max_usb_egress_bw\": 125.33333587646484,\n            \"avg_usb_egress_bw\": 124.33334350585938,\n            \"usb_egress_bw\": 125.33333587646484,\n            \"min_usb_ingress_bw\": 0.0,\n            \"max_usb_ingress_bw\": 1242.5333251953125,\n            \"avg_usb_ingress_bw\": 1242.5333251953125,\n            \"usb_ingress_bw\": 1242.5333251953125,\n            \"timestamp\": 65591049\n\n        }\n    ]\n</code></pre>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#get-alerts","title":"GET Alerts","text":""},{"location":"architecture/appliance_rest_api/appliance_rest_api/#url_31","title":"URL","text":"<p>https://IP:8888/alerts</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#implementation-notes_28","title":"Implementation Notes","text":"<p>This node provides system alerts.</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#response-class-definition_9","title":"Response Class Definition","text":"Paramter Format Options id int n/a mac 50 byte char array n/a ip address 1025 byte char array n/a source 16 byte char array alert_category 32 byte char array Critical/Warning/Info/Unknown alert_condition 32 byte char array Metric/Trait/Availability/Operation/Severity/Unknown alert_component 32 byte char array User/Appliance/Connection/unknown alert_command 32 byte char array Auto_Login/Manual_Login/Post_connect_login/Manual_logout/Gui_timeout_logout/Reboot/Upgrade/Start/disconnect/rdp_connection/Unknown alert_status 32 byte char array Success/Failed/Inprogress/Cancelled/Timeout/Online/Unknown alert_description 32 byte char array context_1 255 byte char array context_2 255 byte char array context_3 255 byte char array context_4 255 byte char array timestamp int"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#response-class-json-structure_6","title":"Response Class JSON Structure","text":"<pre><code>kvm_alerts: [\n    id : 2\n\n    mac : 00:8c:10:1e:d3:ce\n\n    ip_address : 10.211.129.55\n\n    source : appliance\n\n    alert_category : Info\n\n    alert_condition : Operation\n\n    alert_component : Connection\n\n    alert_command : Start\n\n    alert_status : Success\n\n    alert_description : New Connection\n\n    context_1 : 0:d:48:3b:45:5d\n\n    context_2 : 10.211.129.52\n\n    context_3 : \" \"\n\n    context_4 : \" \"\n\n    timestamp : 68938192\n]\n</code></pre>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#get-authentication-statistics","title":"GET Authentication Statistics","text":""},{"location":"architecture/appliance_rest_api/appliance_rest_api/#url_32","title":"URL","text":"<p>https://IP:8888/statistics/authentication</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#implementation-notes_29","title":"Implementation Notes","text":"<p>This node provides authentication statistics.</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#response-class-definition_10","title":"Response Class Definition","text":"Paramter Format id int mac 50 byte char array successful_login int refused_login int manager_unreachable int timestamp int"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#response-class-json-structure_7","title":"Response Class JSON Structure","text":"<pre><code>kvm_authentication_stats : [\n\n    id : 0\n\n    mac : 1c:37:bf:00:11:91\n\n    successful_login : 3766\n\n    refused_login : 150\n\n    manager_unreachable : 26\n\n    timestamp : 129448544\n]\n</code></pre>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#get-active-connection-status","title":"GET Active Connection Status","text":""},{"location":"architecture/appliance_rest_api/appliance_rest_api/#url_33","title":"URL","text":"<p>https://IP:8888/statistics/active_connections</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#implementation-notes_30","title":"Implementation Notes","text":"<p>This node provides active connection statistics.</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#response-class-definition_11","title":"Response Class Definition","text":"Parameter Format id int mac 50 byte char array connection_id int name 32 byte char array user 32 byte char array Rx_hostname 255 byte char array Tx_hostname 255 byte char array device_type 16 byte char array connection_type int group_name 16 byte char array alert_state int duration int start_time int timestamp int"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#response-class-json-structure_8","title":"Response Class JSON Structure","text":"<pre><code>kvm_active_connections: [\n\n    id : 0\n    mac : 1c:37:bf:00:11:91\n    connection_id : 17415\n    name : rx55-4K_default\n    username : Boxilla\n    rx_hostname : RX_1C37BF001191\n    tx_hostname : 10.211.129.55\n    device_name : decoder\n    connection_type : 0\n    group_name : group\n    alert_state : 0\n    duration : 0\n    start_time : 130612253\n    timestamp : 130612253\n]\n</code></pre>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#get-previous-connection-statistics","title":"GET Previous Connection Statistics","text":""},{"location":"architecture/appliance_rest_api/appliance_rest_api/#url_34","title":"URL","text":"<p>https://IP:8888/statistics/previous_connections</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#implementation-notes_31","title":"Implementation Notes","text":"<p>This node provides Previous Connection statistics, the format is the same as that shown in the next section (Active Connections).</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#response-class-json-structure_9","title":"Response Class JSON Structure","text":"<pre><code>{\nkvm_previous_connection; [\n\n    id : 4\n    mac : 1c:37:bf:00:11:91\n    connection_id : 25282\n    name : rx55-4K_default\n    username : Boxilla\n    rx_hostname : RX_1C37BF001191\n    tx_hostname : 10.211.129.55\n    device_name : decoder\n    connection_type : 0\n    group_name : group\n    alert_state : 0\n    duration : 2\n    start_time : 129291357\n    timestamp ; 129414001\n],\n\n[\n id : 12\n mac : 1c:37:bf:00:11:91\n connection_id : 44813\n name : rx55-4K_default\n username : Boxilla\n rx_hostname : RX_1C37BF001191\n tx_hostname : 10.211.129.55\n device_type : decoder\n connection_type : 0\n group_name : group\n alert_state : 0\n duration : 6\n start_time : 128873892\n timestamp : 129244176\n]\n}\n</code></pre>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#get-connection-control-statistics","title":"GET Connection Control Statistics","text":""},{"location":"architecture/appliance_rest_api/appliance_rest_api/#url_35","title":"URL","text":"<p>https://IP:8888/statistics/connection_control</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#implementation-notes_32","title":"Implementation Notes","text":"<p>This node provides connection statistics as per table below</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#response-class-definition_12","title":"Response Class Definition","text":"Parameter Format id int mac 50 byte char array connection_in_use int connection_not_reachable int connection_refused int connection_error int timeouts int"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#response-class-json-structure_10","title":"Response Class JSON Structure","text":"<pre><code>{\nid:\nmac:\nconnection_in_use:\nconnection_not_reachable:\nconnection_refused:\nconnection_error:\ntimeouts:\n}\n</code></pre>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#get-network-physical-link-status","title":"GET Network Physical Link Status","text":""},{"location":"architecture/appliance_rest_api/appliance_rest_api/#url_36","title":"URL","text":"<p>https://IP:8888/statistics/facts/network/physical</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#implementation-notes_33","title":"Implementation Notes","text":"<p>This node provides statistics for the physical links associated with a network interface. It returns an array of 2 interface statistics.</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#response-class-definition_13","title":"Response Class Definition","text":"Parameter Format id int mac int Active int(0 = no, 1 = yes) bool link_status 255 byte char array speed 255 byte char array media 255 byte char array lacp_status 255 byte char array"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#response-class-json-structure_11","title":"Response Class JSON Structure","text":"<pre><code>{\n  \"kvm_network_physical_facts \": [\n    {\n      \"physical_links\": [\n        {\n          \u201cid\u201d:n ,\n          \"mac_id\": 0,  // MAC #0\n          \"active\": True, // False = \u201cno\u201d, True = \u201cyes\u201d\n          \"link_status\": \u201cUp\u201d, // possible values: \u201dUp\u201d,\u201dDown\u201d, \u201cUnknown\"\n          \"speed\": 1000 // possible values: \u201c10 Mbps\u201d, \u201c100 Mbps\u201d, \u201c1 Gbps\u201d, \u201c2.5 Gbps\u201d, \u201c10 Gbps\u201d, \u201cUnknown\u201d\n          \"media\": \"RJ45\", // possible values: \u201cRJ45\u201d,\u201dSFP\u201d, \u201cUnknown\u201d\n          \"lacp_status\": \u201cEnabled\u201d //  possible values: \u201cActive\", \u201cDisabled\u201d,\u201d Undetected\u201d,\u201d Timed-out\u201d or \u201cUnknown\u201d\n        },\n        {\n          \u201cid\u201d:n ,\n          \"mac_id\": 1,  // MAC #1\n          \"active\": True, // False = \u201cno\u201d, True = \u201cyes\u201d\n          \"link_status\": \u201cUp\u201d, // possible values: \u201dUp\u201d, \u201dDown\u201d, \u201cUnknown\"\n          \"speed\": 1000 // possible values: \u201c10 Mbps\u201d, \u201c100 Mbps\u201d, \u201c1 Gbps\u201d, \u201c2.5 Gbps\u201d, \u201c10 Gbps\u201d, \u201cUnknown\u201d\n          \"media\": \"RJ45\", // possible values: \u201cRJ45\u201d,\u201dSFP\u201d, \u201cUnknown\u201d\n          \"lacp_status\": \u201cEnabled\u201d //  possible values: \u201cActive\", \u201cDisabled\u201d,\u201d Undetected\u201d,\u201d Timed-out\u201d or \u201cUnknown\u201d    },\n        },\n      ],\n    }\n  ],\n}\n</code></pre>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#note","title":"Note:","text":"<ul> <li>Active: Active means which of the two available interfaces has been designated as active. The link could be down on the selected port, but it could still be the active port. One of the two interfaces on an appliance will always be active.</li> <li>Link Status: The Status indicates the state of the link; this depends on whether an active link is connected to the interface. Both interfaces may be classified as \u201cDown\u201d if no links are detected, or both could be \u201cUp\u201d if the Appliance is configured as part of a redundant network. The status could also be unknown because we have not been able to switch to that link and determine its status yet.</li> <li>LACP Status: The LACP status could be one of a number of values:</li> <li>Active \u2013 Enabled and communicating with a compatible switch</li> <li>Disabled \u2013 Feature is turned off</li> <li>Undetected \u2013 Switch at far end does not support it</li> <li>Timed-out \u2013 We are no longer getting LACP messages from the switch</li> <li>Unknown \u2013 We cannot asses the status of LACP because we have no physical link (.i.e. the link status is \u201cdown\u201d).</li> </ul>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#get-network-toe-connection-status","title":"GET Network TOE Connection Status","text":""},{"location":"architecture/appliance_rest_api/appliance_rest_api/#url_37","title":"URL","text":"<p>https://IP:8888/statistics/facts/network/toe_connection</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#implementation-notes_34","title":"Implementation Notes","text":"<p>This node provides statistics for the active toe connections associated with a network interface. It returns an array of channel objects with statistics for a given channel.</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#response-class-definition_14","title":"Response Class Definition","text":"Parameter Format id int channel_id int description 255 byte char array local_port int remote_port int remote_ip 255 byte char array remote_mac 255 byte char array total_bytes_transmitted int total_bytes_acknowledged int total_bytes_recieved int total_bytes_dropped int average_bps_transmitted int average_bps_acknowledged int average_bps_recieved int rtt_usec int rto_usec int"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#response-class-json-structure_12","title":"Response Class JSON Structure","text":"<pre><code>{\n  \"kvm_network_toe_connections_facts \": [\n    {\n      \"toe_connections\": [ // An array of ACTIVE connections, with up to 64 elements\n        {\n          \u201cid\u201d:n ,\n          \"channel_id\": 2,  // ct02\n          \"description\": \"TOE TCP connection channel\",  // Could also be \u201cTOE Reliable-Multicast Master channel\u201d, \u201cTOE Reliable-Multicast Slave channel\u201d, \u201cTOE Reliable-Multicast Response channel\u201d, \u201cUnknown\u201d\n          \"local_port\": 16384,\n          \"remote_port\": 20002,\n          \"remote_ip\": \"192.168.1.2\",\n          \"remote_mac\": \"00:11:22:33:44:55\",\n          \"total_bytes_transmitted \": 0, // Total bytes transmitted since connection started (including retransmissions)\n          \"total_bytes_acknowledged\": 0, // Total bytes transmitted successfully (ACK'd) since connection started (TCP only)\n          \"total_bytes_received\": 0, // Total bytes received since connection started\n          \"total_bytes_dropped\": 0, // Total ingress bytes dropped (e.g. due to sequence error, checksum error, MAC buffer overflow, etc)\n          \"average_bps_transmitted\": 0, // Average since last reporting interval - TX throughput\n          \"average_bps_acknowledged\": 0, // Average since last reporting interval - TX goodput\n          \"average_bps_received\": 0, // Average since last reporting interval - RX goodput\n          \"rtt_usec\": 0, // latest measured RTT in microseconds (TCP and RMC-Master only)\n          \"rto_usec\": 0, // latest RTO in microseconds (TCP and RMC-Master only)\n        },\n      ]\n    }\n  ],\n}\n</code></pre>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#get-process-status","title":"GET Process Status","text":""},{"location":"architecture/appliance_rest_api/appliance_rest_api/#url_38","title":"URL","text":"<p>https://IP:8888/control/process?process_name=init</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#implementation-notes_35","title":"Implementation Notes","text":"<p>This node is used to check if a process is running. For example, to check if init is running on the appliance, the following URL is used: https://IP:8888/control/process?process_name=init</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#response-class-definition_15","title":"Response Class Definition","text":"Parameter Format Process 255 byte char array Status int(0 or 1)"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#response-class-json-structure_13","title":"Response Class JSON Structure","text":"<p>The response class is composed of the name of the process and a numeric value, 1 indicating that the process is running and 0 indicating that the process is not running. For example:</p> <pre><code>{\n  \"init\": 1\n}\n</code></pre>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#get-transmitter-settings","title":"GET Transmitter Settings","text":""},{"location":"architecture/appliance_rest_api/appliance_rest_api/#url_39","title":"URL","text":"<p>https://IP:8888/control/configuration/tx_settings</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#implementation-notes_36","title":"Implementation Notes","text":"<p>This node provides Transmitter configuration settings.</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#response-class-definition_16","title":"Response Class Definition","text":"Parameter Format Single head Dual head video_quality int \u2713 \u2713 video_source_optimisation int \u2713 \u2573 hid int \u2713 \u2713 mouse_keyboard_timeout int \u2713 \u2713 head_1_edid int \u2713 \u2713 head_2_edid int \u2573 \u2713 audio_source int \u2713 \u2713"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#response-class-json-structure-single-head-transmitter","title":"Response Class JSON Structure single head transmitter","text":"<pre><code>{\n  \"video_quality\": 1,\n  \"video_source_optimisation\": 1,\n  \"mouse_keyboard_timeout\": 1,\n  \"hid\": 1,\n  \"head_1_edid\": 5,\n  \"audio_source\": 1\n}\n</code></pre>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#response-class-json-structure-dual-head-transmitter","title":"Response Class JSON Structure dual head transmitter","text":"<pre><code>{\n  \"video_quality\": 1,\n  \"hid\": 1,\n  \"mouse_keyboard_timeout\": 1,\n  \"head_1_edid\": 1,\n  \"head_1_edid\": 2,\n  \"audio_source\": 1\n}\n</code></pre>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#get-reciever-settings","title":"GET Reciever Settings","text":""},{"location":"architecture/appliance_rest_api/appliance_rest_api/#url_40","title":"URL","text":"<p>https://IP:8888/control/configuration/rx_settings</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#implementation-notes_37","title":"Implementation Notes","text":"<p>This node provides Receiver settings.</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#defination","title":"Defination","text":"Parameter Format power_mode int/empty string http_enable int rx_scaling int"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#response-class-json-structure_14","title":"Response Class JSON Structure","text":"<pre><code>{\n  \"power_mode\": 1,\n  \"http_enable\": 1,\n  \"rx_scaling\": 1\n}\n</code></pre> <p>PS: Please note, power_mode is a feature supported only for CORRIB and DEEL devices and not supported anymore for Emerald devices. Also, rx_scaling is supported only in 4k devices.</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#get-current-user","title":"GET Current User","text":""},{"location":"architecture/appliance_rest_api/appliance_rest_api/#url_41","title":"URL","text":"<p>https://IP:8888/control/user</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#implementation-notes_38","title":"Implementation Notes","text":"<p>This node provides the name of the currently logged in user.</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#response-class-definition_17","title":"Response Class Definition","text":"Parameter Format KEY User-name Value 32 byte char array"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#response-class-json-structure_15","title":"Response Class JSON Structure","text":"<pre><code>{\n    \"user\": \u201cuser-1\u201d,\n}\n</code></pre>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#get-reciever-edid-tablehead-1","title":"GET Reciever EDID TableHead 1","text":""},{"location":"architecture/appliance_rest_api/appliance_rest_api/#url_42","title":"URL","text":"<p>https://IP:8888/control/configuration/rx_edid_head_1</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#implementation-notes_39","title":"Implementation Notes","text":"<p>This node returns the EDID table from the monitor attached to Rx head 1.</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#response-class-definition_18","title":"Response Class Definition","text":"Paramter Format edid_table 256 byte char array"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#response-class-json-structure_16","title":"Response Class JSON Structure","text":"<pre><code>{\n  \"edid_table\": \"GUI OPTION 6 DELL_E2210HBB\\n0 ff ff ff ff ff ff 0 \\n10 ac 31 d0 d2 2 96 49 \\na 14 1 3 80 30 1b 78 \\nee ee 95 a3 54 4c 99 26 \\nf 50 54 a5 4b 0 71 4f \\n81 80 d1 c0 1 1 1 1 \\n1 1 1 1 1 1 2 3a \\n80 18 71 38 2d 40 58 2c \\n45 0 dd c 11 0 0 1e \\n0 0 0 ff 0 44 35 35 \\n33 52 30 33 39 30 59 5a \\n4c a 0 0 0 fc 0 44 \\n45 4c 4c 20 45 32 32 31 \\n30 48 42 42 0 0 0 fd \\n0 32 4c 1e 53 11 0 a \\n20 20 20 20 20 20 0 13 \\n\"\n}\n</code></pre>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#get-reciever-edid-table-head-2","title":"GET Reciever EDID Table Head 2","text":""},{"location":"architecture/appliance_rest_api/appliance_rest_api/#url_43","title":"URL","text":"<p>https://IP:8888/control/configuration/rxedid_head</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#implementation-notes_40","title":"Implementation Notes","text":"<p>This node returns the EDID table from the monitor attached to Rx head 2.</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#response-class-definition_19","title":"Response Class Definition","text":"Parameter Format edid_table 256 byte char array"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#response-class-json-structure_17","title":"Response Class JSON Structure","text":"<pre><code>{\n  \"edid_table\": \"GUI OPTION 6 DELL_E2210HBB\\n0 ff ff ff ff ff ff 0 \\n10 ac 31 d0 d2 2 96 49 \\na 14 1 3 80 30 1b 78 \\nee ee 95 a3 54 4c 99 26 \\nf 50 54 a5 4b 0 71 4f \\n81 80 d1 c0 1 1 1 1 \\n1 1 1 1 1 1 2 3a \\n80 18 71 38 2d 40 58 2c \\n45 0 dd c 11 0 0 1e \\n0 0 0 ff 0 44 35 35 \\n33 52 30 33 39 30 59 5a \\n4c a 0 0 0 fc 0 44 \\n45 4c 4c 20 45 32 32 31 \\n30 48 42 42 0 0 0 fd \\n0 32 4c 1e 53 11 0 a \\n20 20 20 20 20 20 0 13 \\n\"\n}\n</code></pre>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#get-transmitter-edid-clone-name-head-1","title":"GET Transmitter EDID Clone Name Head 1","text":""},{"location":"architecture/appliance_rest_api/appliance_rest_api/#url_44","title":"URL","text":"<p>https://IP:8888/control/configuration/tx_clone_name_1</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#implementation-notes_41","title":"Implementation Notes","text":"<p>This node returns the EDID clone name for head 1.</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#response-class-definition_20","title":"Response Class Definition","text":"Parameter Format clone_name 18 byte char array"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#response-class-json-structure_18","title":"Response Class JSON Structure","text":"<pre><code>{\n  \"clone_name\": \"DELL_E2210HBB\"\n}\n</code></pre>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#get-transmitter-edid-clone-name-head-2","title":"GET Transmitter EDID Clone Name Head 2","text":""},{"location":"architecture/appliance_rest_api/appliance_rest_api/#url_45","title":"URL","text":"<p>https://IP:8888/control/configuration/tx_clone_name_2</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#implementation-notes_42","title":"Implementation Notes","text":"<p>This node returns the EDID clone name for head 2.</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#response-class-definition_21","title":"Response Class Definition","text":"Parameter Format clone_name 18 byte char array"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#response-class-json-structure_19","title":"Response Class JSON Structure","text":"<pre><code>{\n  \"clone_name\": \"DELL_E2210HBB\"\n}\n</code></pre>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#get-zone","title":"GET Zone","text":""},{"location":"architecture/appliance_rest_api/appliance_rest_api/#url_46","title":"URL","text":"<p>https://IP:8888/control/configuration/zone</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#implementation-notes_43","title":"Implementation Notes","text":"<p>This node returns the appliance zone</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#response-class-definition_22","title":"Response Class Definition","text":"Parameter Format zone 32 byte char array"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#response-class-json-structure_20","title":"Response Class JSON Structure","text":"<pre><code>{\n  \"zone\": \"zone-1A\"\n}\n</code></pre>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#get-bonded-group-name","title":"GET Bonded Group Name","text":""},{"location":"architecture/appliance_rest_api/appliance_rest_api/#url_47","title":"URL","text":"<p>https://IP:8888/control/configuration/bonded_group</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#implementation-notes_44","title":"Implementation Notes","text":"<p>This node returns the bonded group name</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#response-class-definition_23","title":"Response Class Definition","text":"Parameter Format bonded_group 32 byte char array"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#response-class-json-structure_21","title":"Response Class JSON Structure","text":"<pre><code>{\n  \"bonded_group\": \"bonded-group-1A\"\n}\n</code></pre>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#get-system-capabilities","title":"GET System Capabilities","text":""},{"location":"architecture/appliance_rest_api/appliance_rest_api/#url_48","title":"URL","text":"<p>https://IP:8888/system/capabilities</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#implementation-notes_45","title":"Implementation Notes","text":"<p>This node returns supported parameters and their ranges. The format is a key value pair where the key represents the parameter and the value represents an array of supported values. This node allows the user to determine supported paramters on any given appliance. In particular, transmitter settings may vary depending on the firmware version and hardware type. This URL will allow Boxilla to determine the capabilities of an appliance before reading and applying settings.</p> <p>The codes returned in the array values are defined below.</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#json-response-structures","title":"JSON Response structures","text":""},{"location":"architecture/appliance_rest_api/appliance_rest_api/#rx-response-class-json-structure","title":"RX Response Class JSON Structure","text":"Emerald Devices(2k) Emerald Devices (4K) Corrib and Deel Devices <pre><code>{\n  \"http_enable\": \"0,1\",\n  \"timers_configuration\": \"global,local\",\n  \"osd_inactivity\": \"0,2-60\",\n  \"connection_inactivity\": \"0,2-60\"\n}\n</code></pre> <pre><code>{\"http_enable\": \"0,1\",\n\u201crx_scaling\u201d : \u201c0,1\u201d,\n\"timers_configuration\": \"global,local\",\n\"osd_inactivity\": \"0,2-60\",\n\"connection_inactivity\": \"0,2-60\"\n}\n</code></pre>  Note: rx_scaling supported for only 4Kdevices.   <pre><code>{\u201cpower mode\u201d : \u201c0,1\u201d,\n \"http_enable\": \"0,1\"}\n</code></pre> <pre><code>{}\n</code></pre>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#tx-response-class-json-structure","title":"TX Response Class JSON Structure","text":"Single Head Transmitter  Dual Head Transmitter <pre><code>{\n  \"dual_stream_suported\": \"true/false\",\n  \"video_quality\": \"0,1,2,3,4\",\n  \"video_source_optimisation\": \"0,1,2,3,4\",\n  \"hid\": \"0,1,2,3,4,5\",\n  \"mouse_keyboard_timeout\": \"0,1,2,3,4,5\",\n  \"head_1_edid\": \"0,1,2,3,4,5\",\n  \"audio_source\": \"0,1\"\n}\n</code></pre> <pre><code>{\n  \"dual_stream_suported\": \"true/false\",\n  \"video_quality\": \"0,1,2,3,4\",\n  \"hid\": \"0,1,2,3,4,5\",\n  \"mouse_keyboard_timeout\": \"0,1,2,3,4,5\",\n  \"head_1_edid\": \"0,1,2,3,4,5\",\n  \"head_2_edid\": \"0,1,2,3,4,5\",\n  \"audio_source\": \"0,1\"\n}\n</code></pre>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#get-list-of-diagnostic-files","title":"GET List of Diagnostic Files","text":""},{"location":"architecture/appliance_rest_api/appliance_rest_api/#url_49","title":"URL","text":"<p>https://IP:8888/control/diags/files</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#implementation-notes_46","title":"Implementation Notes","text":"<p>This node returns the list of diagnostics file</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#response-class-json-structure_22","title":"Response Class JSON Structure","text":"<pre><code>{\n  \"/usr/local/diagnostics/\": [\n    \"0 : /usr/local/diagnostics/AAE_2_TX_008C101EDF04_637\",\n    \"1 : /usr/local/diagnostics/logger.sh.report\",\n    \"2 : /usr/local/diagnostics/edid_control_-h_1_-r.report\",\n    \"3 : /usr/local/diagnostics/VERSION.log\",\n    \"4 : /usr/local/diagnostics/COMPATIBILITY.log\",\n    \"5 : /usr/local/diagnostics/etc_interfaces.log\",\n    \"6 : /usr/local/diagnostics/diagnostics.sh.log\",\n    \"7 : /usr/local/diagnostics/krdm.log\",\n    \"8 : /usr/local/diagnostics/interrupts.log\",\n    \"9 : /usr/local/diagnostics/AAE_1_TX_008C101EDF04_637\",\n    \"10 : /usr/local/diagnostics/TOE_2_TX_008C101EDF04_637\",\n    \"11 : /usr/local/diagnostics/df.report\",\n    \"12 : /usr/local/diagnostics/edid_control_-h_0_-r.report\",\n    \"13 : /usr/local/diagnostics/ifconfig.report\",\n    \"14 : /usr/local/diagnostics/libsystem_cli_serial.report\",\n    \"15 : /usr/local/diagnostics/libsystem_cli_type.report\",\n    \"16 : /usr/local/diagnostics/libsystem_cli_model.report\",\n    \"17 : /usr/local/diagnostics/libsystem_cli_heads.report\",\n    \"18 : /usr/local/diagnostics/libsystem_cli_compatibility.report\",\n    \"19 : /usr/local/diagnostics/libsystem_cli_network_ip.report\",\n    \"20 : /usr/local/diagnostics/libsystem_cli_network_gateway.report\",\n    \"21 : /usr/local/diagnostics/libsystem_cli_network_netmask.report\",\n    \"22 : /usr/local/diagnostics/ls_-l_-usr-local-.report\",\n    \"23 : /usr/local/diagnostics/lsusb.report\",\n    \"24 : /usr/local/diagnostics/dmesg.report\",\n    \"25 : /usr/local/diagnostics/du_-a_-usr-local-.report\",\n    \"26 : /usr/local/diagnostics/du_-a_-mnt-perm.report\",\n    \"27 : /usr/local/diagnostics/e2_read.report\",\n    \"28 : /usr/local/diagnostics/ethtool_eth0.report\",\n    \"29 : /usr/local/diagnostics/uname_-a.report\",\n    \"30 : /usr/local/diagnostics/free.report\",\n    \"31 : /usr/local/diagnostics/ps_-eflax.report\",\n    \"32 : /usr/local/diagnostics/-usr-bin-strings_-dev-mtd8.report\",\n    \"33 : /usr/local/diagnostics/-bin-netstat.report\",\n    \"34 : /usr/local/diagnostics/TOE_1_TX_008C101EDF04_637\",\n    \"35 : /usr/local/diagnostics/iomem.log\",\n    \"36 : /usr/local/diagnostics/vmallocinfo.log\",\n    \"37 : /usr/local/diagnostics/dev.log\",\n    \"38 : /usr/local/diagnostics/usr_interfaces.log\",\n    \"39 : /usr/local/diagnostics/tx_settings.db.log\",\n    \"40 : /usr/local/diagnostics/emerald_usb_composite_dev.cfg\",\n    \"41 : /usr/local/diagnostics/edid_head0.cfg\",\n    \"42 : /usr/local/diagnostics/edid_head1.cfg\",\n    \"43 : /usr/local/diagnostics/syslog.log.0\",\n    \"44 : /usr/local/diagnostics/syslog.log\"\n  ]\n}\n</code></pre>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#get-nth-diagnostic-file-content","title":"GET Nth Diagnostic File Content","text":""},{"location":"architecture/appliance_rest_api/appliance_rest_api/#url_50","title":"URL","text":"<p>https://IP:8888/control/diags/?file_id=2</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#response-class-json-structure_23","title":"Response Class JSON Structure","text":"<pre><code>{\n  \"/usr/local/diagnostics/usr_interfaces.log\": \"auto lo\\niface lo inet loopback\\n\\nauto eth0\\niface eth0 inet static\\n\\taddress 10.211.130.2\\n\\tnetmask 255.255.248.0\\n\\tbroadcast 10.211.135.255\\n\\tgateway 10.211.128.1\\n\"\n}\n</code></pre>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#get-log-level","title":"GET Log Level","text":""},{"location":"architecture/appliance_rest_api/appliance_rest_api/#url_51","title":"URL","text":"<p>https://IP:8888/control/diags/loglevel</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#implementation-notes_47","title":"Implementation Notes","text":"<p>This node returns the log level set on appliance</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#response-class-json-structure_24","title":"Response Class JSON Structure","text":"<pre><code>{\n  \"LOG_LEVEL\": \"7\\n\"\n}\n</code></pre>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#get-debug-mode","title":"GET Debug Mode","text":""},{"location":"architecture/appliance_rest_api/appliance_rest_api/#url_52","title":"URL","text":"<p>https://IP:8888/control/diags/debugmode</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#implementation-notes_48","title":"Implementation Notes","text":"<p>This node returns the debug status of the appliance</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#response-class","title":"Response Class","text":"<p>If debug is enabled a HTTP status code 200 is returned with DEBUG MODE on.</p> <p>If debug is disabled a HTTP status code 200 is returned with DEBUG MODE off.</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#get-receiver-timer-configurations","title":"GET Receiver Timer Configurations","text":""},{"location":"architecture/appliance_rest_api/appliance_rest_api/#url_53","title":"URL","text":"<p>https://IP:8888/control/configuration/timers_configuration</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#implementation-notes_49","title":"Implementation Notes","text":"<p>This node returns the appliance timers configuration, Local OSD Inactivity timer value and Local Connection Inactivity timer value.</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#response-class-definition_24","title":"Response Class Definition","text":"Parameter Format timers_config 32 byte char array local_osd_inactivity int local_connection_inactivity int"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#response-class-json-structure_25","title":"Response Class JSON Structure","text":"<pre><code>{\n  \"timers_config\": \"global\",\n  \"local_osd_inactivity\": 0,\n  \"local_connection_inactivity\": 0\n}\n</code></pre>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#rest-api-northbound","title":"REST API Northbound","text":"<p>Certain appliance functions require sending information to the Manager.</p> <p>At present there are three northbound services on the manager (specify versions)</p> <ul> <li>LDAP user authentication via MS Active Directory</li> <li>USB extender connection notification</li> <li>API to communicate change in the IP address</li> </ul> <pre><code>bxa-api/devices/kvm/ipaddr\n</code></pre> <pre><code>proposal payload:\n{\n\"ip\": \"10.211.131.83\",\n\"mac\": \"mac addredss\",\n\"netmask\": \"netmask\",\n\"primary_dns\": \"dns\",\n\"secondary_dns\": \"dns2\"\n}\n\nproposal response:\n{\n\"code\" : \"200\",\n\"message\": \"success\"\n}\n\n\n{\n\"code\" : \"400 or other\",\n\"message\": \"\n}\n</code></pre>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#ldap-authentication-via-active-directory","title":"LDAP Authentication via Active Directory","text":"<p>Users logging in to the Receiver OSD can be authenticated in terms of their LDAP credentials. In order to facilitate this the Boxilla manager</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#post-ldap-login","title":"POST LDAP login","text":""},{"location":"architecture/appliance_rest_api/appliance_rest_api/#url_54","title":"URL","text":"<p>https://MGR_IP/api/ad/v1/user/login</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#implementation-notes_50","title":"Implementation Notes","text":"<p>PUT call to Manager LDAP server to authenticate user and password</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#request-class-formats_18","title":"Request Class Formats","text":"Parameter Format user 32 byte char array password 32 byte char array mac 50 byte char array"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#request-class-json-structure_14","title":"Request Class JSON Structure","text":"<pre><code>{\n    \"user\": \"john\u201d\n    \"mac\u201d     : \u201c01:1A:35:00:01:77\u201d\n}\n</code></pre>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#response-class_1","title":"Response Class","text":"<p>See https://limerick.blackbox.com/Engineering/SoftwareApplication/ENG-0007-068.docx</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#ldap-authentication-status","title":"LDAP authentication status","text":""},{"location":"architecture/appliance_rest_api/appliance_rest_api/#url_55","title":"URL","text":"<p>https://MGR_IP/api/ad/v1/user/auth_status</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#implementation-notes_51","title":"Implementation Notes","text":"<p>GET call to Manager LDAP server to check the status of the login. The appliance polls this endpoint once per second until a success acknowledgment is received or a 30s timeout has elapsed.</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#request-class-formats_19","title":"Request Class Formats","text":"Parameter Format user 32 byte char array mac 50 byte char array"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#request-class-json-structure_15","title":"Request Class JSON Structure","text":"<pre><code>{\n    \"user\": \"john\u201d\n    \"mac\u201d     : \u201c01:1A:35:00:01:77\u201d\n}\n</code></pre>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#response-class_2","title":"Response Class","text":"<p>See https://limerick.blackbox.com/Engineering/SoftwareApplication/ENG-0007-068.docx</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#post-ldap-authentication-complete","title":"POST LDAP authentication complete","text":""},{"location":"architecture/appliance_rest_api/appliance_rest_api/#url_56","title":"URL","text":"<p>https://MGR_IP/api/ad/v1/user/auth_complete</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#implementation-notes_52","title":"Implementation Notes","text":"<p>POST call to Manager LDAP server to notify that the custom database file has been downloaded successfully and that the login process has completed.</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#request-class-formats_20","title":"Request Class Formats","text":"Parameter Format user 32 byte char array mac 50 byte char array"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#request-class-json-structure_16","title":"Request Class JSON Structure","text":"<pre><code>{\n    \"user\": \"john\u201d\n    \"mac\u201d     : \u201c01:1A:35:00:01:77\u201d\n}\n</code></pre>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#response-class_3","title":"Response Class","text":"<p>See https://limerick.blackbox.com/Engineering/SoftwareApplication/ENG-0007-068.docx</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#connection-status","title":"Connection Status","text":"<p>The management system (Boxilla) allows the user to configure bonded connections which require USB extender hardware. On launching this type of connection, the appliance must notify the manager that the connection establishment is successful. When the manager receives notification from the appliance, it proceeds to launch the bonded connection by calling a REST endpoint defined on the USB Extender operating system.</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#post-connection","title":"POST Connection","text":""},{"location":"architecture/appliance_rest_api/appliance_rest_api/#url_57","title":"URL","text":"<p>POST https://MGR_IP/api/ connection_status/v1/connection</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#implementation-notes_53","title":"Implementation Notes","text":"<p>POST call to Manager USB Extender server to notify that a connection has been established.</p> <p>Note: In shared mode, the POST connection is sent only if there is video data passing via the transmitter.</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#request-class-formats_21","title":"Request Class Formats","text":"Parameter Format user 32 byte char array connection name 255 byte char array mac 50 byte char array"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#request-class-json-structure_17","title":"Request Class JSON Structure","text":"<pre><code>{\n    \"user\": \"john\u201d\n    \"connection_name\": \"usb_ext_tx_10.211.128.77\u201d\n    \"mac\u201d     : \u201c01:1A:35:00:01:77\u201d\n}\n</code></pre>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#response-class_4","title":"Response Class","text":"<p>See https://limerick.blackbox.com/Engineering/SoftwareApplication/ENG-0007-068.docx</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#delete-connection","title":"DELETE Connection","text":""},{"location":"architecture/appliance_rest_api/appliance_rest_api/#url_58","title":"URL","text":"<p>DELETE https://MGR_IP/api/ connection_status/v1/connection</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#implementation-notes_54","title":"Implementation Notes","text":"<p>DELETE call to Manager USB Extender server to notify that a connection has been terminated.</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#request-class-formats_22","title":"Request Class Formats","text":"Parameter Format mac 50 byte char array exit reason 16 byte char array"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#request-class-json-structure_18","title":"Request Class JSON Structure","text":"<pre><code>{\n    \"mac\u201d        : \u201c01:1A:35:00:01:77\u201d\n    \"exit_reason\": \"255\u201d\n}\n</code></pre>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#response-class_5","title":"Response Class","text":"<p>See https://limerick.blackbox.com/Engineering/SoftwareApplication/ENG-0007-068.docx</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#user-login-status","title":"User Login Status","text":"<p>When a user logs in or logs out of the OSD, the Rx appliance sends a PUT https call to Boxilla\u2019s log in status server. This will allow Boxilla to maintain an accurate record of the user that is logged in to the OSD.</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#post-log-in-status","title":"POST log in status","text":""},{"location":"architecture/appliance_rest_api/appliance_rest_api/#url_59","title":"URL","text":"<p>(Subject to change)</p> <p>POST https://MGR_IP/bxa-api/users/kvm/status</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#implementation-notes_55","title":"Implementation Notes","text":"<p>PUT call to Manager log in status server. Table 9.3 relates a code to each log in or log out type.</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#request-class-formats_23","title":"Request Class Formats","text":"Parameter Format user 32 byte char array(max) mac 50 byte char array context* 32 byte char arrya(max)"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#request-class-json-structure_19","title":"Request Class JSON Structure","text":"<pre><code>{\n    \"user\": \"john\u201d\n    \"mac\u201d     : \u201c01:1A:35:00:01:77\u201d\n    \"context\" : \u201cMANUAL_LOGIN\"\n}\n</code></pre> <p>*fixed to \u201cMANUAL_LOGIN\u201d for v1.0.6</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#response-class_6","title":"Response Class","text":"<p>See Ref 4 https://limerick.blackbox.com/Engineering/SoftwareApplication/ENG-0007-100.docx</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#delete-log-in-status","title":"DELETE log in status","text":""},{"location":"architecture/appliance_rest_api/appliance_rest_api/#url_60","title":"URL","text":"<p>DELETE https://MGR_IP/bxa-api/users/kvm/status</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#implementation-notes_56","title":"Implementation Notes","text":"<p>PUT call to Manager log in status server. Table 9.3 relates a code to each log in or log out type.</p>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#request-class-formats_24","title":"Request Class Formats","text":"Parameter Format user 32 byte char array(max) mac 50 byte char array"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#request-class-json-structure_20","title":"Request Class JSON Structure","text":"<pre><code>{\n    \"user\": \"john\u201d\n    \"mac\u201d     : \u201c01:1A:35:00:01:77\u201d\n}\n</code></pre>"},{"location":"architecture/appliance_rest_api/appliance_rest_api/#response-class_7","title":"Response Class","text":"<p>See Ref 4 https://limerick.blackbox.com/Engineering/SoftwareApplication/ENG-0007-100.docx</p>"},{"location":"architecture/boot_configuration/emerald4k_fitimages/","title":"Emerald 4K Image Formats","text":""},{"location":"architecture/boot_configuration/emerald4k_fitimages/#overview","title":"Overview","text":"<p>Emerald 4k uses fitimages for both the main upgrade and uImage files. The new fit format allows more flexibility in handling images of various types (kernel, ramdisk, etc.), it also enhances integrity protection of images with sha1 and md5 checksums.</p> <p>Currently there are two configurations of the Emerald 4K Encoder board, one variant with USB-R functionality provided by the net2272 and one provided by an Artix FPGA, these hardware differences must be handled in the boot file configurations.</p>"},{"location":"architecture/boot_configuration/emerald4k_fitimages/#uimage-templates","title":"uImage Templates","text":"<p>The Emerald4k uImage stores the kernel, devicetree and ramdisk which are then loaded to DDR in u-boot. The template files are stored in the following locations</p> EncoderDecoder <pre><code>board/blackbox/emerald/encoder/fit_templates\n</code></pre> <pre><code>board/blackbox/emerald/decoder/fit_templates\n</code></pre> <p>The templates have the correct binary paths added during the <code>post_build</code> operation and the uImage is generated as part of the <code>post_image</code> script.</p>"},{"location":"architecture/boot_configuration/emerald4k_fitimages/#hardware-differences","title":"Hardware Differences","text":"<p>Currently there are two configurations of the Emerald 4K Encoder board, one variant with USB-R functionality provided by the net2272 and one provided by an Artix FPGA some of these configuration differences are handled in the uImage template using the <code>configurations</code> tag. The latest fitimage template for the encoder uImage has the following <code>configurations</code></p> <pre><code>configurations {\n                default = \"conf@1\";\n                conf@1 {\n                        description = \"Boot Linux kernel with FDT blob + ramdisk\";\n                        kernel = \"kernel@0\";\n                        fdt = \"fdt@0\";\n                        ramdisk = \"ramdisk@0\";\n                        hash@1 {\n                                algo = \"sha1\";\n                        };\n                };\n                conf@2 {\n                        description = \"Boot Linux kernel with FDT blob\";\n                        kernel = \"kernel@0\";\n                        fdt = \"fdt@0\";\n                        hash@1 {\n                                algo = \"sha1\";\n                        };\n                };\n                emeraldtx-artix {\n                        description = \"Boot Linux kernel with Artix Device FDT blob + ramdisk\";\n                        kernel = \"kernel@0\";\n                        fdt = \"fdt@1\";\n                        ramdisk = \"ramdisk@0\";\n                        hash@1 {\n                                algo = \"sha1\";\n                        };\n                };\n        };\n</code></pre> <p>When the board gets to u-boot it reads the Encoder Platform code and if it determines that the board is an Artix variant then it loads an Artix specific configuration which contains a devicetree for that board.</p>"},{"location":"architecture/boot_configuration/emerald4k_fitimages/#upgrade-image-template","title":"Upgrade Image Template","text":"<p>The main upgrade file for the Emerald 4K boards stores the BOOT.bin, uImage and \"golden\" backup images the templates are stored in</p> EncoderDecoder <pre><code>board/blackbox/emerald/encoder/fit_templates/release-encoder.template\n</code></pre> <pre><code>board/blackbox/emerald/decoder/fit_templates/release-decoder.template\n</code></pre> <p>Creating a release fitimage can be done using the <code>create-fit</code> helper file in buildroot.</p>"},{"location":"architecture/boot_configuration/emerald4k_fitimages/#upgrade-hardware-differences","title":"Upgrade Hardware Differences","text":"<p>Similarly to the uImage template the two different hardware configurations for the Emerald 4K Encoder must be handled. Each board variant has its own BOOT.bin file, when running the <code>emerald_upgrade</code> binary the board type is determined and the correct BOOT.bin file is selected.</p>"},{"location":"architecture/boot_configuration/emerald4k_fitimages/#bootbin-templates","title":"BOOT.bin Templates","text":"<p>The BOOT.bin files are generated using Boot Image Format(BIF). Invoking the <code>create_boot_components.sh</code> script in the <code>boot/</code> folder of buildroot will create a bif file and generate a BOOT.bin</p>"},{"location":"architecture/boot_configuration/emerald4k_fitimages/#bootbin-hardware-differences","title":"BOOT.bin Hardware Differences","text":"<p>Handling of the Artix Variant of the Emerald 4K is done by adding a new entry to the bif file to load the Artix bitstream into ddr.</p> Artix Variantnet2272 variant <pre><code>the_ROM_image:\n{\n[fsbl_config] a53_x64\n[bootloader] zynqmp_fsbl.elf\n[pmufw_image] pmufw.elf\n[destination_cpu=a53-0, exception_level=el-3, trustzone] bl31.elf\n[destination_cpu=a53-0, exception_level=el-2] u-boot.elf\n[destination_cpu=r5-0] r5_0.elf\n[destination_cpu=r5-1] r5_1.elf\n[destination_device=pl] system.bit\n[load=0x60000000] artix_fpga.bin\n}\n</code></pre> <pre><code>the_ROM_image:\n{\n[fsbl_config] a53_x64\n[bootloader] zynqmp_fsbl.elf\n[pmufw_image] pmufw.elf\n[destination_cpu=a53-0, exception_level=el-3, trustzone] bl31.elf\n[destination_cpu=a53-0, exception_level=el-2] u-boot.elf\n[destination_cpu=r5-0] r5_0.elf\n[destination_cpu=r5-1] r5_1.elf\n[destination_device=pl] system.bit\n}\n</code></pre>"},{"location":"architecture/device_rest_api/receiver_to_boxilla_connection_status_over_rest/","title":"Receiver to Boxilla connection status notification over REST","text":""},{"location":"architecture/device_rest_api/receiver_to_boxilla_connection_status_over_rest/#master-document-revision-history","title":"Master Document Revision History","text":"Date Version Description Author/Editor Oct 10th 2019 0.1 First Draft Marcus McInerney Nov 1st 2019 0.2 Second Draft Marcus McInerney Aug 17th 2021 0.3 Set status to approved Marcus McInerney"},{"location":"architecture/device_rest_api/receiver_to_boxilla_connection_status_over_rest/#introduction","title":"Introduction","text":"<p>Boxilla version 3.3.3 requires that manged Rx appliances send notification to Boxilla when an Rx-Tx connection is established and terminated. This feature is required for two reasons:</p> <ol> <li>To allow Boxilla to activate usb_extender connections when appropriate (see Ref 1).</li> <li>To allow Boxilla to maintain an accurate log of active connections. At present, this is done by means of an audit that occurs every 60s. </li> </ol> <p>The managed Rx will send notification to Boxilla in the following scenarios:</p> <ul> <li>OSD connection launch and termination</li> <li>Connection launch and termination from Boxilla over REST</li> <li>Connection launch and termination from Control Bridge over non-secure REST.</li> </ul> <p>Ref 1 proposes that the Rx appliance notifies Boxilla of these changes via https calls to a secure web server running on Boxilla. This document defines the REST system that will be used to notify Boxilla of the Rx-Tx connection status and specifies the events will cause the Rx appliance to issue these REST calls.</p> <p>As of V5.2.3, the Rx appliance will issue a https call to notify Boxilla of connection status changes.  This call will be made regardless of the version of the Boxilla manager (see 4.3).</p>"},{"location":"architecture/device_rest_api/receiver_to_boxilla_connection_status_over_rest/#assumptions-and-dependencies","title":"Assumptions and Dependencies","text":"<p>This document details the change requirements in terms of the Rx appliance.  It corresponds to ENG-007-084.docx (Ref 1). The system applies to all Black Box KVM Receiver hardware variants (EM-4k and EM-2K). </p>"},{"location":"architecture/device_rest_api/receiver_to_boxilla_connection_status_over_rest/#references","title":"References","text":"<p>Ref 1. https://bbweb.blackbox.com/sites/Limerick/Engineering/SoftwareApplication/ENG-0007-084.docx Ref 2. https://bbweb.blackbox.com/sites/Limerick/Engineering/SoftwareApplication/ENG-0007-068.docx</p>"},{"location":"architecture/device_rest_api/receiver_to_boxilla_connection_status_over_rest/#implementation","title":"Implementation","text":"<p>This section describes the implementation of the client calls to Boxilla\u2019s Connection Status Server (CSS). </p>"},{"location":"architecture/device_rest_api/receiver_to_boxilla_connection_status_over_rest/#https-security","title":"https security","text":"<p>Https calls from the Rx appliance to the CSS occur over https protocol using cryptographic keys located on the Rx appliance and Boxilla server. The system used for encryption is identical to that implemented for Rx interfacing with Boxilla\u2019s LDAP server (Ref. 2). </p>"},{"location":"architecture/device_rest_api/receiver_to_boxilla_connection_status_over_rest/#libcurl-https-request-timeout","title":"Libcurl https request timeout","text":"<p>Libcurl provides an option to set a timeout for https requests. In the common code base, this timeout is hardcoded to 3 seconds. This means that if an https request does not receive a response after 3 seconds have elapsed, libcurl will return an error to the calling function. The timeout exists so that the binary or library making the call does not end up in a blocked state in the event of a server crash. </p>"},{"location":"architecture/device_rest_api/receiver_to_boxilla_connection_status_over_rest/#libcurl-maximum-file-size","title":"Libcurl maximum file size","text":"<p>Libcurl provides an option to limit the size of a file coming from a server. In the common code base, this has been set to 100kB. This means that if response from a server contains a binary body greater than 100kB, libcurl will return an error before the file copied to appliance memory. The limit of 100kB is selected for the following reasons:</p> <ol> <li>If the Rx appliance makes an http call to a non-existent uri on Boxilla, a \u201chelp\u201d file representing a full trace of its http framework is generated as part of the 404 response. The size of this trace is ~1MB and is copied to the response body, and eventually processed by libcurl using appliance cache memory. Setting maximum file size to 100kB will prevent the file from being copied from the response. Setting this limit is necessary because when an Rx appliance running V5.2.3 (or greater) is managed by a Boxilla V3.3 (or less) the appliance will be making a call to a non-existent endpoint and processing files of this size may impact on performance.  </li> <li>The Rx application software executes GET and PUT calls to uri\u2019s which are defined on an internal sever, for instance, when generating audio_statistics. The binary bodies of the data generated by these calls can be as large as 20kB. The 100kB limit will provide sufficient headroom to allow the appliance internal server to function correctly.  </li> </ol>"},{"location":"architecture/device_rest_api/receiver_to_boxilla_connection_status_over_rest/#process-backgrounding","title":"Process backgrounding","text":"<p>All https calls made to the CSS are backgrounded via a system call to the restapi command line interface. The reason for this is to ensure that the time required to make the request and receive a response (~100ms) is not added to the time required to establish an Rx-Tx connection. </p>"},{"location":"architecture/device_rest_api/receiver_to_boxilla_connection_status_over_rest/#error-handling","title":"Error handling","text":"<p>The https status code along with the uri are logged to syslog.</p> Status code Description 200 OK 400 BAD REQUEST 403 FORBIDDEN 404 NOT FOUND 500 INTERNAL SERVER ERROR"},{"location":"architecture/device_rest_api/receiver_to_boxilla_connection_status_over_rest/#overview","title":"Overview","text":"<p>The https server will reside on Boxilla and will allow the Rx to notify Boxilla of any change in its connection status. When the Rx-Tx connection is launched, the Rx will send an http request to the server to notify that the connection is active. When the Rx-Tx connection is terminated, the Rx will send an http request to the server to say that the connection is no longer active. Section 4.6 provides detail on events that will trigger notification of changes connection status.</p> <p>The Rx will notify Boxilla of any change via the following uri:</p> <p>api/usb_extender/v1/connection </p> <p>The uri will accept two types of request, determined by the http verb used - POST or DELETE:</p> <ol> <li>POST - this request notifies Boxilla that a connection is launched. </li> <li>DELETE- this request notifies Boxilla that a connection is terminated. </li> </ol> <p>The following section provides implementation details. </p>"},{"location":"architecture/device_rest_api/receiver_to_boxilla_connection_status_over_rest/#post-connection-https-request","title":"POST connection https request","text":"<p>Launching an Rx-Tx connection on a managed Rx causes a POST request to the connection endpoint. This section defines the endpoint and specifies the events that initiate a call to the endpoint from the Rx.</p> Http verb URI Content-Type parameter bytes parameter description POST /api/usb_extension/v1/connection json MAC 16 MAc address of RX(upper case) connection name 32 Conenction name as specified in xml user 32 Associated user as specified in xml"},{"location":"architecture/device_rest_api/receiver_to_boxilla_connection_status_over_rest/#event-that-initiate-post-request","title":"Event that initiate POST request","text":""},{"location":"architecture/device_rest_api/receiver_to_boxilla_connection_status_over_rest/#on-completion-of-decoder_startsh","title":"On completion of decoder_start.sh","text":"<p>The Rx appliance will make a POST call to the endpoint on completion of decoder_start.sh. This requires parsing of the startapp.sh file in order to obtain the user and connection_name. </p>"},{"location":"architecture/device_rest_api/receiver_to_boxilla_connection_status_over_rest/#delete-connection-https-request","title":"DELETE connection https request","text":"<p>The Rx issues an https DELETE request to this endpoint when an Rx-Tx connection terminates. This section defines the endpoint and specifies the events that initiate a call to the endpoint from the Rx.</p> Http verb URI Content-Type parameter bytes parameter description DELETE /api/usb_extender/v1/connection json MAC 16 MAC address of RX (upper case) exit_reason(see 6) - unsigned integer representing exit reason"},{"location":"architecture/device_rest_api/receiver_to_boxilla_connection_status_over_rest/#events-that-initiate-delete-request","title":"Events that initiate DELETE request","text":""},{"location":"architecture/device_rest_api/receiver_to_boxilla_connection_status_over_rest/#startguish","title":"startgui.sh","text":"<p>The Rx appliance will make a DELETE call to the endpoint defined in 4.6.1 directly after the connection is terminated from startgui.sh. This precedes launch of OSD. </p>"},{"location":"architecture/device_rest_api/receiver_to_boxilla_connection_status_over_rest/#on-creation-of-preset_switch-file-on-switching-connection-via-preset","title":"On creation of PRESET_SWITCH file (on switching connection via preset)","text":"<p>Boxilla \u201cpreset\u201d allows for a connection to be terminated with no subsequent launch of OSD. This is to minimise the time required to establish a switched connection, for instance  Terminating connection_1 (RX1-&gt;TX1) and launching connection_2 (RX1-&gt;TX2). </p> <p>In this case, a file is written to the temporary folder which causes startgui.sh to block the OSD from launching. This requires a call to DELETE on the endpoint defined in 4.6.1 on exiting function terminate_connection_no_osd. </p>"},{"location":"architecture/device_rest_api/receiver_to_boxilla_connection_status_over_rest/#notes","title":"Notes","text":""},{"location":"architecture/device_rest_api/receiver_to_boxilla_connection_status_over_rest/#appliance-may-send-numerous-delete-s-in-succession","title":"Appliance may send numerous DELETE s in succession","text":"<p>Numerous reboots of the Rx causes the OSD to reload. This causes a call to DELETE on uri defined in 4.6.1. </p>"},{"location":"architecture/device_rest_api/receiver_to_boxilla_connection_status_over_rest/#connection-launched-by-boxilla-overrides-osd-launched-connection","title":"Connection launched by Boxilla overrides OSD launched connection","text":"<p>If a connection is launched via OSD then another (or the same connection) is launched from Boxilla, the OSD launched connection is overridden. This terminates the dfreerdp instance, causing the OSD to launch. When this occurs the CSS receives a DELETE request followed by a POST request.</p> <p></p>"},{"location":"architecture/device_rest_api/receiver_to_boxilla_connection_status_over_rest/#exit-codes","title":"Exit codes","text":"Name Code Description (included where not explicit) DF_EXIT_SUCCESS 0 DF_EXIT_DISCONNECT 1 DF_EXIT_LOGOFF 2 DF_EXIT_IDLE_TIMEOUT 3 DF_EXIT_LOGON_TIMEOUT 4 DF_EXIT_CONN_REPLACED 5 DF_EXIT_OUT_OF_MEMORY 6 DF_EXIT_CONN_DENIED 7 DF_EXIT_CONN_DENIED_FIPS 8 DF_EXIT_USER_PRIVILEGES 9 DF_EXIT_FRESH_CREDENTIALS_REQUIRED 10 DF_EXIT_DISCONNECT_BY_USER 11 DF_EXIT_LOGOFF_BY_USER 12 DF_EXIT_LICENSE_INTERNAL 16 DF_EXIT_LICENSE_NO_LICENSE_SERVER 17 DF_EXIT_LICENSE_NO_LICENSE 18 DF_EXIT_LICENSE_BAD_CLIENT_MSG 19 DF_EXIT_LICENSE_HWID_DOESNT_MATCH 20 DF_EXIT_LICENSE_BAD_CLIENT 21 DF_EXIT_LICENSE_CANT_FINISH_PROTOCOL 22 DF_EXIT_LICENSE_CLIENT_ENDED_PROTOCOL 23 DF_EXIT_LICENSE_BAD_CLIENT_ENCRYPTION 24 DF_EXIT_LICENSE_CANT_UPGRADE 25 DF_EXIT_LICENSE_NO_REMOTE_CONNECTIONS 26 DF_EXIT_RDP 32 DF_EXIT_MEMORY 129 DF_EXIT_PROTOCOL 130 DF_EXIT_CONN_FAILED 131 DF_EXIT_CLOUDIUM_PIPE 132 DF_EXIT_IHSE_ERROR 133 IHSE Specific does not concern Blackbox Rx. DF_EXIT_KILL 134 Used when user enters key combo to load previous connection DF_EXIT_PREVIOUS 135 Used when user enters key combo to load next connection DF_EXIT_NEXT 136 DF_EXIT_RESTORE 137 Restore the current connection DF_EXIT_TIMEOUT 138 DF_EXIT_NLA_NEG_FAIL 139 NLA connection failure DF_EXIT_NLA_AUTH_FAIL 140 NLA authentication failure DF_EXIT_DEV_NODE_FAIL 141 Dev Nodes Fail to Open DF_EXIT_INACTIVITY_TIMEOUT 142 Inactivity timeout DF_EXIT_PREEMPTION_ACCESS_DENIED 143 Preemption access denied DF_EXIT_PREEMPTION_ACCESS_GRANTED 144 DF_EXIT_PREEMPTION_IN_PROGRESS 145 DF_EXIT_NON_PREEMPTIBLE_CONNECTION 146 DF_EXIT_DOMAIN_KEY_ERROR 147 DF_EXIT_FPGA_RESET_ERROR 148 DF_EXIT_UNKNOWN 255 <ul> <li>Next Document in Series-&gt; Zone Support</li> </ul>"},{"location":"architecture/device_rest_api/rest_api/","title":"Device REST API","text":"<ul> <li>Current Released Version: REST API v1.0.15 (this is the first version that covers both appliance and SDKVM)</li> <li>Current In-progress Version: REST API v1.0.16 ( This release will be targeted towards SDKVM 1.2.0 )</li> <li>Current Released Document Version: 0.16 </li> <li>Current In-progress Document Version: 0.17 </li> </ul> <p>The Appliance Rest API can be found here</p>"},{"location":"architecture/device_rest_api/rest_api/#summary-of-changes-between-document-version-015-and-016","title":"Summary of Changes between Document Version 0.15 and 0.16","text":"<ul> <li>Supports both SDKVM and appliances</li> <li>Documentation changes associated with statistics for SDKVM - see https://github.com/blackbox-rnd/embedded_documentation/pull/2</li> </ul>"},{"location":"architecture/device_rest_api/rest_api/#summary-of-changes-between-document-version-016-and-017","title":"Summary of Changes between Document Version 0.16 and 0.17","text":"<ul> <li>Documentation changes associated with statistics for SDKVM - see https://github.com/blackbox-rnd/embedded_documentation/pull/2</li> <li>Added note to indicate that power led functionality is not supported on the SDKVM. Added led control to 1.9.3 CONTROL table.</li> <li>Adding support for Control Bridge force login/logout and workspace launch over unsecure REST API</li> </ul>"},{"location":"architecture/device_rest_api/rest_api/#master-document-revision-history","title":"Master Document Revision History","text":"Date Version Description Author/Editor Comments 27/11/17 0.1 First Draft Marcus McInerney 1/12/17 0.2 Second Draft Marcus McInerney 29/05/18 0.3 Third Draft Marcus McInerney 27/11/19 0.4 Fourth Draft Marcus McInerney 22/10/20 0.5 Fifth Draft John O'Sullivan 02/12/20 0.6 REST API v1.0.8 updates Dan O'Donovan 07/07/21 0.7 REST API v1.0.9 Marcus McInerney 24/03/22 0.8 REST API v1.0.10 Pratima Deshpande 30/06/22 0.9 REST API v1.0.11 John O'Sullivan 21/02/23 0.10 REST API v1.0.11 Olga Birkvalde 17/04/23 0.15 REST API v1.0.15 John O'Sullivan 12/06/23 0.16 REST API v1.0.15 John O'Sullivan Released 15/08/23 0.17 REST API v1.0.16 John O'Sullivan Adding support for Control Bridge <p>This document describes REST API for all Black Box Appliances including KVM and Appliances.</p> <p>This document supersedes all previous Black Box KVM REST API documents.</p> <p>All API command request class parameters must be specified unless otherwise stated.</p> <p>Note on representation formats: The section on Error Handling and Get Endpoints provide tables that specify the formats of request and response class parameters. The formats used are as follows:</p> <ul> <li> <p>Character arrays: The numbers specified indicate the maximum size of the character array, for example 256 byte char array means that the character array has a capacity of 256, in practice its content may be less than this.</p> </li> <li> <p>Integers: All int values used in the response classes are formatted using the json_integer function defined in the jansson framework. Int values are unsigned and can have a maximum value of 2<sup>64</sup>[Reference 1].</p> </li> <li> <p>Doubles: All double values used in the response classes are formatted using the json_real function defined in the jansson framework. Double parameters and can have a minimum of 10<sup>-18</sup> and a maximum of 2<sup>32</sup>.</p> </li> </ul>"},{"location":"architecture/device_rest_api/rest_api/#summary-of-changes-in-proposed-api-release-v1015","title":"Summary of Changes in Proposed API Release v1.0.15","text":"<p>The following get end points were added for SDKVM:</p> <p>Added the following new Get endpoints</p> <ul> <li>/control/configure/network Provides the network settings associated with the device interface: ip_address gateway, netmask,dns,mac address, broad cast address</li> <li>/control/upgrade/diskspace</li> <li>/control/upgrade/progress/status</li> <li>/statistics/facts/network/eth_connections</li> <li>/users/workspaces/list</li> <li>/workspace/status</li> </ul> <p>Added the following new Post endpoints</p> <ul> <li>/control/upload</li> <li>/control/largefileupload</li> </ul> <p>Added the following new Put endpoints</p> <ul> <li>/control/unmanage</li> <li>/control/configure/network</li> <li>/control/upgrade/start</li> <li>/control/upgrade/remove</li> <li>/control/workspaces</li> </ul> <p>Added sdkvm to the Hardware Matrices</p> <p>Other Corrections</p> <ul> <li>Corrected spelling errors for reset_authentication_status to reset_authentication_stats</li> <li>Corrected spelling errors for flush_authentication_status to flush_authentication_stats</li> </ul>"},{"location":"architecture/device_rest_api/rest_api/#summary-of-changes-in-proposed-api-release-v1016","title":"Summary of Changes in Proposed API Release v1.0.16","text":"<ul> <li>Added a table of Alerts Instances</li> <li>Added unsecure methods for force login, force logout and force workspace</li> <li>Added method for fetching workspace and user details</li> </ul>"},{"location":"architecture/device_rest_api/rest_api/#references","title":"References","text":"<ul> <li>Reference 1</li> <li>Reference 2</li> <li>Reference 3</li> <li>Reference 4</li> <li>REST API Test report</li> </ul>"},{"location":"architecture/device_rest_api/rest_api/#versioning","title":"Versioning","text":"<p>The version of the API is defined as a key-value pair whereby the key is api-version and the value represents the version.</p> <p>Key = api-version value = 1.0.4</p> <p>The format for the version value is x.y.z (major.minor.revision). Validation of the key-value pair is case insensitive. The API version obtained using the version URL 4.1</p> <p>If a new URL or a new version of an existing URL is defined, the API version minor field will be incremented and the updated URL will be defined in get end point summary table. The same applies for deprecated endpoints.</p>"},{"location":"architecture/device_rest_api/rest_api/#error-handling","title":"Error handling","text":"<p>Version 1.0.4 of the REST API will use the following subset of HTTP status codes for error handling, defined in 10</p> <ul> <li>200 OK</li> <li>400 Bad Request</li> <li>403 Forbidden</li> <li>404 Not Found</li> <li>500 Internal Server Error</li> </ul>"},{"location":"architecture/device_rest_api/rest_api/#configuration-codes","title":"Configuration Codes","text":""},{"location":"architecture/device_rest_api/rest_api/#transmitter-settings-codes","title":"Transmitter Settings Codes","text":"<p>The following table provides the numeric code for each of the transmitter configuration settings.</p> code video quality video source optimization hid 2K head1 edid 2k head2 edid 4k head1 edid mouse/keyboard timeout audio source 0 Best quality off default 1920x1080 1920x1080 default 0 analog source 1 2 dvi optimised basic 1920 x 1200 1920 x 1200 3840x2160p60Hz 1 display port source 2 default vga high performance mac 1680 x 1050 1680 x 1050 3840x2160p30Hz 2 3 4 vga optimised absolute 1280 x 1024 1280 x 1024 2560x1440p60Hz 3 4 best compression vga low bandwidth absolute mac 1024 x 768 1024 x 768 1920x1080p60Hz 4 5 - - absolute basic clone clone clone 5"},{"location":"architecture/device_rest_api/rest_api/#receiver-settings-codes","title":"Receiver Settings Codes","text":"<p>The following table provides the numeric code for each of the transmitter configuration settings.</p> code power mode http enable rx scaling 0 manual disabled disabled 1 auto enabled enabled \" \" not supported \" \" <p>PS: Please note, power_mode is a feature supported only for CORRIB and DEEL devices and not supported anymore for Emerald devices or for the SDKVM.</p> <p>rx_scaling is supported for only 4K emerald devices.</p>"},{"location":"architecture/device_rest_api/rest_api/#osd-log-in-status-strings","title":"OSD log in status strings","text":"<p>The following table provides the context strings for each log in type.</p> context rest login auto login manual login post connection login"},{"location":"architecture/device_rest_api/rest_api/#http-status-codes","title":"HTTP Status Codes","text":"<p>The following table specified the HTTP status codes used by the REST API. (ref: https://en.wikipedia.org/wiki/List_of_HTTP_status_codes)</p> type description 200 OK General success status code. This is the most common code. Used to indicate success. 400 BAD REQUEST General error for when fulfilling the request would cause an invalid state. Domain validation errors, missing data, etc. are some examples. It is generally used when there is PARAMETER ERROR with the request. 401 UNAUTHORISED Similar to\u00a0403 Forbidden, but specifically for use when authentication is required and has failed or has not yet been provided. The response must include a WWW-Authenticate header field containing a challenge applicable to the requested resource. See\u00a0Basic access authentication\u00a0and\u00a0Digest access authentication.[33]\u00a0401 semantically means \"unauthorised\",[34]\u00a0the user does not have valid authentication credentials for the target resource. 403 FORBIDDEN The request contained valid data and was understood by the server, but the server is refusing action. This may be due to the user not having the necessary permissions for a resource or needing an account of some sort, or attempting a prohibited action (e.g. creating a duplicate record where only one is allowed). This code is also typically used if the request provided authentication via the WWW-Authenticate header field, but the server did not accept that authentication. The request should not be repeated. 404 NOT FOUND The requested resource could not be found but may be available in the future. Subsequent requests by the client are permissible. 500 INTERNAL SERVER ERROR A generic error message, given when an unexpected condition was encountered and no more specific message is suitable."},{"location":"architecture/device_rest_api/rest_api/#uri-hardware-matrices","title":"URI Hardware Matrices","text":""},{"location":"architecture/device_rest_api/rest_api/#appliance-configuration","title":"Appliance configuration","text":"URI sdkvm rx corrib rx emerald se rx emerald pe rx zerou rx emerald 4K tx corrib tx emerald se tx emerald pe tx zerou /configuration/rx_settings \u2573 \u2713 \u2713 \u2713 \u2713 \u2713 \u2573 \u2573 \u2573 \u2573 /configuration/tx_settings \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 \u2713 \u2713 \u2713 \u2713 /configuration/tx_clone_name \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 \u2713 \u2713 \u2713 \u2713 /configuration/rx_edid_table1 \u2573 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2573 \u2573 \u2573 /configuration/rx_edid_table2 \u2573 \u2713 \u2713 \u2713 \u2713 \u2713 \u2573 \u2573 \u2573 \u2573 /configuration/tx_edid_table1 \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 \u2713 \u2713 \u2713 \u2713 /configuration/tx_edid_table2 \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 \u2713 \u2713 \u2713 \u2713"},{"location":"architecture/device_rest_api/rest_api/#statistics","title":"Statistics","text":"URI sdkvm rx corrib rx emerald se rx emerald pe rx zerou rx emerald 4K tx corrib tx emerald se tx emerald pe tx zerou tx emerald4K /statistics/facts/system_facts \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /statistics/facts/video_facts \u2573 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /statistics/facts/audio_facts \u2573 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /statistics/facts/analog_audio_facts \u2573 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /statistics/facts/usb_audio_facts \u2573 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /statistics/facts/usb_facts \u2573 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /statistics/previous_connections \u2573 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /statistics/active_connections \u2573 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /statistics/connection_control \u2573 \u2713 \u2713 \u2713 \u2713 \u2713 \u2573 \u2573 \u2573 \u2573 \u2573 /statistics/facts/network/physical \u2573 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /statistics/facts/network/toe_connections \u2573 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /statistics/facts/network/eth_connections \u2713 \u2573 \u2573 \u2573 \u2573 \u2713 \u2573 \u2573 \u2573 \u2573 \u2573"},{"location":"architecture/device_rest_api/rest_api/#control","title":"CONTROL","text":"URI action sdkvm rx corrib rx emerald se rx emerald pe rx zerou rx emerald 4K tx corrib tx emerald se tx emerald pe /control flush \u2573 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /control flush_authentication_stats \u2573 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /control flush_active_connections \u2573 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /control transform_active_previous \u2573 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /control reset_authentication_stats \u2573 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /control reboot_device \u2573 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /control/user - \u2573 \u2713 \u2713 \u2713 \u2713 \u2713 \u2573 \u2573 \u2573 /control/user log_off \u2573 \u2713 \u2713 \u2713 \u2713 \u2713 \u2573 \u2573 \u2573 /control/connections make_connection \u2573 \u2713 \u2713 \u2713 \u2713 \u2713 \u2573 \u2573 \u2573 /control/connections force_connection \u2573 \u2713 \u2713 \u2713 \u2713 \u2713 \u2573 \u2573 \u2573 /control/workspaces force_workspace \u2713 \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 /control/connections terminate_connection \u2573 \u2713 \u2713 \u2713 \u2713 \u2713 \u2573 \u2573 \u2573 /control/connections terminate_connection_no_osd \u2573 \u2713 \u2713 \u2713 \u2713 \u2713 \u2573 \u2573 \u2573 /control/connections connection_termination,exit code,exit_message \u2573 \u2713 \u2713 \u2713 \u2713 \u2713 \u2573 \u2573 \u2573 /control/safe_mode - \u2573 \u2573 \u2573 \u2573 \u2573 \u2713 \u2573 \u2573 \u2573 /control/process? - \u2573 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /control/upgrade/diskspace disk_space_check \u2713 \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 /control/upgrade/progress/status upgrade_status_check \u2713 \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 /control/upload - \u2713 \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 /control/largefileupload - \u2713 \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 /control/upgrade/start - \u2713 \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 /control/configure/network - \u2713 \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 /control/unmanage - \u2713 \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 /control/upgrade/remove remove_image_files \u2713 \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 /control/zone - \u2573 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /control/diags/loglevel - \u2573 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /control/led - \u2573 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /control/configuration/timers_configuration - \u2573 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /control/configuration/bonded_group - \u2573 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /control/configuration/tx_edid_table_1* - \u2573 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /control/configuration/tx_edid_table_2* - \u2573 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713"},{"location":"architecture/device_rest_api/rest_api/#misc","title":"MISC","text":"URI action sdkvm rx corrib rx emerald se rx emerald pe rx zerou rx emerald 4K tx corrib tx emerald se tx emerald pe /control flush \u2573 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /version - \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /alerts - \u2573 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713"},{"location":"architecture/device_rest_api/rest_api/#end-points","title":"End Points","text":""},{"location":"architecture/device_rest_api/rest_api/#rest-api-put-commands","title":"REST API PUT Commands","text":"<p>The following table specifies endpoints accessed using the PUT verb.</p> URL Control Object (action) Verb 1.0.16 1.0.15 1.0.11 1.0.10 1.0.9 1.0.8 1.0.7 1.0.6 1.0.5 1.0.4 /control/configuration/rx_settings - PUT \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /control/configuration/tx_settings - PUT \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /control/configuration/tx_edid_table_1* - PUT \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 \u2713 \u2713 /control/configuration/tx_edid_table_2* - PUT \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 \u2713 \u2713 /control/configuration/zone - PUT \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2573 \u2573 /control/configuration/bonded_group - PUT \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2573 \u2573 \u2573 /control/configuration/timers_configuration - PUT \u2713 \u2713 \u2713 \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 /control flush PUT \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /control transform_active_previous PUT \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /control reset_authentication_stats PUT \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /control reboot_device PUT \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2573 \u2573 /control log_off PUT \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /control make_connection PUT \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /control force_connection PUT \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /control force_workspace PUT \u2713 \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 /control/connections action: terminate_connection PUT \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /control/connections action: terminate_connection_no_osd PUT \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /control/connections action: connection_termination, exit_message: \"\",exit_code: \"\" PUT \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2573 \u2573 \u2573 /control/diags/loglevel - PUT \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2573 /control/diags/run - PUT \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2573 /control/led led_enable/led_disable PUT \u2713 \u2713 \u2713 \u2713 \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 /user/login - PUT \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2573 \u2573 /control/unmanage - PUT \u2713 \u2713 \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 /control/configure/network - PUT \u2713 \u2713 \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 /control/upgrade/start - PUT \u2713 \u2713 \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 /control/upgrade/remove - PUT \u2713 \u2713 \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 \u2573"},{"location":"architecture/device_rest_api/rest_api/#put-network-settings","title":"PUT Network Settings","text":""},{"location":"architecture/device_rest_api/rest_api/#url","title":"URL","text":"<p>https://IP:8888/control/configure/network</p>"},{"location":"architecture/device_rest_api/rest_api/#implementation-notes","title":"Implementation Notes","text":"<p>This node allows configuration of network settings on the SDKVM over HTTPS.</p>"},{"location":"architecture/device_rest_api/rest_api/#request-class-json-structure","title":"Request Class JSON Structure","text":"<pre><code>{\n  \"ip_address\": \" ip value string\",\n  \"gateway\": \" gate way value  string\",\n  \"netmask\": \"netmask value string\",\n  \"primary_dns\": \"primary dns string\",\n  \"secondary_dns\": \"secondary dns string\",\n  \"lacp_enable\"  :true\n}\n</code></pre>"},{"location":"architecture/device_rest_api/rest_api/#request-class-formats","title":"Request Class Formats","text":"Parameter Format ip_address ip value string gateway gate way value string netmask netmask value string primary_dns primary dns string secondary_dns secondary dns string lacp_enable lacp status,bool type"},{"location":"architecture/device_rest_api/rest_api/#response-class-formats","title":"Response Class Formats","text":"Parameter Format message invalid_parameters or valid_parameters string"},{"location":"architecture/device_rest_api/rest_api/#response-status","title":"response status","text":"<p>status 200 for success status 400 for bad request(invalid parameters) status 500 for server issue</p>"},{"location":"architecture/device_rest_api/rest_api/#response-class-json-structure","title":"response Class JSON Structure","text":"<pre><code>{\n  \"message\": \" invalid_parameters or valid_parameters string\",\n}\n</code></pre>"},{"location":"architecture/device_rest_api/rest_api/#put-logoff-user-force-logoff-unsecure","title":"PUT Logoff User (Force Logoff Unsecure)","text":""},{"location":"architecture/device_rest_api/rest_api/#url_1","title":"URL","text":"<p>http://IP:7778/control/user</p>"},{"location":"architecture/device_rest_api/rest_api/#implementations-notes","title":"Implementations Notes","text":"<p>This node logs off the current user.</p>"},{"location":"architecture/device_rest_api/rest_api/#request-class-definition","title":"Request Class Definition","text":"Parameter Format action 32 byte char array"},{"location":"architecture/device_rest_api/rest_api/#request-class-json-structure_1","title":"Request Class JSON Structure","text":"<pre><code>{\n  \"action\": \"log_off\"\n}\n</code></pre> <p>Response</p> <p>Http status code.</p>"},{"location":"architecture/device_rest_api/rest_api/#put-logoff-user-force-logoff-secure","title":"PUT Logoff User (Force Logoff Secure)","text":""},{"location":"architecture/device_rest_api/rest_api/#url_2","title":"URL","text":"<p>https://IP:8888/control/user</p>"},{"location":"architecture/device_rest_api/rest_api/#implementations-notes_1","title":"Implementations Notes","text":"<p>This node logs off the current user.</p>"},{"location":"architecture/device_rest_api/rest_api/#request-class-definition_1","title":"Request Class Definition","text":"Parameter Format action 32 byte char array"},{"location":"architecture/device_rest_api/rest_api/#request-class-json-structure_2","title":"Request Class JSON Structure","text":"<pre><code>{\n  \"action\": \"log_off\"\n}\n</code></pre>"},{"location":"architecture/device_rest_api/rest_api/#put-reboot","title":"PUT Reboot","text":""},{"location":"architecture/device_rest_api/rest_api/#url_3","title":"URL","text":"<p>https://IP:8888/control</p>"},{"location":"architecture/device_rest_api/rest_api/#implementations-notes_2","title":"Implementations Notes","text":"<p>This node reboots the appliance.</p>"},{"location":"architecture/device_rest_api/rest_api/#request-class-definition_2","title":"Request Class Definition","text":"Parameter Format action 32 byte char array"},{"location":"architecture/device_rest_api/rest_api/#request-class-json-structure_3","title":"Request Class JSON Structure","text":"<pre><code>{\n  \"action\": \"reboot_device\"\n}\n</code></pre>"},{"location":"architecture/device_rest_api/rest_api/#put-connectionlegacy","title":"PUT Connection(Legacy)","text":""},{"location":"architecture/device_rest_api/rest_api/#url_4","title":"URL","text":"<p>http://IP:7778/corrib/control/connections</p>"},{"location":"architecture/device_rest_api/rest_api/#implementations-notes_3","title":"Implementations Notes","text":"<p>This node establishes a connection between the Receiver and the Transmitter specified. The transmitter value represents the IP address of the transmitter.</p> <p>The connection is established with the following fixed parameters:</p> <ul> <li>resolution 1920 x 1080</li> <li>Connection type set to Private</li> <li>USB redirection is disabled</li> <li>NLA disabled</li> <li>Persistent connection is disabled</li> </ul>"},{"location":"architecture/device_rest_api/rest_api/#request-class-definition_3","title":"Request Class Definition","text":"Parameter Format action log-off user 32 byte char transmitter ip addressof tx"},{"location":"architecture/device_rest_api/rest_api/#request-class-json-structure_4","title":"Request Class JSON Structure","text":"<pre><code>{\n  \"action\": \"make_connection\",\n  \"user\": \"demo\",\n  \"transmitter\": \"10.211.129.54\"\n}\n</code></pre>"},{"location":"architecture/device_rest_api/rest_api/#put-connection-secure","title":"PUT Connection Secure","text":""},{"location":"architecture/device_rest_api/rest_api/#url_5","title":"URL","text":"<p>https://IP:8888/control/connections</p>"},{"location":"architecture/device_rest_api/rest_api/#implementation-notes_1","title":"Implementation Notes","text":"<p>This node establishes a connection between the Receiver and the Transmitter specified.</p> <p>The transmitter value represents the IP address of the transmitter. The connection is established with the following fixed parameters:</p> <ul> <li>resolution 1920 x 1080</li> <li>Connection type set to Private</li> <li>USB redirection is disabled</li> <li>NLA disabled</li> <li>persistent connecyion is disabled</li> </ul>"},{"location":"architecture/device_rest_api/rest_api/#request-class-json-structure_5","title":"Request Class JSON Structure","text":"<pre><code>{\n  \"action\": \"make_connection\",\n  \"user\": \"demo\",\n  \"transmitter\": \"10.211.129.54\"\n}\n</code></pre>"},{"location":"architecture/device_rest_api/rest_api/#request-class-formats_1","title":"Request Class Formats","text":"Parameter Format action make connection user 32 byte char array transmitter 45 byte char array"},{"location":"architecture/device_rest_api/rest_api/#put-force-workspace-secure-and-unsecure","title":"PUT Force Workspace (Secure and Unsecure)","text":""},{"location":"architecture/device_rest_api/rest_api/#url_6","title":"URL","text":"<p>http://IP:7778/control/workspaces http://IP:8888/control/workspaces</p> <p>IMPLEMENTATION NOTES This node establishes a connection between the SDKVM and the Transmitters specified in the workspace. This object contains parameters used to log in a user and launch an associated connection. The user and associated connection must be configured prior calling this URL.</p>"},{"location":"architecture/device_rest_api/rest_api/#request-class-json-structure_6","title":"Request Class JSON Structure","text":"<pre><code>{\n    \"action\": \"force_workspace\",\n    \"workspace\": \"workspace-id\",\n    \"user\": \"cb-user\",\n}\n</code></pre> <p>REQUEST  CLASS  FORMATS</p> Parameter Format action force_workspace workspace 32 byte char array user 32 byte char array <p>Response</p> <p>Http status code.</p>"},{"location":"architecture/device_rest_api/rest_api/#put-force-connection","title":"PUT Force Connection","text":""},{"location":"architecture/device_rest_api/rest_api/#url_7","title":"URL","text":"<p>http://IP:7778/control/connections</p>"},{"location":"architecture/device_rest_api/rest_api/#implementation-notes_2","title":"Implementation Notes","text":"<p>This node establishes a connection between the Receiver and the Transmitter specified over HTTP. This object contains parameters used to log in a user and launch an associated connection. The user and associated connection must be configured prior calling this URL.</p>"},{"location":"architecture/device_rest_api/rest_api/#request-class-json-structure_7","title":"Request Class JSON Structure","text":"<pre><code>{\n  \"action\": \"force_connection\",\n  \"connection\": \"default-connection\",\n  \"user\": \"cb-user\"\n}\n</code></pre>"},{"location":"architecture/device_rest_api/rest_api/#request-class-formats_2","title":"Request Class Formats","text":"Parameter Format action force connection connection 32 byte char array user 32 byte char array"},{"location":"architecture/device_rest_api/rest_api/#put-force-connection-secure","title":"PUT Force Connection Secure","text":""},{"location":"architecture/device_rest_api/rest_api/#url_8","title":"URL","text":"<p>http://IP:8888/control/connections</p>"},{"location":"architecture/device_rest_api/rest_api/#implementation-notes_3","title":"Implementation Notes","text":"<p>This node establishes a connection between the Receiver and the Transmitter specified over HTTP. This object contains parameters used to log in a user and launch an associated connection. The user and associated connection must be configured prior calling this URL.</p>"},{"location":"architecture/device_rest_api/rest_api/#request-class-json-structure_8","title":"Request Class JSON Structure","text":"<pre><code>{\n    \"action\": \"force_connection\",\n    \"connection\": \"default-connection\",\n    \"user\": \"cb-user\",\n}\n</code></pre>"},{"location":"architecture/device_rest_api/rest_api/#request-class-formats_3","title":"Request Class Formats","text":"Parameter Format action force connection connection 32 byte char array user 32 byte char array"},{"location":"architecture/device_rest_api/rest_api/#put-terminate-connection-legacy","title":"PUT Terminate Connection Legacy","text":""},{"location":"architecture/device_rest_api/rest_api/#url_9","title":"URL","text":"<p>http://IP:7778/corrib/control/connections</p>"},{"location":"architecture/device_rest_api/rest_api/#implementation-notes_4","title":"Implementation Notes","text":"<p>This node terminates an existing connection over HTTP.</p>"},{"location":"architecture/device_rest_api/rest_api/#request-class-json-structure_9","title":"Request Class JSON Structure","text":"<pre><code>{\n  \"action\": \"terminate_connection\"\n}\n</code></pre>"},{"location":"architecture/device_rest_api/rest_api/#request-class-formats_4","title":"Request Class Formats","text":"Parameter Format action terminate connection"},{"location":"architecture/device_rest_api/rest_api/#put-terminate-connection-secure","title":"PUT Terminate Connection Secure","text":""},{"location":"architecture/device_rest_api/rest_api/#url_10","title":"URL","text":"<p>https://IP:8888/corrib/control/connections</p>"},{"location":"architecture/device_rest_api/rest_api/#implementation-notes_5","title":"Implementation Notes","text":"<p>This node terminates an existing connection over HTTPS.</p>"},{"location":"architecture/device_rest_api/rest_api/#request-class-json-structure_10","title":"Request Class JSON Structure","text":"<pre><code>{\n  \"action\": \"terminate_connection\"\n}\n</code></pre>"},{"location":"architecture/device_rest_api/rest_api/#request-class-formats_5","title":"Request Class Formats","text":"Parameter Format action terminate connection"},{"location":"architecture/device_rest_api/rest_api/#put-terminate-connection-no-osd","title":"PUT Terminate Connection No OSD","text":""},{"location":"architecture/device_rest_api/rest_api/#url_11","title":"URL","text":"<p>https://IP:8888/corrib/control/connections</p>"},{"location":"architecture/device_rest_api/rest_api/#implementation-notes_6","title":"Implementation Notes","text":"<p>This node terminates an existing connection over HTTPS.</p>"},{"location":"architecture/device_rest_api/rest_api/#request-class-json-structure_11","title":"Request Class JSON Structure","text":"<pre><code>{\n  \"action\": \"terminate_connection_no_osd\"\n}\n</code></pre>"},{"location":"architecture/device_rest_api/rest_api/#request-class-formats_6","title":"Request Class Formats","text":"Parameter Format action terminate connection no osd"},{"location":"architecture/device_rest_api/rest_api/#put-terminate-with-exit-code-and-reason-message","title":"PUT Terminate with Exit Code and Reason message","text":""},{"location":"architecture/device_rest_api/rest_api/#url_12","title":"URL","text":"<p>https://IP:8888/control/connections</p>"},{"location":"architecture/device_rest_api/rest_api/#implementation-notes_7","title":"Implementation Notes","text":"<p>This node terminates a bonded connection over HTTPS.</p>"},{"location":"architecture/device_rest_api/rest_api/#request-class-json-structure_12","title":"Request Class JSON Structure","text":"<pre><code>{\n  \"action\": \"connection_termination\",\n  \"exit_message\": \"Bonded connection terminated by REC-1A\",\n  \"exit_code\": 1\n}\n</code></pre>"},{"location":"architecture/device_rest_api/rest_api/#request-class-formats_7","title":"Request Class Formats","text":"Parameter Format action terminate connection exit message 512 byte char array exit code integer"},{"location":"architecture/device_rest_api/rest_api/#exit-code-options","title":"Exit code options","text":"Parameter Format 0 Non-bonded connection termination 1 Bonded connection termination"},{"location":"architecture/device_rest_api/rest_api/#put-flush","title":"PUT Flush","text":""},{"location":"architecture/device_rest_api/rest_api/#url_13","title":"URL","text":"<p>https://IP:8888/control</p>"},{"location":"architecture/device_rest_api/rest_api/#implementation-notes_8","title":"Implementation Notes","text":"<p>This node flushes JSON queues.</p> <p>The options are as follows:</p> <ul> <li>flush: Flushes all records</li> <li>flush_authentication_stats: Flushes authentication records</li> <li>flush_active_connections: Flushes active connections</li> <li>transform_active_previous: Transforms active records to previous</li> <li>reset_authentication_stats: Resets authentication statistics</li> </ul>"},{"location":"architecture/device_rest_api/rest_api/#request-class-json-structure_13","title":"Request Class JSON Structure","text":"<pre><code>{\n  \"action\": \"flush_active_connection\"\n}\n</code></pre>"},{"location":"architecture/device_rest_api/rest_api/#request-class-formats_8","title":"Request Class Formats","text":"Parameter Format action 255 byte char array"},{"location":"architecture/device_rest_api/rest_api/#put-reciever-settings","title":"PUT Reciever Settings","text":""},{"location":"architecture/device_rest_api/rest_api/#url_14","title":"URL","text":"<p>https://IP:8888/control/configuration/rx_setting</p>"},{"location":"architecture/device_rest_api/rest_api/#implementation-notes_9","title":"Implementation Notes","text":"<p>This node sets Receiver device settings.  The request class parameters are optional.</p>"},{"location":"architecture/device_rest_api/rest_api/#request-class-json-structure-for-2k4k-appliances","title":"Request Class JSON Structure for 2k/4k appliances","text":"Parameter Format power mode int 0 or 1 string \" \" http_enable int 0 or 1 rx_scaling int 0 or 1"},{"location":"architecture/device_rest_api/rest_api/#request-class-formats-for-2k4k-appliances","title":"Request Class Formats for 2k/4k appliances","text":"<pre><code>{\n       \"power_mode\": 1,\n       \"http_enable\": 1,\n       \"rx_scaling\": 1\n}\n</code></pre>"},{"location":"architecture/device_rest_api/rest_api/#request-class-json-structure-for-sdkvm","title":"Request Class JSON Structure for SDKVM","text":"Parameter Format osd_ovelay 9 bytes array osd_inactivity_timer 32 bytes array http_enable int"},{"location":"architecture/device_rest_api/rest_api/#request-class-formats-for-sdkvm","title":"Request Class Formats for SDKVM","text":""},{"location":"architecture/device_rest_api/rest_api/#default-request","title":"Default Request","text":"<pre><code>{\n  \"osd_ovelay\": \"False\",\n  \"osd_inactivity_timer\": \"\",\n  \"http_enable\": 0\n}\n</code></pre>"},{"location":"architecture/device_rest_api/rest_api/#manipulated-request","title":"manipulated Request","text":"<pre><code>{\n  \"osd_ovelay\": \"True\",\n  \"osd_inactivity_timer\": \"30\",\n  \"http_enable\": 1\n}\n</code></pre> <p>PS: Please note, power_mode is a feature supported only for CORRIB and DEEL devices and not supported anymore for Emerald devices or SDKVM.</p> <p>rx_scaling is supported for only 4K emerald devices.</p>"},{"location":"architecture/device_rest_api/rest_api/#put-transmitter-settings","title":"PUT Transmitter Settings","text":""},{"location":"architecture/device_rest_api/rest_api/#url_15","title":"URL","text":"<p>https://IP:8888/control/configuration/tx_setting</p>"},{"location":"architecture/device_rest_api/rest_api/#implementation-notes_10","title":"Implementation Notes","text":"<p>_This node sets Transmitter device settings. _</p> <p>Note that the request class differs depending on whether the transmitter is single or dual head. All applicable request class parameters must be specified.</p>"},{"location":"architecture/device_rest_api/rest_api/#request-class-json-structure-single-head-transmitter","title":"Request Class JSON Structure Single Head Transmitter","text":"<pre><code>{\n    \"video_quality\": 1,\n    \"video_source_optimisation\": 1,\n    \"mouse_keyboard_timeout\":1,\n    \"hid\": 1,\n    \"head_1_edid\": 5,\n    \"audio_source\": 1\n}\n</code></pre>"},{"location":"architecture/device_rest_api/rest_api/#request-class-json-structure-dual-head-transmitter","title":"Request Class JSON Structure Dual Head Transmitter","text":"<pre><code>{\n  \"video_quality\": 1,\n  \"hid\": 1,\n  \"mouse_keyboard_timeout\": 1,\n  \"head_1_edid\": 1,\n  \"head_2_edid\": 5,\n  \"audio_source\": 1\n}\n</code></pre>"},{"location":"architecture/device_rest_api/rest_api/#request-class-formats_9","title":"Request Class Formats","text":"Parameter Format Single Head Dual Head video quality int \u2713 \u2713 video source optimization int \u2713 \u2573 hid int \u2713 \u2713 mouse keyboard timeout int \u2713 \u2713 head 1 edid int \u2713 \u2713 head 2 edid int \u2573 \u2713 audio source int \u2713 \u2713"},{"location":"architecture/device_rest_api/rest_api/#put-edid-on-transmitter-head-1","title":"PUT EDID on Transmitter Head 1","text":""},{"location":"architecture/device_rest_api/rest_api/#url_16","title":"URL","text":"<p>https://IP:8888/control/configuration/tx_edid_table_1</p>"},{"location":"architecture/device_rest_api/rest_api/#implementation-notes_11","title":"Implementation Notes","text":"<p>This node copies the specified EDID information to a Transmitter device. This represents the EDID information previously read from the Receiver.</p>"},{"location":"architecture/device_rest_api/rest_api/#request-class-json-structure-single-head-transmitter_1","title":"Request Class JSON Structure Single Head Transmitter","text":"<pre><code>{\n  \"edid_table\": \"GUI OPTION 6 DELL_E2210HBB\\n0 ff ff ff ff ff ff 0 \\n10 ac 31 d0 d2 2 96 49 \\na 14 1 3 80 30 1b 78 \\nee ee 95 a3 54 4c 99 26 \\nf 50 54 a5 4b 0 71 4f \\n81 80 d1 c0 1 1 1 1 \\n1 1 1 1 1 1 2 3a \\n80 18 71 38 2d 40 58 2c \\n45 0 dd c 11 0 0 1e \\n0 0 0 ff 0 44 35 35 \\n33 52 30 33 39 30 59 5a \\n4c a 0 0 0 fc 0 44 \\n45 4c 4c 20 45 32 32 31 \\n30 48 42 42 0 0 0 fd \\n0 32 4c 1e 53 11 0 a \\n20 20 20 20 20 20 0 13 \\n\"\n}\n</code></pre>"},{"location":"architecture/device_rest_api/rest_api/#put-edid-on-transmitter-head-2","title":"PUT EDID on Transmitter Head 2","text":""},{"location":"architecture/device_rest_api/rest_api/#url_17","title":"URL","text":"<p>https://IP:8888/control/configuration/tx_edid_table_2</p>"},{"location":"architecture/device_rest_api/rest_api/#implementation-notes_12","title":"Implementation Notes","text":"<p>This node copies the specified EDID information to a Transmitter device. This represents the EDID information previously read from the Receiver.</p>"},{"location":"architecture/device_rest_api/rest_api/#request-class-json-structure-single-head-transmitter_2","title":"Request Class JSON Structure Single Head Transmitter","text":"<pre><code>{\n  \"edid_table\": \"GUI OPTION 6 DELL_E2210HBB\\n0 ff ff ff ff ff ff 0 \\n10 ac 31 d0 d2 2 96 49 \\na 14 1 3 80 30 1b 78 \\nee ee 95 a3 54 4c 99 26 \\nf 50 54 a5 4b 0 71 4f \\n81 80 d1 c0 1 1 1 1 \\n1 1 1 1 1 1 2 3a \\n80 18 71 38 2d 40 58 2c \\n45 0 dd c 11 0 0 1e \\n0 0 0 ff 0 44 35 35 \\n33 52 30 33 39 30 59 5a \\n4c a 0 0 0 fc 0 44 \\n45 4c 4c 20 45 32 32 31 \\n30 48 42 42 0 0 0 fd \\n0 32 4c 1e 53 11 0 a \\n20 20 20 20 20 20 0 13 \\n\"\n}\n</code></pre>"},{"location":"architecture/device_rest_api/rest_api/#request-class-formats_10","title":"Request Class Formats","text":"Parameter Format edid table 256 byte char array"},{"location":"architecture/device_rest_api/rest_api/#request-class-formats_11","title":"Request Class Formats","text":"Parameter Format edid table 265 byte char array"},{"location":"architecture/device_rest_api/rest_api/#put-zone","title":"PUT Zone","text":""},{"location":"architecture/device_rest_api/rest_api/#url_18","title":"URL","text":"<p>https://IP:8888/control/configuration/zone</p>"},{"location":"architecture/device_rest_api/rest_api/#implementation-notes_13","title":"Implementation Notes","text":"<p>This node sets the appliance zone. When this endpoint is called the zone variable written to the sqlite3 database on the appliance. This entry is used to ensure that the zone-relevant xml database is copied from Boxilla on next log-in or reboot.</p>"},{"location":"architecture/device_rest_api/rest_api/#request-class-json-structure-single-head-transmitter_3","title":"Request Class JSON Structure Single Head Transmitter","text":"<pre><code>{\n  \"zone\": \"ZONE-1A\"\n}\n</code></pre>"},{"location":"architecture/device_rest_api/rest_api/#request-class-formats_12","title":"Request Class Formats","text":"Parameter Format zone 32 byte char array"},{"location":"architecture/device_rest_api/rest_api/#put-bonded-group-name","title":"PUT Bonded Group Name","text":""},{"location":"architecture/device_rest_api/rest_api/#url_19","title":"URL","text":"<p>https://IP:8888/control/configuration/bonded_group</p>"},{"location":"architecture/device_rest_api/rest_api/#implementation-notes_14","title":"Implementation Notes","text":"<p>This node sets the bonded group name to the receiver. When this endpoint is called the bonded group name is written to the sqlite3 database on the appliance. This name is displayed on the OSD connection tab to indicate to the user what bonded group the receiver is part of. This sqlite entry is also used to determine whether or not to display bonded connections that are associated to a user. For example, if the user has a list of associated bonded connection but the bonded connection entry in the sqlite database is an empty string then the OSD will not list the bonded connection.</p>"},{"location":"architecture/device_rest_api/rest_api/#request-class-json-structure-single-head-transmitter_4","title":"Request Class JSON Structure Single Head Transmitter","text":"<pre><code>{\n  \"bonded_group\": \"bonded-group-1A\"\n}\n</code></pre>"},{"location":"architecture/device_rest_api/rest_api/#request-class-formats_13","title":"Request Class Formats","text":"Parameter Format bonded group 32 byte char array"},{"location":"architecture/device_rest_api/rest_api/#put-debug-log-level","title":"PUT Debug Log Level","text":""},{"location":"architecture/device_rest_api/rest_api/#url_20","title":"URL","text":"<p>https://IP:8888/control/diags/loglevel/?level=7</p>"},{"location":"architecture/device_rest_api/rest_api/#implementation-notes_15","title":"Implementation Notes","text":"<p>This node sets the value of loglevel to the one specified in the URL</p>"},{"location":"architecture/device_rest_api/rest_api/#request-class-formats_14","title":"Request Class Formats","text":"<p>This log level is specified in the URL as shown above. Log level must be an integer on following interval [0,7]. Setting the loglevel during an active connection will cause any active connections to terminate.</p>"},{"location":"architecture/device_rest_api/rest_api/#put-user-login-force-login-unsecure","title":"PUT User Login (Force Login Unsecure)","text":""},{"location":"architecture/device_rest_api/rest_api/#url_21","title":"URL","text":"<p>http://IP:7778/user/login</p>"},{"location":"architecture/device_rest_api/rest_api/#implementation-notes_16","title":"Implementation Notes","text":"<p>Logs a user in to Rx OSD</p>"},{"location":"architecture/device_rest_api/rest_api/#request-class-json-structure_14","title":"Request Class JSON Structure","text":"<pre><code>{\n            \"user\": \"kvm_user\",\n            \"force\": 1,\n            \"ad\": 1,\n            \"md5sum\": \"a7d794f4a687efd2094c589714e310e3\"\n}\n</code></pre>"},{"location":"architecture/device_rest_api/rest_api/#request-class-formats_15","title":"Request Class Formats","text":"Parameter Format user 32 byte char array max force 1/0 ad 1/0 md5sum 32 byte char array"},{"location":"architecture/device_rest_api/rest_api/#response","title":"Response","text":"<p>Http status code.</p>"},{"location":"architecture/device_rest_api/rest_api/#put-user-login-force-login-secure","title":"PUT User Login (Force Login Secure)","text":""},{"location":"architecture/device_rest_api/rest_api/#url_22","title":"URL","text":"<p>https://IP:8888/user/login</p>"},{"location":"architecture/device_rest_api/rest_api/#implementation-notes_17","title":"Implementation Notes","text":"<p>Logs a user in to Rx OSD</p>"},{"location":"architecture/device_rest_api/rest_api/#request-class-json-structure_15","title":"Request Class JSON Structure","text":"<pre><code>{\n            \"user\": \"kvm_user\",\n            \"force\": 1,\n            \"ad\": 1,\n            \"md5sum\": \"a7d794f4a687efd2094c589714e310e3\"\n}\n</code></pre>"},{"location":"architecture/device_rest_api/rest_api/#request-class-formats_16","title":"Request Class Formats","text":"Parameter Format user 32 byte char array max force 1/0 ad 1/0 md5sum 32 byte char array <ul> <li>Notes on value \"user\":<ul> <li>Force login will not work for username \"Boxilla\"</li> <li>For force login the user should be an existing user in boxilla and be present in the in sdkvm users database\"</li> </ul> </li> <li>Notes on \"force\" value:<ul> <li>1, This will ill work irrrepective of login status.</li> <li>0, The user must be logeed-in along with a connection in an active state. </li> </ul> </li> <li>Notes on \"ad\" field     ad = 0 for static user     ad = 1 for an active directory user (currently SDKVM does not support ad users)</li> <li>Notes on md5sum<ul> <li>If the checksums mismatch for database.json file then the webservice will update the database.</li> </ul> </li> </ul>"},{"location":"architecture/device_rest_api/rest_api/#response_1","title":"Response","text":"<p>Http status code.</p>"},{"location":"architecture/device_rest_api/rest_api/#put-led-flash","title":"PUT LED Flash","text":""},{"location":"architecture/device_rest_api/rest_api/#url_23","title":"URL","text":"<p>https://IP:8888/control/led</p>"},{"location":"architecture/device_rest_api/rest_api/#implementation-notes_18","title":"Implementation Notes","text":"<p>Enables or disables the power led flashing. Boxilla manager will send request to start or stop the power led flashing and based on the request, the appliance would enable or disable the flashing of the power led at its end.</p> <p>Note: This is not supported on the SDKVM</p>"},{"location":"architecture/device_rest_api/rest_api/#request-json-structure","title":"Request JSON structure","text":"<pre><code>{\n     \"action\": \"led_enable\"\n}\n{\n     \"action\": \"led_disable\"\n}\n</code></pre>"},{"location":"architecture/device_rest_api/rest_api/#response_2","title":"Response","text":"<p>Http status code.</p>"},{"location":"architecture/device_rest_api/rest_api/#put-unmanage-the-device","title":"PUT UnManage the device","text":""},{"location":"architecture/device_rest_api/rest_api/#url_24","title":"URL","text":"<p>https://IP:8888/control/unmanage</p>"},{"location":"architecture/device_rest_api/rest_api/#implementation-notes_19","title":"Implementation Notes","text":"<p>This node unmanage the device the over HTTPS.</p>"},{"location":"architecture/device_rest_api/rest_api/#request-class-json-structure_16","title":"Request Class JSON Structure","text":"<pre><code>{\n  \"action\": \"unmanage_device\"\n}\n</code></pre>"},{"location":"architecture/device_rest_api/rest_api/#request-class-formats_17","title":"Request Class Formats","text":"Parameter Format action unmanage device"},{"location":"architecture/device_rest_api/rest_api/#put-network-settings_1","title":"PUT Network Settings","text":""},{"location":"architecture/device_rest_api/rest_api/#url_25","title":"URL","text":"<p>https://IP:8888/control/configure/network</p>"},{"location":"architecture/device_rest_api/rest_api/#implementation-notes_20","title":"Implementation Notes","text":"<p>This node allows configuration of network settings on the SDKVM over HTTPS.</p>"},{"location":"architecture/device_rest_api/rest_api/#request-class-json-structure_17","title":"Request Class JSON Structure","text":"<pre><code>{\n  \"ip_address\": \" ip value string\",\n  \"gateway\": \" gate way value  string\",\n  \"netmask\": \"netmask value string\",\n  \"primary_dns\": \"primary dns string\",\n  \"secondary_dns\": \"secondary dns string\",\n  \"lacp_enable\"  :true\n}\n</code></pre>"},{"location":"architecture/device_rest_api/rest_api/#request-class-formats_18","title":"Request Class Formats","text":"Parameter Format ip_address ip value string gateway gate way value string netmask netmask value string primary_dns primary dns string secondary_dns secondary dns string lacp_enable lacp status,bool type"},{"location":"architecture/device_rest_api/rest_api/#response-class-formats_1","title":"Response Class Formats","text":"Parameter Format message invalid_parameters or valid_parameters string"},{"location":"architecture/device_rest_api/rest_api/#response-status_1","title":"response status","text":"<p>status 200 for success status 400 for bad request(invalid parameters) status 500 for server issue</p>"},{"location":"architecture/device_rest_api/rest_api/#response-class-json-structure_1","title":"response Class JSON Structure","text":"<pre><code>{\n  \"message\": \" invalid_parameters or valid_parameters string\",\n}\n</code></pre>"},{"location":"architecture/device_rest_api/rest_api/#put-upgrade-start","title":"PUT Upgrade Start","text":""},{"location":"architecture/device_rest_api/rest_api/#url_26","title":"URL","text":"<p>https://IP:8888/control/upgrade/start</p>"},{"location":"architecture/device_rest_api/rest_api/#implementation-notes_21","title":"Implementation Notes","text":"<p>This node allows an upgrade to start on the SDKVM over HTTPS.</p>"},{"location":"architecture/device_rest_api/rest_api/#request-class-json-structure_18","title":"Request Class JSON Structure","text":"Paramter Format action start_upgrade image_path file name along with path to be upgreaded on target, 256 bytes array"},{"location":"architecture/device_rest_api/rest_api/#request-class-definition_4","title":"Request Class Definition","text":"<pre><code>{\n  \"action\": \"start_upgrade\",\n  \"image_path\": \"/home/snuc/SDKVM/upgrade/image_file_name\",\n}\n</code></pre>"},{"location":"architecture/device_rest_api/rest_api/#put-remove-upgrade-image-files","title":"PUT Remove upgrade image files","text":""},{"location":"architecture/device_rest_api/rest_api/#url_27","title":"URL","text":"<p>https://IP:8888/control/upgrade/remove</p>"},{"location":"architecture/device_rest_api/rest_api/#implementation-notes_22","title":"Implementation Notes","text":"<p>This node allows removal of upgrade image files on the SDKVM over HTTPS.</p> <p>It will remove all the files from upgrade folder /home/snuc/SDKVM/upgrade/*</p> <p>It invokes the command:</p> <pre><code>(\"rm -rf /home/snuc/SDKVM/upgrade/*\")\n</code></pre>"},{"location":"architecture/device_rest_api/rest_api/#request-class-json-structure_19","title":"Request Class JSON Structure","text":"Paramter Format action remove_image_files"},{"location":"architecture/device_rest_api/rest_api/#request-class-definition_5","title":"Request Class Definition","text":"<pre><code>{\n  \"action\": \"remove_image_files\"\n}\n</code></pre>"},{"location":"architecture/device_rest_api/rest_api/#put-receiver-timer-configurations","title":"PUT Receiver Timer Configurations","text":""},{"location":"architecture/device_rest_api/rest_api/#url_28","title":"URL","text":"<p>https://IP:8888/control/configuration/timers_configuration</p>"},{"location":"architecture/device_rest_api/rest_api/#implementation-notes_23","title":"Implementation Notes","text":"<p>This node sets the appliance timers configuration, Local OSD Inactivity timer value and Local Connection Inactivity timer value.</p>"},{"location":"architecture/device_rest_api/rest_api/#request-class-json-structure_20","title":"Request Class JSON Structure","text":"<pre><code>{\n  \"timers_config\": \"global\",\n  \"local_osd_inactivity\": 0,\n  \"local_connection_inactivity\": 0\n}\n</code></pre>"},{"location":"architecture/device_rest_api/rest_api/#request-class-formats_19","title":"Request Class Formats","text":"Parameter Format timers_config 32 byte char array local_osd_inactivity int 0 or 2-60 local_connection_inactivity int 0 or 2-60"},{"location":"architecture/device_rest_api/rest_api/#rest-api-post-commands","title":"REST API POST Commands","text":"<p>The following URLs are accessed using the POST verb. This section specifies the URLs along with the request JSON object.</p> URL Verb 1.0.16 1.0.15 1.0.11 1.0.10 1.0.9 1.0.8 1.0.7 1.0.6 1.0.5 1.0.4 /control/diags/run POST \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2573 /control/diags/sync POST \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2573 /control/upload POST \u2713 \u2713 \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 /control/largefileupload POST \u2713 \u2713 \u2573 \u2573 \u2573 #10003 \u2573 \u2573 \u2573 \u2573"},{"location":"architecture/device_rest_api/rest_api/#post-run-appliance-diagnostics","title":"POST Run Appliance Diagnostics","text":""},{"location":"architecture/device_rest_api/rest_api/#url_29","title":"URL","text":"<p>https://IP:8888/control/diags/run/?mgr_ip=MGR_IP</p>"},{"location":"architecture/device_rest_api/rest_api/#implementation-notes_24","title":"Implementation Notes","text":"<p>Calls the appliance diagnostics script and scp\u2019s the resultant diagnostics files in .tar form to the manager IP specified.</p>"},{"location":"architecture/device_rest_api/rest_api/#request-class-definition_6","title":"Request Class Definition","text":"<p>n/a</p>"},{"location":"architecture/device_rest_api/rest_api/#response-class-definition-for-emerald-2k-and-4k","title":"Response Class Definition for emerald 2k and 4k","text":"<p>HTTP code 200 or 500.</p>"},{"location":"architecture/device_rest_api/rest_api/#response-class-definition-for-sdkvm","title":"Response Class Definition for SDKVM","text":"<p>HTTP code 200 response: file with attachment \"DeskvuewDiagnostics.log\"</p> <p>HTTP code 404 response: empty or null file with attachment \"emptyfile\" or \"nofile\"</p> <p>HTTP code 400 response: interms of bad url or failed to execute diag on sdkvm</p>"},{"location":"architecture/device_rest_api/rest_api/#post-file-upload","title":"POST File Upload","text":""},{"location":"architecture/device_rest_api/rest_api/#url_30","title":"URL","text":"<p>https://IP:8888/control/upload</p>"},{"location":"architecture/device_rest_api/rest_api/#implementation-notes_25","title":"Implementation Notes","text":"<p>*Calls the file upload functionality. enctype=\"multipart/form-data\"</p> <p>The caller should specify the following parameters in the body of the post:</p> <p>key for json is json_data</p> <p><pre><code>{\n  \"filename\": \"The name of the file to upload, 52 bytes char\",\n  \"filepath\": \"the path where the file should be uploaded,256 bytes char\",\n  \"checksum\": \"an MD5SUM checksum for the file that will be uploaded, 33 bytes char\"\n}\n</code></pre> key for file is file_parameter and data is content of the file</p> <pre><code>Request Headers\nAccept: application/json\nAuthorization: Basic cmVzdF91c2VyOjE4XzIyXzMzX0FB\nUser-Agent: PostmanRuntime/7.30.0\nPostman-Token: e8e2062f-6387-4420-9f58-7cfe8056c074\nHost: 10.231.134.3:7778\nAccept-Encoding: gzip, deflate, br\nConnection: keep-alive\nRequest Body\njson_data: \"{ \"filename\": \"test.txt\", \"filepath\": \"/home/developer/\", \"checksum\": \"12345678\"} \"\n`file_parameter` How do we specify this?\n</code></pre> <p>An example of the endpoint being called using postman is shown below:</p> <p> POST File Upload method prefer to upload file up to 10MB size on sdkvm.(logically there is no limitation on file size)</p>"},{"location":"architecture/device_rest_api/rest_api/#request-class-definition_7","title":"Request Class Definition","text":"<p>n/a</p>"},{"location":"architecture/device_rest_api/rest_api/#response-class-definition","title":"Response Class Definition","text":"<p>HTTP code 200 or 500.</p>"},{"location":"architecture/device_rest_api/rest_api/#post-insert-synchronisation-point","title":"POST Insert Synchronisation Point","text":""},{"location":"architecture/device_rest_api/rest_api/#url_31","title":"URL","text":"<p>https://IP:8888/control/diags/sync/?bb_timestamp=2019-12-19 06:25:00</p>"},{"location":"architecture/device_rest_api/rest_api/#implementation-notes_26","title":"Implementation Notes","text":"<p>Inserts a Boxilla synchronisation point to syslog as follows:</p> <p>Jan 1 01:56:23 TX_008C101EDF04 user.info webservice: SESSION:12345678</p> <p>[SYNCHRONISATION_POINT 2019-12-19 06:25:00 6983524]</p>"},{"location":"architecture/device_rest_api/rest_api/#request-class-definition_8","title":"Request Class Definition","text":"<p>n/a</p>"},{"location":"architecture/device_rest_api/rest_api/#response-class-definition_1","title":"Response Class Definition","text":"<p>HTTP code 200 or 500.</p>"},{"location":"architecture/device_rest_api/rest_api/#post-largefile-upload","title":"POST LargeFile Upload","text":""},{"location":"architecture/device_rest_api/rest_api/#url_32","title":"URL","text":"<p>https://IP:8888/control/largefileupload</p>"},{"location":"architecture/device_rest_api/rest_api/#implementation-notes_27","title":"Implementation Notes","text":"<p>*Calls the file upload functionality. enctype=\"multipart/form-data\"</p> <p>The caller should specify the following parameters in the body of the post:</p> <p>key for json is json_data</p> <pre><code>{\n  \"filepath\": \"the path  and file where the file should be uploaded to ex: /home/snuc/image.zip\",\n  \"chunkcount\": \" it's an integer value and chunkcount starts from 0 and should increase by one for every chunk success transfer\",\n  \"checksum\": \"an MD5SUM checksum for the file that will be uploaded, 33 bytes char\",\n  \"eof\": \" it's bool type false/true\"\n}\n</code></pre> <p>key for chunk of file is file_parameter</p> <pre><code>Testing procedure:\n    We have to send file chunk by chunk until the end of the file along with\n    json data as follows filepath is \"/home/snuc/RX_IMAGE.zip\" (example),\n    checksum value, eof is false, chunkcount starts from 0 and should\n    increase by one for every chunk success transfer.\n\n    Once the file transfer is done, send eof as \"true\" in json data.\n\n    Chunk size is user optional: I have tested with 5MB chunk size and file size 1GB.\n\nRequest Body\njson_data: \"{\"filepath\":\"/home/snuc/SDKVM/upgrade/image.zip, \"chunkcount\": integer value, \"checksum\": \"md5sum\",  \"eof\": false/true} \"\nfile_parameter: chunk payload of file\n\nNote: for image upgrade files upload, file path would be /home/snuc/SDKVM/upgrade/\n\n- For testing purpose, we have tested with 5MB chunk with file size 1GB. As per the \nboxilla request, Currently it supports retries mechanism on chunk upload failures \nfrom deskvue \n-see https://github.com/blackbox-common-apps/Open_Source_SDKVM_LIB/blob/1.2.0/ulfius/examples/upload_file.c\n</code></pre>"},{"location":"architecture/device_rest_api/rest_api/#response-class-definition_2","title":"Response Class Definition","text":"<p>HTTP code 200(string_body file uploaded) or 400 (string_body with corresponding error).</p>"},{"location":"architecture/device_rest_api/rest_api/#delete-endpoints","title":"Delete Endpoints","text":"<p>The following table specifies endpoints accessed using the DELETE verb.</p> URL Verb 1.0.4 1.0.5 1.0.6 1.0.7 1.0.8 1.0.9 1.0.10 1.0.10 1.0.15 1.0.16 /control/configuration/zone DELETE \u2573 \u2573 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713"},{"location":"architecture/device_rest_api/rest_api/#delete-zone","title":"Delete Zone","text":""},{"location":"architecture/device_rest_api/rest_api/#url_33","title":"URL","text":"<p>https://IP:8888/control/configuration/zone</p>"},{"location":"architecture/device_rest_api/rest_api/#implementation-notes_28","title":"Implementation Notes","text":"<p>This node removes the appliance zone.</p>"},{"location":"architecture/device_rest_api/rest_api/#request-class-json-structure-single-head-transmitter_5","title":"Request Class JSON Structure Single Head Transmitter","text":"<p>n/a</p>"},{"location":"architecture/device_rest_api/rest_api/#request-class-formats_20","title":"Request Class Formats","text":"<p>n/a</p> <ul> <li>Next Document in Series-&gt; Configuration Codes</li> </ul>"},{"location":"architecture/device_rest_api/rest_api/#get-endpoints","title":"Get Endpoints","text":"<p>This section describes supported URLs that are accessed using the GET verb. The URLs are specified using an abbreviation for the IP address, whereby IP represents an IPv4 address with the format: x.x.x.x where x stands for an octet on the interval: [0,255]. Request and response classes are formatted as JSON objects. Certain request and response class parameters are formatted as numeric codes which are defined in the section delete endpoints below. </p> <p>The following table lists supported URLs accessed using the GET verb. Each of these is accessed via https on port 8888. The section Configuration Codes provides a hardware-URL support matrix which defines what URLs are supported on the various hardware types.</p> URL Verb 1.0.16 1.0.15 1.0.11 1.0.10 1.0.9 1.0.8 1.0.7 1.0.6 1.0.5 1.0.4 /alerts GET \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /capabilities GET \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2573 /control/configuration/rx_settings GET \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /control/configuration/tx_settings GET \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /control/configuration/tx_clone_name* GET \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 \u2713 \u2713 /control/configuration/rx_edid_table_1* GET \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 \u2713 \u2713 /control/configuration/rx_edid_table_2* GET \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 \u2713 \u2713 /control/configuration/zone GET \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2573 \u2573 /control/configuration/bonded_group GET \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2573 \u2573 \u2573 /control/configuration/timers_configuration GET \u2713 \u2713 \u2713 \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 /control/diags GET \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2573 /control/diags/files GET \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2573 /control/diags/loglevel GET \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2573 /control/diags/debugmode GET \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2573 /control/user GET \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /control/process? GET \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /control/safemode GET \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /control/led GET \u2713 \u2713 \u2713 \u2713 \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 /statistics/facts/system_facts GET \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /statistics/facts/video_facts GET \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /statistics/facts/analog_audio_facts GET \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /statistics/facts/usb_facts GET \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /statistics/facts/network/physical GET \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2573 \u2573 \u2573 \u2573 /statistics/facts/network/toe_connections GET \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2573 \u2573 \u2573 \u2573 statistics/previous_connections GET \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /statistics/active_connections GET \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /statistics/connection_control GET \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /version GET \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 \u2713 /control/configure/network GET \u2713 \u2713 \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 /control/upgrade/diskspace GET \u2713 \u2713 \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 /control/upgrade/progress/status GET \u2713 \u2713 \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 \u2573 /statistics/facts/network/eth_connections \u2713 \u2573 \u2573 \u2573 \u2573 \u2713 \u2573 \u2573 \u2573 \u2573 \u2573 /users/workspaces/list \u2713 \u2573 \u2573 \u2573 \u2573 \u2713 \u2573 \u2573 \u2573 \u2573 \u2573 /workspace/status \u2713 \u2573 \u2573 \u2573 \u2573 \u2713 \u2573 \u2573 \u2573 \u2573 \u2573"},{"location":"architecture/device_rest_api/rest_api/#get-version-info","title":"GET Version Info","text":""},{"location":"architecture/device_rest_api/rest_api/#url_34","title":"URL","text":"<p>https://IP:8888/version</p>"},{"location":"architecture/device_rest_api/rest_api/#implementation-notes_29","title":"Implementation Notes","text":"<p>This node provides system level version information.</p>"},{"location":"architecture/device_rest_api/rest_api/#appliance-response-class-definition","title":"Appliance Response Class Definition","text":"Parameter Format api_version 16 byte char array software_version 255 byte char array manufacturing_partnumber 255 byte char array serial_number 255 byte char array product_type 255 byte char array product_brand 255 byte char array product_configuration 255 byte char array ethernet_speed int"},{"location":"architecture/device_rest_api/rest_api/#sdkvm-response-class-definition","title":"SDKVM Response Class Definition","text":"Parameter Format api_version 16 byte char array software_version 255 byte char array manufacturing_partnumber 255 byte char array serial_number 255 byte char array product_type 255 byte char array product_brand 255 byte char array product_configuration 255 byte char array ethernet_speed int system_architecture 255 byte char array kernel_version 255 byte char array pc_model 255 byte char array sw_compatability 255 byte char array discovery_status 255 byte char array manager_mac 255 byte char array"},{"location":"architecture/device_rest_api/rest_api/#appliance-response-class-json-structure","title":"Appliance Response Class JSON Structure","text":"<pre><code>kvm_get_version_info : [\nAPI version : 1.0.4\n\nSoftware version : V1.4.0_r6244\n\nManufacturing Partnumber : 300-041-001\n\nSerial Number : SEBB18B00615\n\nProduct_type : transmitter\n\nProduct_Brand : Black Box\n\nProduct Configuration : Single Head\n\nEthernet Speed : 10000\n]\n</code></pre>"},{"location":"architecture/device_rest_api/rest_api/#sdkvm-response-class-json-structure","title":"SDKVM Response Class JSON Structure","text":"<pre><code>{\n  \"api_version\": \"1.0.4\",\n\n  \"Software_version\": \"V1.4.0_r6244\",\n\n  \"Manufacturing_Partnumber\": \"300-041-001\",\n\n  \"Serial_Number\": \"SEBB18B00615\",\n\n  \"Product_type\": \"sdkvm\",\n\n  \"Product_Brand\": \"Black Box\",\n\n  \"Product Configuration\": \"Multi_Head\",\n\n  \"Ethernet Speed\": 10000,\n\n  \"system_architecture\": \"x86_64\",\n\n  \"kernel_version\": \"5.15.0-56-generic\",\n\n  \"pc_model\": \"developer-virtual-machine\",\n\n  \"sw_compatability\": \"0x0f\",\n\n  \"discovery_status\": \"Managed\",\n\n  \"manager_mac\": \"00:50:56:8d:57:44\"\n}\n</code></pre>"},{"location":"architecture/device_rest_api/rest_api/#get-system-facts","title":"GET System Facts","text":""},{"location":"architecture/device_rest_api/rest_api/#url_35","title":"URL","text":"<p>https://IP:8888/statistics/facts/system_facts</p>"},{"location":"architecture/device_rest_api/rest_api/#implementation-notes_30","title":"Implementation Notes","text":"<p>This node provides system level facts.</p>"},{"location":"architecture/device_rest_api/rest_api/#response-class-definition_3","title":"Response Class Definition","text":"Parameter Format id Int mac 50 char byte array total memory int ( in KB) free memory int ( in KB) total disk int ( in MB) free disk int ( in MB) up time int load_avg_1min double load_avg_5min double load_avg_15min double capture_time int crcs int temperature int user response int timestamp int"},{"location":"architecture/device_rest_api/rest_api/#response-class-json-structure_2","title":"Response Class JSON Structure","text":"<pre><code>kvm_system_facts: [\n\n    id : 16\n\n    mad : 1c:37:bf:00:11:91\n\n    total memory : 244108 KB \n\n    free memory : 3123716 KB\n\n    total disk : 1645.0 MB\n\n    free disk : 1631.0 MB\n\n    uptime : 62486\n\n    load_avg_1min : 0.080000000000000002\n\n    load_avg_5min : 0.029999999999999999\n\n    load_avg_15min : 0.01\n\n    capture_time : 0.0\n\n    crcs : 0.0\n\n    temperature : 0\n\n    user_response : 510.0\n\n    timestamp : 127278148\n]\n</code></pre>"},{"location":"architecture/device_rest_api/rest_api/#get-network-settings","title":"GET network Settings","text":""},{"location":"architecture/device_rest_api/rest_api/#url_36","title":"URL","text":"<p>https://IP:8888/control/configure/network</p>"},{"location":"architecture/device_rest_api/rest_api/#implementation-notes_31","title":"Implementation Notes","text":"<p>This node provides network settings on sdkvm</p>"},{"location":"architecture/device_rest_api/rest_api/#response-class-definition_4","title":"Response Class Definition","text":"Paramter Format ip_address ip value string gateway gate way value string netmask netmask value string primary_dns primary dns string secondary_dns secondary dns string mac_address device mac address broadcast_address broadcast address lacp_enable lacp status,bool type"},{"location":"architecture/device_rest_api/rest_api/#response-class-json-structure_3","title":"Response Class JSON Structure","text":"<pre><code>{\n  \"ip_address\": \" ip value string\",\n  \"gateway\": \" gate way value  string\",\n  \"netmask\": \"netmask value string\",\n  \"primary_dns\": \"primary dns string\",\n  \"secondary_dns\": \"secondary dns string\",\n  \"mac_address\": \"mac address\",\n  \"broadcast_address\": \"broadcast address\",\n  \"lacp_enable\" : false\n}\n</code></pre>"},{"location":"architecture/device_rest_api/rest_api/#get-disk-space-to-start-upgrade","title":"GET disk space to start upgrade","text":""},{"location":"architecture/device_rest_api/rest_api/#url_37","title":"URL","text":"<p>https://IP:8888/control/upgrade/diskspace</p>"},{"location":"architecture/device_rest_api/rest_api/#implementation-notes_32","title":"Implementation Notes","text":"<p>This node provides upgrade disk space status check on sdkvm</p>"},{"location":"architecture/device_rest_api/rest_api/#request-class-json-structure_21","title":"Request Class JSON Structure","text":"Paramter Format action disk_space_check"},{"location":"architecture/device_rest_api/rest_api/#request-class-definition_9","title":"Request Class Definition","text":"<pre><code>{\n  \"action\": \"disk_space_check\"\n}\n</code></pre>"},{"location":"architecture/device_rest_api/rest_api/#response-class-definition_5","title":"Response Class Definition","text":"Paramter Format free_disk_space disk real value in MegaBytes"},{"location":"architecture/device_rest_api/rest_api/#response-class-json-structure_4","title":"Response Class JSON Structure","text":"<pre><code>{\n    \"free_disk_space\": double value\n}\n</code></pre>"},{"location":"architecture/device_rest_api/rest_api/#get-upgrade-status","title":"GET upgrade status","text":""},{"location":"architecture/device_rest_api/rest_api/#url_38","title":"URL","text":"<p>https://IP:8888/control/upgrade/progress/status</p>"},{"location":"architecture/device_rest_api/rest_api/#implementation-notes_33","title":"Implementation Notes","text":"<p>This node provides upgrade status on the sdkvm</p>"},{"location":"architecture/device_rest_api/rest_api/#request-class-json-structure_22","title":"Request Class JSON Structure","text":"Paramter Format action upgrade_status_check"},{"location":"architecture/device_rest_api/rest_api/#request-class-definition_10","title":"Request Class Definition","text":"<pre><code>{\n  \"action\": \"upgrade_status_check\"\n}\n</code></pre>"},{"location":"architecture/device_rest_api/rest_api/#response-class-definition_6","title":"Response Class Definition","text":"Paramter Format upgrade_progress integer value in terms for percentage exit_code integer value which indicates reason of failure or success"},{"location":"architecture/device_rest_api/rest_api/#response-class-json-structure_5","title":"Response Class JSON Structure","text":"<pre><code>{\n  \"upgrade_progress\": 100,\n  \"exit_code\": 0\n}\n</code></pre>"},{"location":"architecture/device_rest_api/rest_api/#get-video-facts","title":"GET Video Facts","text":""},{"location":"architecture/device_rest_api/rest_api/#url_39","title":"URL","text":"<p>https://IP:8888/statistics/facts/video_facts</p>"},{"location":"architecture/device_rest_api/rest_api/#implementation-notes_34","title":"Implementation Notes","text":"<p>This node provides video facts.</p>"},{"location":"architecture/device_rest_api/rest_api/#response-class-definition_7","title":"Response Class Definition","text":"Parameter Format id int head int mac 50 byte cchar array min_tiles_per_frame int max_tiles_per_frame int avg_tiles_per_frame int frames_per_second int min_frames_per_second int max_frames_per_second int min_tile_size int max_tile_size int min_video_bw int max_video_bw int avg_video_bw double video_bw double min_rtt double max_rtt double avg_rtt double rtt double user_response double resolution 255 byte char array dropped_frames double"},{"location":"architecture/device_rest_api/rest_api/#response-class-json-structure_6","title":"Response Class JSON Structure","text":"<pre><code>KVM_Video_Facts: [{\n\nid : 73\nhead : 1\nmac : 00:8c:10:1e:d3:ce\nmin_tiles_per_frame: 0\nmax_tiles_per_frame: 0\navg_tiles_per_frame: 0\nframes_per_secoond : 59\nmin_frames_per_second : 0\nmax_frames_per_second : 59\nmin_tile_size : 0\nmax_tile_size : 0\navg_tile_size : 0\nmin_video_bw : 0\nmax_video_bw : 3256\navg_video_bw : 3256.0\nvideo_bw : 3256.0\nmin_rtt : 0.0\nmax_rtt : 3.2560000419616699\navg_rtt : 3.2560000419616699\nrtt : 3.2560000419616699\nuser_response : 11.25600004196167\nresolution : 1920 x 1200\ndropped_frames : 0.0\ntimestamp : 68938164\n}\n\n{\nid : 67\nhead : 1\nmac : 00:8c:10:1e:d3:ce\nmin_tiles_per_frame: 0\nmax_tiles_per_frame: 0\navg_tiles_per_frame: 0\nframes_per_secoond : 0\nmin_frames_per_second : 0\nmax_frames_per_second : 0\nmin_tile_size : 0\nmax_tile_size : 0\navg_tile_size : 0\nmin_video_bw : 0\nmax_video_bw : 0\navg_video_bw : 0.0\nvideo_bw : 0.0\nmin_rtt : 0.0\nmax_rtt : 0.0\nuser_response : 0.0\nresolution : 1920 x 1200\ndropped_frames : 0.0\ntimestamp : 68871727\n}]\n</code></pre>"},{"location":"architecture/device_rest_api/rest_api/#response-class-json-structure-for-sdkvm","title":"Response Class JSON Structure for SDKVM","text":"<pre><code>KVM_Video_Facts: [{\n\nid : 73\nhead : 0\nmac : 00:8c:10:1e:d3:ce\nmin_tiles_per_frame: 0\nmax_tiles_per_frame: 0\navg_tiles_per_frame: 0\nframes_per_secoond : 59\nmin_frames_per_second : 59\nmax_frames_per_second : 59\nmin_tile_size : 0\nmax_tile_size : 0\navg_tile_size : 0\nmin_video_bw :3256\nmax_video_bw : 3256\navg_video_bw : 3256.0\nvideo_bw : 3256.0\nmin_rtt : 0.0\nmax_rtt : 0\navg_rtt : 0\nrtt : 0\nuser_response : 0\nresolution :0\ndropped_frames : 0.0\ntimestamp : 68938164\n}\n\n{\nid : 67\nhead : 0\nmac : 00:8c:10:1e:d3:ce\nmin_tiles_per_frame: 0\nmax_tiles_per_frame: 0\navg_tiles_per_frame: 0\nframes_per_secoond : 0\nmin_frames_per_second : 0\nmax_frames_per_second : 0\nmin_tile_size : 0\nmax_tile_size : 0\navg_tile_size : 0\nmin_video_bw : 0\nmax_video_bw : 0\navg_video_bw : 0.0\nvideo_bw : 0.0\nmin_rtt : 0.0\nmax_rtt : 0.0\nuser_response : 0.0\nresolution : 0\ndropped_frames : 0.0\ntimestamp : 68871727\n}]\n</code></pre>"},{"location":"architecture/device_rest_api/rest_api/#get-audio-facts","title":"GET Audio Facts","text":""},{"location":"architecture/device_rest_api/rest_api/#url_40","title":"URL","text":"<p>https://IP:8888/statistics/facts/audio_facts</p>"},{"location":"architecture/device_rest_api/rest_api/#implementation-notes_35","title":"Implementation Notes","text":"<p>This node provides audio facts.</p>"},{"location":"architecture/device_rest_api/rest_api/#response-class-definition_8","title":"Response Class Definition","text":"Parameter Format id int mac 50 byte char array min_audio_bw double max_audio_bw double avg_audio_bw double audio_bw double timestamp int"},{"location":"architecture/device_rest_api/rest_api/#response-class-json-structure_7","title":"Response Class JSON Structure","text":"<pre><code>KVM_Audio_Facts: [\n\nid : 1495\n\nmac : 00:8c:10:1e:d3:ce\n\nmin_audio_bw : 0.0\n\nmax_audio_bw : 72.0\n\navg_audio_bw : 72.0\n\naudio_bw : 72.0\n\ntimestamp : 137289260\n]\n</code></pre>"},{"location":"architecture/device_rest_api/rest_api/#get-usb-audio-facts","title":"GET USB Audio Facts","text":""},{"location":"architecture/device_rest_api/rest_api/#url_41","title":"URL","text":"<p>https://IP:8888/statistics/facts/usb_audio_facts</p>"},{"location":"architecture/device_rest_api/rest_api/#implementation-notes_36","title":"Implementation Notes","text":"<p>This node provides usb audio facts.</p>"},{"location":"architecture/device_rest_api/rest_api/#response-class-definition_9","title":"Response Class Definition","text":"Parameter Format id int mac 50 byte char array min_audio_bw double max_audio_bw double avg_audio_bw double audio_bw double timestamp int"},{"location":"architecture/device_rest_api/rest_api/#response-class-json-structure_8","title":"Response Class JSON Structure","text":"<pre><code>KVM_analog_audio_facts: [\n\nid : 1495\n\nmac : 00:8c:10:1e:d3:ce\n\nmin_audio_bw : 0.0\n\nmax_audio_bw : 72.0\n\navg_audio_bw : 72.0\n\naudio_bw : 72.0\n\ntimestamp : 137289260\n]\n</code></pre>"},{"location":"architecture/device_rest_api/rest_api/#get-analog-audio-facts","title":"GET Analog Audio Facts","text":""},{"location":"architecture/device_rest_api/rest_api/#url_42","title":"URL","text":"<p>https://IP:8888/statistics/facts/analog_audio_facts</p>"},{"location":"architecture/device_rest_api/rest_api/#implementation-notes_37","title":"Implementation Notes","text":"<p>This node provides analog audio facts.</p>"},{"location":"architecture/device_rest_api/rest_api/#response-class-definition_10","title":"Response Class Definition","text":"Parameter Format id int mac 50 byte char array min_audio_bw double max_audio_bw double avg_audio_bw double audio_bw double timestamp int"},{"location":"architecture/device_rest_api/rest_api/#response-class-json-structure_9","title":"Response Class JSON Structure","text":"<pre><code>KVM_analog_audio_facts: [\n\nid : 1495\n\nmac : 00:8c:10:1e:d3:ce\n\nmin_audio_bw : 0.0\n\nmax_audio_bw : 72.0\n\navg_audio_bw : 72.0\n\naudio_bw : 72.0\n\ntimestamp : 137289260\n]\n</code></pre>"},{"location":"architecture/device_rest_api/rest_api/#get-usb-facts","title":"GET USB Facts","text":""},{"location":"architecture/device_rest_api/rest_api/#url_43","title":"URL","text":"<p>https://IP:8888/statistics/facts/usb_facts</p>"},{"location":"architecture/device_rest_api/rest_api/#implementation-notes_38","title":"Implementation Notes","text":"<p>This node provides USB facts.</p>"},{"location":"architecture/device_rest_api/rest_api/#response-class-definition_11","title":"Response Class Definition","text":"Parameter Format id int mac 50 byte char array min_usb_egress_bw double max_usb_egress_bw double avg_usb_egress_bw double min_usb_ingress_bw double max_usb_ingress_bw double avg_usb_ingress_bw double timestamp int"},{"location":"architecture/device_rest_api/rest_api/#response-class-json-structure_10","title":"Response Class JSON Structure","text":"<pre><code>    \"kvm_usb_facts\": [\n        {\n            \"id\": 51,\n            \"mac\": \"00:8c:10:1e:d3:ce\",\n            \"min_usb_egress_bw\": 0.0,\n            \"max_usb_egress_bw\": 127.33333587646484,\n            \"avg_usb_egress_bw\": 127.33334350585938,\n            \"usb_egress_bw\": 127.33333587646484,\n            \"min_usb_ingress_bw\": 0.0,\n            \"max_usb_ingress_bw\": 1246.5333251953125,\n            \"avg_usb_ingress_bw\": 1246.5333251953125,\n            \"usb_ingress_bw\": 1246.5333251953125,\n            \"timestamp\": 65592049\n        },\n        {\n            \"id\": 46,\n            \"mac\": \"00:8c:10:1e:d3:ce\",\n            \"min_usb_egress_bw\": 0.0,\n            \"max_usb_egress_bw\": 125.33333587646484,\n            \"avg_usb_egress_bw\": 124.33334350585938,\n            \"usb_egress_bw\": 125.33333587646484,\n            \"min_usb_ingress_bw\": 0.0,\n            \"max_usb_ingress_bw\": 1242.5333251953125,\n            \"avg_usb_ingress_bw\": 1242.5333251953125,\n            \"usb_ingress_bw\": 1242.5333251953125,\n            \"timestamp\": 65591049\n\n        }\n    ]\n</code></pre>"},{"location":"architecture/device_rest_api/rest_api/#get-alerts","title":"GET Alerts","text":""},{"location":"architecture/device_rest_api/rest_api/#url_44","title":"URL","text":"<p>https://IP:8888/alerts</p>"},{"location":"architecture/device_rest_api/rest_api/#implementation-notes_39","title":"Implementation Notes","text":"<p>This node provides system alerts.</p>"},{"location":"architecture/device_rest_api/rest_api/#response-class-definition_12","title":"Response Class Definition","text":"Paramter Format Options id int n/a mac 50 byte char array n/a ip address 1025 byte char array n/a source 16 byte char array alert_category 32 byte char array Critical/Warning/Info/Unknown alert_condition 32 byte char array Metric/Trait/Availability/Operation/Severity/Unknown alert_component 32 byte char array User/Appliance/Connection/unknown alert_command 32 byte char array Auto_Login/Manual_Login/Post_connect_login/Manual_logout/Gui_timeout_logout/Reboot/Upgrade/Start/disconnect/rdp_connection/Unknown alert_status 32 byte char array Success/Failed/Inprogress/Cancelled/Timeout/Online/Unknown alert_description 32 byte char array context_1 255 byte char array context_2 255 byte char array context_3 255 byte char array context_4 255 byte char array timestamp int"},{"location":"architecture/device_rest_api/rest_api/#response-class-json-structure_11","title":"Response Class JSON Structure","text":"<pre><code>kvm_alerts: [\n    id : 2\n\n    mac : 00:8c:10:1e:d3:ce\n\n    ip_address : 10.211.129.55\n\n    source : appliance\n\n    alert_category : Info\n\n    alert_condition : Operation\n\n    alert_component : Connection\n\n    alert_command : Start\n\n    alert_status : Success\n\n    alert_description : New Connection\n\n    context_1 : 0:d:48:3b:45:5d\n\n    context_2 : 10.211.129.52\n\n    context_3 : \" \"\n\n    context_4 : \" \"\n\n    timestamp : 68938192\n]\n</code></pre>"},{"location":"architecture/device_rest_api/rest_api/#alert-instances","title":"Alert Instances","text":"Alert Source Appliance Source SDKVM Details Auto_Login GUI: mainwindow.cpp Sends user name of the person that has been autologged in Manual_Login GUI: mainwindow.cpp, GUI: logindialog.cpp sent from the OSD via stats_cli Sent on success and failure with user name Post_connect_login Appears not to be used Not used Sends user name Force_login GUI: mainwindow.cpp Sent on success and failure with user name Manual_logout GUI: mainwindow.cpp sent from the OSD via stats_cli Sends user name Gui_timeout_logout GUI: mainwindow.cpp sends the name of the current user Force_logout GUI: mainwindow.cpp Sent on success and failure with user name Reboot Appears not to be used Upgrade Appears not to be used Start Server Emerald: Connection Manager: connection_manager.c Sent when the server side detects a new connection, includes logged in user's name disconnect Server Emerald: Connection Manager: connection_manager.c Sent when the server side detects a disconnection, includes client hostname rdp connection GUI: mainwindow.cpp Sent on failure with error code but appears not to be used Ethernet link statsmonitor_toe.c, statsmonitor.c Sent under the following conditions:  (1) If Ethernet link errors detected on a network port (2) If TCP re-transmissions exceed a predefined threshold  (3) Sent when the status of the Ethernet link changes"},{"location":"architecture/device_rest_api/rest_api/#get-authentication-statistics","title":"GET Authentication Statistics","text":""},{"location":"architecture/device_rest_api/rest_api/#url_45","title":"URL","text":"<p>https://IP:8888/statistics/authentication</p>"},{"location":"architecture/device_rest_api/rest_api/#implementation-notes_40","title":"Implementation Notes","text":"<p>This node provides authentication statistics.</p>"},{"location":"architecture/device_rest_api/rest_api/#response-class-definition_13","title":"Response Class Definition","text":"Paramter Format id int mac 50 byte char array successful_login int refused_login int manager_unreachable int timestamp int"},{"location":"architecture/device_rest_api/rest_api/#response-class-json-structure_12","title":"Response Class JSON Structure","text":"<pre><code>kvm_authentication_stats : [\n\n    id : 0\n\n    mac : 1c:37:bf:00:11:91\n\n    successful_login : 3766\n\n    refused_login : 150\n\n    manager_unreachable : 26\n\n    timestamp : 129448544\n]\n</code></pre>"},{"location":"architecture/device_rest_api/rest_api/#source","title":"Source","text":"Statistic Source Appliance Source SDKVM Details manager_unreachable mainwindow.cpp, forceLogin,detectCurUsr,startlog handled by the stats_cli as part of the authentication process refused_login mainwindow.cpp, sendConnectionStats handled by the stats_cli as part of the authentication process Read from a file the GUI generates successful_login mainwindow.cpp, sendConnectionStats handled by the stats_cli as part of the authentication process Read from a file the GUI generates"},{"location":"architecture/device_rest_api/rest_api/#get-active-connection-status","title":"GET Active Connection Status","text":""},{"location":"architecture/device_rest_api/rest_api/#url_46","title":"URL","text":"<p>https://IP:8888/statistics/active_connections</p>"},{"location":"architecture/device_rest_api/rest_api/#implementation-notes_41","title":"Implementation Notes","text":"<p>This node provides active connection statistics.</p>"},{"location":"architecture/device_rest_api/rest_api/#response-class-definition_14","title":"Response Class Definition","text":"Parameter Format id int mac 50 byte char array connection_id int name 32 byte char array user 32 byte char array Rx_hostname 255 byte char array Tx_hostname 255 byte char array device_type 16 byte char array connection_type int group_name 16 byte char array alert_state int duration int start_time int timestamp int"},{"location":"architecture/device_rest_api/rest_api/#response-class-json-structure_13","title":"Response Class JSON Structure","text":"<pre><code>kvm_active_connections: [\n\n    id : 0\n    mac : 1c:37:bf:00:11:91\n    connection_id : 17415\n    name : rx55-4K_default\n    username : Boxilla\n    rx_hostname : RX_1C37BF001191\n    tx_hostname : 10.211.129.55\n    device_name : decoder\n    connection_type : 0\n    group_name : group\n    alert_state : 0\n    duration : 0\n    start_time : 130612253\n    timestamp : 130612253\n]\n</code></pre>"},{"location":"architecture/device_rest_api/rest_api/#get-previous-connection-statistics","title":"GET Previous Connection Statistics","text":""},{"location":"architecture/device_rest_api/rest_api/#url_47","title":"URL","text":"<p>https://IP:8888/statistics/previous_connections</p>"},{"location":"architecture/device_rest_api/rest_api/#implementation-notes_42","title":"Implementation Notes","text":"<p>This node provides Previous Connection statistics, the format is the same as that shown in the next section (Active Connections).</p>"},{"location":"architecture/device_rest_api/rest_api/#response-class-json-structure_14","title":"Response Class JSON Structure","text":"<pre><code>{\nkvm_previous_connection; [\n\n    id : 4\n    mac : 1c:37:bf:00:11:91\n    connection_id : 25282\n    name : rx55-4K_default\n    username : Boxilla\n    rx_hostname : RX_1C37BF001191\n    tx_hostname : 10.211.129.55\n    device_name : decoder\n    connection_type : 0\n    group_name : group\n    alert_state : 0\n    duration : 2\n    start_time : 129291357\n    timestamp ; 129414001\n],\n\n[\n id : 12\n mac : 1c:37:bf:00:11:91\n connection_id : 44813\n name : rx55-4K_default\n username : Boxilla\n rx_hostname : RX_1C37BF001191\n tx_hostname : 10.211.129.55\n device_type : decoder\n connection_type : 0\n group_name : group\n alert_state : 0\n duration : 6\n start_time : 128873892\n timestamp : 129244176\n]\n}\n</code></pre>"},{"location":"architecture/device_rest_api/rest_api/#get-connection-control-statistics","title":"GET Connection Control Statistics","text":""},{"location":"architecture/device_rest_api/rest_api/#url_48","title":"URL","text":"<p>https://IP:8888/statistics/connection_control</p>"},{"location":"architecture/device_rest_api/rest_api/#implementation-notes_43","title":"Implementation Notes","text":"<p>This node provides connection statistics as per table below</p>"},{"location":"architecture/device_rest_api/rest_api/#response-class-definition_15","title":"Response Class Definition","text":"Parameter Format id int mac 50 byte char array connection_in_use int connection_not_reachable int connection_refused int connection_error int timeouts int"},{"location":"architecture/device_rest_api/rest_api/#response-class-json-structure_15","title":"Response Class JSON Structure","text":"<pre><code>{\nid:\nmac:\nconnection_in_use:\nconnection_not_reachable:\nconnection_refused:\nconnection_error:\ntimeouts:\n}\n</code></pre>"},{"location":"architecture/device_rest_api/rest_api/#get-network-physical-link-status","title":"GET Network Physical Link Status","text":""},{"location":"architecture/device_rest_api/rest_api/#url_49","title":"URL","text":"<p>https://IP:8888/statistics/facts/network/physical</p>"},{"location":"architecture/device_rest_api/rest_api/#implementation-notes_44","title":"Implementation Notes","text":"<p>This node provides statistics for the physical links associated with a network interface. It returns an array of 2 interface statistics.</p>"},{"location":"architecture/device_rest_api/rest_api/#response-class-definition_16","title":"Response Class Definition","text":"Parameter Format id int mac int Active int(0 = no, 1 = yes) bool link_status 255 byte char array speed 255 byte char array media 255 byte char array lacp_status 255 byte char array"},{"location":"architecture/device_rest_api/rest_api/#response-class-json-structure_16","title":"Response Class JSON Structure","text":"<pre><code>{\n  \"kvm_network_physical_facts \": [\n    {\n      \"physical_links\": [\n        {\n          \"id\":n ,\n          \"mac_id\": 0,  // MAC #0\n          \"active\": True, // False = \"no\", True = \"yes\"\n          \"link_status\": \"Up\", // possible values: \"Up\",\"Down\", \"Unknown\"\n          \"speed\": 1000, // possible values: \"10 Mbps\", \"100 Mbps\", \"1 Gbps\", \"2.5 Gbps\", \"10 Gbps\", \"Unknown\"\n          \"media\": \"RJ45\", // possible values: \"RJ45\",\"SFP\", \"Unknown\"\n          \"lacp_status\": \"Enabled\" //  possible values: \"Active\", \"Disabled\",\" Undetected\",\" Timed-out\" or \"Unknown\"\n        },\n        {\n          \"id\":n ,\n          \"mac_id\": 1,  // MAC #1\n          \"active\": True, // False = \"no\", True = \"yes\"\n          \"link_status\": \"Up\", // possible values: \"Up\", \"Down\", \"Unknown\"\n          \"speed\": 1000, // possible values: \"10 Mbps\", \"100 Mbps\", \"1 Gbps\", \"2.5 Gbps\", \"10 Gbps\", \"Unknown\"\n          \"media\": \"RJ45\", // possible values: \"RJ45\",\"SFP\", \"Unknown\"\n          \"lacp_status\": \"Enabled\" //  possible values: \"Active\", \"Disabled\",\" Undetected\",\" Timed-out\" or \"Unknown\"    },\n        },\n      ],\n    }\n  ],\n}\n</code></pre>"},{"location":"architecture/device_rest_api/rest_api/#note","title":"Note","text":"<ul> <li>Active: Active means which of the two available interfaces has been designated as active. The link could be down on the selected port, but it could still be the active port. One of the two interfaces on an appliance will always be active.</li> <li>Link Status: The Status indicates the state of the link; this depends on whether an active link is connected to the interface. Both interfaces may be classified as \"Down\" if no links are detected, or both could be \"Up\" if the Appliance is configured as part of a redundant network. The status could also be unknown because we have not been able to switch to that link and determine its status yet.</li> <li>LACP Status: The LACP status could be one of a number of values:</li> <li>Active \u2013 Enabled and communicating with a compatible switch</li> <li>Disabled \u2013 Feature is turned off</li> <li>Undetected \u2013 Switch at far end does not support it</li> <li>Timed-out \u2013 We are no longer getting LACP messages from the switch</li> <li>Unknown \u2013 We cannot asses the status of LACP because we have no physical link (.i.e. the link status is \"down\").</li> </ul>"},{"location":"architecture/device_rest_api/rest_api/#get-network-toe-connection-status-will-not-support-for-sdkvm","title":"GET Network TOE Connection Status( will not support for SDKVM)","text":""},{"location":"architecture/device_rest_api/rest_api/#url_50","title":"URL","text":"<p>https://IP:8888/statistics/facts/network/toe_connection</p>"},{"location":"architecture/device_rest_api/rest_api/#implementation-notes_45","title":"Implementation Notes","text":"<p>This node provides statistics for the active toe connections associated with a network interface. It returns an array of channel objects with statistics for a given channel.</p>"},{"location":"architecture/device_rest_api/rest_api/#response-class-definition_17","title":"Response Class Definition","text":"Parameter Format id int channel_id int description 255 byte char array local_port int remote_port int remote_ip 255 byte char array remote_mac 255 byte char array total_bytes_transmitted int total_bytes_acknowledged int total_bytes_recieved int total_bytes_dropped int average_bps_transmitted int average_bps_acknowledged int average_bps_recieved int rtt_usec int rto_usec int"},{"location":"architecture/device_rest_api/rest_api/#response-class-json-structure_17","title":"Response Class JSON Structure","text":"<pre><code>{\n  \"kvm_network_toe_connections_facts \": [\n    {\n      \"toe_connections\": [ // An array of ACTIVE connections, with up to 64 elements\n        {\n          \"id\":n ,\n          \"channel_id\": 2,  // ct02\n          \"description\": \"TOE TCP connection channel\",  // Could also be \"TOE Reliable-Multicast Master channel\", \"TOE Reliable-Multicast Slave channel\", \"TOE Reliable-Multicast Response channel\", \"Unknown\"\n          \"local_port\": 16384,\n          \"remote_port\": 20002,\n          \"remote_ip\": \"192.168.1.2\",\n          \"remote_mac\": \"00:11:22:33:44:55\",\n          \"total_bytes_transmitted \": 0, // Total bytes transmitted since connection started (including retransmissions)\n          \"total_bytes_acknowledged\": 0, // Total bytes transmitted successfully (ACK'd) since connection started (TCP only)\n          \"total_bytes_received\": 0, // Total bytes received since connection started\n          \"total_bytes_dropped\": 0, // Total ingress bytes dropped (e.g. due to sequence error, checksum error, MAC buffer overflow, etc)\n          \"average_bps_transmitted\": 0, // Average since last reporting interval - TX throughput\n          \"average_bps_acknowledged\": 0, // Average since last reporting interval - TX goodput\n          \"average_bps_received\": 0, // Average since last reporting interval - RX goodput\n          \"rtt_usec\": 0, // latest measured RTT in microseconds (TCP and RMC-Master only)\n          \"rto_usec\": 0, // latest RTO in microseconds (TCP and RMC-Master only)\n        },\n      ]\n    }\n  ],\n}\n</code></pre>"},{"location":"architecture/device_rest_api/rest_api/#get-network-eth-connection-status-for-sdkvm","title":"GET Network eth Connection Status for SDKVM","text":""},{"location":"architecture/device_rest_api/rest_api/#url_51","title":"URL","text":"<p>https://IP:8888/statistics/facts/network/eth_connections</p>"},{"location":"architecture/device_rest_api/rest_api/#implementation-notes_46","title":"Implementation Notes","text":"<p>This node provides statistics for the active toe connections associated with a network interface. It returns an array of channel objects with statistics for a given channel.</p>"},{"location":"architecture/device_rest_api/rest_api/#response-class-definition_18","title":"Response Class Definition","text":"Parameter Format id int channel_id int description 255 byte char array local_port int remote_port int remote_ip 255 byte char array remote_mac 255 byte char array total_bytes_transmitted int total_bytes_acknowledged int total_bytes_recieved int total_bytes_dropped int average_bps_transmitted int average_bps_acknowledged int average_bps_recieved int rtt_usec int rto_usec int"},{"location":"architecture/device_rest_api/rest_api/#response-class-json-structure_18","title":"Response Class JSON Structure","text":"<pre><code>{\n  \"kvm_network_eth_connections_facts \": [\n    {\n          \"id\":n ,\n          \"channel_id\": 0,  // ct02\n          \"description\": \"ETH_CONNECTION_STATISTICS\",\n          \"local_port\": 0,\n          \"remote_port\": 0,\n          \"remote_ip\": \"0\",\n          \"remote_mac\": \"0\",\n          \"total_bytes_transmitted \": 0, // Total bytes transmitted since connection started\n          \"total_bytes_acknowledged\": 0, //currently  zero only\n          \"total_bytes_received\": 0, // Total bytes transmitted since connection started\n          \"total_bytes_dropped\": 0, // Total ingress bytes dropped (e.g. due to sequence error, checksum error, MAC buffer overflow, etc)\n          \"average_bps_transmitted\": 0, //currently  zero only\n          \"average_bps_acknowledged\": 0,//currently  zero only\n          \"average_bps_received\": 0, //currently  zero only\n          \"rtt_usec\": 0, //currently  zero only\n          \"rto_usec\": 0, //currently  zero only\n    }\n  ],\n}\n</code></pre>"},{"location":"architecture/device_rest_api/rest_api/#get-process-status","title":"GET Process Status","text":""},{"location":"architecture/device_rest_api/rest_api/#url_52","title":"URL","text":"<p>https://IP:8888/control/process?process_name=init</p>"},{"location":"architecture/device_rest_api/rest_api/#implementation-notes_47","title":"Implementation Notes","text":"<p>This node is used to check if a process is running. For example, to check if init is running on the appliance, the following URL is used: https://IP:8888/control/process?process_name=init</p>"},{"location":"architecture/device_rest_api/rest_api/#response-class-definition_19","title":"Response Class Definition","text":"Parameter Format Process 255 byte char array Status int(0 or 1)"},{"location":"architecture/device_rest_api/rest_api/#response-class-json-structure_19","title":"Response Class JSON Structure","text":"<p>The response class is composed of the name of the process and a numeric value, 1 indicating that the process is running and 0 indicating that the process is not running. For example:</p> <pre><code>{\n  \"init\": 1\n}\n</code></pre>"},{"location":"architecture/device_rest_api/rest_api/#get-transmitter-settings","title":"GET Transmitter Settings","text":""},{"location":"architecture/device_rest_api/rest_api/#url_53","title":"URL","text":"<p>https://IP:8888/control/configuration/tx_settings</p>"},{"location":"architecture/device_rest_api/rest_api/#implementation-notes_48","title":"Implementation Notes","text":"<p>This node provides Transmitter configuration settings.</p>"},{"location":"architecture/device_rest_api/rest_api/#response-class-definition_20","title":"Response Class Definition","text":"Parameter Format Single head Dual head video_quality int \u2713 \u2713 video_source_optimisation int \u2713 \u2573 hid int \u2713 \u2713 mouse_keyboard_timeout int \u2713 \u2713 head_1_edid int \u2713 \u2713 head_2_edid int \u2573 \u2713 audio_source int \u2713 \u2713"},{"location":"architecture/device_rest_api/rest_api/#response-class-json-structure-single-head-transmitter","title":"Response Class JSON Structure single head transmitter","text":"<pre><code>{\n  \"video_quality\": 1,\n  \"video_source_optimisation\": 1,\n  \"mouse_keyboard_timeout\": 1,\n  \"hid\": 1,\n  \"head_1_edid\": 5,\n  \"audio_source\": 1\n}\n</code></pre>"},{"location":"architecture/device_rest_api/rest_api/#response-class-json-structure-dual-head-transmitter","title":"Response Class JSON Structure dual head transmitter","text":"<pre><code>{\n  \"video_quality\": 1,\n  \"hid\": 1,\n  \"mouse_keyboard_timeout\": 1,\n  \"head_1_edid\": 1,\n  \"head_1_edid\": 2,\n  \"audio_source\": 1\n}\n</code></pre>"},{"location":"architecture/device_rest_api/rest_api/#get-reciever-settings","title":"GET Reciever Settings","text":""},{"location":"architecture/device_rest_api/rest_api/#url_54","title":"URL","text":"<p>https://IP:8888/control/configuration/rx_settings</p>"},{"location":"architecture/device_rest_api/rest_api/#implementation-notes_49","title":"Implementation Notes","text":"<p>This node provides Receiver settings.</p>"},{"location":"architecture/device_rest_api/rest_api/#definition-for-2k4k-appliances","title":"Definition for 2k/4k appliances","text":"Parameter Format power_mode int/empty string http_enable int rx_scaling int"},{"location":"architecture/device_rest_api/rest_api/#definition-for-sdkvm","title":"Definition for SDKVM","text":"Parameter Format osd_ovelay 9 bytes array osd_inactivity_timer 32 bytes array http_enable int"},{"location":"architecture/device_rest_api/rest_api/#response-class-json-structure-for-sdkvm_1","title":"Response Class JSON Structure for SDKVM","text":""},{"location":"architecture/device_rest_api/rest_api/#default-response","title":"Default response","text":"<pre><code>{\n  \"osd_ovelay\": \"False\",\n  \"osd_inactivity_timer\": \"\",\n  \"http_enable\": 0\n}\n</code></pre>"},{"location":"architecture/device_rest_api/rest_api/#manipulated-response","title":"manipulated response","text":"<pre><code>{\n  \"osd_ovelay\": \"True\",\n  \"osd_inactivity_timer\": \"30\",\n  \"http_enable\": 1\n}\n</code></pre>"},{"location":"architecture/device_rest_api/rest_api/#response-class-json-structure-for-2k4k-appliances","title":"Response Class JSON Structure for 2k/4k Appliances","text":"<pre><code>{\n  \"power_mode\": 1,\n  \"http_enable\": 1,\n  \"rx_scaling\": 1\n}\n</code></pre> <p>PS: Please note, power_mode is a feature supported only for CORRIB and DEEL devices and not supported anymore for Emerald devices. Also, rx_scaling is supported only in 4k devices.</p>"},{"location":"architecture/device_rest_api/rest_api/#get-current-user","title":"GET Current User","text":""},{"location":"architecture/device_rest_api/rest_api/#url_55","title":"URL","text":"<p>https://IP:8888/control/user</p>"},{"location":"architecture/device_rest_api/rest_api/#implementation-notes_50","title":"Implementation Notes","text":"<p>This node provides the name of the currently logged in user.</p>"},{"location":"architecture/device_rest_api/rest_api/#response-class-definition_21","title":"Response Class Definition","text":"Parameter Format KEY User-name Value 32 byte char array"},{"location":"architecture/device_rest_api/rest_api/#response-class-json-structure_20","title":"Response Class JSON Structure","text":"<pre><code>{\n    \"user\": \"user-1\",\n}\n</code></pre>"},{"location":"architecture/device_rest_api/rest_api/#get-reciever-edid-tablehead-1","title":"GET Reciever EDID TableHead 1","text":""},{"location":"architecture/device_rest_api/rest_api/#url_56","title":"URL","text":"<p>https://IP:8888/control/configuration/rx_edid_head_1</p>"},{"location":"architecture/device_rest_api/rest_api/#implementation-notes_51","title":"Implementation Notes","text":"<p>This node returns the EDID table from the monitor attached to Rx head 1.</p>"},{"location":"architecture/device_rest_api/rest_api/#response-class-definition_22","title":"Response Class Definition","text":"Paramter Format edid_table 256 byte char array"},{"location":"architecture/device_rest_api/rest_api/#response-class-json-structure_21","title":"Response Class JSON Structure","text":"<pre><code>{\n  \"edid_table\": \"GUI OPTION 6 DELL_E2210HBB\\n0 ff ff ff ff ff ff 0 \\n10 ac 31 d0 d2 2 96 49 \\na 14 1 3 80 30 1b 78 \\nee ee 95 a3 54 4c 99 26 \\nf 50 54 a5 4b 0 71 4f \\n81 80 d1 c0 1 1 1 1 \\n1 1 1 1 1 1 2 3a \\n80 18 71 38 2d 40 58 2c \\n45 0 dd c 11 0 0 1e \\n0 0 0 ff 0 44 35 35 \\n33 52 30 33 39 30 59 5a \\n4c a 0 0 0 fc 0 44 \\n45 4c 4c 20 45 32 32 31 \\n30 48 42 42 0 0 0 fd \\n0 32 4c 1e 53 11 0 a \\n20 20 20 20 20 20 0 13 \\n\"\n}\n</code></pre>"},{"location":"architecture/device_rest_api/rest_api/#get-reciever-edid-table-head-2","title":"GET Reciever EDID Table Head 2","text":""},{"location":"architecture/device_rest_api/rest_api/#url_57","title":"URL","text":"<p>https://IP:8888/control/configuration/rxedid_head</p>"},{"location":"architecture/device_rest_api/rest_api/#implementation-notes_52","title":"Implementation Notes","text":"<p>This node returns the EDID table from the monitor attached to Rx head 2.</p>"},{"location":"architecture/device_rest_api/rest_api/#response-class-definition_23","title":"Response Class Definition","text":"Parameter Format edid_table 256 byte char array"},{"location":"architecture/device_rest_api/rest_api/#response-class-json-structure_22","title":"Response Class JSON Structure","text":"<pre><code>{\n  \"edid_table\": \"GUI OPTION 6 DELL_E2210HBB\\n0 ff ff ff ff ff ff 0 \\n10 ac 31 d0 d2 2 96 49 \\na 14 1 3 80 30 1b 78 \\nee ee 95 a3 54 4c 99 26 \\nf 50 54 a5 4b 0 71 4f \\n81 80 d1 c0 1 1 1 1 \\n1 1 1 1 1 1 2 3a \\n80 18 71 38 2d 40 58 2c \\n45 0 dd c 11 0 0 1e \\n0 0 0 ff 0 44 35 35 \\n33 52 30 33 39 30 59 5a \\n4c a 0 0 0 fc 0 44 \\n45 4c 4c 20 45 32 32 31 \\n30 48 42 42 0 0 0 fd \\n0 32 4c 1e 53 11 0 a \\n20 20 20 20 20 20 0 13 \\n\"\n}\n</code></pre>"},{"location":"architecture/device_rest_api/rest_api/#get-transmitter-edid-clone-name-head-1","title":"GET Transmitter EDID Clone Name Head 1","text":""},{"location":"architecture/device_rest_api/rest_api/#url_58","title":"URL","text":"<p>https://IP:8888/control/configuration/tx_clone_name_1</p>"},{"location":"architecture/device_rest_api/rest_api/#implementation-notes_53","title":"Implementation Notes","text":"<p>This node returns the EDID clone name for head 1.</p>"},{"location":"architecture/device_rest_api/rest_api/#response-class-definition_24","title":"Response Class Definition","text":"Parameter Format clone_name 18 byte char array"},{"location":"architecture/device_rest_api/rest_api/#response-class-json-structure_23","title":"Response Class JSON Structure","text":"<pre><code>{\n  \"clone_name\": \"DELL_E2210HBB\"\n}\n</code></pre>"},{"location":"architecture/device_rest_api/rest_api/#get-transmitter-edid-clone-name-head-2","title":"GET Transmitter EDID Clone Name Head 2","text":""},{"location":"architecture/device_rest_api/rest_api/#url_59","title":"URL","text":"<p>https://IP:8888/control/configuration/tx_clone_name_2</p>"},{"location":"architecture/device_rest_api/rest_api/#implementation-notes_54","title":"Implementation Notes","text":"<p>This node returns the EDID clone name for head 2.</p>"},{"location":"architecture/device_rest_api/rest_api/#response-class-definition_25","title":"Response Class Definition","text":"Parameter Format clone_name 18 byte char array"},{"location":"architecture/device_rest_api/rest_api/#response-class-json-structure_24","title":"Response Class JSON Structure","text":"<pre><code>{\n  \"clone_name\": \"DELL_E2210HBB\"\n}\n</code></pre>"},{"location":"architecture/device_rest_api/rest_api/#get-zone","title":"GET Zone","text":""},{"location":"architecture/device_rest_api/rest_api/#url_60","title":"URL","text":"<p>https://IP:8888/control/configuration/zone</p>"},{"location":"architecture/device_rest_api/rest_api/#implementation-notes_55","title":"Implementation Notes","text":"<p>This node returns the appliance zone</p>"},{"location":"architecture/device_rest_api/rest_api/#response-class-definition_26","title":"Response Class Definition","text":"Parameter Format zone 32 byte char array"},{"location":"architecture/device_rest_api/rest_api/#response-class-json-structure_25","title":"Response Class JSON Structure","text":"<pre><code>{\n  \"zone\": \"zone-1A\"\n}\n</code></pre>"},{"location":"architecture/device_rest_api/rest_api/#get-bonded-group-name","title":"GET Bonded Group Name","text":""},{"location":"architecture/device_rest_api/rest_api/#url_61","title":"URL","text":"<p>https://IP:8888/control/configuration/bonded_group</p>"},{"location":"architecture/device_rest_api/rest_api/#implementation-notes_56","title":"Implementation Notes","text":"<p>This node returns the bonded group name</p>"},{"location":"architecture/device_rest_api/rest_api/#response-class-definition_27","title":"Response Class Definition","text":"Parameter Format bonded_group 32 byte char array"},{"location":"architecture/device_rest_api/rest_api/#response-class-json-structure_26","title":"Response Class JSON Structure","text":"<pre><code>{\n  \"bonded_group\": \"bonded-group-1A\"\n}\n</code></pre>"},{"location":"architecture/device_rest_api/rest_api/#get-system-capabilities","title":"GET System Capabilities","text":""},{"location":"architecture/device_rest_api/rest_api/#url_62","title":"URL","text":"<p>https://IP:8888/system/capabilities</p>"},{"location":"architecture/device_rest_api/rest_api/#implementation-notes_57","title":"Implementation Notes","text":"<p>This node returns supported parameters and their ranges. The format is a key value pair where the key represents the parameter and the value represents an array of supported values. This node allows the user to determine supported paramters on any given appliance. In particular, transmitter settings may vary depending on the firmware version and hardware type. This URL will allow Boxilla to determine the capabilities of an appliance before reading and applying settings.</p> <p>The codes returned in the array values are defined below.</p>"},{"location":"architecture/device_rest_api/rest_api/#json-response-structures","title":"JSON Response structures","text":""},{"location":"architecture/device_rest_api/rest_api/#rx-response-class-json-structure","title":"RX Response Class JSON Structure","text":"Emerald Devices(2k) Emerald Devices (4K) Corrib and Deel Devices SDKVM <pre><code>{\n  \"http_enable\": \"0,1\",\n  \"timers_configuration\": \"global,local\",\n  \"osd_inactivity\": \"0,2-60\",\n  \"connection_inactivity\": \"0,2-60\"\n}\n</code></pre> <pre><code>{\"http_enable\": \"0,1\",\n\"rx_scaling\" : \"0,1\",\n\"timers_configuration\": \"global,local\",\n\"osd_inactivity\": \"0,2-60\",\n\"connection_inactivity\": \"0,2-60\"\n}\n</code></pre>  Note: rx_scaling supported for only 4Kdevices.   <pre><code>{\"power mode\" : \"0,1\",\n \"http_enable\": \"0,1\"}\n</code></pre> <pre><code>{}\n</code></pre>"},{"location":"architecture/device_rest_api/rest_api/#tx-response-class-json-structure","title":"TX Response Class JSON Structure","text":"Single Head Transmitter  Dual Head Transmitter <pre><code>{\n  \"dual_stream_suported\": \"true/false\",\n  \"video_quality\": \"0,1,2,3,4\",\n  \"video_source_optimisation\": \"0,1,2,3,4\",\n  \"hid\": \"0,1,2,3,4,5\",\n  \"mouse_keyboard_timeout\": \"0,1,2,3,4,5\",\n  \"head_1_edid\": \"0,1,2,3,4,5\",\n  \"audio_source\": \"0,1\"\n}\n</code></pre> <pre><code>{\n  \"dual_stream_suported\": \"true/false\",\n  \"video_quality\": \"0,1,2,3,4\",\n  \"hid\": \"0,1,2,3,4,5\",\n  \"mouse_keyboard_timeout\": \"0,1,2,3,4,5\",\n  \"head_1_edid\": \"0,1,2,3,4,5\",\n  \"head_2_edid\": \"0,1,2,3,4,5\",\n  \"audio_source\": \"0,1\"\n}\n</code></pre>"},{"location":"architecture/device_rest_api/rest_api/#get-list-of-diagnostic-files","title":"GET List of Diagnostic Files","text":""},{"location":"architecture/device_rest_api/rest_api/#url_63","title":"URL","text":"<p>https://IP:8888/control/diags/files</p>"},{"location":"architecture/device_rest_api/rest_api/#implementation-notes_58","title":"Implementation Notes","text":"<p>This node returns the list of diagnostics file</p>"},{"location":"architecture/device_rest_api/rest_api/#response-class-json-structure-for-emerald-2k-and-4k","title":"Response Class JSON Structure for Emerald 2k and 4k","text":"<pre><code>{\n  \"/usr/local/diagnostics/\": [\n    \"0 : /usr/local/diagnostics/AAE_2_TX_008C101EDF04_637\",\n    \"1 : /usr/local/diagnostics/logger.sh.report\",\n    \"2 : /usr/local/diagnostics/edid_control_-h_1_-r.report\",\n    \"3 : /usr/local/diagnostics/VERSION.log\",\n    \"4 : /usr/local/diagnostics/COMPATIBILITY.log\",\n    \"5 : /usr/local/diagnostics/etc_interfaces.log\",\n    \"6 : /usr/local/diagnostics/diagnostics.sh.log\",\n    \"7 : /usr/local/diagnostics/krdm.log\",\n    \"8 : /usr/local/diagnostics/interrupts.log\",\n    \"9 : /usr/local/diagnostics/AAE_1_TX_008C101EDF04_637\",\n    \"10 : /usr/local/diagnostics/TOE_2_TX_008C101EDF04_637\",\n    \"11 : /usr/local/diagnostics/df.report\",\n    \"12 : /usr/local/diagnostics/edid_control_-h_0_-r.report\",\n    \"13 : /usr/local/diagnostics/ifconfig.report\",\n    \"14 : /usr/local/diagnostics/libsystem_cli_serial.report\",\n    \"15 : /usr/local/diagnostics/libsystem_cli_type.report\",\n    \"16 : /usr/local/diagnostics/libsystem_cli_model.report\",\n    \"17 : /usr/local/diagnostics/libsystem_cli_heads.report\",\n    \"18 : /usr/local/diagnostics/libsystem_cli_compatibility.report\",\n    \"19 : /usr/local/diagnostics/libsystem_cli_network_ip.report\",\n    \"20 : /usr/local/diagnostics/libsystem_cli_network_gateway.report\",\n    \"21 : /usr/local/diagnostics/libsystem_cli_network_netmask.report\",\n    \"22 : /usr/local/diagnostics/ls_-l_-usr-local-.report\",\n    \"23 : /usr/local/diagnostics/lsusb.report\",\n    \"24 : /usr/local/diagnostics/dmesg.report\",\n    \"25 : /usr/local/diagnostics/du_-a_-usr-local-.report\",\n    \"26 : /usr/local/diagnostics/du_-a_-mnt-perm.report\",\n    \"27 : /usr/local/diagnostics/e2_read.report\",\n    \"28 : /usr/local/diagnostics/ethtool_eth0.report\",\n    \"29 : /usr/local/diagnostics/uname_-a.report\",\n    \"30 : /usr/local/diagnostics/free.report\",\n    \"31 : /usr/local/diagnostics/ps_-eflax.report\",\n    \"32 : /usr/local/diagnostics/-usr-bin-strings_-dev-mtd8.report\",\n    \"33 : /usr/local/diagnostics/-bin-netstat.report\",\n    \"34 : /usr/local/diagnostics/TOE_1_TX_008C101EDF04_637\",\n    \"35 : /usr/local/diagnostics/iomem.log\",\n    \"36 : /usr/local/diagnostics/vmallocinfo.log\",\n    \"37 : /usr/local/diagnostics/dev.log\",\n    \"38 : /usr/local/diagnostics/usr_interfaces.log\",\n    \"39 : /usr/local/diagnostics/tx_settings.db.log\",\n    \"40 : /usr/local/diagnostics/emerald_usb_composite_dev.cfg\",\n    \"41 : /usr/local/diagnostics/edid_head0.cfg\",\n    \"42 : /usr/local/diagnostics/edid_head1.cfg\",\n    \"43 : /usr/local/diagnostics/syslog.log.0\",\n    \"44 : /usr/local/diagnostics/syslog.log\"\n  ]\n}\n</code></pre>"},{"location":"architecture/device_rest_api/rest_api/#response-class-json-structure-for-sdkvm_2","title":"Response Class JSON Structure for SDKVM","text":"<pre><code>{\n  \"/home/snuc/SDKVM/diagnostics/\":[\n        \"0 : /home/snuc/SDKVM/diagnostics/9657A65451.json\",\n        \"1 : /home/snuc/SDKVM/diagnostics/4184DA00DB.json\",\n        \"2 : /home/snuc/SDKVM/diagnostics/syslog\",\n        \"3 : /home/snuc/SDKVM/diagnostics/current_monitors.json\",\n        \"4 : /home/snuc/SDKVM/diagnostics/syslog.1\",\n        \"5 : /home/snuc/SDKVM/diagnostics/openbox.log\"\n    ]\n}\n</code></pre>"},{"location":"architecture/device_rest_api/rest_api/#get-nth-diagnostic-file-content","title":"GET Nth Diagnostic File Content","text":""},{"location":"architecture/device_rest_api/rest_api/#url_64","title":"URL","text":"<p>https://IP:8888/control/diags/?file_id=2</p>"},{"location":"architecture/device_rest_api/rest_api/#response-class-json-structure_27","title":"Response Class JSON Structure","text":"<pre><code>{\n  \"/usr/local/diagnostics/usr_interfaces.log\": \"auto lo\\niface lo inet loopback\\n\\nauto eth0\\niface eth0 inet static\\n\\taddress 10.211.130.2\\n\\tnetmask 255.255.248.0\\n\\tbroadcast 10.211.135.255\\n\\tgateway 10.211.128.1\\n\"\n}\n</code></pre>"},{"location":"architecture/device_rest_api/rest_api/#get-log-level","title":"GET Log Level","text":""},{"location":"architecture/device_rest_api/rest_api/#url_65","title":"URL","text":"<p>https://IP:8888/control/diags/loglevel</p>"},{"location":"architecture/device_rest_api/rest_api/#implementation-notes_59","title":"Implementation Notes","text":"<p>This node returns the log level set on appliance</p>"},{"location":"architecture/device_rest_api/rest_api/#response-class-json-structure_28","title":"Response Class JSON Structure","text":"<pre><code>{\n  \"LOG_LEVEL\": \"7\\n\"\n}\n</code></pre>"},{"location":"architecture/device_rest_api/rest_api/#get-debug-mode","title":"GET Debug Mode","text":""},{"location":"architecture/device_rest_api/rest_api/#url_66","title":"URL","text":"<p>https://IP:8888/control/diags/debugmode</p>"},{"location":"architecture/device_rest_api/rest_api/#implementation-notes_60","title":"Implementation Notes","text":"<p>This node returns the debug status of the appliance</p>"},{"location":"architecture/device_rest_api/rest_api/#response-class","title":"Response Class","text":"<p>If debug is enabled a HTTP status code 200 is returned with DEBUG MODE on.</p> <p>If debug is disabled a HTTP status code 200 is returned with DEBUG MODE off.</p>"},{"location":"architecture/device_rest_api/rest_api/#get-network-settings_1","title":"GET network Settings","text":""},{"location":"architecture/device_rest_api/rest_api/#url_67","title":"URL","text":"<p>https://IP:8888/control/configure/network</p>"},{"location":"architecture/device_rest_api/rest_api/#implementation-notes_61","title":"Implementation Notes","text":"<p>This node provides network settings on sdkvm</p>"},{"location":"architecture/device_rest_api/rest_api/#response-class-definition_28","title":"Response Class Definition","text":"Paramter Format ip_address ip value string gateway gate way value string netmask netmask value string primary_dns primary dns string secondary_dns secondary dns string mac_address device mac address broadcast_address broad cast address lacp_enable lacp status,bool type"},{"location":"architecture/device_rest_api/rest_api/#response-class-json-structure_29","title":"Response Class JSON Structure","text":"<pre><code>{\n    \"ip_address\": \" ip value string\",\n    \"gateway\": \" gate way value  string\",\n    \"netmask\": \"netmask value string\",\n    \"primary_dns\": \"primary dns string\",\n    \"secondary_dns\": \"secondary dns string\",\n    \"mac_address\": \"mac address\",\n    \"broadcast_address\": \"broad cast address\",\n    \"lacp_enable\":false\n}\n</code></pre>"},{"location":"architecture/device_rest_api/rest_api/#get-receiver-timer-configurations","title":"GET Receiver Timer Configurations","text":""},{"location":"architecture/device_rest_api/rest_api/#url_68","title":"URL","text":"<p>https://IP:8888/control/configuration/timers_configuration</p>"},{"location":"architecture/device_rest_api/rest_api/#implementation-notes_62","title":"Implementation Notes","text":"<p>This node returns the appliance timers configuration, Local OSD Inactivity timer value and Local Connection Inactivity timer value.</p>"},{"location":"architecture/device_rest_api/rest_api/#response-class-definition_29","title":"Response Class Definition","text":"Parameter Format timers_config 32 byte char array local_osd_inactivity int local_connection_inactivity int"},{"location":"architecture/device_rest_api/rest_api/#response-class-json-structure_30","title":"Response Class JSON Structure","text":"<pre><code>{\n  \"timers_config\": \"global\",\n  \"local_osd_inactivity\": 0,\n  \"local_connection_inactivity\": 0\n}\n</code></pre>"},{"location":"architecture/device_rest_api/rest_api/#unsecure-get-rest-api-to-get-status-of-workspace-on-sdkvm","title":"Unsecure GET REST API to get status of workspace on SDKVM","text":"<p>http://IP:7778/workspace/status</p>"},{"location":"architecture/device_rest_api/rest_api/#implementation-notes_63","title":"Implementation Notes","text":"<p>Responds with the ID of the currently active workspace. If no workspace is active then the ID will be blank.</p>"},{"location":"architecture/device_rest_api/rest_api/#request-class-json-structure_23","title":"Request Class JSON Structure","text":"<p>No body</p>"},{"location":"architecture/device_rest_api/rest_api/#response-class-formats_2","title":"Response Class Formats","text":"Parameter Format workspace_id 32 byte char array max"},{"location":"architecture/device_rest_api/rest_api/#response-json-format","title":"Response json format","text":"<p>Http status code 200 <pre><code>{\n    \"workspaces_id\":\"366\"\n}\n</code></pre> Http status code 500 Server error</p>"},{"location":"architecture/device_rest_api/rest_api/#secure-get-rest-api-to-get-status-of-workspace-on-sdkvm","title":"Secure GET REST API to get status of workspace on SDKVM","text":"<p>https://IP:8888/workspace/status</p>"},{"location":"architecture/device_rest_api/rest_api/#implementation-notes_64","title":"Implementation Notes","text":"<p>Responds with the ID of the currently active workspace. If no workspace is active then the ID will be blank.</p>"},{"location":"architecture/device_rest_api/rest_api/#request-class-json-structure_24","title":"Request Class JSON Structure","text":"<p>No body</p>"},{"location":"architecture/device_rest_api/rest_api/#response-class-formats_3","title":"Response Class Formats","text":"Parameter Format workspace_id 32 byte char array max"},{"location":"architecture/device_rest_api/rest_api/#response-json-format_1","title":"Response json format","text":"<p>Http status code 200 <pre><code>{\n    \"workspaces_id\":\"366\"\n}\n</code></pre> Http status code 500 Server error</p>"},{"location":"architecture/device_rest_api/rest_api/#un-secure-get-sdkvm-receiver-users-workspaces-list","title":"Un secure GET SDKVM Receiver Users Workspaces List","text":"<p>http://IP:7778/users/workspaces/list</p>"},{"location":"architecture/device_rest_api/rest_api/#implementation-notes_65","title":"Implementation Notes","text":"<p>Responded with list of users along with associated workspaces</p>"},{"location":"architecture/device_rest_api/rest_api/#request-class-json-structure_25","title":"Request Class JSON Structure","text":"<p>No body</p>"},{"location":"architecture/device_rest_api/rest_api/#response-class-formats_4","title":"Response Class Formats","text":"Parameter Format user_name 32 byte char array max workspaces workspace_id, workspace_name"},{"location":"architecture/device_rest_api/rest_api/#response-json-format_2","title":"Response json format","text":"<p>Http status code 200 <pre><code>{\n    \"kvm_users_workspaces_list\": [\n        {\n            \"user_name\": \"test\",\n            \"workspaces\": []\n        },\n        {\n            \"user_name\": \"test1\",\n            \"workspaces\": []\n        },\n        {\n            \"user_name\": \"test2\",\n            \"workspaces\": []\n        },\n        {\n            \"user_name\": \"test3\",\n            \"workspaces\": []\n        },\n        {\n            \"user_name\": \"test4\",\n            \"workspaces\": []\n        },\n        {\n            \"user_name\": \"test5\",\n            \"workspaces\": []\n        },\n        {\n            \"user_name\": \"test6\",\n            \"workspaces\": []\n        },\n        {\n            \"user_name\": \"test7\",\n            \"workspaces\": []\n        },\n        {\n            \"user_name\": \"thiru\",\n            \"workspaces\": []\n        },\n        {\n            \"user_name\": \"thirup\",\n            \"workspaces\": []\n        },\n        {\n            \"user_name\": \"admin\",\n            \"workspaces\": [\n                {\n                    \"workspace_name\": \"test\",\n                    \"workspace_id\": \"56\"\n                },\n                {\n                    \"workspace_name\": \"test1\",\n                    \"workspace_id\": \"79\"\n                }\n            ]\n        }\n    ]\n}\n</code></pre> Http status code 400 <pre><code>{\n    \"message\": \"users_files_not_exist\"\n}\n</code></pre> Http status code 500 Server error</p>"},{"location":"architecture/device_rest_api/rest_api/#secure-get-sdkvm-receiver-users-workspaces-list","title":"Secure GET SDKVM Receiver Users Workspaces List","text":"<p>https://IP:8888/users/workspaces/list</p>"},{"location":"architecture/device_rest_api/rest_api/#implementation-notes_66","title":"Implementation Notes","text":"<p>Responded with list of users along with associated workspaces</p>"},{"location":"architecture/device_rest_api/rest_api/#request-class-json-structure_26","title":"Request Class JSON Structure","text":"<p>No body</p>"},{"location":"architecture/device_rest_api/rest_api/#response-class-formats_5","title":"Response Class Formats","text":"Parameter Format user_name 32 byte char array max workspaces workspace_id, workspace_name"},{"location":"architecture/device_rest_api/rest_api/#response-json-format_3","title":"Response json format","text":"<p>Https status code 200 <pre><code>{\n    \"kvm_users_workspaces_list\": [\n        {\n            \"user_name\": \"test\",\n            \"workspaces\": []\n        },\n        {\n            \"user_name\": \"test1\",\n            \"workspaces\": []\n        },\n        {\n            \"user_name\": \"test2\",\n            \"workspaces\": []\n        },\n        {\n            \"user_name\": \"test3\",\n            \"workspaces\": []\n        },\n        {\n            \"user_name\": \"test4\",\n            \"workspaces\": []\n        },\n        {\n            \"user_name\": \"test5\",\n            \"workspaces\": []\n        },\n        {\n            \"user_name\": \"test6\",\n            \"workspaces\": []\n        },\n        {\n            \"user_name\": \"test7\",\n            \"workspaces\": []\n        },\n        {\n            \"user_name\": \"thiru\",\n            \"workspaces\": []\n        },\n        {\n            \"user_name\": \"thirup\",\n            \"workspaces\": []\n        },\n        {\n            \"user_name\": \"admin\",\n            \"workspaces\": [\n                {\n                    \"workspace_name\": \"test\",\n                    \"workspace_id\": \"56\"\n                },\n                {\n                    \"workspace_name\": \"test1\",\n                    \"workspace_id\": \"79\"\n                }\n            ]\n        }\n    ]\n}\n</code></pre> Https status code 400 <pre><code>{\n    \"message\": \"users_files_not_exist\"\n}\n</code></pre> Http status code 500 Server error</p>"},{"location":"architecture/device_rest_api/rest_api/#rest-api-northbound","title":"REST API Northbound","text":"<p>Certain appliance functions require sending information to the Manager.</p> <p>At present there are three northbound services on the manager (specify versions)</p> <ul> <li>LDAP user authentication via MS Active Directory</li> <li>USB extender connection notification</li> <li>API to communicate change in the IP address</li> </ul> <pre><code>bxa-api/devices/kvm/ipaddr\n</code></pre> <pre><code>proposal payload:\n{\n\"ip\": \"10.211.131.83\",\n\"mac\": \"mac addredss\",\n\"netmask\": \"netmask\",\n\"primary_dns\": \"dns\",\n\"secondary_dns\": \"dns2\"\n}\n\nproposal response:\n{\n\"code\" : \"200\",\n\"message\": \"success\"\n}\n\n\n{\n\"code\" : \"400 or other\",\n\"message\": \"\"\n}\n</code></pre>"},{"location":"architecture/device_rest_api/rest_api/#ldap-authentication-via-active-directory","title":"LDAP Authentication via Active Directory","text":"<p>Users logging in to the Receiver OSD can be authenticated in terms of their LDAP credentials. In order to facilitate this the Boxilla manager</p>"},{"location":"architecture/device_rest_api/rest_api/#post-ldap-login","title":"POST LDAP login","text":""},{"location":"architecture/device_rest_api/rest_api/#url_69","title":"URL","text":"<p>https://MGR_IP/api/ad/v1/user/login</p>"},{"location":"architecture/device_rest_api/rest_api/#implementation-notes_67","title":"Implementation Notes","text":"<p>PUT call to Manager LDAP server to authenticate user and password</p>"},{"location":"architecture/device_rest_api/rest_api/#request-class-formats_21","title":"Request Class Formats","text":"Parameter Format user 32 byte char array password 32 byte char array mac 50 byte char array"},{"location":"architecture/device_rest_api/rest_api/#request-class-json-structure_27","title":"Request Class JSON Structure","text":"<pre><code>{\n    \"user\": \"john\",\n    \"mac\"     : \"01:1A:35:00:01:77\"\n}\n</code></pre>"},{"location":"architecture/device_rest_api/rest_api/#response-class_1","title":"Response Class","text":"<p>See https://limerick.blackbox.com/Engineering/SoftwareApplication/ENG-0007-068.docx</p>"},{"location":"architecture/device_rest_api/rest_api/#ldap-authentication-status","title":"LDAP authentication status","text":""},{"location":"architecture/device_rest_api/rest_api/#url_70","title":"URL","text":"<p>https://MGR_IP/api/ad/v1/user/auth_status</p>"},{"location":"architecture/device_rest_api/rest_api/#implementation-notes_68","title":"Implementation Notes","text":"<p>GET call to Manager LDAP server to check the status of the login. The appliance polls this endpoint once per second until a success acknowledgment is received or a 30s timeout has elapsed.</p>"},{"location":"architecture/device_rest_api/rest_api/#request-class-formats_22","title":"Request Class Formats","text":"Parameter Format user 32 byte char array mac 50 byte char array"},{"location":"architecture/device_rest_api/rest_api/#request-class-json-structure_28","title":"Request Class JSON Structure","text":"<pre><code>{\n    \"user\": \"john\",\n    \"mac\"     : \"01:1A:35:00:01:77\"\n}\n</code></pre>"},{"location":"architecture/device_rest_api/rest_api/#response-class_2","title":"Response Class","text":"<p>See https://limerick.blackbox.com/Engineering/SoftwareApplication/ENG-0007-068.docx</p>"},{"location":"architecture/device_rest_api/rest_api/#post-ldap-authentication-complete","title":"POST LDAP authentication complete","text":""},{"location":"architecture/device_rest_api/rest_api/#url_71","title":"URL","text":"<p>https://MGR_IP/api/ad/v1/user/auth_complete</p>"},{"location":"architecture/device_rest_api/rest_api/#implementation-notes_69","title":"Implementation Notes","text":"<p>POST call to Manager LDAP server to notify that the custom database file has been downloaded successfully and that the login process has completed.</p>"},{"location":"architecture/device_rest_api/rest_api/#request-class-formats_23","title":"Request Class Formats","text":"Parameter Format user 32 byte char array mac 50 byte char array"},{"location":"architecture/device_rest_api/rest_api/#request-class-json-structure_29","title":"Request Class JSON Structure","text":"<pre><code>{\n    \"user\": \"john\",\n    \"mac\"     : \"01:1A:35:00:01:77\"\n}\n</code></pre>"},{"location":"architecture/device_rest_api/rest_api/#response-class_3","title":"Response Class","text":"<p>See https://limerick.blackbox.com/Engineering/SoftwareApplication/ENG-0007-068.docx</p>"},{"location":"architecture/device_rest_api/rest_api/#connection-status","title":"Connection Status","text":"<p>The management system (Boxilla) allows the user to configure bonded connections which require USB extender hardware. On launching this type of connection, the appliance must notify the manager that the connection establishment is successful. When the manager receives notification from the appliance, it proceeds to launch the bonded connection by calling a REST endpoint defined on the USB Extender operating system.</p>"},{"location":"architecture/device_rest_api/rest_api/#post-connection","title":"POST Connection","text":""},{"location":"architecture/device_rest_api/rest_api/#url_72","title":"URL","text":"<p>POST https://MGR_IP/api/ connection_status/v1/connection</p>"},{"location":"architecture/device_rest_api/rest_api/#implementation-notes_70","title":"Implementation Notes","text":"<p>POST call to Manager USB Extender server to notify that a connection has been established.</p> <p>Note: In shared mode, the POST connection is sent only if there is video data passing via the transmitter.</p>"},{"location":"architecture/device_rest_api/rest_api/#request-class-formats_24","title":"Request Class Formats","text":"Parameter Format user 32 byte char array connection name 255 byte char array mac 50 byte char array"},{"location":"architecture/device_rest_api/rest_api/#request-class-json-structure_30","title":"Request Class JSON Structure","text":"<pre><code>{\n    \"user\": \"john\",\n    \"connection_name\": \"usb_ext_tx_10.211.128.77\",\n    \"mac\"     : \"01:1A:35:00:01:77\"\n}\n</code></pre>"},{"location":"architecture/device_rest_api/rest_api/#response-class_4","title":"Response Class","text":"<p>See https://limerick.blackbox.com/Engineering/SoftwareApplication/ENG-0007-068.docx</p>"},{"location":"architecture/device_rest_api/rest_api/#delete-connection","title":"DELETE Connection","text":""},{"location":"architecture/device_rest_api/rest_api/#url_73","title":"URL","text":"<p>DELETE https://MGR_IP/api/ connection_status/v1/connection</p>"},{"location":"architecture/device_rest_api/rest_api/#implementation-notes_71","title":"Implementation Notes","text":"<p>DELETE call to Manager USB Extender server to notify that a connection has been terminated.</p>"},{"location":"architecture/device_rest_api/rest_api/#request-class-formats_25","title":"Request Class Formats","text":"Parameter Format mac 50 byte char array exit reason 16 byte char array"},{"location":"architecture/device_rest_api/rest_api/#request-class-json-structure_31","title":"Request Class JSON Structure","text":"<pre><code>{\n    \"mac\"        : \"01:1A:35:00:01:77\",\n    \"exit_reason\": \"255\"\n}\n</code></pre>"},{"location":"architecture/device_rest_api/rest_api/#response-class_5","title":"Response Class","text":"<p>See https://limerick.blackbox.com/Engineering/SoftwareApplication/ENG-0007-068.docx</p>"},{"location":"architecture/device_rest_api/rest_api/#user-login-status","title":"User Login Status","text":"<p>When a user logs in or logs out of the OSD, the Rx appliance sends a PUT https call to Boxilla\u2019s log in status server. This will allow Boxilla to maintain an accurate record of the user that is logged in to the OSD.</p>"},{"location":"architecture/device_rest_api/rest_api/#post-log-in-status","title":"POST log in status","text":""},{"location":"architecture/device_rest_api/rest_api/#url_74","title":"URL","text":"<p>(Subject to change)</p> <p>POST https://MGR_IP/bxa-api/users/kvm/status</p>"},{"location":"architecture/device_rest_api/rest_api/#implementation-notes_72","title":"Implementation Notes","text":"<p>PUT call to Manager log in status server. Table 9.3 relates a code to each log in or log out type.</p>"},{"location":"architecture/device_rest_api/rest_api/#request-class-formats_26","title":"Request Class Formats","text":"Parameter Format user 32 byte char array(max) mac 50 byte char array context* 32 byte char arrya(max)"},{"location":"architecture/device_rest_api/rest_api/#request-class-json-structure_32","title":"Request Class JSON Structure","text":"<pre><code>{\n    \"user\": \"john\",\n    \"mac\"     : \"01:1A:35:00:01:77\",\n    \"context\" : \"MANUAL_LOGIN\"\n}\n</code></pre> <p>*fixed to \"MANUAL_LOGIN\" for v1.0.6</p>"},{"location":"architecture/device_rest_api/rest_api/#response-class_6","title":"Response Class","text":"<p>See Ref 4 https://limerick.blackbox.com/Engineering/SoftwareApplication/ENG-0007-100.docx</p>"},{"location":"architecture/device_rest_api/rest_api/#delete-log-in-status","title":"DELETE log in status","text":""},{"location":"architecture/device_rest_api/rest_api/#url_75","title":"URL","text":"<p>DELETE https://MGR_IP/bxa-api/users/kvm/status</p>"},{"location":"architecture/device_rest_api/rest_api/#implementation-notes_73","title":"Implementation Notes","text":"<p>PUT call to Manager log in status server. Table 9.3 relates a code to each log in or log out type.</p>"},{"location":"architecture/device_rest_api/rest_api/#request-class-formats_27","title":"Request Class Formats","text":"Parameter Format user 32 byte char array(max) mac 50 byte char array"},{"location":"architecture/device_rest_api/rest_api/#request-class-json-structure_33","title":"Request Class JSON Structure","text":"<pre><code>{\n    \"user\": \"john\",\n    \"mac\"     : \"01:1A:35:00:01:77\"\n}\n</code></pre>"},{"location":"architecture/device_rest_api/rest_api/#response-class_7","title":"Response Class","text":"<p>See Ref 4 https://limerick.blackbox.com/Engineering/SoftwareApplication/ENG-0007-100.docx</p>"},{"location":"architecture/device_rest_api/rest_api_report/","title":"Test Report for REST API","text":"<pre><code>The following information needs to be integrated\n\n\n\n\n\n\n\n\nREST API Support in DeskVue\n\n\n\n\n\n\nDocument Number: ENG-0008-049\nAuthor: Sanjay Poptani\nStatus: Draft\nRev: 0.1\nDate: 10/04/2023\nThis Tech Note details the GET and PUT commands on DeskVue     \n\n\n\n\n\nMaster Document Revision History\n\nDate    Version Description Author / Editor\n10/04/23\n0.1 Initial Draft   Sanjay Poptani\n\n\n\n2   Introduction\n\nThis Technote will illustrate REST API which are supported in DeskVue, it also represent the sample output of commands in upcoming sections.\nIt lists the supported command with proper output, commands with empty responses and lists the not supported API.\nREST API commands are differentiated based on GET/PUT request in this document.\n\n3   GET commands on DeskVue\n\nBelow GET commands will return proper response.\n1.  https://10.231.132.41:8888//version\n2.  https://10.231.132.41:8888//statistics/facts/system_facts\n3.  https://10.231.132.41:8888//control/process?process_name=init\n4.  https://10.231.132.41:8888//control/user\n5.  https://10.231.132.41:8888//control/configuration/bonded_group\n6.  https://10.231.132.41:8888//control/diags/?file_id=2\n7.  https://10.231.132.41:8888//control/diags/loglevel\n8.  https://10.231.132.41:8888//control/diags/debugmode\n\nBelow GET commands will return empty response.\n1.  https://10.231.132.41:8888//statistics/facts/video_facts\n2.  https://10.231.132.41:8888//statistics/facts/audio_facts\n3.  https://10.231.132.41:8888//statistics/facts/usb_audio_facts\n4.  https://10.231.132.41:8888//statistics/facts/analog_audio_facts\n5.  https://10.231.132.41:8888//alerts \n6.  https://10.231.132.41:8888//statistics/facts/usb_facts\n7.  https://10.231.132.41:8888//statistics/authentication\n8.  https://10.231.132.41:8888//statistics/active_connections\n9.  https://10.231.132.41:8888//statistics/previous_connections\n10. https://10.231.132.41:8888//statistics/connection_control\n11. https://10.231.132.41:8888//statistics/facts/network/physical\n12. https://10.231.132.41:8888//control/configuration/rx_settings\n13. https://10.231.132.41:8888//control/diags/files\n\nBelow GET commands will return resource not found.(NOT supported)\n1.  https://10.231.132.41:8888//statistics/facts/network/toe_connection\n2.  https://10.231.132.41:8888//control/configuration/tx_settings\n3.  https://10.231.132.41:8888//control/configuration/rx_edid_head_1\n4.  https://10.231.132.41:8888//control/configuration/rx_edid_head_2\n5.  https://10.231.132.41:8888//control/configuration/tx_clone_name_1\n6.  https://10.231.132.41:8888//control/configuration/tx_clone_name_2\n7.  https://10.231.132.41:8888//control/configuration/zone\n8.  https://10.231.132.41:8888//system/capabilities\n\n\n4   PUT commands on DeskVue\n\nBelow PUT commands will return proper response.\n1.  https://10.231.132.41:8888//control/user \n2.  https://10.231.132.41:8888//control/configuration/bonded_group \n3.  https://10.231.132.41:8888//control/connections  - PUT Force Connection\n4.  https://10.231.132.41:8888//control/connections - PUT Force Connection Secure\n\nBelow PUT commands will return resource not found.(NOT supported)\n1.  https://10.231.132.41:8888//corrib/control/connections - PUT Connection(Legacy)\n2.  https://10.231.132.41:8888//corrib/control/connections -  PUT Connection secure\n3.  https://10.231.132.41:8888//corrib/control/connections - PUT Terminate Connection Legacy\n4.  https://10.231.132.41:8888//corrib/control/connections - PUT Terminate secure Connection Legacy\n5.  https://10.231.132.41:8888//corrib/control/connections - PUT Terminate Connection No OSD\n6.  REST API PUT Terminate with Exit Code Commands \u2013 Not available at page\n7.  https://10.231.132.41:8888//control/configuration/rx_setting \n8.  https://10.231.132.41:8888//control/configuration/tx_setting\n9.  https://10.231.132.41:8888//control/configuration/tx_edid_table_1\n10. https://10.231.132.41:8888//control/configuration/tx_edid_table_2\n11. https://10.231.132.41:8888//control/diags/debugmode:value=on/off\n12. https://10.231.132.41:8888//control/configuration/timers_configuration\n\nBelow PUT commands will return error messages\n1.  https://10.231.132.41:8888//control \u2013 PUT Flush\n2.  https://10.231.132.41:8888//control/configuration/zone \n3.  https://10.231.132.41:8888//control/diags/loglevel/?level=7\n4.  https://10.231.132.41:8888//user/login\n5.  https://10.231.132.41:8888//control/led\n\n\n\n\n5   Sample output for GET commands\n\nhttps://10.231.132.41:8888//version\n{\n    \"api_version\": \"1.0.10\",\n    \"software_version\": \"V1.0.0_r0002\",\n    \"manufacturing_partnumber\": \"300-115-001\",\n    \"serial_number\": \"SEBB22C89823\",\n    \"product_type\": \"Sdkvm\",\n    \"product_brand\": \"Black Box\",\n    \"product_configuration\": \"Multi Head\",\n    \"system_architecture\": \"x86_64\",\n    \"kernel_version\": \"5.15.0-56-generic\",\n    \"pc_model\": \"SDKVMREFERENCE\",\n    \"sw_compatability\": \"ffffffff\",\n    \"ethernet_speed\": 1000,\n    \"discovery_status\": \"Managed\",\n    \"manager_mac\": \"00:8c:10:1c:c6:4a\"\n}\nhttps://10.231.132.41:8888//statistics/facts/system_facts\n{\n    \"kvm_system_facts\": [\n        {\n            \"id\": 0,\n            \"mac\": \"48:21:0b:35:32:74\",\n            \"total memory\": 15951600,\n            \"free memory\": 13129008,\n            \"total disk\": 239290.0,\n            \"free disk\": 210287.0,\n            \"uptime\": 887,\n            \"load_avg_1min\": 0.0751953125,\n            \"load_avg_5min\": 0.06396484375,\n            \"load_avg_15min\": 0.04736328125,\n            \"capture_time\": 0.0,\n            \"crcs\": 0.0,\n            \"temperature\": 0,\n            \"user_response\": 510.0,\n            \"timestamp\": 829183756\n        }\n    ]\n}\nhttps://10.231.132.41:8888//statistics/facts/video_facts\nKVM_Video_Facts: []\n\nhttps://10.231.132.41:8888//statistics/facts/audio_facts\n{\n    \"kvm_audio_facts\": []\n}\nhttps://10.231.132.41:8888//statistics/facts/usb_audio_facts\n{\n    \"kvm_usb_audio_facts\": []\n}\nhttps://10.231.132.41:8888//statistics/facts/analog_audio_facts\n{\n    \"kvm_analog_audio_facts\": []\n}\nhttps://10.231.132.41:8888//statistics/facts/usb_facts\n{\n    \"kvm_usb_facts\": []\n}\nhttps://10.231.132.41:8888//alerts\n{\n    \"kvm_alerts\": []\n}\nhttps://10.231.132.41:8888//statistics/authentication\n{\n    \"kvm_authentication_stats\": []\n}\nhttps://10.231.132.41:8888//statistics/active_connections\n{\n    \"kvm_active_connections\": []\n}\nhttps://10.231.132.41:8888//statistics/previous_connections\n{\n    \"kvm_previous_connections\": []\n}\nhttps://10.231.132.41:8888//statistics/connection_control\n{\n    \"kvm_connection_control_stats\": []\n}\nhttps://10.231.132.41:8888//statistics/facts/network/physical\n{\n    \"kvm_network_physical_facts\": []\n}\nhttps://10.231.132.41:8888//statistics/facts/network/toe_connection\nResource not found\nhttps://10.231.132.41:8888//control/process?process_name=init\n{\n    \"init\": 1\n}\nhttps://10.231.132.41:8888//control/configuration/tx_settings\nResource not found\nhttps://10.231.132.41:8888//control/configuration/rx_settings\n{}\nhttps://10.231.132.41:8888//control/user\n{\n    \"user_name\": \"Bob User\"\n}\nhttps://10.231.132.41:8888//control/configuration/rx_edid_head_1\nResource not found\n\nhttp://10.211.129.241:8000/architecture/REST_API/5._REST_API_GET_Endpoints/5.20_GET_Reciever_EDID_TableHead2/  url might be wrong\nhttps://10.231.132.41:8888//control/configuration/rx_edid_head_\nResource not found\n\nhttps://10.231.132.41:8888//control/configuration/tx_clone_name_1\nResource not found\nhttps://10.231.132.41:8888//control/configuration/tx_clone_name_2\nResource not found\nhttps://10.231.132.41:8888//control/configuration/zone\nsocket hang up \nhttps://10.231.132.41:8888//control/configuration/bonded_group\n{\n    \"bonded_group\": \"The name of the bonded group\"\n}\nhttps://10.231.132.41:8888//system/capabilities\nResource not found\nhttps://10.231.132.41:8888//control/diags/files\nDir not found!\nhttps://10.231.132.41:8888//control/diags/?file_id=2\n{\n    \"2\": \"Contents is NULL!\"\n}\nlogs for above api \nMar 30 11:07:57 SDKVMREFERENCE webservice: SESSION:0#012 is_valid_number: starting\nMar 30 11:07:57 SDKVMREFERENCE webservice: SESSION:0#012 is_valid_number: Valid Number! 0\nMar 30 11:07:57 SDKVMREFERENCE webservice: SESSION:0#012 ws_get_file: Parameters were decoded [file_id] [2]\nMar 30 11:07:57 SDKVMREFERENCE webservice: SESSION:0#012 ws_get_file: Key value: [2]\nMar 30 11:07:57 SDKVMREFERENCE webservice: SESSION:0#012 ws_get_file: File Name: [2]\nMar 30 11:07:57 SDKVMREFERENCE webservice: SESSION:0#012 sdkvm_su_get_contents: File 2 does not exist!\nMar 30 11:07:57 SDKVMREFERENCE webservice: SESSION:0#012 get_file_content: (null)\n\nhttps://10.231.132.41:8888//control/diags/loglevel\nLOG_LEVEL not found!\n\nhttps://10.231.132.41:8888//control/diags/debugmode\nENABLE DEBUG off\n\nhttps://10.231.132.41:8888//control/configuration/timers_configuration\nResource not found\n\n\n\n6   Sample output for PUT commands\n\nhttps://10.231.132.41:8888//control/user\n{\n    \"action\": \"log_off\"\n}\nok\nhttps://10.231.132.41:8888//corrib/control/connections\nResource not found\nhttps://10.231.132.41:8888//corrib/control/connections\n{\n    \"action\": \"make_connection\",\n    \"user\": \"demo\",\n    \"transmitter\": \"10.231.132.23\"\n}\nResource not found\n\nhttps://10.231.132.41:8888//control/connections\n{\n    \"action\": \"force_connection\",\n    \"connection\": \"default-connection\",   \n    \"user\": \"cb-user\"\n}\nok\nREST API PUT Force Connection Commands\nREST API PUT Force Connection Secure Commands\n\nhttps://10.231.132.41:8888//corrib/control/connections\n{\n    \"action\": \"terminate_connection\"\n}\nResource not found\nREST API PUT Terminate Commands\nREST API PUT Terminate Secure Commands\nboth above commands are same \n\nhttps://10.231.132.41:8888//corrib/control/connections\n{\n    \"action\": \"terminate_connection_no_osd\"\n}\nResource not found\nREST API PUT Terminate with Exit Code Commands\nnot found\nhttps://10.231.132.41:8888//control\n{\n    \"action\": \"flush_active_connection\"\n}\nServer Error\nhttps://10.231.132.41:8888//control/configuration/rx_setting\n{\n       \"power_mode\": 1\n       \"http_enable\": 1\n       \"rx_scaling\": 1\n}\nResource not found\nhttps://10.231.132.41:8888//control/configuration/tx_setting\n{\n    \"video_quality\": 1,\n    \"video_source_optimisation\": 1,\n    \"mouse_keyboard_timeout\":1,\n    \"hid\": 1,\n    \"head_1_edid\":5\n    \"audio_source\":1\n\n}\nResource not found\nhttps://10.231.132.41:8888//control/configuration/tx_edid_table_1\nResource not found\nhttps://10.231.132.41:8888//control/configuration/tx_edid_table_2\nResource not found\nhttps://10.231.132.41:8888//control/configuration/zone\n{\n   \"zone\": \"ZONE-1A\"\n}\nError: socket hang up\nhttps://10.231.132.41:8888//control/configuration/bonded_group\n{\n   \"bonded_group\": \"bonded-group-1A\"\n}\nstatus 200 ok \nhttps://10.231.132.41:8888//control/diags/loglevel/?level=7\nfailed\nhttps://10.231.132.41:8888//control/diags/debugmode:value=on/off\nResource not found\nhttps://10.231.132.41:8888//user/login\n{\n            \"user\": \"kvm_user\",\n            \"force\": 1,\n            \"ad\": 1,\n            \"md5sum\": \u201ca7d794f4a687efd2094c589714e310e3\u201c                       \n}\nstatus:400 bad request\nhttps://10.231.132.41:8888//control/led\n{\n     \u201caction\u201d: \u201cled_enable\u201d\n}\nServer Error\nhttps://10.231.132.41:8888//control/configuration/timers_configuration\nResource not found\n\n\n\n7   References\n\n1.  Introduction - Blackbox Embedded Documentation (WORK IN PROGRESS)\n2.  Rest API GET Endpoints - Blackbox Embedded Documentation (WORK IN PROGRESS)\n3.  REST API PUT Commands - Blackbox Embedded Documentation (WORK IN PROGRESS)\n</code></pre>"},{"location":"architecture/device_rest_api/rest_api_zone_support/","title":"REST API Zone Support","text":""},{"location":"architecture/device_rest_api/rest_api_zone_support/#master-document-revision-history","title":"Master Document Revision History","text":"Date Version Description Author/Editor March 9th 2020 0.1 First Draft Marcus McInerney March 9th 2020 0.2 Second Draft Marcus McInerney"},{"location":"architecture/device_rest_api/rest_api_zone_support/#introduction","title":"Introduction","text":"<p>In order to optimise management of KVM systems composed of large numbers of appliances, Boxilla will allow managed appliances to be assigned to specific zones. The managed Rx will support a REST endpoint which will allow the manager to:</p> <ul> <li>Set a Zone</li> <li>Get a Zone</li> <li>Delete a zone</li> </ul> <p>The zone name will be used to download a zone-specific XML database.  The zone-specific XML database contains a shortened list of connections that are zone-specific. </p>"},{"location":"architecture/device_rest_api/rest_api_zone_support/#references","title":"References","text":"<p>Ref 1. ENG-0007-099</p>"},{"location":"architecture/device_rest_api/rest_api_zone_support/#overview","title":"Overview","text":"<p>The zone will be assigned over REST via JSON request structure. Likewise, the zone will be read from the appliance over REST via a JSON response structure. </p>"},{"location":"architecture/device_rest_api/rest_api_zone_support/#specification","title":"Specification","text":"<p>This section specifies Rx appliance zone support. This will be implemented in Appliance firmware v5.6. </p> <ol> <li>The PUT, GET and DELETE zone endpoints are specific to the Rx appliance.</li> <li>The zone name is stored in the Rx sqlite3 database</li> <li>The Rx requires that a valid CloudDataA.xml and its md5sum checksumA be present in /usr/local/gui_files. Depending on the state of the Rx, whether it is in a Zone or whether an AD user is logging into its OSD, the Rx will fetch a different XML database from Boxilla. The source name of this file (its name on the Boxilla system) may vary but it is always written to /usr/local/gui_files/CloudDataA.xml. The same applied for checksumA.</li> <li>If the Zone entry in the Rx sqlite3 database is empty then any subsequent SCP of the XML database will use the following source file: <p>/mnt/perm/CloudDataA.xml</p> </li> <li>If the Zone entry in the Rx sqlite3 database is empty then any subsequent SCP of the XML database checksum will use the following source file: <p>/mnt/perm/checksumA</p> </li> <li>Once the zone is set on the Rx appliance, every subsequent SCP of the XML database from the manager will require that the zone name is part of the the source file in the SCP process. For example, if the zone name is \u201czone-45\u201d, the source file will be: <p>/mnt/perm/Zone_-zone-45-_DataA.xml</p> </li> <li>Once the zone is set on the Rx appliance, every subsequent SCP of the XML database checksum file from the manager require that the zone name is part of the the source file in the SCP process. For example, if the zone name is \u201czone-45\u201d, the source file will be: <p>/mnt/perm/Zone_-zone-45-_checksumA</p> </li> <li>When the manager DELETES a zone the sqlite3 database \u201cZone\u201d entry will be removed.  This will cause the Rx appliance to use the source names specified in 3 and 4 above. </li> <li>The scheme to update the XML database is identical to that implemented in Rx  appliance V5.5. When the manager sets or deletes the zone on the Rx appliance, this does not cause an update of the XML database. In order to obtain the Zone-specific XML database, either of the following must occur:<ul> <li>A non-AD user must log-out and log back in to the Rx appliance.</li> <li>The appliance must be rebooted</li> </ul> </li> <li>When Boxilla changes the Rx Zone via REST there is no action triggered to download a Zone specific XML file. The user must log out and log back in in order to obtain the Zone specific XML file</li> <li>If the user logging in is an AD user then the AD user specific XML file is downloaded, not the Zone specific XML file. This is the case regardless of the state of the Zone entry in the sqlite3 db. For AD users that are logging into a Zoned RX, all necessary filtering (what connections to include in the XML file) is carried out by Boxilla.</li> <li>If the Zone is set on the Appliance but for some reason the SCP of the Zone xml file and or checksum fails then an error will be logged to syslog and the login dialog of the OSD will appear.</li> <li>On appliance downgrade: The sqlite database is overwritten with the default database and the patch to create the Zone entry is not applied. </li> <li>On appliance upgrade: The patch is not applied and the sqlite Zone entry is maintained.</li> <li>On appliance restore: The sqlite database is overwritten with the default database and the patch to create the Zone</li> </ol>"},{"location":"architecture/device_rest_api/rest_api_zone_support/#zone-name","title":"Zone name","text":"<p>The zone name has the following restrictions: </p> <ul> <li>32 byte character (maximum)</li> <li>Alphanumeric</li> <li>\u2018.\u2019and \u2018-\u2018</li> </ul> <p>When copying an XML file from Boxilla the zoned RX must specify the XML file and its checksum as described in the sections below. The destination filenames for the XML file and its checksum are: </p> <ul> <li>CloudDataA.xml</li> <li>checksumA.xml</li> <li>The same principle applies when downloading the Active Directory specific XML file and its checksum. </li> </ul>"},{"location":"architecture/device_rest_api/rest_api_zone_support/#rx-xml-database","title":"Rx XML database","text":"<p>Once the zone is set on the Rx, the source file (the file name used to SCP the XML database file from Boxilla) takes the following format:</p> <p>/mnt/perm/Zone_--_DataA.xml."},{"location":"architecture/device_rest_api/rest_api_zone_support/#rx-xml-database-checksum-file","title":"Rx XML database checksum file","text":"<p>Once the zone is set on the Rx, the source file (the file name used to SCP the XML database checksum file from Boxilla) takes the following format:</p> <p>/mnt/perm/Zone_--_checksumA.xml."},{"location":"architecture/device_rest_api/rest_api_zone_support/#zone-representation-of-osd-mainwindow","title":"Zone representation of OSD MainWindow","text":""},{"location":"architecture/device_rest_api/rest_api_zone_support/#zone-set","title":"Zone set","text":"<p>The following image shows OSD representation of the Zone when it is set </p> <p></p>"},{"location":"architecture/device_rest_api/rest_api_zone_support/#zone-not-set","title":"Zone not set","text":"<p>When the Zone is not set there will be no text label on bottom r.h.s. of OSD.</p>"},{"location":"architecture/device_rest_api/rest_api_zone_support/#implementation","title":"Implementation","text":"<p>Appliance version 5.6 will support two REST endpoints to </p>"},{"location":"architecture/device_rest_api/rest_api_zone_support/#set-zone","title":"SET zone","text":""},{"location":"architecture/device_rest_api/rest_api_zone_support/#verb","title":"Verb","text":"<p>Setting the zone requires the use of the PUT verb.</p>"},{"location":"architecture/device_rest_api/rest_api_zone_support/#url","title":"URL","text":"<p>https://IP:port_number/control/configuration/zone</p>"},{"location":"architecture/device_rest_api/rest_api_zone_support/#request-json-structure","title":"Request JSON structure","text":"<pre><code>{\n    \"zone\": \"ZONE-A1\"\n}\n</code></pre>"},{"location":"architecture/device_rest_api/rest_api_zone_support/#response-json-structure","title":"Response JSON structure","text":"<p>N/a</p>"},{"location":"architecture/device_rest_api/rest_api_zone_support/#get-zone","title":"GET zone","text":""},{"location":"architecture/device_rest_api/rest_api_zone_support/#verb_1","title":"Verb","text":"<p>Setting the zone requires the use of the GET verb.</p>"},{"location":"architecture/device_rest_api/rest_api_zone_support/#url_1","title":"URL","text":"<p>https://IP:port_number/control/configuration/zone</p>"},{"location":"architecture/device_rest_api/rest_api_zone_support/#request-json-structure_1","title":"Request JSON structure","text":"<p>N/A</p>"},{"location":"architecture/device_rest_api/rest_api_zone_support/#response-json-structure_1","title":"Response JSON structure","text":"<pre><code>{\n    \"zone\": \"ZONE-A1\"\n}\n</code></pre>"},{"location":"architecture/device_rest_api/rest_api_zone_support/#delete-zone","title":"DELETE zone","text":""},{"location":"architecture/device_rest_api/rest_api_zone_support/#verb_2","title":"Verb","text":"<p>Setting the zone requires the use of the DELETE verb.</p>"},{"location":"architecture/device_rest_api/rest_api_zone_support/#url_2","title":"URL","text":"<p>https://IP:port_number/control/configuration/zone</p>"},{"location":"architecture/device_rest_api/rest_api_zone_support/#request-json-structure_2","title":"Request JSON structure","text":"<p>N/A</p>"},{"location":"architecture/documents/Embedded_Software_Design/","title":"Emerald System Reference","text":"<p> Download file </p>"},{"location":"architecture/modifying_remote_app_to_accelerated_handle_video/introduction/","title":"Master Document Revision History","text":"Date Version Description Author/Editor 05/11/2019 0.1 Initial Draft John O\u2019Sullivan 22/01/2020 0.2 Add note on mouse coordinate scaling Darren Bane"},{"location":"architecture/modifying_remote_app_to_accelerated_handle_video/introduction/#introduction","title":"Introduction","text":""},{"location":"architecture/modifying_remote_app_to_accelerated_handle_video/introduction/#purpose","title":"Purpose","text":"<p>The document details the technical requirements to consider when extending the Remote Windows Application to support accelerated connections.</p>"},{"location":"architecture/modifying_remote_app_to_accelerated_handle_video/introduction/#design-and-implementation-constraints","title":"Design and Implementation Constraints","text":"<p>We currently use the RDP protocol for KVM solutions. This is unsuitable for a variety of reasons, so at some future point we hope to replace RDP completely. An implementation of additional functionality to the Remote App should try and decouple itself as much as possible so that when the RDP functionalty is eventually removed the KVM support can be easily moved to a non-rdp based implementation. In practical terms this means:</p> <ul> <li>Any new message layers should be held in a separate library and files and where possible not depend on the main RDP application. There are practical limits to this, but that is the objective.</li> <li>The new decoding logic for KVM streams should be independent of existing RFX decoding logic. It should be implemented as a separate library with minimal dependencies on existing RDP logic.</li> </ul>"},{"location":"architecture/modifying_remote_app_to_accelerated_handle_video/introduction/#definitions-acronyms-and-abbreviations","title":"Definitions, Acronyms and Abbreviations","text":""},{"location":"architecture/modifying_remote_app_to_accelerated_handle_video/introduction/#definitions","title":"Definitions","text":"Term Description 3DES Triple DES (Data Encryption Standard) AC Alternating Current AD Active Directory AAE Audio Application Engine AE Application Engines AES Advanced Encryption Standard AGC Automatic Gain Control ASIC Application Specific Integrated Circuit Barrow Project code for an early version of DTX1000 that is now obsolete BIST BIST In Self-Test CAP CloudAccel Protocol CD Compact Disk CE Conformit\u00e9 Europ\u00e9enne Corrib Project code for current DTX1000/DTX1002 products CMN Certification Model Number CMU Central Management Unit CPU Central Processing Unit CTS Clear to Send Deel Project code for DTX1000SA product \u2013 which is a Corrib unit with audio/serial added with a metal enclosure (versus plastic body for Corrib). HDCP High-bandwidth Digital Content Protection DC Direct Current DES Data Encryption Standard DHCP Dynamic Host Configuration Protocol DNS Domain Name System DPS Detailed Product Specifications DRAM Dynamic Random Access Memory DSP Digital Signal Processing DVI Digital Video Interface EDID Extended Display Identification Data ELMD Entry Level Management Device ESD Electrostatic Discharge EuP Energy using Products FCC Federal Communications Commission FPGA Field Programmable Gate Array FQDN Fully Qualified Domain Name GUI Graphical User Interface HDCP High-bandwidth Digital Content Protection HID Human Interface Devices HTTP Hypertext Transfer Protocol IC Integrated Circuit IEC International Electrotechnical Commission IGMP Internet Group Management Protocol IP Internet Protocol ISTA International Safe Transit Authority JSON JavaScript Object Notation KVM Keyboard, Video, Mouse LAN Local Area Network LED Light Emitting Diode MAC Media Access Control MPS Multipoint Server MRD Marketing Requirements Document MST Multi-Stream Transport NLA Network Level Authentication NOC Network Operating Centre OEM Original Equipment Manufacturer OS Operating System OSD On Screen Display PC Personal Computer PCI Peripheral Component Interconnect PCB Printed Circuit Board PID Peripheral ID PSU Power Supply Unit QIG Quick Install Guide RDP Remote Desktop Protocol RDSH Remote Desktop Session Host (formally Terminal Services) REST Representational state transfer ROHS Restriction Of Hazardous Substances RF Radio Frequency SDI Serial Data Interface SFP Small Form factor Pluggable SSH Secure Shell SST Single Stream Transport TCP Transmission Control Protocol UDP User Datagram Protocol UI User Interface UL Underwriters Laboratories URL Uniform Resource Locator USB Universal Serial Bus VDI Virtual Desktop Infrastructure VESA Video Electronics Standards Association VGA Video Graphics Adaptor VID Vendor ID VM Virtual Machine VNC Virtual Network Computing WAN Wide Area Network WEEE Waste Electrical and Electronic Equipment XML eXensible Markup Language"},{"location":"architecture/modifying_remote_app_to_accelerated_handle_video/introduction/#references","title":"References","text":"<p>Ref 1. Microsoft RDP Base Standard: MS_RDPBCGR Version 48.0</p> <p>Ref 2. InvisaPC DPS \u2013 EDD-0003-001</p> <p>Ref 3. Emerald MRD</p> <p>Ref 4. VESA DisplayPort Standard; Version 1, Revision 2a</p> <p>Ref 5. DVI 1.0 Standard</p> <p>Ref 6. VESA</p> <p>Ref 7. PC99 http://www.microsoft.com/whdc/archive/pcguides.mspx</p> <p>Ref 8. RemoteFX RDP Specification: MS_RDPRFX</p> <p>Ref 9. USB Redirection Specification :MS_RDPEUSB</p> <p>Ref 10. Domain Names - Implementation and Specification https://tools.ietf.org/html/rfc1035</p> <p>Ref 11. Boxilla DPS \u2013 EDD-0007-030.</p>"},{"location":"architecture/modifying_remote_app_to_accelerated_handle_video/contents/connection_scheme_architecture/","title":"Connection Scheme: Architecture Overview and Context","text":"<p>This section attempts to provide an overview of the existing connection scheme.</p>"},{"location":"architecture/modifying_remote_app_to_accelerated_handle_video/contents/connection_scheme_architecture/#constraints","title":"Constraints","text":"<ul> <li>The current KVM connection scheme exists as a non-standard extension to the RDP protocol. It has evolved organically and now has accumulated significant technical debt. The RDP protocol is not suitable for the low latency, high speed, preemptible connections we require in the KVM world. </li> <li>To facilitate the introduction of TOE accelerated video a number of new messages were introduced. This had to be interleaved with the RDP protocol and now effectively leave the RDP protocol in our KVM products non-compliant with the published RDP standards.</li> <li>At some future point we would hope to migrate this new messaging to a proprietary secure protocol to address a number of short comings.<ul> <li>Connection time is slow due to RDP message exchanges.</li> <li>In order to reject a KVM connection one must first accept it.</li> <li>There is no support for efficient pre-emption of connections.</li> <li>There is no support for bonded connections.</li> </ul> </li> <li>It is also worth noting that during the current development cycle many of the message schemes will be changing because of the concurrent development of other features. You will need to stay in sync with these developments or you may find that your implementation is not compatable with the final product. Ideally you should, if possible, not change or port the message implementations but take them directly from the files in which they are defined and add necessary conditional compiles for windows.</li> </ul>"},{"location":"architecture/modifying_remote_app_to_accelerated_handle_video/contents/connection_scheme_architecture/#future-requirements","title":"Future Requirements","text":"<p>Future versions of the Remote App must be capable of connecting to 4K devices. The existing messages that will be used as a reference support both 4K and 2K devices. We suggest you port all of these messages rather than trying to select the 2K subset.</p>"},{"location":"architecture/modifying_remote_app_to_accelerated_handle_video/contents/connection_scheme_architecture/#dependencies","title":"Dependencies","text":"<p>The BlackBox messaging referenced below may have dependencies on a number of system libraries that are coupled to aspects of the appliance hardware. You will need to manage these by implementing a subset of that library or by appropriately stubbing the calls. There is considerable churn in these system libraries occurring at the moment. Any implementation that references these will need to be conscious of these and incorporate the necessary flexability.</p>"},{"location":"architecture/modifying_remote_app_to_accelerated_handle_video/contents/decoder_design/","title":"Decoder Design","text":"<p>The existing decoder design is shown below in Figure 2. The actual video frame decoding logic is fed directly the the TOE. A number of scripts talk to the TOE and Application Engine drivers; these scripts are invokved through the messaging in the next section.</p>"},{"location":"architecture/modifying_remote_app_to_accelerated_handle_video/contents/decoder_design/#implications-for-the-remote-app","title":"Implications for the Remote App","text":"<p>The Remote Application will need to handle the processing of the incoming TCP stream and the video decoding logic in software. In addition to this it wil need to provide the following functionality currently provided by the main Client Application on the decoder:</p> <ul> <li>Implementing the RDP protocol with the message extensions.</li> <li>Creating the RDP connection to initialise a unicast or multi-unicast connection.</li> <li>Managing resolution changes propagated from the Encoder.</li> <li>Managing loss of video synchronisation from the Encoder.</li> <li>Managing the termination of a connection insuring that relevant extension messages are sent on termination so that encoder side state machines are restored to idle, or to a state appropriate to a multi-unicast connection.</li> <li>Handling errors from the encoder side that may lead to anungraceful termination of the connection..</li> </ul> <p></p>"},{"location":"architecture/modifying_remote_app_to_accelerated_handle_video/contents/encoder_design/","title":"Encoder Design","text":"<p>The Remote App connects to an Emerald Encoder; to provide context we will look at the existing Encoder design. You may see the term \u201cTransmitter or Server or TX\u201d used occasionally to refer to the Encoder appliance.</p> <p>The remote application will need to interface with the frame generation state machines of the encoder. These state machines are controlled by the message sequences described in the next section. These message sequences cause the hardware state machines to be initialised, started, paused and stopped as required.</p> <p></p>"},{"location":"architecture/modifying_remote_app_to_accelerated_handle_video/contents/guide_to_decoder_code/","title":"Guide to Decoder Code","text":""},{"location":"architecture/modifying_remote_app_to_accelerated_handle_video/contents/guide_to_decoder_code/#blackbox-messaging-implementation","title":"Blackbox Messaging Implementation","text":"<p>The Blackbox messaging implementation is contained in the director libfreerd-core. 1 The Decoder side functions will need to be ported to the Remote App.</p> <pre><code>\u251c\u2500\u2500 libfreerdp-core\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 activation.c\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 activation.h\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 bb_connection.c\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 bb_connection.h\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 bb_multicast.c\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 bb_multicast.h\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 bb_municast.c\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 bb_municast.h\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 bb_transport.c\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 bb_transport.h\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 bb_unicast.c\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 bb_unicast.h\n</code></pre>"},{"location":"architecture/modifying_remote_app_to_accelerated_handle_video/contents/guide_to_decoder_code/#unicast-send-functions-decoder","title":"Unicast Send Functions - Decoder","text":"<pre><code>boolean bb_unicast_send_client_ready(rdpCloudium *cloud_rdp) {\nboolean bb_unicast_send_new_connection(rdpCloudium *cloud_rdp) {\nboolean bb_unicast_send_fastpath_start(rdpCloudium *cloud_rdp) {\nboolean bb_unicast_send_resolution_set(rdpCloudium *cloud_rdp, uint8 HeadID) {\n</code></pre>"},{"location":"architecture/modifying_remote_app_to_accelerated_handle_video/contents/guide_to_decoder_code/#unicast-send-functions-encoder","title":"Unicast Send Functions - Encoder","text":"<pre><code>boolean bb_unicast_send_accept_connection(freerdp_peer *client) {\nboolean bb_unicast_send_reject_connection(freerdp_peer *client,unsigned int error_code) {\nboolean bb_unicast_send_quantization(freerdp_peer *client) {\nboolean bb_unicast_send_resolution_change(freerdp_peer *client, cmContext *cm_context, int head)\n</code></pre>"},{"location":"architecture/modifying_remote_app_to_accelerated_handle_video/contents/guide_to_decoder_code/#unicast-receive-functions-decoder","title":"Unicast Receive Functions - Decoder","text":"<pre><code>boolean bb_unicast_handle_reject_connection(rdpRdp *rdp, BBoxMessage *msg) {\nboolean bb_unicast_handle_accept_connection(rdpRdp *rdp, BBoxMessage *msg) {\nboolean bb_unicast_handle_resolution_change(rdpRdp *rdp, BBoxMessage *msg) {\nboolean bb_unicast_handle_quantization(rdpRdp *rdp, BBoxMessage *msg) {\nboolean bb_unicast_handle_pdu(rdpRdp *rdp, BBoxMessage *msg) {\n</code></pre>"},{"location":"architecture/modifying_remote_app_to_accelerated_handle_video/contents/guide_to_decoder_code/#unicast-receive-functions-encoder","title":"Unicast Receive Functions- Encoder","text":"<pre><code>boolean bb_unicast_handle_client_ready(freerdp_peer *client, BBoxMessage *msg) {\nboolean bb_unicast_handle_new_connection(freerdp_peer *client, BBoxMessage *recv_msg) {\nboolean bb_unicast_handle_fastpath_start(freerdp_peer *client, BBoxMessage *msg) {\nboolean bb_unicast_handle_resolution_set(freerdp_peer *client, BBoxMessage *msg) {\nboolean bb_unicast_handle_pdu(freerdp_peer* client, BBoxMessage *msg) {\n</code></pre>"},{"location":"architecture/modifying_remote_app_to_accelerated_handle_video/contents/guide_to_decoder_code/#municast-send-functions-encoder","title":"Municast Send Functions - Encoder","text":"<pre><code>boolean bb_municast_send_accept_connection(freerdp_peer *client) {\n\u00a0\u00a0 \u00a0bb_municast_send_quantization(client);\nboolean bb_municast_send_quantization(freerdp_peer *client) {\nboolean bb_municast_send_resolution_change(freerdp_peer *client, int head) {\n</code></pre>"},{"location":"architecture/modifying_remote_app_to_accelerated_handle_video/contents/guide_to_decoder_code/#municast-receive-functions-encoder","title":"Municast Receive Functions - Encoder","text":"<pre><code>boolean bb_municast_handle_client_ready(freerdp_peer *client, BBoxMessage *msg) {\nboolean bb_municast_handle_new_connection(freerdp_peer *client, BBoxMessage *recv_msg) {\nboolean bb_municast_handle_fastpath_start(freerdp_peer *client, BBoxMessage *msg) {\nboolean bb_municast_handle_resolution_set(freerdp_peer *client, BBoxMessage *msg) {\nboolean bb_municast_handle_pdu(freerdp_peer* client, BBoxMessage *msg) {\n</code></pre>"},{"location":"architecture/modifying_remote_app_to_accelerated_handle_video/contents/guide_to_decoder_code/#municast-send-functions-decoder","title":"Municast Send Functions - Decoder","text":"<pre><code>boolean bb_municast_send_client_ready(rdpCloudium *cloud_rdp) {\nboolean bb_municast_send_new_connection(rdpCloudium *cloud_rdp) {\nboolean bb_municast_send_fastpath_start(rdpCloudium *cloud_rdp) {\nboolean bb_municast_send_resolution_set(rdpCloudium *cloud_rdp, uint8 HeadID) {\n</code></pre>"},{"location":"architecture/modifying_remote_app_to_accelerated_handle_video/contents/guide_to_decoder_code/#municast-receive-functions-decoder","title":"Municast Receive Functions - Decoder","text":"<pre><code>boolean bb_municast_handle_accept_connection(rdpRdp *rdp, BBoxMessage *msg) {\nboolean bb_municast_handle_resolution_change(rdpRdp *rdp, BBoxMessage *msg) {\nboolean bb_municast_handle_quantization(rdpRdp *rdp, BBoxMessage *msg) {\nboolean bb_municast_handle_pdu(rdpRdp *rdp, BBoxMessage *msg) {\n</code></pre> <p>Multicast will not tbe supported by the Remote App.</p>"},{"location":"architecture/modifying_remote_app_to_accelerated_handle_video/contents/guide_to_decoder_code/#multicast-send-functions","title":"Multicast Send Functions","text":"<pre><code>boolean bb_multicast_send_client_ready(rdpCloudium *cloud_rdp) {\nboolean bb_multicast_send_new_connection(rdpCloudium *cloud_rdp) {\nboolean bb_multicast_send_fastpath_start(rdpCloudium *cloud_rdp) {\nboolean bb_multicast_send_resolution_set(rdpCloudium *cloud_rdp, uint8 HeadID) {\n</code></pre>"},{"location":"architecture/modifying_remote_app_to_accelerated_handle_video/contents/guide_to_decoder_code/#multiicast-receive-functions","title":"Multiicast Receive Functions","text":"<pre><code>boolean bb_multicast_handle_accept_connection(rdpRdp *rdp, BBoxMessage *msg) {\nboolean bb_multicast_handle_resolution_change(rdpRdp *rdp, BBoxMessage *msg) {\nboolean bb_multicast_handle_quantization(rdpRdp *rdp, BBoxMessage *msg) {\nboolean bb_multicast_handle_pdu(rdpRdp *rdp, BBoxMessage *msg) {\n</code></pre>"},{"location":"architecture/modifying_remote_app_to_accelerated_handle_video/contents/guide_to_decoder_code/#quantization-function","title":"Quantization Function","text":"<p><pre><code>The quantization function sends a 30 byte stream with the quantization values stored on the encoder\nstruct Quantization_s {\n\u00a0\u00a0 \u00a0uint8 quantization[30];\n};\nThese are sent in:\nboolean bb_unicast_send_quantization(freerdp_peer *client) {\nand\nboolean bb_municast_send_quantization(freerdp_peer *client) {\n\nAnd are handled on the decoder in:\u00a0\nboolean bb_multicast_handle_quantization(rdpRdp *rdp, BBoxMessage *msg) {\nand\nboolean bb_unicast_handle_quantization(rdpRdp *rdp, BBoxMessage *msg) {\nfor the case of unicast and municast.\n</code></pre> In the embedded decoder these values are written to a hardware block, in the case of software decoding they will need to be passed to the relevant YUV decoding function.</p>"},{"location":"architecture/modifying_remote_app_to_accelerated_handle_video/contents/guide_to_decoder_code/#message-tracing","title":"Message Tracing","text":"<p>The existing decoder code has a MESSAGE_TRACE define that allows tracing of message sequences. The Remote App must implement a similar feature.</p>"},{"location":"architecture/modifying_remote_app_to_accelerated_handle_video/contents/message_exchange/","title":"Message Exchange","text":"<p>Emerald products contain three connection types:</p> <ul> <li>Unicast \u2013 Standard single stream using a single TCP/IP connection</li> <li>Multiunicast \u2013 A single Transmitter sends multiple unicast streams to one or more receivers operating in shared mode</li> <li>Multicast  - A single Transmitter sends a UDP based, IGMP compliant, reliable multicast stream to one or more transmitters.</li> </ul> <p>Each connection type has different handlers on the RX  and TX appliances. The remote App should implement the handlers for all three types, but only Unicast and Multiunicast will be supported at this point.</p> <p>In addition to these connection types a connection can have attributes:</p> <ul> <li>View Only Mode: A view only connection can observe video in a private of shared session but does not allow the user interact with the mouse or keyboard of the target system</li> <li>Audio \u2013 Not an initial requirement for the Remote App</li> <li>USBR \u2013 Not an initial requirement for the Remote App</li> </ul>"},{"location":"architecture/modifying_remote_app_to_accelerated_handle_video/contents/message_exchange/#message-connection-sequences","title":"Message Connection Sequences","text":"<p>The following sections detail the main message sequences. Each sequence shows an RDP phase followed by a set of non-standard Blackbox messages. As indicated earlier, we hope in the future to remove the RDP protocol from the KVM operation.  The Blackbox messages are the key drivers of the state machines that manage accelerated video and audio.</p>"},{"location":"architecture/modifying_remote_app_to_accelerated_handle_video/contents/message_exchange/#private-connection-accepted","title":"Private Connection \u2013Accepted","text":""},{"location":"architecture/modifying_remote_app_to_accelerated_handle_video/contents/message_exchange/#technical-note","title":"Technical Note","text":"<p>As shown in Table 1 above the RDP phase is followed by a number of BB_messages (shown in yellow). These synchronoise the setup and initialization of video. Messages associated with a private session are called unicast messages.</p> <p>The lines shown high-lighted in green show when the traffic starts running relative to these messages.</p>"},{"location":"architecture/modifying_remote_app_to_accelerated_handle_video/contents/message_exchange/#private-connection-rejected","title":"Private Connection Rejected","text":""},{"location":"architecture/modifying_remote_app_to_accelerated_handle_video/contents/message_exchange/#a-multiunicast-connection-accepted","title":"A Multiunicast Connection Accepted.","text":""},{"location":"architecture/modifying_remote_app_to_accelerated_handle_video/contents/message_exchange/#unicast-resolution-change","title":"Unicast Resolution Change","text":""},{"location":"architecture/modifying_remote_app_to_accelerated_handle_video/contents/message_exchange/#unicast-video-sync-loss","title":"Unicast Video Sync Loss","text":""},{"location":"architecture/modifying_remote_app_to_accelerated_handle_video/contents/message_exchange/#unicast-video-sync-returning","title":"Unicast Video Sync Returning","text":""},{"location":"architecture/modifying_remote_app_to_accelerated_handle_video/contents/message_exchange/#a-resolution-change-during-a-unicast-connection","title":"A resolution change during a Unicast Connection","text":"<p>Table 4 above shows the messages exchanged during a video resolution change. Notice that a resolution change includes a video sync loss followed by a video sync return.</p>"},{"location":"architecture/modifying_remote_app_to_accelerated_handle_video/contents/message_exchange/#a-resolution-change-during-a-municast-connection","title":"A resolution change during a Municast Connection","text":"<p>This is the same as Table 4 above, but municast versions of the message are used.</p>"},{"location":"architecture/modifying_remote_app_to_accelerated_handle_video/contents/message_exchange/#video-sync-loss-during-a-unicast-connection","title":"Video Sync loss during a Unicast Connection","text":"<p>Table 5 above shows video sync loss</p>"},{"location":"architecture/modifying_remote_app_to_accelerated_handle_video/contents/message_exchange/#video-sync-recovery-during-a-unicast-connection","title":"Video Sync recovery during a Unicast Connection","text":"<p>Table 6 above shows video sync returning following a sync loss. The target system will generate a resolution change.</p>"},{"location":"architecture/modifying_remote_app_to_accelerated_handle_video/contents/message_exchange/#video-sync-loss-during-a-municast-connection","title":"Video Sync loss during a Municast Connection","text":"<p>These are similar to those shown in Table 5 and Table 6, but they use the municast variation of the message.</p>"},{"location":"architecture/modifying_remote_app_to_accelerated_handle_video/contents/message_exchange/#connecting-to-a-sleeping-target","title":"Connecting to a sleeping Target","text":"<p>Any activity of the mouse or keyboard should cause the target system to wake and process and Video Sync returning message. This appears as a resolution change to the Remote App using the messages shown in Table 6.</p>"},{"location":"architecture/modifying_remote_app_to_accelerated_handle_video/contents/message_exchange/#absolute-mouse-coordinates","title":"Absolute Mouse Coordinates","text":"<p>A new bit must be set in the flags of mouse events transmitted to the server, PTR_FLAGS_ABSOLUTE (0x0400). Note: this forks the RDP protocol, because this bit is used in later versions of MS RDP for a horizontal mouse scroll wheel.</p> <p>The coordinates sent must be scaled from desktop pixels to the range 0..32767 in both the X and Y axes.</p>"},{"location":"architecture/modifying_remote_app_to_accelerated_handle_video/contents/remote_app_connection_type/","title":"Remote App Connection Type","text":""},{"location":"architecture/modifying_remote_app_to_accelerated_handle_video/contents/remote_app_connection_type/#identifying-emerald-products-types","title":"Identifying Emerald Products Types","text":"<p>Emerald products make use of some existing RDP fields to identify Product Types.</p> <p>The RDP protocol includes two (2 byte) fields osMajorType and  osMinorType in the General Capability Set (TS_GENERAL_CAPABILITYSET); these are used to identify the Blackbox product type The TS_GENERAL_CAPABILITYSET structure is used to advertise general characteristics and is based on the capability set specified in [T128] section 8.2.3. This capability is sent by both client and server.</p> <p>A new entry has been allocated for the Remote App. This will facilitate product specific behavior, if require, on the server side.</p> Value Meaning OSMAJORTYPE_UNSPECIFIED 0x0000 Unspecified platform OSMAJORTYPE_OS2 0x0001 Windows platform OSMAJORTYPE_MACINTOSH 0x0003 Macintosh platform OSMAJORTYPE_UNIX 0x0004 UNIX platform OSMAJORTYPE_IOS 0x0005 iOS platform OSMAJORTYPE_OSX 0x0006 OS X platform OSMAJORTYPE_ANDROID 0x0007 Android platform OSMAJORTYPE_CHROME_OS 0x0008 Chrome OS platform OSMAJORTYPE_BLACKBOX_OS 0x0020 Blackbox Products OSMINORTYPE_UNSPECIFIED 0x0000 Unspecified version OSMINORTYPE_WINDOWS_31X 0x0001 Windows 3.1x OSMINORTYPE_WINDOWS_95 0x0002 Windows 95 OSMINORTYPE_WINDOWS_NT 0x0003 Windows NT OSMINORTYPE_OS2_V21 0x0004 OS/2 2.1 OSMINORTYPE_POWER_PC 0x0005 PowerPC OSMINORTYPE_MACINTOSH 0x0006 Macintosh OSMINORTYPE_NATIVE_XSERVER 0x0007 Native X Server OSMINORTYPE_PSEUDO_XSERVER 0x0008 Pseudo X Server OSMINORTYPE_WINDOWS_RT 0x0009 Windows RT OSMINORTYPE_BLACKBOX_INVISAPC 0x0020 InvisaPC OSMINORTYPE_BLACKBOX_EMERALD_SE 0x0021 Emerald SE OSMINORTYPE_BLACKBOX_EMERALD_4K 0x0022 Emerald 4K OSMINORTYPE_BLACKBOX_ZERO_DONGLE 0x0023 Zero Dongle OSMINORTYPE_BLACKBOX_REMOTE_APP 0x0023 Remote App"},{"location":"architecture/modifying_remote_app_to_accelerated_handle_video/contents/remote_app_connection_type/#wire-data-format","title":"Wire Data format","text":"<p>The actual video data on the wire follows the format shown in Table.</p> <p></p> <p></p>"},{"location":"architecture/modifying_remote_app_to_accelerated_handle_video/contents/remote_app_connection_type/#video-frame-decoding","title":"Video Frame Decoding","text":""},{"location":"architecture/modifying_remote_app_to_accelerated_handle_video/contents/remote_app_connection_type/#encoding-schemes-used","title":"Encoding Schemes Used","text":"<p>For 2K designs, we compress/encode YUV data. The YUV data before it is compressed/encoded is YUV444. Tiles and 64 X 64 pixels.</p>"},{"location":"architecture/modifying_remote_app_to_accelerated_handle_video/contents/remote_app_connection_type/#video-ports","title":"Video Ports","text":"<pre><code>VIDEO PORT = 16384 -&gt; Fast path video for EMDSE and 4K\nVIDEO PORT = 16385 -&gt; Fast path video 2nd channel valid in Navair\nAUDIO_PORT=9000\nRMC_SLAVE_PORT=8000\n</code></pre>"},{"location":"architecture/modifying_remote_app_to_accelerated_handle_video/contents/remote_app_connection_type/#quantization-data","title":"Quantization Data","text":"<p>Quantization data sent from the Encoder to the Decoder during the connection setup determines the amount of compression applied to the video. The quantization data reserved in the meta data section of each frame is not currently used. </p>"},{"location":"architecture/modifying_remote_app_to_accelerated_handle_video/contents/remote_app_connection_type/#meta-data","title":"Meta Data","text":"<p>The Meta Data section of the framedata is not currently used.</p>"},{"location":"architecture/modifying_remote_app_to_accelerated_handle_video/contents/user_case_scenarios/","title":"User Case Scenarios","text":""},{"location":"architecture/modifying_remote_app_to_accelerated_handle_video/contents/user_case_scenarios/#attempting-to-connect-to-a-shared-session-in-private-mode","title":"Attempting to connect to a shared session in private mode","text":"<p>The Remote App should dislay a message:</p> <p>User  is attempting to connect to a private connection  to a shared session. <p>The session should be terminaled gracefully.</p>"},{"location":"architecture/modifying_remote_app_to_accelerated_handle_video/contents/user_case_scenarios/#attempting-to-connect-to-an-existing-private-session-from-a-second-decoder","title":"Attempting to connect to an existing private session from a second decoder","text":"<p>The Remote App should dislay a message:</p> <p>User  is attempting to connect to a private connection  to a currently active private session. <p>The session should be terminaled gracefully.</p>"},{"location":"architecture/modifying_remote_app_to_accelerated_handle_video/contents/user_case_scenarios/#attempting-to-connect-to-4k-encoder","title":"Attempting to connect to 4K encoder","text":"<p>The Remote App should dislay a message:</p> <p>User  is attempting to connect a connection   to an unsupported device."},{"location":"architecture/modifying_remote_app_to_accelerated_handle_video/contents/user_case_scenarios/#connecting-to-a-sleeping-target","title":"Connecting to a sleeping Target","text":"<p>The Remote App should wake the target and handle the Sync recovery message, unblanking the screen and setting the required resolution.</p>"},{"location":"architecture/mqtt/mqtt/","title":"MQTT Messages General Guidelines","text":"<p>There are three types of messages commands, events and status</p>"},{"location":"architecture/mqtt/mqtt/#commands","title":"Commands","text":"<p>A command is a request to do something The general form for the MQTT command messages are</p> <ul> <li>blackbox/product_family/product/cmd/target_device_id/application_id/request</li> </ul> <p>where:</p> <ul> <li>cmd: is a fixed prefix identifying this message as a command</li> <li>product_family: a name for the product family the originating device belongs to, for example, sdkvm, boxilla, appliance, remote-app</li> <li>product: a name for the specific product, for example, deskvue</li> <li>target_device_id: is the unique ID of the target. osd and workspace_server are two fixed IDs. Individual clients have a different ID per instance, so, for example, an instance of the RDP client would be: rdp-uniqueid and the pcoip client pcoip-uniqueid. The unique ID could be passed to a client application on launch and the MQTT listener of subscriber would then listen on topics related to the unique ID.</li> <li>application_id: An ID that uniquely identifies the application on the target device (optional)</li> <li>request: is the actual operation requested. This could be a request to terminate</li> </ul> <p>An example command topic would be:</p> <pre><code>blackbox/sdkvm/deskvue/cmd/pcoip_client_937654/terminate\n</code></pre> <p>This would be sent from the workspaceserver requesting a specific instance of the PCoIP client to terminate.</p> <p>Commands can also contain json bodies with additional information, for example, the body associated with a \"terminate event\" might contain the following json body:</p> <pre><code>{\n    \"termination_reason\" : \"Requested by user\",\n    \"context_information\" : \"OSD termination\",\n    \"source_device_id\" : \"workspaceserver\"\n}\n</code></pre>"},{"location":"architecture/mqtt/mqtt/#events","title":"Events","text":"<p>The general form for the MQTT event messages are</p> <ul> <li>blackbox/product_family/product/event/event_type</li> </ul> <p>where:</p> <ul> <li>event: is a fixed prefix identifying this message as an event</li> <li>product_family: a name for the product family the originating device belongs to, for example, sdkvm, boxilla, appliance, remote-app</li> <li>product: a name for the specific product, for example, deskvue</li> <li>event_type: The type of event, for example, connection</li> </ul> <p>An example event topic would be:</p> <pre><code>Topic: blackbox/sdkvm/deskvue/event/workspace_server/connection\n</code></pre> <p>This would be sent from a specific instance of the PCoIP client to the workspace server indicating termination.</p> <p>Events can also contain json bodies with additional information. For example, the body associated with a terminate event might contain the following json body:</p> <pre><code>{  \n  \"boxilla\":\"id:08:00:27:c0:a1:9d\",\n  \"client_uid\":\"39fa7b236b\",\n  \"connection_type\":\"transmitter\",\n  \"connection_mode\":\"shared\",\n  \"server_hostname\":\"192.168.1.169\",\n  \"server_port\":3389,\n  \"status\":\"connecting\",\n  \"reason\":\"\",\n  \"error\":\"none\",\n  \"time_stamp\":\"15:32:58 16-01-2023\"\n  }\n</code></pre>"},{"location":"architecture/mqtt/mqtt/#status","title":"Status","text":"<p>The general form for the MQTT event messages are</p> <ul> <li>blackbox/product_family/product/event/application_id/event_context</li> </ul> <p>where:</p> <ul> <li>status: is a fixed prefix identifying this message as a command</li> <li>status_context: is the actual operation requested. This could be the status associated with a request to terminate</li> <li>product_family: a name for the product family the originating device belongs to, for example, sdkvm, boxilla, appliance, remote-app</li> <li>product: a name for the specific product, for example, deskvue</li> <li>application_id: An ID that uniquely identifies the application on the target device</li> <li>event_type: is the type of event.</li> </ul> <p>An example status topic would be:</p> <pre><code>Topic: blackbox/sdkvm/deskvue/status/workspace_server/statistics\n</code></pre> <p>This would be sent from a specific instance of the PCoIP client to the workspace server indicating status information.</p> <p>Status messages can also contain json bodies with additional information. for example, the body associated with a statistics message might contain the following json body:</p> <pre><code>{\n    \"frame_rate\" : \"60\",\n    \"bit_rate\" : \"2200\",\n    \"connection_type\" : \"pcoip\",\n    \"connection_mode\" : \"private\",\n    \"time_stamp\" : \"12:30:09 15/08/2022\"\n}\n</code></pre>"},{"location":"architecture/mqtt/mqtt/#guidelines-for-device-ids","title":"Guidelines for Device IDs","text":"<p>A device ID should uniquely identify a device. Where there are multiple instances of a connection or other software entity it may be appropriate to use something like the PID of the process; however, this method should only be used on software elements (like connections) which are ephemeral in nature and have limited life spans.</p> <p>Other software entities like Servers, OSD components should use a fixed ID because client applications may need to subscribe to their topics and these entities will more than likely run permanently.</p>"},{"location":"architecture/mqtt/mqtt/#wild-cards-and-generic-ids","title":"Wild Cards and Generic IDs","text":"<p>In addition to the default MQTT wild cards, it is also possible to use generic device and applications IDs. For example, we may wish to send a \"terminate\" message to all active clients in a connection.</p> <p>The following are some suggested generic IDs</p> ID Description Comments all_sdkvm_clients a message sent to all sdkvm clients applications all_applications a message sent to all applications on a target not_specified a message sent to no specific targets ID or no specific application ID all_targets a message sent to targets"},{"location":"architecture/mqtt/mqtt/#reserved-application-ids","title":"Reserved Application IDs","text":"ID Description Comments workspace_server the python flask server on the sdkvm osd_sdkvm the flutter based osd on the sdkvm internal_rest_handler the C based Internal Rest Handler"},{"location":"architecture/mqtt/mqtt/#reserved-target-ids","title":"Reserved Target IDs","text":"ID Description Comments deskvue the host running an emerald deskvue instance"},{"location":"architecture/mqtt/mqtt/#enabling-mqtt-on-sdkvm-client-applications","title":"Enabling MQTT on SDKVM Client Applications","text":"<ul> <li>Mqtt is enabled by /mqtt-endpoint:port. For example: /mqtt-endpoint:127.0.0.1:1883</li> <li>There's also the /client-uid:uid that can be added to the launch param to specify a particular client uid.</li> <li>One can listen to all clients by doing something like: mosquitto_sub -h localhost -t blackbox/#</li> </ul>"},{"location":"architecture/mqtt/mqtt_deployment_strategy/","title":"MQTT Deployment Strategy","text":"<ul> <li>How do MQTT entities identify themselves?</li> <li>What is MQTT suitable for?</li> <li>Should we use both MQTT and Rest - what criteria do we use to decide?</li> </ul>"},{"location":"architecture/mqtt/mqtt_deployment_strategy/#requirements","title":"Requirements","text":""},{"location":"architecture/mqtt/mqtt_deployment_strategy/#inter-application-communication","title":"Inter Application Communication","text":"<ul> <li>MQTT serves as the main protocol between applications on an appliance</li> <li>Appliances that need to exchange messages locally should use MQTT to do that.</li> <li>There will be no concept of a single master MQTT server. Each appliance, SDKVM or other entity will have a local MQTT server and MQTT clients on one appliance can also send messages to MQTT endpoints on other appliances by routing the message through the remote MQTT server on the target appliance.</li> </ul>"},{"location":"architecture/mqtt/mqtt_deployment_strategy/#inter-appliance-communication","title":"Inter Appliance Communication","text":"<ul> <li>MQTT should serve as the main protocol between appliances and other Blackbox entities for certain types of communication.</li> <li>Appliances that need to exchange messages with another appliance should use MQTT to do that.</li> </ul>"},{"location":"architecture/mqtt/mqtt_deployment_strategy/#boxilla-appliance-communication","title":"Boxilla Appliance Communication","text":"<ul> <li>MQTT should serve as the main protocol between appliances and other Boxilla for certain types of communication.</li> <li>Appliances that need to exchange messages with Boxilla should use MQTT to do that when appropriate.</li> </ul>"},{"location":"architecture/mqtt/mqtt_deployment_strategy/#target-features","title":"Target Features","text":""},{"location":"architecture/mqtt/mqtt_deployment_strategy/#ssh-refactoring","title":"SSH Refactoring","text":"<p>OSD Specification for SDKVM 1.0.0</p>"},{"location":"architecture/mqtt/mqtt_logging/","title":"MQTT Logging and Configuration","text":"<p>By default the MQTT server will use the default port of 1883.</p> <ul> <li>Logs are stored in /var/log/mosquitto/mosquitto.log</li> <li>Configuration is stored in /etc/mosquitto/mosquitto.conf</li> </ul>"},{"location":"architecture/mqtt/mqtt_logging/#configuration-file","title":"Configuration File","text":"<pre><code># Place your local configuration in /etc/mosquitto/conf.d/\n#\n# A full description of the configuration file is at\n# /usr/share/doc/mosquitto/examples/mosquitto.conf.example\n\npid_file /var/run/mosquitto.pid\n\npersistence true\npersistence_location /var/lib/mosquitto/\n\nlog_dest file /var/log/mosquitto/mosquitto.log\n\nlog_facility 7\nconnection_messages true\nlog_timestamp true\nlog_type error\nlog_type warning\nlog_type notice\nlog_type information\nlog_type debug\nlog_type subscribe\nlog_type unsubscribe\n\ninclude_dir /etc/mosquitto/conf.d\n</code></pre>"},{"location":"architecture/opal/opal/","title":"EMD3000GE (Opal)","text":""},{"location":"architecture/opal/opal/#references","title":"References","text":"<ul> <li>MRD</li> <li>DPS</li> <li>White Paper</li> <li>IHSE Competitive Offering</li> </ul>"},{"location":"architecture/opal/opal/#architecture","title":"Architecture","text":"<ul> <li>Architecture</li> </ul> Architecture Detailed <p>Detecting the area of change</p> <ol> <li>The area of change is aligned to 64 pixel boundaries on the top left and bottom right. One exception to this is the very first frame update to a client. The bottom boundary is reduced by one pixel line to force the RX boxes to go into primary mode since they were occasionally hanging up when switching to secondary mode (aligned) after the 1000 frame check. It is not done on a 64x64 pixel tile basis for determining the region of change.</li> <li>It's not compared tile by tile, it's a full screen comparison for the region of change. It uses pf_capture_compare which locations the top,left, bottom, right rectangular area based on a pixel comparison check. The pixel comparison is simply a memcmp of pixel values in each image. Once that's done, the region is aligned to 64 pixel boundaries and handed off to rfx_encode_messages which will encode that area into 64x64 RFX tiles. rfx_write_message creates the necessary message(s) and then the RFX update is sent off to each client via the SurfaceFrameBits update which is the update_send_surface_frame_bits call which sends off a fastpath surface cmd in the freerdp library.</li> </ol> <p>The RDP encapsulation happens as a call provided by the peer context before calling into a peer context there is a synchronization lock (mutex) that's invoked around the peer contexts (clients connected to opal) to prevent any callbacks that may be invoked by different threads while a message is being sent to a peer.</p> <p>The peers send keyboard and mouse updates to the proxy server. On receiving this, the input is attempted to be acquired for the sending peer; if the input can be acquired, ie, it has not been used for the arbitration time configured, that peer is assigned as the input owner. While the peer is the input owner, if that same peer sends new input, the time is updated so the peer will remain the owner of the input until mouse and keyboard input has stopped for a period. In the case of pcoip, it is translated from RDP to pcoip. When the mouse position is updated by controlling peer the position is also updated back to the other peers that are connected.</p> <p>If another client sends input during this time, the input will be blocked to prevent more than one device from controlling the mouse or keyboard.</p>"},{"location":"architecture/opal/opal/#questions","title":"Questions","text":"<p>We are using AVX2 instruction set on latest Opal FreeRDP Clients, possible 40-60% upload</p> <p>Audio - Through Pulse audio interface because the SDK does not support audio Video - Constraints decoding to a buffer</p> <ul> <li>What is the video front buffer? Last frame sent to clients Image comparison only difference is encoded If new client joins then it always gets the full frame Copy front buffer to back buffer Implemented by jonathan, separate memory spaces, always a memory copy</li> <li>What is the video back buffer?</li> <li>call back sync for update</li> </ul> <p>Client side - connects to remote desktop, PCoIP back buffer, screen data updated call back. Decoded pixel ARGB,</p> <ul> <li>Where is the proxy server and what is its role - How does it connect the PCoIP client to the RX for example?</li> </ul> <p>Client connects proxy over to target VM, RDP data, surface commands, call backs to draw, server thread for each client. PCoIP data can be massaged, mouse key board</p> <ul> <li>In the content of Opal what is the distinction between GFX and RFX? RFX Codec- Legacy Windows Server 2008 GFX - Graphics Pipeline, default for windows 10, H264, 442, 444, lib avcodec</li> <li>What are client server sync locks?</li> <li>How much access do we have to the raw PCoIP output, does it give us a buffer of ARGB data, for example?</li> <li>Is the output rendered to a window that we can brand or decorate or do we have lower level access?</li> <li> <p>How is mouse and keyboard events handled from PCoIP through the Proxy server?</p> </li> <li> <p>Audio, how is it modelled</p> </li> <li>NTS</li> </ul>"},{"location":"architecture/opal/opal/#changes-to-the-freerdp-project","title":"Changes to the FreeRDP Project","text":""},{"location":"architecture/opal/opal/#added-new-connection-types-to-the-proxy-server","title":"Added new connection types to the proxy server","text":"<p>'''C</p> <p>in pf_config.c</p> <p>Added static BOOL pf_config_load_channels(wIniFileini, proxyConfig config) {  config-&gt;PCOIP = pf_config_get_bool(ini, \"Channels\", \"PCOIP\");  config-&gt;GFX = pf_config_get_bool(ini, \"Channels\", \"GFX\");  config-&gt;RFX = pf_config_get_bool(ini, \"Channels\", \"RFX\");</p> <p>Added CONFIG_PRINT_BOOL(config, PCOIP); CONFIG_PRINT_BOOL(config, GFX); CONFIG_PRINT_BOOL(config, RFX);</p> <p>```</p>"},{"location":"architecture/opal/opal/#audio-issues","title":"Audio Issues","text":"<ul> <li>Nothing found in SDK - no audio buffer, so we went to pulse Given some of the av sync challenges you\u2019ve had, I wanted to ask if you\u2019ve heard of AV-Lock?  It hasn\u2019t been available in the SDK, but was added in one of the recent releases.  It may be worth checking out.</li> </ul>"},{"location":"architecture/opal/opal/#pcoip-ultra-av-lock","title":"PCoIP Ultra AV-Lock","text":"<ul> <li>https://www.youtube.com/watch?v=xcC35Ynf7aI</li> <li>https://www.teradici.com/web-help/pcoip_client/linux/22.07/in-session/enhanced_audio_video_sync/</li> <li>https://www.teradici.com/web-help/pcoip_client/linux/22.07/configuration/high_performance_client/</li> </ul>"},{"location":"architecture/opal/opal/#video-issues","title":"Video Issues","text":"<ul> <li>When you connect to target, if enabled with  AVX2 may be as good. Enable Utra Only use non-ultra solution Use Ultra for 4K 30  - Enable with caution With Ultra we use avx2 instruction sets so - thats the question for teradici, no difference on 1920x10180</li> </ul> <p>Bugs, lag, software client in parallel, no delay, RX to VM, significant delay after a period of time. Issue is on RX side. 121 msec 8192 bytes. PCoIP. Windows sens in 32 K chunks, output samples immediately sent. From time to converter, 1 msec or less. Minimised window. ADPCM from Opal? no from now. UDP datagram option</p>"},{"location":"architecture/opal/opal/#clarification-from-teradici","title":"Clarification From Teradici","text":"<p>Hi Tim,</p> <p>I had a few questions regarding the SDK:</p> <p>The documentation on the Core API has the following details: The core library allows an application developer to integrate a PCoIP session directly into an application. The core library facilitates connection to a remote host, decoding PCoIP image data directly into an application supplied frame buffer as well as remoting audio, keyboard and mouse events and supported USB devices. The application is responsible for all of the interactions with the window manager and the local operating system. The following diagram shows how an application would integrate the core library and broker library into a custom application.</p> <p>As you are aware, we use the fact that the video is placed in the Frame Buffer to further process and distribute the video coming from the PCoIP client. One thing I can observe is that the SDK client interface never uses GPU offloading when operating in this mode ( I use the little offloading pixel indicators to determine this). Is this just a consequence of the video being placed in a buffer rather than rendered locally? We have not exposed GPU offload calls in the PCoIP Core API.</p> <p>The extract above mentions \u201cbuffer as well as remoting audio\u201d, but there is no equivalent method for extracting audio. We had anticipated a buffer might be provided with a facility similar to the video. Are there plans to do this? The absence of this facility means audio can only be extracted by hacking at the underlying operating system. Am I missing something here or is there a specific reason why audio is not made available? Audio is handled directly by the SDK libraries and is not exposed to the application. There are no plans in place to change this at this time.   We had a very similar question about this with the development of the Gateway product from Jonathan Barber.</p> <p>When we make a PCoIP connection we automatically logout any existing connections. Is there a way of making a connection in shared mode so that both connections remain active concurrently? Perhaps a server side setting similar to RDP group policies? The SDK is currently not reentrant and does not support multiple connections at the same time.</p> <p>The PCoIP client log indicates average of 57 \u2013 60 FPS. The Opal log indicates average of 30 \u2013 35 FPS (when serving an RX device).</p> <p>Remote App can hit the 58 / 59 FPS mark whereas the RX max seems to be 35 / 36.</p> <p>From Teradici: Apologies for the delayed response.   So, the documentation can create some confusion.   We have a \u2018Core\u2019 SDK, which we no longer make available (and trying to move the few who use it off), and the \u2018Standard\u2019 or \u2018Stock\u2019 SDK.   Bottom line, when you download the SDK, you\u2019re getting the Standard SDK and GPU Offload should be working.    If you can collect the logs then we can take a look at them and see if we can determine what\u2019s going on.</p> <p>From Boxilla Team</p> <p>REST API:</p> <ol> <li>Security:</li> </ol> <p>a.       This API needs to support HTTPS.</p> <p>b.       This API needs to specify the content of the REST API Header.</p> <p>c.       This API needs to support Basic Authentication via Username &amp; Password.</p> <ol> <li>Software Upgrade support.</li> </ol> <p>a.       Consider adding upgrade support via the REST API.</p> <ol> <li>IP Configuration.</li> </ol> <p>a.       Consider adding support to configure the IP address of the OPAL device via the REST API.</p> <ol> <li>Details\\Info.</li> </ol> <p>a.       Add interface to retrieve Model, Serial No, Uptime,  RAM, CPU Load Avg, Disk usage.</p> <ol> <li>Logging.</li> </ol> <p>a.       Rather than providing a log file per server, consider implementing diagnostics similar to the appliances today, this includes retrieving files, setting log levels and debug mode.</p> <ol> <li>Statistics.</li> </ol> <p>a.       Need to define statistics API.</p> <ol> <li>Alerts:</li> </ol> <p>a.       Need to define an Alerts API.</p> <ol> <li>Capability:</li> </ol> <p>a.       Add Capability interface.</p> <ol> <li>Clock, NTP &amp; Time Zone settings:</li> </ol> <p>a.       Consider adding interface to configure Clock, NTP &amp; Time Zone settings.</p> <p>Integration with Boxilla:</p> <pre><code>  To support integration with Boxilla, the following should be considered:\n</code></pre> <ol> <li>Discovery Protocol.</li> </ol> <p>a.       Consider porting the discovery protocol to the Opal product.</p> <pre><code>                                                           i.      This would support discovery, configuration of IP settings and auditing.\n</code></pre>"},{"location":"architecture/remoteapp/remoteapp/","title":"Remote App","text":""},{"location":"architecture/remoteapp/remoteapp/#reference","title":"Reference","text":"<ul> <li>DPS</li> <li>Software Design Document</li> </ul>"},{"location":"architecture/remoteapp/remoteapp/#building","title":"Building","text":""},{"location":"architecture/remoteapp/remoteapp/#instructions-for-building-the-latest-github-version-of-freerdp-on-windows-and-linux","title":"Instructions for Building the latest Github version of freerdp on Windows and Linux","text":"<p>Building latest FreeRDP </p>"},{"location":"architecture/remoteapp/remoteapp/#architecture","title":"Architecture","text":""},{"location":"architecture/remoteapp/remoteapp/#automated-build-system","title":"Automated Build System","text":"<p>Discussion Points on Automated Build System</p>"},{"location":"architecture/remoteapp/remoteapp/#making-a-release","title":"Making a Release","text":""},{"location":"architecture/remoteapp/remoteapp/#location-for-new-releases","title":"Location for New Releases","text":"<p>\\10.211.128.208\\tftpboot\\work\\RemoteApp</p>"},{"location":"architecture/remoteapp/remoteapp/#pre-requisites","title":"Pre-requisites","text":"<p>You need the following checkouts:</p> <ul> <li>svn://svn-server/SoftwareClients/trunk/RDP_Apps/TX/wCloudBBv2</li> <li>svn://10.211.128.12/Zinq/Corrib/branches/cloudRDP/EmeraldRA</li> </ul> <p>Other Prerequisites</p>"},{"location":"architecture/remoteapp/remoteapp/#building-wcloudbb","title":"Building wcloudbb","text":"<ol> <li>Ensure that wCloudBBv2 checkout is clean (no diffs).</li> <li><code>svn update wCloudBBv2</code></li> <li>Edit both version.hs, and in the resource view of VStudio change the version number resources for all .exe and .dlls (you can find these by looking in the builddir\\Release directory).</li> <li>Build everything.</li> <li>cd ../../wCloudBBv2/builddir/Release</li> <li>cp .exe .dll ..</li> <li>/../../rep/EmeraldRA/Emerald/Tx/</li> </ol>"},{"location":"architecture/remoteapp/remoteapp/#new-version-number","title":"New version number","text":"<p>If you are changing the version number you need to change the version number property of EmearaldRAInstaller in VStudio. This generates a new ProductCode (not UpgradeCode). You need to paste this ProductCode into a few places to fix uninstall.</p> <ol> <li>Right click on the installer and chose view file system</li> <li>In there you have the 2 uninstall files</li> <li>User's Program Menu/Black Box/Uninstall is one, Application Folder/Uninstall is another.</li> <li>Just copy that product code in there. <code>\"/x {prod code} /qr\"</code></li> <li>The assembly info file must be updated also. Solution View Emerald Properties gives you the assemblyinfo.cs and template one update the template one and the other changes itself.</li> <li>The svn rev will pick up itsself after the commit</li> </ol>"},{"location":"architecture/remoteapp/remoteapp/#building-emeraldra-installer","title":"Building EmeraldRA &amp; Installer","text":"<ol> <li>Commit these changed files.</li> <li>In EmeraldRA checkout, ensure that checkout is up-to-date and clean (no diffs).</li> <li>In VStudio, close solution and open the one for EmeraldRA.</li> <li>Build default project (Emerald).</li> <li>Make sure it's rebuild in the Emerald RA as it needs to pick up the correct version number from svn. Always check in to svn first then rebuild.</li> <li>Right-click &amp; build EmeraldRAInstaller.</li> <li>There\u2019s an MSI under EmeraldRA/EmeraldRAInstaller/Release</li> <li>Copy it to the shared_area</li> <li>You can install this package for a quick test, then look at the version numbers in it.</li> </ol>"},{"location":"architecture/remoteapp/remoteapp/#release-notes","title":"Release Notes","text":"<p>Write release notes following this template and copy them to shared_area too.</p> <pre><code>Version:\nRemote App x.y.z.svnrev\n- wCloudRDPx.y.zrsvnrev\n- wCloudBB2x.y.z-rsvnrev\n\nLocation:\n\\\\10.211.128.208\\share_area\\RemoteApp\\EmeraldRAx.y.z.svnrev.msi\n\nFeatures:\n&lt;Describe any new features here.&gt;\n\nBug Fixes:\nResolved Bugs:\nBUG-nnnn List fixed bugs here\n\nCompatible versions of software:\nBXA Vx.y.z.svnrev\nTX Vx.y.z_rsvnrev\n\nAdditional info:\n&lt;List known bugs that have not been fixed and unreproducible bugs here.&gt;\n</code></pre>"},{"location":"architecture/remoteapp/remoteapp/#general-information","title":"General Information","text":""},{"location":"architecture/remoteapp/remoteapp/#sample-command-lines-for-kvmclient","title":"Sample Command Lines for KVMCLient","text":"<ul> <li>/boxilla:id:00:8c:10:1c:c6:d4 /log-level:debug +clipboard /sec-rdp /rfx /shared /smart-sizing /v:10.211.133.1</li> <li>/log-level:debug /shared /rfx /sec-rdp /smart-sizing /v:IP_ADDRESS </li> </ul>"},{"location":"architecture/remoteapp/remoteapp/#turning-on-logging","title":"Turning on Logging","text":"<p>Make sure you enable view hidden files  Then, in C:\\Program Files\\BlackBox\\EmeraldRA\\emeraldRALogging.config, change the log level from INFO to DEBUG:</p> <p><pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\" ?&gt;\n&lt;!--Do not edit this configuration file without consulting your BlackBox engineer--&gt;\n&lt;configuration&gt;\n  &lt;configSections&gt;\n    &lt;section name=\"log4net\" type=\"log4net.Config.Log4NetConfigurationSectionHandler, log4net\" /&gt;\n  &lt;/configSections&gt;\n  &lt;log4net&gt;\n    &lt;root&gt;\n     &lt;level value=\"DEBUG\" /&gt;\n      &lt;!--\n      \"INFO\" by default for INFO, WARN, ERROR, FATAL messages, etc.\n      \"DEBUG\" or \"ALL\" to show DEBUG, INFO, WARN, ERROR, FATAL messages, etc.\n      --&gt;\n      &lt;appender-ref ref=\"file\" /&gt;\n    &lt;/root&gt;\n    &lt;appender name=\"file\" type=\"log4net.Appender.RollingFileAppender\"&gt;\n      &lt;!--The log file location can be specified here--&gt;\n      &lt;file value=\"${ALLUSERSPROFILE}\\\\BlackBox\\\\EmeraldRA\\\\log.txt\"/&gt;\n      &lt;appendToFile value=\"true\" /&gt;\n      &lt;rollingStyle value=\"Size\" /&gt;\n      &lt;maxSizeRollBackups value=\"10\" /&gt;\n      &lt;maximumFileSize value=\"10MB\" /&gt;\n      &lt;staticLogFileName value=\"true\" /&gt;\n      &lt;layout type=\"log4net.Layout.PatternLayout\"&gt;\n        &lt;conversionPattern value=\"[%date] (%level) [%thread] %message%newline%exception\"/&gt;\n      &lt;/layout&gt;\n    &lt;/appender&gt;\n  &lt;/log4net&gt;\n&lt;/configuration&gt;\n</code></pre> Logs can be decrypted with the Decrypt.exe application. This is available at: <pre><code>\\\\10.211.128.208\\projects\\EngineeringDocumentation\\CloudLinc\\Product\\Software\\Emerald_Software\\GeneralArchitecture\\RemoteApp\\Decrypt_debug\\Decrypt_debug\n</code></pre></p>"},{"location":"architecture/remoteapp/remoteapp_nightly_build/","title":"Remote App Nightly Build","text":""},{"location":"architecture/remoteapp/remoteapp_nightly_build/#build-machine-specification","title":"Build Machine Specification","text":"<ul> <li>OS: Windows 10 Pro 1903</li> <li>CPU: CPU Cores 4, Sockets 2, Core per Socket 2</li> <li>Memory: 8 GB</li> <li>Hard Disk: Capacity 100 GBytes</li> <li>USB Controller: USB 3.0</li> <li>Network adapter: Network VM Network</li> <li>Video Card: Total Video Memory 8 MB</li> <li>Displays: Number of displays 2</li> </ul>"},{"location":"architecture/remoteapp/remoteapp_nightly_build/#objectives","title":"Objectives","text":"<p>The objectives of the Remote App build process are as follows:</p> <p>Create an automated build system that can build the complete remote app application on designated build machines. As the Remote App and SDKVM are likely to share components we need to be able to build aspects of the Remote App components for multiple platforms.</p> <ul> <li>The build machine can be any new Windows machine meeting the above specification.</li> <li>Any build dependencies outside of the blackbox source code must be clearly identified:</li> <li>Name and version of tool or library.</li> <li>Location for obtaining and installing the tool.</li> <li>Clear definition of any licensing considerations for a tool or package</li> <li>A clearly documented set of instructions for installing and verifying the installation of the tool or library.</li> <li>We should have an ordered set of instructions for installing these dependencies. This ideally should be scripted with depndencies drawn from a known source using wget.</li> <li>Only dependencies actively used in the build should be installed. Legacy versions and obsolete dependencies should not be present on the machine.</li> <li>We need a set of clearly defined and unambiguously identified repositories for each of the components of the Remote App</li> <li>We should not use symbolic links or similar mechanisms to link to other dependent repositories.</li> <li>We should have a script that can down load the required sources to the build machine from the required SVN repository. The script should also download any source code from dependent repositories.</li> <li>There should be no requirement to manually copy files at any stage of the build.</li> <li>We should not commit generated files to the source code repository.</li> <li>The compiled code should be automatically versioned as part of the build process.</li> <li>It should be possible to start a build with a single click from a Jenkins Integration</li> <li>The same build machine should be able to build all components of the remote app</li> <li>Conflicting dependencies should be handled by installing in different directories and setting the appropriate variables in the build scripts.</li> <li>A nightly build should automatically configure a build using cmake, this should generate solution files and msbuild compatible scripts for independent building and debugging of the code.</li> </ul>"},{"location":"architecture/remoteapp/remoteapp_nightly_build/#proposed-framework-for-build-system","title":"Proposed Framework for Build System","text":"<ul> <li>A base template configuration will feature Windows 10 Pro with Linux for Windows and Docker support installed.</li> <li>The Docker configuration will incorporate all of the Linux dependencies.</li> <li>Added to this template will be:</li> <li>Windows depenencies retrieved either from SVN or via winget</li> <li>Required Visual Studio Versions</li> <li>Required .Net Versions</li> <li>Dependent libraries</li> <li>The main build script will be a Powershell script can checkout code. Fetch dependencies mount containerised file systems etc.</li> <li>Any dependencies on appliance files will (in the short term) be managed through svn export.</li> </ul>"},{"location":"architecture/remoteapp/remoteapp_nightly_build/#remote-app-build-machine","title":"Remote App Build Machine","text":"<ul> <li>ESXi Host: 10.211.128.206</li> <li>Machine Name: software_client_build_machine</li> <li>User: BBOX</li> <li>Password: cloud$1</li> <li>IP: 10.211.130.145</li> </ul> <p>Important I would ask that anything installed on the windows side be installed with winget, that way we can easily get a SW manifest for future template updates. Details of winget here</p> <p>https://docs.microsoft.com/en-us/windows/package-manager/winget/</p> <p>It is already installed and configured on the machine. Any questions ping me.</p>"},{"location":"architecture/remoteapp/remoteapp_nightly_build/#phasing","title":"Phasing","text":"<p>The project will be divided into five phases. These must be incorporated into future schedules.</p> <ul> <li>Phase 1: Create new branches and create a baseline build machine the 206 server - July 19th - Micheal</li> <li>Phase 2: C# Sharp code building on new machine - August 31st</li> <li>Niall will create a detailed list of the tools and dependencies required for the C# Component - 26th July</li> <li>Configure the new build machine to manually build the C# code - August 8th</li> <li>Confirm system builds a functional Remote App GUI as expected - August 31st - Julian</li> <li>Phase 3: RDP Client, Building for Linux and Windows - September 2022</li> <li>Phase 4: KVM Client, Building for Linux and Windows - October 2022</li> <li>Phase 5: Installer</li> </ul>"},{"location":"architecture/remoteapp/remoteapp_nightly_build/#branching-strategy","title":"Branching Strategy","text":"<p>The main development branch going forward will be: svn://svn-server/SoftwareClients/trunk/</p> <p>To support the Siemens and SDKVM work we will create two branches:</p> <ul> <li>Siemens Branch; svn://10.211.128.12/SoftwareClients/branches/Siemens_PoC_Phase2</li> <li>SDKVM Branch: svn://svn-server/SoftwareClients/branches/RDP_Apps_sdkvm</li> </ul> <p>It is proposed that the Siemens branch is regularily merged back to the trunk. The SDKVM branch will regularily pick up these changes. The Siemens branch will return to the trunk before release in late September 2022. After release the Siemens branch should pick up the changes from the SDKVM branch after that branch merges to the trunk.</p>"},{"location":"architecture/remoteapp/remoteapp_nightly_build/#resources","title":"Resources","text":""},{"location":"architecture/remoteapp/remoteapp_nightly_build/#powershell-script-for-c-build","title":"PowerShell Script for C# build","text":"<pre><code>winget install --id=TortoiseSVN.TortoiseSVN -e  ; winget install --id=Microsoft.VisualStudioCode -e  ; winget install --id=ScooterSoftware.BeyondCompare4 -e ; winget install --id=ShiningLight.OpenSSL -v=1_1_1q -e ; winget install --id=Microsoft.VisualStudio.2019.Community -v=16.6.1 -e ;\n</code></pre>"},{"location":"architecture/remoteapp/remoteappprerequisites/","title":"Pre-requisites","text":""},{"location":"architecture/remoteapp/remoteappprerequisites/#general","title":"General","text":"<p>cmake</p>"},{"location":"architecture/remoteapp/remoteappprerequisites/#openssl","title":"OpenSSL","text":"<p>Must be version 1.1. The installer bundles 1.1d but I've tested against 1.1g and it's fine also. Get the full (i.e. not \"light\") Win32 .msi installer from here.</p>"},{"location":"architecture/remoteapp/remoteappprerequisites/#wcloudbbexe-emeraldra-installer","title":"Wcloudbb.exe, EmeraldRA &amp; Installer","text":"<p>Visual Studio 2019. Do not update this to a version beyond 16.6.4 or you won't be able to make installers.</p> <p>The cmake command used is checked in as <code>config.cmd</code>. But you are unlikely to need to re-run this, most work can be done on the checked-in project &amp; solution files.</p> <p>If you do re-run cmake for wcloudbb.exe, note that because of a bug in the CMakeFiles you'll have to remove freerdp.lib as a linker input in the generated project.</p>"},{"location":"architecture/remoteapp/remoteappprerequisites/#wcloudrdpexe","title":"Wcloudrdp.exe","text":"<p>Visual Studio 2017.</p> <p>Again, the cmake command used was checked in as <code>config.cmd</code>, but you are unlikely to need to re-run it.</p>"},{"location":"architecture/sdkvm/Issues/","title":"Known Issues with teh current SDKVM","text":"<ul> <li>On boot up speed may incorrectly negotiate to 100 Mbps instead of 1000 Mbps. Fixed by hotplugging Ethernet cable.</li> <li>Network settings if configured via DeskVUE OSD do not persist, must configure via Ubuntu settings.</li> <li>DeskVUE Display Menu does not work correctly and may cause awkward situations of screens been inadvertently cloned; this can be difficult to recover from.</li> <li>Minimise OSD hotkey will minimise the workspace tile with the current mouse and keyboard focus and not the OSD.</li> <li>Tiles operating in fullscreen may stop the F10 (restore to original view) hotkey from functioning correctly.</li> <li>Windows key not supported in connections i.e. Ubuntu consumes the windows key instead of passing it to the connection.</li> <li>DeskVUE UI is not synchronised with hotkeys i.e. using hotkey to terminate an active workspace will still show it as active on the DeskVUE UI.</li> <li>TX connections may freeze, relaunching the connections recovers. Only reproduced on one system.</li> <li>No connection options are supported e.g. Audio.</li> <li>No support for hostnames in connections i.e. must use IP addresses.</li> <li>PCoIP connections to the Teradici Connection Manager (prerequisite for connecting to Leostream broker) will default to the first broker assigned desktop for that particular user in that particular domain i.e. the user cannot select which desktop to connect to.</li> <li>Templates with tiles spanning multiple video heads are not supported i.e. for a given screen do not select a template which uses more than one screen.</li> <li>$ not supported as special characters in password fields such as RDP and PCoIP connections (any other special characters not supported?)</li> <li>OSD only supports DNS Hostnames in PCoIP connections. The DNS hostname support in the OSD only resolves it during connection creation as opposed to resolving it during each individual connection launch. </li> <li>Connections to Boxilla managed TXs are not supported i.e. must use unmanaged TXs.</li> <li>Any predefined workspaces will have to be resaved assuming different screens are been connected.</li> </ul>"},{"location":"architecture/sdkvm/build_system/","title":"Deskvue Release Buildsystem","text":"<p>Release builds for Deskvue are creating using Github Actions. Currently builds are performed when a commit is made to the SDKVM_WORKREPO repository on the main branch.</p>"},{"location":"architecture/sdkvm/build_system/#docker-image-for-buildsystem","title":"Docker Image for Buildsystem","text":"<p>A Docker image has been created for building Deskvue deskvue-docker-build. Any changes to this image are built and published to ghcr.io. If a user has sufficient privileges the image can be pulled using</p> <pre><code>docker pull ghcr.io/sdkvm-core/deskvue-docker-build:main\n</code></pre> <p>The GitHub action to create and publish the Docker image can be found in the deskvue-docker-build repo under <code>.github/workflows/publsih.yml</code></p>"},{"location":"architecture/sdkvm/build_system/#adding-a-docker-user-to-ubuntu","title":"Adding a Docker User to Ubuntu","text":"<pre><code>sudo groupadd docker\nsudo usermod -aG docker $USER\nnewgrp docker\n</code></pre>"},{"location":"architecture/sdkvm/build_system/#deskvue-build","title":"Deskvue Build","text":"<p>The deskvue build is run from the <code>.github/workflows/build.yml</code> on any push event to the SDKVM_WORKREPO. On triggering the following steps will be performed</p> <ul> <li>Pull the latest deskvue-docker-build image.</li> <li>Clone the code using actions/checkout@v3</li> <li>Build the code using the <code>build_components_jenkins.sh</code> script</li> <li>Upload the build using action-automatic-releases, this build will be flagged as a pre-release Development Build and will be tagged as latest in the git repo.</li> </ul>"},{"location":"architecture/sdkvm/build_system/#to-build-a-local-build","title":"To Build a Local Build","text":"<p>To get the latest updates run:</p> <ul> <li>git submodule update --remote</li> <li>git pull</li> </ul> <p>To build locally we require a commit number and a revision number. For local builds the commit number is not used, but the revision number appears as the r number in the resulting build. <pre><code>./build_component_jenkins.sh git &lt;commit reference&gt; &lt;Rev - r number&gt;\n\n./build_component_jenkins.sh f2903d01ef27d200713debb1828830f48bd3d94c 03\n\nThe above build produces the output:\n\nDESKVUE_1.1.0.r03.signed.dkv\n</code></pre></p> <p>Builds can be found in https://github.com/blackbox-common-apps/SDKVM_WORKREPO/releases/tag/latest</p> <p>Branch Builds can be found in https://github.com/blackbox-common-apps/SDKVM_WORKREPO/releases/tag/latest-1.1.0</p>"},{"location":"architecture/sdkvm/build_system/#tagging-a-release","title":"Tagging a release","text":"<p><pre><code>git tag &lt;tagname&gt; -a\ngit push origin --tags \n</code></pre> - Add release notes in the tag - Attach the release assets (fimrware) to new tag after downloading it from \"latest\" tag</p>"},{"location":"architecture/sdkvm/build_system/#manufacturing-image-generation","title":"Manufacturing Image Generation","text":""},{"location":"architecture/sdkvm/build_system/#using-the-install-script","title":"Using the install script","text":"<ul> <li>Flash the SDKVM unit with a base line Ubuntu image: At the time of writing the Ubuntu base line images can be found in: \\10.211.128.208\\tftpboot\\work\\Deskvue_Release\\UbuntuBaselines</li> <li>Boot the newly flashed image and in the OS A partition create a directory ~/Upgrade</li> <li>Retrieve the latest release build:  https://github.com/blackbox-common-apps/SDKVM_WORKREPO/releases/tag/latest</li> <li>Retrieve the install script from https://github.com/blackbox-common-apps/SDKVM_WORKREPO/</li> <li>Copy this to a disk drive or usb stick. The required files are:<ul> <li>DESKVUE_1.0.X_amd64.deb</li> <li>OPENBOX_BB_3.6.1-10_amd64</li> <li>install.sh  </li> </ul> </li> <li>Insert the usb drive or stick into the snuc and copy the three files from the usb stick into the ~/Upgrade folder on partition A.</li> <li>Run the install script ./install.sh. You will be prompted for the sudo password.</li> <li>Confirm that the install script completes sucessfully and then reboot the device.</li> <li>You may need to reconfigure the bios to boot to OS partition A.</li> <li>The system should boot to the OSD screen of deskvue.</li> <li>Navigate to the system screen. Select the \"Reset to Factory Defaults\" option.</li> <li>You will need to login again.</li> <li>Navigate to the Network screen, confirm that the IP address is set to a static IP of 192.168.1.21.</li> <li>Navigate to the other screens, users, connections and workspaces. Confirm that each of these is set to defaults.</li> </ul>"},{"location":"architecture/sdkvm/build_system/#using-the-upgrade-method","title":"Using the upgrade method","text":"<ul> <li>Flash the SDKVM unit with SDKVM-1.0.0-RC2-img as a base line.</li> <li>Boot into partition A.</li> <li>Insert the usb flash drive containing the package file into the snuc .</li> <li>From the system settings tab use the \"System Upgrade\" option to select the upgrade package file.</li> <li>Upgrade the system.</li> <li>After the upgrade has completed the system will reboot.</li> <li>After reboot login and go to the system screen. Select the \"Reset to Factory Defaults\" option.</li> <li>Navigate to the Network screen, confirm that the IP address is set to a static IP of 192.168.1.21.</li> <li>Navigate to the other screens, users, connections and workspaces. Confirm that each of these is set to defaults.</li> <li>Now select the bios opion to Boot into partition B.</li> <li>Insert the usb flash drive containing the package file into the snuc .</li> <li>From the system settings tab use the \"System Upgrade\" option to select the upgrade package file.</li> <li>Upgrade the system.</li> <li>After the upgrade has completed the system will reboot.</li> <li>After reboot login and go to the system screen. Select the \"Reset to Factory Defaults\" option.</li> <li>Navigate to the Network screen, confirm that the IP address is set to a static IP of 192.168.1.21.</li> <li>Navigate to the other screens, users, connections and workspaces. Confirm that each of these is set to defaults.</li> </ul>"},{"location":"architecture/sdkvm/data_models/","title":"Data Model Version 1.0.0.34","text":""},{"location":"architecture/sdkvm/data_models/#changes-in-version-10017","title":"Changes in version 1.0.0.17","text":"<ul> <li>Added port to rdp workspace definition</li> <li>added  .json extension to system_level_settings</li> </ul>"},{"location":"architecture/sdkvm/data_models/#changes-in-version-10018","title":"Changes in version 1.0.0.18","text":"<ul> <li>Added user attribute to indicate if they are an active directory user.</li> <li>Added monitor definition to workspaces</li> </ul>"},{"location":"architecture/sdkvm/data_models/#changes-in-version-10019","title":"Changes in version 1.0.0.19","text":"<ul> <li>Added Zone field to System Level Settings</li> </ul>"},{"location":"architecture/sdkvm/data_models/#changes-in-version-10020","title":"Changes in version 1.0.0.20","text":"<ul> <li>Added support for dual head connections type. This means changes to both connection and workspace definition</li> <li>Changed hot key mappings from function keys to ordinary numeric keys</li> <li>Added audio type to connections and workspaces</li> <li>Added audio mute option to system preferences</li> </ul>"},{"location":"architecture/sdkvm/data_models/#changes-in-version-10021","title":"Changes in version 1.0.0.21","text":"<ul> <li>removed reparenting support</li> <li>Added boxilla ID to all tile examples</li> <li>Added template samples for a template normalised to a 1920x1080 display</li> </ul>"},{"location":"architecture/sdkvm/data_models/#changes-in-version-10022","title":"Changes in version 1.0.0.22","text":"<ul> <li>Keyboard layout has been changed from a per user setting to a per system setting. The setting now resides in system_level_settings.json</li> <li>Introduced a workspace version number -   \"workspace_data_model_version_number\": \"1\"</li> <li>Adding data model version number to the individual structures</li> <li>Making changes to data model to accomodate admin user ability to allocate connections and workspaces</li> </ul>"},{"location":"architecture/sdkvm/data_models/#changes-in-version-10023","title":"Changes in version 1.0.0.23","text":"<ul> <li>Remove \"monitors\" list from workspace definition, \"head\" id in \"views\" now refers to the monitors in <code>.config/monitor_management/current_monitors.json</code></li> <li>Tile widths, heights and x/y locations are now represented as percentages to two decimal points, the percentages refer to the resolution of the monitor referenced in the \"head\" variable of the \"views\" structure.</li> <li>Finalised changes to data model to accommodate admin user ability to allocate connections and workspaces</li> <li>Inactivity timers: workspace_inactivity_timer, osd_inactivity_timer and screen_saver are now global settings and have been removed from per user settings as per product management requirements.</li> </ul>"},{"location":"architecture/sdkvm/data_models/#changes-in-version-10024","title":"Changes in version 1.0.0.24","text":"<ul> <li>Adding a debug flag that enables verbose OSD output</li> <li>Added a workspace_created_by field to the workspace object</li> <li>Clarified head numbers</li> </ul>"},{"location":"architecture/sdkvm/data_models/#changes-in-version-10025","title":"Changes in version 1.0.0.25","text":"<ul> <li>Adding \"target_head_id\" to the data structure to allow us identify the target head id.</li> </ul>"},{"location":"architecture/sdkvm/data_models/#changes-in-version-10026","title":"Changes in version 1.0.0.26","text":"<ul> <li>Clarified that on fully managed systems an admin user should have a workspace access and connection access list.</li> </ul>"},{"location":"architecture/sdkvm/data_models/#changes-in-version-10027","title":"Changes in version 1.0.0.27","text":"<ul> <li>Added \"title_bars\" : \"True\" ,  \"title_bar_connection_name\" : \"True\" and  \"title_bar_ipaddress\" : \"True\" options to workspaces</li> <li>Added parameter for Window Overlay Control to the system settings files</li> </ul>"},{"location":"architecture/sdkvm/data_models/#changes-in-version-10028","title":"Changes in version 1.0.0.28","text":"<ul> <li>Added two new template samples for spanning configurations.</li> </ul>"},{"location":"architecture/sdkvm/data_models/#changes-in-version-10029","title":"Changes in version 1.0.0.29","text":"<ul> <li>Started to use UIDs for Template References</li> <li>Incremented workspace version number -   \"workspace_data_model_version_number\": \"2\",</li> </ul>"},{"location":"architecture/sdkvm/data_models/#changes-in-version-10030","title":"Changes in version 1.0.0.30","text":"<ul> <li>Added a new template for a 2X2 matrix</li> </ul>"},{"location":"architecture/sdkvm/data_models/#changes-in-version-10031","title":"Changes in version 1.0.0.31","text":"<ul> <li>Added a new attribute for \"always_on_top\",\"target_head_id\" and \"fixed_position\"</li> </ul>"},{"location":"architecture/sdkvm/data_models/#changes-in-version-10032","title":"Changes in version 1.0.0.32","text":"<ul> <li>Added a new attribute for \"selected_source_name\" to system_level_settings.json</li> </ul>"},{"location":"architecture/sdkvm/data_models/#changes-in-version-10033","title":"Changes in version 1.0.0.33","text":"<ul> <li>Changed \"always_on_top\" and \"fixed_position\" from \"1\" to \"True\"</li> </ul>"},{"location":"architecture/sdkvm/data_models/#changes-in-version-10034","title":"Changes in version 1.0.0.34","text":"<ul> <li>Added new tile attribute for mouse sector mapping</li> <li>Added sample for 6 tile template</li> </ul>"},{"location":"architecture/sdkvm/data_models/#workspace-definition","title":"Workspace Definition","text":"<p>A workspace is an object that defines how various types of connections, RDP, PCoIP, KVM and H264 will be presented on the SDKVM's monitors. The workspace contains a collection of views with each view relating to a display on a physical monitor attached to the SDKVM system. A view can contain one or more video tiles. You can think of a tile as an instance of a connection or an instance of a window displaying video from the connection.</p> <p>There are different types of tiles, KVM, RDP, PCoIP and H264 and each of these types have slightly different characteristics. These are further explained below.</p> <p>This first workspace shown below is for a single monitor (the primary monitor, or monitor 0), and this particular workspace contains just one view with a single tile for an RDP connection type.</p> <p>You can see that a view has a name, description, template reference and a head reference.</p> <p>The connection_id in the workspace definition can be populated from the connection_id property associated with each connection.</p> <pre><code>{\n    \"workspace_name\": \"First Production Shift\",\n    \"workspace_data_model_version_number\": \"2\",\n    \"workspace_description\": \"A simple single tile, single view workspace connecting to RDP\",\n    \"workspace_id\" : \"A 10 digit unique ID\",\n    \"workspace_created_by\" : \" A 10 digit unique ID for the creator or 'admin' if created by an admin user\",\n    \"title_bars\" : \"True\",\n    \"title_bar_connection_name\" : \"True\",\n    \"title_bar_ipaddress\" : \"True\",\n    \"views\": [\n        {\n        \"view_name\": \"Editing\",\n        \"view_description\": \"The Editing View\",\n            \"view_template_reference\": \"00000001\",\n            \"head\": \"1\",\n            \"tiles\": [\n                {\n                    \"tile_name\": \"RDPOnHead1\",\n                    \"connection_id\" : \"AA667766EF\",\n                    \"tile_location\": \"0,0\",\n                    \"tile_width\": \"100\",\n                    \"tile_height\": \"100\",\n                    \"tile_location_h2\": \"100,0\",\n                    \"tile_width_h2\": \"100\",\n                    \"tile_height_h2\": \"100\",\n                    \"target\": \"192.168.1.10\",\n                    \"port\": \"3389\",\n                    \"user_name\": \"BBOX\",\n                    \"domain\": \"\",\n                    \"password\": \"cloud\",\n                    \"type\": \"RDP\",\n                    \"mode\": \"private\",\n                    \"audio\": \"False\",\n                    \"audio_type\": \"analog\",\n                    \"usbr\": \"False\",\n                    \"view_only\": \"False\",\n                    \"persistent\": \"False\",\n                    \"resizable\": \"True\",\n                    \"decorations\": \"True\",\n                    \"dual_head\": \"False\",\n                    \"always_on_top\" : \"True\" ,\n                    \"fixed_position\" : \"True\",\n                    \"mouse_sector\" : \"v,-1,-1,-1\"\n                }\n            ]\n        }\n    ]\n}\n</code></pre> <p>The next example of a workspace is a little more complicated. It again has a single view, but that view now has two tiles. One is a KVM connection and the second is a PCoIP connection. Notice that the tile definitions differ; for example, the KVM tile does not use a username of password, height or width. The PCoIP connection has both a Height and Width (these refer to the resolution of the desktop we are connecting to). It also has a Tile Width and Tile Height (these refer to the percentages of the monitor resolution the tile will be displayed at), but it does not have a mode of operation. </p> <pre><code>{\n    \"workspace_name\": \"First Production Shift\",\n    \"workspace_data_model_version_number\": \"2\",\n    \"workspace_description\": \"A simple single tile, single view workspace connecting to KVM\",\n    \"workspace_id\" : \"A 10 digit unique ID\",\n    \"workspace_created_by\" : \" A 10 digit unique ID for the creator or 'admin' if created by an admin \",\n    \"title_bars\" : \"True\",\n    \"title_bar_connection_name\" : \"True\",\n    \"title_bar_ipaddress\" : \"True\",\n    \"views\": [\n        {\n            \"view_name\": \"Editing\",\n            \"view_description\": \"The Editing View\",\n            \"view_template_reference\": \"00000001\",\n            \"head\": \"1\",\n            \"tiles\": [\n                {\n                    \"tile_name\": \"KVM\",\n                    \"connection_id\" : \"AA667766EF\",\n                    \"tile_location\": \"0,0\",\n                    \"tile_width\": \"50.00\",\n                    \"tile_height\": \"50.00\",\n                    \"tile_location_h2\": \"0,0\",\n                    \"tile_width_h2\": \"50.00\",\n                    \"tile_height_h2\": \"50.00\",\n                    \"target\": \"192.168.1.161\",\n                    \"type\": \"KVM\",\n                    \"mode\": \"private\",\n                    \"audio\": \"False\",\n                    \"audio_type\": \"analog\",\n                    \"usbr\": \"False\",\n                    \"view_only\": \"False\",\n                    \"persistent\": \"False\",\n                    \"resizable\": \"True\",\n                    \"decorations\": \"True\",\n                    \"boxilla_id\": \"8:0:27:c0:a1:9d\",\n                    \"always_on_top\" : \"True\" ,\n                    \"fixed_position\" : \"True\",\n                    \"mouse_sector\" : \"v,-1,-1,-1\"\n                }\n            ]\n        }\n    ]\n}\n</code></pre>"},{"location":"architecture/sdkvm/data_models/#connection-definition","title":"Connection Definition","text":"<p>The workspaces above are formed by taking the assigned connections and populating the tile with the values used in the connection definition. Different connection types have different parameters as shown below.</p> <p>Connections should be stored in ~/SDKVM/connections as a json file called connections.json. This is a collection of the individual connections created by a user stored as an array of connection objects.</p> <p>Your connection creation page will have to change to reflect the differences in connection types. A user would first select a connection type to create, then they are only presented with the relevant options. So if a user is creating a KVM connection they should not be asked for username and password.</p>"},{"location":"architecture/sdkvm/data_models/#the-pcoip-connection","title":"The PCoIP Connection","text":"<pre><code>                {\n                    \"connection_name\": \"Editing Machine\",\n                    \"connection_id\" : \"A 10 digit unique ID\",\n                    \"type\": \"PCOIP\",\n                    \"target\": \"192.168.1.10\",\n                    \"user_name\": \"BBOX\",\n                    \"password\": \"cloud\",\n                    \"domain\": \"\",\n                    \"audio\": \"False\",\n                    \"usbr\": \"False\",\n                    \"view_only\": \"False\",\n                    \"persistent\": \"False\",\n                    \"dual_head\": \"True\"\n                }\n</code></pre>"},{"location":"architecture/sdkvm/data_models/#the-rdp-connection","title":"The RDP Connection","text":"<pre><code>                {\n                    \"connection_name\": \"News Editing Machine\",\n                    \"connection_id\" : \"A 10 digit unique ID\",\n                    \"type\": \"RDP\",\n                    \"target\": \"192.168.1.10\",\n                    \"port\": \"3389\",\n                    \"user_name\": \"BBOX\",\n                    \"password\": \"cloud\",\n                    \"domain\": \"\",\n                    \"audio\": \"False\",\n                    \"usbr\": \"False\",\n                    \"view_only\": \"False\",\n                    \"persistent\": \"False\",\n                    \"dual_head\": \"True\"\n                }\n</code></pre>"},{"location":"architecture/sdkvm/data_models/#the-kvm-connection","title":"The KVM Connection","text":"<pre><code>                {\n                    \"connection_name\": \"KVM\",\n                    \"connection_id\" : \"A 10 digit unique ID\",\n                    \"target\": \"192.168.1.161\",\n                    \"type\": \"KVM\",\n                    \"mode\": \"private\",\n                    \"audio\": \"False\",\n                    \"audio_type\": \"analog\",\n                    \"usbr\": \"False\",\n                    \"view_only\": \"False\",\n                    \"persistent\": \"False\",\n                    \"boxilla_id\": \"8:0:27:c0:a1:9d\",\n                    \"dual_head\": \"True\"\n                }\n</code></pre>"},{"location":"architecture/sdkvm/data_models/#sample-connectionsjson-file","title":"Sample connections.json File","text":"<pre><code>{\n    \"connection_data_model_version_number\": \"1\",\n    \"connections\" : [\n\n  {\n    \"connection_id\": \"6ca3c89753\",\n    \"connection_name\": \"2KConnection\",\n    \"type\": \"TX\",\n    \"mode\": \"Shared\",\n    \"audio\": \"False\",\n    \"usbr\": \"False\",\n    \"target\": \"192.168.1.161\",\n    \"view_only\": \"False\",\n    \"persistent\": \"False\",\n    \"boxilla_id\": \"08:00:27:c0:a1:9d\",\n    \"dual_head\": \"False\",\n    \"audio_type\": \"analog\"\n  },\n  {\n    \"connection_id\": \"6b7d5cf370\",\n    \"connection_name\": \"4KConnection\",\n    \"type\": \"TX\",\n    \"mode\": \"Shared\",\n    \"audio\": \"False\",\n    \"usbr\": \"False\",\n    \"target\": \"192.168.1.169\",\n    \"view_only\": \"False\",\n    \"persistent\": \"False\",\n    \"boxilla_id\": \"08:00:27:c0:a1:9d\",\n    \"dual_head\": \"False\",\n    \"audio_type\": \"analog\"\n  },\n  {\n    \"connection_id\": \"7ae22878f3\",\n    \"connection_name\": \"PCoIP\",\n    \"type\": \"PCOIP\",\n    \"audio\": \"False\",\n    \"usbr\": \"False\",\n    \"target\": \"192.168.1.10\",\n    \"view_only\": \"False\",\n    \"persistent\": \"False\",\n    \"user_name\": \"BBOX\",\n    \"password\": \"cloud\",\n    \"domain\": \"\",\n    \"desktop_id\": \"\",\n    \"dual_head\": \"False\"\n  },\n  {\n    \"connection_id\": \"b09c0e2f35\",\n    \"port\": \"3389\",\n    \"connection_name\": \"RDP\",\n    \"type\": \"RDP\",\n    \"audio\": \"False\",\n    \"usbr\": \"False\",\n    \"target\": \"192.168.1.10\",\n    \"view_only\": \"False\",\n    \"persistent\": \"False\",\n    \"user_name\": \"BBOX\",\n    \"password\": \"cloud\",\n    \"domain\": \"\",\n    \"dual_head\": \"False\"\n  }\n]\n}\n</code></pre>"},{"location":"architecture/sdkvm/data_models/#workspace-status-definition","title":"Workspace Status Definition","text":"<p>The workspace status object communicates the status for a running workspace. The workspace is identified through a unique identifier and has a collection of connection status objects. These connections status objects hold the status of each connection including basic statistics, exit reasons and error information.</p> <pre><code>{\n    \"id\":\"6fc52b0afa\",\n    \"status\":\"inactive\",\n    \"connections_active\":0,\n    \"connections_inactive\":0,\n    \"connections\":[\n        {\n        \"id\":\"9cc5d71c3\",\n        \"status\":\"inactive\",\n        \"bit_rate\":0,\n        \"fps\":0,\n        \"errors\":\"\",\n        \"exit_code\":\"0\",\n        \"exit_reason\":\"\",\n        \"target\":\"\"\n        },\n        {\n        \"id\":\"19d57aa12f\",\n        \"status\":\"inactive\",\n        \"bit_rate\":0,\n        \"fps\":0,\n        \"errors\":\"\",\n        \"exit_code\":\"0\",\n        \"exit_reason\":\"\",\n        \"target\":\"\"\n        }\n    ]\n}\n</code></pre>"},{"location":"architecture/sdkvm/data_models/#users-file","title":"Users File","text":"<p>The file /home/snuc/SDKVM/users/users.json describes all of the system users configured locally for the system.</p> <p>Note; For an unmanaged system users passwords in the json file should be encrypted using bcrypt and stored as a hash. The password supplied at login can be validated using a function like bcrypt.compare.</p> <pre><code>{\n    \"users_data_model_version_number\": \"1\",\n    \"users\": [\n    {   \n    \"id\": \"19d57ade2f\",\n    \"name\": \"User Bob\",\n    \"connections_access\": [\"8790112451\",\"8790112451\"],\n    \"workspace_access\": [\"8790112451\",\"8790112451\"],\n    \"active_directory\" : \"False\",\n    \"Description\": \"Main news editor\",\n    \"type\": \"power\",\n    \"mouse_cursor_size\" : \"medium\",\n    \"password\": \"ED667766555AAB5565\",\n    \"remember_login_details\" : \"False\",\n    \"auto_launch_workspace\" : \"Workspace_ID here\",\n    \"hotkey_mappings\": {\n        \"1\": \"Workspace_ID here\",\n        \"2\": \"Workspace_ID here\",\n        \"3\": \"Workspace_ID here\",\n        \"4\": \"Workspace_ID here\",\n        \"5\": \"Workspace_ID here\",\n        \"6\": \"Workspace_ID here\",\n        \"7\": \"Workspace_ID here\",\n        \"8\": \"Workspace_ID here\",\n        \"9\": \"Workspace_ID here\",        \n        \"10\": \"Workspace_ID here\",\n        \"11\": \"Workspace_ID here\",\n        \"12\": \"Workspace_ID here\",\n        \"r\": \"Restore workspace script\",\n        \"c\": \"Move the mouse pointer to the first screen\",\n        \"o\": \"Maximise OSD in the foreground\",\n        \"x\": \"Minimise OSD in the background\",\n        \"Up Arrow\": \"Maximise active Window\",\n        \"Down Arrow\": \"Minimise active Window\"\n        }\n    },\n     {   \n    \"id\": \"19d57ade2f\",\n    \"name\": \"admin\",\n    \"connections_access\": [\"8790112451\",\"8790112451\"],\n    \"workspace_access\": [\"8790112451\",\"8790112451\"],\n    \"active_directory\" : \"False\",\n    \"Description\": \"Admin user\",\n    \"type\": \"admin\",\n    \"mouse_cursor_size\" : \"medium\",\n    \"password\": \"ED667766555AAB5565\",\n    \"remember_login_details\" : \"False\",\n    \"auto_launch_workspace\" : \"Workspace_ID here\",\n    \"hotkey_mappings\": {\n        \"1\": \"Workspace_ID here\",\n        \"2\": \"Workspace_ID here\",\n        \"3\": \"Workspace_ID here\",\n        \"4\": \"Workspace_ID here\",\n        \"5\": \"Workspace_ID here\",\n        \"6\": \"Workspace_ID here\",\n        \"7\": \"Workspace_ID here\",\n        \"8\": \"Workspace_ID here\",\n        \"9\": \"Workspace_ID here\",        \n        \"10\": \"Workspace_ID here\",\n        \"11\": \"Workspace_ID here\",\n        \"12\": \"Workspace_ID here\",\n        \"r\": \"Restore workspace script\",\n        \"c\": \"Move the mouse pointer to the first screen\",\n        \"o\": \"Maximise OSD in the foreground\",\n        \"x\": \"Minimise OSD in the background\",\n        \"Up Arrow\": \"Maximise active Window\",\n        \"Down Arrow\": \"Minimise active Window\"\n        }\n    },\n    {   \n    \"id\": \"19d57adee\",\n    \"name\": \"User Gina\",\n    \"workspace_access\": [\"8790112451\",\"8790112451\"],\n    \"active_directory\" : \"False\",\n    \"Description\": \"Main news editor\",\n    \"type\": \"local\",\n    \"mouse_cursor_size\" : \"medium\",\n    \"password\": \"ED667766555AAB5565\",\n    \"remember_login_details\" : \"False\",\n    \"auto_launch_workspace\" : \"Workspace_ID here\",\n    \"hotkey_mappings\": {\n        \"1\": \"Workspace_ID here\",\n        \"2\": \"Workspace_ID here\",\n        \"3\": \"Workspace_ID here\",\n        \"4\": \"Workspace_ID here\",\n        \"5\": \"Workspace_ID here\",\n        \"6\": \"Workspace_ID here\",\n        \"7\": \"Workspace_ID here\",\n        \"8\": \"Workspace_ID here\",\n        \"9\": \"Workspace_ID here\",        \n        \"10\": \"Workspace_ID here\",\n        \"11\": \"Workspace_ID here\",\n        \"12\": \"Workspace_ID here\",\n        \"r\": \"Restore workspace script\",\n        \"c\": \"Move the mouse pointer to the first screen\",\n        \"o\": \"Maximise OSD in the foreground\",\n        \"x\": \"Minimise OSD in the background\",\n        \"Up Arrow\": \"Maximise active Window\",\n        \"Down Arrow\": \"Minimise active Window\"\n        }\n    },\n    {   \n    \"id\": \"19d57ade2f\",\n    \"name\": \"User Bob\",\n    \"connections_access\": [\"8790112451\",\"8790112451\"],\n    \"workspace_access\": [\"8790112451\",\"8790112451\"],\n    \"active_directory\" : \"False\",\n    \"Description\": \"Main news editor\",\n    \"type\": \"power\",\n    \"mouse_cursor_size\" : \"medium\",\n    \"password\": \"ED667766555AAB5565\",\n    \"remember_login_details\" : \"False\",\n    \"auto_launch_workspace\" : \"Workspace_ID here\",\n    \"hotkey_mappings\": {\n        \"1\": \"Workspace_ID here\",\n        \"2\": \"Workspace_ID here\",\n        \"3\": \"Workspace_ID here\",\n        \"4\": \"Workspace_ID here\",\n        \"5\": \"Workspace_ID here\",\n        \"6\": \"Workspace_ID here\",\n        \"7\": \"Workspace_ID here\",\n        \"8\": \"Workspace_ID here\",\n        \"9\": \"Workspace_ID here\",        \n        \"10\": \"Workspace_ID here\",\n        \"11\": \"Workspace_ID here\",\n        \"12\": \"Workspace_ID here\",\n        \"r\": \"Restore workspace script\",\n        \"c\": \"Move the mouse pointer to the first screen\",\n        \"o\": \"Maximise OSD in the foreground\",\n        \"x\": \"Minimise OSD in the background\",\n        \"Up Arrow\": \"Maximise active Window\",\n        \"Down Arrow\": \"Minimise active Window\"\n        }\n    },\n\n    ]\n}\n</code></pre>"},{"location":"architecture/sdkvm/data_models/#system-level-settings","title":"System Level Settings","text":"<p>The system level settings hold the settings that configure the overall system (as distinct from the settings for a specific user) These reside in the directory /home/snuc/SDKVM/system_level_settings.json</p> <pre><code>{\n    \"system_level_data_model_version_number\": \"2\",\n    \"dhcp\" : \"False\",\n    \"Managed\" : \"False\",\n    \"primary_monitor\" : \"HDMI1\",\n    \"logged_in_user_id\" : \"AA77885432\",\n    \"logged_in_user_name\" : \"Bob User\",\n    \"bonded_group_name\" : \"The name of the bonded group\",\n    \"log_level\" : \"linux log level\",\n    \"ip_address\" : \"192.168.1.21\",\n    \"subnet_address\" : \"255.255.248.0\",\n    \"gateway_address\" : \"10.211.128.1\",\n    \"primary_dns_adddress\" : \"8.8.8.8\",\n    \"secondary_dns_address\" : \"8.8.4.4\",\n    \"auto_login\" : \"user_id\",\n    \"zone\" : \"\",\n    \"audio_mute\" : \"False\",\n    \"keyboard\": \"gb\",\n    \"workspace_inactivity_timer\": \"30\",\n    \"osd_inactivity_timer\": \"30\",\n    \"screen_saver\": \"30\",\n    \"osd_debug_level\": \"1\",\n    \"selected_sink_name\" : \"\",\n    \"selected_source_name\" : \"\",\n    \"selected_profile\" : \"\",\n    \"overlays_enabled\" : \"True\"\n}\n</code></pre>"},{"location":"architecture/sdkvm/data_models/#templates","title":"Templates","text":"<p>It is proposed that both Boxilla and the OSD create templates using co-ordinates normalised to a 1920x1080 display. I have provided some samples below for what these would look like. In the next iteration of the product the SDKVM will take these co-ordinates and together with the head reference in the view definition it will transform the locations to suit what ever monitor it finds. There is still a lot of detail to be worked out in terms of how it will do this (particularly for future templates that span monitors and for monitors that are positioned in a vertical or horizontal plane), but the recommendations for now is that Boxilla (and the OSD) treat the templates as having a virtual co-ordinate system using a 1920x1080 frame of reference and place each template as if it was on a single 1920x1080 monitor.</p>"},{"location":"architecture/sdkvm/data_models/#full-screen-tile-on-1-display","title":"Full-screen tile on 1-display","text":"<p>Proposed UID for this Template: 00000001</p>"},{"location":"architecture/sdkvm/data_models/#template-sample","title":"Template Sample","text":"<pre><code>{\n  \"workspace_name\": \"WS #1\",\n  \"workspace_data_model_version_number\": \"2\",\n  \"workspace_description\": \"\",\n  \"workspace_id\": \"222d2f6f37\",\n  \"workspace_created_by\" : \" A 10 digit unique ID for the creator or 'admin' if created by an admin user\",\n  \"views\": [\n    {\n      \"view_name\": \"Editing\",\n      \"view_description\": \"The Editing View\",\n      \"view_template_reference\": \"00000001\",\n      \"head\": \"2\",\n      \"tiles\": [\n        {\n          \"connection_id\": \"1f8545bef8\",\n          \"tile_name\": \"2k_192.168.1.161\",\n          \"tile_location\": \"0,0\",\n          \"tile_width\": \"100.0\",\n          \"tile_height\": \"100.0\",\n          \"target\": \"192.168.1.161\",\n          \"type\": \"TX\",\n          \"mode\": \"Shared\",\n          \"audio\": \"False\",\n          \"usbr\": \"False\",\n          \"view_only\": \"False\",\n          \"persistent\": \"False\",\n          \"boxilla_id\": \"08:00:27:c0:a1:9d\",\n          \"resizable\": \"True\",\n          \"decorations\": \"True\",\n          \"dual_head\": \"False\",\n          \"target_head_id\" : \"1\",\n          \"audio_type\": \"analog\",\n          \"always_on_top\" : \"True\" ,\n          \"fixed_position\" : \"True\",\n          \"mouse_sector\" : \"v,-1,-1,-1\" \n        }\n      ]\n    }\n      ]\n    }\n  ]\n}\n</code></pre>"},{"location":"architecture/sdkvm/data_models/#quad-tiles-on-1-display","title":"Quad-tiles on 1-display","text":"<p>Proposed UID for this Template: 00000002</p>"},{"location":"architecture/sdkvm/data_models/#template-sample_1","title":"Template Sample","text":"<pre><code>{\n  \"workspace_name\": \"WS #2\",\n  \"workspace_data_model_version_number\": \"2\",\n  \"workspace_description\": \"\",\n  \"workspace_id\": \"cef715b1df\",\n  \"workspace_created_by\" : \" A 10 digit unique ID for the creator or 'admin' if created by an admin user\",\n  \"title_bars\" : \"True\",\n  \"title_bar_connection_name\" : \"True\",\n  \"title_bar_ipaddress\" : \"True\",  \n  \"views\": [\n    {\n      \"view_name\": \"Editing\",\n      \"view_description\": \"The Editing View\",\n      \"view_template_reference\": \"00000002\",\n      \"head\": \"1\",\n      \"tiles\": [\n        {\n          \"connection_id\": \"345ca583fb\",\n          \"tile_name\": \"4K_192.168.1.169\",\n          \"tile_location\": \"0,0\",\n          \"tile_width\": \"50.0\",\n          \"tile_height\": \"50.0\",\n          \"target\": \"192.168.1.169\",\n          \"type\": \"TX\",\n          \"mode\": \"Shared\",\n          \"audio\": \"False\",\n          \"usbr\": \"False\",\n          \"view_only\": \"False\",\n          \"persistent\": \"False\",\n          \"boxilla_id\": \"08:00:27:c0:a1:9d\",\n          \"resizable\": \"True\",\n          \"decorations\": \"True\",\n          \"dual_head\": \"False\",\n          \"target_head_id\" : \"1\",\n          \"audio_type\": \"analog\",\n          \"always_on_top\" : \"True\" ,\n          \"fixed_position\" : \"True\",\n          \"mouse_sector\" : \"v,-1,-1,-1\" \n        },\n        {\n          \"connection_id\": \"1f8545bef8\",\n          \"tile_name\": \"2k_192.168.1.161\",\n          \"tile_location\": \"50.0,0\",\n          \"tile_width\": \"50.0\",\n          \"tile_height\": \"50.0\",\n          \"target\": \"192.168.1.161\",\n          \"type\": \"TX\",\n          \"mode\": \"Shared\",\n          \"audio\": \"False\",\n          \"usbr\": \"False\",\n          \"view_only\": \"False\",\n          \"persistent\": \"False\",\n          \"boxilla_id\": \"08:00:27:c0:a1:9d\",\n          \"resizable\": \"True\",\n          \"decorations\": \"True\",\n          \"dual_head\": \"False\",\n          \"target_head_id\" : \"1\",\n          \"audio_type\": \"analog\",\n          \"always_on_top\" : \"True\" ,\n            \"fixed_position\" : \"True\", \"mouse_sector\" : \"v,-1,-1,-1\" \n        },\n        {\n          \"connection_id\": \"1f8545bef8\",\n          \"tile_name\": \"2k_192.168.1.161\",\n          \"tile_location\": \"0,50.0\",\n          \"tile_width\": \"50.0\",\n          \"tile_height\": \"50.0\",\n          \"target\": \"192.168.1.161\",\n          \"type\": \"TX\",\n          \"mode\": \"Shared\",\n          \"audio\": \"False\",\n          \"usbr\": \"False\",\n          \"view_only\": \"False\",\n          \"persistent\": \"False\",\n          \"boxilla_id\": \"08:00:27:c0:a1:9d\",\n          \"resizable\": \"True\",\n          \"decorations\": \"True\",\n          \"dual_head\": \"False\",\n          \"target_head_id\" : \"1\",\n          \"audio_type\": \"analog\",\n          \"always_on_top\" : \"True\" ,\n          \"fixed_position\" : \"True\",\n          \"mouse_sector\" : \"v,-1,-1,-1\" \n        },\n        {\n          \"connection_id\": \"345ca583fb\",\n          \"tile_name\": \"4K_192.168.1.169\",\n          \"tile_location\": \"50.0,50.0\",\n          \"tile_width\": \"50.0\",\n          \"tile_height\": \"50.0\",\n          \"target\": \"192.168.1.169\",\n          \"type\": \"TX\",\n          \"mode\": \"Shared\",\n          \"audio\": \"False\",\n          \"usbr\": \"False\",\n          \"view_only\": \"False\",\n          \"persistent\": \"False\",\n          \"boxilla_id\": \"08:00:27:c0:a1:9d\",\n          \"resizable\": \"True\",\n          \"decorations\": \"True\",\n          \"dual_head\": \"False\",\n          \"target_head_id\" : \"1\",\n          \"audio_type\": \"analog\",\n          \"always_on_top\" : \"True\" ,\n          \"fixed_position\" : \"True\",\n          \"mouse_sector\" : \"v,-1,-1,-1\" \n        }\n      ]\n    }\n  ]\n}\n</code></pre>"},{"location":"architecture/sdkvm/data_models/#four-tiles-pip-right","title":"Four tiles - PIP Right","text":"<p>Proposed UID for this Template: 00000003</p>"},{"location":"architecture/sdkvm/data_models/#template-sample_2","title":"Template Sample","text":"<pre><code>{\n  \"workspace_name\": \"WS #3\",\n  \"workspace_data_model_version_number\": \"2\",\n  \"workspace_description\": \"\",\n  \"workspace_id\": \"47b4377b49\",\n  \"workspace_created_by\" : \" A 10 digit unique ID for the creator or 'admin' if created by an admin user\",\n  \"title_bars\" : \"True\",\n  \"title_bar_connection_name\" : \"True\",\n  \"title_bar_ipaddress\" : \"True\",  \n  \"views\": [\n    {\n      \"view_name\": \"Editing\",\n      \"view_description\": \"The Editing View\",\n      \"view_template_reference\": \"00000003\",\n      \"head\": \"1\",\n      \"tiles\": [\n        {\n          \"connection_id\": \"345ca583fb\",\n          \"tile_name\": \"4K_192.168.1.169\",\n          \"tile_location\": \"0,0\",\n          \"tile_width\": \"66.66\",\n          \"tile_height\": \"1080\",\n          \"target\": \"192.168.1.169\",\n          \"type\": \"TX\",\n          \"mode\": \"Shared\",\n          \"audio\": \"False\",\n          \"usbr\": \"False\",\n          \"view_only\": \"False\",\n          \"persistent\": \"False\",\n          \"boxilla_id\": \"08:00:27:c0:a1:9d\",\n          \"resizable\": \"True\",\n          \"decorations\": \"True\",\n          \"dual_head\": \"False\",\n          \"target_head_id\" : \"1\",\n          \"audio_type\": \"analog\",\n          \"always_on_top\" : \"True\" ,\n          \"fixed_position\" : \"True\",\n          \"mouse_sector\" : \"v,-1,-1,-1\" \n        },\n        {\n          \"connection_id\": \"1f8545bef8\",\n          \"tile_name\": \"2k_192.168.1.161\",\n          \"tile_location\": \"66.66,0\",\n          \"tile_width\": \"33.33\",\n          \"tile_height\": \"33.33\",\n          \"target\": \"192.168.1.161\",\n          \"type\": \"TX\",\n          \"mode\": \"Shared\",\n          \"audio\": \"False\",\n          \"usbr\": \"False\",\n          \"view_only\": \"False\",\n          \"persistent\": \"False\",\n          \"boxilla_id\": \"08:00:27:c0:a1:9d\",\n          \"resizable\": \"True\",\n          \"decorations\": \"True\",\n          \"dual_head\": \"False\",\n          \"target_head_id\" : \"1\",\n          \"audio_type\": \"analog\",\n          \"always_on_top\" : \"True\" ,\n          \"fixed_position\" : \"True\",\n          \"mouse_sector\" : \"v,-1,-1,-1\" \n        },\n        {\n          \"connection_id\": \"1f8545bef8\",\n          \"tile_name\": \"2k_192.168.1.161\",\n          \"tile_location\": \"66.66,33.33\",\n          \"tile_width\": \"33.33\",\n          \"tile_height\": \"33.33\",\n          \"target\": \"192.168.1.161\",\n          \"type\": \"TX\",\n          \"mode\": \"Shared\",\n          \"audio\": \"False\",\n          \"usbr\": \"False\",\n          \"view_only\": \"False\",\n          \"persistent\": \"False\",\n          \"boxilla_id\": \"08:00:27:c0:a1:9d\",\n          \"resizable\": \"True\",\n          \"decorations\": \"True\",\n          \"dual_head\": \"False\",\n          \"target_head_id\" : \"1\",\n          \"audio_type\": \"analog\",\n          \"always_on_top\" : \"True\" ,\n          \"fixed_position\" : \"True\",\n          \"mouse_sector\" : \"v,-1,-1,-1\" \n        },\n        {\n          \"connection_id\": \"345ca583fb\",\n          \"tile_name\": \"4K_192.168.1.169\",\n          \"tile_location\": \"66.66,66.66\",\n          \"tile_width\": \"33.33\",\n          \"tile_height\": \"33.33\",\n          \"target\": \"192.168.1.169\",\n          \"type\": \"TX\",\n          \"mode\": \"Shared\",\n          \"audio\": \"False\",\n          \"usbr\": \"False\",\n          \"view_only\": \"False\",\n          \"persistent\": \"False\",\n          \"boxilla_id\": \"08:00:27:c0:a1:9d\",\n          \"resizable\": \"True\",\n          \"decorations\": \"True\",\n          \"dual_head\": \"False\",\n          \"target_head_id\" : \"1\",\n          \"audio_type\": \"analog\",\n          \"always_on_top\" : \"True\" ,\n          \"fixed_position\" : \"True\",\n          \"mouse_sector\" : \"v,-1,-1,-1\" \n        }\n      ]\n    }\n  ]\n}\n</code></pre>"},{"location":"architecture/sdkvm/data_models/#quad-tiles-pip-left","title":"Quad-Tiles - PIP left","text":"<p>Proposed UID for this Template: 00000004</p>"},{"location":"architecture/sdkvm/data_models/#template-sample_3","title":"Template Sample","text":"<pre><code>{\n  \"workspace_name\": \"WS #4\",\n  \"workspace_data_model_version_number\": \"2\",\n  \"workspace_description\": \"\",\n  \"workspace_id\": \"f7e19253c1\",\n  \"workspace_created_by\" : \" A 10 digit unique ID for the creator or 'admin' if created by an admin user\",\n  \"title_bars\" : \"True\",\n  \"title_bar_connection_name\" : \"True\",\n  \"title_bar_ipaddress\" : \"True\",\n  \"views\": [\n    {\n      \"view_name\": \"Editing\",\n      \"view_description\": \"The Editing View\",\n      \"view_template_reference\": \"00000004\",\n      \"head\": \"1\",\n      \"tiles\": [\n        {\n          \"connection_id\": \"1f8545bef8\",\n          \"tile_name\": \"2k_192.168.1.161\",\n          \"tile_location\": \"0,0\",\n          \"tile_width\": \"33.33\",\n          \"tile_height\": \"33.33\",\n          \"target\": \"192.168.1.161\",\n          \"type\": \"TX\",\n          \"mode\": \"Shared\",\n          \"audio\": \"False\",\n          \"usbr\": \"False\",\n          \"view_only\": \"False\",\n          \"persistent\": \"False\",\n          \"boxilla_id\": \"08:00:27:c0:a1:9d\",\n          \"resizable\": \"True\",\n          \"decorations\": \"True\",\n          \"dual_head\": \"False\",\n          \"target_head_id\" : \"1\",\n          \"audio_type\": \"analog\",\n          \"always_on_top\" : \"True\" ,\n          \"fixed_position\" : \"True\",\n          \"mouse_sector\" : \"v,-1,-1,-1\" \n        },\n        {\n          \"connection_id\": \"345ca583fb\",\n          \"tile_name\": \"4K_192.168.1.169\",\n          \"tile_location\": \"0,33.33\",\n          \"tile_width\": \"33.33\",\n          \"tile_height\": \"33.33\",\n          \"target\": \"192.168.1.169\",\n          \"type\": \"TX\",\n          \"mode\": \"Shared\",\n          \"audio\": \"False\",\n          \"usbr\": \"False\",\n          \"view_only\": \"False\",\n          \"persistent\": \"False\",\n          \"boxilla_id\": \"08:00:27:c0:a1:9d\",\n          \"resizable\": \"True\",\n          \"decorations\": \"True\",\n          \"dual_head\": \"False\",\n          \"target_head_id\" : \"1\",\n          \"audio_type\": \"analog\",\n          \"always_on_top\" : \"True\" ,\n          \"fixed_position\" : \"True\",\n          \"mouse_sector\" : \"v,-1,-1,-1\" \n        },\n        {\n          \"connection_id\": \"1f8545bef8\",\n          \"tile_name\": \"2k_192.168.1.161\",\n          \"tile_location\": \"0,66.66\",\n          \"tile_width\": \"33.33\",\n          \"tile_height\": \"33.33\",\n          \"target\": \"192.168.1.161\",\n          \"type\": \"TX\",\n          \"mode\": \"Shared\",\n          \"audio\": \"False\",\n          \"usbr\": \"False\",\n          \"view_only\": \"False\",\n          \"persistent\": \"False\",\n          \"boxilla_id\": \"08:00:27:c0:a1:9d\",\n          \"resizable\": \"True\",\n          \"decorations\": \"True\",\n          \"dual_head\": \"False\",\n          \"target_head_id\" : \"1\",\n          \"audio_type\": \"analog\",\n          \"always_on_top\" : \"True\" ,\n          \"fixed_position\" : \"True\",\n          \"mouse_sector\" : \"v,-1,-1,-1\" \n        },\n        {\n          \"connection_id\": \"345ca583fb\",\n          \"tile_name\": \"4K_192.168.1.169\",\n          \"tile_location\": \"33.33,0\",\n          \"tile_width\": \"66.66\",\n          \"tile_height\": \"100.0\",\n          \"target\": \"192.168.1.169\",\n          \"type\": \"TX\",\n          \"mode\": \"Shared\",\n          \"audio\": \"False\",\n          \"usbr\": \"False\",\n          \"view_only\": \"False\",\n          \"persistent\": \"False\",\n          \"boxilla_id\": \"08:00:27:c0:a1:9d\",\n          \"resizable\": \"True\",\n          \"decorations\": \"True\",\n          \"dual_head\": \"False\",\n          \"target_head_id\" : \"1\",\n          \"audio_type\": \"analog\",\n          \"always_on_top\" : \"True\" ,\n          \"fixed_position\" : \"True\",\n          \"mouse_sector\" : \"v,-1,-1,-1\" \n        }\n      ]\n    }\n  ]\n}\n</code></pre>"},{"location":"architecture/sdkvm/data_models/#eight-tiles-on-1-display","title":"Eight Tiles on 1-display","text":"<p>Proposed UID for this Template: 00000005</p>"},{"location":"architecture/sdkvm/data_models/#template-sample_4","title":"Template Sample","text":"<pre><code>{\n  \"workspace_name\": \"WS #5\",\n  \"workspace_data_model_version_number\": \"2\",\n  \"workspace_description\": \"\",\n  \"workspace_id\": \"cb9f97c050\",\n  \"workspace_created_by\" : \" A 10 digit unique ID for the creator or 'admin' if created by an admin user\",\n  \"title_bars\" : \"True\",\n  \"title_bar_connection_name\" : \"True\",\n  \"title_bar_ipaddress\" : \"True\",\n  \"views\": [\n    {\n      \"view_name\": \"Editing\",\n      \"view_description\": \"The Editing View\",\n      \"view_template_reference\": \"00000005\",\n      \"head\": \"1\",\n      \"tiles\": [\n        {\n          \"connection_id\": \"345ca583fb\",\n          \"tile_name\": \"4K_192.168.1.169\",\n          \"tile_location\": \"0,0\",\n          \"tile_width\": \"25.0\",\n          \"tile_height\": \"50.0\",\n          \"target\": \"192.168.1.169\",\n          \"type\": \"TX\",\n          \"mode\": \"Shared\",\n          \"audio\": \"False\",\n          \"usbr\": \"False\",\n          \"view_only\": \"False\",\n          \"persistent\": \"False\",\n          \"boxilla_id\": \"08:00:27:c0:a1:9d\",\n          \"resizable\": \"True\",\n          \"decorations\": \"True\",\n          \"dual_head\": \"False\",\n          \"target_head_id\" : \"1\",\n          \"audio_type\": \"analog\",\n          \"always_on_top\" : \"True\" ,\n          \"fixed_position\" : \"True\",\n          \"mouse_sector\" : \"v,-1,-1,-1\" \n        },\n        {\n          \"connection_id\": \"1f8545bef8\",\n          \"tile_name\": \"2k_192.168.1.161\",\n          \"tile_location\": \"25.0,0\",\n          \"tile_width\": \"25.0\",\n          \"tile_height\": \"50.0\",\n          \"target\": \"192.168.1.161\",\n          \"type\": \"TX\",\n          \"mode\": \"Shared\",\n          \"audio\": \"False\",\n          \"usbr\": \"False\",\n          \"view_only\": \"False\",\n          \"persistent\": \"False\",\n          \"boxilla_id\": \"08:00:27:c0:a1:9d\",\n          \"resizable\": \"True\",\n          \"decorations\": \"True\",\n          \"dual_head\": \"False\",\n          \"target_head_id\" : \"1\",\n          \"audio_type\": \"analog\",\n          \"always_on_top\" : \"True\" ,\n          \"fixed_position\" : \"True\", \n          \"mouse_sector\" : \"v,-1,-1,-1\" \n        },\n        {\n          \"connection_id\": \"1f8545bef8\",\n          \"tile_name\": \"2k_192.168.1.161\",\n          \"tile_location\": \"50.0,0\",\n          \"tile_width\": \"25.0\",\n          \"tile_height\": \"50.0\",\n          \"target\": \"192.168.1.161\",\n          \"type\": \"TX\",\n          \"mode\": \"Shared\",\n          \"audio\": \"False\",\n          \"usbr\": \"False\",\n          \"view_only\": \"False\",\n          \"persistent\": \"False\",\n          \"boxilla_id\": \"08:00:27:c0:a1:9d\",\n          \"resizable\": \"True\",\n          \"decorations\": \"True\",\n          \"dual_head\": \"False\",\n          \"target_head_id\" : \"1\",\n          \"audio_type\": \"analog\",\n          \"always_on_top\" : \"True\" ,\n          \"fixed_position\" : \"True\",\n          \"mouse_sector\" : \"v,-1,-1,-1\" \n        },\n        {\n          \"connection_id\": \"345ca583fb\",\n          \"tile_name\": \"4K_192.168.1.169\",\n          \"tile_location\": \"75.0,0\",\n          \"tile_width\": \"25.0\",\n          \"tile_height\": \"50.0\",\n          \"target\": \"192.168.1.169\",\n          \"type\": \"TX\",\n          \"mode\": \"Shared\",\n          \"audio\": \"False\",\n          \"usbr\": \"False\",\n          \"view_only\": \"False\",\n          \"persistent\": \"False\",\n          \"boxilla_id\": \"08:00:27:c0:a1:9d\",\n          \"resizable\": \"True\",\n          \"decorations\": \"True\",\n          \"dual_head\": \"False\",\n          \"target_head_id\" : \"1\",\n          \"audio_type\": \"analog\",\n          \"always_on_top\" : \"True\" ,\n          \"fixed_position\" : \"True\",\n          \"mouse_sector\" : \"v,-1,-1,-1\" \n        },\n        {\n          \"connection_id\": \"345ca583fb\",\n          \"tile_name\": \"4K_192.168.1.169\",\n          \"tile_location\": \"0,50.0\",\n          \"tile_width\": \"25.0\",\n          \"tile_height\": \"50.0\",\n          \"target\": \"192.168.1.169\",\n          \"type\": \"TX\",\n          \"mode\": \"Shared\",\n          \"audio\": \"False\",\n          \"usbr\": \"False\",\n          \"view_only\": \"False\",\n          \"persistent\": \"False\",\n          \"boxilla_id\": \"08:00:27:c0:a1:9d\",\n          \"resizable\": \"True\",\n          \"decorations\": \"True\",\n          \"dual_head\": \"False\",\n          \"target_head_id\" : \"1\",\n          \"audio_type\": \"analog\",\n          \"always_on_top\" : \"True\" ,\n          \"fixed_position\" : \"True\",\n          \"mouse_sector\" : \"v,-1,-1,-1\" \n        },\n        {\n          \"connection_id\": \"1f8545bef8\",\n          \"tile_name\": \"2k_192.168.1.161\",\n          \"tile_location\": \"25.0,50.0\",\n          \"tile_width\": \"25.0\",\n          \"tile_height\": \"50.0\",\n          \"target\": \"192.168.1.161\",\n          \"type\": \"TX\",\n          \"mode\": \"Shared\",\n          \"audio\": \"False\",\n          \"usbr\": \"False\",\n          \"view_only\": \"False\",\n          \"persistent\": \"False\",\n          \"boxilla_id\": \"08:00:27:c0:a1:9d\",\n          \"resizable\": \"True\",\n          \"decorations\": \"True\",\n          \"dual_head\": \"False\",\n          \"target_head_id\" : \"1\",\n          \"audio_type\": \"analog\",\n          \"always_on_top\" : \"True\" ,\n          \"fixed_position\" : \"True\",\n          \"mouse_sector\" : \"v,-1,-1,-1\" \n        },\n        {\n          \"connection_id\": \"1f8545bef8\",\n          \"tile_name\": \"2k_192.168.1.161\",\n          \"tile_location\": \"50.0,50.0\",\n          \"tile_width\": \"25.0\",\n          \"tile_height\": \"50.0\",\n          \"target\": \"192.168.1.161\",\n          \"type\": \"TX\",\n          \"mode\": \"Shared\",\n          \"audio\": \"False\",\n          \"usbr\": \"False\",\n          \"view_only\": \"False\",\n          \"persistent\": \"False\",\n          \"boxilla_id\": \"08:00:27:c0:a1:9d\",\n          \"resizable\": \"True\",\n          \"decorations\": \"True\",\n          \"dual_head\": \"False\",\n          \"target_head_id\" : \"1\",\n          \"audio_type\": \"analog\",\n          \"always_on_top\" : \"True\" ,\n          \"fixed_position\" : \"True\",\n          \"mouse_sector\" : \"v,-1,-1,-1\" \n        },\n        {\n          \"connection_id\": \"345ca583fb\",\n          \"tile_name\": \"4K_192.168.1.169\",\n          \"tile_location\": \"75.0,50.0\",\n          \"tile_width\": \"25.0\",\n          \"tile_height\": \"50.0\",\n          \"target\": \"192.168.1.169\",\n          \"type\": \"TX\",\n          \"mode\": \"Shared\",\n          \"audio\": \"False\",\n          \"usbr\": \"False\",\n          \"view_only\": \"False\",\n          \"persistent\": \"False\",\n          \"boxilla_id\": \"08:00:27:c0:a1:9d\",\n          \"resizable\": \"True\",\n          \"decorations\": \"True\",\n          \"dual_head\": \"False\",\n          \"target_head_id\" : \"1\",\n          \"audio_type\": \"analog\",\n          \"always_on_top\" : \"True\" ,\n          \"fixed_position\" : \"True\",\n          \"mouse_sector\" : \"v,-1,-1,-1\" \n        }\n      ]\n    }\n  ]\n}\n</code></pre>"},{"location":"architecture/sdkvm/data_models/#seven-tiles-on-2-displays","title":"Seven Tiles on 2-displays","text":"<p>Proposed UID for this Template: 00000006</p>"},{"location":"architecture/sdkvm/data_models/#template-sample_5","title":"Template Sample","text":"<pre><code>{\n  \"workspace_name\": \"Test\",\n  \"workspace_data_model_version_number\": \"2\",\n  \"workspace_description\": \"\",\n  \"workspace_id\": \"e2f5a378ae\",\n  \"workspace_created_by\": \"admin\",\n  \"views\": [\n    {\n      \"view_name\": \"Editing\",\n      \"view_description\": \"The Editing View\",\n      \"view_template_reference\": \"00000001\",\n      \"head\": \"1\",\n      \"tiles\": [\n        {\n          \"connection_id\": \"0\",\n          \"tile_name\": \"\",\n          \"tile_location\": \"0,0\",\n          \"tile_width\": \"100\",\n          \"tile_height\": \"100\",\n          \"width\": \"1920\",\n          \"height\": \"1080\",\n          \"target\": \"\",\n          \"user_name\": \"\",\n          \"password\": \"\",\n          \"domain\": \"\",\n          \"type\": \"\",\n          \"audio\": \"\",\n          \"usbr\": \"\",\n          \"view_only\": \"\",\n          \"persistent\": \"\",\n          \"resizable\": \"True\",\n          \"decorations\": \"True\",\n          \"dual_head\": \"False\",\n          \"target_head_id\" : \"1\",\n          \"audio_type\": \"analog\",\n          \"always_on_top\" : \"True\" ,\n          \"fixed_position\" : \"True\",\n          \"mouse_sector\" : \"v,-1,-1,-1\" \"\"\n        }\n      ]\n    },\n    {\n      \"view_name\": \"Editing\",\n      \"view_description\": \"The Editing View\",\n      \"view_template_reference\": \"00000006\",\n      \"head\": \"2\",\n      \"tiles\": [\n        {\n          \"connection_id\": \"2ebe6dce9c\",\n          \"tile_name\": \"10.211.130.103\",\n          \"tile_location\": \"25,0\",\n          \"tile_width\": \"100.0\",\n          \"tile_height\": \"100.0\",\n          \"target\": \"10.211.130.103\",\n          \"type\": \"TX\",\n          \"mode\": \"Shared\",\n          \"audio\": \"False\",\n          \"usbr\": \"False\",\n          \"view_only\": \"False\",\n          \"persistent\": \"False\",\n          \"boxilla_id\": \"\",\n          \"resizable\": \"True\",\n          \"decorations\": \"True\",\n          \"dual_head\": \"False\",\n          \"target_head_id\" : \"1\",\n          \"audio_type\": \"analog\",\n          \"always_on_top\" : \"True\" ,\n          \"fixed_position\" : \"True\",\n          \"mouse_sector\" : \"v,-1,-1,-1\" \n        },\n        {\n          \"connection_id\": \"3363f22357\",\n          \"tile_name\": \"10.211.128.14\",\n          \"tile_location\": \"0,0\",\n          \"tile_width\": \"50.0\",\n          \"tile_height\": \"33.33\",\n          \"target\": \"10.211.128.14\",\n          \"type\": \"TX\",\n          \"mode\": \"Shared\",\n          \"audio\": \"False\",\n          \"usbr\": \"False\",\n          \"view_only\": \"False\",\n          \"persistent\": \"False\",\n          \"boxilla_id\": \"\",\n          \"resizable\": \"True\",\n          \"decorations\": \"True\",\n          \"dual_head\": \"False\",\n          \"target_head_id\" : \"1\",\n          \"audio_type\": \"analog\",\n          \"always_on_top\" : \"True\" ,\n          \"fixed_position\" : \"True\",\n          \"mouse_sector\" : \"v,-1,-1,-1\" \n        },\n        {\n          \"connection_id\": \"ea806ed1cf\",\n          \"tile_name\": \"10.211.129.204\",\n          \"tile_location\": \"0,33.33\",\n          \"tile_width\": \"50.0\",\n          \"tile_height\": \"33.33\",\n          \"target\": \"10.211.129.204\",\n          \"type\": \"TX\",\n          \"mode\": \"Shared\",\n          \"audio\": \"False\",\n          \"usbr\": \"False\",\n          \"view_only\": \"False\",\n          \"persistent\": \"False\",\n          \"boxilla_id\": \"\",\n          \"resizable\": \"True\",\n          \"decorations\": \"True\",\n          \"dual_head\": \"False\",\n          \"target_head_id\" : \"1\",\n          \"audio_type\": \"analog\",\n          \"always_on_top\" : \"True\" ,\n          \"fixed_position\" : \"True\",\n          \"mouse_sector\" : \"v,-1,-1,-1\" \n        },\n        {\n          \"connection_id\": \"a647a973a0\",\n          \"tile_name\": \"10.211.129.247\",\n          \"tile_location\": \"0,66.66\",\n          \"tile_width\": \"50.0\",\n          \"tile_height\": \"33.33\",\n          \"target\": \"10.211.129.247\",\n          \"type\": \"TX\",\n          \"mode\": \"Shared\",\n          \"audio\": \"False\",\n          \"usbr\": \"False\",\n          \"view_only\": \"False\",\n          \"persistent\": \"False\",\n          \"boxilla_id\": \"\",\n          \"resizable\": \"True\",\n          \"decorations\": \"True\",\n          \"dual_head\": \"False\",\n          \"target_head_id\" : \"1\",\n          \"audio_type\": \"analog\",\n          \"always_on_top\" : \"True\" ,\n          \"fixed_position\" : \"True\",\n          \"mouse_sector\" : \"v,-1,-1,-1\" \n        },\n        {\n          \"connection_id\": \"fdad4221c9\",\n          \"tile_name\": \"10.211.129.40\",\n          \"tile_location\": \"150.0,0\",\n          \"tile_width\": \"50.0\",\n          \"tile_height\": \"33.33\",\n          \"target\": \"10.211.129.40\",\n          \"type\": \"TX\",\n          \"mode\": \"Shared\",\n          \"audio\": \"False\",\n          \"usbr\": \"False\",\n          \"view_only\": \"False\",\n          \"persistent\": \"False\",\n          \"boxilla_id\": \"\",\n          \"resizable\": \"True\",\n          \"decorations\": \"True\",\n          \"dual_head\": \"False\",\n          \"target_head_id\" : \"1\",\n          \"audio_type\": \"analog\",\n          \"always_on_top\" : \"True\" ,\n          \"fixed_position\" : \"True\",\n          \"mouse_sector\" : \"v,-1,-1,-1\" \n        },\n        {\n          \"connection_id\": \"a64a1482f5\",\n          \"tile_name\": \"10.211.130.128\",\n          \"tile_location\": \"150.0,33.33\",\n          \"tile_width\": \"50.0\",\n          \"tile_height\": \"33.33\",\n          \"target\": \"10.211.130.128\",\n          \"type\": \"TX\",\n          \"mode\": \"Shared\",\n          \"audio\": \"False\",\n          \"usbr\": \"False\",\n          \"view_only\": \"False\",\n          \"persistent\": \"False\",\n          \"boxilla_id\": \"\",\n          \"resizable\": \"True\",\n          \"decorations\": \"True\",\n          \"dual_head\": \"False\",\n          \"target_head_id\" : \"1\",\n          \"audio_type\": \"analog\",\n          \"always_on_top\" : \"True\" ,\n          \"fixed_position\" : \"True\",\n          \"mouse_sector\" : \"v,-1,-1,-1\" \n        },\n        {\n          \"connection_id\": \"5384e77b77\",\n          \"tile_name\": \"10.211.130.228\",\n          \"tile_location\": \"150.0,66.66\",\n          \"tile_width\": \"50.0\",\n          \"tile_height\": \"33.33\",\n          \"target\": \"10.211.130.228\",\n          \"type\": \"TX\",\n          \"mode\": \"Shared\",\n          \"audio\": \"False\",\n          \"usbr\": \"False\",\n          \"view_only\": \"False\",\n          \"persistent\": \"False\",\n          \"boxilla_id\": \"\",\n          \"resizable\": \"True\",\n          \"decorations\": \"True\",\n          \"dual_head\": \"False\",\n          \"target_head_id\" : \"1\",\n          \"audio_type\": \"analog\",\n          \"always_on_top\" : \"True\" ,\n          \"fixed_position\" : \"True\",\n          \"mouse_sector\" : \"v,-1,-1,-1\" \n        }\n      ]\n    },\n    {\n      \"view_name\": \"Editing\",\n      \"view_description\": \"The Editing View\",\n      \"view_template_reference\": \"00000001\",\n      \"head\": \"3\",\n      \"tiles\": [\n        {\n          \"connection_id\": \"0\",\n          \"tile_name\": \"\",\n          \"tile_location\": \"0,0\",\n          \"tile_width\": \"100\",\n          \"tile_height\": \"100\",\n          \"width\": \"1920\",\n          \"height\": \"1080\",\n          \"target\": \"\",\n          \"user_name\": \"\",\n          \"password\": \"\",\n          \"domain\": \"\",\n          \"type\": \"\",\n          \"audio\": \"\",\n          \"usbr\": \"\",\n          \"view_only\": \"\",\n          \"persistent\": \"\",\n          \"resizable\": \"True\",\n          \"decorations\": \"True\",\n          \"dual_head\": \"False\",\n          \"target_head_id\" : \"1\",\n          \"audio_type\": \"analog\",\n          \"always_on_top\" : \"True\" ,\n          \"fixed_position\" : \"True\",\n          \"mouse_sector\" : \"v,-1,-1,-1\" \n        }\n      ]\n    }\n  ]\n}\n</code></pre>"},{"location":"architecture/sdkvm/data_models/#one-tile-across-all-displays","title":"One Tile Across all Displays","text":"<p>Proposed UID for this Template: 00000007</p>"},{"location":"architecture/sdkvm/data_models/#template-sample-for-4-displays","title":"Template Sample for 4 displays","text":"<pre><code>{\n  \"workspace_name\": \"WS #2\",\n  \"workspace_data_model_version_number\": \"2\",\n  \"workspace_description\": \"\",\n  \"workspace_id\": \"713f0310a8\",\n  \"workspace_created_by\": \"admin\",\n  \"views\": [\n    {\n      \"view_name\": \"Editing\",\n      \"view_description\": \"The Editing View\",\n      \"view_template_reference\": \"00000007\n      \",\n      \"head\": \"1\",\n      \"tiles\": [\n        {\n          \"connection_id\": \"3363f22357\",\n          \"tile_name\": \"10.211.128.14\",\n          \"tile_location\": \"0,0\",\n          \"tile_width\": \"400.0\",\n          \"tile_height\": \"100.0\",\n          \"target\": \"10.211.128.14\",\n          \"type\": \"TX\",\n          \"mode\": \"Shared\",\n          \"audio\": \"False\",\n          \"usbr\": \"False\",\n          \"view_only\": \"False\",\n          \"persistent\": \"False\",\n          \"boxilla_id\": \"\",\n          \"resizable\": \"True\",\n          \"decorations\": \"True\",\n          \"dual_head\": \"False\",\n          \"target_head_id\" : \"1\",\n          \"audio_type\": \"analog\",\n          \"always_on_top\" : \"True\" ,\n          \"fixed_position\" : \"True\",\n          \"mouse_sector\" : \"v,-1,-1,-1\" \n        }\n      ]\n    }\n  ]\n}\n</code></pre> <p>Proposed UID for this Template: 00000008</p>"},{"location":"architecture/sdkvm/data_models/#template-sample-for-4-displays-in-a-2x2-matrix","title":"Template Sample for 4 displays in a 2X2 Matrix","text":"<pre><code>{\n  \"workspace_name\": \"WS #3\",\n  \"workspace_data_model_version_number\": \"2\",\n  \"workspace_description\": \"\",\n  \"workspace_id\": \"5a82f9fbb4\",\n  \"workspace_created_by\": \"admin\",\n  \"views\": [\n    {\n      \"view_name\": \"Editing\",\n      \"view_description\": \"The Editing View\",\n      \"view_template_reference\": \"00000008\",\n      \"head\": \"1\",\n      \"tiles\": [\n        {\n          \"connection_id\": \"8c5c339d24\",\n          \"tile_name\": \"PE\",\n          \"tile_location\": \"0,0\",\n          \"tile_width\": \"200.0\",\n          \"tile_height\": \"200.0\",\n          \"target\": \"192.168.1.9\",\n          \"type\": \"TX\",\n          \"mode\": \"Shared\",\n          \"audio\": \"False\",\n          \"usbr\": \"False\",\n          \"view_only\": \"False\",\n          \"persistent\": \"False\",\n          \"boxilla_id\": \"\",\n          \"resizable\": \"True\",\n          \"decorations\": \"False\",\n          \"dual_head\": \"False\",\n          \"target_head_id\" : \"1\",\n          \"audio_type\": \"analog\",\n          \"always_on_top\" : \"True\" ,\n          \"fixed_position\" : \"True\",\n          \"mouse_sector\" : \"v,-1,-1,-1\" \n        }\n      ]\n    }\n  ]\n}\n</code></pre> <p>Proposed UID for this Template: 00000009</p>"},{"location":"architecture/sdkvm/data_models/#template-sample-for-6-tiles-in-a-3x2-matrix","title":"Template Sample for 6 tiles in a 3X2 Matrix","text":"<pre><code>{\n    \"workspace_data_model_version_number\": \"1\",\n    \"workspace_name\": \"6 tiles\",\n    \"workspace_description\": \"6 tiles\",\n    \"workspace_id\": \"18\",\n    \"workspace_created_by\": \"Boxilla\",\n    \"views\": [\n        {\n            \"view_name\": \"View Name 1\",\n            \"view_Description\": \"\",\n            \"view_template_reference\": \"00000009\",\n            \"head\": 1,\n            \"tiles\": [\n                {\n                   \"tile_name\": \"4K_OP_169_Shared\",\n                    \"tile_location\": \"0.0,0.0\",\n                    \"tile_width\": \"33.33\",\n                    \"tile_height\": \"50.0\",\n                    \"connection_id\": \"50\",\n                    \"connection_name\": \"4K_OP_169_Shared\",\n                    \"user_name\": \"\",\n                    \"password\": \"\",\n                    \"target\": \"192.168.1.169\",\n                    \"type\": \"TX\",\n                    \"mode\": \"Shared\",\n                    \"port\": \"\",\n                    \"domain\": \"\",\n                    \"audio\": \"True\",\n                    \"audio_type\": \"analog\",\n                    \"usbr\": \"False\",\n                    \"view_only\": \"False\",\n                    \"persistent\": \"False\",\n                    \"dual_head\": \"False\",\n                    \"boxilla_id\": \"08:00:27:c0:a1:9d\",\n                    \"resizable\": \"True\",\n                    \"decorations\": \"True\",\n                    \"target_head_id\": \"1\",\n                    \"fixed_position\": \"False\",\n                    \"always_on_top\": \"False\",\n                    \"width\": \"1920\",\n                    \"height\": \"1080\",\n                    \"mouse_sector\" : \"v,-1,-1,-1\"\n                },\n                {\n                    \"tile_name\": \"PCoIPVM_176\",\n                    \"tile_location\": \"0.0,50.0\",\n                    \"tile_width\": \"33.33\",\n                    \"tile_height\": \"50.0\",\n                    \"connection_id\": \"61\",\n                    \"connection_name\": \"PCoIPVM_176\",\n                    \"user_name\": \"BBOX\",\n                    \"password\": \"cloud\",\n                    \"target\": \"192.168.1.176\",\n                    \"type\": \"PCOIP\",\n                    \"mode\": \"Private\",\n                    \"port\": \"\",\n                    \"domain\": \"\",\n                    \"audio\": \"False\",\n                    \"audio_type\": \"analog\",\n                    \"usbr\": \"False\",\n                    \"view_only\": \"False\",\n                    \"persistent\": \"False\",\n                    \"dual_head\": \"\",\n                    \"boxilla_id\": \"08:00:27:c0:a1:9d\",\n                    \"resizable\": \"True\",\n                    \"decorations\": \"True\",\n                    \"target_head_id\": \"1\",\n                    \"fixed_position\": \"False\",\n                    \"always_on_top\": \"False\",\n                    \"width\": \"1920\",\n                    \"height\": \"1080\",\n                    \"mouse_sector\" : \"v,-1,-1,-1\"\n                },\n                {\n                    \"tile_name\": \"2K_OP_161_Shared\",\n                    \"tile_location\": \"33.33,0.0\",\n                    \"tile_width\": \"33.33\",\n                    \"tile_height\": \"50.0\",\n                    \"connection_id\": \"51\",\n                    \"connection_name\": \"2K_OP_161_Shared\",\n                    \"user_name\": \"\",\n                    \"password\": \"\",\n                    \"target\": \"192.168.1.161\",\n                    \"type\": \"TX\",\n                    \"mode\": \"Shared\",\n                    \"port\": \"\",\n                    \"domain\": \"\",\n                    \"audio\": \"True\",\n                    \"audio_type\": \"analog\",\n                    \"usbr\": \"False\",\n                    \"view_only\": \"False\",\n                    \"persistent\": \"False\",\n                    \"dual_head\": \"False\",\n                    \"boxilla_id\": \"08:00:27:c0:a1:9d\",\n                    \"resizable\": \"True\",\n                    \"decorations\": \"True\",\n                    \"target_head_id\": \"1\",\n                    \"fixed_position\": \"False\",\n                    \"always_on_top\": \"False\",\n                    \"width\": \"1920\",\n                    \"height\": \"1080\",\n                    \"mouse_sector\" : \"v,-1,-1,-1\"\n                },\n                {\n                    \"tile_name\": \"ZU_TX_172_default\",\n                    \"tile_location\": \"33.33,50.0\",\n                    \"tile_width\": \"33.33\",\n                    \"tile_height\": \"50.0\",\n                    \"connection_id\": \"59\",\n                    \"connection_name\": \"ZU_TX_172_default\",\n                    \"user_name\": \"\",\n                    \"password\": \"\",\n                    \"target\": \"192.168.1.172\",\n                    \"type\": \"TX\",\n                    \"mode\": \"Shared\",\n                    \"port\": \"\",\n                    \"domain\": \"\",\n                    \"audio\": \"False\",\n                    \"audio_type\": \"analog\",\n                    \"usbr\": \"False\",\n                    \"view_only\": \"False\",\n                    \"persistent\": \"False\",\n                    \"dual_head\": \"False\",\n                    \"boxilla_id\": \"08:00:27:c0:a1:9d\",\n                    \"resizable\": \"True\",\n                    \"decorations\": \"True\",\n                    \"target_head_id\": \"1\",\n                    \"fixed_position\": \"False\",\n                    \"always_on_top\": \"False\",\n                    \"width\": \"1920\",\n                    \"height\": \"1080\",\n                    \"mouse_sector\" : \"v,-1,-1,-1\"\n                },\n                {\n                    \"tile_name\": \"RDP_170_DellNUK\",\n                    \"tile_location\": \"66.66,0.0\",\n                    \"tile_width\": \"33.33\",\n                    \"tile_height\": \"50.0\",\n                    \"connection_id\": \"53\",\n                    \"connection_name\": \"RDP_170_DellNUK\",\n                    \"user_name\": \"BBOX\",\n                    \"password\": \"cloud\",\n                    \"target\": \"192.168.1.170\",\n                    \"type\": \"RDP\",\n                    \"mode\": \"Private\",\n                    \"port\": \"3389\",\n                    \"domain\": \"\",\n                    \"audio\": \"False\",\n                    \"audio_type\": \"analog\",\n                    \"usbr\": \"False\",\n                    \"view_only\": \"False\",\n                    \"persistent\": \"False\",\n                    \"dual_head\": \"False\",\n                    \"boxilla_id\": \"08:00:27:c0:a1:9d\",\n                    \"resizable\": \"True\",\n                    \"decorations\": \"True\",\n                    \"target_head_id\": \"1\",\n                    \"fixed_position\": \"False\",\n                    \"always_on_top\": \"False\",\n                    \"width\": \"1920\",\n                    \"height\": \"1080\",\n                    \"mouse_sector\" : \"v,-1,-1,-1\"\n                },\n                {\n                    \"tile_name\": \"Ubuntu_ZU_172_shared\",\n                    \"tile_location\": \"66.66,50.0\",\n                    \"tile_width\": \"33.33\",\n                    \"tile_height\": \"50.0\",\n                    \"connection_id\": \"55\",\n                    \"connection_name\": \"Ubuntu_ZU_172_shared\",\n                    \"user_name\": \"\",\n                    \"password\": \"\",\n                    \"target\": \"192.168.1.172\",\n                    \"type\": \"TX\",\n                    \"mode\": \"Shared\",\n                    \"port\": \"\",\n                    \"domain\": \"\",\n                    \"audio\": \"False\",\n                    \"audio_type\": \"analog\",\n                    \"usbr\": \"False\",\n                    \"view_only\": \"False\",\n                    \"persistent\": \"False\",\n                    \"dual_head\": \"False\",\n                    \"boxilla_id\": \"08:00:27:c0:a1:9d\",\n                    \"resizable\": \"True\",\n                    \"decorations\": \"True\",\n                    \"target_head_id\": \"1\",\n                    \"fixed_position\": \"False\",\n                    \"always_on_top\": \"False\",\n                    \"width\": \"1920\",\n                    \"height\": \"1080\",\n                    \"mouse_sector\" : \"v,-1,-1,-1\"\n                }\n            ]\n        }\n    ]\n}\n</code></pre>"},{"location":"architecture/sdkvm/dualboot/","title":"Dual Boot Ubuntu 22.04 alongside Ubuntu 22.04","text":""},{"location":"architecture/sdkvm/dualboot/#preparing-the-sdkvm-unit","title":"Preparing the SDKVM Unit","text":"<p>This article discusses installing two different versions of Ubuntu (or two copies of the same version of Ubuntu side by side) in a \u201cDual boot\u201d configuration. We are using a UEFI-based system as opposed to a legacy BIOS-based system to achieve our goal. The goal is to create a system which allows us to switch between the two instances of the operating system by switching the EFI boot order rather than rely on having to make manual selections from a GRUB menu.</p> <p>Note: Although we are using the Ubuntu distribution here, the process is applicable to other Linux distributions. For example Fedora alongside Fedora, etc.</p> <p>Step 1: Create a bootable Ubuntu USB drive. Refer to the following tutorial for instructions.</p> <p>https://ubuntu.com/tutorials/create-a-usb-stick-on-ubuntu#1-overview</p> <p>Step 2: Boot your system from the USB key by selecting the USB option from the boot menu (or selecting that option in your bios boot order configuration). These options are normally accessible by hitting designated keys during the early boot phase. For example on some systems hitting F7 will bring up a boot menu and hitting the DEL or ESC key will bring up the Bios Configuration Menu.</p> <p>Step 3: After booting from USB key and starting the installation process, the installer will prompt for a disk location to install the Ubuntu. Select the \u201cSomething else\u201d option.</p> <p></p> <p>Step 4: Create the partitions as defined in the table below. For this example we are using a 250 GB disk and we have sized the partitions accordingly. Given the size of the disk you are using you can change the size or scheme of the partition but the partitions marked in BOLD are essential for dual boot.</p> <p>Select the options:</p> <ul> <li>Primary</li> <li>Beginning of this space</li> </ul> <p>And then the options specified in the table below</p> Partition Number Partition Name Partition Size Mount Point File System Type Label Partition 1 EFI A 100 MB leave blank EFI System Partition BOOT_A 2 Ubuntu OS A 50 GB leave blank Ext4 Journaling File System OS_A /dev/nvme0n1p2 3 SWAP 10 GB leave blank Ext4 Journaling File System SWAP 4 EFI B 100 MB leave blank EFI System Partition BOOT_B 5 Ubuntu OS B 50 GB / Ext4 Journaling File System OS_B /dev/nvme0n1p4 6 Data Partition 1 70 GB leave blank Ext4 Journaling File System DATA_A 7 Data Partition 2 70 GB leave blank Ext4 Journaling File System DATA_B <p></p> <p>Step 5: Select partition #5 to install the Ubuntu OS. Define the mount point as \u201c/\u201d and format the partition using ext4 formatting. </p> <p>Note: If required, please refer to the following link for more detailed Ubuntu install directions.</p> <p>Step 6: The installer will install the bootloader and configuration files into EFI A partition #1 and OS in partition #5. Once the installation is complete, the system will boot up with EFI A on partition #1 and the GRUB bootloader will load the OS installed in partition #5.</p> <p>Step 7: After successful login into Ubuntu OS B, we need to move the EFI bootloader from EFI A partition #1 to EFI B partition #4. For this, perform the below given operations.</p> <p>A). Mount EFI B partition temporarily: sudo mount /dev/nvme0n1p4 /mnt</p> <p>B). Copy EFI files from EFI A to EFI B: sudo cp -R /boot/efi/EFI /mnt/</p> <p>C). Unmount EFI B partition: sudo umount /mnt</p> <p>D). Get the UUID for EFI B partition /dev/nvme0n1p4: sudo blkid -s UUID -o value /dev/nvme0n1p4</p> <p>E). Replace the UUID of /dev/nvme0n1p1 in /etc/fstab (/boot/efi) with the UUID associated with /dev/nvme0n1p4</p> <p><pre><code>root@tester:~# sudo blkid -s UUID -o value /dev/nvme0n1p4\n43F5-E57Y\n\nroot@tester:~# cat /etc/fstab\n# /etc/fstab: static file system information.\n#\n# Use 'blkid' to print the universally unique identifier for a\n# device; this may be used with UUID= as a more robust way to name devices\n# that works even if disks are added and removed. See fstab(5).\n#\n# &lt;file system&gt; &lt;mount point&gt;   &lt;type&gt;  &lt;options&gt;       &lt;dump&gt;  &lt;pass&gt;\n# / was on /dev/nvme0n1p2 during installation\nUUID=6916e733-647a-4ce8-8b0c-61c4197000ef /               ext4    errors=remount-ro 0       1\n# /boot/efi was on /dev/nvme0n1p1 during installation\nUUID=45D1-4A56  /boot/efi       vfat    umask=0077      0       1\n# swap was on /dev/nvme0n1p3 during installation\nUUID=0811a10d-3312-48a7-a850-0c113d8bfdb8 none            swap    sw  \n</code></pre> Step 8: Now install Ubuntu A to the Ubuntu OS A partition. For that repeat steps 1 to 3. At the partitioning screen, select partition #2 for Ubuntu OS A. Define the mount point as \u201c/\u201d and change the \"use as\" setting from \"Do not use the partition to\" \"Ext4 Journaling File System\".</p> <p>Note: If required, please refer to the following link for more detailed Ubuntu install directions.</p> <p>After finishing step #8, you have UBUNTU OS A and UBUNTU OS B installed on partition #2 and partition #5 respectively. </p> <ul> <li>The EFI configuration installed on partition #1 will point to Ubuntu OS A.</li> <li>The EFI configuration installed on partition #4 will points to Ubuntu OS B.</li> </ul> <p>The next step is to use the EFI boot variables to switch between two Ubuntu instances. For this, we will use efibootmgr command. This allows us to alter the boot options from userspace.</p> <p>efibootmgr -v will dump the current boot options. Ideally, we want to keep only the OS A and OS B boot options and delete all the others, but depending on your requirement, you may need to alter the boot options.</p> <p><pre><code>root@tester:~# efibootmgr -v\nBootCurrent: 0003\nTimeout: 1 seconds\nBootOrder: 0003,0000,0001,0002,0004,0005\nBoot0000* Ubuntu-OS-A  HD(1,GPT,d92d26b7-1251-49f7-819e-742475c27581,0x800,0x30000)/File(\\EFI\\UBUNTU\\SHIMX64.EFI)\nBoot0001* Ubunut-OS-B  HD(4,GPT,9c85e16a-f97a-4b9b-bd25-64217d1b1884,0x6ff3000,0x30000)/File(\\EFI\\UBUNTU\\SHIMX64.EFI)\nBoot0002* UEFI:CD/DVD Drive     BBS(129,,0x0)\nBoot0003* ubuntu        HD(1,GPT,d92d26b7-1251-49f7-819e-742475c27581,0x800,0x30000)/File(\\EFI\\UBUNTU\\SHIMX64.EFI)\nBoot0004* UEFI:Removable Device BBS(130,,0x0)\nBoot0005* UEFI:Network Device   BBS(131,,0x0)\n</code></pre> Delete all of the boot options below using the following command. <code>sudo efibootmgr -b &lt;Boot Number&gt; -B</code></p> <p>Example: sudo efibootmgr -b 0000 -B to delete the boot entry at 0000, and similarly for the rest of the boot entries by referencing the corresponding boot entry number.</p> <p>Add two new boot entries for DESKVUE OS A and DESKVUE OS B</p> <pre><code>sudo efibootmgr -c -d /dev/nvme0n1 -p 1 -L \"DESKVUE-OS-A\" -l '\\EFI\\UBUNTU\\SHIMX64.EFI'\nsudo efibootmgr -c -d /dev/nvme0n1 -p 4 -L \"DESKVUE-OS-B\" -l '\\EFI\\UBUNTU\\SHIMX64.EFI'\n</code></pre> <p>Switch the boot order from user space to boot from other OS after the next reboot.</p> <pre><code>sudo efibootmgr -o 0000,0001 -&gt; To boot from OS A\nsudo efibootmgr -o 0001,0000 -&gt; To boot from OS B\n</code></pre>"},{"location":"architecture/sdkvm/dualboot/#additional-information","title":"Additional Information","text":"<p>The following script may be useful in preparing the EFI boot configuration</p> <pre><code>#!/bin/bash\necho \"Removing existing boot records\"\nsudo efibootmgr -b 0000 -B \nsudo efibootmgr -b 0001 -B \nsudo efibootmgr -b 0002 -B \nsudo efibootmgr -b 0003 -B \nsudo efibootmgr -b 0004 -B \nsudo efibootmgr -b 0005 -B \nsudo efibootmgr -b 0006 -B \nsudo efibootmgr -b 0007 -B \nsudo efibootmgr -b 0008 -B \nsudo efibootmgr -b 0009 -B \nsudo efibootmgr -b 000A -B \nsudo efibootmgr -b 000B -B \nsudo efibootmgr -b 000C -B \necho \"Creating boot entries for sdkvm OS partitions\"\nsudo efibootmgr -c -d /dev/nvme0n1 -p 1 -L \"DESKVUE-OS-A\" -l '\\EFI\\UBUNTU\\SHIMX64.EFI'\nsudo efibootmgr -c -d /dev/nvme0n1 -p 4 -L \"DESKVUE-OS-B\" -l '\\EFI\\UBUNTU\\SHIMX64.EFI'\nsudo efibootmgr -o 0000,0001\nsudo efibootmgr -v\n</code></pre>"},{"location":"architecture/sdkvm/dualboot/#understand-efi-boot","title":"Understand EFI Boot","text":"<ol> <li> <p>EFI boot variables are typically stored in the non-volatile memory of the motherboard, which is often implemented using a flash memory chip. This memory is separate from the storage provided by the hard disk partitions or SSDs.</p> </li> <li> <p>The EFI System Partition (ESP) on the storage device, which is usually a hard disk or an SSD, contains EFI boot loaders and other EFI-related files, but not the EFI boot variables themselves.</p> </li> <li> <p>EFI boot variables cannot be directly cloned from one system to another using imaging tools since they are specific to the system's firmware and hardware configuration.</p> </li> <li> <p>The Linux kernel accesses EFI boot variables through EFI runtime services provided by the system firmware (BIOS), utilizing functions such as GetVariable().</p> </li> <li> <p>The specific implementation of EFI variable access in the Linux kernel can be found in the drivers/firmware/efi/vars.c file.</p> </li> <li> <p>When transferring EFI boot variables between different systems, it's advised to manually configure them or use appropriate tools provided by the target system's firmware or operating system.</p> </li> </ol> <p>Summary: It is not possible to clone the boot variable directly using any imaging tool due to the nature of their storage. The standard way of doing this is system manufacturer should have tools to program the boot options into motherboard. </p> <p>Alternatively, we can add support in our firmware to add the boot entries using efibootmgr command when the system boots up for the first time. </p>"},{"location":"architecture/sdkvm/key_bindings/","title":"KeyBindings using XbindKeys","text":"<ul> <li>xbindkeys</li> <li>Graphical utility launch: xbindkeys-config</li> <li>Installing: sudo apt -y install xbindkeys</li> <li>To reload the configuration: xbindkeys -p </li> </ul> <pre><code># Examples of commands:\n\n\"xbindkeys_show\" \n  control+shift + q\n\n\n\"/home/snuc/Downloads/Postman/app/postman\"\n  Control+Shift+Mod2 + F1\n\n\"/home/snuc/FlutterEvaluation/sdkvm_osd/build/linux/x64/debug/bundle/blackbox\"\n  Control+Shift+Mod2 + F2\n</code></pre>"},{"location":"architecture/sdkvm/key_bindings/#sdkvm-key-bindings","title":"SDKVM Key Bindings","text":""},{"location":"architecture/sdkvm/key_bindings/#workspace-selection","title":"Workspace Selection","text":"<p>To select a predefined workspace - Ctrl + Shirt + F(n), where n is the workspace number.</p> <p>So for example</p> <ul> <li>Ctrl + Shirt + F1 - select workspace 1</li> <li>Ctrl + Shirt + F2 - select workspace 2</li> <li>Ctrl + Shirt + F3 - select workspace 3</li> <li>..........</li> <li> <p>Ctrl + Shirt + F8 - select workspace 8</p> </li> <li> <p>Ctrl + Shirt + F9 - terminate the current workspace</p> </li> <li>Ctrl + Shirt + F10 - restore the current workspace to its default positions.</li> </ul>"},{"location":"architecture/sdkvm/key_bindings/#osd-control","title":"OSD Control","text":"<ul> <li>Ctrl + Shirt + F11 - reposition the mouse in the centre of head 0</li> <li>Ctrl + Shirt + F12 - Toggle the OSD to full screen</li> <li>Ctrl + Shirt + down arrow - Minimise the OSD</li> </ul>"},{"location":"architecture/sdkvm/key_bindings/#controlling-video-windows","title":"Controlling Video Windows","text":"<ul> <li>Windows Key + up arrow - Maximise the currently active client view or video</li> <li>Windows Key + down arrow - Restore the currently active client view or video to its original size</li> </ul>"},{"location":"architecture/sdkvm/key_bindings/#xbindrc-file","title":"xbindrc file","text":"<pre><code>\"xbindkeys_show\"\n   control+shift + q\n\n#Workspace1\n\"python3 /home/snuc/PythonGTK/workspaceserver/launch_workspace.py -w1\"\n   Control+Shift+Mod2 + F1\n\n#Workspace2\n\"python3 /home/snuc/PythonGTK/workspaceserver/launch_workspace.py -w2\"\n   Control+Shift+Mod2 + F2\n\n#Workspace3\n\"python3 /home/snuc/PythonGTK/workspaceserver/launch_workspace.py -w3\"\n   Control+Shift+Mod2 + F3\n\n#Workspace4\n\"python3 /home/snuc/PythonGTK/workspaceserver/launch_workspace.py -w4\"\n   Control+Shift+Mod2 + F4\n\n#Workspace5\n\"python3 /home/snuc/PythonGTK/workspaceserver/launch_workspace5.py\"\n   Control+Shift+Mod2 + F5\n\n#Workspace6\n\"python3 /home/snuc/PythonGTK/workspaceserver/launch_workspace6.py\"\n   Control+Shift+Mod2 + F6\n\n#Terminate\n\"/home/snuc/KeyBindings/Scripts/terminate_workspace.sh\"\n   Control+Shift+Mod2 + F9\n\n#Reposition\n\"/home/snuc/KeyBindings/Scripts/resposition.sh\"\n   Control+Shift+Mod2 + F10\n\n#Home-Cursor\n\"xdotool mousemove 960 540\"\n   Control+Shift+Mod2 + F11\n\n#sdkvm\n\"wmctrl -a Blackbox; wmctrl -r Blackbox -b add,fullscreen\"\n   Control+Shift+Mod2 + F12\n\n#Minimise\n\"xdotool getactivewindow windowminimize\"\n    m:0x15 + c:116\n    Control+Shift+Mod2 + Down \n\n#\n# End of xbindkeys configuration\n</code></pre>"},{"location":"architecture/sdkvm/key_bindings/#keybinding-using-gsettings","title":"KeyBinding Using GSettings","text":"<ul> <li>Get current bindings</li> </ul> <pre><code>gsettings get org.gnome.settings-daemon.plugins.media-keys custom-keybindings\n</code></pre> <ul> <li>If the list obtained in the previous step was empty -&gt; Put a custom path in the list:</li> </ul> <pre><code>  gsettings set org.gnome.settings-daemon.plugins.media-keys custom-keybindings \"['/org/gnome/settings-daemon/plugins/media-keys/custom-keybindings/custom1/']\"\n\n  ```\n\nElse -&gt; extend the list. Suppose the obtained value was ['.../custom1/', '.../custom2/']. Do:\n\n```sh\n\ngsettings set org.gnome.settings-daemon.plugins.media-keys custom-keybindings \"['.../custom1/', '.../custom2/', '.../custom3/']\"\n</code></pre> <ul> <li>Add the command:</li> </ul> <p>```sh</p> <p>gsettings set ...media-keys.custom-keybinding:.../media-keys/custom-keybindings/custom3/ command \"\" <p>```</p> <ul> <li>Add the binding:</li> </ul> <pre><code>  gsettings set ...media-keys.custom-keybinding:.../media-keys/custom-keybindings/custom3/ binding \"&lt;binding&gt;\"\n</code></pre>"},{"location":"architecture/sdkvm/key_bindings/#links","title":"Links","text":"<p>-Manage custom shortcuts keybindings via files and dconf commands on Ubuntu</p>"},{"location":"architecture/sdkvm/leostream_broker/","title":"Leostream Broker","text":""},{"location":"architecture/sdkvm/leostream_broker/#installing-and-configuring-the-leostream-broker","title":"Installing and Configuring the Leostream Broker","text":"<p>Leostream Installation and Configuration</p>"},{"location":"architecture/sdkvm/leostream_broker/#installing-and-configuring-the-teradici-connection-manager","title":"Installing and Configuring the Teradici Connection Manager","text":"<p>Teradici Connection Manager Installation and Configuration</p>"},{"location":"architecture/sdkvm/leostream_brokered_connections/","title":"Leostream Brokered Connections","text":""},{"location":"architecture/sdkvm/leostream_brokered_connections/#evaluation-infrastructure","title":"Evaluation Infrastructure","text":"<p>The test environment uses a number of virtual machines hosted on a Power Edge T330 ESXi server. Resource limitations (mainly free RAM) on the ESXi server forced us to use minimal Linux servers with small foot prints (512 MB RAM allocated individually).</p>"},{"location":"architecture/sdkvm/leostream_brokered_connections/#configuration-of-hardware","title":"Configuration of Hardware","text":""},{"location":"architecture/sdkvm/leostream_brokered_connections/#internal-to-the-esxi-server","title":"Internal to the ESXi server:","text":"<ul> <li>1 x Leostream Broker running on Linux</li> <li>1 x Active Directory Domain Controller (via Samba) running on Linux</li> <li>1 x LDAP Server running on Linux</li> <li>2 x Windows 10 Desktops (joined to the Active Directory Domain) running the Leostream Agent</li> <li>2 x Linux Desktops (1 x Fedora, 1 x open SUSE) running the Leostream Agent</li> </ul>"},{"location":"architecture/sdkvm/leostream_brokered_connections/#external-to-the-esxi-server","title":"External to the ESXi server:","text":"<ul> <li>2 x Windows 7 Desktops running the Leostream Connect software (doubled up from debug terminals)</li> </ul>"},{"location":"architecture/sdkvm/leostream_brokered_connections/#launching-connections-via-leostream-broker","title":"Launching Connections via Leostream Broker","text":"<p>Users have two ways of authenticating:</p> <ul> <li>Via defined authentication servers</li> <li>Locally defined Leostream users</li> </ul> <p>Two authentication servers are currently defined in the test setup in the following order of precedence: </p> <ul> <li>Active Directory Domain</li> <li>OpenLDAP</li> </ul> <p>After successful authentication, the user may launch a connection to an available desktop from the desktops assigned to them from a defined pool.</p> <p>When launching connections the Leostream software automatically passes the same credentials which were supplied during authentication and thus if that user is not defined on the desktop been connected to then the user will normally be presented with an error message followed by a prompt to manually provide credentials.</p>"},{"location":"architecture/sdkvm/leostream_brokered_connections/#truth-table-for-desktop-authentication","title":"Truth Table For Desktop Authentication:","text":"AD Domain User openLDAP User AD Domain Desktop Non AD Domain Desktop Automatic Desktop Logon X X Manual Desktop Logon X X X <p>There are two pools currently defined in the test setup with the policy defined to allocate one desktop per pool assigned to a user.</p> <p>Leostream Pools Summary:</p> Pool Name Desktop 1 Desktop 2 Windows Windows10EntNo1 Windows10EntNo2 Linux Fedora36No1 OpenSuseLeapNo1 <p>Desktop AD Domain Summary:</p> Desktop Name AD Domain Non AD Domain Windows10EntNo1 X Windows10EntNo2 X Fedora36No1 X OpenSuseLeapNo1 X"},{"location":"architecture/sdkvm/leostream_brokered_connections/#active-directory-domain-controller-configuration-and-setup","title":"Active Directory Domain Controller Configuration and Setup","text":"<p>The Active Directory Domain Controller runs on a Linux distro provided by TurnKey Linux</p>"},{"location":"architecture/sdkvm/leostream_brokered_connections/#useful-links","title":"Useful Links","text":"<ul> <li>Domain Controller</li> <li>Domain Controller Documentation</li> </ul>"},{"location":"architecture/sdkvm/leostream_brokered_connections/#hardware-requirements","title":"Hardware Requirements","text":"<ul> <li>1 VCPU, 8 GB of space and 512 MB of memory.</li> </ul> <p>Note: If changing network settings (e.g. post installation) be sure to rerun the domain provision inithook /usr/lib/inithooks/bin/domain-controller.py.</p> <p>The underlying software providing the domain services is Samba (Samba is actually capable of providing Active Directory Domain Services though work is in progress to develop support for the more advanced Active Directory Features e.g. Roaming Profiles).</p> <p>The main samba config file is located in /etc/samba/smb.conf.</p> <p>Though there is a web interface for managing the Samba users and the Active Directory configuration, but this is very limited.</p> <p>Another option is to open a local / remote (SSH is supported out of the box) terminal on the server and use the samba-tool CLI to affect the desired changes.</p> <p>Another option which is significantly more user-friendly is to remotely manage it via RSAT (use the Active Directory Computers and Users component) on a Windows PC on the domain. Later builds of Windows 10 have RSAT available and just require it to be \u201cenabled\u201d.</p> <p>When adding desktops to the domain use the Samba \u201cAdministrator\u201d account that you specified during the initial installation and ensure that all desktops which are joining are using the Active Directory Domain Controller as their primary DNS.</p> <p>The default netbios name is \u201cDC1\u201d, and this should be used in any domain functions which may use the netbios name.</p> <p>The domain in the test setup is emerald.lan though this may also be referred to as the \u201crealm\u201d.</p> <p>From a configuration perspective one will primarily be assigning specific users to Groups which the Leostream Broker uses to determine what policy (can be loosely thought of as configuration) applies to a particular user.  </p>"},{"location":"architecture/sdkvm/leostream_brokered_connections/#openldap-server-specific","title":"OpenLDAP Server Specific","text":"<p>The OpenLDAP Server runs on a Linux distro provided by  TurnKey Linux.</p>"},{"location":"architecture/sdkvm/leostream_brokered_connections/#hardware-requirements_1","title":"Hardware Requirements","text":""},{"location":"architecture/sdkvm/leostream_brokered_connections/#-1-vcpu-6-gb-of-space-and-512-mb-of-memory","title":"- 1 VCPU, 6 GB of space and 512 MB of memory.","text":"<p>The Installation is intuitive through a web interface provides functions for managing the OpenLDAP service.</p> <p>It does require a domain to manage the LDAP service (i.e. the directory structure for users); this has been specified as emerald.com.</p> <p>From a configuration perspective one will primarily be setting the OU attributes for specific users which the Leostream Broker uses to determine what policy (can be loosely thought of as configuration) applies to a particular user.  </p>"},{"location":"architecture/sdkvm/leostream_brokered_connections/#leostream-connect-configuration-and-setup","title":"Leostream Connect Configuration and Setup","text":"<ul> <li>When a user logs in the software will automatically launch the first connection assigned to the user from the Leostream Broker (this setting can be modified).</li> <li>All connections are launched with the user credentials provided to the Leostream Broker when logging in the Leostream Connect software thus user account credentials should optimally be synchronised between the Leostream Broker and all Desktops running the Leostream Agent otherwise credentials will have to be input manually per connection launch (one disadvantage of using internal Leostream Broker users). In this case a clunky workaround is to manually define all user accounts to be the same on the Leostream Broker and the Desktops running the Leostream Agent but this is not ideal for larger setups both in the initial configuration and ongoing maintenance.</li> <li>Centralised user control and management via a network domain is the only realistic solution for Leostream deployments with a significant number of users and desktops.</li> </ul>"},{"location":"architecture/sdkvm/leostream_brokered_connections/#leostream-agent-specific","title":"Leostream Agent Specific","text":"<ul> <li>Assuming the Leostream Agent successfully installed and configured then the desktop will automatically register as a resource on the Leostream Broker.</li> <li>Windows 10 installation and configuration was trivial.</li> <li>Linux installation is more challenging. It has been installed on Fedora and openSUSE Leap, but Ubuntu or openSuse Tumbleweed require more research.</li> </ul>"},{"location":"architecture/sdkvm/leostream_brokered_connections/#notes-on-linux-installation","title":"Notes on Linux Installation","text":"<ul> <li>You must be logged in as root for installation to complete successfully i.e. no sudo.</li> <li>The agent installer uses Java which requires the JDK to be installed on the desktop. Linux distros don\u2019t come with the official Oracle JDK but rather the open source version of OpenJDK. </li> <li>OpenSUSE Leap does require insserv-compat to be installed.</li> <li>Note: OpenSUSE uses a different desktop for RDP connections than its native one i.e. not KDE. You also require the kernel-devel packages to be installed (per the release notes). Be sure to install XRDP to allow RDP connections via the appropriate package manager because it does not come pre-installed on most distros.</li> <li>For configuring the firewall it\u2019s easiest to either use the desktop firewall UI to switch the network interface to the \u201ctrusted zone\u201d or to disable the firewall entirely with the systemctl commands.</li> <li>The agent uninstaller is created in /opt/leostreamagent/lib.</li> </ul>"},{"location":"architecture/sdkvm/leostream_brokered_connections/#useful-linux-commands","title":"Useful Linux commands","text":"<p>Installing insserv-compat on openSUSE</p> <pre><code>-sudo zypper refresh\n-sudo zypper install insserv-compat\n</code></pre> <p>If UnInstalling insserv-compat on openSUSE</p> <pre><code>-sudo zypper remove insserv-compat\n</code></pre> <p>Installing XRDP and opening the firewall port for RDP in openSUSE</p> <pre><code>- sudo zypper -n in xrdp\n-sudo systemctl enable xrdp\n-sudo systemctl start xrdp\n-sudo firewall-cmd --add-port=3389/tcp --permanent\n-sudo firewall-cmd --reload\n</code></pre> <p>Changing the root password:</p> <pre><code>sudo passwd root\n</code></pre> <p>Linux setting hostname:</p> <pre><code>Hostnamectl set-hostname new-name\n</code></pre> <p>An example of setting a static IP in a Debian based Linux Distro interfaces file:</p> <pre><code>auto eth0\n    iface eth0 inet static\n        address 192.0.2.7/24\n        gateway 192.0.2.254\n</code></pre> <p>Controlling firewalld via systemctl:</p> <pre><code>systemctl status firewalld\nsystemctl stop firewalld\nsystemctl disable firewalld\nsystemctl enable firewalld\n</code></pre> <p>Installing kernel-devel on Fedora:</p> <pre><code>dnf install kernel-devel\n</code></pre>"},{"location":"architecture/sdkvm/leostream_brokered_connections/#leostream-broker-specific","title":"Leostream Broker Specific","text":""},{"location":"architecture/sdkvm/leostream_brokered_connections/#summary-of-assigning-desktops-to-users","title":"Summary of assigning desktops to users","text":"<p>Pools (Configuration menu) for Leostream agent hosts (Desktops) are defined and are assigned to Policies (Configuration menu) where individual Policies may contain multiple pools and Policies are used in Assignments (Configuration menu) for Authentication servers where users are assigned available Leostream agent hosts from a policy based on Groups for Active Directory users or OU Attributes for OpenLDAP users.</p>"},{"location":"architecture/sdkvm/leostream_brokered_connections/#allocation-of-a-desktop-by-the-leostream-broker","title":"Allocation of a desktop by the Leostream Broker","text":"<p>When a user logs on to the Leostream Connect client and is allocated desktops from a Pool by the Leostream Broker then the desktops are considered \u201cAssigned\u201d and unavailable to be allocated to other users.</p> <p>This is the case even if the user is not actually logged on to the specific desktops i.e. it\u2019s a possibility that a user merely logs on to the Leostream Connect client and doesn\u2019t connect to any of the desktops allocated to him by the Leostream Broker. These desktops will then be unavailable to other users until the user logs off the Leostream Connect client. I believe (needs to be investigated) that the Leostream Breaker has multiple configuration options available to mitigate desktop availability been constrained by idle users.</p>"},{"location":"architecture/sdkvm/leostream_brokered_connections/#adding-active-directory-domain-controller-as-an-authentication-server","title":"Adding Active Directory Domain Controller as an authentication server","text":"<p>Adding the Active Directory Domain Controller to Leostream (Setup, Authentication Servers) using the default Active Directory Administrator will not work. One must create a second admin user \u201cadmin\u201d and use those credentials.</p>"},{"location":"architecture/sdkvm/leostream_brokered_connections/#details","title":"Details","text":"<ul> <li>Name: TurnKey_Domain_Controller_103</li> <li>Domain: emerald.lan</li> <li>Hostname or IP address: 10.211.131.103</li> <li>Encrypt connection to the authentication server using SSL (LDAPS): Enable</li> <li>Login name or DN: CN=admin,CN=Users,DC=emerald,DC=lan</li> <li>Password: user account admin password</li> <li>Sub-tree:Starting point for user search: dc=emerald,dc=lan</li> </ul> <p>Note: if Active Directory is updated e.g. new groups that the Leostream Broker doesn\u2019t seem to automatically recognise the update and that you have to remove and then re-add the controller in Leostream for it to recognise the changes. Something to check with the Leostream contacts?</p>"},{"location":"architecture/sdkvm/leostream_brokered_connections/#adding-openldap-as-an-authentication-server","title":"Adding OpenLDAP as an authentication server","text":"<ul> <li>Nothing specific to note regarding OpenLDAP</li> <li>Like Active Directory but adjust accordingly e.g. for Login name or DN: cn=admin,dc=emerald,dc=com (No need for CN=Users)</li> </ul>"},{"location":"architecture/sdkvm/openbox/","title":"OpenBox","text":""},{"location":"architecture/sdkvm/openbox/#references","title":"References","text":"<ul> <li>github</li> <li>Application Specific Settings in Openbox</li> <li>Example xml configuration</li> <li>Main Documentation</li> <li>Application Specific Actions - see If condition</li> </ul>"},{"location":"architecture/sdkvm/openbox/#package-dependencies","title":"Package Dependencies","text":"<pre><code>sudo apt install libobrender32v5\n</code></pre> <p>The openbox configuration is stored in /etc/xdg/openbox/rc.xml; however, this can be over-ridden with a local rc.xml file in ~/.config/openbox/rc.xml</p>"},{"location":"architecture/sdkvm/openbox/#openbox-autostart","title":"OpenBox AutoStart","text":"<p>Commands placed in ~/.config/openbox/autostart.sh can be used to start certain applications, for example</p> <pre><code>#!/bin/sh\nfeh --bg-scale ~/.config/qtile/background.png &amp;\n# Start the workspace server\n/usr/bin/startserver.sh &amp;\n# Start the OSD\n/home/snuc/SDKVM/emeralddeskvue/build/linux/x64/release/bundle/emeralddeskvue &amp;\n</code></pre>"},{"location":"architecture/sdkvm/openbox/#moving-windows-without-decorations-or-title-bars","title":"Moving windows without Decorations or Title Bars","text":"<ul> <li>Moving windows without Title Bars</li> </ul>"},{"location":"architecture/sdkvm/openbox/#disabling-the-client-menu","title":"Disabling the Client Menu","text":"<ul> <li>In the rc.xml file, we can remove the mousebind for the right mouse button on the titlebar. It has an associated action to show a client menu. This is the menu that displays when a title bar is right clicked.</li> <li>In the rc.xml file, we should also remove the mousebind for the right mouse button associated with the bottom of the window. It has an associated action to show a client menu. This is the menu that displays when a title bar is right clicked.</li> <li>Ideally all bindings for client-menu should be disabled.</li> </ul>"},{"location":"architecture/sdkvm/openbox/#allowing-non-root-users-run-commands","title":"Allowing non-root users run commands","text":"<ul> <li>possible options</li> <li>Ubuntu 222.04 specific</li> </ul>"},{"location":"architecture/sdkvm/openbox/#sample-sudoers-file","title":"Sample sudoers file","text":"<p>sudo visudo</p> <pre><code># User alias specification\n\n# Cmnd alias specification\n\n# User privilege specification\nroot    ALL=(ALL:ALL) ALL\n\n# Members of the admin group may gain root privileges\n%admin ALL=(ALL) ALL\n\n# Allow members of group sudo to execute any command\n%sudo   ALL=(ALL:ALL) ALL\n\n# See sudoers(5) for more information on \"#include\" directives:\n\n#includedir /etc/sudoers.d\n\n\nsnuc ALL=NOPASSWD: /sbin/shutdown, /sbin/restart, /sbin/poweroff, /usr/bin/nmcli /usr/bin/dpkg /usr/sbin/netplan\n</code></pre>"},{"location":"architecture/sdkvm/openbox/#openbox-audio-control","title":"Openbox Audio Control","text":"<p>You can control PulseAudio thoroughly through the command line using pacmd and pactl commands. </p> <ul> <li>pacmd</li> </ul>"},{"location":"architecture/sdkvm/openbox/#volume-control","title":"Volume Control","text":"<pre><code>pactl -- set-sink-volume 0 &lt;n&gt;%  where n is the volume required in percentages\n</code></pre> <p>for example</p> <pre><code>pactl -- set-sink-volume 0 80%\n</code></pre>"},{"location":"architecture/sdkvm/openbox/#openbox-utilities","title":"Openbox Utilities","text":"<p>There are a number of utilities which can be used to configure OpenBox:</p>"},{"location":"architecture/sdkvm/openbox/#obconf","title":"Obconf","text":"<p>ObConf installs new themes which use the .obt Openbox theme archive format for distribution. Open any .obt theme archive in your file browser, or use the interface provided inside ObConf. You can also use ObConf to create .obt Openbox theme archives for distributing your own themes.</p>"},{"location":"architecture/sdkvm/openbox/#obmenu","title":"obmenu","text":"<p>Obmenu is a menu editor designed for openbox. It's easy to use, allowing to get the most out of the powerful Openbox menu system, while hiding the xml layout from the user. It also (optionally) installs a bunch of dynamic menus (pipe menus), such as Gnome menus or a quick-navigator. You can also use the obxml module to easily write pipe menus of your own in Python.</p>"},{"location":"architecture/sdkvm/openbox/#keybindings","title":"KeyBindings","text":"<p>Alt + Tab to cycle through applications Main Key Mappings</p>"},{"location":"architecture/sdkvm/openbox/#modifier-keys","title":"Modifier Keys","text":"key ID Function S Shift key C Control key A Alt key W Super key (Usually bound to the Windows key on keyboards which have one) M Meta key H Hyper key (If it is bound to something)"},{"location":"architecture/sdkvm/openbox/#installing","title":"Installing","text":"<p>Install and Setup Patched Version</p>"},{"location":"architecture/sdkvm/openbox/#patching","title":"Patching","text":"<p>To patch patch -p1 &lt;</p> <ul> <li>Openbox Patches</li> </ul>"},{"location":"architecture/sdkvm/openbox/#startup-and-launch","title":"Startup and Launch","text":"<pre><code>   2112 tty2     Ssl+   0:00 /usr/lib/gdm3/gdm-x-session --register-session --run-script /usr/local/bin/openbox-session\n   2156 tty2     Sl+    0:00 /usr/local/bin/openbox --sm-save-file /home/snuc/.cache/openbox/sessions/1667402537-2156-3346969190.obs --sm-no-load\n   2216 ?        Ss     0:00 /usr/bin/ssh-agent /usr/bin/im-launch /usr/local/bin/openbox-session\n</code></pre> <p>/usr/local/bin/openbox-session </p> <pre><code>#!/bin/sh\nif test -n \"$1\"; then\n    echo \"Syntax: openbox-session\"\n    echo\n    echo \"See the openbox-session(1) manpage for help.\"\n  exit\nfi\n# Clean up after GDM\nxprop -root -remove _NET_NUMBER_OF_DESKTOPS \\\n      -remove _NET_DESKTOP_NAMES \\\n      -remove _NET_CURRENT_DESKTOP 2&gt; /dev/null\n# Set up the environment\nA=\"/usr/local/etc/xdg/openbox/environment\"\ntest -r $A &amp;&amp; . $A\nA=\"${XDG_CONFIG_HOME:-\"$HOME/.config\"}/openbox/environment\"\ntest -r $A &amp;&amp; . $A\n\n# Run Openbox, and have it run the autostart stuff\nexec /usr/local/bin/openbox --startup \"/usr/local/libexec/openbox-autostart OPENBOX\" \"$@\"\n</code></pre> <p>The desktop file is found in  <pre><code>/usr/share/xsessions\n\ncat openbox.desktop \n[Desktop Entry]\nName=Openbox\nComment=Log in using the Openbox window manager (without a session manager)\nExec=/usr/bin/openbox-session\nTryExec=/usr/bin/openbox-session\nIcon=openbox\nType=Application\n</code></pre></p>"},{"location":"architecture/sdkvm/openbox/#removing-gnome-and-unity-on-ubuntu","title":"Removing Gnome and Unity on Ubuntu","text":"<p>See the following discussion - sudo systemctl set-default multi-user # disables graphical login - sudo systemctl set-default graphical # restores graphical login - sudo systemctl start gdm3 # start gdm3 manually</p>"},{"location":"architecture/sdkvm/openbox/#configuring-lightdm","title":"Configuring LightDM","text":"<ul> <li>sudo nano /etc/lightdm/lightdm.conf</li> </ul>"},{"location":"architecture/sdkvm/openbox/#enabling-autologin","title":"Enabling Autologin","text":"<p>In /etc/lightdm/lightdm.conf.d/12-autologin.conf and add:</p> <pre><code>[Seat:*]\nautologin-user=snuc\n</code></pre>"},{"location":"architecture/sdkvm/openbox/#configuring-gdm3","title":"Configuring GDM3","text":""},{"location":"architecture/sdkvm/openbox/#enabling-autologin_1","title":"Enabling Autologin","text":"<ul> <li>Guide for gnome</li> </ul> <p>Edit the config in /etc/gdm3/custom.conf</p> <pre><code># GDM configuration storage\n#\n# See /usr/share/gdm/gdm.schemas for a list of available options.\n\n[daemon]\n# Uncomment the line below to force the login screen to use Xorg\nWaylandEnable=false\n\n# Enabling automatic login\nAutomaticLoginEnable = true\nAutomaticLogin = snuc\n\n# Enabling timed login\n#  TimedLoginEnable = true\n#  TimedLogin = user1\n#  TimedLoginDelay = 10\n\n[security]\n\n[xdmcp]\n\n[chooser]\n\n[debug]\n# Uncomment the line below to turn on debugging\n# More verbose logs\n# Additionally lets the X server dump core if it crashes\n#Enable=true\n</code></pre>"},{"location":"architecture/sdkvm/openbox/#running-programs-on-startup","title":"Running Programs on Startup","text":"<p>In ~/.config/autostart create a \"basic\" desktop entry file with the following content:</p> <pre><code>[Desktop Entry]\nName=name\nExec=command\nType=Application\n</code></pre>"},{"location":"architecture/sdkvm/openbox/#configuring-autologin-using-openbox-ubuntu-and-gdm3","title":"Configuring Autologin using Openbox, Ubuntu and GDM3","text":"<ul> <li>sudo nano /etc/gdm3/custom.conf</li> <li>Uncomment the lines AutomaticLoginEnable = true and AutomaticLogin = snuc</li> </ul> <pre><code># GDM configuration storage\n#\n# See /usr/share/gdm/gdm.schemas for a list of available options.\n\n[daemon]\n# Uncomment the line below to force the login screen to use Xorg\n#WaylandEnable=false\n\n# Enabling automatic login\nAutomaticLoginEnable = true\nAutomaticLogin = snuc \n\n# Enabling timed login\n#  TimedLoginEnable = true\n#  TimedLogin = user1\n#  TimedLoginDelay = 10\n\n[security]\n\n[xdmcp]\n\n[chooser]\n\n[debug]\n# Uncomment the line below to turn on debugging\n# More verbose logs\n# Additionally lets the X server dump core if it crashes\n#Enable=true\n</code></pre>"},{"location":"architecture/sdkvm/openbox/#turning-on-logging-in-openbox","title":"Turning on Logging in OpenBox","text":"<ul> <li>The Log file appears in: /home/snuc/.cache/openbox/openbox.log</li> <li>For more verbose output change: </li> </ul> <pre><code>exec /usr/local/bin/openbox --startup \"/usr/local/libexec/openbox-autostart OPENBOX\" \"$@\"\n</code></pre> <p>to</p> <pre><code>exec /usr/local/bin/openbox --debug --startup \"/usr/local/libexec/openbox-autostart OPENBOX\" \"$@\"\n</code></pre> <p>In the file /usr/local/bin/openbox-session </p> <p>Note: This may also be in </p> <p>In the file /usr/bin/openbox-session depending on how it was installed</p>"},{"location":"architecture/sdkvm/openbox/#configuring-monitor-setup","title":"Configuring Monitor Setup","text":"<pre><code>#!/bin/sh\nxrandr --output HDMI-1 --primary --mode 3840x2160 --pos 0x0 --rotate normal --output HDMI-2 --mode 3840x2160 --pos 3840x0 --rotate normal --output DP-1 --off --output DP-2 --off --output DP-3 --off --output DP-4 --off\n</code></pre>"},{"location":"architecture/sdkvm/openbox/#reconfigure-monitors-when-emerging-from-sleep","title":"Reconfigure Monitors when emerging from sleep","text":"<ul> <li>To reconfigure monitors on waking from sleep we create a file in /lib/systemd/system-sleep/reconfigure_displays.sh</li> </ul> <pre><code>#!/bin/sh\ncase $1/$2 in\n  pre/*)\n    echo \"Going to $2...\"\n    # Place your pre suspend commands here, or `exit 0` if no pre suspend action required\n    exit 0  \n    ;;\n  post/*)\n    echo \"Waking up from $2...\"\n    # Place your post suspend (resume) commands here, or `exit 0` if no post suspend action required\n    /home/snuc/.config/openbox/configure_monitors.sh\n    ;;\nesac\n</code></pre>"},{"location":"architecture/sdkvm/openbox/#controlling-power-saving-and-monitor-sleep","title":"Controlling Power Saving and Monitor Sleep","text":""},{"location":"architecture/sdkvm/openbox/#useful-commands","title":"Useful Commands","text":"<ul> <li>xset s off    Disable screen saver blanking</li> <li>xset s 3600 3600  Change blank time to 1 hour</li> <li>xset -dpms    Turn off DPMS</li> <li>xset s off -dpms  Disable DPMS and prevent screen from blanking</li> <li>xset dpms force off   Turn off screen immediately</li> <li>xset dpms force standby   Standby screen</li> <li>xset dpms force suspend   Suspend screen</li> <li>gsettings set org.gnome.settings-daemon.plugins.power sleep-inactive-ac-type 'nothing'</li> <li>gsettings set org.gnome.settings-daemon.plugins.power sleep-inactive-battery-type 'suspend'</li> </ul> <p>To disable system Hibernate we can run the following:</p> <pre><code># To disable\nsudo systemctl mask sleep.target suspend.target hibernate.target hybrid-sleep.target\n\n# To check\nsudo systemctl status sleep.target suspend.target hibernate.target hybrid-sleep.target\n\n# To re-enable\nsudo systemctl unmask sleep.target suspend.target hibernate.target hybrid-sleep.target\n\nThese will create the following:\n\nCreated symlink /etc/systemd/system/sleep.target \u2192 /dev/null.\nCreated symlink /etc/systemd/system/suspend.target \u2192 /dev/null.\nCreated symlink /etc/systemd/system/hibernate.target \u2192 /dev/null.\nCreated symlink /etc/systemd/system/hybrid-sleep.target \u2192 /dev/null.\n</code></pre>"},{"location":"architecture/sdkvm/openbox/#issues-detecting-display-port-monitors","title":"Issues detecting Display Port Monitors","text":"<ul> <li>Issues with Intel cards</li> <li>DP not connecting</li> </ul>"},{"location":"architecture/sdkvm/openbox/#openbox-configuration","title":"Openbox Configuration","text":"<p>There is a file in /home/snuc/.config/openbox called disable_sleep.sh which attempts to disable sleep. This is called from the Openbox autostart script.</p> <pre><code>xset -dpms     # Disable DPMS (Energy Star) features\nxset s off     # Disable screensaver\nxset s noblank # Don't blank video device\n\n# To check DPMS\nxset -q | awk '/DPMS is/ {print $NF}'\n\n#To see all xset configurations\nxset -q\n</code></pre>"},{"location":"architecture/sdkvm/openbox/#acpi-control-normally-for-laptops","title":"ACPI Control (normally for laptops)","text":"<ul> <li>sudo vi /etc/default/acpi-support # and then set SUSPEND_METHODS=\"none\"</li> <li>sudo /etc/init.d/acpid restart</li> </ul>"},{"location":"architecture/sdkvm/openbox/#using-gsettings","title":"Using GSettings","text":"<ul> <li>A General Guide to GSettings</li> <li>To list all possible schemas:  gsettings list-schemas</li> <li>Using DConf to disable screen blanking</li> </ul> <pre><code>   gsettings set org.gnome.desktop.screensaver lock-enabled false\n</code></pre>"},{"location":"architecture/sdkvm/openbox/#systemd-reference","title":"SystemD Reference","text":"<pre><code>systemctl is-enabled application.service\nsystemctl is-active application.service\nsystemctl is-failed application.service\nsystemctl list-units\nsystemctl --user list-units\nsystemctl --user list-units --type=service --state=active\nsystemctl list-units --all --state=inactive\nsystemctl list-dependencies sshd.service # show all dependencies\nsystemctl show sshd.service\nsystemctl show sshd.service -p Conflicts\nsudo systemctl mask nginx.service # temporary disabling of a service\nsudo systemctl unmask nginx.service\n\nsystemd-analyze blame # analyse boot up sequence\n</code></pre>"},{"location":"architecture/sdkvm/openbox/#keyboard-configuration","title":"Keyboard Configuration","text":"<p>To set via the command line:</p> <ul> <li>sudo dpkg-reconfigure keyboard-configuration</li> <li>gsettings set org.gnome.desktop.input-sources sources \"[('xkb', 'uk'), ('xkb', 'us')]\"</li> <li>or at a lower level - setxkbmap - layout gb</li> <li>For reference</li> <li>Using dpkg</li> </ul>"},{"location":"architecture/sdkvm/openbox/#display-managers","title":"Display Managers","text":""},{"location":"architecture/sdkvm/openbox/#booting-without-a-display-manager","title":"Booting without a Display Manager","text":"<ul> <li> <p>Reference</p> </li> <li> <p>Create the following file: /etc/systemd/system/getty@tty1.service.d/override.conf</p> </li> <li>Add these contents:</li> </ul> <p><pre><code>[Service]\nType=simple\nExecStart=\nExecStart=-/sbin/agetty --autologin snuc --noclear %I 38400 linux\n</code></pre> - Add the following to the snuc .profile file in /home/snuc.profile: </p> <p><pre><code>#Startx Automatically\nif [[ -z \"$DISPLAY\" ]] &amp;&amp; [[ $(tty) = /dev/tty1 ]]; then\n. startx\nlogout\nfi\n</code></pre> - Select the preferred window manager with</p> <p><pre><code>sudo update-alternatives --config x-session-manager\n</code></pre> - Disable any existing Display Managers</p> <pre><code>sudo systemctl disable lightdm\n</code></pre> <p>Note: This can be recreated with</p> <p><pre><code>sudo dpkg-reconfigure lightdm\n</code></pre> Note: There is an issue is we disable lightdm. Certain commands in the sudoers file which we require to run without requiring sudo permission create the following error.</p> <p><pre><code>Failed to set wall message, ignoring: Interactive authentication required.\nFailed to reboot system via logind: Interactive authentication required.\nFailed to open initctl fifo: Permission denied\nFailed to talk to init daemon.\n</code></pre> - Reboot the System.</p>"},{"location":"architecture/sdkvm/openbox/#checking-current-display-manager","title":"Checking Current Display Manager","text":"<p>ps -ax |grep dm</p> <p><pre><code>   1124 ?        Ssl    0:00 /usr/sbin/lightdm\n   1147 tty7     Ssl+   0:27 /usr/lib/xorg/Xorg -core :0 -seat seat0 -auth /var/run/lightdm/root/:0 -nolisten tcp vt7 -novtswitch\n   1269 ?        Sl     0:00 lightdm --session-child 12 15\n</code></pre> In this case we are running lightdm</p>"},{"location":"architecture/sdkvm/openbox/#reconfiguring-the-display-manager","title":"Reconfiguring the Display Manager","text":"<ul> <li>sudo dpkg-reconfigure lightdm</li> </ul> <p>-xinit reference</p>"},{"location":"architecture/sdkvm/openbox/#booting-without-a-display-manager_1","title":"Booting without a Display Manager","text":"<ul> <li> <p>Reference</p> </li> <li> <p>Create the following file: /etc/systemd/system/getty@tty1.service.d/override.conf</p> </li> <li>Add these contents:</li> </ul> <p><pre><code>[Service]\nType=simple\nExecStart=\nExecStart=-/sbin/agetty --autologin snuc --noclear %I 38400 linux\n</code></pre> - Add the following to the snuc .profile file in /home/snuc.profile: </p> <p><pre><code>#Startx Automatically\nif [[ -z \"$DISPLAY\" ]] &amp;&amp; [[ $(tty) = /dev/tty1 ]]; then\n. startx\nlogout\nfi\n</code></pre> - Select the preferred window manager with</p> <pre><code>sudo update-alternatives --config x-session-manager\n</code></pre>"},{"location":"architecture/sdkvm/openbox/#configuring-for-lightdm-display-manager","title":"Configuring for LightDM Display Manager","text":"<p>Create a file in /etc/lightdm/lightdm.conf.d called 00-keyboard.conf</p> <p><pre><code>[Seat:*]\ndisplay-setup-script=/usr/bin/setxkbmap -layout gb\n</code></pre> - lightdm --show-config # To show current configuration</p> <p>-LightDM Reference</p>"},{"location":"architecture/sdkvm/openbox/#network-configuration","title":"Network Configuration","text":""},{"location":"architecture/sdkvm/openbox/#nmcli","title":"nmcli","text":""},{"location":"architecture/sdkvm/openbox/#allowing-non-root-user-to-run-nmcli","title":"Allowing non-root user to run nmcli","text":"<p>-Setting a static ipaddress</p> <pre><code>chmod u+s,a-w /usr/bin/nmcli\n</code></pre> <p>To reverse this we can run</p> <pre><code>chmod u-s,a-w /usr/bin/nmcli\n</code></pre>"},{"location":"architecture/sdkvm/openbox/#alowing-non-route-user-to-run-the-route-command","title":"Alowing non-route user to run the route command","text":"<p>Note: It would be preferable to do any routing changes using nmcli</p> <pre><code>sudo chmod u+s,a+w /usr/bin/route\n</code></pre>"},{"location":"architecture/sdkvm/openbox/#allowing-non-root-user-to-run-nmcli-along-with-write-permissions","title":"Allowing non-root user to run nmcli along with write permissions","text":"<pre><code>chmod u+s,a+w /usr/bin/nmcli\n</code></pre>"},{"location":"architecture/sdkvm/openbox/#examples","title":"Examples","text":"<ul> <li>Reference and Examples</li> </ul> <pre><code>nmcli con add type ethernet con-name 'static-ip' ifname enp86s0 ipv4.method manual ipv4.addresses 192.168.1.98/24 gw4 192.168.1.254\nnmcli con up id 'static-ip' #check IP is setup\nnmcli connection show # show available connections\nnmcli connection delete static-ip # delete a connection\nnmcli con mod static-ip ipv4.dns 182.168.1.254 # add dns\nnmcli con up id 'static-ip' # activate the static connection\nnmcli con add type ethernet con-name 'dhcp' ifname enp86s0 ipv4.method auto\nnmcli d show |  grep GATEWAY # show gateway settings\nnmcli d show # Show all settings\nnmcli connection modify dhcp ipv4.routes \"10.211.128.192/21\" # Add a route for a given connection, connection must be activated with nmcli con up id 'dhcp'\nnmcli connection show dhcp | grep ipv4.routes # show routes for this connection\nnmcli con show --active # show active connections\nnmcli dev show | grep GENERAL.HWADDR # command to get a list of all the mac addresses \nnmcli radio wifi off # turn off wifi\n</code></pre> <p>Delete all connections</p> <pre><code>nmcli --terse connection show | cut -d : -f 1 | \\\n  while read name; do nmcli connection delete \"$name\"; done\n</code></pre>"},{"location":"architecture/sdkvm/openbox/#netplan","title":"Netplan","text":"<p>Netplan Documentation</p> <p>Configuration files are held in:</p> <p>/etc/netplan/config.yaml</p>"},{"location":"architecture/sdkvm/openbox/#netplan_1","title":"Netplan","text":"<ul> <li>sudo netplan apply</li> <li>sudo netplan try</li> </ul>"},{"location":"architecture/sdkvm/openbox/#sample-config-file","title":"Sample Config File","text":"<pre><code># This file describes the network interfaces available on your system\n# For more information, see netplan(5).\nnetwork:\n  version: 2\n  renderer: networkd\n  ethernets:\n    enp86s0:\n     dhcp4: no\n     addresses: [192.168.1.98/24]\n     gateway4: 192.168.1.254\n     nameservers:\n       addresses: [8.8.8.8,8.8.4.4]\n</code></pre>"},{"location":"architecture/sdkvm/openbox/#disabling-network-dispatcher","title":"Disabling Network Dispatcher","text":"<p>apt purge --autoremove -s networkd-dispatcher</p>"},{"location":"architecture/sdkvm/openbox/#clearing-syslog","title":"Clearing Syslog","text":"<pre><code>sudo truncate -s 0 /var/log/syslog\n</code></pre>"},{"location":"architecture/sdkvm/openbox/#openbox-reference","title":"Openbox Reference","text":"<ul> <li>Keyboard Cheat Sheet</li> <li>Openbox and Print Screen</li> <li>Running scripts on wake from system sleep</li> </ul>"},{"location":"architecture/sdkvm/openbox/#relevant-ubuntu-references","title":"Relevant Ubuntu References","text":"<ul> <li>System Hibernation on Linux</li> </ul>"},{"location":"architecture/sdkvm/openbox/#installing-intel-graphics-drivers","title":"Installing Intel Graphics Drivers","text":"<p>-Guide</p>"},{"location":"architecture/sdkvm/openbox/#auto-mounting-usb-drives-in-openbox","title":"Auto-mounting USB drives in Openbox","text":"<ul> <li>autoMount-usb</li> </ul>"},{"location":"architecture/sdkvm/openbox/#using-compton","title":"Using Compton","text":"<ul> <li>Compton and OpenBox</li> <li>Screen Tearing</li> </ul>"},{"location":"architecture/sdkvm/openbox/#information-on-compositors","title":"Information on Compositors","text":"<p>Compositors support:     - Transparency in windows     - Transition animations     - Drop shadows around windows which give them a 3D effect     - V sync: Waits for the display to update before updating the display</p> <ul> <li>Compositors in Linux</li> <li>Configuring Compton</li> </ul>"},{"location":"architecture/sdkvm/openbox/#disabling-automatic-updates","title":"Disabling Automatic Updates","text":"<ul> <li>How to disable automatic updates</li> </ul>"},{"location":"architecture/sdkvm/openbox/#installing-xserver-xorg-video-intel","title":"Installing xserver-xorg-video-intel","text":""},{"location":"architecture/sdkvm/openbox/#references_1","title":"References","text":"<ul> <li>Installing</li> <li>Configuring</li> </ul> <p>To install   - add-apt-repository -y ppa:oibaf/graphics-drivers   - apt update   - apt install xserver-xorg-video-intel</p> <p>Sample configurations /usr/share/X11</p> <p>Note: The intel driver fixes tearing but gives really poor performance. Xorg hogs the CPU</p>"},{"location":"architecture/sdkvm/openbox/#changing-hostname","title":"Changing Hostname","text":"<ul> <li>hostnamectl set-hostname hostname</li> </ul>"},{"location":"architecture/sdkvm/openbox/#openbox-themes","title":"OpenBox Themes","text":"<ul> <li>Guide to Openbox Themes</li> <li>Themes are stored in /usr/share/themes/, for example /usr/share/themes/Nightmare/openbox-3</li> <li>Themeing Openbox</li> </ul>"},{"location":"architecture/sdkvm/openbox/#blackbox-theme","title":"BlackBox Theme","text":"<ul> <li>The BackBox theme is stored in ~/.themes/</li> </ul>"},{"location":"architecture/sdkvm/openbox/#configuring-the-mouse-cursor","title":"Configuring the Mouse Cursor","text":"<p>The relevant file is in /etc/gtk-3.0/settings.ini  or for GTK2</p> <p>The relevant file is in /home/snuc/.gtkrc-2.0 if configured using lxappearance other wise in ~/.gtkrc-2.0.mine</p> <ul> <li> <p>Tutorial</p> </li> <li> <p>Setting the Cursor Size</p> </li> </ul>"},{"location":"architecture/sdkvm/openbox/#user-management","title":"User Management","text":"<ul> <li>Main Account: snuc Password: Shannon2Admin_13</li> <li> <p>Secondary Account: sdkvmadmin Password: sdkvm1main_12T</p> </li> <li> <p>See here to change password</p> </li> </ul>"},{"location":"architecture/sdkvm/openbox/#grub","title":"GRUB","text":""},{"location":"architecture/sdkvm/openbox/#accessing-grub","title":"Accessing GRUB","text":"<ul> <li> <p>When your system boots using UEFI, press Esc. This will take you to grub</p> </li> <li> <p>Preventing GRUB Access</p> </li> <li> <p>Password Protecting Grub Entries</p> </li> </ul>"},{"location":"architecture/sdkvm/openbox/#getting-snuc-serial","title":"Getting SNUC Serial","text":"<ul> <li>sudo dmidecode -s system-serial-number</li> </ul>"},{"location":"architecture/sdkvm/openbox/#application-profiles","title":"Application Profiles","text":""},{"location":"architecture/sdkvm/openbox/#osd","title":"OSD","text":"<pre><code>_NET_WM_USER_TIME(CARDINAL) = 9510048\n_VARIABLE_REFRESH(CARDINAL) = 1\nWM_STATE(WM_STATE):\n        window state: Normal\n        icon window: 0x0\n_NET_WM_DESKTOP(CARDINAL) = 0\n_NET_WM_ALLOWED_ACTIONS(ATOM) = _NET_WM_ACTION_CHANGE_DESKTOP, _NET_WM_ACTION_CLOSE, _NET_WM_ACTION_MINIMIZE, _NET_WM_ACTION_FULLSCREEN\n_KDE_NET_WM_FRAME_STRUT(CARDINAL) = 0, 0, 0, 0\n_NET_FRAME_EXTENTS(CARDINAL) = 0, 0, 0, 0\n_NET_WM_ICON(CARDINAL) =    Icon (48 x 48):\n\n\n\n_OB_APP_TYPE(UTF8_STRING) = \"normal\"\n_OB_APP_TITLE(UTF8_STRING) = \"emeralddeskvue\"\n_OB_APP_GROUP_CLASS(UTF8_STRING) = \"Emeralddeskvue\"\n_OB_APP_GROUP_NAME(UTF8_STRING) = \"emeralddeskvue\"\n_OB_APP_CLASS(UTF8_STRING) = \"Emeralddeskvue\"\n_OB_APP_NAME(UTF8_STRING) = \"emeralddeskvue\"\n_OB_APP_ROLE(UTF8_STRING) = \n_NET_WM_VISIBLE_ICON_NAME(UTF8_STRING) = \"emeralddeskvue\"\n_NET_WM_VISIBLE_NAME(UTF8_STRING) = \"emeralddeskvue\"\n_NET_WM_STATE(ATOM) = _NET_WM_STATE_FULLSCREEN\nWM_HINTS(WM_HINTS):\n        Client accepts input or input focus: True\n        Initial state is Normal State.\n        window id # of group leader: 0x1200001\n_GTK_THEME_VARIANT(UTF8_STRING) = \nXdndAware(ATOM) = BITMAP\n_GTK_WINDOW_OBJECT_PATH(UTF8_STRING) = \"/com/blackbox/window/1\"\n_GTK_APPLICATION_OBJECT_PATH(UTF8_STRING) = \"/com/blackbox\"\n_GTK_UNIQUE_BUS_NAME(UTF8_STRING) = \":1.37\"\n_GTK_APPLICATION_ID(UTF8_STRING) = \"com.blackbox\"\n_NET_WM_OPAQUE_REGION(CARDINAL) = 0, 0, 1920, 1080\n_NET_WM_WINDOW_TYPE(ATOM) = _NET_WM_WINDOW_TYPE_NORMAL\n_NET_WM_SYNC_REQUEST_COUNTER(CARDINAL) = 18874373, 18874374\n_NET_WM_USER_TIME_WINDOW(WINDOW): window id # 0x1200004\nWM_CLIENT_LEADER(WINDOW): window id # 0x1200001\n_NET_WM_PID(CARDINAL) = 1839\nWM_LOCALE_NAME(STRING) = \"en_GB.UTF-8\"\nWM_CLIENT_MACHINE(STRING) = \"SDKVMREFERENCE\"\nWM_NORMAL_HINTS(WM_SIZE_HINTS):\n        program specified minimum size: 0 by 0\n        program specified base size: 0 by 0\n        window gravity: NorthWest\nWM_PROTOCOLS(ATOM): protocols  WM_DELETE_WINDOW, WM_TAKE_FOCUS, _NET_WM_PING, _NET_WM_SYNC_REQUEST\nWM_CLASS(STRING) = \"emeralddeskvue\", \"Emeralddeskvue\"\nWM_ICON_NAME(STRING) = \"emeralddeskvue\"\n_NET_WM_ICON_NAME(UTF8_STRING) = \"emeralddeskvue\"\nWM_NAME(STRING) = \"emeralddeskvue\"\n_NET_WM_NAME(UTF8_STRING) = \"emeralddeskvue\"\n</code></pre>"},{"location":"architecture/sdkvm/openbox/#system-lockdown","title":"System Lockdown","text":""},{"location":"architecture/sdkvm/openbox/#references_2","title":"references","text":"<ul> <li>Disabling command line access</li> <li>Locking Down User Login</li> <li>Locking down options in Linux</li> <li>Locking down Network Access</li> <li>Prevent Virtual Terminal Switching</li> </ul>"},{"location":"architecture/sdkvm/osd_prototyping/","title":"OSD Technologies","text":""},{"location":"architecture/sdkvm/osd_prototyping/#installing-net-core","title":"Installing .Net Core","text":"<ul> <li>wget https://packages.microsoft.com/config/ubuntu/20.04/packages-microsoft-prod.deb </li> <li>sudo dpkg -i packages-microsoft-prod.deb </li> <li>sudo apt update </li> <li>sudo apt install apt-transport-https </li> <li>sudo apt install dotnet-sdk-3.1 </li> <li>dotnet --version</li> <li>dotnet new console -o HelloWorld</li> <li>cd HelloWorld</li> <li> <p>dotnet run</p> </li> <li> <p>dotnet new --list # shows all supported applications</p> </li> </ul>"},{"location":"architecture/sdkvm/osd_prototyping/#avalonia","title":"Avalonia","text":"<p>Getting Started</p>"},{"location":"architecture/sdkvm/osd_prototyping/#installing-mono-on-linux","title":"Installing Mono On Linux","text":"<ul> <li>sudo apt install dirmngr gnupg apt-transport-https ca-certificates software-properties-common</li> <li>sudo apt-key adv --keyserver hkp://keyserver.ubuntu.com:80 --recv-keys 3FA7E0328081BFF6A14DA29AA6A19B38D3D831EF</li> <li>sudo apt-add-repository 'deb https://download.mono-project.com/repo/ubuntu stable-focal main'</li> <li> <p>sudo apt install mono-complete</p> </li> <li> <p>sudo apt install monodevelop</p> </li> <li>mono --version</li> <li>Porting Windows Applications to Mono</li> </ul>"},{"location":"architecture/sdkvm/osd_prototyping/#dependencies","title":"Dependencies","text":"<ul> <li>Android SDK</li> </ul>"},{"location":"architecture/sdkvm/osd_prototyping/#references","title":"References","text":"<ul> <li>C Interoperability</li> </ul>"},{"location":"architecture/sdkvm/osd_technology_evaluations/","title":"Flutter","text":""},{"location":"architecture/sdkvm/osd_technology_evaluations/#install","title":"Install","text":"<pre><code>sudo apt update\nsudo apt install snapd\nsudo snap install flutter --classic\nflutter sdk-path\nflutter doctor\nsudo apt-get install clang cmake ninja-build pkg-config libgtk-3-dev liblzma-dev\n</code></pre>"},{"location":"architecture/sdkvm/osd_technology_evaluations/#flutter-on-arm","title":"Flutter on Arm","text":"<ul> <li>Compiling Flutter for Arm</li> <li>Compiling Flutter for Arm</li> </ul>"},{"location":"architecture/sdkvm/osd_technology_evaluations/#form-validation-with-flutter","title":"Form Validation with Flutter","text":"<ul> <li> <p>Using Validators</p> </li> <li> <p>System Calls from Flutter</p> </li> <li>Process Calls in Flutter</li> <li>Process Calls and Futures</li> <li>Window Transparency</li> </ul>"},{"location":"architecture/sdkvm/osd_technology_evaluations/#x11","title":"X11","text":"<ul> <li>Reparenting in X11</li> <li>Reparent Window</li> <li>Possible Reparenting Issues</li> <li>C Examples</li> </ul>"},{"location":"architecture/sdkvm/osd_technology_evaluations/#window-managers","title":"Window Managers","text":"<ul> <li>spectrwm</li> <li>How they work</li> </ul>"},{"location":"architecture/sdkvm/osd_technology_evaluations/#desktop-customisation","title":"Desktop Customisation","text":"<ul> <li>gnome-extensions list # show active extensions</li> <li>gnome-extensions disable dock at the side</li> <li>sudo apt install gnome-tweaks</li> <li>disable win key: dconf write /org/gnome/desktop/input-sources/xkb-options \u201c[\u2018altwin:meta_win\u2019]\u201d</li> <li>Re-enable win key: dconf reset /org/gnome/desktop/input-sources/xkb-options</li> <li>Disable the Top Bar</li> </ul>"},{"location":"architecture/sdkvm/osd_technology_evaluations/#disable-the-dock-at-the-side","title":"Disable the dock at the side","text":"<p>-gnome-extensions disable ubuntu-dock@ubuntu.com</p>"},{"location":"architecture/sdkvm/osd_technology_evaluations/#disabling-top-bar","title":"Disabling Top Bar","text":"<ul> <li>gdbus call --session --dest org.gnome.Shell --object-path /org/gnome/Shell --method org.gnome.Shell.Eval string:'Main.panel.actor.hide();'</li> </ul>"},{"location":"architecture/sdkvm/osd_technology_evaluations/#enabling-top-bar","title":"Enabling Top Bar","text":"<ul> <li>gdbus call --session --dest org.gnome.Shell --object-path /org/gnome/Shell --method org.gnome.Shell.Eval string:'Main.panel.actor.show();'</li> </ul>"},{"location":"architecture/sdkvm/osd_technology_evaluations/#start-on-boot","title":"Start on boot","text":"<ul> <li>in the settings panel search for startup</li> <li>The flutter app is at: /home/snuc/SDKVM/blackbox-linux-blackbox_linux_mobile-1cc12fce66d9/build/linux/x64/debug/bundle/blackbox</li> </ul>"},{"location":"architecture/sdkvm/osd_technology_evaluations/#gtk","title":"GTK","text":"<p>-Glade -GTK -Tutorial</p>"},{"location":"architecture/sdkvm/osd_technology_evaluations/#wmctrl","title":"WMCTRL","text":"<ul> <li>A wmctrl Tutorial</li> <li>wmctrl Linux Journal</li> <li>Documentation and Examples</li> </ul>"},{"location":"architecture/sdkvm/osd_technology_evaluations/#moving-a-window","title":"Moving a Window","text":"<pre><code>wmctrl -r \"Teradici PCoIP Client\" -e 1,0,0,800,600\n\nwmctrl -l # list open X11 windows\n\nwmctrl -ir 0x05600001 -e 1,0,0,800,600 #move using window ID\n\nmplayer -wid 0x4800000 Butterfly-209.mp4 # reparent in X11 using mplayer an an existing window\n\nwmctrl -i -r 0x05a00001 -N \"MyNewTitle\" #changing a title using a WID\n\nwmctrl -i -r 0x04c00007  -b toggle,fullscreen # toggle flutter app full screen using its window ID\n</code></pre> <p>The five options are: \u201cgravity,X,Y,width,height\u201d. Gravity should be 1 for predictable results</p>"},{"location":"architecture/sdkvm/osd_technology_evaluations/#xdotool","title":"XdoTool","text":"<pre><code>xdotool search --pid 29644 # find the window ID associated with this process\n\nxdotool search --name \"Old name\" set_window --name \"New name\"\n\nxdotool search --pid 55229  getwindowname\n\nxdotool search --pid 55229 --onlyvisible --class --classname --name  getwindowname \n\nxdotool search --class xfreerdp  set_window --name \"New name\"\n\n# To get the X Y and Geometry of a specific window: \nxdotool getwindowgeometry 0x18000ec\nWindow 25166060\n  Position: 700,0 (screen: 0)\n  Geometry: 904x977\n\nxprop | grep 'CLASS' # identifies a window\n</code></pre>"},{"location":"architecture/sdkvm/osd_technology_evaluations/#xtoolwait","title":"XToolWait","text":"<ul> <li>xtoolwait</li> </ul> <p>https://docs.gtk.org/gtk3/?</p>"},{"location":"architecture/sdkvm/osd_technology_evaluations/#socket-reference","title":"Socket Reference","text":"<p>https://docs.gtk.org/gtk3/?q=socket</p>"},{"location":"architecture/sdkvm/osd_technology_evaluations/#sockets-containers","title":"Sockets containers","text":"<p>https://zetcode.com/gui/pygtk/layout/ https://docs.huihoo.com/pygtk/2.0-tutorial/sec-PlugsAndSockets.html</p>"},{"location":"architecture/sdkvm/osd_technology_evaluations/#tutorials","title":"Tutorials","text":"<p>https://gist.github.com/ictwinfield/04355bc0ba4739dab9380d04c14c65de https://athenajc.gitbooks.io/python-gtk-3-api/content/gtk-group/gtkfixed.html</p>"},{"location":"architecture/sdkvm/osd_technology_evaluations/#vlc-python","title":"VLC Python","text":"<p>https://git.videolan.org/?p=vlc/bindings/python.git;a=blob_plain;f=examples/gtkvlc.py;hb=HEAD</p>"},{"location":"architecture/sdkvm/osd_technology_evaluations/#python-gtk","title":"Python GTK","text":"<ul> <li>Gdk-3.0 Python API Documentation</li> </ul> <p>https://python-gtk-3-tutorial.readthedocs.io/en/latest/layout.html#:~:text=There%20are%20two%20flavours%20of,Box%20)%20and%20grids%20(%20Gtk.</p>"},{"location":"architecture/sdkvm/osd_technology_evaluations/#python-vlc","title":"Python VLC","text":"<p>https://github.com/oaubert/python-vlc/tree/master/examples</p>"},{"location":"architecture/sdkvm/osd_technology_evaluations/#cairo","title":"Cairo","text":"<p>https://zetcode.com/gfx/pycairo/root/</p>"},{"location":"architecture/sdkvm/osd_technology_evaluations/#python-and-css","title":"Python and CSS","text":"<p>https://thegnomejournal.wordpress.com/2011/03/15/styling-gtk-with-css/ https://docs.gtk.org/gtk3/css-overview.html https://shallowsky.com/blog/programming/styling-gtk3-with-css-python.html https://stackoverflow.com/questions/15180320/editing-gtkwidget-attributes-properties</p>"},{"location":"architecture/sdkvm/osd_technology_evaluations/#python-opengl","title":"Python OpenGL","text":"<ul> <li>GLFW</li> </ul>"},{"location":"architecture/sdkvm/osd_technology_evaluations/#gtk-image-scaling","title":"GTK Image Scaling","text":"<p>https://stackoverflow.com/questions/1269320/scale-an-image-in-gtk</p>"},{"location":"architecture/sdkvm/osd_technology_evaluations/#python-xlib","title":"Python XLIB","text":"<p>https://github.com/python-xlib/python-xlib</p>"},{"location":"architecture/sdkvm/osd_technology_evaluations/#x11_1","title":"X11","text":""},{"location":"architecture/sdkvm/osd_technology_evaluations/#key-terms","title":"Key terms","text":"<p>The X Window System has nuanced usage of a number of terms when compared to common usage, particularly \"display\" and \"screen\", a subset of which is given here for convenience:</p>"},{"location":"architecture/sdkvm/osd_technology_evaluations/#device","title":"device","text":"<p>A graphics device such as a computer graphics card or a computer motherboard's integrated graphics chipset.</p>"},{"location":"architecture/sdkvm/osd_technology_evaluations/#monitor","title":"monitor","text":"<p>A physical device such as a CRT or a flat screen computer display.</p>"},{"location":"architecture/sdkvm/osd_technology_evaluations/#screen","title":"screen","text":"<p>An area into which graphics may be rendered, either through software alone into system memory as with VNC, or within a graphics device, some of which can render into more than one screen simultaneously, either viewable simultaneously or interchangeably. Interchangeable screens are often set up to be notionally left and right from one another, flipping from one to the next as the mouse pointer reaches the edge of the monitor.</p>"},{"location":"architecture/sdkvm/osd_technology_evaluations/#virtual-screen","title":"virtual screen","text":"<p>Two different meanings are associated with this term: A technique allowing panning a monitor around a screen running at a larger resolution than the monitor is currently displaying. An effect simulated by a window manager by maintaining window position information in a larger coordinate system than the screen and allowing panning by simply moving the windows in response to the user.</p>"},{"location":"architecture/sdkvm/osd_technology_evaluations/#display","title":"display","text":"<p>A collection of screens, often involving multiple monitors, generally configured to allow the mouse to move the pointer to any position within them. Linux-based workstations are usually capable of having multiple displays, among which the user can switch with a special keyboard combination such as control-alt-function-key, simultaneously flipping all the monitors from showing the screens of one display to the screens in another.</p> <p>The term \"display\" should not be confused with the more specialized jargon \"Zaphod display\". The latter is a rare configuration allowing multiple users of a single computer to each have an independent set of display, mouse, and keyboard, as though they were using separate computers, but at a lower per-seat cost.</p>"},{"location":"architecture/sdkvm/osd_technology_evaluations/#tools","title":"Tools","text":""},{"location":"architecture/sdkvm/osd_technology_evaluations/#xrandr","title":"xrandr","text":"<ul> <li>Show available displays and screens: xrandr -q</li> </ul>"},{"location":"architecture/sdkvm/osd_technology_evaluations/#xwininfo","title":"xwininfo","text":"<ul> <li>Show all child windows: xwininfo -tree -root</li> </ul>"},{"location":"architecture/sdkvm/preparing_hardware/","title":"Preparing Hardware","text":""},{"location":"architecture/sdkvm/preparing_hardware/#ubuntu-2004","title":"Ubuntu 20:04","text":""},{"location":"architecture/sdkvm/preparing_hardware/#core-dependencies","title":"Core dependencies","text":"<pre><code>sudo apt-get -y install git ninja-build build-essential git-core debhelper cdbs dpkg-dev autotools-dev cmake pkg-config xmlto libssl-dev docbook-xsl xsltproc libxkbfile-dev libx11-dev libwayland-dev libxrandr-dev libxi-dev libxrender-dev libxext-dev libxinerama-dev libxfixes-dev libxcursor-dev libxv-dev libxdamage-dev libxtst-dev libcups2-dev libpcsclite-dev libasound2-dev libpulse-dev libjpeg-dev libgsm1-dev libusb-1.0-0-dev libudev-dev libdbus-glib-1-dev uuid-dev libxml2-dev \n</code></pre>"},{"location":"architecture/sdkvm/preparing_hardware/#utilities","title":"Utilities","text":"<pre><code>sudo apt-get -y install libgstreamer1.0-dev libgstreamer-plugins-base1.0-dev libgstreamer-plugins-base1.0-dev libfaad-dev libfaac-dev libcunit1-dev libdirectfb-dev xmlto doxygen libxtst-dev gparted curl libavutil-dev libavresample-dev libavcodec-dev glade xdotool libspdlog-dev libcairo2 libimlib2-dev librsvg2-dev libgsm1-dev  libglfw3-dev libobrender32v5\n\nsudo apt-get -y install nlohmann-json3-dev \nsudo apt-get -y install ffmpeg nfs-common wmctrl xdotool pip net-tools mlocate net-tools xbindkeys xbindkeys-config snapd xwit gnome-tweaks  gnome-shell-extensions gnome-shell-extension-autohidetopbar grub-customizer feh libmosquitto-dev nlohmann-json3-dev libmosquittopp-dev libmosquittopp1 mosquitto mosquitto-clients libjson-c-dev libboost-all-dev \n\ngit clone https://github.com/sysstat/sysstat.git; cd sysstat ./configure; make; sudo make install\n</code></pre> <pre><code>git clone https://github.com/sysstat/sysstat.git; cd sysstat ./configure; make; sudo make install\n</code></pre>"},{"location":"architecture/sdkvm/preparing_hardware/#python","title":"Python","text":"<pre><code>pip3 install psutil screeninfo flask pyautogui\n</code></pre> <p>pyautogui</p>"},{"location":"architecture/sdkvm/preparing_hardware/#tools","title":"Tools","text":"<pre><code>sudo snap install --classic code\n</code></pre> <pre><code>sudo snap install --classic postman\n</code></pre> <p>To mount the shared area</p> <pre><code>sudo mount -t nfs 10.211.128.208:/data/shared_area ~/shared_area  -orw,bg,rsize=1024,wsize=1024,namlen=255,hard,nolock\n</code></pre> <p>To mount a USB drive</p> <pre><code>sudo mkdir -p /media/USB\nsudo mount -t ntfs-3g /dev/sda1 /media/USB\n</code></pre>"},{"location":"architecture/sdkvm/preparing_hardware/#network-settings","title":"Network Settings","text":"<ul> <li>On the top right of the screen, select the dropdown and then the settings option (Gear icon)</li> <li>In the settings tab select the Network Option</li> <li></li> <li>In the Ethernet option select the gear icon and set the desired IP in the IPv4 tab</li> <li></li> </ul>"},{"location":"architecture/sdkvm/preparing_hardware/#disable-the-dock-at-the-side","title":"Disable the dock at the side","text":"<p>-gnome-extensions disable ubuntu-dock@ubuntu.com</p>"},{"location":"architecture/sdkvm/preparing_hardware/#hiding-the-top-bar","title":"Hiding the top bar","text":"<ul> <li>Install: sudo apt-get -y install gnome-shell-extension-autohidetopbar</li> </ul> <p>or</p> <ul> <li>gdbus call --session --dest org.gnome.Shell --object-path /org/gnome/Shell --method org.gnome.Shell.Eval string:'Main.panel.actor.hide();'</li> </ul>"},{"location":"architecture/sdkvm/preparing_hardware/#installing-workspaceserver-as-a-user-level-service","title":"Installing WorkspaceServer as a User Level Service","text":""},{"location":"architecture/sdkvm/preparing_hardware/#installation","title":"Installation","text":"<ul> <li>mkdir -p /home/snuc/.config/systemd/user/</li> <li>cp workspaceserver.service /home/snuc/.config/systemd/user/</li> <li>systemctl --user enable workspaceserver</li> </ul>"},{"location":"architecture/sdkvm/preparing_hardware/#starting-stopping","title":"Starting Stopping","text":"<ul> <li>systemctl --user start workspaceserver</li> <li>systemctl --user stop workspaceserver</li> <li>systemctl --user status workspaceserver</li> </ul>"},{"location":"architecture/sdkvm/preparing_hardware/#after-changing","title":"After Changing","text":"<ul> <li>systemctl --user daemon-reload</li> </ul>"},{"location":"architecture/sdkvm/preparing_hardware/#inspecting-logs","title":"Inspecting Logs","text":"<ul> <li>journalctl --user -u workspaceserver</li> </ul>"},{"location":"architecture/sdkvm/screenshots/","title":"Screen Shots","text":""},{"location":"architecture/sdkvm/sdkvm/","title":"Software Defined KVM","text":""},{"location":"architecture/sdkvm/sdkvm/#main-components","title":"Main Components","text":"<ul> <li>SDKVM Clients</li> <li>Workspace Server</li> <li>SDKVM Discovery</li> <li>SDKVM Webservice</li> <li>SDKVM Networking</li> <li>SDKVM Network redundancy and link aggregation</li> <li>Openbox on SDKVM</li> <li>Data Models</li> <li>Upgrade</li> <li>Operating System</li> <li>Hardware</li> <li>Automation</li> </ul>"},{"location":"architecture/sdkvm/sdkvm/#work-breakdown","title":"Work Breakdown","text":"<ul> <li>SDKVM Work Breakdown 1.1.0</li> <li>SDKVM Release Notes</li> <li>SDKVM 1.0.0 Scope of Work</li> </ul>"},{"location":"architecture/sdkvm/sdkvm/#specifications","title":"Specifications","text":"<ul> <li>Data Model</li> <li>OSD Specification</li> <li>Boxilla Interface Specification</li> <li>SDKVM Core Utilities Specification</li> <li>SDKVM Client Utilities Specification</li> <li>SDKVM Monitor Management Layer</li> <li>SDKVM Audio Management Layer</li> <li>SDKVM Workspace Server</li> <li>SDKVM Control Bridge</li> <li>SDKVM Audio Framework</li> <li>Software Upgrade</li> <li>Supported Upgrade Path</li> </ul>"},{"location":"architecture/sdkvm/sdkvm/#proprosals","title":"Proprosals","text":"<ul> <li>LACP Proposal for DESKVUE</li> <li>Prorail Proposal</li> </ul>"},{"location":"architecture/sdkvm/sdkvm/#software-build-and-version-control","title":"Software Build and version control","text":"<ul> <li>Dual Boot Ubuntu 22.04</li> <li>SDKVM Source control</li> <li>Deskvue OS Bringup</li> <li>Deskvue Build System</li> </ul>"},{"location":"architecture/sdkvm/sdkvm/#window-management","title":"Window Management","text":"<ul> <li>Openbox on SDKVM</li> <li>KeyBindings Setup</li> <li>Window Manager Research</li> <li>SDKVM Configuration</li> </ul>"},{"location":"architecture/sdkvm/sdkvm/#profiling","title":"Profiling","text":"<ul> <li>SDKVM Profiling Results</li> <li>Hardware</li> <li>Issues with Curl and OpenSSL</li> </ul>"},{"location":"architecture/sdkvm/sdkvm/#teradici-sdks","title":"Teradici SDKs","text":"<ul> <li>Teradici Software Development Kit for Linux 19.11</li> <li>Client SDK for Linux 20.01.1</li> </ul>"},{"location":"architecture/sdkvm/sdkvm/#proto-typing","title":"Proto Typing","text":"<ul> <li>SDKVM Prototyping Notes for FreeRDP</li> <li>SDKVM Prototyping Notes for PCoIP</li> <li>OSD Technology Evaluations</li> </ul>"},{"location":"architecture/sdkvm/sdkvm/#utilities","title":"Utilities","text":""},{"location":"architecture/sdkvm/sdkvm/#wmctrl","title":"WMCTRL","text":"<ul> <li>A wmctrl Tutorial</li> <li>wmctrl Linux Journal</li> </ul>"},{"location":"architecture/sdkvm/sdkvm/#moving-a-window","title":"Moving a Window","text":"<p><pre><code>wmctrl -r \"Teradici PCoIP Client\" -e 1,0,0,800,600\n</code></pre> The five options are: \u201cgravity,X,Y,width,height\u201d. Gravity should be 1 for predictable results</p>"},{"location":"architecture/sdkvm/sdkvm/#xtoolwait","title":"XToolWait","text":"<ul> <li>xtoolwait</li> </ul>"},{"location":"architecture/sdkvm/sdkvm/#miscellaneous","title":"Miscellaneous","text":""},{"location":"architecture/sdkvm/sdkvm/#style-guide","title":"Style Guide","text":"<p>Brand Standards</p>"},{"location":"architecture/sdkvm/sdkvm/#leostream-configuration-and-test","title":"LeoStream Configuration and Test","text":"<ul> <li>Leostream Evaluation and Configuration</li> </ul>"},{"location":"architecture/sdkvm/sdkvm/#teradici-connection-manager","title":"Teradici Connection Manager","text":"<ul> <li>Teradici Connection Manager</li> </ul>"},{"location":"architecture/sdkvm/sdkvm/#accessing-shared-drives","title":"Accessing Shared Drives","text":"<pre><code>sudo  apt -y install  nfs-common\n\n# To mount the shared area\nmkdir -p ~/shared_area\nsudo mount -t nfs 10.211.128.208:/data/shared_area ~/shared_area  -orw,bg,rsize=1024,wsize=1024,namlen=255,hard,nolock\n\n# To mount the work area\nmkdir -p ~/work_area\nsudo mount -t nfs 10.211.128.208:/data/tftpboot ~/work_area  -orw,bg,rsize=1024,wsize=1024,namlen=255,hard,nolock\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_1.0.0/","title":"SDKVM Release 1.0.0","text":""},{"location":"architecture/sdkvm/sdkvm_1.0.0/#references","title":"References","text":"<ul> <li>Managed System Configuration</li> <li>SDKVM Architecture</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_1.0.0/#scope-of-work","title":"Scope of Work","text":""},{"location":"architecture/sdkvm/sdkvm_1.0.0/#100-preliminary-requirements","title":"1.0.0 Preliminary Requirements","text":"<ol> <li>The SDKVM must be upgradable locally through a thumb drive or, if managed, through Boxilla. This upgrade may include critical operating system upgrades and upgrades to the applications.</li> <li>The SDKVM will support KVM, RDP, PCoIP and brokered PCoIP connections</li> <li>All connections will support Audio. Audio should be controllable so that we can enable and disable audio at:<ul> <li>per tile level</li> <li>per workspace level</li> <li>per system level</li> </ul> </li> <li>We should be capable of controlling or directing the audio output to any of the functional audio interfaces on the SDKVM hardware including analog output, HDMI/DVI, USB headsets and speakers.</li> <li>The SDKVM will support the concept of different user types:<ul> <li>Administrators \u2013 admin users have access to add/delete/modify users, and all other parameters</li> <li>Power-Users \u2013 power users are allowed to define some parameters of their connections (such as resolution for connection and position of labels)</li> <li>Users \u2013 normal users are only allowed to make \u201cpre-defined\u201d connections and access some read-only systems information</li> </ul> </li> <li>The SDKVM can operate in a managed or unmanaged mode.<ul> <li>Managed Mode <ul> <li>In managed mode the system is controlled by Boxilla.</li> <li>New connections can only be created on Boxilla. Creation of local connections is disabled.</li> <li>Workspaces can still be created locally in managed mode and these workspaces can be imported into Boxilla.</li> <li>New users can only be created on Boxilla in managed mode.</li> <li>The SDKVM can only connect to transmitters that are within the same management domain.</li> <li>When a user logs into the SDKVM Boxilla will authenticate the user and push the XML database (or a form translated into json) to the system. Note: The SDKVM will not use SSH/SCP to download or upload files because of the security implications of exposing these protocols.</li> </ul> </li> <li>Unmanaged Mode<ul> <li>An admin user can create, edit and launch connections and workspaces.</li> <li>A local/normal user can launch connections and workspaces but cannot create, edit or delete them.</li> <li>A power user can modify workspace definitions, but cannot create new connections.</li> </ul> </li> </ul> </li> <li>It should also be possible to provide per tile statistics like FPS and Bandwidth, CPU usage per process</li> <li>It should be possible to retrieve diagnostics either locally through a thumb drive or through Boxilla.</li> <li>Where possible we should be able to use the same hot keys sequences as receiver. For example, ctrl ctrl, but this is not supported in Linux Window Managers. Supporting key sequences as opposed to key combinations would require a custom keyboard handler integrated into the window manager. This manager would have to be able to implement the concept of arming based on control keys. In the near-term it would make more sense to have a single character control key for the SDKVM like Ctrl, Alt or the Windows Key. These are all supported by existing window managers. Boxilla will allow us set the Control hot key in managed systems, but it will not provide support for assigning hot key mappings to workspaces. For unmanaged systems we can set both the Control key and the mappings to workspaces (see below).</li> <li>System Lockdown - The system should not allow access to the underlying OS. It should: <ul> <li>Boot to the OSD with requiring a password.</li> <li>Not expose and OS settings outside of those that can be set through the OSD.</li> <li>Only run designated services.</li> <li>Disable automatic updates.</li> <li>Not allow the user browse the system through open file dialogs.</li> </ul> </li> <li>The system must implement a closed loop feedback between each of the distributed components of the system so that the OSD can accurately display:         -  The status of a connection         -  Any indications of failure displayed on an information tile in the location where the video should have appeared.         -  Any significant change of status or performance</li> <li>The system should provide auto-connect on login option so that a given workspace can automatically launch on boot up. </li> <li>Details like passwords must be obfuscated in the JSON files. The SDKVM must be capable of accepting the same character range for passwords as that currently supported by Boxilla and receivers.</li> <li>The OSD must provide a means of managing the available displays and their designations</li> <li>The OSD should allow a user with appropriate permissions to set network configuration without requiring sudo or root access.</li> <li>For an unmanaged system the OSD must allow the user select a hot key to act as the controller key for hot key bindings</li> <li>For an unmanaged system the OSD must provide a means of allowing a user to associate a workspace with a hot key binding. This scheme should be sufficiently flexible so that deleting a workspace does not break the scheme.</li> <li>This release will only support fixed predefined templates. It will not be possible to for a user to define new templates.</li> <li>The OSD must be consistent with modern styled user interfaces. Screens should be easy to navigate and responsive.</li> <li>Any of the critical system components, OSD, workspace server and mqtt server must automatically restart if they encounter a failure.</li> <li>It should be possible to set the size of the mouse cursor for easy detection across multiple screens.</li> <li>It should be possible for an admin user to upgrade the system using an image on a thumb drive.</li> <li>It should be possible for an admin user to backup and restore the system configuration using a thumb drive. The back file will be encrypted.</li> <li>The OSD should allow the user configure the system for one of the following keyboard types:         - UK English         - US English         - Japanese         - French         - German</li> <li>USBR on connections is not supported in this release (We may need to support USBR on PCoIP connections depending on ABCs requirements)</li> <li>Master Workspace Area: It would be useful to support the concept of a Master Tile. This would be a designated tile to which other tiles could be dragged or transitioned. A typical scenario would be a PIP template with four tiles, one large tile to the right and three smaller (secondary) tiles to the left. The right most tile would be designated as a master tile and it could support transferring the secondary tile connections to the master tile when selected.</li> <li>The boot up splash screen for the chosen hardware should display a Blackbox logo.</li> <li>It should be possible to invoke a dropdown list by clicking on a hot spot on the tile. This would provide a list of the other connections in a given workspace which could then be invoked to replace the existing connection on that tile.</li> <li>In addition to per connection statistics, the system should provide performance statistics at a system level. These might include Network Bandwidth, GPU/CPU performance indicators, Errors, TCP Retry counters etc. </li> <li>It should be possible to prioritise resources to a specific tile in a workspace.</li> <li>Tiles can be locked or unlocked. A locked tile cannot be resized or moved from their launch position. By default, tiles are unlocked.</li> <li>Access to the bios should be prevented on production ready systems. It should not be possible to boot the device using an external drive or USB stick.</li> <li>It should be possible to restrict the monitor range supported by the SDKVM by configuring the EDID or X11 configuration of the SDKVM.</li> <li>It should be possible to clone an EDID from a target PC connected to an Emerald transmitter and apply this to the SDKVM.</li> <li>The OSD should provide a means of turning on or off a mouse beacon facility so that the mouse can be easily located on setups with multiple monitors. </li> <li>The OSD must support localisation for the following locals:         - Japan         - UK/US         - France         - Germany</li> <li>The OSD should provide a translation matrix in a form suitable for processing by language translation services.</li> </ol>"},{"location":"architecture/sdkvm/sdkvm_1.0.0/#specifications","title":"Specifications","text":"<p>OSD Specification for SDKVM 1.0.0</p>"},{"location":"architecture/sdkvm/sdkvm_1.0.0/#questions","title":"Questions","text":"<ul> <li>Do we assume bonded connections are not supported in V1.0.0?</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_1.0.0/#predicted-tasks-by-functional-area-based-on-the-above-specification","title":"Predicted Tasks by Functional Area based on the above specification","text":"<ul> <li>OSD Specification</li> <li>Boxilla Interface Specification</li> <li>SDKVM Core Utilities Specification</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_boxilla_specification/","title":"Boxilla Interface Specification for SDKVM 1.0.0","text":"<p>As part of the development of the SDKVM and Opal we need to be able to interface with our Boxilla Management Platform in a similar manner to our existing appliances.</p> <p>In order to provide the necessary API calls we propose implementing the existing REST API on SDKVM and Opal by porting the C libraries associated with librestapi, webservice and discovery to the Ubuntu 20.04 platform.</p> <p>Some of the existing Boxilla API uses SSH. We do not propose implementing these SSH based APIs, but instead will replace them with REST API calls (and eventually in a later release by MQTT calls)</p>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_boxilla_specification/#references","title":"References","text":""},{"location":"architecture/sdkvm/sdkvm_1.0.0_boxilla_specification/#general","title":"General","text":"<ul> <li>Data Models used in the SDKVM </li> <li>Original Software Architecture </li> <li>OSD Specification</li> <li>SDKVM Core Utilities Specification</li> <li> <p>Boxilla Communication to Appliance using SSH</p> </li> <li> <p>Postman test scripts can be found in svn://10.211.128.12/automation/trunk/ApplianceAutomation/PostmanScripts/Postman-scripts-REST-API-v1.0.10</p> </li> </ul>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_boxilla_specification/#discovery-and-ldap","title":"Discovery and LDAP","text":"<ul> <li>Boxilla LDAP SDD</li> <li>Discovery Appliance SDD</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_boxilla_specification/#rest-api","title":"REST API","text":"<ul> <li>REST API</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_boxilla_specification/#get-commands","title":"Get Commands","text":"<ul> <li>REST GET Endpoints</li> <li>REST Version Endpoint</li> <li>REST GET System Facts</li> <li>REST GET Video Facts</li> <li>REST GET Audio Facts</li> <li>REST GET USB Audio Facts</li> <li>REST GET Analog Audio Facts</li> <li>REST GET USB Facts</li> <li>REST GET Alerts</li> <li>REST Authentication Statistics </li> <li>REST Active Connection Status </li> <li>REST GET Previous Connection Statistics </li> <li>REST GET Connection Control Statistics </li> <li>REST GET Network Physical Link Status </li> <li>REST GET Network TOE Conection Status </li> <li>REST GET Process Status </li> <li>REST GET Transmitter Settings </li> <li>REST GET Receiver Settings </li> <li>REST GET Current User </li> <li>REST GET Reciever EDID TableHead1 </li> <li>REST GET Reciever EDID TableHead2 </li> <li>REST GET Transmitter EDID Clone NameHead1 </li> <li>REST GET Transmitter EDID Clone NameHead2</li> <li>REST GET Zone</li> <li>REST GET Bonded Name</li> <li>REST GET System Capabilities</li> <li>REST GET Diagnostics List</li> <li>REST GET Nth Diagnostic</li> <li>REST GET Log Level</li> <li>REST GET Debug Mode</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_boxilla_specification/#put-commands","title":"Put Commands","text":"<ul> <li>REST API PUT Commands</li> <li>REST Logoff Command</li> <li>REST Connection Legacy Command</li> <li>REST Connection Secure Commands</li> <li>REST API PUT Force Connection Commands</li> <li>REST API PUT Force Connection Secure Commands</li> <li>REST API PUT Terminate Commands</li> <li>REST API PUT Terminate Secure Commands</li> <li>REST API PUT Terminate Secure No OSD Commands</li> <li>REST API PUT Terminate with Exit Code Commands</li> <li>REST API PUT Flush Commands</li> <li>REST API PUT Receiver Settings Commands</li> <li>REST API PUT Transmitter Settings Commands</li> <li>REST API PUT EDID TX Head One Commands</li> <li>REST API PUT EDID TX Head Two Commands</li> <li>REST API PUT Zone Commands</li> <li>REST API PUT Bonded Group Name Commands</li> <li>REST API PUT Debug Level Commands</li> <li>REST API PUT Debug Mode Commands</li> <li>REST API PUT User Login Commands</li> <li>REST API PUT Led Flash Commands</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_boxilla_specification/#rest-northbound-api","title":"REST Northbound API","text":"<ul> <li>REST API Northbound</li> <li>REST API LDAP</li> <li>REST API Connection Status</li> <li>REST API User Login Status</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_boxilla_specification/#rest-api-and-web-services","title":"REST API and Web Services","text":"<p>The appliance REST API and web-service provides an existing appliance side south bound interface and a Boxilla north bound interface. This will be ported to the SDKVM so that Boxilla can re-use the existing messages structures. A complete analysis of existing appliance API calls and data flows is required so that we can implement a similar model.</p> <ul> <li>The REST API must use the existing security configuration employed by the appliances. In particular, it must support:<ul> <li>HTTPS over TLS using the Boxilla self signed certificate.</li> <li>This API needs to specify the content of the REST API Header.</li> <li>This API needs to support Basic Authentication via Username &amp; Password.</li> </ul> </li> <li> <p>The REST API on the appliance has a dependency on the system libraries. These are not available on the SDKVM so an equivalent set of calls will have to be created. </p> </li> <li> <p>Webservice and REST API</p> </li> <li>Discovery</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_boxilla_specification/#replacing-ssh-commands-used-by-boxilla","title":"Replacing SSH Commands used by Boxilla","text":"<p>Boxilla uses an SSH connection to the appliance for certain commands:</p> <ol> <li>Reboot A REST based reboot command exists - The API should call a script in /home/snuc/SDKVM/scripts/reboot.sh</li> <li>Restore/UnManage via restore script (no equivalent command exists) - The API should call a script in /home/snuc/SDKVM/scripts/unmanage.sh</li> <li>Get Product Details A REST based version is available using the version and system facts commands</li> <li>Software Upgrade (including transfer of the image file) (No equivalent REST API) - This needs a number of components:</li> <li>An ability to upload a file.</li> <li>A new API should to begin the upgrade process. It will call a script called in /home/snuc/SDKVM/scripts/upgrade.sh</li> <li>A new API that allows Boxilla determine the upgrade progress - The API should report the contents of a script in /home/snuc/SDKVM/info/upgarde_progress.txt. This will contain a figure between 0% and 100% to indicate progress or a text string indicating any errors that have occured in the upgrade process.</li> <li>Manage Appliance or Manually Add. To manually add an appliance of SDKVM Boxilla needs:<ul> <li>Architecture, uname -m, </li> <li>Kernel Version, uname -r</li> <li>PC Model, uname -n</li> </ul> </li> <li>Set IP once the appliance has been managed (No available API to get IP address): - The API should call a script in /home/snuc/SDKVM/scripts/update_network.sh it should pass the following information:<ul> <li>Mode: Static or Auto, if manual it should pass the following</li> <li>IP Address</li> <li>Netmask</li> <li>Gateway</li> <li>DNS</li> </ul> </li> <li>Get IP settings Endpoint. This will return the following information:<ul> <li>Mode: Static or Auto. In both cases it should return the the following</li> <li>IP Address</li> <li>Netmask</li> <li>Gateway</li> <li>DNS</li> </ul> </li> <li>Boxilla currently retrieves the following information:<ul> <li>Architecture, uname -m, </li> <li>Kernel Version, uname -r</li> <li>PC Model, uname -n</li> </ul> </li> </ol> <p>These are retrieved over SSH but these should be added to the version endpoint</p> <p>It is proposed that these commands be replaced with an equivalent REST API call.</p>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_boxilla_specification/#missing-end-points","title":"Missing End Points:","text":"<p>The following end-points would be required:</p> <ol> <li>An endpoint to restore the Transmitter or Receiver. Execute the restore shell script on the device when Boxilla performs an Unmanage operation and return success or failure status. Currently Boxilla creates a new ssh connection and runs the shell script on behalf of device.</li> <li>An endpoint to clear out all the previous image files (.clu or .fit) to avoid possible failure with no space available error. Boxilla can call the REST API and check if available space is there in the device and then can start uploading the upgrade file to the device. Path: /home/snuc/SDKVM/upgrade</li> <li>An endpoint to upload the .clu or .fit file to the appliance. Which then gets stored into /tmp directory.  at the appliance side, to accommodate the current flow followed in the Boxilla. On the SDKVM these files are stored in /home/snuc/SDKVM/upgrade</li> <li>An endpoint to get the md5sum of the uploaded file. Boxilla validates the file is correctly uploaded to the appliance by generating md5sum on the device machine itself and compare it the md5sum on the file local to that of Boxilla and compares it to be valid.</li> <li>An endpoint to run the Upgrade process on the new uploaded file.</li> <li>An endpoint to check if the upgrade has started.</li> <li>An endpoint to remove/clean the uploaded file once the upgrade process is completed. The path for upgrade files is /home/snuc/SDKVM/upgrade</li> <li>An endpoint to provide monitor details for a SDKVM. It would return a json object of the form: <pre><code>    \"monitors\" : [\n        {\n            \"monitor_name\": \"hdmi1\",\n            \"monitor_type\": \"Samsung\",\n            \"monitor_type\": \"dvi\",\n            \"monitor_width\" : \"1920\",\n            \"monitor_height\" : \"1080\"\n        },\n        {\n            \"monitor_name\": \"hdmi2\",\n            \"monitor_type\": \"Samsung\",\n            \"monitor_type\": \"dp\",\n            \"monitor_width\" : \"3840\",\n            \"monitor_height\" : \"2160\"\n        }\n    ] \n</code></pre></li> </ol>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_boxilla_specification/#existing-code-location","title":"Existing Code Location","text":"<ul> <li>svn://svn-server/Emerald/branches/develop/CustomLibraries/librestapi</li> <li>svn://svn-server/Emerald/branches/develop/Applications/Common/webservice</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_boxilla_specification/#porting-guide","title":"Porting Guide","text":"<p>We wish to port this code from the appliance to the SDKVM and Opal projects, but the code should remain as common as possible at the REST API and webservice level because we do not want to maintain to different code bases.</p> <p>The Webservice and REST API depends on the System Library on the appliance. The system library provides access to low level functions on the appliance. These will not be present on the SDKVM or Opal so we will need the API calls to call the relevant low level functions depending on whether they are running on the appliance or the SDKVM.</p> <p>It might make sense to create a separate a system library for the SDKVM platform and Opal products. The layers above that in REST API should not contain any appliance specific code. They should only contain API code. All appliance calls or system calls should be moved out of that library.</p> <p>In the short term we are going to use the REST API for many functions that might in the longer run be more suitable for MQTT. We should consider writing any API calls so that they can easily migrate to MQTT in future releases.</p> <p>The discovery and webservice binaries will need to be upgraded at some future point by the snuc user which will not have sudo access, so binaries should be installed in /usr/local/bin ideally. This is where the systemd service should also run them from. They should also be statically linked to avoid the necessity for shared library access.</p>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_boxilla_specification/#source-code-control","title":"Source Code Control","text":"<p>We propose using GitHub for the common packages like RestAPI, Webservice and Discovery. These will exist in separate repositories which will eventually be integrated into a common SVN build system.</p>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_boxilla_specification/#login-and-authentication","title":"Login and Authentication","text":""},{"location":"architecture/sdkvm/sdkvm_1.0.0_boxilla_specification/#ad-users","title":"AD users","text":""},{"location":"architecture/sdkvm/sdkvm_1.0.0_boxilla_specification/#ad-user-login","title":"AD user login","text":"<ul> <li>/api/ad/v1/user/login:   BXA API to process AD user login request.</li> <li>/api/ad/v1/user/auth_status: RX device polls this api to check status of AD Login request.</li> <li>bxa-api/users/status: to notify user login (update user status, for successful login only); this is used to notify BXA that the RX has copied over the user.xml file.</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_boxilla_specification/#static-kvm-users","title":"Static KVM Users","text":"<p>Local user login via XML file. - User validation is local to the RX, user name &amp; password exists in the xml file. - Post bxa-api/users/status to notify Boxilla of the login success (for successful login only)</p>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_boxilla_specification/#log-off-notification","title":"Log Off Notification","text":"<ul> <li>User log off, RX device uses the following API: send delete -&gt; bxa-api/users/status to notify Boxilla of a user log-off</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_boxilla_specification/#zones-and-users","title":"Zones and Users","text":"<pre><code>- Basically Zones are being used to manage RX devices by boxilla in particular areas(zones)\n- The zone value set and delete by Boxilla using restapi\n- The zone value will be considered when OSD do user login manually or Auto as well as Boxilla do user login thorough REST API to get zone specific clouddata xml file from boxilla for user validattion if zone value set by Boxilla\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_boxilla_specification/#managed-and-non-managed-state","title":"Managed and Non-Managed State","text":"<p>The SDKVM will support both managed and non-managed modes of operation. Boxilla can discover (see discovery below) SDKVM devices and then manage them. The process of managing a device is similar to that used in managing an appliance.</p>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_boxilla_specification/#un-managing-a-device","title":"Un-managing a device","text":"<p>To unmanage a device Boxilla will use a REST API call to invoke a restore-script on the SDKVM. This will be provided by the SDKVM Core Utilities.</p>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_boxilla_specification/#discovery-protocol","title":"Discovery Protocol","text":"<p>We need to port the existing appliance discovery protocol to the SDKVM. This has some integration to the appliance OS, for example, changing the IP address. This will need to be modified to accomodate the specific needs of the SDKVM.</p> <ul> <li>Port the existing discovery protocol to run as a systemd service.</li> <li>Document the various phases of discovery so that we can review.</li> <li>Refactor any OS specific dependencies.</li> <li>Transition Ubuntu OS from Network Manager to Systemd based network configuration.</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_boxilla_specification/#configuring-network-settings-on-ubuntu-20042204","title":"Configuring Network Settings on Ubuntu 20.04/22.04","text":"<p>The discovery code must be modified on Ubuntu to configure the IP address using Network Manager.</p>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_boxilla_specification/#allowing-non-root-user-to-run-nmcli","title":"Allowing non-root user to run nmcli","text":"<p>'''sh chmod u+s,a-w /usr/bin/nmcli <pre><code>-[Setting a static ipaddress](https://linuxhint.com/setup_static_ip_address_ubuntu/)\n\nWe can set the IP using the nmcli interface.\n\n```sh\n\nnmcli con add type ethernet con-name 'static-ip' ifname enp86s0 ipv4.method manual ipv4.addresses 192.168.1.98/24 gw4 192.168.1.254\nnmcli con up id 'static-ip' #check IP is setup\nnmcli connection show # show available connections\nnmcli connection delete static-ip # delete a connection\nnmcli con mod static-ip ipv4.dns 182.168.1.254 # add dns\nnmcli con up id 'static-ip' # activate the static connection\nnmcli con add type ethernet con-name 'dhcp' ifname enp86s0 ipv4.method auto # DHCP example\n</code></pre></p>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_boxilla_specification/#existing-code-location_1","title":"Existing Code Location","text":"<ul> <li>svn://svn-server/Emerald/branches/develop/Applications/Common/discovery</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_boxilla_specification/#audit-process","title":"Audit Process","text":"<ul> <li>We need to understand the audit process from Boxilla because this will determine when the database will be pulled and when the SDKVM will transition to a managed state.</li> <li>Document phases of the audit sequence for review.</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_boxilla_specification/#upgrade","title":"Upgrade","text":"<ul> <li>The SDKVM System should support upgrades by Boxilla.</li> <li>SDKVM will use an upgrade file in the form of a debian package (.deb file). Boxilla will transfer this file to the SDKVM over a REST interface. This is a new REST interface which will need to be added to the REST API being ported from the appliance.</li> <li>We need to create an upgrade script that will receive and process the debian package and report on progress. This will be provided as part of the SDKVM Core Utilities. </li> </ul>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_boxilla_specification/#xml-to-json-translation","title":"XML to JSON Translation","text":"<p>The SDKVM uses JSON files to manage users, connections and workspaces. It is proposed that Boxilla create these assets and down load then to the SDKVM.</p>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_boxilla_specification/#new-rest-api-interfaces","title":"New Rest API Interfaces","text":"<ul> <li>Export workspaces to Boxilla as per UI00230c, perhaps we can use file upload</li> <li>Import workspaces to Boxilla on login as per UI00230d, perhaps we can use file upload</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_boxilla_specification/#changes-to-north-bound-api","title":"Changes to North Bound API","text":"<p>API that appliance can use to report IP address change: <pre><code>bxa-api/devices/kvm/ipaddr\n</code></pre> <pre><code>proposal payload:\n{\n\"ip\": \"10.211.131.83\",\n\"mac\": \"mac addredss\",\n\"netmask\": \"netmask\",\n\"primary_dns\": \"dns\",\n\"secondary_dns\": \"dns2\"\n}\n\nproposal response:\n{\n\"code\" : \"200\",\n\"message\": \"success\"\n}\n\n---\n{\n\"code\" : \"400 or other\",\n\"message\": \"\n}\n</code></pre></p>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_boxilla_specification/#questions","title":"Questions","text":"<ul> <li>Why does Boxilla need to set the network settings?<ul> <li>We do not support DHCP on Boxilla, the reason we are writing network settings is because we assume a default IP address is set on the unit. When the device has been discovered we can allow the user the option of settings its IP address in Boxilla.</li> </ul> </li> <li>Why specifically is the discovery process trying to write /ect/interfaces? What aspect of the network settings does it ned to change once it manages a device?.<ul> <li>See above answer</li> </ul> </li> <li>How do we deal with an appliance or SDKVM unit that is using DHCP?<ul> <li>Boxilla does not support DHCP at the moment.</li> </ul> </li> </ul> <pre><code>Proposed EC1 drop is now scheduled for 31st January. It should support the following:\n  - The SDKVM can be discovered by Boxilla.\n  - The SDKVM can be managed by Boxilla. (but does not support Boxilla provisioned connections). It will copy the XML file (but not use it), place token on SDKVM, change IP address to a static IP.\n  - Boxilla can reboot the SDKVM over REST\n  - Boxilla can retrieve Product Details over REST\n  - Boxilla can manually add a SDKVM for management\n  - The SDKVM can respond to a Boxilla Ping\nIssue with pulling cable discovery process loses binding to socket - Sanjay investigating\nTo manually manage we need new API (Narayana has provided this) - The ummanage script will remove discovery file and mgrip file and restart the discovery - johnos will look after this.\nReboot over REST - endpoint in place - Julien will confirm\nBoxilla can retrieve Product Details over REST \n  - one endpoint not working. LACP - Narayana will investigate\n  - AT the moment Boxilla is stuck retrieving all of the time. Receiver settings are not populated - \nNarayana will investigate\nNarayana will update the end points at \nhttp://10.211.129.241:8002/architecture/REST_API/4._URI-API_versionTable/4.1_GET_endpoints/\nThe column 1.0.10 will indicate which endpoints are available, to be verified and which return empty objects or fully populated objects.\nShilei will assist Sanjay debugging the Boxilla issue and its inability to manage his system.\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_core_utilities/","title":"SDKVM Core Utilities Specification for SDKVM 1.0.0","text":""},{"location":"architecture/sdkvm/sdkvm_1.0.0_core_utilities/#upgrade","title":"Upgrade","text":"<ul> <li>We need to create an upgrade script that will receive and process the debian package and report on progress. This will be provided as part of the SDKVM Core Utilities -  it will be written in python.</li> <li>Must provide the ability to verify a debian package as being a valid SDKVM image.</li> <li>Must provide the ability to extract a debian package for extraction and installation.</li> <li>Must provide a means of providing a progress indicator to the calling utilities.</li> <li>Must provide an indication of failure or success.</li> <li>Must provide an ability to roll back a partly failed upgrade so that the system can be restored to a previously known reliable state.</li> <li>The upgrade packaging and installation mechanisms must support curated operating system upgrades. These would have to be installed as a non-root user.</li> <li>The software upgrade process must be capable of dealing with encrypted disks and this encryption may have to be created as part of a later install.</li> </ul> <p>Information on how Boxilla incorporates security updates</p> <p>Jira Reference for this feature</p>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_core_utilities/#boxilla-management","title":"Boxilla Management","text":""},{"location":"architecture/sdkvm/sdkvm_1.0.0_core_utilities/#management","title":"Management","text":""},{"location":"architecture/sdkvm/sdkvm_1.0.0_core_utilities/#general-configuration","title":"General Configuration","text":"<ul> <li>Must provide an XML to SDKVM translation module. Takes user information from the XML files and migrates that into corresponding user.json and connection.json files.</li> <li>Must provide a tool to implement and create the SDKVM directory structure and file layout.</li> <li>Provide an interface that allows a non-root user reboot the system.</li> <li>Provide an interface that allows a non-root user to configure aspects of the environment like mouse cursor size, shape, beaconing.</li> <li>Translation unit to allow user select mappings to be saved in a OpenBox configuration file.</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_core_utilities/#restore","title":"Restore","text":"<ul> <li>Provide a restore script that removes existing Boxilla management configurations and leaves the device in an unmanaged state.</li> <li>General capability to restore from backup to a known state</li> <li>Configuration export and import facility to allow an SDKVM instance be cloned and replicated.</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_core_utilities/#network-configuration","title":"Network Configuration","text":"<ul> <li>Provide an interface that allows a non-root user configure the network.</li> <li>Provide a convenient interface to systemd that allows the OSD configure the network without requiring special permissions.</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_core_utilities/#display-management","title":"Display Management","text":"<ul> <li>Provide an interface for Display Management and Configuration.</li> <li>Provide a means of detecting available monitors and configuring them on boot up</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_core_utilities/#security","title":"Security","text":"<ul> <li>Implement a secure REST client with necessary TLS certificate support.</li> <li>Secure the existing workspace server for external communications.</li> <li>Implement handlers for all the existing interfaces and replace those that use SSH with alternatives.</li> <li>Provide a means of authenticating a user through Boxilla.</li> <li>Disk Encryption</li> <li>Bios Encryption</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/","title":"OSD Specification for SDKVM 1.0.0.38","text":""},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#summary-of-changes-by-version","title":"Summary of Changes by Version","text":""},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#summary-of-main-changes-in-this-version-10021","title":"Summary of Main Changes in this Version 1.0.0.21","text":"<ul> <li>Added MQTT message for connection termination. This should be used by the connection check feature.</li> <li>Modified MQTT message for workspace termination. This should be used by the workspace launch feature.</li> <li>These methods are preferred over the existing method of polling the REST API for connection and workspace status.</li> <li>Added a note indicating how many logs should be kept before rolling the logs over.</li> <li>Added a note indicating that more than one network interface may exist.</li> <li>Added some details for how we communicate the logged in user</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#summary-of-main-changes-in-this-version-10022","title":"Summary of Main Changes in this Version 1.0.0.22","text":"<ul> <li>Modified logged in user details to include ID</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#summary-of-main-changes-in-this-version-10023","title":"Summary of Main Changes in this Version 1.0.0.23","text":"<ul> <li>Modified logged in user details again to indicate that we will fetch this information from the system preferences file.</li> <li>Clarified keyboard localisations requirements</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#summary-of-main-changes-in-this-version-10024","title":"Summary of Main Changes in this Version 1.0.0.24","text":"<ul> <li>Added details of alerts and status information the OSD must generate</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#summary-of-main-changes-in-this-version-10025","title":"Summary of Main Changes in this Version 1.0.0.25","text":"<ul> <li>Clarified the local users will be referred to as users from an OSD perspective</li> <li>Clarified the role of the OSD in communicating connection failure information</li> <li>Added architecture diagram.</li> <li>Clarified the situation regarding dual network ports.</li> <li>Major changes to the concept of managed mode and how the device is managed.</li> <li>Major changes to global system settings.</li> <li>Added terms and definitions.</li> <li>Clarified that the user directories must use the 10 digit ID rather than the user name.</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#summary-of-main-changes-in-this-version-10026","title":"Summary of Main Changes in this Version 1.0.0.26","text":"<ul> <li>Clarified location of System Level Settings.</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#summary-of-main-changes-in-this-version-10027","title":"Summary of Main Changes in this Version 1.0.0.27","text":"<ul> <li>Requested that Restart OSD Option be added to the Admin options.</li> <li>Added a section on registering for control events.</li> <li>Clarified audio control requirements.</li> <li>Updated monitor configuration screen requirements</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#summary-of-main-changes-in-this-version-10028","title":"Summary of Main Changes in this Version 1.0.0.28","text":"<ul> <li>Clarified that multiple status events may be received</li> <li>Added Check Login Status section - preliminary</li> <li>Removed references to keybindings.json</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#summary-of-main-changes-in-this-version-10029","title":"Summary of Main Changes in this Version 1.0.0.29","text":"<ul> <li>Clarified the script to call for reboot</li> <li>Added a section on selectable audio for private KVM connections</li> <li>Added hotkeys for mute and unmute</li> <li>Updated the requirements for the Monitor Configuration Screen</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#summary-of-main-changes-in-this-version-10030","title":"Summary of Main Changes in this Version 1.0.0.30","text":"<ul> <li>Clarified the version information requirements for the System Tab.</li> <li>Added a note to the Connection Properties Screen to disable unsupported features.</li> <li>Adding section on registering for Login Status Events.</li> <li>Corrected some error on the hot key assignments - The current OSD is not consistent with some of these.</li> <li>Added detail regarding login process that requires Boxilla authentication.</li> <li>Clarified keyboard Localization and Layout</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#summary-of-main-changes-in-this-version-10031","title":"Summary of Main Changes in this Version 1.0.0.31","text":"<ul> <li>Clarified sub-stypes for audio connections</li> <li>Added a general case where all active connections should be terminated. The OSD should iterate through any connections marked as active and reset their state to inactive.</li> <li>Added a section where the OSD must also register for the general event that requests all active workspace be terminated.</li> <li>Clarified the dual_head/extended desktop operation</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#summary-of-main-changes-in-this-version-10032","title":"Summary of Main Changes in this Version 1.0.0.32","text":"<ul> <li>Moved logs to syslog</li> <li>Added hotkey to bring up hotbar</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#summary-of-main-changes-in-this-version-10033","title":"Summary of Main Changes in this Version 1.0.0.33","text":"<ul> <li>Added details on keyboard locale and login</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#summary-of-main-changes-in-this-version-10034","title":"Summary of Main Changes in this Version 1.0.0.34","text":"<ul> <li>Keyboard layout is now a system level setting</li> <li>Added detail on how connections and workspaces will be allocated.</li> <li>Clarified the roles, permissions and OSD access of the different user types.</li> <li>Clarified who can see what in the multiuser environment</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#summary-of-changes-in-this-version-10035","title":"Summary of Changes in this Version 1.0.0.35","text":"<ul> <li>Added note to indicate that the name of the defaults user \"admin\" should be configurable.</li> <li>Clarified how we generate the passwords using bcrypt.</li> <li>Changed the name of the audio option for a private connection to 3.5mm/DP Audio as per project managements request.</li> <li>Moved inactivity timer settings to ~/SDKVM/system_level_settings.json</li> <li>Added details for EULA.</li> <li>Added details for help window.</li> <li>Clarified what different users can see.</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#summary-of-changes-in-this-version-10036","title":"Summary of Changes in this Version 1.0.0.36","text":"<ul> <li>Added clarification regarding system upgrade and the requirement to remove flash drives before reboot.</li> <li>Clarified the requirement to retain an admin user as a default admin with an ID of admin.</li> <li>Further clarified power user permissions.</li> <li>Clarified section on OSD-Helper screen</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#summary-of-changes-in-this-version-10037","title":"Summary of Changes in this version 1.0.0.37","text":"<ul> <li>Clarified the default name for the Import and Export settings file - EmeraldDeskVueSettings.cfg</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#summary-of-changes-in-this-version-10038","title":"Summary of Changes in this version 1.0.0.38","text":"<ul> <li>Clarified the key combination for help key combination</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#terms-and-definitions","title":"Terms and Definitions","text":"Term Definition Boxilla Blackbox's Appliance Management Software Decoder See Receiver Encoder See Transmitter Multiviewer A multiviewer is similar to a video wall. But while video walls require a separate TV display for each video source, multiviewers only require one display surface. Multiviewers are able to showcase full, split, quad, and custom configurations on the same pixel surface. PCoIP PC over IP (PCoIP) is a remote display protocol that Teradici developed for delivering remote desktops and applications to endpoints. PCoIP works by rendering client desktops on a network or cloud server. The desktop's pixels are then compressed, encrypted and then transmitted to the client device. The client then decrypts and renders the desktop view for the user. RFX RemoteFX Codec Extension developed by Microsoft which uses a lossy image codec to encode screen images with efficient and effective compression. This is the lossy scheme used in Blackbox products. Receiver A Blackbox appliance that receives and displays a video stream. A receiver is also referred to as a client or decoder. Source The term Source is commonly used to describe the PC connected to a transmitter appliance. Shared Mode A generic term used in Blackbox to describe schemes that allow more than one receiver view the video source from a transmitter. See Municast and  Multicast. Transmitter A Blackbox appliance that captures and transmits a video from a source PC. A transmitter is also referred to as a server or encoder. Video Source A source of input for a Transmitter, normally the DVI or Display Port output of a PC. Video Wall A video wall is a special multi-monitor setup that consists of multiple computer monitors, video projectors, or television sets tiled together contiguously or overlapped in order to form one large screen. Typical display technologies include LCD panels, Direct View LED arrays, blended projection screens, Laser Phosphor Displays, and rear projection cubes. <p>Table 1 Terms and Definitions</p>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#references","title":"References","text":"<ul> <li>See Data Models for structure of json representation of connections and workspaces </li> <li>Original Software Architecture </li> <li>OSD Specification</li> <li>SDKVM Core Utilities Specification</li> <li>Issue Tracking Spreadsheet from Square Root</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#role-of-the-osd-in-the-overall-sdkvm-architecture","title":"Role of the OSD in the overall SDKVM Architecture","text":"<p>The OSD provides the main user interface for the SDKVM. The SDKVM is a multi-user system and each user can provision and manage a range of connections and workspaces.</p> <p>The OSD communicates with the workspaceserver through a REST API and MQTT messages to launch workspaces and connections. The status of these connections and workspaces are returned to the SDKVM either as MQTT messages or through polling the workspaceserver's REST API.</p> <p></p>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#how-the-sdkvm-will-be-deployed","title":"How the SDKVM will be deployed","text":""},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#managed-deployment","title":"Managed Deployment","text":""},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#unmanaged-deployment","title":"Unmanaged Deployment","text":""},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#eula","title":"EULA","text":"<p>The first time the OSD launches on a new system it should present a window with the EULA to the user. The user must click accept before the OSD loads. On subsequent power ups the EULA is not presented, but if a factory restore takes place then the EULA should again be presented. This should also be viewable by clicking a \"View End User License Agreement\" button in the systems tab. Product Management will supply the text to be used in the EULA. The OSD can write a /home/snuc/info/eula_accepted.cfg file to indicate that the EULA has been accepted. The actual contents of the EULA can be read from : /home/snuc/info/eula_accepted.txt</p>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#help","title":"Help","text":"<p>The OSD should display a help window with assigned hot keys when the user presses hotkey + h This can be a separate flutter application.</p> <ul> <li>It should also have a single entry for hotkey + 0 - 9 for launching workspaces.</li> <li>It should provide a summary of the other principle hot keys. | HotKey + r  | Restore workspace to original layout | | HotKey + p  | switch to the previous workspace | | HotKey + c  | Move mouse pointer to the first screen (normally the OSD screen)| | HotKey + o  | Maximise OSD in foreground | | HotKey + ESC  | Minimise OSD in foreground | | HotKey + x  | Close the active workspace | | HotKey + Up Arrow  | Maximise active Window | | HotKey + Down Arrow | Minimise active Window | | HotKey + m | Mute all audio| | HotKey + u | Unmute all audio | | HotKey + b| Show hotbar on tiles |</li> <li>The window should close when the user clicks outside it or when the user hits the escape key.</li> <li>It should also be possible to bring this window up by hitting a '?' icon on the top bar</li> <li>The OSD Helper window should centre itself on screen 1.</li> <li>It should have a style consistent with the main OSD.</li> <li>The window should not have a title bar.</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#logging","title":"Logging","text":"<p>The OSD must maintain a log of all user interaction in /var/log/syslog. All entries should be written through a stanard syslog interface.</p> <p>This should include the details of a user's interaction with the OSD, for example:</p> <ul> <li>The OSD must maintain a log of all user interactions on the OSD screens in /home/snuc/SDKVM/logs/osd.log. All entries must have a date and time stamp.</li> <li>If the user clicks a button then this action should be recorded.</li> <li>If the user opens a dialog and selects a file, then this should be recorded.</li> <li>Adding, deleting or editing users, connections or workspaces should all be recorded in the osd.log file.</li> <li>If a user action causes a script to be launched then the path of the script should be recorded in the log with indications of success or failure of the launch. </li> <li>If the user launches a workspace then the name of the workspace would be recorded, for example: \"User [name] launched workspace ['name'] ['workspace ID'].</li> <li>Indication on success or errors should be recorded, for example: \"Workspace [name] [workspace ID] failed to launch: Error information [error details].</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#network-management","title":"Network Management","text":"<p>The Administrator shall be able to:</p> <ul> <li>Configure the IPv4 Address for the unit or </li> <li>Permit an IP address to be allocated using DHCP.</li> <li>Configure the Primary and Secondary DNS addresses or permit the DNS addresses to be allocated using DHCP. Valid DNS names shall be limited to the approved set as defined by Microsoft. See Appendix B for details.</li> </ul> <p>It should maintain two system connections as shown below. If these do not exist then the OSD should create them:</p> <ul> <li>static-ip for static connections. This should be modified with nmcli to reflect the users desired static configuration.</li> <li>dhcp for DHCP based connections. This should be modified with nmcli to reflect the users desired dhcp configuration.</li> </ul> <p>On the Emerald SNUC device (the selected hardware platform) there are two network interfaces. Only one of these will be supported as the active interface in the initial deployment of the system.</p> <p>The supported interface is enp45s0 (Note: this port name may change)</p>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#sample-nmcli-commands-for-creating-connections","title":"Sample NMCLI commands for creating connections","text":"<pre><code>nmcli con add type ethernet con-name 'static-ip' ifname enp45s0 ipv4.method manual ipv4.addresses 192.168.1.21/24 gw4 192.168.1.254\nnmcli con add type ethernet con-name 'dhcp' ifname enp45s0 ipv4.method auto\n</code></pre> <p>Any changes to the network and any associated updates (with commands used) should be shown in the sdkvm.log file.</p> <p>When we switch to dhcp we bring up the 'dhcp' connection.</p> <pre><code>nmcli con up id 'dhcp' #check IP is setup\n</code></pre> <p>When we bring up the static</p> <pre><code>nmcli con up id 'static-ip' #check IP is setup\n</code></pre> <p>If the user modifies these, then we use the modify command option:</p> <pre><code>nmcli connection modify dhcp ipv4.routes \"10.211.128.192/21\"\n</code></pre> <p>Note: There may be more than one network interface on a device.</p>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#detecting-network-changes-on-the-system","title":"Detecting Network Changes on the System","text":"<p>When the OSD launches it needs to be able to detect the currently active connection type, either DHCP or Static. The OSD should reflect this on the OSD Network Settings Screen.</p> <p>Note: There may be more than one network port on a device. If the user has plugged a cable into the non supported port then the OSD must warn the user with the message:</p> <pre><code>\"The network cable is attached to a non-supported interface port. Please switch connections\"\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#wireless-network-connections","title":"Wireless Network Connections","text":"<p>We do not support wireless connections at this time</p> <p>(DPS Reference: UI0134,UI0135,UI0136)</p>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#security","title":"Security","text":"<p>File open dialogues in the OSD should not allow access beyond default directories. When a user opens a file dialog they should be restricted to default paths and should not have general access to the system. </p> <p>A user should not be able to open a file dialog that allows them to browse the connections or workspace definitions of other users.</p>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#upgrade","title":"Upgrade","text":"<ul> <li>The upgrade page should allow the user to select one of a number of upgrade sources.<ul> <li>A file in the root directory of a locally attached thumb drive.</li> <li>A URL which points to an instance of an upgrade file - this could be a local or internet link</li> <li>A local file in the /home/snuc/SDKVM/upgrade directory. </li> </ul> </li> <li>If more than one file is present, then the page will present a dropdown list of available files. Only debian package files meeting the required criteria are presented in this list.</li> <li>On selecting a file the upgrade page will verify the integrity of the file and then begin the upgrade process. The status and progress of the upgrade should be presented to the user. The upgrade page of the OSD provides the following features by using the Upgrade API of the Core System Utilities. (To be provided)</li> <li>The actual upgrade page itself should provide:<ul> <li>An indication of upgrade progress.</li> <li>A clear indication of completion indicating success or failure.</li> <li>Clear and explicit reasons for upgrade failure.</li> <li>The option to roll back a partly upgraded system that has failed in the process of upgrade.</li> <li>A detailed log of the upgrade process.</li> <li>The initial implementation will just support the thumb drive method of upgrade. </li> <li>The interface between the upgrade process and the OSD and how it communicates progress and failure has yet to be defined.</li> </ul> </li> <li>On sucessful completion of upgrade the OSD should inform the user of success. On the same prompt the OSD should request that the user remove any flash or thumb drives.</li> <li>Once the user acknowledges that they have been removed the OSD should present a 'Reboot' button that, when clicked, will cause the system to reboot.</li> </ul> <p>See also : SDKVM Upgrade Specification</p>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#proposed-thumb-drive-upgrade-method","title":"Proposed Thumb Drive Upgrade Method","text":"<ul> <li>The user clicks a button on the OSD's upgrade page.</li> <li>It presents a list of appropriate files in the thumb drive. Only files that meet specific criteria (those with a *.dkv extension and beginning with the words deskvue_) should be shown.</li> <li>If a thumb drive is present, then we should open on the first listed thumb drive. If no thumb drive is found, then we should default to /home/snuc/SDKVM/upgrade.</li> <li>The user should be able to select the file.</li> <li>The file is then copied from the thumb drive to the /home/snuc/SDKVM/upgrade folder.</li> <li>The OSD then calls an update script /home/snuc/SDKVM/scripts/upgrade.sh passing the path to the newly copied file.</li> </ul> <p>The file name should follow the format DESKVUE_VERSION.dkv</p> <p>for example:</p> <pre><code>DESKVUE_1.0.0.dkv\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#users","title":"Users","text":""},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#multi-user-environment","title":"Multi User Environment","text":"<ul> <li>The OSD should support a multi-user environment. The OSD workspace, preferences and configuration are unique to a particular user. An OSD user is distinct from the \"User Context\" in which the application runs. See proposed directory structure below:</li> <li>The OSD must support the following user types:<ul> <li>A user with admin rights can create, edit and launch connections and workspaces. An admin user has visibility to all workspaces and connections in the system. There should always be at least one admin user. The default admin user has an id of admin. An admin user can set the hot-key associated for all other users. An admin user can see the following screens:<ul> <li>Network, Display</li> <li>Settings</li> <li>Connections</li> <li>Workspaces</li> <li>Templates</li> <li>System.</li> </ul> </li> <li>A local user (we refer to these simply as users on the OSD, but we can still designate the user type as local in config files) can launch workspaces but cannot create, edit or delete them. They have no visibilty on connections and cannot view the connections tab. A local user cannot assign hot keys. A local user can see the following screens:<ul> <li>Network (read only)</li> <li>Workspaces</li> <li>System (Only displays information section).</li> </ul> </li> <li>A power user can create workspace definitions based on connections allocated to them by a admin user, but cannot create new connections or edit existing connections. A power user cannot delete or modify connections or workspaces allocated to them by an admin user. A power user should not have an option to modify a workspace allocated by admin. A power user can see the following screens:<ul> <li>Network (read only),</li> <li>Connections</li> <li>Workspaces</li> <li>Users (but only their own settings)</li> <li>System (Only displays information section).</li> </ul> </li> <li>A super-user (su) has all the rights of an admin user but additionally they can access the OS beyond the confines of the OSD. This is only intended for on-site maintenance and debug. The default password for this user is AA_90_77_AE_6678.</li> </ul> </li> <li>The OSD should find resources for the logged in user and load the appropriate connection, workspace and preferences files when a user is logged in.</li> <li>The OSD should provide a \"Create New User\" page that allows a user with administrative privileges to create a new user when the system operates in unmanaged mode. </li> <li>The OSD should provide a \"Edit User\" page that allows a user with administrative privileges to edit a user preference when the system operates in unmanaged mode. </li> <li>The OSD should provide a \"Delete User\" link that allows a user with administrative privileges to delete another user when the system operates in unmanaged mode. </li> <li>The OSD should provide only display options appropriate to the privilege of a user.<ul> <li>A local user can only see the Networking tab (Readonly), the workspaces tab (no edit just launch) and only the information tab of the system page.</li> <li>An admin user can see all tabs.</li> <li>A power user can see the Networking tab (Readonly), the workspaces tab (but only for allocated workspaces or workspaces created by them), the connections tab (but only for allocated connections or connections created by them) and only the information tab of the system page.</li> </ul> </li> <li>The OSD should provide a preferences screen in the user tab to allow user select keybindings and hotkey assignments when the system operates in unmanaged mode.</li> <li>It should be possible to change the name of the default admin user but they will always have the id of admin.</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#user-preferences","title":"User Preferences","text":"<p>User preferences should be stored in a the users.json file. This will reside in the user folder as shown above.</p> <pre><code>/home/snuc/SDKVM/users/users.json\n</code></pre> <p>The format for this is defined in the data model </p>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#system-preferences","title":"System Preferences","text":"<p>The system wide preferences are stored in the system preferences file:</p> <p><pre><code>/home/snuc/SDKVM/users/system_level_preferences/system_preference.json\n</code></pre> The format for this is defined in the data model </p>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#user-management","title":"User Management","text":"<p>The main navigation bar at the top of the OSD will have a 'Users' tab when the system operates in unmanaged mode or in partial managed mode (Release 1.0.0).</p> <p>Selecting this link will take us to the User's page. A user with Admin privileges shall be able to see a list of all users for the system. On the right-hand side of the screen an ellipses menu option will allow change of password, editing, removal or navigation to the user's settings page as discussed below:</p> <ul> <li>Edit: Users can change their password and descriptive name and title when the system operates in unmanaged mode.</li> <li>Remove: Only the Administrator has the option of removing a user.</li> <li>Settings: The user is taken to a settings page where they can change hot-key assignments and other user preferences when the system operates in unmanaged mode.</li> </ul> <p>A local and power user can only see their own user entry and settings on this page.</p>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#passwords","title":"Passwords","text":"<p>An Administrator shall be able to change the password for an Administrator, Power-User or User when the unit is unmanaged or in partial managed mode (Release 1.0.0). A power user cannot change their password or the password of other users. The Administrator shall be requested to enter the existing admin password to confirm \u201caccess\u201d. The Administrator should then be requested to enter the new password twice. The unit shall confirm that both versions of the new password are identical before the change is acknowledged and saved. When typing passwords, the actual typed letters should not be displayed but replaced with an asterix (\u2018*\u2019). Blank passwords shall be allowed.</p> <p>In Managed Mode, it shall only be possible to change a password from the Manager. Therefore, it will NOT be possible for a normal User to change own password.</p> <p>The password format should be a simple string of up to 32 characters. Valid characters in password will follow standard \u201cWindows\u201d rules for a password</p>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#user-and-connection-limits","title":"User and Connection Limits","text":"<p>Note: John Hickey needs to clarify the practical implementation of this requirement. This request for clarity is captured in Bug 5139</p> <p>When a Deskvue Receiver is managed by an external Manager, then it should be able to support the following limits of Users and Connections. The limits are defined for the purpose of testing. (DPS Reference: UI0605)</p> <ul> <li>20 User and 1,000 Connections - each of 20 Users get allocated all the 1000 Connections.</li> <li>200 Users and 100 Connections - each of 200 Users get allocated all the 100 Connections.</li> <li>1000 Users and 20 Connections \u2013 each of 20 Users get allocated all the 1000 Connections.</li> <li>10 Users and unique 100 Connections - each of 10 Users get allocated 100 unique Connections.</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#user-data-model","title":"User Data Model","text":"<p>The user data model is defined here </p>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#storing-and-generating-user-passwords","title":"Storing and Generating User Passwords","text":"<p>For an unmanaged system users passwords in the json file should be encrypted using bcrypt and stored as a hash. The password supplied at login can be validated using a function like bcrypt.compare.</p> <p>The OSD should use the following for generating the password hash: - Salt generation parameters:\u2002     - prefix - '$2a'     - logRounds - 10     - secureRandom - Random.secure()</p> <p>Note: We generate a new salt every time we generate the password hash.</p> <ul> <li>Using bcrypt to store user passwords</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#creating-a-new-user","title":"Creating a new user","text":"<ul> <li>An entry is added to the /home/snuc/SDKVM/users/users.json file</li> <li>A directory with the User ID is created in /home/snuc/SDKVM/users, for example /home/snuc/SDKVM/users/19d44ad775f</li> <li>A workspace and connections directory are created in this folder. These will contain the connections and workspaces defined locally for that user.</li> </ul> <p>The /home/snuc/SDKVM/users.json file holds a list of all locally administered users.</p>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#user-data-model-and-directory-structure","title":"User Data Model and Directory Structure","text":"<p>The user data model is defined here; however, the directory structure within the SDKVM must support this data model.</p> <p></p> <p>User directories use the 10 digit ID (not the user name). Any references to ser data should use this 10 digit ID using the user.json file as a cross reference. This allows the user name and details to change without changing the directory structure.</p>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#allocation-of-connections-and-workspaces-by-an-admin-user","title":"Allocation of connections and workspaces by an Admin user","text":"<p>An admin user can allocate connections and workspaces to power and local users. A local user can only access and launch workspaces allocated to them. A power user can only access and launch connections and workspaces allocated to them. An admin user can access, modify or launch all connections or workspaces.</p> <p>This can be modelled on how our existing receiver product allocates connections.</p> <ul> <li>The administrator selects a user</li> <li>The administrator then allocates connections to the user.</li> <li>The administrator can also remove previously allocated connections</li> </ul> <p></p> <p></p> <p></p> <p>A similar method can be used for workspace allocation.</p>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#connections","title":"Connections","text":""},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#connection-types","title":"Connection Types","text":"<p>The OSD will support the following Connection Types</p>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#rdp","title":"RDP","text":"<p>The OSD will allow a user configure the following RDP settings:</p> <ul> <li>Connection Name</li> <li>IP Address</li> <li>Port</li> <li>User Name</li> <li>Password</li> <li>Domain</li> <li>NLA</li> <li>Audio</li> <li>USB Redirection</li> <li>View Only</li> <li>Persistent</li> <li>Extended Desktop</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#txkvm","title":"TX(KVM)","text":"<p>The OSD will allow a user configure the following TX settings:</p> <ul> <li>Connection Name</li> <li>IP Address</li> <li>Connection Mode - shared or private</li> <li>Domain</li> <li>NLA</li> <li>Audio</li> <li>Audio Type analog or usb</li> <li>USB Redirection</li> <li>View Only</li> <li>Persistent</li> <li>Extended Desktop</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#pcoip","title":"PCoIP","text":"<p>The OSD will allow a user configure the following PCoIP settings:</p> <ul> <li>Connection Name</li> <li>IP Address</li> <li>User Name</li> <li>Password</li> <li>Domain</li> <li>Desktop ID</li> <li>Audio</li> <li>USB Redirection</li> <li>View Only</li> <li>Persistent</li> <li>Extended Desktop</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#connection-screen","title":"Connection Screen","text":"<p>It shall be possible to search for a Connection using a progressive text search (case insensitive) on the connections page.</p>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#connection-properties-screen","title":"Connection Properties Screen","text":"<p>There are certain properties on the Connection Properties Screen that are not currently supported. These should be presented as greyed out or disabled</p> <ul> <li>Persistence</li> <li>USBR</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#connection-status","title":"Connection Status","text":"<ul> <li>The OSD should update the workspace status to reflect the real-time status of the workspace connections. A workspace is considered active if at least one connection is active in the workspace. An active workspace will appear with the \"Termination\" option in the workspace view. There can only be one active connection. </li> <li>It should be possible to click on an active workspace and get a connection by connection status either in a context window or popup window. </li> <li>It should be possible to terminate an active workspace gracefully by selecting the \"Terminate\" option.</li> <li>Each tile in a workspace should have a unique identifier; this will take the form of a unique 10 digit ID (formed from the alphabet '1234567890abcdef') and will be based on the connection ID (connection_id) generated for each connection. This connection id should be generated on connection creation and must be unique amongst the other connection ids for that user. A package like https://pub.dev/packages/nanoid could be used for this purpose.</li> </ul> <p>To understand the structure of the connection status returned to the OSD see : - See Data Models for structure of json representation of connections and workspaces </p> <p>In particular, the section: Workspace Status Definition</p> <p>Note: Connection status may be communicated through an MQTT client to and from the workspace server or over a REST API - TBD </p>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#user-connections","title":"User Connections","text":"<p>The available connections for a given user are stored the connections directory in a file called connections.json.</p>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#osd-feedback-for-failed-connections","title":"OSD Feedback for Failed Connections","text":"<p>If a connection launch fails then the workspaceserver will place a message tile at that location with the same dimensions as the connection. The message tile will indicate the reason for the failure based on the status information returned from the client software.  The OSD should not have to concern itself other than ensuring the connection launch buttons are returned to the correct status. The workspaceserver will send an MQTT failure message to the OSD in the event of a failure. This message should be used by the OSD to transition the workspace or connection buttons to the required state.</p>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#workspaces","title":"Workspaces","text":""},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#workspace-definition","title":"Workspace Definition","text":"<p>A workspace is a collection of views. It is the main surface on which a user interacts with the SDKVM.</p> <p></p> <p>Workspaces are defined for each user and are stored in the users workspace directories. The workspace name should use the unique 10 digit ID code associated with that workspace. This is to allow the workspace name to change without affecting the file or its hot key binding.</p>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#workspace-status","title":"Workspace Status","text":"<p>The status for a workspace can be retrieved via a GET Request from the end point:</p> <p><pre><code>127.0.0.1:5000/workspace\n</code></pre> It will return the status for the workspace as active or inactive. The workspace is active if any one connection within the workspace is still active.</p> <pre><code>{\n    \"query\": \"inactive\"\n}\n</code></pre> <p>A more detailed form of status can be retrieved from:</p> <p><pre><code>127.0.0.1:5000/workspace/detailed\n</code></pre> <pre><code>{\n    \"query\": { \"status\": \"active\", \"connections\" : [{\"id\": \"PE_TX_136_9ffd1a15b9\", \"status\": \"active\", \"bit_rate\": 0, \"fps\": 0, \"errors\": \"\", \"exit_code\": \"0\", \"exit_reason\": \"\", \"target\": \"\"},{\"id\": \"4K_TX_190_0f1a151cad\", \"status\": \"active\", \"bit_rate\": 0, \"fps\": 0, \"errors\": \"\", \"exit_code\": \"0\", \"exit_reason\": \"\", \"target\": \"\"},{}]     }\n}\n</code></pre> NOTE: The preferred way of retrieving workspace status is by registering for the appropriate MQTT topic.</p>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#registering-for-workspace-status-events","title":"Registering for Workspace Status Events","text":"<p>When a workspace is terminated the server will send out a workspace status event over MQTT. The OSD can subscribe to these events and terminate accordingly:</p> <p>MQTT Topic:  topic blackbox/sdkvm/deskvue/status/osd_sdkvm/workspace</p>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#example-status-for-a-specific-workspace","title":"Example status for a specific workspace","text":"<pre><code>    blackbox/sdkvm/deskvue/status/osd_sdkvm/workspace/1709ce654d/active\n</code></pre> <p>In this example, \"1709ce654d\" is the workspace ID and \"active\" is the status.</p> <pre><code>    blackbox/sdkvm/deskvue/status/osd_sdkvm/workspace/1709ce654d/inactive\n</code></pre> <p>In this example, \"1709ce654d\" is the workspace ID and \"inactive\" is the status.</p> <p>The OSD must listen for MQTT messages on the general topic blackbox/sdkvm/deskvue/status/osd_sdkvm/workspace. When a message is received the OSD should determine the workspace ID and terminate the workspace if the status is set to inactive.</p>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#example-status-for-all-active-workspaces","title":"Example status for all active workspaces","text":"<p>The OSD must also register for the general event that requests all active workspace be terminated. Any active workspace should transition to its inactive state on receiving this message.</p> <pre><code>    blackbox/sdkvm/deskvue/status/osd_sdkvm/workspace/inactive\n</code></pre> <p>This facility can be tested with the following command.</p> <pre><code>mosquitto_pub -h 127.0.0.1 -t \"blackbox/sdkvm/deskvue/status/osd_sdkvm/workspace/inactive\" -m \" \"\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#registering-for-login-status-events","title":"Registering for Login Status Events","text":"<p>When a system is managed the OSD will need to synchronise with Boxilla to authenticate users. During the login process the webservice component will send status messages t o indicate the success or failure of a login attempt. The event will be sent over MQTT. The OSD can subscribe to these events:</p> <p>MQTT Topic:  topic blackbox/sdkvm/deskvue/status/osd_sdkvm/webservice</p>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#example-status","title":"Example status","text":"<pre><code>    blackbox/sdkvm/deskvue/status/osd_sdkvm/webservice/ - m { \"login_type\" : \"local\", \"login_status\" : \"success\", \"details\" : \"Boxilla return error: error details\" }\n</code></pre> <pre><code>    blackbox/sdkvm/deskvue/status/osd_sdkvm/webservice/ - m { \"login_type\" : \"active_directory\", \"login_status\" : \"failure\" , \"details\" : \"Boxilla return error: error details\" }\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#to-generate-status-events","title":"To Generate Status Events","text":"<p>The example below shows how to use mosquitto_pub to generate the status event</p>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#to-communicate-success","title":"To communicate success","text":"<pre><code>mosquitto_pub -h 127.0.0.1 -t  blackbox/sdkvm/deskvue/status/osd_sdkvm/webservice/ - m { \"login_type\" : \"local\", \"login_status\" : \"success\", \"details\" : \"Boxilla return error: error details\" }\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#import-and-export-of-settings","title":"Import and Export of Settings","text":"<p>The OSD should provide a facility on the settings page to export and import configuration so that a user can clone, backup and restore SDKVM settings. The settings can be saved to:   - A file in the root directory of a locally attached thumb drive.   - A URL which supports file upload. (Not required for this release)   - A local file in the /home/snuc/SDKVM/backups directory. (Not required for this release)</p>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#usage","title":"Usage","text":""},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#export","title":"Export","text":"<p>When button is selected \u2013 a pop-up window shows the attached thumb-drive directory and has a text box for the user to specify the name of the file \u2013 a default of \u201cEmeraldDeskVueSettings.cfg\u201d is displayed in the text box \u2013 the user can change the name of the file, but the extension will always be set to .\"cfg\".</p> <p>The user has two buttons on this window \u2013 Save and Cancel. The Save button causes the save settings script to be saved to the file name defined. The cancel button \u2013 just cancels the operation and returns the user to the System page.</p> <p>For initial work \u2013 the Save button will just call a script called /home/snuc/SDKVM/scripts/ExportSettings.sh. This script takes a single argument which is the path to which the settings should be written, for example:</p> <p><pre><code>/home/snuc/SDKVM/scripts/ExportSettings.sh /media/usb/thumbdrive/EmeraldDeskVueSettings.cfg\n</code></pre> The script will then create the file in /media/usb/thumbdrive/EmeraldDeskVueSettings.cfg and will block (not return) until the file has been flushed to the given location.</p>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#import","title":"Import","text":"<p>When the import button is selected, a pop-up window shows the available files in an attached thumb-drive. Only files with the extension *.cfg are shown. The user can select the a file. </p> <p>If a thumb drive is present then we should open on the first listed thumb drive. If no thumb drive is found then we should default to the locations below:</p> <ul> <li>Export settings and Import settings dialog should open on a default path of /home/snuc/SDKVM/backup if no thumb drive is found.</li> </ul> <p>The user has two buttons on window \u2013 Import or Cancel. The import button causes the OSD to call a script as detailed below. The cancel button \u2013 just cancels the operation and returns the user to the System page.</p> <p>For initial work \u2013 the import button will call a script called /home/snuc/SDKVM/scripts/ImportSettings.sh. This script takes a single argument which is the path to location of the setting config file, for example:</p> <p><pre><code>/home/snuc/SDKVM/scripts/ImportSettings.sh /media/usb/thumbdrive/EmeraldDeskVueSettings.cfg\n</code></pre> Before calling the script the OSD should advise the user that all settings will be over written and they must confirm that they wish to proceed.</p>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#settings-and-management","title":"Settings and Management","text":""},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#global-settings-window","title":"Global Settings Window","text":"<p>The Global Settings window will provide the following functions to a user with administrator access:</p> <ul> <li>Reboot the Receiver from the OSD. (DSP Reference: UI0045) - The OSD will call a script in /home/snuc/SDKVM/scripts/reboot.sh</li> <li>Restart the OSD</li> <li>Stop and Start the Following Services:</li> <li>Discovery - The OSD will call a script in /home/snuc/SDKVM/scripts/restart_discovery.sh</li> <li>Rest API - The OSD will call a script in /home/snuc/SDKVM/scripts/restart_restapi.sh</li> <li>Workspace Server - The OSD will call a script in /home/snuc/SDKVM/scripts/restart_workspaceserver.sh</li> <li>Reset to Factory Defaults (DSP Reference: UI0048a) - The OSD will call a script in /home/snuc/SDKVM/scripts/restore.sh</li> <li>View logs</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#developer-window","title":"Developer Window","text":"<ul> <li>The OSD settings page must provide access to a password protected developer window that allows a tech-super-user to perform the following actions:</li> <li>Close the OSD - Caption: Close - The flutter application can simply terminate itself.</li> <li>Restart the OSD - Caption: Restart OSD -The OSD will restart itself</li> <li>Launch a terminal window - Caption: Terminal - The OSD will call a script called /home/snuc/SDKVM/scripts/terminal.sh</li> <li>Launch a web browser - Caption: Browser - The OSD will call a script called /home/snuc/SDKVM/scripts/browser.sh</li> <li>Restart the system - Caption: Restart System - The OSD will call a script called /home/snuc/SDKVM/scripts/restart.sh</li> <li>Shutdown the system - -Caption: Shutdown System -The OSD will call a script called /home/snuc/SDKVM/scripts/shutdown.sh</li> <li>Enable SSH Server - -Caption: Enable SSH -The OSD will call a script called /home/snuc/SDKVM/scripts/enable_ssh.sh</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#mouse-configuration","title":"Mouse Configuration","text":"<p>The OSD must provide a mouse configuration screen that allows the user select a preferred mouse cursor size.  The mouse cursor size setting can be configured on a user by user basis.</p>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#monitor-configuration-screen","title":"Monitor Configuration Screen","text":"<ul> <li>The OSD must provide a Monitor Configuration page that:<ul> <li>Displays visually the connected monitors and there relative positions.</li> <li>It should indicate which monitor is the primary monitor.</li> <li>It should allow the user designate a monitor as the primary monitor.</li> <li>It should allow the user specify the resolution of a monitor.</li> <li>Allow a user set the resolution and refresh rate for a monitor.</li> <li>It should detect if the monitor profile for an existing workspace is compatible with the current monitor configuration. If it is not then it should warn the user before launch that the workspace may not display correctly because the monitor configuration has changed.</li> <li>The system should be cacapble of detecting monitors that were not part of a previous configuration.</li> <li>The system should be cacapble of detecting the hot-plugging of monitors and update its configuration accordingly.</li> <li>It should generate a xrandr script as shown below:</li> </ul> </li> </ul> <p><pre><code>#!/bin/sh\nxrandr --output HDMI-1 --primary --mode 3840x2160 --pos 0x0 --rotate normal --output HDMI-2 --mode 3840x2160 --pos 3840x0 --rotate normal --output DP-1 --off --output DP-2 --off --output DP-3 --off --output DP-4 --off\n</code></pre> This file should be saved in:</p> <p>/home/snuc/.configure/openbox/configure_monitors.sh</p> <p>This script will be called by the window manager on boot up, so after a user changes the monitor configuration the system should restart the window manager or reboot.</p> <pre><code>- The system will call the xrandr script after the user logs in to the OSD by invoking /home/snuc/.configure/openbox/configure_monitors.sh.\n- If a user changes the monitor configuration then the OSD should log the user out. When the user logs in again the PostLogin script will run the required script.\n</code></pre> <p>Note: How do we want this to behave, if the user changes a display setting are we always going to force a login and logout sequence?</p>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#inactivity-timers","title":"Inactivity Timers","text":"<p>There are 3 inactivity timers that can be defined at a system level.</p>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#screen-saver","title":"Screen Saver","text":"<p>This timer by default is disabled. The screen saver can be set from 1 to 999 minutes or never (i.e. displayed). When set, if there is no keyboard or mouse activity for the defined period \u2013 then the unit puts its attached monitors into low power mode. When keyboard or mouse activity is detected, then the monitors are brought back to normal operation.  Setting the Screen Saver period can only be performed by an Administrator. (DPS Reference: UI0052)</p> <p>This will use the underlying Ubuntu power management, but the OSD will simply update the setting in /home/snuc/SDKVM/system_level_settings.json</p> <pre><code>    \"screen_saver\": \"30\",\n</code></pre> <p>After the user changes this setting the OSD should update this file and send a POST message to:</p> <p><pre><code>127.0.0.1:5000/settings\n</code></pre> This POST message  will cause the SDKVM core to read the new settings.</p>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#workspace-inactivity-timer","title":"Workspace Inactivity timer","text":"<p>This timer is by default is disabled. The Workspace Inactivity timer can be set from 1 to 60 minutes or never (i.e. never activated). When set, if no keyboard or mouse activity the workspace is closed (i.e. all connections closed) and OSD is displayed. (DPS Reference: UI0053a)</p> <p>The OSD will simply update the setting in /home/snuc/SDKVM/system_level_settings.json</p> <pre><code>    \"workspace_inactivity_timer\": \"30\",\n</code></pre> <p>After the user changes this setting the OSD should update this file and send a POST message to:</p> <p><pre><code>127.0.0.1:5000/settings\n</code></pre> This POST message  will cause the SDKVM core to read the new settings.</p> <p>Only the Administrator can change this setting.</p>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#osd-inactivity-timer","title":"OSD Inactivity timer","text":"<p>This timer is by default is disabled. The OSD Inactivity timer can be set from 1 to 60 minutes or never (i.e. never activated). When set, if no keyboard or mouse activity and no active workspace (i.e. timer only starts when workspace is closed) \u2013 when timer period expires the user is logged out and log-in screen is presented to the user. (DPS Reference: UI0053)</p> <p>The OSD itself must maintain this timer and log the user out according to the setting.</p> <p>Only the Administrator can change this setting on an unmanaged system. On a managed system these settings are controlled by Boxilla.</p>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#system-diagnostics","title":"System Diagnostics","text":"<p>The System Diagnostics button allows the system diagnostics to be saved to the locations specified below. </p> <ul> <li>A file in the root directory of a locally attached thumb drive.</li> <li>A URL which supports file upload. (Not required for this release)</li> <li>A local file in the /home/snuc/SDKVM/diagnostics directory. (Not required for this release)</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#usage_1","title":"Usage","text":"<p>When button is selected \u2013 a pop-up window shows the attached thumb-drive directory and has a text box for the user to specify the name of the file \u2013 a default of \u201cDeskvueDiagnostics.log\u201d is displayed in the text box \u2013 the user can change the name.</p> <p>If a thumb drive is present then we should open on the first listed thumb drive. If no thumb drive is found then we should default to the location /home/snuc/SDKVM/diagnostics</p> <p>The user has two buttons on window \u2013 Save or Cancel. The Save button causes the save diagnostics script to be run and saved to the file name defined. The cancel button \u2013 just cancels the operation and returns the user to the System page.</p> <p>For initial work \u2013 the Save button will just call the relevant diagnostics export function in the SDKVM core through a script, REST API or MQTT call (TBD).</p> <p>To create the diagnostics the OSD should call a file in /home/snuc/scripts/diagnostics.sh</p>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#transmitter-configuration","title":"Transmitter Configuration","text":"<p>A User with Administrator rights should be able to configure a Transmitter. (DPS Reference: UI0055)</p> <p>A User with Power-User rights will have limited view and configuration rights and a User with Basic rights will not have any visibility of Transmitter settings. (DPS Reference: UI0055)</p> <ul> <li>A User with Administrator or Power-User rights can enable pairing on a Receiver by entering the Transmitter IP address and confirming that a management connection can be made. (DPS Reference: UI0056)</li> <li>Once the Transmitter is paired, then it shall be possible to see the existing Transmitter settings and Information. (DPS Reference: UI0056b)</li> <li>It shall be possible to upgrade the paired Transmitter via the Deskvue Receiver OSD in an unmanaged system. (DPS Reference: UI0057)</li> <li>It shall be possible to change the network settings (IP address, Network mask) on the pairedTransmitter via the Deskvue Receiver OSD. (DPS Reference: UI0058) </li> <li>It shall be possible to determine the IP address, port and netmask of a directly connected Transmitter via the  Deskvue Receiver OSD. (Discovery Process) (DPS Reference: UI0059).</li> <li>It shall be possible for a User with Administrator or Power-User rights to reboot the paired Transmitter via the Deskvue Receiver OSD. (DPS Reference: UI0061).</li> <li>It shall be possible to configure a Multicast address for the Emerald4K Transmitter via the Deskvue Receiver OSD. (DPS Reference: UI0062b).</li> <li>It shall be possible to configure the Mouse and Keyboard Release Timeout via the Emerald Receiver OSD. The valid range shall be from 0-5 seconds in 1 second steps. (DPS Reference: UI0597a)  </li> <li>The Administrator on an unmanaged Deskvue Receiver shall be able to change the EDID table on an Emerald Transmitter to have a different preferred resolution to the default.  (DPS Reference: UI0152a,UI0152c) </li> <li>The Administrator on an unmanaged Deskvue Receiver shall be able to run and recover diagnostics on a connected Emerald Transmitter. </li> <li>The Administrator on a managed Deskvue Receiver shall be able to run and recover diagnostics on a connected managed Emerald Transmitter, provided that both Emerald Transmitter and Deskvue Receiver are in the same domain. </li> <li>The Administrator on an unmanaged Deskvue Receiver shall be able to change the Video Quality Settings on a Transmitter. The Video Quality Settings change the quantisation values on the Optimized codec. (DPS Reference: UI0173)</li> <li>The Administrator on a managed 2K Receiver shall be able to change the Video Quality Settings on a managed Transmitter in its domain. The video quality settings change the quantisation values on the Optimized codec.  (DPS Reference: UI0174b)</li> <li>The Administrator on an unmanaged Deskvue Receiver shall be able to change the HID settings on a Emerald Transmitter. The Default HID is the factory default. The Default HID is the factory default. (DPS Reference: UI0177)</li> <li>The Administrator on a managed Deskvue Receiver shall be able to configure mouse acceleration for the absolute HID interface on managed Emerald Transmitters in the same domain. No Acceleration is the factory default. (DPS Reference: UI0629) </li> <li>The Administrator on an unmanaged Deskvue Receiver shall be able to configure mouse acceleration for the absolute HID interface on an unmanaged Emerald Transmitter. No Acceleration is the factory default. (DPS Reference: UI0630)</li> <li>The Administrator on a Receiver shall be able to select audio outputs on a connected Transmitter (with DisplayPort connections) to either the DisplayPort path or analog audio connection. (DPS Reference: UI0638)</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#summary-information-for-transmitter-configuration","title":"Summary Information for Transmitter Configuration","text":"<p>Administrators can see the following Transmitter information on the Transmitter tab: (DPS Reference: UI0076 )</p> <ul> <li>MAC Address</li> <li>IP address</li> <li>Device Serial Number</li> <li>Manufacturing Part Number</li> <li>Software Version</li> <li>Multicast address</li> <li>Device Name</li> <li>Model</li> <li>Second IP address (EmeraldPE only)</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#managed-and-unmanaged-mode","title":"Managed and Unmanaged Mode","text":"<p>The SDKVM system can operate in either managed or unmanaged mode. In managed mode the configuration (management) of the system is controlled by our Boxilla management platform. Boxilla is responsible for creating users, administering permissions, provisioning connections and creating workspaces.</p> <p>When a SDKVM is managed then the options to locally create Users and Connections and to configure device settings are disabled. All modifications must be done on Boxilla and downloaded to the SDKVM system. (DPS Reference: UI0134)</p> <p>In unmanaged mode a user with administrative access can create connections and assign them to workspaces. A user with administrative access should be able to allocate connections and workspaces to regular (local) users.</p> <ul> <li>In unmanaged mode the SDKVM will support a maximum of 32-users and 32 connections.</li> <li>All Administrators are assigned all Connections automatically in an unmanaged system.</li> <li>An Administrator can unmanage the system (DPS Reference: UI0048b,UI0048c). Note: Only an Administrator can do this.</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#managing-a-sdkvm","title":"Managing a SDKVM","text":"<p>A SDKVM becomes managed through the process of discovery and management by Boxilla. When Boxilla has managed a SDKVM a two files will appear in:</p> <p><pre><code>    /home/snuc/SDKVM/boxilla\n</code></pre> These files are as follows:</p> <ul> <li>The discovery file: /home/snuc/SDKVM/boxilla/discovery</li> </ul> <p><pre><code>MGR=0:8c:10:1c:c6:d4\nSTATE=Discovered\nDEBUG=OFF\n</code></pre> and the Boxilla Manager IP file: /home/snuc/SDKVM/boxilla/mgr_ip</p> <p><pre><code>MGR_IP=10.211.129.3\n</code></pre> The OSD should use the presence of these files to determine if it is operating in managed or unmanaged mode. It should read the Boxilla mac address from the discovery file and use this as the Boxilla ID. The existing method of manually entering the Boxilla ID and serial number should be removed from the OSD. The OSD should indicate clearly if it is managed or unmanaged. Hovering on the Managed icon will provide additional information about the managing Boxilla entity including its IP address, Mac Address etc.</p> <p>Boxilla can choose to unmanage a device. In the process on unmanaging a device it will remove the users.json, discovery and mgr_ip files and also remove any existing user data structure and associated workspaces.</p> <p>If having been previously managed the OSD detects that these files and directories have been removed it should create a new empty users directory and a new users.json file.</p>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#administrator-permissions-on-a-managed-system","title":"Administrator Permissions on a Managed System","text":"<p>The Configuration option available to the Administrator on a managed unit are as follows: (DPS Reference: UI0135)</p> <ul> <li>To over-ride the managed device setting by restoring to Factory defaults.</li> <li>Set Keyboard locale on the system.</li> <li>Set Transmitter configuration options for Transmitters that also reside within that managed domain.</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#system-information","title":"System Information","text":"<p>DPS Reference: UI0074</p> <p>Note this requires clarification from John Hickey The System information tab should display the following information:</p> <ul> <li>Product Number \u2013 EMD5004-R</li> <li>MPN</li> <li>Device Serial Number</li> <li>Firmware version (that number has OSD / Workspace part of it)</li> <li>MAC address(s)</li> <li>Serial Number</li> </ul> <p>Any references to OSD version, Workspace server version and Linux Version should be removed from this page, but these should be written to the OSD log when the OSD starts. </p>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#system-status","title":"System Status","text":"<p>There are a number of system status changes that the OSD should monitor and keep the user informed of:</p> <p>Note: The exact mechanism by which the OSD learns of these events needs to be fully defined (more than likely these will be MQTT messages), but the OSD should work on the assumption that an event will be sent which will provide the required status change.</p>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#typical-status-messages","title":"Typical Status Messages","text":"<ul> <li>The OSD on Deskvue Receiver should indicate that an upgrade is taking place and provide progress messages to the user. This information should be displayed on a status bar or other prominent location. (DPS Reference: UI0128e). When an upgrade is in progress certain functions should be disabled (System reboot and Shutdown for example).</li> <li>It will be possible for Boxilla to change the network settings remotely so the OSD must indicate to the user that these settings are being changed and it must update its network configuration page to reflect the new settings.</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#sending-alerts-and-status-updates-to-boxilla","title":"Sending Alerts and Status updates to Boxilla","text":"<p>The OSD will be required to send status updates and alerts to Boxilla. These will be sent to a REST API on 127.0.0.1:9998</p>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#alerts","title":"Alerts","text":"<p>The following table lists the required alerts that the OSD must send</p> <ul> <li>Name: User Logged out </li> <li>End Point: 127.0.0.1:9998/alerts </li> <li>format of json body</li> </ul> Paramter Format Options id int n/a mac 50 byte char array n/a ip address 1025 byte char array n/a source 16 byte char array alert_category 32 byte char array Critical/Warning/Info/Unknown alert_condition 32 byte char array Metric/Trait/Availability/Operation/Severity/Unknown alert_component 32 byte char array User/Appliance/Connection/unknown alert_command 32 byte char array Auto_Login/Manual_Login/Post_connect_login/Manual_logout/Gui_timeout_logout/Reboot/Upgrade/Start/disconnect/rdp_connection/Unknown alert_status 32 byte char array Success/Failed/Inprogress/Cancelled/Timeout/Online/Unknown alert_description 32 byte char array context_1 255 byte char array context_2 255 byte char array context_3 255 byte char array context_4 255 byte char array timestamp int <p>The values for the fields shown above are as follows:</p> <ul> <li>alert_category: CRITICAL = 0, WARNING = 1, INFO =2</li> <li>alert_condition: METRIC = 0, TRAIT = 1, AVAILABILITY = 2 , OPERATION = 3, SEVERITY = 4, MONITOR = 5 </li> <li>alert_status: SUCCESS = 0, FAILED = 1, INPROGRESS = 2, CANCELLED = 3, TIMEOUT = 4, ONLINE = 5 </li> <li>alert_component: USER = 0, APPLIANCE = 1, CONNECTION = 2, ETHERNET = 3 </li> <li>alert_command: LOGIN = 0, AUTO_LOGIN = 1 , MANUAL_LOGIN = 2, POST_CONNECT_LOGIN = 3, MANUAL_LOGOUT = 4, GUI_TIMEOUT_LOGOUT = 5, REBOOT = 6, UPGRADE = 7, START = 8, DISCONNECT = 9, RDP_CONNECTION = 10, ETHERNET_LINK = 11 </li> </ul> <p>Examples <pre><code>    Failed Login: statistcs_send_json_alert_object(WARNING,OPERATION,USER,MANUAL_LOGIN,FAILED,\"OSD_LOGIN\", usr_name,\"\",\"\",\"\");\n    Failed Success: statistcs_send_json_alert_object(INFO, OPERATION, USER, MANUAL_LOGIN, SUCCESS, \"OSD_LOGIN\",\n          username.toLatin1().data(), \"\", \"\", \"\");\n    Auto Login: statistcs_send_json_alert_object(INFO, OPERATION, USER, AUTO_LOGIN, SUCCESS, \"OSD_LOGIN\", usr_name, \"\", \"\", \"\");\n    Manual Login: statistcs_send_json_alert_object(INFO, OPERATION, USER, MANUAL_LOGOUT, SUCCESS, \"OSD_LOGOUT\",  usr_name, \"\", \"\", \"\");\n    OSD Inactivity Timeout:  statistcs_send_json_alert_object(INFO, OPERATION, USER, GUI_TIMEOUT_LOGOUT, SUCCESS, \"OSD_LOGOUT\", usr_name, \"\", \"\",\n      \"\");\n    Connection Termination: statistcs_send_json_alert_object(INFO,OPERATION,CONNECTION,DISCONNECT,SUCCESS,\"Connection Termination\",client-&gt;hostname,\"\",\"\",\"\");\n    Notification of Link Change: statistcs_send_json_alert_object(INFO, OPERATION, ETHERNET, ETHERNET_LINK, SUCCESS,\n        '            alert_msg, active_port, active_phy_status,\n                     standby_phy_status, standby_lacp_status);'\n</code></pre></p>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#keyboard-localization-and-layout","title":"Keyboard Localization and Layout","text":"<p>The OSD must provide an option to select the appropriate key board layout and localisation settings at the login screen. The user must be able to select one of a number of keyboard types, UK, US, German, France, Italian and Japanese from a drop down menu in settings. The OSD can then pass the user selection to a script in /home/snuc/SDKVM/scripts/set_keyboard.sh with the code for the appropriate local, for example \"gb\" for UK:</p> <p><pre><code>logger \"OSD: Configuring Keyboard to gb local\"\n/usr/bin/setxkbmap -layout $1\n</code></pre> The keyboard setting is a system wide setting and should be stored in the system_level_settings.json</p> <p>When a user logs in to the system the OSD should run set_keyboard.sh to set the system preferred keyboard local.</p>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#user-login-and-logout","title":"User Login and Logout","text":"<ul> <li>The main OSD display should provide an indication of the currently logged in use in the top right hand corner of the OSD.</li> <li>The user icon when clicked should provide a summary of the user's name and their access status.</li> <li>Depending on the user's access type the menu should provide a log out option (for all users) and an option to shut down the system (for those users with the necessary access)</li> </ul> <p>In the initial release of the SDKVM the user will login and be authenticated locally by the OSD.</p> <p>In later releases the login process for a managed SDKVM changes as follows:</p> <p>The OSD sends a lgin request to Boxilla using the following system call:</p> <p><pre><code>/usr/local/bin/stats_cli -login \"user name\" \"Password\"\n</code></pre> NOTE: The password should be in its encrypted form.</p> <p>Boxilla then authenicates the user. During the authentication process the OSD should present a \"spinner\" indicating that authentication is taking place.</p> <p>Boxilla will indicate success or failure via MQTT messages as described in the section; Registering for Login Status Events below: link</p> <p>If the OSD fails to receive the MQTT event with 60 seconds then the OSD should inform the user that the authetntication process has timed out.</p>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#remote-login-and-logout-from-boxilla","title":"Remote Login and Logout from Boxilla","text":"<p>For managed systems Boxilla can remotely login (or logout a user). The OSD will receive an event with the user details and must then Login or Login out the user.</p>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#auto-login","title":"Auto Login","text":"<p>The Administrator shall be able to select a user to \u201cAuto-Login\u201d. In that mode, the unit will default to login as that User without any user interaction on power-up. Auto-Login only occurs on power-up. If a User is logged out, the login screen is presented to the User. Auto-Login is stored in the </p>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#post-login-and-post-logout-scripts","title":"Post Login and Post Logout Scripts","text":"<p>The desktop environment should only be activated after a user has logged in and been authenticated. It is required that post-login the OSD runs an initialisation script in /home/snuc/.config/openbox/initialise.sh. This script will initialise displays and configure backgrounds etc and it should run for all logged in users.</p> <p>On logout and active connections any associated displays should be terminated and shutdown. Only the OSD display will remain active. It is required that post-logout the OSD runs a de-initialisation script in /home/snuc/.config/openbox/de-initialise.sh. This script will de-initialise displays and stop other services running in the context of the logged out user.</p> <p>Note: The de-initialisation script will close any workspaces and connections associated with the 'logged out' user. </p>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#logged-in-user-alerts-and-notifications","title":"Logged in User Alerts and Notifications","text":"<p>When a new user logs into the system the OSD should update the system preferences file. This can be used to generate alerts and data for the logged in user.</p> <p>It should also generate an alert for Boxilla using an a CLI we will provide. Details of this will be provided later.</p>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#hot-key-bindings","title":"Hot Key Bindings","text":"<p>The OSD must allow the user assign each of the function keys F1 to F12 to a designated workspace (using the workspace ID). This will be an option in the main workspace window where the ellipses provide the Edit and Remove options. On selecting the key-binding option in the popup context menu the user will be presented with a table of existing key bindings.</p> <p>This will show the key binding, for example, F1 and the associated workspace name. If no workspace is associated with a key binding, then the entry will be blank. A user can also invoke the Keybindings to Workspace mapping window from the settings page. </p> <p>The Keybindings to Workspace mapping window will also allow a user to remove an existing mapping. If a user attempts to invoke a hot key sequence for a function key that has no associated workspace then a window will appear indicating that the selected function key is not associated with a workspace.</p> <p>Once an association has been made between a Workspace and a Function key the ID of the workspace will be written to the users.json file. Not every workspace will have an association with a hot key Because we have only eight designated function keys. </p>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#connection-management","title":"Connection Management","text":""},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#connection-check","title":"Connection Check","text":"<p>The OSD Connection screen allows an Administrative user create connections in an unmanaged system. A user can check a connection by selecting the 'check' button.</p> <p>The check connection function will launch a connection by sending a POST with a connection object to:</p> <pre><code>127.0.0.1:5000/connection\n</code></pre> <p>see data model for the format of the connection object.</p>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#connection-check-status","title":"Connection Check Status","text":"<p>The status for a connection can be retrieved via a GET Request from the end point:</p> <p><pre><code>127.0.0.1:5000/connection\n</code></pre> It will return the status for the connection as active or inactive. </p> <pre><code>{\n    \"query\": \"inactive\"\n}\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#registering-for-connection-status-events","title":"Registering for Connection Status Events","text":"<p>When a connection is terminated the server will send out a workspace status event over MQTT (Port 1883). The OSD can subscribe to these events and terminate accordingly:</p> <p>MQTT Topic:  topic blackbox/sdkvm/deskvue/status/osd_sdkvm/connection</p>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#example-status-for-a-specific-connection","title":"Example status for a specific connection","text":"<p><pre><code>    blackbox/sdkvm/deskvue/status/osd_sdkvm/connection/1709ce654d/inactive\n</code></pre> In this example, \"1709ce654d\" is the Connection ID and \"inactive\" is the status.</p> <p>The OSD must listen for MQTT messages on the general topic blackbox/sdkvm/deskvue/status/osd_sdkvm/connection. When a message is received the OSD should determine the Connection ID, and terminate the any connect check associated with that ID if the status is set to inactive.</p> <p>Note: Multiple events may be received as the connections transition through a number of states; for example, when the connection is in the \"connecting\" or \"connected\" state it will send \"active\" status. When the connection is \"terminating\" or \"terminated\" it will send \"inactive\" events.</p> <p>This can be verified with mosquitto_sub:</p> <pre><code>mosquitto_sub -h 127.0.0.1 -v -t blackbox/sdkvm/deskvue/status/osd_sdkvm\n</code></pre> <p>For test purposes, a request to communicate a status change can be sent with mosquitto_pub</p> <p><pre><code>mosquitto_pub -h 127.0.0.1 -t \"blackbox/sdkvm/deskvue/status/osd_sdkvm/&lt;connection_id&gt;/inactive\" -m \" \"\n</code></pre> where \"\" is the ID of the workspace you wish to terminate."},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#example-status-for-all-active-connections","title":"Example status for all active connections","text":"<pre><code>    blackbox/sdkvm/deskvue/status/osd_sdkvm/connection/inactive\n</code></pre> <p>This is the general case where all active connections should be terminated. The OSD should iterate through any connections marked as active and reset their state to inactive.</p> <p>For test purposes, a request to communicate a status change can be sent with mosquitto_pub</p> <pre><code>mosquitto_pub -h 127.0.0.1 -t \"blackbox/sdkvm/deskvue/status/osd_sdkvm/connection/inactive\" -m \" \"\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#registering-for-control-events","title":"Registering for Control Events","text":""},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#osd-restart-event","title":"OSD Restart Event","text":"<p>The OSD must listen for MQTT messages on the general topic blackbox/sdkvm/deskvue/cmd/osd_sdkvm/#. When a message is received the OSD should carryout the associated action or command. For example:</p> <p><pre><code>    blackbox/sdkvm/deskvue/cmd/osd_sdkvm/restart\n</code></pre> This command requests the OSD to restart.</p> <p>This can be verified with mosquitto_sub:</p> <pre><code>mosquitto_sub -h 127.0.0.1 -v -t blackbox/sdkvm/deskvue/cmd/osd_sdkvm/#\n</code></pre> <p>For test purposes, a request to restart the OSD can be sent with mosquitto_pub</p> <pre><code>mosquitto_pub -h 127.0.0.1 -t \"blackbox/sdkvm/deskvue/cmd/osd_sdkvm/restart\" -m \"Restart OSD\"\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#connection-check-termination","title":"Connection Check Termination","text":"<p>A user can terminate a connection check by selecting the 'terminate' button.</p> <p>The check connection function will terminate the active connection by sending a DELETE to:</p> <pre><code>127.0.0.1:5000/connection\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#refresh-button","title":"Refresh Button","text":"<p>The connections tab should feature a refresh button. On pressing this the OSD will reload the connection.json file for the logged in user.</p>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#workspace-management","title":"Workspace Management","text":"<p>It is proposed that we use a unique 10 digit ID (formed from the alphabet '1234567890abcdef') for each new workspace filename and that this ID be part of the workspace definition. The workspace name will appear on the workspace page. This name will be descriptive so all references to the workspace should be done through its ID. The ID will also be used to map the workspace file to key bindings.</p> <p>The association made between a Workspace name, ID and its associated Function key will be stored in a workspace.json file. This file is updated when a user updates, deletes or adds a new workspace.</p> <p>A package like https://pub.dev/packages/nanoid could be used to generate the ID.</p> <p>The workspace definition in json will change to accommodate this new field. - See Data Models for structure of json representation of connections and workspaces </p> <p>Example</p> <pre><code> \"connection_id\" : \"aa12345672\",\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#workspace-auto-launch","title":"Workspace Auto-launch","text":"<p>The Administrator shall be able to configure a Workspace as Auto-Launch for a particular User. Each User can have a different Workspace specified. In Auto-Launch mode, the unit shall default to launch to the selected Workspace without any further user interaction after that User logs-in.  (DPS Reference: UI0071) Auto-Launch only occurs on initial login to a User. If a User closes out of that Workspace, the system reverts to the OSD for the User to manually specify any subsequent Workspace. The designated auto-launch workspace is specified in the user preferences - see data model</p> <p>In the current appliance design the Administrative user selects an auto launch target by first selecting the User and then having selected a User, he can select a workspace from the list of workspaces assigned to that user. It is proposed that we follow this model.</p> <p>This is probably one of a number of settings that the administrative users can set so these should ideally be gathered on an Administrative settings page for now, but this may be moved once we review the overall OSD layout.</p>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#workspace-launch","title":"Workspace Launch","text":"<ul> <li>It shall be possible to navigate the OSD and select a Workspace with a mouse. </li> <li>It shall be possible to navigate the OSD and select a Workspace with an assigned hot Key. </li> <li>It shall be possible to navigate the OSD and select a Workspace with a keyboard only. (DPS Reference: UI0082a)</li> <li>If it is not possible to establish a Workspace because the network is not connected, then an error message shall be displayed to indicate \u2018No Network\u2019. (DPS Reference: UI0084)</li> </ul> <p>A workspace can be launched by posting a workspace json object to </p> <pre><code>127.0.0.1:5000/workspace\n</code></pre> <p>see data model for the format of the workspace object.</p>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#workspace-termination","title":"Workspace Termination","text":"<p>A user can terminate a workspace by selecting the 'terminate' button.</p> <p>The workspace terminate function will terminate the active connection by sending a DELETE to:</p> <pre><code>127.0.0.1:5000/workspace\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#workspace-editing","title":"Workspace Editing","text":"<p>The user should be able to edit an existing workspace. This means individual tiles can be changed or have their associated connections removed.</p>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#deleteing-a-connection-from-an-existing-workspace","title":"Deleteing a Connection from an Existing workspace","text":"<p>If a user attempts to remove a connection that is actively in use in existing workspaces then the OSD should prevent the removal warning the user that the connection must first be removed from active workspaces.</p>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#extended-desktop","title":"Extended Desktop","text":"<p>A connection has a dual_head attribute which indicates if it can support extended desktop operation. This attribute if selected allows a connection to be placed in one of a number of extended desktop configurations when it is selected as part of a template.</p>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#control-keys-hot-keys","title":"Control Keys (Hot Keys)","text":"Control Keys Designated Code Left Control Key C Left Alt Key A Windows Key W"},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#application-bindings","title":"Application Bindings","text":"<p>The User shall be able to see and configure the set of Favourite Workspace - Hotkey mappings configured. (DPS Reference: UI0068a)</p> Key Bindings Action HotKey + 1 Launch workspace with associated workspace mapped to this key Binding HotKey + 2 Launch workspace with associated workspace mapped to this key Binding HotKey + 3 Launch workspace with associated workspace mapped to this key Binding HotKey + 4 Launch workspace with associated workspace mapped to this key Binding HotKey + 5 Launch workspace with associated workspace mapped to this key Binding HotKey + 6 Launch workspace with associated workspace mapped to this key Binding HotKey + 7 Launch workspace with associated workspace mapped to this key Binding HotKey + 8 Launch workspace with associated workspace mapped to this key Binding HotKey + 9 Launch workspace with associated workspace mapped to this key Binding HotKey + 0 Launch workspace with associated workspace mapped to this key Binding HotKey + r Restore workspace to original layout HotKey + p switch to the previous workspace HotKey + c Move mouse pointer to the first screen (normally the OSD screen) HotKey + o Maximise OSD in foreground HotKey + ESC Minimise OSD in foreground HotKey + x Close the active workspace HotKey + Up Arrow Maximise active Window HotKey + Down Arrow Minimise active Window HotKey + m Mute all audio HotKey + u Unmute all audio HotKey + b Show hotbar on tiles"},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#keyboard-assistant","title":"Keyboard Assistant","text":"<p>Pressing the Windows key and the 'h' key should bring up a popup window that displays graphically all the current Hot Key mappings and their associated actions.</p>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#audio-control","title":"Audio Control","text":"<p>The OSD must provide a means of configuring audio both globally and for individual workspaces and connections.</p> <ul> <li>In the settings page there should be a global enable or disable for Audio.</li> <li>In the settings page there should be a global mute and un-mute for Audio.</li> <li>It should be possible to select the preferred audio interface on the SDKVM hardware, for example, HDMI, Analog etc. The SDKVM must enumerate the available audio interfaces and allow the user select one.</li> </ul> <p>Note: A tool like pacmd can be used for this purpose.</p> <pre><code>pacmd set-default-sink &lt;indexOfInterface&gt;\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#audio-options-for-kvm-connections","title":"Audio Options for KVM Connections","text":"<p>For audio output from a KVM (TX) connection there are two options: - TX Audio (via 3.5mm Analog Audio for DVI TXs or Display Port Audio for DP TXs) - audio_type = analog - TX HID Audio (via USB) - audio_type = hid</p>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#for-kvm-private-connections","title":"For KVM Private Connections","text":"<p>When audio is enabled for a private connection we should present a cascaded radio menu allowing the user to select between 3.5mm Audio (Option - 3.5mm/DP Audio and TX HID Audio (Option - TX HID Audio) When enabling audio for a specific connection you can choose between either audio option source We will refer to this as the \"KVM Audio Source\" with options of either \"Transmitter Audio\" or \"Transmitter HID Audio\".</p>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#for-kvm-shared-connections","title":"For KVM Shared Connections","text":"<p>Only 3.5mm audio (Option - 3.5mm/DP Audio) is supported for shared connections, therefore the user should have no option so we should just present the Option - TX Audio in the cascaded menu merely to show that's the expected source as opposed to a user selectable option.</p>"},{"location":"architecture/sdkvm/sdkvm_1.0.0_osd_specification/#building-and-packaging-code","title":"Building and Packaging Code","text":"<p>The latest code can always be found at:</p> <ul> <li>shard_area\\johnos\\SDKVM\\blackbox-linux-blackbox_linux_mobile-latest.zip</li> </ul> <p>To install</p> <ul> <li>unzip blackbox-linux-blackbox_linux_mobile-latest.zip</li> <li>rm -rf emeralddeskvue_ma</li> <li>mv emeralddeskvue emeralddeskvue_ma</li> <li>mv blackbox-linux-blackbox_linux_mobile-* emeralddeskvue</li> <li>cd emeralddeskvue</li> <li>flutter pub get</li> <li>flutter run --release</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_1.1.0_osd_specification/","title":"OSD Specification for SDKVM 1.1.0_08","text":""},{"location":"architecture/sdkvm/sdkvm_1.1.0_osd_specification/#summary-of-changes-by-version","title":"Summary of Changes by Version","text":""},{"location":"architecture/sdkvm/sdkvm_1.1.0_osd_specification/#summary-of-main-changes-from-version-110_01-to-version-110_02","title":"Summary of Main Changes from Version 1.1.0_01 to Version 1.1.0_02","text":"<ul> <li>Added missing section on workspaces tab.</li> <li>Added note to indicate that the timeout should be configurable in  /home/snuc/SDKVM/users/.system_level_preferences/system_preference.json.</li> <li>Added infomration about audio settings. These will have to move from system_level_preferences because they will be administered and stored locally.</li> <li>Clarified the role of the error message in the authentication scenario.</li> <li>Added a note on the maximum number of connections and workspaces limit.</li> <li>Clarified what different users expect to see on the various screens.</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_1.1.0_osd_specification/#summary-of-main-changes-from-version-110_02-to-version-110_03","title":"Summary of Main Changes from Version 1.1.0_02 to Version 1.1.0_03","text":"<ul> <li>Added user_name to mqtt message indicating success or failure.</li> <li>Added section detailing integration of Boxilla upgrade with the OSD.</li> <li>Added clarification of the privelleges of Admin users.</li> <li>Added clarification on OSD management of invalid resolutions.</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_1.1.0_osd_specification/#summary-of-main-changes-from-version-110_03-to-version-110_04","title":"Summary of Main Changes from Version 1.1.0_03 to Version 1.1.0_04","text":"<ul> <li>Added section on option to delete monitor settings</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_1.1.0_osd_specification/#summary-of-main-changes-from-version-110_04-to-version-110_05","title":"Summary of Main Changes from Version 1.1.0_04 to Version 1.1.0_05","text":"<ul> <li>Added section on changing display monitor settings requiring a relaunch of any active workspace</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_1.1.0_osd_specification/#summary-of-main-changes-from-version-110_05-to-version-110_06","title":"Summary of Main Changes from Version 1.1.0_05 to Version 1.1.0_06","text":"<ul> <li>Added clarification on messaging for situation where monitor is missing.</li> <li>Added section on Window Overlay Control.</li> <li>Added section on deleting a connection that is used by a number of workspaces.</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_1.1.0_osd_specification/#summary-of-main-changes-from-version-110_06-to-version-110_07","title":"Summary of Main Changes from Version 1.1.0_06 to Version 1.1.0_07","text":"<ul> <li>Clarified syntax for overlay button</li> <li>Added table for Template UIDs</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_1.1.0_osd_specification/#summary-of-main-changes-from-version-110_07-to-version-110_08","title":"Summary of Main Changes from Version 1.1.0_07 to Version 1.1.0_08","text":"<ul> <li>Corrected default values for system_level_settings.json</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_1.1.0_osd_specification/#terms-and-definitions","title":"Terms and Definitions","text":"Term Definition Boxilla Blackbox's Appliance Management Software Decoder See Receiver Encoder See Transmitter Multiviewer A multiviewer is similar to a video wall. But while video walls require a separate TV display for each video source, multiviewers only require one display surface. Multiviewers are able to showcase full, split, quad, and custom configurations on the same pixel surface. PCoIP PC over IP (PCoIP) is a remote display protocol that Teradici developed for delivering remote desktops and applications to endpoints. PCoIP works by rendering client desktops on a network or cloud server. The desktop's pixels are then compressed, encrypted and then transmitted to the client device. The client then decrypts and renders the desktop view for the user. RFX RemoteFX Codec Extension developed by Microsoft which uses a lossy image codec to encode screen images with efficient and effective compression. This is the lossy scheme used in Blackbox products. Receiver A Blackbox appliance that receives and displays a video stream. A receiver is also referred to as a client or decoder. Source The term Source is commonly used to describe the PC connected to a transmitter appliance. Shared Mode A generic term used in Blackbox to describe schemes that allow more than one receiver view the video source from a transmitter. See Municast and  Multicast. Transmitter A Blackbox appliance that captures and transmits a video from a source PC. A transmitter is also referred to as a server or encoder. Video Source A source of input for a Transmitter, normally the DVI or Display Port output of a PC. Video Wall A video wall is a special multi-monitor setup that consists of multiple computer monitors, video projectors, or television sets tiled together contiguously or overlapped in order to form one large screen. Typical display technologies include LCD panels, Direct View LED arrays, blended projection screens, Laser Phosphor Displays, and rear projection cubes. <p>Table 1 Terms and Definitions</p>"},{"location":"architecture/sdkvm/sdkvm_1.1.0_osd_specification/#references","title":"References","text":"<ul> <li>See Data Models for structure of json representation of connections and workspaces </li> <li>Original Software Architecture </li> <li>OSD Specification for 1.0.0</li> <li>SDKVM Core Utilities Specification</li> <li>Issue Tracking Spreadsheet from Square Root</li> <li>DeskVue: Static User Login &amp; Logout SDD for DeskVue</li> <li>DeskVue: Static User Login &amp; Logout \u2013 Test Plan</li> <li>DeskVue: Discovery on SDKVM Tech Note</li> <li>DeskVue: Discovery Test Plan</li> <li>DeskVue: OSD \u2013 Static User Login &amp; Logout SDD</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_1.1.0_osd_specification/#role-of-the-osd-in-the-overall-sdkvm-architecture","title":"Role of the OSD in the overall SDKVM Architecture","text":"<p>The OSD provides the main user interface for the SDKVM. The SDKVM is a multi-user system and each user can provision and manage a range of connections and workspaces.</p> <p>The OSD communicates with the workspaceserver through a REST API and MQTT messages to launch workspaces and connections. The status of these connections and workspaces are returned to the SDKVM either as MQTT messages or through polling the workspaceserver's REST API.</p> <p>These specification focuses on the fully managed version of the product.</p>"},{"location":"architecture/sdkvm/sdkvm_1.1.0_osd_specification/#authentication-of-user-login","title":"Authentication of User Login","text":"<p>In a SDKVM system managed by Boxilla a user login must be authenticated by Boxilla. The process described below only applies to a managed system.</p> <p></p> <p>From the above diagram,</p> <ul> <li>The OSD checks if it is in managed mode.<ul> <li>If the SDKVM is not manged the OSD uses the existing mechanism to verify a user against the credentials in user.json</li> <li>If the SDKVM is managed then the OSD will follow the Boxilla Authentication process outlined below:</li> </ul> </li> </ul>"},{"location":"architecture/sdkvm/sdkvm_1.1.0_osd_specification/#boxilla-authentication-process-for-managed-systems","title":"Boxilla Authentication Process for Managed Systems","text":"<p>For this process the OSD will use a utility called the STATS_CLI which is located at /usr/local/bin/stats_cli. This utility allows various commands to be sent to the Boxilla Management System which manages the SDKVM. If a user is successfully authenticated then the SDKVM sysytem will update the user details locally by writing/updating the file systems in the JSON files. The JSON files include users.json, connections.json, and workspaces JSON files in the user directory structure.</p>"},{"location":"architecture/sdkvm/sdkvm_1.1.0_osd_specification/#login-process-flow-for-managed-systems","title":"Login Process Flow for Managed Systems","text":"<ul> <li>The User enters the login credentials on the OSD login screen.</li> <li>The OSD will kill any existing instances of \"/usr/local/bin/stats_cli\". This is required because any existing instances could be as a result of previously failed login attempts/</li> </ul> <p><pre><code>killall /usr/local/bin/stats_cli \n</code></pre> - OSD then passes the user credentials (username and password) to the Boxilla management system using the STATS_CLI application program which is available in /usr/local/bin/stats_restapi_cli. </p> <pre><code>/usr/local/bin/stats_cli \u2013login username password\n</code></pre> <ul> <li>The OSD should then start a 30 second timer (this should be a configurable setting in /home/snuc/SDKVM/users/system_level_preferences/system_preference.json and should default to 30 seconds) so that it can timeout if no response is received from the Boxilla Management System within that period of time.</li> <li>The OSD will display a progress or busy indicator to indicate that the authentication process has started.</li> <li>The STATS_CLI program launched by the OSD will return an authentication message back to OSD through MQTT interface (see details below).</li> <li>If the authentication process ends in success then the OSD will:<ul> <li>Stop the 30 second timer.</li> <li>Disable the progress or busy indicator.</li> <li>Move to the OSD main screen.</li> <li>Write a syslog entry indicating that the defined user has successfully logged in.</li> </ul> </li> <li>If the authentication process ends in failure then the OSD will:<ul> <li>Stop the 30 second timer</li> <li>Disable the progress or busy indicator.</li> <li>Display an error message the user on the OSD. \"Authentication Failed. Please try again.\"</li> <li>Write a syslog entry indicating that the reason for the failure, the user name and any additional details returned in the MQTT message.</li> </ul> </li> <li>If the authentication process ends in failure due to a time out then the OSD will:<ul> <li>Disable the progress or busy indicator.</li> <li>Display an error message to the user on the OSD. \"Authentication Failed due to timeout. Please try again.\"</li> <li>Write a syslog entry indicating that the authentication failed due to a lack of response from Boxilla.</li> <li>Send an alert indicating that a login timeout has occurred: <pre><code> /usr/local/bin/stats_cli \u2013timeout username \n</code></pre></li> </ul> </li> </ul>"},{"location":"architecture/sdkvm/sdkvm_1.1.0_osd_specification/#mqtt-messages-required-for-authentication","title":"MQTT messages required for Authentication","text":"<p>The OSD should subscribe to the following MQTT endpoints:</p> <pre><code>MQTT Topic:  topic  blackbox/sdkvm/deskvue/status/osd_sdkvm/webservice/authentication \n</code></pre> <p>This endpoint will return a message indicating success or failure. The login_status provides the primary indication of success or failure.</p> <pre><code>{\"login_type\" : \"local\", \"login_status\" : \"success\", \"user_name\" : \" \", \"details\" : \"Boxilla return details\" }\n</code></pre> <pre><code>MQTT Topic:  topic  blackbox/sdkvm/deskvue/status/osd_sdkvm/webservice/error \n</code></pre> <p>This endpoint will provide error details for a malformed request to the stats_cli.</p> <pre><code>{\"error_details\" : \"unknown command\", \"command_requested\" : \"\" , \"parameters_passed\" : \"\"\n}\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_1.1.0_osd_specification/#logout-process-flow-for-managed-systems","title":"Logout Process Flow for Managed Systems","text":"<ul> <li>A user selects the logout option on the OSD.</li> <li>The OSD will send a logout notification to Boxilla using the STATS_CLI application program which is available in /usr/local/bin/stats_restapi_cli. </li> </ul> <pre><code>/usr/local/bin/stats_cli \u2013logout username\n</code></pre> <ul> <li>The OSD should then start a 30 second timer (this should be a configurable setting in /home/snuc/SDKVM/users/system_level_preferences/system_preference.json and should default to 30 seconds) so that it can timeout if no response is received from the Boxilla Management System within that period of time.</li> <li>The OSD will display a progress or busy indicator to indicate that the logout process has started.</li> <li>The STATS_CLI program launched by the OSD will return an authentication message back to OSD through MQTT interface.</li> <li>If the logout process ends in success then the OSD will:<ul> <li>Stop the 30 second timer.</li> <li>Disable the progress or busy indicator.</li> <li>Move to the OSD login screen.</li> <li>Write a syslog entry indicating that the defined user has successfully logged out.</li> </ul> </li> <li>If the logout process ends in failure then the OSD will:<ul> <li>Stop the 30 second timer</li> <li>Disable the progress or busy indicator.</li> <li>Display an error message the user on the OSD. \"Logout Failed. Please try again.\"</li> <li>Write a syslog entry indicating that the reason for the failure, the user name and any additional details returned in the MQTT message.</li> </ul> </li> <li>If the logout process ends in failure due to a time out then the OSD will:<ul> <li>Disable the progress or busy indicator.</li> <li>Display an error message to the user on the OSD. \"Logout Failed due to timeout. Please try again.\"</li> <li>Write a syslog entry indicating that the authentication failed due to a lack of response from Boxilla.</li> <li>Move to the OSD login screen. ( I assume we would not want the failure to communicate with Boxilla from preventing us from logging out.)</li> <li>Send an alert indicating that a login timeout has occurred: <pre><code>/usr/local/bin/stats_cli \u2013logout \u2013timeout username \n</code></pre></li> </ul> </li> </ul>"},{"location":"architecture/sdkvm/sdkvm_1.1.0_osd_specification/#mqtt-messages-required-for-logout","title":"MQTT messages required for Logout","text":"<p>The OSD should subscribe to the following MQTT endpoints:</p> <pre><code>MQTT Topic:  topic  blackbox/sdkvm/deskvue/status/osd_sdkvm/webservice/logout \n</code></pre> <p>This endpoint will return a message on success or failure. This message can be used as confirmation that the command was processed.</p> <pre><code>{\"logout\" : \"local\",  \"details\" : \"Boxilla return details\" }\n</code></pre> <p>This endpoint will provide error details for a malformed request to the stats_cli.</p> <pre><code>MQTT Topic:  topic  blackbox/sdkvm/deskvue/status/osd_sdkvm/webservice/error \n</code></pre> <pre><code>{\"error_details\" : \"unknown command\", \"command_requested\" : \"\" , \"parameters_passed\" : \"\"\n}\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_1.1.0_osd_specification/#changes-to-osd-tab-design-for-a-fully-managed-system","title":"Changes to OSD Tab Design for a Fully Managed System","text":"<p>Note: These only apply to fully managed systems.</p>"},{"location":"architecture/sdkvm/sdkvm_1.1.0_osd_specification/#networking","title":"Networking","text":"<ul> <li>In a fully managed system the network tab should be read only for all user types. All network configuration is done through Boxilla, so the Network tab simply shows the assigned networking details in a read-only manner.</li> <li>This applies to all users. It is not possible for any user (including admin types) edit or change network settings on a managed system. </li> </ul>"},{"location":"architecture/sdkvm/sdkvm_1.1.0_osd_specification/#display-settings","title":"Display Settings","text":"<ul> <li>In a fully managed system Boxilla will not be able to manage the display monitor settings, so an admin user will still have the ability to edit and change monitor settings, but local and power users will have no access to these settings.</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_1.1.0_osd_specification/#global-settings","title":"Global Settings","text":"<ul> <li>In a fully managed system Boxilla will not be able to manage the global settings, so an admin user will still have the ability to edit and change all of the settings on this page, but local and power users will have no access to the volume setting only.</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_1.1.0_osd_specification/#templates","title":"Templates","text":"<ul> <li>This tab should be hidden on a fully managed system because all templates are set and created on the Boxilla management system.</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_1.1.0_osd_specification/#connections","title":"Connections","text":"<ul> <li>In a fully managed system users (admin, local and power) cannot modify, edit or add connections; they can only launch them to check that they are functional.</li> <li>The options below outlined in black should be removed for all users in a fully managed system.</li> <li>It is not possible for any user (including admin types) edit or change connection settings on a managed system. </li> <li>The option to add new connections should be removed for all user types in managed mode.</li> <li>The connections screen should be visible admin and power users, but it should be hidden for local users.</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_1.1.0_osd_specification/#workspaces","title":"Workspaces","text":"<ul> <li>In a fully managed system users (admin, local and power) cannot modify, edit or add workspaces; they can only launch them, so the options outlined in black should be removed.</li> <li>The option to add new workspaces should be removed for all user types in managed mode.</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_1.1.0_osd_specification/#users","title":"Users","text":"<ul> <li>In a fully managed system users are centrally managed by Boxilla. It should not be possible to edit or change any user details so this page should be read only.</li> <li>This applies to all users. It is not possible for any user (including admin types) edit or change user settings on a managed system. </li> <li>For local and power users the users page should be hidden.</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_1.1.0_osd_specification/#system-settings","title":"System Settings","text":"<ul> <li>In a fully managed system the Admin user should only have access to the items enclosed in the black frame (Factory Restore, System Diagnostics, OSD Operations), so the other options should be removed or hidden.</li> <li>A power user and a local user should only have access to the Systme information (Software version) panel.</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_1.1.0_osd_specification/#control-of-overlay-feature","title":"Control of Overlay Feature","text":"<p>It is proposed that we add the following options to the system settings screen with a global option to configure the appearance of the overlay for all users.</p> <p></p> <p>This is a global setting which will be stored in the /home/snuc/SDKVM/system_level_settings.json.</p> <p>The OSD should present two options \"Enabled\" or \"Disabled\", but these should be mapped to \"True\" and \"False\" in the system_level_settings file.</p> <p>The setting should default to \"Enabled\" - \"True\"</p> <pre><code>    \"overlays_enabled\" : \"True\"\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_1.1.0_osd_specification/#default-settings","title":"Default Settings","text":"<p>OSD should create the system_level_settings with the correct default values: These are the current defaults</p> <p><pre><code>{\n\"system_level_data_model_version_number\":\"2\",\n\"dhcp\":\"True\",\n\"Managed\":\"False\",\n\"primary_monitor\":\"\",\n\"logged_in_user_id\":\"\",\n\"logged_in_user_name\":\"\",\n\"bonded_group_name\":\"\",\n\"log_level\":\"linux log level\",\n\"ip_address\":\"192.168.1.21\",\n\"subnet_address\":\"255.255.255.0\",\n\"gateway_address\":\"192.168.1.1\",\n\"primary_dns_address\":\"\",\n\"secondary_dns_address\":\"\",\n\"auto_login\":\"\",\n\"zone\":\"\",\n\"audio_mute\":\"\",\n\"keyboard\":\"us\",\n\"workspace_inactivity_timer\":\"\",\n\"osd_inactivity_timer\":\"30\",\n\"screen_saver\":\"\",\n\"osd_debug_level\":\"1\",\n\"selected_sink_name\":\"\",\n\"selected_profile\":\"\",\n\"overlays_enabled\":\"True\"\n}\n</code></pre> Note: The maximum value of the inactivity timer is 60 seconds.</p>"},{"location":"architecture/sdkvm/sdkvm_1.1.0_osd_specification/#local-storage-of-audio-settings","title":"Local Storage of Audio Settings","text":"<p>TBC</p>"},{"location":"architecture/sdkvm/sdkvm_1.1.0_osd_specification/#maximum-limit-of-connections-and-workspaces","title":"Maximum Limit of Connections and Workspaces","text":"<p>After reaching the limit of 32 on connection and workspace we should provide a message \"Max limit has been reached\" when the user attempts to a another connection or workspace.</p>"},{"location":"architecture/sdkvm/sdkvm_1.1.0_osd_specification/#osd-changes-for-boxilla-based-upgrade","title":"OSD changes for Boxilla based Upgrade","text":"<p>Support for progress status and exit codes have been added in Deskvue software upgrade. These changes are require integration with OSD to provide the user with correct progress/status information, meaningful failure reasons in the event of a failure, and successful messages in the case when the upgrade proceeds without error.</p>"},{"location":"architecture/sdkvm/sdkvm_1.1.0_osd_specification/#exit-codes","title":"Exit codes:","text":"Error Identifier Error Number Error Description UPDATE_SUCCESS 0 Firmware upgrade successful ERR_ARGUMENT 1 Error in passing arguments to utility ERR_NOMEM 2 Not enough memory in unit or error while any memory related operation. ERR_BACKUP 3 Error while taking backup of original firmware snapshot ERR_RESTORE 4 Error while restoring original firmware snapshot ERR_HEADER 5 Error while parsing image metadata ERR_SEGMENT ERR_CHECKSUM 7 Error while matching checksum after update ERR_UPDATE 8 Error while placing components in firmware partitions. ERR_SAME_VERSION 9 All the components in firmware image are duplicate. ERR_ENCRYPT 10 Failed to decrypt self-extracting package ERR_SIG_VERIFY 11 Failed to verify the signature of firmware package ERR_INTERNAL 12 Internal error while updating the package"},{"location":"architecture/sdkvm/sdkvm_1.1.0_osd_specification/#progressstatus-bar","title":"Progress/status bar","text":"<p>The current status of an upgrade can be read from the file \"/home/snuc/SDKVM/info/upgrade_progress.txt\"</p> <p>The file has the following format:</p> <pre><code>PROGRESS:&lt;INT&gt;\nEXIT:&lt;0&gt;\n</code></pre> <p>The integer number in the PROGRESS tag signifies the percentage of upgrade progress. The exit code signifies the result of upgrade. A non-zero exit code any time during the upgrade signifies the upgrade process has failed. A zero exit code with 100 progress value signifies successful upgrade.</p> <p>The OSD should read the progress value and update a progress bar of the OSD. Once the progress has reached 100 then it should post a message indicating either pass or failure. If it is a failure simply provide the message : \"Upgrade Failed: Error Code.\"</p> <p>These messages should appear for both a local upgrade or Boxilla upgrade.</p> <p>If the upgrade is a Boxilla upgrade then the OSD should present a dialog indicating that an upgrade is in progress and show the progress of the update.</p>"},{"location":"architecture/sdkvm/sdkvm_1.1.0_osd_specification/#mqtt-messages-required-for-boxilla-upgrade-notification","title":"MQTT messages required for Boxilla Upgrade Notification","text":"<p>The OSD should subscribe to the following MQTT endpoints:</p> <pre><code>MQTT Topic:  topic  blackbox/sdkvm/deskvue/status/osd_sdkvm/upgrade \n</code></pre> <p>This endpoint will return a message at the start and end of a remote upgrade process</p> <pre><code>{\"status\" : \"&lt;started/finished&gt;\",  \"progress\" : &lt;0 - 100&gt;  , \"exit_code\" : &lt;0/n&gt; }\n</code></pre> <p>This facility can be tested with the following command.</p> <pre><code>mosquitto_pub -h 127.0.0.1 -t \"blackbox/sdkvm/deskvue/status/osd_sdkvm/upgrade\" -m \"{\\\"status\\\":\\\"started\\\",\\\"progress\\\": 50 , \\\"exit_code\\\": 0       }\"\n</code></pre> <p>This can be verified with mosquitto_sub:</p> <pre><code>mosquitto_sub -h 127.0.0.1 -v -t blackbox/sdkvm/deskvue/status/osd_sdkvm/upgrade\n</code></pre> <p>The actual final status and progress should be read from the files detailed above.</p> <p>Questions about this can be added to https://bboxjira.atlassian.net/browse/BUG-5737</p>"},{"location":"architecture/sdkvm/sdkvm_1.1.0_osd_specification/#osd-changes-for-handling-admin-users","title":"OSD changes for handling Admin Users","text":"<p>In version 1.0.0 of the product admin users were able to access all connections and workspaces on the system. In version 1.1.0 of the product the SDKVM can be fully managed by Boxilla. Connections and workspaces are allocated by Boxilla to users, so an admin user cannot access all connections and users by default. They can only access connections allocated to them by Boxilla. This means that the admin users will have populated access control lists in the user.json file. For unmanaged systems, the behaviour remains as is currently implemented. An admin user can access all connections and workspaces on the system.</p>"},{"location":"architecture/sdkvm/sdkvm_1.1.0_osd_specification/#check-for-maximum-resolution-limits-when-changing-display-resolutions","title":"Check for Maximum Resolution Limits when Changing Display Resolutions","text":"<p>Reference: https://bboxjira.atlassian.net/browse/BUG-5379?filter=10855</p> <p>If a user is attempting to set a resolution that causes the max canvass size of 16,384 x 16,384 to be exceeded then the OSD should:</p> <ul> <li>Display an error message to the user indicating: \u201cMaximum canvass size of 16,384 x 16,384 across all displays will be exceeded with this change. Change rejected.\u201d</li> <li>The OSD should not change the resolutions of the attached monitors.</li> </ul> <p>this last point is under consideration, do not implement for now</p> <ul> <li>If a new monitor is inserted via a hot-plug then a \u201csafe\u201d resolution should be selected for this monitor to stay within canvas size (the current monitor management already deals with this scenario) and the OSD should display a message to the user indicating that this was done. The message should be: \u201cResolution nXn selected to stay within maximum canvass constraints on display \u201c1/2/3 or 4\u201d instead of preferred resolution of mXm\u201d</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_1.1.0_osd_specification/#handling-workspaces-with-monitors-that-do-not-exist","title":"Handling Workspaces with Monitors that do not exist","text":"<p>Reference: https://bboxjira.atlassian.net/browse/BUG-5771</p> <ul> <li>If a workspace contains a monitor that is unavailable that monitor is currently labelled Null, ideally the OSD should identify this as Display not attached.</li> <li>When editing a workspace in the OSD it shows the Detected Displays in the order that the workspace was created not how they are currently positioned. The Detect Displays area should reflect the current positioning of the monitors to prevent confusion to the user.</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_1.1.0_osd_specification/#delete-monitor-configuration-option-on-the-system-settings-screen","title":"Delete Monitor Configuration Option on the System Settings Screen","text":"<p>Reference: https://bboxjira.atlassian.net/browse/BUG-5785</p> <p>The OSD should have an option to delete Monitor Settings. This should be available on the System Settings page under \"Restore to Factory Defaults\". On;y an Admin user should have access to this option. When the button is clicked it should present a confirmation dialog to the user with the following message:</p> <ul> <li>This action will reset the monitor positioning and resolutions to default. Are you sure you want to continue?</li> </ul> <p>If the user clicks \"Continue\" then the OSD should call:</p> <p><pre><code>monitor-management.py script called --reset\n</code></pre> This will remove the existing Monitor Configuration causing a new one to be generated.</p>"},{"location":"architecture/sdkvm/sdkvm_1.1.0_osd_specification/#changing-display-monitor-settings-requires-a-relaunch-of-any-active-workspace","title":"Changing Display Monitor Settings requires a Relaunch of any Active Workspace","text":"<p>If we are in an active connection and we change monitor arrangement of resolution then we need to relaunch any current workspace.</p> <p>The workspace can be relaunched by calling:</p> <pre><code>/home/snuc/KeyBindings/Scripts/relaunch_workspace.sh\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_1.1.0_osd_specification/#deleting-a-connection-that-is-in-use-by-existing-workspaces","title":"Deleting a Connection that is in use by Existing Workspaces","text":"<p>This logic only applies to Unmanaged systems. Boxilla will manage the case for managed systems.</p> <p>If an admin user is deleting a connection, the system should:</p> <ul> <li>Check if connection is used in any workspaces.</li> <li>If it is, OSD should inform the user that the connection is used in a number of workspaces.</li> <li>It should provide an option to display the associated Workspaces.</li> <li>It should offer the user the option to delete the connection from all workspaces it is used and then to delete the connection, or to cancel operation.</li> <li>Where a connection removed from a Workspace - the tile is left \u201cblank\u201d i.e. no connection in that workspace.</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_1.1.0_osd_specification/#using-uids-for-templates-instead-of-names","title":"Using UIDs for Templates instead of Names","text":"<p>In early versions of the SDKVM we used Template Names in the workspace definition. This will be problematic when we move to user defined templates.</p> <p>It is proposed that we move to UIDs. This has implications for the existing SDKVMs that are using names in their workspace definitions. To deal with this change we propose moving the workspace_data_model_version_number to \"2\".</p> <p>All new workspaces should use UIDs as shown in the table below. If the OSD encounters an older version of a workspace then it will need to translate the name to a UID.</p> Name Full-screen tile on 1-display 00000001 Quad-tiles on 1-display 00000002 Four tiles - PIP Right 00000003 Quad-Tiles - PIP left 00000004 Eight Tiles on 1-display 00000005 Seven Tiles on 2-displays 00000006 One Tile Across all Displays 00000007"},{"location":"architecture/sdkvm/sdkvm_1.1.0_osd_specification/#supporting-vertical-stacking","title":"Supporting Vertical Stacking","text":"<p>The existing data model does not need to change to accomodate vertical stacking of monitors.</p> <p>The monitor data is written to ~/.config/monitor-management/current_monitors.json</p> <pre><code>[\n    {\n        \"name\": \"DELL P2415Q\",\n        \"manufacturer\": \"Dell Inc.\",\n        \"interface\": \"HDMI-1\",\n        \"head\": 1,\n        \"edid\": \"00ffffffffffff0010acc0a0424e3331061b010380351e78eae245a8554da3260b5054a54b00714f8180a9c0a940d1c0e10001010101a36600a0f0701f80302035000f282100001a000000ff00443856584637323531334e420a000000fc0044454c4c205032343135510a20000000fd001d4c1e8c1e000a20202020202001c302032ef15390050402071601141f1213272021220306111523091f07830100006d030c001000003c200060030201023a801871382d40582c25000f282100001e011d8018711c1620582c25000f282100009e04740030f2705a80b0588a000f282100001e565e00a0a0a02950302035000f282100001a0000000000000000008a\",\n        \"resolution\": {\n            \"x\": 1920,\n            \"y\": 1080,\n            \"r\": 60.0\n        },\n        \"position\": {\n            \"x\": 0,\n            \"y\": 0\n        },\n        \"connected\": true,\n        \"primary\": true,\n        \"diagonal_size\": 24.2\n    },\n    {\n        \"name\": \"ASUS PB287Q\",\n        \"manufacturer\": \"Ancor Communications Inc\",\n        \"interface\": \"HDMI-3\",\n        \"head\": 2,\n        \"edid\": \"00ffffffffffff000469a3283427010025190103803e22783a1cb5a3574fa0270d5054bfef00d1c0814081809500b300714f81c0010104740030f2705a80b0588a006d552100001a023a801871382d40582c45006d552100001e000000fd001e5018a01e000a202020202020000000fc0041535553205042323837510a20018702032cf1510102031112130414050e0f1d1e1f90202223091707830100006d030c002000003c200060010203565e00a0a0a02950302035006d552100001ee26800a0a0402e60302036006d552100001a011d00bc52d01e20b82855406d552100001e8c0ad090204031200c4055006d552100001800000000000000000000005e\",\n        \"resolution\": {\n            \"x\": 3840,\n            \"y\": 2160,\n            \"r\": 30.0\n        },\n        \"position\": {\n            \"x\": 1920,\n            \"y\": 0\n        },\n        \"connected\": true,\n        \"primary\": false,\n        \"diagonal_size\": 28.1\n    }\n]\n</code></pre> <p>This specifies the relative position of each monitor.</p> <p>The main challenge in implementing this feature is creating a intuitive user friendly interface on the OSD. The current OSD allows a user drag monitors into their desired position on the horizontal axis. To support vertical stacking the OSD would need to additionally allow a user move monitors into the vertical plane. We may need to create some form of grid to make it easier for a user to place a monitor in the desired location.</p> <p>The positioning of the monitors in the horizontal and veritcal positions cannot be set by Boxilla. Boxilla has no concept of connected monitors or their relative positions.</p>"},{"location":"architecture/sdkvm/sdkvm_1.2.0_osd_specification/","title":"OSD Specification for SDKVM 1.2.0_07","text":"<ul> <li>EC1 Targeting IBC which will be held in Amsterdam from 15 - 18 September 2023.</li> <li>EC4 Targeting prorail demo</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_1.2.0_osd_specification/#summary-of-changes-by-version","title":"Summary of Changes by Version","text":""},{"location":"architecture/sdkvm/sdkvm_1.2.0_osd_specification/#version-sdkvm-120_00-to-sdkvm-120_01","title":"Version SDKVM 1.2.0_00 to SDKVM 1.2.0_01","text":"<ul> <li>Added sections on Force Login, Force Logout and Force Workspace</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_1.2.0_osd_specification/#version-sdkvm-120_01-to-sdkvm-120_02","title":"Version SDKVM 1.2.0_01 to SDKVM 1.2.0_02","text":"<ul> <li>Clarified OSD behaviour on Force Logout</li> <li>Clarified OSD behaviour on Force Workspace with regard to failure to login.</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_1.2.0_osd_specification/#version-sdkvm-120_02-to-sdkvm-120_03","title":"Version SDKVM 1.2.0_02 to SDKVM 1.2.0_03","text":"<ul> <li>Added special instruction for how decorations will work at the IBC show</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_1.2.0_osd_specification/#version-sdkvm-120_03-to-sdkvm-120_04","title":"Version SDKVM 1.2.0_03 to SDKVM 1.2.0_04","text":"<ul> <li>Clarified questions about forced login, logout and workspace launch regarding sequence of operation.</li> <li>Clarified that forced login, logout and workspace launch assume managed mode.</li> <li>Corrected ommisions in the Alerts table.</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_1.2.0_osd_specification/#version-sdkvm-120_04-to-sdkvm-120_05","title":"Version SDKVM 1.2.0_04 to SDKVM 1.2.0_05","text":"<ul> <li>Corrected enum numbers for alerts</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_1.2.0_osd_specification/#version-sdkvm-120_05-to-sdkvm-120_06","title":"Version SDKVM 1.2.0_05 to SDKVM 1.2.0_06","text":"<ul> <li>Corrected path for restapi_cli</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_1.2.0_osd_specification/#version-sdkvm-120_06-to-sdkvm-120_07","title":"Version SDKVM 1.2.0_06 to SDKVM 1.2.0_07","text":"<ul> <li>Added a new attribute for \"selected_source_name\" to system_level_settings.json in the data model</li> <li>Added LACP requirements</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_1.2.0_osd_specification/#connections","title":"Connections","text":"<ul> <li>In a fully managed system users (admin, local and power) cannot modify, edit or add connections; they can only launch them to check that they are functional.</li> <li>The options below outlined in black should be removed for all users in a fully managed system.</li> <li>A power user can clone an existing workspace that has been assigned to them by the administrator.</li> <li>It is not possible for any user (including admin types) edit or change connection settings on a managed system. </li> <li>The option to add new connections should be removed for all user types in managed mode.</li> <li>The connections screen should be visible admin and power users, but it should be hidden for local users.</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_1.2.0_osd_specification/#proposal-for-configuring-window-decorations","title":"Proposal for Configuring Window Decorations","text":"<p>Associated Jira ticket</p> <p>In the current SDKVM we create a window decoration bar (essential a title bar) with the following information</p> <ul> <li>Connection Name</li> <li>IP address</li> <li>Close button</li> </ul> <p>For some applications like video walls it may be preferable to omit this window decoration.</p>"},{"location":"architecture/sdkvm/sdkvm_1.2.0_osd_specification/#longer-term-proposal-for-window-decorations","title":"Longer Term Proposal For Window Decorations","text":"<p>The longer term proposal for Window Decorations and Title Bars is as follows:</p> <ul> <li>A workspace level setting will determine whether the title bar appears.</li> <li>If Decorations are enabled then an additional drop down allows one to select what appears on the title bar.<ul> <li>Connection Name</li> <li>IP address</li> </ul> </li> <li>The default settings for a workspace are:<ul> <li>Title bar enabled</li> <li>Connection Name enabled</li> <li>IP address disabled</li> </ul> </li> </ul> <p>These settings are configured in the workspace definition as follows:</p> <pre><code>{\n  \"workspace_name\": \"WS #5\",\n  \"workspace_data_model_version_number\": \"1\",\n  \"workspace_description\": \"\",\n  \"workspace_id\": \"cb9f97c050\",\n  \"workspace_created_by\" : \" A 10 digit unique ID for the creator or 'admin' if created by an admin user\",\n  \"title_bars\" : \"True\",\n  \"title_bar_connection_name\" : \"True\",\n  \"title_bar_ipaddress\" : \"True\",\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_1.2.0_osd_specification/#proposal-for-window-decorations-for-the-ibc-show","title":"Proposal For Window Decorations for the IBC show","text":"<p>For the IBC show it is proposed that we provide a decoration checkbox on the workspace edit screen. Enabling this checkbox would force decorations to be on for all tiles in the workspace. Disabling this would force decorations to be on for all tiles in the workspace.</p> <p></p> <p>This would then use the existing \"decorations\" field in the tile section to enable or disable decorations.</p> <pre><code>{\n    ....\n    \"usbr\": \"False\",\n    \"view_only\": \"False\",\n    \"persistent\": \"False\",\n    \"resizable\": \"True\",\n    \"decorations\": \"True\",\n    \"dual_head\": \"False\"\n}\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_1.2.0_osd_specification/#proposal-for-supporting-force-login","title":"Proposal for Supporting force Login","text":"<p>Note: This feature assumes managed mode of operation.</p>"},{"location":"architecture/sdkvm/sdkvm_1.2.0_osd_specification/#context","title":"Context","text":"<p>It will be possible for a controlling entity (like Boxilla) to force the login of a user using the REST API on the SDKVM. The OSD will assist this login process in the following way.</p> <ul> <li>The webservice component will send the above mqtt message to the OSD on receipt of Force Login from the REST API</li> </ul> <pre><code>    blackbox/sdkvm/deskvue/event/osd_sdkvm/force_login  -m {\"username\": \"user\"}\n</code></pre> <ul> <li>The OSD should subscribe to the topic: blackbox/sdkvm/deskvue/status/osd_sdkvm/force_login to receive this event.</li> <li>The OSD has to validate the user name received in the above message against the users.json file.</li> <li>The OSD does not have to authenticate this user and password through the Boxilla authentication process.</li> <li>The OSD must raise an alert for FORCE LOGOUT for the previous user if another user is currently logged in (if no user is currently logged in then this is not required). The internal REST handler component will receive and process these alerts by adding them to the alerts queue.</li> <li>If the user specified in the force login command is the same as the currently logged in user then the OSD must still perform a forced logout and forced login.</li> <li>The OSD has to raise a FORCE LOGIN alert for the new user in the case of a succesful login. The internal REST handler component will receive and process these alerts by adding them to the alerts queue.</li> <li>The OSD has to raise a failure alert for FORCE LOGIN for the new user in the case of a failed login. </li> <li>The following format is used to send all of these alerts:</li> </ul> <pre><code>\"blackbox/sdkvm/deskvue/status/internal_rest_handler/alerts\" -m {\"alert_category\": int,\"alert_condition\": int,\"alert_component\": int,\n                                                            \"alert_command\": int, \"alert_status\":int, \"alert_description\":string,alert_context1\": string,\n                                                            ,\"alert_context2\":string,alert_context3\": string,alert_context4\": string}\n</code></pre> <ul> <li>Example Alert for Logout Success:  (INFO, OPERATION, USER, FORCE_LOGOUT, SUCCESS, \"OSD_LOGOUT\", prev_user_name_as_string, \"\", \"\", \"\") where the fields like INFO and OPERATION are integer values that can be found in the tables below.</li> <li>Example Alert for Login Success: (INFO, OPERATION, USER, FORCE_LOGIN, SUCCESS, \"OSD_LOGIN\", new_user_name_string, \"\", \"\", \"\") where the fields like INFO and OPERATION are integer values that can be found in the tables below.</li> <li>Example Alert for Login Failed: (INFO, OPERATION, USER, FORCE_LOGIN, FAILED, \"OSD_LOGOUT\", prev_user_name_ch, \"\", \"\", \"\" )  where the fields like INFO and OPERATION are integer values that can be found in the tables below.</li> </ul> <p>The fields are populated as follows:</p> <p>alert_category </p> Field Value CRITICAL 0 WARNING 1 INFO 2 <p>alert_condition</p> Field Value METRIC 0 TRAIT 1 AVAILABILITY 2 OPERATION 3 SEVERITY 4 MONITOR 5 <p>alert_status</p> Field Value SUCCESS 0 FAILED 1 INPROGRESS 2 CANCELLED 3 TIMEOUT 4 ONLINE 5 <p>alert_component</p> Field Value USER 0 APPLIANCE 1 CONNECTION 2 ETHERNET 3 <p>alert_command</p> Field Value LOGIN 0 AUTO_LOGIN 1 MANUAL_LOGIN 2 POST_CONNECT_LOGIN 3 FORCE_LOGIN 4 MANUAL_LOGOUT 5 GUI_TIMEOUT_LOGOUT 6 FORCE_LOGOUT 7 REBOOT 8 UPGRADE 9 START 10 DISCONNECT 11 RDP_CONNECTION 12 ETHERNET_LINK 13 <ul> <li>The OSD also needs to update force login username and id in system_level_settings.json in the case of a succesful login.</li> <li>The OSD must then go to the main window of the OSD using the login of the new user specified in the Force Login message.</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_1.2.0_osd_specification/#proposal-for-supporting-force-logout","title":"Proposal for Supporting force Logout","text":"<p>It will be possible for a controlling entity (like Boxilla) to force the logout of a user using the REST API on the SDKVM. The OSD will assist this logout process in the following way.</p> <ul> <li>The webservice will send an mqtt message in the format:</li> </ul> <pre><code>blackbox/sdkvm/deskvue/event/osd_sdkvm/force_logout -m {}\n</code></pre> <ul> <li>The OSD should subscribe to the topic: blackbox/sdkvm/deskvue/status/osd_sdkvm/force_logout to receive this force_logout event.</li> <li>The OSD must raise an alert for FORCE LOGOUT for the previous user if another user is currently logged in.</li> <li>The OSD also needs to update force login username and id in system_level_settings.json in the case of a succesful logout these should be set to blank.</li> </ul> <pre><code>\"blackbox/sdkvm/deskvue/status/internal_rest_handler/alerts\" -m {\"alert_category\": int,\"alert_condition\": int,\"alert_component\": int,\n                                                            \"alert_command\": int, \"alert_status\":int, \"alert_description\":string,alert_context1\": string,\n                                                            ,\"alert_context2\":string,alert_context3\": string,alert_context4\": string}\n</code></pre> <ul> <li>Example Alert for Logout Success:  (INFO, OPERATION, USER, FORCE_LOGOUT, SUCCESS, \"OSD_LOGOUT\", prev_user_name_as_string, \"\", \"\", \"\") where the fields like INFO and OPERATION are integer values that can be found in the tables above.</li> <li>Example Alert for Logout Failed: (INFO, OPERATION, USER, FORCE_LOGOUT, FAILED, \"OSD_LOGOUT\", prev_user_name_ch, \"\", \"\", \"\" )  where the fields like INFO and OPERATION are integer values that can be found in the tables above.</li> <li>The OSD must then go to the login screen.</li> </ul> <p>The fields are populated as shown in the tables above in the Force Login section.</p>"},{"location":"architecture/sdkvm/sdkvm_1.2.0_osd_specification/#force-workspace-proposal","title":"Force Workspace Proposal","text":"<p>The Force Workspace feature allows a controlling entity like Boxilla or Control Bridge launch a Workspace by sending a command to the SDKVM's REST API. The OSD must assist this functionality in the following way:</p> <ul> <li>To launch a workspace the Webservice will send an mqtt message: </li> </ul> <pre><code>blackbox/sdkvm/deskvue/cmd/osd_sdkvm/force_workspace -m {\"username\" : \"user\", \"workspace_id\" :  \"id\"}\n</code></pre> <ul> <li>The OSD should subscribe to the topic: blackbox/sdkvm/deskvue/cmd/osd_sdkvm/force_workspace.</li> <li> <p>There are three possible scenarios:</p> <ul> <li> <p>The specified user is already logged in:</p> <ul> <li>In this case the OSD does not need to take any action regarding updating login details. It can simply launch the specified workspace.</li> </ul> </li> <li> <p>There is no logged in user:</p> <ul> <li>In this case the OSD must log the user in and update the system_level_settings file with the username and the associated user id. If the login is successfull it must also call the resrapi_cli (this will notify Boxilla that the specified user is logged into the SDKVM): \" /usr/local/bin/restapi_cli -j user_login username &amp;\"</li> <li>It can then launch the workspace:</li> <li>In the case of failure to login the OSD must display an appropriate error message and should not launch the requested workspace and should not call the restapi_cli.</li> </ul> </li> <li> <p>If the existing user and the specified user are different:</p> <ul> <li>In this case the OSD must first logout the existing user and then attempt to login the specified user.</li> <li>If the login is successfull it must update the system_level_settings file with the username and the associated user id ans also call the resrapi_cli (this will notify Boxilla that the specified user is logged into the SDKVM): \" /usr/local/bin/restapi_cli -j user_login username &amp;\"</li> <li>It can then launch the workspace:</li> <li>In the case of failure to login the OSD must display an appropriate error message and should not launch the requested workspace and should not call the restapi_cli.</li> </ul> </li> </ul> </li> </ul>"},{"location":"architecture/sdkvm/sdkvm_1.2.0_osd_specification/#proposal-for-extended-desktop-operation","title":"Proposal for Extended Desktop Operation","text":"<p>Associated Jira ticket</p> <p>The following is a proposal for dealing with extended desktop operation in the SDKVM:</p> <p>We add a connection level attribute called 'extended desktop' as a selectable radio button (shown below).</p> <p></p> <p>When enabled this will make the option of a second head visible in the workspace configuration screen as shown below:</p> <p></p> <p>The \"dual_head\" field of the associated connection will be set:</p> <p><pre><code>                {\n                    \"connection_name\": \"Editing Machine\",\n                    \"connection_id\" : \"A 10 digit unique ID\",\n                    \"type\": \"PCOIP\",\n                    \"target\": \"192.168.1.10\",\n                    \"user_name\": \"BBOX\",\n                    \"password\": \"cloud\",\n                    \"domain\": \"\",\n                    \"audio\": \"False\",\n                    \"usbr\": \"False\",\n                    \"view_only\": \"False\",\n                    \"persistent\": \"False\",\n                    \"dual_head\": \"True\"\n                }\n</code></pre> And the \"dual_head\" field of the associated tile will be set when the workspace is constructed.</p> <pre><code>      \"tiles\": [\n        {\n          \"connection_id\": \"345ca583fb\",\n          \"tile_name\": \"4K_192.168.1.169\",\n          \"tile_location\": \"0,0\",\n          \"tile_width\": \"25.0\",\n          \"tile_height\": \"50.0\",\n          \"target\": \"192.168.1.169\",\n          \"type\": \"TX\",\n          \"mode\": \"Shared\",\n          \"audio\": \"False\",\n          \"usbr\": \"False\",\n          \"view_only\": \"False\",\n          \"persistent\": \"False\",\n          \"boxilla_id\": \"08:00:27:c0:a1:9d\",\n          \"resizable\": \"True\",\n          \"decorations\": \"True\",\n          \"dual_head\": \"True\",\n          \"target_head_id\" : \"1\",\n          \"audio_type\": \"analog\"\n        },\n</code></pre> <ul> <li>A user can then select the tile associated with the second head.</li> <li>The heads should operate independently of each other; for example:<ul> <li>It should be possible to select head 2 without selecting head 1</li> <li>It should be possible to terminate one head of an active two head display without affecting the other head.</li> </ul> </li> <li>A connection with an extended desktop option can also be shared, so there can be multiple  instances of head 1 and head 2 for a shared connection.</li> <li>This adds significant complexity because it also means a dual head connection could also consist of just head 2. We could have a case where there are multiple shared instances of a dual head connection which has only head 2 active.</li> <li>When the workspaceserver processes this template it combines any extended desktop selections into a single instance.</li> </ul> <p>The data model has been structured to allow each target head be associated with a single tile, so each target head of a connection can be placed on a different tile.</p> <p></p> <p></p> <pre><code>            \"tiles\": [\n                {\n                \"connection_id\": \"345ca583fb\",\n                \"tile_name\": \"4K_192.168.1.169\",\n                \"tile_location\": \"0,0\",\n                \"tile_width\": \"66.66\",\n                \"tile_height\": \"1080\",\n                \"target\": \"192.168.1.169\",\n                \"type\": \"TX\",\n                \"mode\": \"Shared\",\n                \"audio\": \"False\",\n                \"usbr\": \"False\",\n                \"view_only\": \"False\",\n                \"persistent\": \"False\",\n                \"boxilla_id\": \"08:00:27:c0:a1:9d\",\n                \"resizable\": \"True\",\n                \"decorations\": \"True\",\n                \"dual_head\": \"False\",\n                \"target_head_id\" : \"1\",\n                \"audio_type\": \"analog\"\n                },\n</code></pre> <p>The preferred method is to specify a dual head connection with each head associated with a different tile. This approach gives us maximum flexibility; however, this approach adds complexity to the processing of workspace data and client launch command generation.</p>"},{"location":"architecture/sdkvm/sdkvm_1.2.0_osd_specification/#workspace-generation","title":"Workspace Generation","text":"<p>The OSD will present the user with dual head options for completing a template. If the user selects Head 1 of a dual head connection then the OSD will create a tile instance with the dual_head option set to \"True\". It will populate the location and size information consistent with its position in the chosen template. It will set \"target_head_id\" to 1.</p> <p>If the user selects Head 2 of a dual head connection then the OSD will create a tile instance with the dual_head option set to \"True\", and it will populate the location and size information consistent with its position in the chosen template. It will set \"target_head_id\" to 2.</p>"},{"location":"architecture/sdkvm/sdkvm_1.2.0_osd_specification/#workspace-processing","title":"Workspace Processing","text":"<p>The work of the workspace server component now becomes more complex. It must scan the workspace and when it finds a dual head connection it must defer the creation of the launch command until it has scanned the complete workspace to see if a second instance of that target exists. The algorithm uses three pieces of information to identify if a tile is part of a dual head connection:</p> <ul> <li>\"target\": \"192.168.1.169\"</li> <li>\"dual_head\": \"True\"</li> <li>\"target_head_id\" : \"1\"</li> </ul> <p>We must remember that in the case of a shared connection there may be multiple instances of a single dual head target. This means that the workspace server must effectively pair tiles which refer to a single instance of a dual head connection.</p> <p>If it finds a first head instance and no second head then it simply displays that first head instance.</p> <p>If it finds a second head instance and no corresponding first head instance then it displays the second head instance only.</p>"},{"location":"architecture/sdkvm/sdkvm_1.2.0_osd_specification/#changes-to-data-model-for-extended-desktop","title":"Changes to Data Model for extended desktop","text":"<p>The target head ID should be added to the tile definition</p> <pre><code>\"target_head_id\" : \"1\" \n</code></pre> <p>This can have one of two values:</p> <p>For the first head of a dual dead connection or for a single head connection.</p> <pre><code>\"target_head_id\" : \"1\" \n</code></pre> <p>For the second head of a dual dead connection.</p> <pre><code>\"target_head_id\" : \"2\" \n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_1.2.0_osd_specification/#gui-requirments-for-lacpbonding-feature","title":"GUI requirments for LACP/Bonding feature","text":"<p>To enhance network reliability and performance, we propose binding Deskvue's dual Ethernet interfaces into a single logical link, enabling link redundancy and aggregation using the LACP (Link Aggregation Control Protocol) protocol.</p> Deskvue Bond Configuration  <ul> <li>Both Ethernet interface, \u201cenp0s31f6\u201d and \u201cenp45s0\u201d will be part of master bond \u201cbond0\u201d.</li> <li>GUI should only refer to \u201cbond0\u201d for configuring network credentials such as IP address, subnet mask, gateway, DNS etc.</li> <li>GUI should remove all restrictions for the \u201cenp0s31f6\u201d interface. It should not display an error notification when a network cable is plugged into the \u201cenp0s31f6\u201d interface.</li> <li>An LACP toggle button is required to enable or disable the LACP functionality.</li> <li>Similar to other network settings, if Deskvue is managed OSD should not let the user to enable/disable LACP button. </li> <li>Upon toggling LACP button the GUI should call \"/home/snuc/SDKVM/scripts/lacp_bonding.sh\" script interface with following parameter.<ul> <li>LACP enable: --lacp (true or false)</li> <li>Connection Name: --connection  (static-ip or dhcp) <p>Few examples:</p> <p>Turn ON LACP. Connection is \u201cdhcp\u201d <code>/home/snuc/SDKVM/scripts/lacp_bonding.sh --lacp true \u2013connection \u201cdhcp\u201d</code></p> <p>Turn ON LACP. Connection is \u201cstatic-ip\u201d <code>/home/snuc/SDKVM/scripts/lacp_bonding.sh --lacp true \u2013connection \u201cstatic-ip\u201d</code></p> <p>Turn OFF LACP. Connection is \u201cstatic-ip\u201d <code>/home/snuc/SDKVM/scripts/lacp_bonding.sh --lacp false \u2013connection \u201cstatic-ip\u201d</code></p> <p>Note: Argument is passed using \u2018--\u2018 double hyphen. </p> <ul> <li>lacp_bonding.sh script will take care of updating system_level_settings.json database.</li> <li>When LACP is enabled, the script will switch to LACP bonding mode using following command.</li> </ul> <pre><code>sudo nmcli con mod id &lt;Connection Name&gt; bond.options mode=802.3ad,miimon=100,lacp_rate=fast,xmit_hash_policy=layer2+3\n</code></pre> <ul> <li>When LACP is disabled, the script will switch to \u201cActive-backup\u201d bonding mode using following command.</li> </ul> <pre><code>sudo nmcli con mod id &lt;Connection Name&gt; bond.options mode=active-backup,primary_reselect=2\n</code></pre> <ul> <li>In managed mode the LACP button is by default going to be disabled and user cannot modify its value. </li> <li> <p>In unmanaged mode the default value of LACP button is disabled</p> </li> <li> <p>Connection name can be derived from \u201cnmcli connection show \u2013active\u201d. I\u2019d also like to inform that once the system is in bonding mode, you\u2019ll get bond0-if1 and bond0-if2 active connection along with dhcp or static-ip. You just need to parse the static-ip or dhcp connection.  <pre><code>snuc@snuc-sdkvm:~$ nmcli connection show \u2013active\nNAME       UUID                                  TYPE      DEVICE\nstatic-ip  e4d763fc-96e7-4be9-9ec5-d2aae11e46e9  bond      bond0\nbond0-if1  39a2c7d3-2ffd-4190-8103-aad43a5bc175  ethernet  enp45s0\nbond0-if2  e0c94cb3-cf44-41ba-a21e-d648bb546c30  ethernet  enp0s31f6\n</code></pre></p> </li> </ul>"},{"location":"architecture/sdkvm/sdkvm_1.2.0_tasklist/","title":"Scoping for SDKVM Release  1.2.0, 1.3.0 and 1.4.0","text":"<p>This is a discussion document to try and correctly scope the requirements for SDKVM 1.1.0 and subsequent releases. I have listed a number of items below that require discussion. The allocation to SDKVM 1.2.0 is provisional and will not be finalised until discussions with product management have taken place.</p>"},{"location":"architecture/sdkvm/sdkvm_1.2.0_tasklist/#features-targeted-for-120","title":"Features Targeted for 1.2.0","text":"Task Provisional Estimate Comments Resources Proposed Release Proposed SDKVM Drop Control Bridge Support 4 weeks port from Appliance with addition OSD integration Narayana,Squareroot 1.2.0 EC1 Enabled decorations per workspace 2 weeks johnos,Squareroot 1.2.0 EC1 Support for 2X2 matrix and video wall 2 weeks micheal 1.2.0 EC1 Inactivity Timer for OSD 2 weeks re-implement feature Squareroot 1.2.0 EC1 TX Settings Associated Jira ticket Thiru 1.2.0 EC1 Boxilla Statistics These are being handled by Narayana - added video Squareroot, Narayana, Johnos 1.2.0 EC1 Extended Desktop/Dual head support - client level 6 weeks In Progress Jonathan 1.2.0 EC1 Extended Desktop/Dual head support - OSD Presentation 4 weeks Associated Jira ticket johnos 1.2.0 EC1 Additional Templates, including multiscreen and screen spanning 6 weeks Agreed that there will be no new templates for the 1.1.0 release. We will evaluate turning back on multi-window templates, but this is not commited. Jonathan,johnos,Squareroot 1.2.0 EC1 Vertical Screen Position Support 8 weeks Product Management indicated that this is a priority, but it has a significant OSD impact - PM will review and give directions. This may also require new templates. Jira Ticket johnos, micheal 1.2.0 ? EC2 ? Extended Desktop Support - Boxilla 4 weeks Associated Jira ticket johnos,Julian,Aidan 1.2.0 EC2 Auto Login support on SDKVM 3 weeks discussion phase with product management - Boxilla does not support the configuration of this in the XML file, it is a local setting, will it be similar in SDKVM johnos 1.2.0 EC2 Mouse Acceleration 6 weeks Associated Jira ticket johnos 1.2.0 EC2 Statistics for SDKVM Connections 2 weeks Associated Jira ticket Manas 1.2.0 EC2 Key handling for industry standard hotkeys 4 weeks In progress Jonathan 1.2.0 EC2 Support for configurable window decorations 2 weeks Associated Jira ticket johnos 1.2.0 EC2 Secure Boot 8 weeks exploratory phase manas 1.2.0 EC3 Disk Encryption 8 weeks exploratory phase manas 1.2.0 EC3 Support for configurable Hot Keys 2 weeks Exploratory Phase johnos 1.2.0 EC3 Keyboard LED Synchronisation 6 weeks Exploratory Phase johnos, jonathan 1.2.0 EC3 Display Management control via Boxilla ? Agreed that it will be a local setting and will not be supported by Boxilla for 1.1.0 release. johnos, Narayana for possible REST API support 1.2.0 EC3 Statistics and Performance Core 8 weeks Associated Jira ticket johnos, Narayana 1.2.0 EC4 Audio support control via Boxilla 6 weeks Agreed that it will be a local setting and will not be supported by Boxilla for 1.1.0 release. This has implications for where audio settings are stored because we do not want these over written by Boxilla. johnos, Narayana for possible REST API support 1.2.0 EC3 Extended Desktop/Dual head support - Core 8 weeks Associated Jira ticket johnos 1.2.0 EC3 Active Directory exploratory phase Narayana, Boxilla Team 1.2.0 EC4 Additional control bridge api requests 3 weeks Narayana, johnos Associated Jira tickets 1.2.0 EC4 Customer Aena Airport Operator:  Red border highlighting a tile where audio (alarm) is sounding 4 weeks jonathan, johnos Associated Jira ticket 1.2.0 EC4 Prorail features insufficient data jonathan, johnos Associated Jira ticket also Prorail Proposal 1.2.0 EC4"},{"location":"architecture/sdkvm/sdkvm_1.2.0_tasklist/#features-targeted-for-130","title":"Features Targeted for  1.3.0","text":"Task Provisional Estimate Comments Resources Proposed Release Proposed SDKVM Drop Force Connections 4 weeks Force Workspaces will be available from the IBC demo Associated Jira ticket johnos, Aidan 1.3.0 EC1 MST Support 4 Months Micheal, Squareroot 1.3.0 EC1 Bonded Group Support 4 Months Associated Jira ticket johnos, Aidan 1.3.0 EC1 Ability to lock Tiles to an XY and Z axis, tile cannot be moved and must remain on top 4 Months johnos 1.3.0 EC4 Ability to select a connection target from an existing active tile 3 Months Associated Jira Ticket johnos, jonathan 1.3.0 EC4 Bi-Directional Audio 6 weeks Significant work at client, OSD and WS level - Associated Jira Ticket johnos 1.3.0 EC4 Detail event logging to Boxilla, workspace opening and closing 4 weeks johnos 1.3.0 EC4 Connections versus workspaces - user configurable workspaces 4 weeks Associated Jira ticket johnos 1.3.0 Zone Support 6 weeks Associated Jira ticket johnos, Aidan 1.3.0 EC1 Security Review 2 months Exploratory Phase johnos, micheal 1.3.0 EC1 Network interfaces and switch over 8 weeks Associated Jira ticket Manas 1.3.0 EC2 Variable size mouse cursor 8 weeks discussion phase with product management johnos 1.3.0 EC2 Beaconing for Mouse location 8 weeks discussion phase with product management johnos 1.3.0 EC2 Persistent connections 6 weeks discussion phase with product management johnos 1.3.0 EC2 Client Performace Benchmarking and optimisation 8 weeks Associated Jira ticket Jonathan 1.3.0 EC2 Support for cut through 4 weeks Associated Jira ticket Jonathan 1.3.0 EC2"},{"location":"architecture/sdkvm/sdkvm_1.2.0_tasklist/#features-targeted-for-140","title":"Features Targeted for  1.4.0","text":"Task Provisional Estimate Comments Resources Proposed Release Proposed SDKVM Drop VNC Client 12 weeks The work here would be on making it compatible with existing SDKVM features in relation to window management etc. Associated Jira ticket johnos, jonathan 1.4.0 EC1 USBR Support 4 months significant upfront feasibility required here johnos, narayana 1.4.0 EC1"},{"location":"architecture/sdkvm/sdkvm_1.2.0_tasklist/#proposal-for-control-bridge-support","title":"Proposal for Control Bridge Support","text":"<ul> <li>SDKVM Control Bridge</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_1.2.0_tasklist/#proposal-for-reconcilliation-of-audio-on-rx-and-sdkvm-connections","title":"Proposal for Reconcilliation of Audio on RX and SDKVM Connections","text":"<p>Context: Prior to the SDKVM Boxilla a user defining a connection could enable or disable audio. </p> <p>If audio was enable then the RX would process audio from its analog channel if the TX could support this option. Analog audio is always sent through the RX 3.5 mm output. The RX always processes HID audio; this does not have to be explicitly enabled. If the TX provides HID audio then the RX will route that audio to any connected USB devices that support audio. When a user defines a connection on the SDKVM OSD they must explicitly select a supported audio type - either analog or hid. The SDKVM will route the selected audio to the audio output device that the user has configured. On the SDKVM these audio devices are either HDMI monitors that support audio or the SDKVM's 3.5 mm output.</p> <p>To reconsile the conflicting audio options between the RX and the SDKVM we have agreed that when a user enables audio on a SDKVM connection that the audio definition in the resulting connection will be set to analog. This means that we will not support hid audio connections when the SDKVM is managed.</p> <p></p>"},{"location":"architecture/sdkvm/sdkvm_1.2.0_tasklist/#proposal-for-configuring-window-decorations","title":"Proposal for Configuring Window Decorations","text":"<p>Associated Jira ticket</p> <p>In the current SDKVM we create a window decoration bar (essential a title bar) with the following information</p> <ul> <li>Connection Name</li> <li>IP address</li> <li>Close button</li> </ul> <p>For some applications like video walls it may be preferable to omit this window decoration. It is proposed that we add the following options to the system settings screen with a global option to configure the decorations and title bars for all users.</p> <p>The proposal for Window Decorations and Title Bars is as follows:</p> <ul> <li>A workspace level setting will determine whether the title bar appears.</li> <li>If Decorations are enabled then an additional drop down allows one to select what appears on the title bar.<ul> <li>Connection Name</li> <li>IP address</li> </ul> </li> <li>The default settings for a workspace are:<ul> <li>Title bar enabled</li> <li>Connection Name enabled</li> <li>IP address disabled</li> </ul> </li> </ul> <p>These settings are configured in the workspace definition as follows:</p> <pre><code>{\n  \"workspace_name\": \"WS #5\",\n  \"workspace_data_model_version_number\": \"1\",\n  \"workspace_description\": \"\",\n  \"workspace_id\": \"cb9f97c050\",\n  \"workspace_created_by\" : \" A 10 digit unique ID for the creator or 'admin' if created by an admin user\",\n  \"title_bars\" : \"True\",\n  \"title_bar_connection_name\" : \"True\",\n  \"title_bar_ipaddress\" : \"True\",\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_1.2.0_tasklist/#proposal-for-extended-desktop-operation","title":"Proposal for Extended Desktop Operation","text":"<p>Associated Jira ticket</p> <p>The following is a proposal for dealing with extended desktop operation in the SDKVM:</p> <p>We add a connection level attribute called 'extended desktop' as a selectable radio button (shown below).</p> <p></p> <p>When enabled this will make the option of a second head visible in the workspace configuration screen as shown below:</p> <p></p> <p>The \"dual_head\" field of the associated connection will be set:</p> <p><pre><code>                {\n                    \"connection_name\": \"Editing Machine\",\n                    \"connection_id\" : \"A 10 digit unique ID\",\n                    \"type\": \"PCOIP\",\n                    \"target\": \"192.168.1.10\",\n                    \"user_name\": \"BBOX\",\n                    \"password\": \"cloud\",\n                    \"domain\": \"\",\n                    \"audio\": \"False\",\n                    \"usbr\": \"False\",\n                    \"view_only\": \"False\",\n                    \"persistent\": \"False\",\n                    \"dual_head\": \"True\"\n                }\n</code></pre> And the \"dual_head\" field of the associated tile will be set when the workspace is constructed.</p> <pre><code>      \"tiles\": [\n        {\n          \"connection_id\": \"345ca583fb\",\n          \"tile_name\": \"4K_192.168.1.169\",\n          \"tile_location\": \"0,0\",\n          \"tile_width\": \"25.0\",\n          \"tile_height\": \"50.0\",\n          \"target\": \"192.168.1.169\",\n          \"type\": \"TX\",\n          \"mode\": \"Shared\",\n          \"audio\": \"False\",\n          \"usbr\": \"False\",\n          \"view_only\": \"False\",\n          \"persistent\": \"False\",\n          \"boxilla_id\": \"08:00:27:c0:a1:9d\",\n          \"resizable\": \"True\",\n          \"decorations\": \"True\",\n          \"dual_head\": \"False\",\n          \"target_head_id\" : \"1\",\n          \"audio_type\": \"analog\"\n        },\n</code></pre> <ul> <li>A user can then select the tile associated with the second head.</li> <li>The heads should operate independently of each other; for example:<ul> <li>It should be possible to select head 2 without selecting head 1</li> <li>It should be possible to terminate one head of an active two head display without affecting the other head.</li> </ul> </li> <li>A connection with an extended desktop option can also be shared, so there can multiple  instances of head 1 and head 2 for a shared connection.</li> <li>When the workspaceserver processes this template it combines any extended desktop selections into a single instance.</li> </ul> <p>The data model has been structured to allow each target head be associated with a single tile, so each target head of a connection can be placed on a different tile.</p> <p></p> <p></p> <pre><code>            \"tiles\": [\n                {\n                \"connection_id\": \"345ca583fb\",\n                \"tile_name\": \"4K_192.168.1.169\",\n                \"tile_location\": \"0,0\",\n                \"tile_width\": \"66.66\",\n                \"tile_height\": \"1080\",\n                \"target\": \"192.168.1.169\",\n                \"type\": \"TX\",\n                \"mode\": \"Shared\",\n                \"audio\": \"False\",\n                \"usbr\": \"False\",\n                \"view_only\": \"False\",\n                \"persistent\": \"False\",\n                \"boxilla_id\": \"08:00:27:c0:a1:9d\",\n                \"resizable\": \"True\",\n                \"decorations\": \"True\",\n                \"dual_head\": \"False\",\n                \"target_head_id\" : \"1\",\n                \"audio_type\": \"analog\"\n                },\n</code></pre> <p>The preferred method is to specify a dual head connection with each head associated with a different tile. This approach gives us maximum flexibility; however, this approach adds complexity to the processing of workspace data and client launch command generation.</p>"},{"location":"architecture/sdkvm/sdkvm_1.2.0_tasklist/#workspace-generation","title":"Workspace Generation","text":"<p>The OSD will present the user with dual head options for completing a template. If the user selects Head 1 of a dual head connection then the OSD will create a tile instance with the dual_head option set to \"True\". It will populate the location and size information consistent with its position in the chosen template. It will set \"target_head_id\" to 1.</p> <p>If the user selects Head 2 of a dual head connection then the OSD will create a tile instance with the dual_head option set to \"True\", and it will populate the location and size information consistent with its position in the chosen template. It will set \"target_head_id\" to 2.</p>"},{"location":"architecture/sdkvm/sdkvm_1.2.0_tasklist/#workspace-processing","title":"Workspace Processing","text":"<p>The work of the workspace server component now becomes more complex. It must scan the workspace and when it finds a dual head connection it must defer the creation of the launch command until it has scanned the complete workspace to see if a second instance of that target exists. The algorithm uses three pieces of information to identify if a tile is part of a dual head connection:</p> <ul> <li>\"target\": \"192.168.1.169\"</li> <li>\"dual_head\": \"True\"</li> <li>\"target_head_id\" : \"1\"</li> </ul> <p>We must remember that in the case of a shared connection there may be multiple instances of a single dual head target. This means that the workspace server must effectively pair tiles which refer to a single instance of a dual head connection.</p> <p>If it finds a first head instance and no second head then it simply displays that first head instance.</p> <p>If it finds a second head instance and no corresponding first head instance then it displays the second head instance only.</p>"},{"location":"architecture/sdkvm/sdkvm_1.2.0_tasklist/#changes-to-data-model-for-extended-desktop","title":"Changes to Data Model for extended desktop","text":"<p>The target head ID should be added to the tile definition</p> <pre><code>\"target_head_id\" : \"1\" \n</code></pre> <p>This can have one of two values:</p> <p>For the first head of a dual dead connection or for a single head connection.</p> <pre><code>\"target_head_id\" : \"1\" \n</code></pre> <p>For the second head of a dual dead connection.</p> <pre><code>\"target_head_id\" : \"2\" \n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_1.2.0_tasklist/#connections-versus-workspaces","title":"Connections versus Workspaces","text":"<p>Associated Jira ticket</p> <p>In the original SDKVM Design the workspace defines a list of predefined connections and their locations. We provide a \"connections tab\" which can be used to create, edit and delete individual connections when the system operates in unmanaged mode.</p> <p>The connections tab provides a check tab which allows a user to check an individual connection. The connections tab is not a means of launching connections. If this is required then we need some direction on how this would work and how any connections launched independent of a workspace would work.</p> <p>This also has implications for Boxilla in terms of statistics reporting, force connections etc.</p> <p>The specification should address the following:</p> <ol> <li>Is it a requirement to be able to launch multiple connections from a connections screen?</li> <li>Do these close and existing workspaces on launch?</li> <li>How is the position of these connections managed if operated independently of a workspace?</li> <li>When reporting statistics do we report per connection statistics of aggregate workspace statistics?</li> <li>At what level do we map the force connect logic in Boxilla, is it at a connection or workspace level?</li> <li>How do connections and workspaces interact with features like bonding and zones?</li> </ol>"},{"location":"architecture/sdkvm/sdkvm_1.2.0_tasklist/#mouse-acceleration","title":"Mouse Acceleration","text":"<p>Associated Jira ticket</p> <p>We need a specification for Mouse acceleration. This has been mentioned a number of times but requires engagement and clarification with end customers.</p> <p>Some aspects of mouse performance may be due to saturation of the network and limits of client video processing.</p> <p>Product management need to clarify and specify what is required.</p>"},{"location":"architecture/sdkvm/sdkvm_1.2.0_tasklist/#proposal-for-configuring-overlays","title":"Proposal for Configuring Overlays","text":"<p>Associated Jira ticket</p> <p>In the current SDKVM when we launch a client window the top right hand portion of that window provides a hotspot. Hovering on this hotspot causes the client to display an overlay which when activated provides additional controls for window properties, keyboard interaction and audio control.</p> <p>This overlay can also be invoked via the hotkey Windows + b without the need to hover at the top right hand corner.</p> <p></p> <p>Some customers find this overlay difficult to invoke and they also find that it interferes with their ability to navigate to certain areas of the target screen. It is proposed that we add the following options to the system settings screen with a global option to configure the appearance of the overlay for all users.</p> <p></p> <p>If overlays are enabled then it should be possible to invoke an overlay by invoking the hot key. Ideally we would like to be able to invoke an overlay on the active window by pressing a hot key.</p>"},{"location":"architecture/sdkvm/sdkvm_1.2.0_tasklist/#proposals-for-video-statistics","title":"Proposals for Video Statistics","text":"<ul> <li>Bug Reference BUG-5815</li> </ul> <p>It is proposed that we use the existing video statistics APIs to report video statistics from the RDP,KVM and PCoIP clients. </p> <p>Boxilla will be responsible for aggregating these into workspace level statistics.</p> <p>The REST API or a client acting on its behalf can register for client level statistics by listening to the MQTT Topic: </p> <p><pre><code> blackbox/sdkvm/deskvue/workspace_server/status/statistics\n</code></pre> Note : We meed to make the topic : blackbox/sdkvm/deskvue/workspace_server/status/statistics more specific to video statistics, for example : blackbox/sdkvm/deskvue/workspace_server/status/statistics/video</p> <p>Statistics are returned in the following format:</p> <pre><code>{  \n    \"client_uid\":\"3b07e2a340\",\n    \"connection_type\":\"transmitter\",\n    \"connection_mode\":\"shared\",\n    \"server_hostname\":\"192.168.1.169\",\n    \"server_port\":3389,\n    \"bit_rate\":27427220,\n    \"frame_rate\":21.0,\n    \"time_stamp\":\"15:16:14 16-01-2023\"\n}\n</code></pre> <p>Note: Depending on the client, not all fields may be populated. The PCoIP client for example can not report frame rate.</p> <p><pre><code>mosquitto_sub -h 127.0.0.1 -v -t blackbox/sdkvm/deskvue/workspace_server/status/statistics\n</code></pre> Current REST API structures are as follows. We cannot support all of these: See comments below</p> <pre><code>struct _VIDEO_STATISTICS {\n    // -----------------------------------Statistics---------------------------\n    // ------------------------------------------------------------------------\n    unsigned int        previous_time_audio; // For SDKVM set to 0\n    unsigned long       bytes_received; // For SDKVM set to 0\n    unsigned long       rtt_usec; // For SDKVM set to 0\n    unsigned long       min_rtt_usec; // For SDKVM set to 0\n    unsigned long       max_rtt_usec; // For SDKVM set to 0\n    unsigned long       avg_rtt_usec; // For SDKVM set to 0\n    hwQualityLevel      quality_level; // For SDKVM set to 0\n\n    VideoHeadStatistics optimised_stats[2];\n    VideoHeadStatistics lossless_stats;\n};\n</code></pre> <pre><code>struct _VIDEO_HEAD_STATISTICS {\n    unsigned long long total_bytes_processed;\n    float              moving_average_video; // For SDKVM set to 0\n    unsigned int       total_frames_count;  // For SDKVM set to 0\n    unsigned int       total_tiles_changed; // For SDKVM set to 0\n    unsigned int       previous_time; // For SDKVM set to 0\n    float       Mbytes_sent; // For SDKVM set to 0\n    float              average_Mbytes_per_second; // for SDKVM use bit_rate\n    float              max_Mbytes_per_second; // for SDKVM use bit_rate\n    float              min_Mbytes_per_second; // for SDKVM use bit_rate\n    unsigned int       average_per_frame_tile_size;  // For SDKVM set to 0\n\n    float              frames_per_second; // For SDKVM use frame_rate\n\n    unsigned int       average_tiles_per_frame;  // For SDKVM set to 0\n    unsigned int       max_tiles_per_frame; // For SDKVM set to 0\n    unsigned int       min_tiles_per_frame; // For SDKVM set to 0\n    unsigned int       min_frames_per_second; // For SDKVM use frame_rate\n    unsigned int       max_frames_per_second; // For SDKVM use frame_rate\n\n    unsigned int       average_tile_size; // For SDKVM set to 0\n    unsigned long      total_tile_size; // For SDKVM set to 0\n    unsigned int       tile_size; // For SDKVM set to 0\n\n    unsigned int       average_frame_size; // For SDKVM set to 0\n    unsigned int       max_tile_size; // For SDKVM set to 0\n    unsigned int       min_tile_size; // For SDKVM set to 0\n\n    videoHead_t *      ingress_resolution; // For SDKVM set to 0\n    videoHead_t *      egress_resolution; // For SDKVM set to 0\n\n    COMPRESSION_MODE   compression;  // For SDKVM set to 0\n    unsigned int       dropped_frames; // For SDKVM set to 0\n    unsigned int       total_dropped_frames; // For SDKVM set to 0\n    unsigned int       bad_frames; // For SDKVM set to 0\n};\ntypedef struct {\n    unsigned int width; // For SDKVM set to 0\n    unsigned int height; // For SDKVM set to 0\n    unsigned int refresh; // For SDKVM set to 0\n} videoHead_t;\n</code></pre> <p>The video facts sent to Boxilla are:</p> Parameter Format For SDKVM id int use incrementing number head int for now set to 0 mac 50 byte cchar array use SDKVM mac min_tiles_per_frame int for now set to 0 max_tiles_per_frame int for now set to 0 avg_tiles_per_frame int for now set to 0 frames_per_second int use frame_rate from client min_frames_per_second int use frame_rate from client max_frames_per_second int use frame_rate from client min_tile_size int for now set to 0 max_tile_size int for now set to 0 min_video_bw int use bit rate max_video_bw int use bit rate avg_video_bw double use bit rate video_bw double use bit rate min_rtt double for now set to 0 max_rtt double for now set to 0 avg_rtt double for now set to 0 rtt double for now set to 0 user_response double for now set to 0 resolution 255 byte char array for now set to 0 array dropped_frames double for now set to 0"},{"location":"architecture/sdkvm/sdkvm_1.2.0_tasklist/#supporting-vertical-stacking","title":"Supporting Vertical Stacking","text":"<p>The existing data model does not need to change to accommodate vertical stacking of monitors.</p> <p>The monitor data is written to ~/.config/monitor-management/current_monitors.json</p> <pre><code>[\n    {\n        \"name\": \"DELL P2415Q\",\n        \"manufacturer\": \"Dell Inc.\",\n        \"interface\": \"HDMI-1\",\n        \"head\": 1,\n        \"edid\": \"00ffffffffffff0010acc0a0424e3331061b010380351e78eae245a8554da3260b5054a54b00714f8180a9c0a940d1c0e10001010101a36600a0f0701f80302035000f282100001a000000ff00443856584637323531334e420a000000fc0044454c4c205032343135510a20000000fd001d4c1e8c1e000a20202020202001c302032ef15390050402071601141f1213272021220306111523091f07830100006d030c001000003c200060030201023a801871382d40582c25000f282100001e011d8018711c1620582c25000f282100009e04740030f2705a80b0588a000f282100001e565e00a0a0a02950302035000f282100001a0000000000000000008a\",\n        \"resolution\": {\n            \"x\": 1920,\n            \"y\": 1080,\n            \"r\": 60.0\n        },\n        \"position\": {\n            \"x\": 0,\n            \"y\": 0\n        },\n        \"connected\": true,\n        \"primary\": true,\n        \"diagonal_size\": 24.2\n    },\n    {\n        \"name\": \"ASUS PB287Q\",\n        \"manufacturer\": \"Ancor Communications Inc\",\n        \"interface\": \"HDMI-3\",\n        \"head\": 2,\n        \"edid\": \"00ffffffffffff000469a3283427010025190103803e22783a1cb5a3574fa0270d5054bfef00d1c0814081809500b300714f81c0010104740030f2705a80b0588a006d552100001a023a801871382d40582c45006d552100001e000000fd001e5018a01e000a202020202020000000fc0041535553205042323837510a20018702032cf1510102031112130414050e0f1d1e1f90202223091707830100006d030c002000003c200060010203565e00a0a0a02950302035006d552100001ee26800a0a0402e60302036006d552100001a011d00bc52d01e20b82855406d552100001e8c0ad090204031200c4055006d552100001800000000000000000000005e\",\n        \"resolution\": {\n            \"x\": 3840,\n            \"y\": 2160,\n            \"r\": 30.0\n        },\n        \"position\": {\n            \"x\": 1920,\n            \"y\": 0\n        },\n        \"connected\": true,\n        \"primary\": false,\n        \"diagonal_size\": 28.1\n    }\n]\n</code></pre> <p>This specifies the relative position of each monitor.</p> <p>The main challenge in implementing this feature is creating a intuitive user friendly interface in the OSD. The current OSD allows a user drag monitors into their desired position on the horizontal axis. To support vertical stacking the OSD would need to additionally allow a user move monitors into the vertical plane. We may need to create some form of grid to make it easier for a user to place a monitor in the desired location.</p> <p>There may be some work required where the user can assign numbers to monitors. One possible solution is that we assign a weigthing to a monitor. If we connect HDMI-1 it gets weight one, but if we connect HDMI-1 and DP-1 then HDMI-1 would become monitor one and DP-1 becomes monitor two. This would mean we always setup the same. We would need to understand how MST integrates into this, it is possible that the weighting for mst propigates down.</p> <p>The positioning of the monitors in the horizontal and vertical positions cannot be set by Boxilla. Boxilla has no concept of connected monitors or their relative positions. There is no current requirement to implement a monitor management scheme in Boxilla.</p> <p></p> <p>If we do use a weighting system then Boxilla does not need any knowledge of this.  Only the SDKVM would know the assigned weights for monitors. When we specify a workspace that spans a number of monitors in Boxilla the only option we provide is the option to select the top left most head. If we select monitor one then we do so on the assumption that monitor one is the top left monitor.</p> <p>On the OSD we may need an interface to assign these weights.</p>"},{"location":"architecture/sdkvm/sdkvm_architecture/","title":"SDKVM Architecture","text":""},{"location":"architecture/sdkvm/sdkvm_architecture/#introduction","title":"Introduction","text":"<p>The Software Defined KVM product (SDKVM) is a PC based offering that allows a user connect to multiple different sources from a single same pixel multihead, multiscreen application.</p>"},{"location":"architecture/sdkvm/sdkvm_architecture/#terms-and-definitions","title":"Terms and Definitions","text":"Term Definition CAS Teradici CAS (Cloud Access Software) Decoder See Receiver Encoder See Transmitter Multiviewer A multiviewer is similar to a video wall. But while video walls require a separate TV display for each video source, multiviewers only require one display surface. Multiviewers are able to showcase full, split, quad, and custom configurations on the same pixel surface. PCoIP PC over IP (PCoIP) is a remote display protocol that Teradici developed for delivering remote desktops and applications to endpoints. PCoIP works by rendering client desktops on a network or cloud server. The desktop's pixels are then compressed, encrypted and then transmitted to the client device. The client then decrypts and renders the desktop view for the user. RFX RemoteFX Codec Extension developed by Microsoft which uses a lossy image codec to encode screen images with efficient and effective compression. This is the lossy scheme used in Blackbox products. Receiver A Blackbox appliance that receives and displays a video stream. A receiver is also referred to as a client or decoder. Source The term Source is commonly used to describe the PC connected to a transmitter appliance. Shared Mode A generic term used in Blackbox to describe schemes that allow more than one receiver view the video source from a transmitter. See Municast and Multicast. Transmitter A Blackbox appliance that captures and transmits a video from a source PC. A transmitter is also referred to as a server or encoder. Work Space A collection of views containing tiles Video Source A source of input for a Transmitter, normally the DVI or Display Port output of a PC. Video Wall A video wall is a special multi-monitor setup that consists of multiple computer monitors, video projectors, or television sets tiled together contiguously or overlapped in order to form one large screen. Typical display technologies include LCD panels, Direct View LED arrays, blended projection screens, Laser Phosphor Displays, and rear projection cubes. Tile A instance of a connection in a given position within a workspace <p>Table 1 Terms and Definitions</p>"},{"location":"architecture/sdkvm/sdkvm_architecture/#architectural-overview","title":"Architectural Overview","text":""},{"location":"architecture/sdkvm/sdkvm_architecture/#sdkvm-operating-system","title":"SDKVM Operating System","text":"<ul> <li>Operating System</li> <li>Dual Boot Structure</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_architecture/#sdkvm-osd","title":"SDKVM OSD","text":"<p>The OSD provides the main user interface for the SDKVM. The SDKVM is a multi-user system and each user can provision and manage a range of connections and workspaces.</p> <p>The OSD communicates with the workspaceserver through a REST API and MQTT messages to launch workspaces and connections. The status of these connections and workspaces are returned to the SDKVM either as MQTT messages or through polling the workspaceserver's REST API.</p> <p>The OSD is a thin layer providing the various user interface screens. It has minimal logic and will talk to other components to implement the core functionality of the system. It will have the following screens:</p>"},{"location":"architecture/sdkvm/sdkvm_architecture/#sdkvm-networking","title":"SDKVM Networking","text":"<ul> <li>SDKVM Networking</li> <li>LACP Proposal for DESKVUE</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_architecture/#sdkvm-core","title":"SDKVM Core","text":"<ul> <li>SDKVM Core Utilities Specification</li> <li>SDKVM Work Space Server</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_architecture/#diagnostics-log-export-using-the-osd","title":"Diagnostics Log Export using the OSD","text":"<p>The OSD provides a diagnostic export button in the System Settings Tab. This will create an encoded DeskvueDiagnostics.log in an attched thumb drive or (if the no thumb drive is detected) in the /home/snuc/SDKVM/diagnostics directory.</p>"},{"location":"architecture/sdkvm/sdkvm_architecture/#creating-the-deskvuediagnosticslog-file","title":"Creating the DeskvueDiagnostics.log file","text":"<p>The OSD calls /home/snuc/SDKVM/scripts/diagnostics.sh passing the desired filename and path to the script. The script gathers relevant diagnostic files and encodes these using AES-256 with a predefined key.</p> <p>A utility script called /home/snuc/SDKVM/scripts/decode_diagnostics.sh can be used to decode the diagnostics.</p>"},{"location":"architecture/sdkvm/sdkvm_architecture/#diagnostics-log-export-using-boxilla","title":"Diagnostics Log Export using Boxilla","text":"<p>Proposal</p> <ul> <li>We add a new get diagnostics endpoint for Boxilla. </li> </ul> <pre><code>https://IP:8888/control/diags/\n</code></pre> <p>The SDKVM REST API endpoint calls:</p> <pre><code> /home/snuc/SDKVM/scripts/diagnostics.sh /home/snuc/SDKVM/diagnostics/DeskvuewDiagnostics.log\n</code></pre> <p>This command completes in under a second. It will create the diagnostic file in the provided path. We then embed the resultant .log file in the REST response.</p> <p>If the diagnostics directory does not exist it should be created.</p> <p>Boxilla processes the returned response and and stores the retrieved DeskvuewDiagnostics.log for retrieval by the user or a technician.</p>"},{"location":"architecture/sdkvm/sdkvm_architecture/#impacts","title":"Impacts","text":"<ul> <li>New GET REST API endpoint for diagnostics. - see POST Run Appliance Diagnostics section in the device rest api document. </li> <li>Integrate REST API endpoint with /home/snuc/SDKVM/scripts/diagnostics.sh and retrieve the resultant file from /home/snuc/SDKVM/diagnostics/DeskvuewDiagnostics.log. This is the prefered location but any path and any filename can be passed to /home/snuc/SDKVM/scripts/diagnostics.sh.</li> <li>Attach the contents of DeskvuewDiagnostics.log to the response and return to Boxilla.</li> <li>Update REST API document to reflect the new interface and new behaviour for the SDKVM.</li> <li>Update this document with the final details of the implementation or create a seperate md document and link it here.</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_architecture/#diagnostics-file-export-and-view-using-boxilla","title":"Diagnostics file export and view using Boxilla","text":"<p>There is a technician level feature on Boxilla that allows a technical support person to view diagnostic information through a password protected interface. The SDKVM will also support this interface. </p> <p>This uses the endpoint:</p> <pre><code>https://IP:8888/control/diags/files\n</code></pre> <p>This node returns the list of diagnostics files by first calling ~/SDKVM/scripts/diagnostic_files.sh and then creating a summary of the directory contents of ~/SDKVM/diagnostics. The technician can then request an individual file by specifying an index:</p> <pre><code>https://IP:8888/control/diags/?file_id=2\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_architecture/#impacts_1","title":"Impacts","text":"<ul> <li>Use existing endpoints for diagnostics files see section \"GET List of Diagnostic Files\" in the device rest api document.</li> <li>Integrate existing REST API endpoint with /home/snuc/SDKVM/scripts/diagnostic_files.sh script.</li> <li>This script will generate a list of files in /home/snuc/SDKVM/diagnostics/. The REST API should capture the list of files and prenet these back to the Boxilla request.</li> <li>Retrieve the requested file for Boxilla using the file ID end point in response to \"GET Nth Diagnostic File Content\" as defined in the rest api document.</li> <li>Update this document with the details of the implementation or create a seperate md document and link it here.</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_architecture/#generating-authentication-statistics","title":"Generating Authentication Statistics","text":"<p>The REST API generates authentication statistics for Boxilla. </p> Paramter Format id int mac 50 byte char array successful_login int refused_login int manager_unreachable int timestamp int <p>on the SDKVM these are handled by the stats_cli as part of the authentication process.</p>"},{"location":"architecture/sdkvm/sdkvm_architecture/#video-statistics","title":"Video Statistics","text":"<p>It is proposed that we use the existing video statistics APIs to report video statistics from the RDP,KVM and PCoIP clients.</p> <p>The REST API or a client acting on its behalf can register for client level statistics by listening to the MQTT Topic:</p> <p><pre><code> blackbox/sdkvm/deskvue/workspace_server/status/statistics\n</code></pre> Note : We need to make the topic : blackbox/sdkvm/deskvue/workspace_server/status/statistics more specific to video statistics, for example : blackbox/sdkvm/deskvue/workspace_server/status/statistics/video</p> <p>Statistics are returned in the following format:</p> <pre><code>{\n    \"client_uid\":\"3b07e2a340\",\n    \"connection_type\":\"transmitter\",\n    \"connection_mode\":\"shared\",\n    \"server_hostname\":\"192.168.1.169\",\n    \"server_port\":3389,\n    \"bit_rate\":27427220,\n    \"frame_rate\":21.0,\n    \"time_stamp\":\"15:16:14 16-01-2023\"\n}\n</code></pre> <p>Note: Depending on the client, not all fields may be populated. The PCoIP client for example can not report frame rate.</p> <p><pre><code>mosquitto_sub -h 127.0.0.1 -v -t blackbox/sdkvm/deskvue/workspace_server/status/statistics\n</code></pre> Current REST API structures are as follows. We cannot support all of these: See comments below</p> <p>The video facts sent to Boxilla are:</p> Parameter Format For SDKVM id int id++ head int now set to 0 mac 50 byte cchar array use SDKVM mac min_tiles_per_frame int now set to 0 max_tiles_per_frame int now set to 0 avg_tiles_per_frame int now set to 0 frames_per_second int frame_rate from client min_frames_per_second int frame_rate from client max_frames_per_second int frame_rate from client min_tile_size int now set to 0 max_tile_size int now set to 0 min_video_bw int bit rate*8 max_video_bw int bit rate*8 avg_video_bw double bit rate*8 video_bw double bit rate*8 min_rtt double now set to 0 max_rtt double now set to 0 avg_rtt double now set to 0 rtt double now set to 0 user_response double now set to 0 resolution 255 byte char array now set to 0 array dropped_frames double now set to 0"},{"location":"architecture/sdkvm/sdkvm_architecture/#network-physical-statistics","title":"Network physical statistics","text":"<p>The network physical facts sent to Boxilla are:</p> Parameter Format For SDKVM id int id++ mac_id int 0 or 1 active bool true for active and  false for inactive link_status 3 bytes array up or down or unknown speed 9 bytes array eth speed from 10Mbps to 10Gbps media 4 bytes array RJ45 lacp_status 9 bytes array Disabled"},{"location":"architecture/sdkvm/sdkvm_architecture/#network-eth-coneection-statistics","title":"Network eth coneection statistics","text":"Parameter Format For SDKVM id int id++ channel_id int 0 description string ETH_CONNECTION_STATISTICS local_port int now set to 0 remote_port int now set to 0 remote_ip 32 bytes string now set to 0 remote_mac 32 bytes string now set to 0 rtt_usec int now set to 0 rto_usec int now set to 0 total_bytes_transmitted int reading from /proc/net/dev total_bytes_acknowledged int now set to 0 total_bytes_received int reading from /proc/net/dev total_bytes_dropped int reading from /proc/net/dev average_bps_acknowledged int now set to 0 average_bps_received int now set to 0"},{"location":"architecture/sdkvm/sdkvm_architecture/#backup-and-restore","title":"Backup and Restore","text":""},{"location":"architecture/sdkvm/sdkvm_architecture/#hotkey-management","title":"Hotkey Management","text":"<ul> <li>Hot Key Manager</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_architecture/#authentication-of-user-login","title":"Authentication of User Login","text":"<p>In a SDKVM system managed by Boxilla a user login must be authenticated by Boxilla. The process described below only applies to a managed system.</p> <p></p> <p>From the above diagram,</p> <ul> <li>The OSD checks if it is in managed mode.<ul> <li>If the SDKVM is not manged the OSD uses the existing mechanism to verify a user against the credentials in user.json</li> <li>If the SDKVM is managed then the OSD will follow the Boxilla Authentication process outlined below:</li> </ul> </li> </ul>"},{"location":"architecture/sdkvm/sdkvm_architecture/#boxilla-authentication-process-for-managed-systems","title":"Boxilla Authentication Process for Managed Systems","text":"<p>For this process the OSD will use a utility called the STATS_CLI which is located at /usr/local/bin/stats_cli. This utility allows various commands to be sent to the Boxilla Management System which manages the SDKVM. If a user is successfully authenticated then the SDKVM sysytem will update the user details locally by writing/updating the file systems in the JSON files. The JSON files include users.json, connections.json, and workspaces JSON files in the user directory structure.</p>"},{"location":"architecture/sdkvm/sdkvm_architecture/#login-process-flow-for-managed-systems","title":"Login Process Flow for Managed Systems","text":"<ul> <li>The User enters the login credentials on the OSD login screen.</li> <li>The OSD will kill any existing instances of \"/usr/local/bin/stats_cli\". This is required because any existing instances could be as a result of previously failed login attempts/</li> </ul> <p><pre><code>killall /usr/local/bin/stats_cli \n</code></pre> - OSD then passes the user credentials (username and password) to the Boxilla management system using the STATS_CLI application program which is available in /usr/local/bin/stats_restapi_cli. </p> <pre><code>/usr/local/bin/stats_cli \u2013login username password\n</code></pre> <ul> <li>The OSD should then start a 30 second timer (this should be a configurable setting in /home/snuc/SDKVM/users/system_level_preferences/system_preference.json and should default to 30 seconds) so that it can timeout if no response is received from the Boxilla Management System within that period of time.</li> <li>The OSD will display a progress or busy indicator to indicate that the authentication process has started.</li> <li>The STATS_CLI program launched by the OSD will return an authentication message back to OSD through MQTT interface (see details below).</li> <li>If the authentication process ends in success then the OSD will:<ul> <li>Stop the 30 second timer.</li> <li>Disable the progress or busy indicator.</li> <li>Move to the OSD main screen.</li> <li>Write a syslog entry indicating that the defined user has successfully logged in.</li> <li>Update the system_level_preferences.json file with the logged in user and logged in user id.</li> </ul> </li> <li>If the authentication process ends in failure then the OSD will:<ul> <li>Stop the 30 second timer</li> <li>Disable the progress or busy indicator.</li> <li>Display an error message the user on the OSD. \"Authentication Failed. Please try again.\"</li> <li>Write a syslog entry indicating that the reason for the failure, the user name and any additional details returned in the MQTT message.</li> </ul> </li> <li>If the authentication process ends in failure due to a time out then the OSD will:<ul> <li>Disable the progress or busy indicator.</li> <li>Display an error message to the user on the OSD. \"Authentication Failed due to timeout. Please try again.\"</li> <li>Write a syslog entry indicating that the authentication failed due to a lack of response from Boxilla.</li> <li>Send an alert indicating that a login timeout has occurred: <pre><code> /usr/local/bin/stats_cli \u2013timeout username \n</code></pre></li> </ul> </li> </ul>"},{"location":"architecture/sdkvm/sdkvm_architecture/#mqtt-messages-required-for-authentication","title":"MQTT messages required for Authentication","text":"<p>The OSD should subscribe to the following MQTT endpoints:</p> <pre><code>MQTT Topic:  topic  blackbox/sdkvm/deskvue/status/osd_sdkvm/webservice/authentication \n</code></pre> <p>This endpoint will return a message indicating success or failure. The login_status provides the primary indication of success or failure.</p> <pre><code>{\"login_type\" : \"local\", \"login_status\" : \"success\", \"user_name\" : \" \", \"details\" : \"Boxilla return details\" }\n</code></pre> <pre><code>MQTT Topic:  topic  blackbox/sdkvm/deskvue/status/osd_sdkvm/webservice/error \n</code></pre> <p>This endpoint will provide error details for a malformed request to the stats_cli.</p> <pre><code>{\"error_details\" : \"unknown command\", \"command_requested\" : \"\" , \"parameters_passed\" : \"\"\n}\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_architecture/#logout-process-flow-for-managed-systems","title":"Logout Process Flow for Managed Systems","text":"<ul> <li>A user selects the logout option on the OSD.</li> <li>The OSD will send a logout notification to Boxilla using the STATS_CLI application program which is available in /usr/local/bin/stats_restapi_cli. </li> </ul> <pre><code>/usr/local/bin/stats_cli \u2013logout username\n</code></pre> <ul> <li>The OSD should then start a 30 second timer (this should be a configurable setting in /home/snuc/SDKVM/users/system_level_preferences/system_preference.json and should default to 30 seconds) so that it can timeout if no response is received from the Boxilla Management System within that period of time.</li> <li>The OSD will display a progress or busy indicator to indicate that the logout process has started.</li> <li>The STATS_CLI program launched by the OSD will return an authentication message back to OSD through MQTT interface.</li> <li>If the logout process ends in success then the OSD will:<ul> <li>Stop the 30 second timer.</li> <li>Disable the progress or busy indicator.</li> <li>Move to the OSD login screen.</li> <li>Write a syslog entry indicating that the defined user has successfully logged out.</li> </ul> </li> <li>If the logout process ends in failure then the OSD will:<ul> <li>Stop the 30 second timer</li> <li>Disable the progress or busy indicator.</li> <li>Display an error message the user on the OSD. \"Logout Failed. Please try again.\"</li> <li>Write a syslog entry indicating that the reason for the failure, the user name and any additional details returned in the MQTT message.</li> </ul> </li> <li>If the logout process ends in failure due to a time out then the OSD will:<ul> <li>Disable the progress or busy indicator.</li> <li>Display an error message to the user on the OSD. \"Logout Failed due to timeout. Please try again.\"</li> <li>Write a syslog entry indicating that the authentication failed due to a lack of response from Boxilla.</li> <li>Move to the OSD login screen. ( I assume we would not want the failure to communicate with Boxilla from preventing us from logging out.)</li> <li>Send an alert indicating that a login timeout has occurred: <pre><code>/usr/local/bin/stats_cli \u2013logout \u2013timeout username \n</code></pre></li> </ul> </li> </ul>"},{"location":"architecture/sdkvm/sdkvm_architecture/#mqtt-messages-required-for-logout","title":"MQTT messages required for Logout","text":"<p>The OSD should subscribe to the following MQTT endpoints:</p> <pre><code>MQTT Topic:  topic  blackbox/sdkvm/deskvue/status/osd_sdkvm/webservice/logout \n</code></pre> <p>This endpoint will return a message on success or failure. This message can be used as confirmation that the command was processed.</p> <pre><code>{\"logout\" : \"local\",  \"details\" : \"Boxilla return details\" }\n</code></pre> <p>This endpoint will provide error details for a malformed request to the stats_cli.</p> <pre><code>MQTT Topic:  topic  blackbox/sdkvm/deskvue/status/osd_sdkvm/webservice/error \n</code></pre> <pre><code>{\"error_details\" : \"unknown command\", \"command_requested\" : \"\" , \"parameters_passed\" : \"\"\n}\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_architecture/#role-of-the-stats_cli-in-the-login-and-logout-process","title":"Role of the stats_cli in the Login and Logout Process","text":"<ol> <li>The Loginwindow will call stats_cli once user enters the username and password.</li> <li>The OSD starts a timer and waits for a response from the stats_cli. This response will be in the form of an mqtt message.</li> <li>The stats cli will call the \"User Login Restapi\" to authenticate the user. It will also receive an updated user json database  from Boxilla for the requested user if the authentication process is successful.</li> <li>The Stats Cli will update the users, connection and workspaces json files in sdkvm directoy structure if an update is required using the data received from Boxilla and also update the requested username and user id in system_level_settings.json on user login success</li> <li>The Stats Cli calls OSD Manual Login Alert REST API based on the user login status(success/failed).</li> <li>The Stats Cli calls Auth Stats Restapi when the Boxilla is offline or based on the user login status(success/failed).</li> <li>The Stats Cli calls KVM user login status restapi to send user login status to the Boxilla after user authentication is done.</li> <li>The stats Cli send an mqtt message with the authentication status to the OSD.</li> <li>Timer sends the timeout message to Loginwindow if it doesn\u2019t receives any message from the Stats Cli within the time period.</li> <li>OSD will call Stats Cli along with the arguments \u201ctimeout\u201d and \u201cusername\u201d.</li> <li>Stats Cli will call OSD Manual Login alert REST API for Timeout.</li> </ol>"},{"location":"architecture/sdkvm/sdkvm_architecture/#user-login-and-logout-on-the-sdkvm","title":"User Login and Logout on the SDKVM","text":"<ul> <li>User Login and Logout OSD View</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_architecture/#software-upgrade","title":"Software Upgrade","text":"<ul> <li>Software Upgrade</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_architecture/#audio-management-framework","title":"Audio Management Framework","text":"<ul> <li>SDKVM Audio Architecture</li> <li>SDKVM Audio Framework</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_architecture/#video-monitor-management-framework","title":"Video Monitor Management Framework","text":"<ul> <li>SDKVM Monitor Management Framework</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_architecture/#sdkvm-clients","title":"SDKVM Clients","text":"<ul> <li>SDKVM Client Utilities Specification</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_architecture/#workspace-server","title":"Workspace Server","text":""},{"location":"architecture/sdkvm/sdkvm_architecture/#osd","title":"OSD","text":"<ul> <li>OSD Specification for 1.0.0</li> <li>OSD Specification for 1.1.0</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_architecture/#discovery","title":"Discovery","text":""},{"location":"architecture/sdkvm/sdkvm_architecture/#discovery-process-flow","title":"Discovery Process Flow","text":"<p>When appliances are shipped they are configured with a default IP address. The discovery process allows a Boxilla to discover the device without knowing its actual IP address. Once discovered the user has the option of setting the IP of the unit by using the discovery protocol.</p> <p></p> <ol> <li> <p>When, in the Idle state, an appliance receives a discover request, the discovery appliance state machine captures Boxilla's MAC Address and IP Address from the discovery pdu and stores these values in the appliance datastore It then sets the default route for eth0 to 0.0.0.0, generates a discover response message and transitions to the Discovered state.</p> </li> <li> <p>Once Boxill has received the discovery resonse it will list it in its table of devices and provide an option for the user to set the IP address of the unit. If the user choses to set the IP address then a Set_IP protocol message is sent to configure the appliance or SDKVMs network settings e.g. IP Address, Netmask and Gateway. The Set_IP protocol message is only processed when the discover state machine is in the Discovered state. Following receipt of the Set_IP protocol message the discovery appliance binary updates the local network configuration and transitions to the Configuring state.</p> </li> <li> <p>Once the network settings have been successfully applied, the discovery appliance generates a Set_IP response message with the status set to Success. It then transitions to the Configured state.</p> </li> <li> <p>If the discovery appliance binary was unable to apply the network settings, the binary generates a Set_IP response message with the status set to Failed. It then reverts to the Discovered state.</p> </li> <li> <p>The discovery protocol does not generate explicit Manage protocol messages to transition appliances into the Managed state; this transition occurs as a result of the Audit request received from Boxilla. Appliances transition from the Discovered state to the Managed state following receipt of the first Audit request.</p> </li> <li> <p>Appliances may also become unmanaged, on the appliance this is achieved via the SSH interface whereby the unit is restored to factory defaults. This causes all discovery persistent data to be removed, forcing the unit to revert to the Idle state. On the SDKVM the system is unmanaged through the REST API.</p> </li> </ol> <p>Note: On the SDKVM the webservice runs on bootup. This differs from the appliance where it only runs if the system is managed.</p>"},{"location":"architecture/sdkvm/sdkvm_architecture/#starting-discovery-on-the-sdkvm","title":"Starting discovery on the SDKVM","text":"<ul> <li>The discovery binary exists in /usr/local/bin</li> <li>The discovery service is managed by a systemd user service</li> <li>The service is managed and started by /usr/bin/startdiscovery.sh</li> <li>The configuration service file for restart_discovery exists in ~/.config/systemd/user/discovery.service.</li> <li>To enable discovery as a service we use: systemctl --user enable discovery</li> <li>On boot up the discovery service is started in the autostart.sh script in ~/.config/openbox. This script is called by the window manager.</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_architecture/#reference","title":"Reference","text":"<ul> <li>Technical note explaining how discovery works on the SDKVM</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_architecture/#rest-api","title":"Rest API","text":""},{"location":"architecture/sdkvm/sdkvm_architecture/#sdkvm-alerts","title":"SDKVM Alerts","text":"Alert Source Details Auto_Login Generated when system auto logs in the selected user. Sends user name as part of the alert Manual_Login sent from the OSD via stats_cli Sent on success and failure with user name when a user logs in Post_connect_login Sends user name Force_login Sent on success and failure with user name Manual_logout sent from the OSD via stats_cli Sends user name Gui_timeout_logout sends the name of the current user Force_logout Sent on success and failure with user name Reboot Appears not to be used Upgrade Appears not to be used Start Sent on new connection, includes logged in user's name disconnect Sent on connection disconnection, includes client hostname rdp connection Appears not to be used Ethernet link Sent under certain error conditions and when link status changes <p>Currently working alerts on 1.2.0 SDKVM is Manual_logout, Manual_login, Ethernet link</p>"},{"location":"architecture/sdkvm/sdkvm_architecture/#data-modelling","title":"Data Modelling","text":"<ul> <li>Data Model</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_architecture/#modes-of-operation","title":"Modes of Operation","text":""},{"location":"architecture/sdkvm/sdkvm_architecture/#managed-and-unmanaged-mode","title":"Managed and Unmanaged Mode","text":"<p>The SDKVM system can operate in either managed or unmanaged mode. In managed mode the configuration (management) of the system is controlled by our Boxilla management platform. Boxilla is responsible for creating users, administering permissions, provisioning connections and creating workspaces.</p> <p>When a SDKVM is managed then the options to locally create Users and Connections and to configure device settings are disabled. All modifications must be done on Boxilla and downloaded to the SDKVM system. </p> <p>In unmanaged mode a user with administrative access can create connections and assign them to workspaces. A user with administrative access should be able to allocate connections and workspaces to regular (local) users.</p>"},{"location":"architecture/sdkvm/sdkvm_architecture/#managing-a-sdkvm","title":"Managing a SDKVM","text":"<p>A SDKVM becomes managed through the process of discovery and management by Boxilla. When Boxilla has managed a SDKVM a two files will appear in:</p> <p><pre><code>    /home/snuc/SDKVM/boxilla\n</code></pre> These files are as follows:</p> <ul> <li>The discovery file: /home/snuc/SDKVM/boxilla/discovery</li> </ul> <p><pre><code>MGR=0:8c:10:1c:c6:d4\nSTATE=Discovered\nDEBUG=OFF\n</code></pre> and the Boxilla Manager IP file: /home/snuc/SDKVM/boxilla/mgr_ip</p> <p><pre><code>MGR_IP=10.211.129.3\n</code></pre> The OSD should use the presence of these files to determine if it is operating in managed or unmanaged mode. It should read the Boxilla mac address from the discovery file and use this as the Boxilla ID. The OSD should indicate clearly if the system is operating in managed or unmanaged mode. </p> <p>Boxilla can choose to unmanage a device. In the process on unmanaging a device it will remove the users.json, discovery and mgr_ip files and also remove any existing user data structure and associated workspaces.</p> <p>If having been previously managed the OSD detects that these files and directories have been removed it should create a new empty users directory and a new users.json file.</p>"},{"location":"architecture/sdkvm/sdkvm_architecture/#transmitter-settings","title":"Transmitter Settings","text":"<p>Transmitter Settings</p>"},{"location":"architecture/sdkvm/sdkvm_audio_management/","title":"Audio Management for SDKVM 1.0.0.0","text":""},{"location":"architecture/sdkvm/sdkvm_audio_management/#system-level-perspective","title":"System Level Perspective","text":""},{"location":"architecture/sdkvm/sdkvm_audio_management/#4k-interoperability","title":"4K Interoperability","text":""},{"location":"architecture/sdkvm/sdkvm_audio_management/#2k-interoperability","title":"2K Interoperability","text":""},{"location":"architecture/sdkvm/sdkvm_audio_management/#overview","title":"Overview","text":"<p>In PulseAudio, the following terms have specific meanings:</p> <ul> <li>Card: A sound card represents a physical or virtual audio device, such as a USB audio interface or an onboard audio device on a computer's motherboard. Each card can have one or more sinks and/or sources associated with it.</li> <li>Sink: A sink represents an audio output device, such as speakers or headphones, that audio can be sent to. Each sink can have one or more associated ports, which are the physical connectors on the audio device.</li> <li>Source: A source represents an audio input device, such as a microphone or line-in port, that audio can be recorded from. Each source can have one or more associated ports, which are the physical connectors on the audio device.</li> <li>Profile: A profile defines a set of audio parameters for a sink or source. For example, a sink profile might specify that audio should be output in stereo with a certain sample rate and bit depth. Each sink or source can have one or more associated profiles.</li> <li>Port: A port represents a physical connector on an audio device, such as a headphone jack or line-in port. Each port can have one or more associated profiles, which define the audio parameters that are supported by that port.</li> </ul> <p>It is important to realise that a system may have multiple ports and profiles for a given sink. A HDMI sink, for example, may have a profile for each HDMI monitor connected to the system. We can view all of the sinks, profiles and ports on a system by running the command:</p> <pre><code>pactl list\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_audio_management/#the-difference-between-a-sink-and-a-card","title":"The difference between a Sink and a Card","text":"<p>A sink represents a virtual audio endpoint that can be used for audio playback, whereas a card represents a physical audio device or hardware that may contain one or more sinks, sources, or other audio-related elements.</p> <p>A card can be thought of as a high-level representation of an audio device, such as a sound card, that has a set of audio-related capabilities, such as input and output. A sink, on the other hand, represents a logical endpoint for audio playback, and can be thought of as a stream of audio data that is sent to a particular audio output device.</p> <p>In other words, a card is a physical device or audio interface that can be used for audio input or output, while a sink is a virtual audio endpoint that can be used for audio playback. A card can have multiple sinks, each representing a different output or audio stream.</p>"},{"location":"architecture/sdkvm/sdkvm_audio_management/#the-difference-between-a-profile-and-a-port","title":"The difference between a Profile and a Port","text":"<p>In PulseAudio, a profile describes the capabilities of a specific device, such as a sound card or HDMI output. A profile specifies a set of properties that determine how the device can be used, such as the number of channels, supported sample rates, and other characteristics.</p> <p>A port, on the other hand, is a physical connection on the device that can be used to send or receive audio data. For example, a sound card might have a port for headphones and another for speakers.</p> <p>In PulseAudio, a profile can be associated with one or more ports on a device. This allows a single device to support multiple usage scenarios depending on how it is connected. For example, a sound card might have a \"stereo\" profile that is associated with its speaker port, and a \"headphones\" profile that is associated with its headphone port. When a profile is selected, the associated port or ports are used to send or receive audio data according to the properties specified in the profile.</p> <p>So the primary relationship of a profile is with ports, and indirectly with sinks that are associated with those ports.</p>"},{"location":"architecture/sdkvm/sdkvm_audio_management/#how-this-applies-to-the-sdkvm","title":"How this applies to the SDKVM","text":"<p>On the DeskVUW (SDKVM) there are two cards by default.</p> <ul> <li>Audio Adapter Unitek Y-247A - [The Analog Card] - alsa_card.usb-C-Media_Electronics_Inc</li> <li>Built in Audio (HDMI) - [Controller Card for HDMI] -  alsa_card.pci-0000_00_1f.3</li> </ul> <p>If we plug in a USB headset we add a third</p> <ul> <li>Audio Controller - [A USB Headset Card] - ]alsa_card.usb-0c76_USB_Headphone_Set-00</li> </ul> <p>Associated with these cards are 3 sinks. A sink is identified by an index number, but sink indexes change and should be considered ephemeral.</p> <ul> <li>usb-C-Media_Electronics_Inc [for analog output]</li> <li>pci-0000_00_1f [for hdmi output]</li> <li>usb-0c76_USB_Headphone_Set-00 [for USB output]</li> </ul> <p>Note: Sink Indexes change and should be considered ephemeral.</p> <p>Additionally associated with these cards are 6 sources.  A source is identified by an index number, but source indexes change and should be considered ephemeral.</p> <ul> <li>usb-C-Media_Electronics_Inc [for analog input]</li> <li>usb-C-Media_Electronics_Inc [for analog input]</li> <li>pci-0000_00_1f [for hdmi input]</li> <li>usb-0c76_USB_Headphone_Set-00 [for USB input]</li> <li>usb-0c76_USB_Headphone_Set-00 [for USB input]</li> </ul> <p>Note: Source Indexes change and should be considered ephemeral.</p> <p>Associated with these Sources are a number of Ports.</p> <p></p>"},{"location":"architecture/sdkvm/sdkvm_audio_management/#configuration","title":"Configuration","text":"<p>A pulseaudio system has one default sink. This is the sync that audio applications will default to if they are not explicitly configured for a specific audio card or port. We can set the default sink with:</p> <p><pre><code>pactl set-default-sink alsa_output.usb-C-Media_Electronics_Inc._USB_Audio_Device-00.analog-stereo\n</code></pre> In this instance alsa_output.usb-C-Media_Electronics_Inc._USB_Audio_Device-00.analog-stereo is the sink associated with the 3.5mm jack on the SDKVM.</p> <p>To make the HDMI outputs the default sink we would use:</p> <pre><code>pactl set-default-sink  alsa_output.pci-0000_00_1f.3.hdmi-stereo\n</code></pre> <p>After we change the default sink any applications not specifically confiured for a specific sink or card will default to this sync. This means  that after changing the default sink we must restart applications.</p> <p>As indicated earlier. A sink may have multiple ports. In order to enable a specific port we must set its profile:</p> <pre><code># Set the profile for the analog output port\npactl set-card-profile alsa_card.usb-C-Media_Electronics_Inc._USB_Audio_Device-00 output:analog-stereo\n</code></pre> <p>This is particularily relevant for the HDMI ports as we use the profile to select specific options:</p> <pre><code># set the profile for the first HDMI-0 monitor\npactl set-card-profile alsa_card.pci-0000_00_1f.3 output:hdmi-stereo\n\n# or, set the profile for the HDMI-4 monitor\npactl set-card-profile alsa_card.pci-0000_00_1f.3 output:hdmi-stereo-extra3\n</code></pre> <p>To determine the list of ports and profiles associated with a sink we can use the command:</p> <p><pre><code>pactl --format=json list\n</code></pre> This will format the output as a json structure</p> <pre><code>[{\"index\":0,\"state\":\"IDLE\",\"name\":\"alsa_output.usb-C-Media_Electronics_Inc._USB_Audio_Device-00.analog-stereo\",\"description\":\"Audio Adapter (Unitek Y-247A) Analog Stereo\",\"driver\":\"module-alsa-card.c\",\"sample_specification\":\"s16le 2ch 44100Hz\",\"channel_map\":\"front-left,front-right\",\"owner_module\":7,\"mute\":false,\"volume\":{\"front-left\":{\"value\":39321,\"value_percent\":\"60%\",\"db\":\"-13.31 dB\"},\"front-right\":{\"value\":39321,\"value_percent\":\"60%\",\"db\":\"-13.31 dB\"}},\"balance\":0.00,\"base_volume\":{\"value\":65536,\"value_percent\":\"100%\",\"db\":\"0.00 dB\"},\"monitor_source\":\"alsa_output.usb-C-Media_Electronics_Inc._USB_Audio_Device-00.analog-stereo.monitor\",\"latency\":{\"actual\":53336.00,\"configured\":40000.00},\"flags\":[\"HARDWARE\",\"HW_MUTE_CTRL\",\"HW_VOLUME_CTRL\",\"DECIBEL_VOLUME\",\"LATENCY\"],\"properties\":{\"alsa.resolution_bits\":\"16\",\"device.api\":\"alsa\",\"device.class\":\"sound\",\"alsa.class\":\"generic\",\"alsa.subclass\":\"generic-mix\",\"alsa.name\":\"USB Audio\",\"alsa.id\":\"USB Audio\",\"alsa.subdevice\":\"0\",\"alsa.subdevice_name\":\"subdevice #0\",\"alsa.device\":\"0\",\"alsa.card\":\"1\",\"alsa.card_name\":\"USB Audio Device\",\"alsa.long_card_name\":\"C-Media Electronics Inc. USB Audio Device at usb-0000:00:14.0-2, full speed\",\"alsa.driver_name\":\"snd_usb_audio\",\"device.bus_path\":\"pci-0000:00:14.0-usb-0:2:1.0\",\"sysfs.path\":\"/devices/pci0000:00/0000:00:14.0/usb3/3-2/3-2:1.0/sound/card1\",\"udev.id\":\"usb-C-Media_Electronics_Inc._USB_Audio_Device-00\",\"device.bus\":\"usb\",\"device.vendor.id\":\"0d8c\",\"device.vendor.name\":\"C-Media Electronics, Inc.\",\"device.product.id\":\"0014\",\"device.product.name\":\"Audio Adapter (Unitek Y-247A)\",\"device.serial\":\"C-Media_Electronics_Inc._USB_Audio_Device\",\"device.string\":\"front:1\",\"device.buffering.buffer_size\":\"352800\",\"device.buffering.fragment_size\":\"176400\",\"device.access_mode\":\"mmap+timer\",\"device.profile.name\":\"analog-stereo\",\"device.profile.description\":\"Analog Stereo\",\"device.description\":\"Audio Adapter (Unitek Y-247A) Analog Stereo\",\"module-udev-detect.discovered\":\"1\",\"device.icon_name\":\"audio-card-usb\"},\"ports\":[{\"name\":\"analog-output\",\"description\":\"Analog Output\",\"type\":\"Analog\",\"priority\":9900,\"availability_group\":\"\",\"availability\":\"availability unknown\"}],\"active_port\":\"analog-output\",\"formats\":[\"pcm\"]},{\"index\":13,\"state\":\"IDLE\",\"name\":\"alsa_output.pci-0000_00_1f.3.hdmi-stereo\",\"description\":\"Built-in Audio Digital Stereo (HDMI)\",\"driver\":\"module-alsa-card.c\",\"sample_specification\":\"s16le 2ch 44100Hz\",\"channel_map\":\"front-left,front-right\",\"owner_module\":8,\"mute\":false,\"volume\":{\"front-left\":{\"value\":85864,\"value_percent\":\"131%\",\"db\":\"7.04 dB\"},\"front-right\":{\"value\":85864,\"value_percent\":\"131%\",\"db\":\"7.04 dB\"}},\"balance\":0.00,\"base_volume\":{\"value\":65536,\"value_percent\":\"100%\",\"db\":\"0.00 dB\"},\"monitor_source\":\"alsa_output.pci-0000_00_1f.3.hdmi-stereo.monitor\",\"latency\":{\"actual\":40528.00,\"configured\":40000.00},\"flags\":[\"HARDWARE\",\"DECIBEL_VOLUME\",\"LATENCY\",\"SET_FORMATS\"],\"properties\":{\"alsa.resolution_bits\":\"16\",\"device.api\":\"alsa\",\"device.class\":\"sound\",\"alsa.class\":\"generic\",\"alsa.subclass\":\"generic-mix\",\"alsa.name\":\"HDMI 0\",\"alsa.id\":\"HDMI 0\",\"alsa.subdevice\":\"0\",\"alsa.subdevice_name\":\"subdevice #0\",\"alsa.device\":\"3\",\"alsa.card\":\"0\",\"alsa.card_name\":\"HDA Intel PCH\",\"alsa.long_card_name\":\"HDA Intel PCH at 0x601d160000 irq 172\",\"alsa.driver_name\":\"snd_hda_intel\",\"device.bus_path\":\"pci-0000:00:1f.3\",\"sysfs.path\":\"/devices/pci0000:00/0000:00:1f.3/sound/card0\",\"device.bus\":\"pci\",\"device.vendor.id\":\"8086\",\"device.vendor.name\":\"Intel Corporation\",\"device.product.id\":\"a0c8\",\"device.product.name\":\"Tiger Lake-LP Smart Sound Technology Audio Controller\",\"device.form_factor\":\"internal\",\"device.string\":\"hdmi:0\",\"device.buffering.buffer_size\":\"352800\",\"device.buffering.fragment_size\":\"176400\",\"device.access_mode\":\"mmap+timer\",\"device.profile.name\":\"hdmi-stereo\",\"device.profile.description\":\"Digital Stereo (HDMI)\",\"device.description\":\"Built-in Audio Digital Stereo (HDMI)\",\"module-udev-detect.discovered\":\"1\",\"device.icon_name\":\"audio-card-pci\"},\"ports\":[{\"name\":\"hdmi-output-0\",\"description\":\"HDMI / DisplayPort\",\"type\":\"HDMI\",\"priority\":5900,\"availability_group\":\"\",\"availability\":\"available\"}],\"active_port\":\"hdmi-output-0\",\"formats\":[\"pcm\"]}]\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_audio_management/#set-default-sink","title":"Set default Sink","text":"<pre><code># for the Analog Interface\npactl set-default-sink alsa_output.usb-C-Media_Electronics_Inc._USB_Audio_Device-00.analog-stereo\n\n# or for the HDMI outputs\npactl set-default-sink alsa_output.pci-0000_00_1f.3.hdmi-stereo\n\npactl set-default-sink alsa_output.pci-0000_00_1f.3.hdmi-stereo-extra3\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_audio_management/#osd-requirement","title":"OSD Requirement","text":"<ol> <li>The OSD should determine the available sinks on the system</li> <li>It should present these sinks as the principle options that a user selects and then when the user selects one of these an additional drop down should provide a list of available profiles for that sink.</li> <li>The OSD should then set the selected sink as the default sink and apply the selected profile the user has selected.</li> </ol> <p>All of the required information can be found using the commands I have provided above. Below are some sample outputs from the SDKVM system with two configured audio interfaces. An analog port and a two HDMI monitors with audio support.</p>"},{"location":"architecture/sdkvm/sdkvm_audio_management/#audio-interfaces-on-deskvue","title":"Audio Interfaces On Deskvue","text":""},{"location":"architecture/sdkvm/sdkvm_audio_management/#4k-interoperability_1","title":"4K Interoperability","text":""},{"location":"architecture/sdkvm/sdkvm_audio_management/#2k-interoperability_1","title":"2K Interoperability","text":""},{"location":"architecture/sdkvm/sdkvm_audio_management/#using-pactl-directly-to-manage-audio-settings","title":"Using pactl directly to manage audio settings","text":""},{"location":"architecture/sdkvm/sdkvm_audio_management/#listing-available-ports","title":"Listing Available Ports","text":"<pre><code>pactl list cards\n</code></pre> <pre><code>Sink #0\n        State: SUSPENDED\n        Name: alsa_output.usb-C-Media_Electronics_Inc._USB_Audio_Device-00.analog-stereo\n        Description: Audio Adapter (Unitek Y-247A) Analog Stereo\n        Driver: module-alsa-card.c\n        Sample Specification: s16le 2ch 48000Hz\n        Channel Map: front-left,front-right\n        Owner Module: 7\n        Mute: no\n        Volume: front-left: 81899 / 125% / 5.81 dB,   front-right: 81899 / 125% / 5.81 dB\n                balance 0.00\n        Base Volume: 65536 / 100% / 0.00 dB\n        Monitor Source: alsa_output.usb-C-Media_Electronics_Inc._USB_Audio_Device-00.analog-stereo.monitor\n        Latency: 0 usec, configured 0 usec\n        Flags: HARDWARE HW_MUTE_CTRL HW_VOLUME_CTRL DECIBEL_VOLUME LATENCY\n        Properties:\n                alsa.resolution_bits = \"16\"\n                device.api = \"alsa\"\n                device.class = \"sound\"\n                alsa.class = \"generic\"\n                alsa.subclass = \"generic-mix\"\n                alsa.name = \"USB Audio\"\n                alsa.id = \"USB Audio\"\n                alsa.subdevice = \"0\"\n                alsa.subdevice_name = \"subdevice #0\"\n                alsa.device = \"0\"\n                alsa.card = \"1\"\n                alsa.card_name = \"USB Audio Device\"\n                alsa.long_card_name = \"C-Media Electronics Inc. USB Audio Device at usb-0000:00:14.0-2, full speed\"\n                alsa.driver_name = \"snd_usb_audio\"\n                device.bus_path = \"pci-0000:00:14.0-usb-0:2:1.0\"\n                sysfs.path = \"/devices/pci0000:00/0000:00:14.0/usb3/3-2/3-2:1.0/sound/card1\"\n                udev.id = \"usb-C-Media_Electronics_Inc._USB_Audio_Device-00\"\n                device.bus = \"usb\"\n                device.vendor.id = \"0d8c\"\n                device.vendor.name = \"C-Media Electronics, Inc.\"\n                device.product.id = \"0014\"\n                device.product.name = \"Audio Adapter (Unitek Y-247A)\"\n                device.serial = \"C-Media_Electronics_Inc._USB_Audio_Device\"\n                device.string = \"front:1\"\n                device.buffering.buffer_size = \"352800\"\n                device.buffering.fragment_size = \"176400\"\n                device.access_mode = \"mmap+timer\"\n                device.profile.name = \"analog-stereo\"\n                device.profile.description = \"Analog Stereo\"\n                device.description = \"Audio Adapter (Unitek Y-247A) Analog Stereo\"\n                module-udev-detect.discovered = \"1\"\n                device.icon_name = \"audio-card-usb\"\n        Ports:\n                analog-output: Analog Output (type: Analog, priority: 9900, availability unknown)\n        Active Port: analog-output\n        Formats:\n                pcm\n\nSink #4\n        State: SUSPENDED\n        Name: alsa_output.pci-0000_00_1f.3.hdmi-stereo\n        Description: Built-in Audio Digital Stereo (HDMI)\n        Driver: module-alsa-card.c\n        Sample Specification: s16le 2ch 44100Hz\n        Channel Map: front-left,front-right\n        Owner Module: 8\n        Mute: no\n        Volume: front-left: 49151 /  75% / -7.50 dB,   front-right: 49151 /  75% / -7.50 dB\n                balance 0.00\n        Base Volume: 65536 / 100% / 0.00 dB\n        Monitor Source: alsa_output.pci-0000_00_1f.3.hdmi-stereo.monitor\n        Latency: 0 usec, configured 0 usec\n        Flags: HARDWARE DECIBEL_VOLUME LATENCY SET_FORMATS\n        Properties:\n                alsa.resolution_bits = \"16\"\n                device.api = \"alsa\"\n                device.class = \"sound\"\n                alsa.class = \"generic\"\n                alsa.subclass = \"generic-mix\"\n                alsa.name = \"HDMI 0\"\n                alsa.id = \"HDMI 0\"\n                alsa.subdevice = \"0\"\n                alsa.subdevice_name = \"subdevice #0\"\n                alsa.device = \"3\"\n                alsa.card = \"0\"\n                alsa.card_name = \"HDA Intel PCH\"\n                alsa.long_card_name = \"HDA Intel PCH at 0x601d160000 irq 172\"\n                alsa.driver_name = \"snd_hda_intel\"\n                device.bus_path = \"pci-0000:00:1f.3\"\n                sysfs.path = \"/devices/pci0000:00/0000:00:1f.3/sound/card0\"\n                device.bus = \"pci\"\n                device.vendor.id = \"8086\"\n                device.vendor.name = \"Intel Corporation\"\n                device.product.id = \"a0c8\"\n                device.product.name = \"Tiger Lake-LP Smart Sound Technology Audio Controller\"\n                device.form_factor = \"internal\"\n                device.string = \"hdmi:0\"\n                device.buffering.buffer_size = \"352800\"\n                device.buffering.fragment_size = \"176400\"\n                device.access_mode = \"mmap+timer\"\n                device.profile.name = \"hdmi-stereo\"\n                device.profile.description = \"Digital Stereo (HDMI)\"\n                device.description = \"Built-in Audio Digital Stereo (HDMI)\"\n                module-udev-detect.discovered = \"1\"\n                device.icon_name = \"audio-card-pci\"\n        Ports:\n                hdmi-output-0: HDMI / DisplayPort (type: HDMI, priority: 5900, available)\n        Active Port: hdmi-output-0\n        Formats:\n                pcm\n\nSink #5\n        State: SUSPENDED\n        Name: alsa_output.usb-0c76_USB_Headphone_Set-00.analog-stereo\n        Description: audio controller Analog Stereo\n        Driver: module-alsa-card.c\n        Sample Specification: s16le 2ch 48000Hz\n        Channel Map: front-left,front-right\n        Owner Module: 26\n        Mute: no\n        Volume: front-left: 18971 /  29%,   front-right: 18971 /  29%\n                balance 0.00\n        Base Volume: 65536 / 100%\n        Monitor Source: alsa_output.usb-0c76_USB_Headphone_Set-00.analog-stereo.monitor\n        Latency: 0 usec, configured 0 usec\n        Flags: HARDWARE HW_MUTE_CTRL HW_VOLUME_CTRL LATENCY\n        Properties:\n                alsa.resolution_bits = \"16\"\n                device.api = \"alsa\"\n                device.class = \"sound\"\n                alsa.class = \"generic\"\n                alsa.subclass = \"generic-mix\"\n                alsa.name = \"USB Audio\"\n                alsa.id = \"USB Audio\"\n                alsa.subdevice = \"0\"\n                alsa.subdevice_name = \"subdevice #0\"\n                alsa.device = \"0\"\n                alsa.card = \"2\"\n                alsa.card_name = \"USB Headphone Set\"\n                alsa.long_card_name = \"USB Headphone Set at usb-0000:00:14.0-8, full speed\"\n                alsa.driver_name = \"snd_usb_audio\"\n                device.bus_path = \"pci-0000:00:14.0-usb-0:8:1.0\"\n                sysfs.path = \"/devices/pci0000:00/0000:00:14.0/usb3/3-8/3-8:1.0/sound/card2\"\n                udev.id = \"usb-0c76_USB_Headphone_Set-00\"\n                device.bus = \"usb\"\n                device.vendor.id = \"0c76\"\n                device.vendor.name = \"JMTek, LLC.\"\n                device.product.id = \"1607\"\n                device.product.name = \"audio controller\"\n                device.serial = \"0c76_USB_Headphone_Set\"\n                device.form_factor = \"headphone\"\n                device.string = \"front:2\"\n                device.buffering.buffer_size = \"384000\"\n                device.buffering.fragment_size = \"192000\"\n                device.access_mode = \"mmap+timer\"\n                device.profile.name = \"analog-stereo\"\n                device.profile.description = \"Analog Stereo\"\n                device.description = \"audio controller Analog Stereo\"\n                module-udev-detect.discovered = \"1\"\n                device.icon_name = \"audio-headphones-usb\"\n        Ports:\n                analog-output: Analog Output (type: Analog, priority: 9900, availability unknown)\n        Active Port: analog-output\n        Formats:\n                pcm\n\nSource #0\n        State: SUSPENDED\n        Name: alsa_output.usb-C-Media_Electronics_Inc._USB_Audio_Device-00.analog-stereo.monitor\n        Description: Monitor of Audio Adapter (Unitek Y-247A) Analog Stereo\n        Driver: module-alsa-card.c\n        Sample Specification: s16le 2ch 48000Hz\n        Channel Map: front-left,front-right\n        Owner Module: 7\n        Mute: no\n        Volume: front-left: 65536 / 100% / 0.00 dB,   front-right: 65536 / 100% / 0.00 dB\n                balance 0.00\n        Base Volume: 65536 / 100% / 0.00 dB\n        Monitor of Sink: alsa_output.usb-C-Media_Electronics_Inc._USB_Audio_Device-00.analog-stereo\n        Latency: 0 usec, configured 0 usec\n        Flags: DECIBEL_VOLUME LATENCY\n        Properties:\n                device.description = \"Monitor of Audio Adapter (Unitek Y-247A) Analog Stereo\"\n                device.class = \"monitor\"\n                alsa.card = \"1\"\n                alsa.card_name = \"USB Audio Device\"\n                alsa.long_card_name = \"C-Media Electronics Inc. USB Audio Device at usb-0000:00:14.0-2, full speed\"\n                alsa.driver_name = \"snd_usb_audio\"\n                device.bus_path = \"pci-0000:00:14.0-usb-0:2:1.0\"\n                sysfs.path = \"/devices/pci0000:00/0000:00:14.0/usb3/3-2/3-2:1.0/sound/card1\"\n                udev.id = \"usb-C-Media_Electronics_Inc._USB_Audio_Device-00\"\n                device.bus = \"usb\"\n                device.vendor.id = \"0d8c\"\n                device.vendor.name = \"C-Media Electronics, Inc.\"\n                device.product.id = \"0014\"\n                device.product.name = \"Audio Adapter (Unitek Y-247A)\"\n                device.serial = \"C-Media_Electronics_Inc._USB_Audio_Device\"\n                device.string = \"1\"\n                module-udev-detect.discovered = \"1\"\n                device.icon_name = \"audio-card-usb\"\n        Formats:\n                pcm\n\nSource #1\n        State: SUSPENDED\n        Name: alsa_input.usb-C-Media_Electronics_Inc._USB_Audio_Device-00.mono-fallback\n        Description: Audio Adapter (Unitek Y-247A) Mono\n        Driver: module-alsa-card.c\n        Sample Specification: s16le 1ch 48000Hz\n        Channel Map: mono\n        Owner Module: 7\n        Mute: no\n        Volume: mono: 39074 /  60% / -13.48 dB\n                balance 0.00\n        Base Volume: 27111 /  41% / -23.00 dB\n        Monitor of Sink: n/a\n        Latency: 0 usec, configured 0 usec\n        Flags: HARDWARE HW_MUTE_CTRL HW_VOLUME_CTRL DECIBEL_VOLUME LATENCY\n        Properties:\n                alsa.resolution_bits = \"16\"\n                device.api = \"alsa\"\n                device.class = \"sound\"\n                alsa.class = \"generic\"\n                alsa.subclass = \"generic-mix\"\n                alsa.name = \"USB Audio\"\n                alsa.id = \"USB Audio\"\n                alsa.subdevice = \"0\"\n                alsa.subdevice_name = \"subdevice #0\"\n                alsa.device = \"0\"\n                alsa.card = \"1\"\n                alsa.card_name = \"USB Audio Device\"\n                alsa.long_card_name = \"C-Media Electronics Inc. USB Audio Device at usb-0000:00:14.0-2, full speed\"\n                alsa.driver_name = \"snd_usb_audio\"\n                device.bus_path = \"pci-0000:00:14.0-usb-0:2:1.0\"\n                sysfs.path = \"/devices/pci0000:00/0000:00:14.0/usb3/3-2/3-2:1.0/sound/card1\"\n                udev.id = \"usb-C-Media_Electronics_Inc._USB_Audio_Device-00\"\n                device.bus = \"usb\"\n                device.vendor.id = \"0d8c\"\n                device.vendor.name = \"C-Media Electronics, Inc.\"\n                device.product.id = \"0014\"\n                device.product.name = \"Audio Adapter (Unitek Y-247A)\"\n                device.serial = \"C-Media_Electronics_Inc._USB_Audio_Device\"\n                device.string = \"hw:1\"\n                device.buffering.buffer_size = \"176400\"\n                device.buffering.fragment_size = \"88200\"\n                device.access_mode = \"mmap+timer\"\n                device.profile.name = \"mono-fallback\"\n                device.profile.description = \"Mono\"\n                device.description = \"Audio Adapter (Unitek Y-247A) Mono\"\n                module-udev-detect.discovered = \"1\"\n                device.icon_name = \"audio-card-usb\"\n        Ports:\n                analog-input-mic: Microphone (type: Mic, priority: 8700, availability unknown)\n        Active Port: analog-input-mic\n        Formats:\n                pcm\n\nSource #6\n        State: SUSPENDED\n        Name: alsa_output.pci-0000_00_1f.3.hdmi-stereo.monitor\n        Description: Monitor of Built-in Audio Digital Stereo (HDMI)\n        Driver: module-alsa-card.c\n        Sample Specification: s16le 2ch 44100Hz\n        Channel Map: front-left,front-right\n        Owner Module: 8\n        Mute: no\n        Volume: front-left: 65536 / 100% / 0.00 dB,   front-right: 65536 / 100% / 0.00 dB\n                balance 0.00\n        Base Volume: 65536 / 100% / 0.00 dB\n        Monitor of Sink: alsa_output.pci-0000_00_1f.3.hdmi-stereo\n        Latency: 0 usec, configured 0 usec\n        Flags: DECIBEL_VOLUME LATENCY\n        Properties:\n                device.description = \"Monitor of Built-in Audio Digital Stereo (HDMI)\"\n                device.class = \"monitor\"\n                alsa.card = \"0\"\n                alsa.card_name = \"HDA Intel PCH\"\n                alsa.long_card_name = \"HDA Intel PCH at 0x601d160000 irq 172\"\n                alsa.driver_name = \"snd_hda_intel\"\n                device.bus_path = \"pci-0000:00:1f.3\"\n                sysfs.path = \"/devices/pci0000:00/0000:00:1f.3/sound/card0\"\n                device.bus = \"pci\"\n                device.vendor.id = \"8086\"\n                device.vendor.name = \"Intel Corporation\"\n                device.product.id = \"a0c8\"\n                device.product.name = \"Tiger Lake-LP Smart Sound Technology Audio Controller\"\n                device.form_factor = \"internal\"\n                device.string = \"0\"\n                module-udev-detect.discovered = \"1\"\n                device.icon_name = \"audio-card-pci\"\n        Formats:\n                pcm\n\nSource #7\n        State: SUSPENDED\n        Name: alsa_output.usb-0c76_USB_Headphone_Set-00.analog-stereo.monitor\n        Description: Monitor of audio controller Analog Stereo\n        Driver: module-alsa-card.c\n        Sample Specification: s16le 2ch 48000Hz\n        Channel Map: front-left,front-right\n        Owner Module: 26\n        Mute: no\n        Volume: front-left: 65536 / 100% / 0.00 dB,   front-right: 65536 / 100% / 0.00 dB\n                balance 0.00\n        Base Volume: 65536 / 100% / 0.00 dB\n        Monitor of Sink: alsa_output.usb-0c76_USB_Headphone_Set-00.analog-stereo\n        Latency: 0 usec, configured 0 usec\n        Flags: DECIBEL_VOLUME LATENCY\n        Properties:\n                device.description = \"Monitor of audio controller Analog Stereo\"\n                device.class = \"monitor\"\n                alsa.card = \"2\"\n                alsa.card_name = \"USB Headphone Set\"\n                alsa.long_card_name = \"USB Headphone Set at usb-0000:00:14.0-8, full speed\"\n                alsa.driver_name = \"snd_usb_audio\"\n                device.bus_path = \"pci-0000:00:14.0-usb-0:8:1.0\"\n                sysfs.path = \"/devices/pci0000:00/0000:00:14.0/usb3/3-8/3-8:1.0/sound/card2\"\n                udev.id = \"usb-0c76_USB_Headphone_Set-00\"\n                device.bus = \"usb\"\n                device.vendor.id = \"0c76\"\n                device.vendor.name = \"JMTek, LLC.\"\n                device.product.id = \"1607\"\n                device.product.name = \"audio controller\"\n                device.serial = \"0c76_USB_Headphone_Set\"\n                device.form_factor = \"headphone\"\n                device.string = \"2\"\n                module-udev-detect.discovered = \"1\"\n                device.icon_name = \"audio-headphones-usb\"\n        Formats:\n                pcm\n\nSource #8\n        State: SUSPENDED\n        Name: alsa_input.usb-0c76_USB_Headphone_Set-00.mono-fallback\n        Description: audio controller Mono\n        Driver: module-alsa-card.c\n        Sample Specification: s16le 1ch 48000Hz\n        Channel Map: mono\n        Owner Module: 26\n        Mute: no\n        Volume: mono: 41493 /  63% / -11.91 dB\n                balance 0.00\n        Base Volume: 26281 /  40% / -23.81 dB\n        Monitor of Sink: n/a\n        Latency: 0 usec, configured 0 usec\n        Flags: HARDWARE HW_MUTE_CTRL HW_VOLUME_CTRL DECIBEL_VOLUME LATENCY\n        Properties:\n                alsa.resolution_bits = \"16\"\n                device.api = \"alsa\"\n                device.class = \"sound\"\n                alsa.class = \"generic\"\n                alsa.subclass = \"generic-mix\"\n                alsa.name = \"USB Audio\"\n                alsa.id = \"USB Audio\"\n                alsa.subdevice = \"0\"\n                alsa.subdevice_name = \"subdevice #0\"\n                alsa.device = \"0\"\n                alsa.card = \"2\"\n                alsa.card_name = \"USB Headphone Set\"\n                alsa.long_card_name = \"USB Headphone Set at usb-0000:00:14.0-8, full speed\"\n                alsa.driver_name = \"snd_usb_audio\"\n                device.bus_path = \"pci-0000:00:14.0-usb-0:8:1.0\"\n                sysfs.path = \"/devices/pci0000:00/0000:00:14.0/usb3/3-8/3-8:1.0/sound/card2\"\n                udev.id = \"usb-0c76_USB_Headphone_Set-00\"\n                device.bus = \"usb\"\n                device.vendor.id = \"0c76\"\n                device.vendor.name = \"JMTek, LLC.\"\n                device.product.id = \"1607\"\n                device.product.name = \"audio controller\"\n                device.serial = \"0c76_USB_Headphone_Set\"\n                device.form_factor = \"headphone\"\n                device.string = \"hw:2\"\n                device.buffering.buffer_size = \"192000\"\n                device.buffering.fragment_size = \"96000\"\n                device.access_mode = \"mmap+timer\"\n                device.profile.name = \"mono-fallback\"\n                device.profile.description = \"Mono\"\n                device.description = \"audio controller Mono\"\n                module-udev-detect.discovered = \"1\"\n                device.icon_name = \"audio-headphones-usb\"\n        Ports:\n                analog-input-mic: Microphone (type: Mic, priority: 8700, availability unknown)\n        Active Port: analog-input-mic\n        Formats:\n                pcm\n\n\nCard #0\n        Name: alsa_card.usb-C-Media_Electronics_Inc._USB_Audio_Device-00\n        Driver: module-alsa-card.c\n        Owner Module: 7\n        Properties:\n                alsa.card = \"1\"\n                alsa.card_name = \"USB Audio Device\"\n                alsa.long_card_name = \"C-Media Electronics Inc. USB Audio Device at usb-0000:00:14.0-2, full speed\"\n                alsa.driver_name = \"snd_usb_audio\"\n                device.bus_path = \"pci-0000:00:14.0-usb-0:2:1.0\"\n                sysfs.path = \"/devices/pci0000:00/0000:00:14.0/usb3/3-2/3-2:1.0/sound/card1\"\n                udev.id = \"usb-C-Media_Electronics_Inc._USB_Audio_Device-00\"\n                device.bus = \"usb\"\n                device.vendor.id = \"0d8c\"\n                device.vendor.name = \"C-Media Electronics, Inc.\"\n                device.product.id = \"0014\"\n                device.product.name = \"Audio Adapter (Unitek Y-247A)\"\n                device.serial = \"C-Media_Electronics_Inc._USB_Audio_Device\"\n                device.string = \"1\"\n                device.description = \"Audio Adapter (Unitek Y-247A)\"\n                module-udev-detect.discovered = \"1\"\n                device.icon_name = \"audio-card-usb\"\n        Profiles:\n                input:mono-fallback: Mono Input (sinks: 0, sources: 1, priority: 1, available: yes)\n                output:analog-stereo: Analog Stereo Output (sinks: 1, sources: 0, priority: 6500, available: yes)\n                output:analog-stereo+input:mono-fallback: Analog Stereo Output + Mono Input (sinks: 1, sources: 1, priority: 6501, available: yes)\n                output:iec958-stereo: Digital Stereo (IEC958) Output (sinks: 1, sources: 0, priority: 5500, available: yes)\n                output:iec958-stereo+input:mono-fallback: Digital Stereo (IEC958) Output + Mono Input (sinks: 1, sources: 1, priority: 5501, available: yes)\n                off: Off (sinks: 0, sources: 0, priority: 0, available: yes)\n        Active Profile: output:analog-stereo+input:mono-fallback\n        Ports:\n                analog-input-mic: Microphone (type: Mic, priority: 8700, latency offset: 0 usec, availability unknown)\n                        Properties:\n                                device.icon_name = \"audio-input-microphone\"\n                        Part of profile(s): input:mono-fallback, output:analog-stereo+input:mono-fallback, output:iec958-stereo+input:mono-fallback\n                analog-output: Analog Output (type: Analog, priority: 9900, latency offset: -170000 usec, availability unknown)\n                        Part of profile(s): output:analog-stereo, output:analog-stereo+input:mono-fallback\n                iec958-stereo-output: Digital Output (S/PDIF) (type: SPDIF, priority: 0, latency offset: 0 usec, availability unknown)\n                        Part of profile(s): output:iec958-stereo, output:iec958-stereo+input:mono-fallback\n\nCard #1\n        Name: alsa_card.pci-0000_00_1f.3\n        Driver: module-alsa-card.c\n        Owner Module: 8\n        Properties:\n                alsa.card = \"0\"\n                alsa.card_name = \"HDA Intel PCH\"\n                alsa.long_card_name = \"HDA Intel PCH at 0x601d160000 irq 172\"\n                alsa.driver_name = \"snd_hda_intel\"\n                device.bus_path = \"pci-0000:00:1f.3\"\n                sysfs.path = \"/devices/pci0000:00/0000:00:1f.3/sound/card0\"\n                device.bus = \"pci\"\n                device.vendor.id = \"8086\"\n                device.vendor.name = \"Intel Corporation\"\n                device.product.id = \"a0c8\"\n                device.product.name = \"Tiger Lake-LP Smart Sound Technology Audio Controller\"\n                device.form_factor = \"internal\"\n                device.string = \"0\"\n                device.description = \"Built-in Audio\"\n                module-udev-detect.discovered = \"1\"\n                device.icon_name = \"audio-card-pci\"\n        Profiles:\n                output:hdmi-stereo: Digital Stereo (HDMI) Output (sinks: 1, sources: 0, priority: 38668, available: yes)\n                output:hdmi-stereo-extra1: Digital Stereo (HDMI 2) Output (sinks: 1, sources: 0, priority: 38468, available: yes)\n                output:hdmi-stereo-extra2: Digital Stereo (HDMI 3) Output (sinks: 1, sources: 0, priority: 38468, available: yes)\n                output:hdmi-stereo-extra3: Digital Stereo (HDMI 4) Output (sinks: 1, sources: 0, priority: 38468, available: yes)\n                off: Off (sinks: 0, sources: 0, priority: 0, available: yes)\n        Active Profile: output:hdmi-stereo\n        Ports:\n                hdmi-output-0: HDMI / DisplayPort (type: HDMI, priority: 5900, latency offset: 0 usec, available)\n                        Properties:\n                                device.icon_name = \"video-display\"\n                                device.product.name = \"DELL S2721QS\"\n                        Part of profile(s): output:hdmi-stereo\n                hdmi-output-1: HDMI / DisplayPort 2 (type: HDMI, priority: 5800, latency offset: 0 usec, available)\n                        Properties:\n                                device.icon_name = \"video-display\"\n                                device.product.name = \"P40w-20\"\n                        Part of profile(s): output:hdmi-stereo-extra1\n                hdmi-output-2: HDMI / DisplayPort 3 (type: HDMI, priority: 5700, latency offset: 0 usec, available)\n                        Properties:\n                                device.icon_name = \"video-display\"\n                                device.product.name = \"LG Ultra HD\"\n                        Part of profile(s): output:hdmi-stereo-extra2\n                hdmi-output-3: HDMI / DisplayPort 4 (type: HDMI, priority: 5600, latency offset: 0 usec, available)\n                        Properties:\n                                device.icon_name = \"video-display\"\n                                device.product.name = \"BenQ EW2780U\"\n                        Part of profile(s): output:hdmi-stereo-extra3\n\nCard #3\n        Name: alsa_card.usb-0c76_USB_Headphone_Set-00\n        Driver: module-alsa-card.c\n        Owner Module: 26\n        Properties:\n                alsa.card = \"2\"\n                alsa.card_name = \"USB Headphone Set\"\n                alsa.long_card_name = \"USB Headphone Set at usb-0000:00:14.0-8, full speed\"\n                alsa.driver_name = \"snd_usb_audio\"\n                device.bus_path = \"pci-0000:00:14.0-usb-0:8:1.0\"\n                sysfs.path = \"/devices/pci0000:00/0000:00:14.0/usb3/3-8/3-8:1.0/sound/card2\"\n                udev.id = \"usb-0c76_USB_Headphone_Set-00\"\n                device.bus = \"usb\"\n                device.vendor.id = \"0c76\"\n                device.vendor.name = \"JMTek, LLC.\"\n                device.product.id = \"1607\"\n                device.product.name = \"audio controller\"\n                device.serial = \"0c76_USB_Headphone_Set\"\n                device.form_factor = \"headphone\"\n                device.string = \"2\"\n                device.description = \"audio controller\"\n                module-udev-detect.discovered = \"1\"\n                device.icon_name = \"audio-headphones-usb\"\n        Profiles:\n                input:mono-fallback: Mono Input (sinks: 0, sources: 1, priority: 1, available: yes)\n                output:analog-stereo: Analog Stereo Output (sinks: 1, sources: 0, priority: 6500, available: yes)\n                output:analog-stereo+input:mono-fallback: Analog Stereo Output + Mono Input (sinks: 1, sources: 1, priority: 6501, available: yes)\n                output:iec958-stereo: Digital Stereo (IEC958) Output (sinks: 1, sources: 0, priority: 5500, available: yes)\n                output:iec958-stereo+input:mono-fallback: Digital Stereo (IEC958) Output + Mono Input (sinks: 1, sources: 1, priority: 5501, available: yes)\n                off: Off (sinks: 0, sources: 0, priority: 0, available: yes)\n        Active Profile: output:analog-stereo+input:mono-fallback\n        Ports:\n                analog-input-mic: Microphone (type: Mic, priority: 8700, latency offset: 0 usec, availability unknown)\n                        Properties:\n                                device.icon_name = \"audio-input-microphone\"\n                        Part of profile(s): input:mono-fallback, output:analog-stereo+input:mono-fallback, output:iec958-stereo+input:mono-fallback\n                analog-output: Analog Output (type: Analog, priority: 9900, latency offset: 0 usec, availability unknown)\n                        Part of profile(s): output:analog-stereo, output:analog-stereo+input:mono-fallback\n                iec958-stereo-output: Digital Output (S/PDIF) (type: SPDIF, priority: 0, latency offset: 0 usec, availability unknown)\n                        Part of profile(s): output:iec958-stereo, output:iec958-stereo+input:mono-fallback\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_audio_management/#setting-a-selected-port","title":"Setting a selected port","text":"<p>To set a port we would select the appropriate profile.</p> <p>Note: By specifying the desired profile/port combination when setting the card's profile, you ensure that the correct port is selected along with the profile. In many cases, selecting the appropriate profile should set the associated port automatically</p> <pre><code> pactl set-sink-port alsa_output.pci-0000_00_1f.3.hdmi-stereo-extra3 hdmi-output-3\n\n #or\n\n pactl set-sink-port alsa_output.usb-C-Media_Electronics_Inc._USB_Audio_Device-00.analog-stereo analog-output\n\n #or using the sink index\n\n pactl set-sink-port 3 hdmi-output-0\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_audio_management/#setting-card-profiles","title":"Setting card profiles","text":"<pre><code># set hdmi 0 (or default)\npactl set-card-profile alsa_card.pci-0000_00_1f.3 output:hdmi-stereo\n\n# set hdmi-3 as the desired port\npactl set-card-profile alsa_card.pci-0000_00_1f.3 output:hdmi-stereo-extra2\n\n# set HDMI 4 adapter as audio output\npactl set-card-profile alsa_card.pci-0000_00_1f.3 output:hdmi-stereo-extra3\n</code></pre> <p>Some audio cards have profiles that combine both output and input capabilities. In such cases, selecting a profile that combines both capabilities is the correct approach if you want to configure both the output and input settings for the card simultaneously.</p> <pre><code>pactl set-card-profile alsa_card.usb-0c76_USB_Headphone_Set-00 :analog-stereo+input:mono-fallback\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_audio_management/#how-profiles-are-generated","title":"How profiles are generated","text":"<p>In PulseAudio, profiles are generated based on the available audio hardware and the capabilities of the audio device. When a new audio device is detected, PulseAudio queries the device's audio capabilities and generates profiles accordingly. The audio capabilities are determined by the audio device's driver, which provides information about the device's supported audio formats, sample rates, and channels.</p> <p>Each profile is a combination of a sink and source. A sink is an endpoint where audio is played, and a source is an endpoint where audio is recorded. For example, a profile may specify a sink for a set of speakers and a source for a microphone. The audio device's driver may support multiple sinks and sources, each with its own set of capabilities.</p> <p>Profiles are defined in the PulseAudio configuration files, which are located in the /etc/pulse/ or ~/.config/pulse/ directory. PulseAudio reads these files when it starts up and uses them to generate the available profiles for each audio device.</p>"},{"location":"architecture/sdkvm/sdkvm_audio_management/#hdmi-port-options-on-sdkvm","title":"HDMI port options on SDKVM","text":"<p>This is an extract of the pactl list command.</p> <pre><code>        Profiles:\n                output:hdmi-stereo: Digital Stereo (HDMI) Output (sinks: 1, sources: 0, priority: 38668, available: yes)\n                output:hdmi-stereo-extra1: Digital Stereo (HDMI 2) Output (sinks: 1, sources: 0, priority: 38468, available: yes)\n                output:hdmi-stereo-extra2: Digital Stereo (HDMI 3) Output (sinks: 1, sources: 0, priority: 38468, available: yes)\n                output:hdmi-stereo-extra3: Digital Stereo (HDMI 4) Output (sinks: 1, sources: 0, priority: 38468, available: yes)\n                off: Off (sinks: 0, sources: 0, priority: 0, available: yes)\n        Active Profile: output:hdmi-stereo-extra3\n        Ports:\n                hdmi-output-0: HDMI / DisplayPort (type: HDMI, priority: 5900, latency offset: 0 usec, available)\n                        Properties:\n                                device.icon_name = \"video-display\"\n                                device.product.name = \"DELL S2721QS\"\n                        Part of profile(s): output:hdmi-stereo\n                hdmi-output-1: HDMI / DisplayPort 2 (type: HDMI, priority: 5800, latency offset: 0 usec, available)\n                        Properties:\n                                device.icon_name = \"video-display\"\n                                device.product.name = \"LG Ultra HD\"\n                        Part of profile(s): output:hdmi-stereo-extra1\n                hdmi-output-2: HDMI / DisplayPort 3 (type: HDMI, priority: 5700, latency offset: 0 usec, available)\n                        Properties:\n                                device.icon_name = \"video-display\"\n                                device.product.name = \"LG Ultra HD\"\n                        Part of profile(s): output:hdmi-stereo-extra2\n                hdmi-output-3: HDMI / DisplayPort 4 (type: HDMI, priority: 5600, latency offset: 0 usec, available)\n                        Properties:\n                                device.icon_name = \"video-display\"\n                                device.product.name = \"P40w-20\"\n                        Part of profile(s): output:hdmi-stereo-extra3\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_audio_management/#understanding-pulse-volume-control","title":"Understanding Pulse Volume Control","text":"<p>All per-channel volume values in PulseVolumeInfo (and flat values in the wrapper funcs above), are float objects in 0-65536 range, with following meanings: - 0.0 volume is \u201cno sound\u201d (corresponds to PA_VOLUME_MUTED). - 1.0 value is \u201ccurrent sink volume level\u201d, 100% or PA_VOLUME_NORM. - 1.0 and up to 65536.0 (PA_VOLUME_MAX / PA_VOLUME_NORM) - software-boosted sound volume (higher values will negatively affect sound quality).</p>"},{"location":"architecture/sdkvm/sdkvm_audio_management/#gui-based-mixer-on-linux","title":"GUI based Mixer on Linux","text":"<pre><code>sudo apt install pavucontrol\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_audio_management/#screen-shots-from-pavucontrol","title":"Screen Shots from Pavucontrol","text":"<p>Configuration</p> <p>We first select a profile for each card. This determines if we will have unidirectional audio or bidirectional audio.</p> <p></p> <p>Inputs</p> <p></p> <p></p> <p>Outputs</p> <p></p> <p></p>"},{"location":"architecture/sdkvm/sdkvm_audio_management_framework/","title":"SDKVM Audio Management Framework version 1.0.1","text":""},{"location":"architecture/sdkvm/sdkvm_audio_management_framework/#changes-in-version-101","title":"Changes in version 1.0.1","text":"<ul> <li>Added new interfaces and informational section for volume control</li> <li>Added section on install and dependencies</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_audio_management_framework/#introduction","title":"Introduction","text":"<p>The audio management framework is a python utility which simplifies the configuration of audio settings on the SDKVM</p> <p>It can be invoked with:</p> <pre><code>python /home/snuc/workspaceserver/audio_management.py -h\n</code></pre> <p>It provides a number of commands that provide information about the pulse audio resources available on the system. To understand the various concepts used in pukse audio see SDKVM Audio Management</p> <p>Note: The indexes asscoiated with sinks frequently change. One must always interogate the framework and get the latest index of a sink or other resource before configuring any options. If storing a default or user selected audio setting reference it by name and retrieve the latest index rather than storing the index..</p>"},{"location":"architecture/sdkvm/sdkvm_audio_management_framework/#installation-and-dependencies","title":"Installation and Dependencies","text":"<p>The audio management framework depends on the pulsectl python library. To install this do the following:</p> <pre><code>pip install pulsectl\n</code></pre> <p>This software also requires a directory in /home/snuc/.config/audio-management/</p>"},{"location":"architecture/sdkvm/sdkvm_audio_management_framework/#osd-requirements","title":"OSD Requirements","text":"<ol> <li>The OSD should determine the available sinks on the system.</li> <li>It should present these sinks as the principle options that a user selects and then when the user selects one of these an additional drop down should provide a list of available profiles for that sink.</li> <li>The OSD should then set the selected sink as the default sink and apply the selected profile the user has selected.</li> <li>The OSD should set the desired volume associated with the chosen sink. Please note that each sink can have a seperate volume setting.</li> <li>The selected options should be stored in system settings as a sink name and a card profile. The OSD cannot rely on the various indexes because these are ephemeral.</li> </ol>"},{"location":"architecture/sdkvm/sdkvm_audio_management_framework/#setting-volume-levels","title":"Setting Volume Levels","text":"<p>All per-channel volume values in Pulse Volume Control are float objects in 0-65536 range, with following meanings</p> <ul> <li>0.0 volume is \u201cno sound\u201d (corresponds to PA_VOLUME_MUTED).</li> <li>1.0 value is \u201ccurrent sink volume level\u201d, 100% or PA_VOLUME_NORM.</li> <li>1.0 and up to 65536.0 (PA_VOLUME_MAX / PA_VOLUME_NORM) - software-boosted sound volume (higher values will negatively affect sound quality).</li> </ul> <p>The effective range of audio sinks on the SDKVM is 1 to 1.5. 0 to 1 is the mormal range and anything above that is considered a boost. The OSD should allow a user set the full range between 0 to 1.5.</p>"},{"location":"architecture/sdkvm/sdkvm_audio_management_framework/#command-options-for-audio-management","title":"Command Options for Audio Management","text":"<p>The framework below provides options for each of these steps. It is important to remember that setting the desired audio interface requires one to set the default sink and the selected profile for the card associated with that sink.</p> <pre><code>     Launches Test Mode: audio_management.py -t\n     Set the default sink: audio_management.py -d &lt;sink index&gt;\n     Set the default source: audio_management.py --set-default-source=&lt;sink index&gt;\n     Set the card profile: audio_management.py -m &lt;cardname,profilename&gt;\n     Set the sink volume: audio_management.py -a &lt;sink index,volume&gt; or --set-volume=&lt;sink index&gt;\n     Set the source volume: audio_management.py  --set-volume-for-source=&lt;source index&gt;\n     Set the sink volume by sink name: audio_management.py -g &lt;sink name,volume&gt;\n     Get the sink volume: audio_management.py -v &lt;sink index&gt; or --get-volume-for-sink=&lt;sink index&gt;\n     Get the source volume: audio_management.py --get-volume-for-source=&lt;source index&gt;\n     Get the sink volume by name: audio_management.py -j &lt;sink name&gt;\n     Configure audio for currently selected sink and profile: audio_management.py -f\n     Get the card associated with this sink: audio_management.py -x &lt;sink index&gt; or --get-associated-card-for-sink=&lt;sink_index&gt;\n     Get the card associated with this source: audio_management.py -x &lt;source index&gt; or --get-associated-card-for-source=&lt;source_index&gt;\n     Get the name for the specified sink: audio_management.py -n &lt;sink index&gt;\n     Get the name of the card associated with the specified sink: audio_management.py -x &lt;sink index&gt;\n     List available sinks: audio_management.py -s - this prints a json summary of available sinks to stdout and in /home/snuc/.config/audio-management/sink_list.json\n     List available sources: audio_management.py -b or --list-sources - this prints a json summary of available sources to stdout and in /home/snuc/.config/audio-management/source_list.json\n     List available cards: audio_management.py -c - this prints a json summary of available sinks to stdout and in /home/snuc/.config/audio-management/card_list.json\n     List available output profiles: audio_management.py -p &lt;sink index&gt; - this prints a json summary of available profiles for a given sink index to stdout and in /home/snuc/.config/audio-management/profile_list.json\n     List available input profiles: audio_management.py --list-input-profiles &lt;source index&gt; - this prints a json summary of available input profiles for a given sink index to stdout and in /home/snuc/.config/audio-management/input_profile_list.json\n     List available ports for Sink: audio_management.py -r &lt;sink index&gt; - this prints a json summary of available ports for a given sink index to stdout and in /home/snuc/.config/audio-management/port_list.json\n     List available ports for Source: audio_management.py -o &lt;source index&gt; - this prints a json summary of available ports for a given source index to stdout and in /home/snuc/.config/audio-management/port_list_for_source.json\n     Get the index of a specific sink based on its name : audio_management.py -i &lt;sink_name&gt; - returns a json object with the name and index of the sink\n     Get the name of a specific sink based on its index : audio_management.py -n &lt;sink_index&gt; - returns a json object with the name and index of the sink\n     Show the card associated with a sink: audio_management.py -x &lt;sink name&gt;\n     Set the output port: audio_management.py -z &lt;port name&gt;\n     Set the output port: audio_management.py -w or --get-active-port=&lt;sink name&gt;\n     Show the card associated with a source: audio_management.py -q &lt;source name&gt;\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_audio_management_framework/#examples","title":"Examples","text":"<ul> <li>List the available sinks (Assumes a USB headset is plugged in)</li> <li>python audio_management.py -s</li> </ul> <pre><code>{\n\"sinks\":[\n{\n\"sink_name\":\"usb-C-Media_Electronics_Inc\",\n\"sink_index\":0\n},\n{\n\"sink_name\":\"pci-0000_00_1f\",\n\"sink_index\":4\n},\n{\n\"sink_name\":\"usb-0c76_USB_Headphone_Set-00\",\n\"sink_index\":5\n}\n]\n}\n</code></pre> <ul> <li>List the available sources (Assumes a USB headset is plugged in)</li> <li>python audio_management.py -b</li> </ul> <pre><code>{\n\"sources\":[\n{\n\"source_name\":\"usb-C-Media_Electronics_Inc\",\n\"source_index\":0\n},\n{\n\"source_name\":\"usb-C-Media_Electronics_Inc\",\n\"source_index\":1\n},\n{\n\"source_name\":\"pci-0000_00_1f\",\n\"source_index\":6\n},\n{\n\"source_name\":\"usb-0c76_USB_Headphone_Set-00\",\n\"source_index\":7\n},\n{\n\"source_name\":\"usb-0c76_USB_Headphone_Set-00\",\n\"source_index\":8\n}\n]\n}\n</code></pre> <ul> <li>Set the default sink</li> <li>python audio_management.py -d 5</li> </ul> <pre><code>Default sink set to : alsa_output.pci-0000_00_1f.3.hdmi-stereo\nDefault Sink: alsa_output.pci-0000_00_1f.3.hdmi-stereo\n</code></pre> <ul> <li>Get the default sink</li> <li>python audio_management.py -b </li> </ul> <pre><code>Default Sink: alsa_output.pci-0000_00_1f.3.hdmi-stereo\n</code></pre> <ul> <li>List the available cards</li> <li>python audio_management.py -c</li> </ul> <pre><code>{\n    \"cards\": [\n        {\n            \"card_name\": \"alsa_card.usb-C-Media_Electronics_Inc._USB_Audio_Device-00\",\n            \"card_index\": 0\n        },\n        {\n            \"card_name\": \"alsa_card.pci-0000_00_1f.3\",\n            \"card_index\": 1\n        },\n        {\n            \"card_name\": \"alsa_card.usb-0c76_USB_Headphone_Set-00\",\n            \"card_index\": 3\n        }\n    ]\n}\n</code></pre> <ul> <li>List the available output profiles for sink with index 5 (HDMI)</li> <li>python audio_management.py -p 5</li> </ul> <pre><code>{\n\"profiles\":[\n{\n\"profile_name\":\"output:hdmi-stereo\"\n},\n{\n\"profile_name\":\"output:hdmi-stereo-extra1\"\n},\n{\n\"profile_name\":\"output:hdmi-stereo-extra2\"\n},\n{\n\"profile_name\":\"output:hdmi-stereo-extra3\"\n}\n]\n}\n</code></pre> <ul> <li>List the available output profiles for sink with index 6 (USB Headset)</li> <li>python audio_management.py -p 6</li> </ul> <pre><code>{\n\"profiles\":[\n{\n\"profile_name\":\"output:analog-stereo\"\n},\n{\n\"profile_name\":\"output:analog-stereo+input:mono-fallback\"\n},\n{\n\"profile_name\":\"output:iec958-stereo\"\n},\n{\n\"profile_name\":\"output:iec958-stereo+input:mono-fallback\"\n}\n]\n}\n</code></pre> <ul> <li>List the available output profiles for sink with index 0</li> <li>python audio_management.py -p 0</li> </ul> <pre><code>{\n\"profiles\":[\n{\n\"profile_name\":\"output:analog-stereo\"\n},\n{\n\"profile_name\":\"output:analog-stereo+input:mono-fallback\"\n},\n{\n\"profile_name\":\"output:iec958-stereo\"\n},\n{\n\"profile_name\":\"output:iec958-stereo+input:mono-fallback\"\n}\n]\n}\n</code></pre> <ul> <li>List the available input profiles for source 0</li> <li>python audio_management.py -k 0</li> </ul> <pre><code>{\n\"profiles\":[\n{\n\"profile_name\":\"input:mono-fallback\"\n},\n{\n\"profile_name\":\"output:analog-stereo+input:mono-fallback\"\n},\n{\n\"profile_name\":\"output:iec958-stereo+input:mono-fallback\"\n}\n]\n}\n</code></pre> <p>List the available input profiles for source 7 (USB Headset)   - python audio_management.py -k 7</p> <pre><code>{\n\"profiles\":[\n{\n\"profile_name\":\"input:mono-fallback\"\n},\n{\n\"profile_name\":\"output:analog-stereo+input:mono-fallback\"\n},\n{\n\"profile_name\":\"output:iec958-stereo+input:mono-fallback\"\n}\n]\n}\n</code></pre> <ul> <li>Set the profile output:iec958-stereo for the card alsa_card.usb-C-Media_Electronics_Inc._USB_Audio_Device-00</li> <li>python audio_management.py -m alsa_card.usb-C-Media_Electronics_Inc._USB_Audio_Device-00,output:iec958-stereo</li> <li>Get the sink index for the sink named alsa_card.usb-C-Media_Electronics_Inc._USB_Audio_Device-00</li> <li>python audio_management.py -i alsa_output.usb-C-Media_Electronics_Inc._USB_Audio_Device-00.iec958-stereo</li> </ul> <pre><code>{\n\"sink_index\":\"3\",\n\"sink_name\":\"alsa_output.usb-C-Media_Electronics_Inc._USB_Audio_Device-00.iec958-stereo\"\n}\n</code></pre> <ul> <li>Get the sink name for the sink with index 0</li> <li>python audio_management.py -n 0</li> </ul> <pre><code>{\n\"sink_index\":\"11\",\n\"sink_name\":\"alsa_output.pci-0000_00_1f.3.hdmi-stereo\"\n}\n</code></pre> <ul> <li>Get the list of ports associated with the sink with index 8</li> <li>python audio_management.py -r 8</li> </ul> <pre><code>{\n\"ports\":[\n{\n\"port_name\":\"hdmi-output-0\",\n\"port_description\":\"HDMI / DisplayPort\"\n},\n{\n\"port_name\":\"hdmi-output-1\",\n\"port_description\":\"HDMI / DisplayPort 2\"\n},\n{\n\"port_name\":\"hdmi-output-2\",\n\"port_description\":\"HDMI / DisplayPort 3\"\n},\n{\n\"port_name\":\"hdmi-output-3\",\n\"port_description\":\"HDMI / DisplayPort 4\"\n},\n{\n\"port_name\":\"hdmi-output-4\",\n\"port_description\":\"HDMI / DisplayPort 5\"\n},\n{\n\"port_name\":\"hdmi-output-5\",\n\"port_description\":\"HDMI / DisplayPort 6\"\n},\n{\n\"port_name\":\"hdmi-output-6\",\n\"port_description\":\"HDMI / DisplayPort 7\"\n},\n{\n\"port_name\":\"hdmi-output-7\",\n\"port_description\":\"HDMI / DisplayPort 8\"\n},\n{\n\"port_name\":\"hdmi-output-8\",\n\"port_description\":\"HDMI / DisplayPort 9\"\n},\n{\n\"port_name\":\"hdmi-output-9\",\n\"port_description\":\"HDMI / DisplayPort 10\"\n},\n{\n\"port_name\":\"hdmi-output-10\",\n\"port_description\":\"HDMI / DisplayPort 11\"\n}\n]\n}\n</code></pre> <ul> <li>Get the list of ports associated with the sink with index 0 (Analog)</li> <li>python audio_management.py -r 0</li> </ul> <pre><code>{\n{\n\"ports\":[\n{\n\"port_name\":\"analog-input-mic\",\n\"port_description\":\"Microphone\"\n},\n{\n\"port_name\":\"analog-output\",\n\"port_description\":\"Analog Output\"\n},\n{\n\"port_name\":\"iec958-stereo-output\",\n\"port_description\":\"Digital Output (S/PDIF)\"\n}\n]\n}\n</code></pre> <ul> <li>Get the list of ports associated with the sink with index 4 (HDMI)</li> <li>python audio_management.py -r 4</li> </ul> <pre><code>{\n\"ports\":[\n{\n\"port_name\":\"hdmi-output-0\",\n\"port_description\":\"HDMI / DisplayPort\"\n},\n{\n\"port_name\":\"hdmi-output-1\",\n\"port_description\":\"HDMI / DisplayPort 2\"\n},\n{\n\"port_name\":\"hdmi-output-2\",\n\"port_description\":\"HDMI / DisplayPort 3\"\n},\n{\n\"port_name\":\"hdmi-output-3\",\n\"port_description\":\"HDMI / DisplayPort 4\"\n}\n]\n}\n</code></pre> <ul> <li>Get the list of ports associated with the sink with index 5 (USBR Headset)</li> <li>python audio_management.py -r 5</li> </ul> <pre><code>{\n\"ports\":[\n{\n\"port_name\":\"analog-output\",\n\"port_description\":\"Analog Output\"\n},\n{\n\"port_name\":\"iec958-stereo-output\",\n\"port_description\":\"Digital Output (S/PDIF)\"\n}\n]\n}\n</code></pre> <ul> <li>Get the list of ports associated with the source with index 0 (Analog)</li> <li>python audio_management.py -o 0</li> </ul> <pre><code>{\n{\n\"ports\":[\n{\n\"port_name\":\"analog-input-mic\",\n\"port_description\":\"Microphone\"\n}\n]\n}\n</code></pre> <ul> <li>Get the volume of the specified sink</li> <li>python audio_management.py -v 0</li> </ul> <pre><code>{\n\"sink_index\":\"0\",\n\"sink_name\":\"alsa_output.usb-C-Media_Electronics_Inc._USB_Audio_Device-00.iec958-stereo\",\n\"sink_volume\":\"0.79998779296875\"\n}\n</code></pre> <ul> <li>Set the volume for the specified sink -a sink_index,sink_volume where sink_volume is a figure between 0 and 1.5</li> <li>python audio_management.py -a 0,1.5</li> </ul> <pre><code>{\n\"sink_index\":\"0\",\n\"sink_name\":\"alsa_output.usb-C-Media_Electronics_Inc._USB_Audio_Device-00.iec958-stereo\",\n\"sink_volume\":\"1.5\",\n\"actual_volume\":\"1.5\"\n}\n</code></pre> <ul> <li>Get the card associated with a particular sink index</li> <li>python audio_management.py  -x 0</li> </ul> <pre><code>{\n     \"card_index\": \"0\",\n     \"card_name\" : \"alsa_card.usb-C-Media_Electronics_Inc._USB_Audio_Device-00\"\n}\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_automation/","title":"SDKVM Automation","text":"<p>The SDKVM has been designed to be automation-friendly. Almost all operations can be scripted and there is a comprehensive mqtt based messaging system that allows an automation engineer to fully verify the system. Unfortunately this needs to be documented so for now I am providing some initial suggestions. I will add to this page in time to make it more comprehensive.</p>"},{"location":"architecture/sdkvm/sdkvm_automation/#automated-connection-testing","title":"Automated Connection Testing","text":"<p>One can automate workspace testing by using the launching the python3 /home/snuc/workspaceserver/launch_workspace.py script. This takes an arument -w which identifies the workspace to be launched.</p> <p>A basic automated workspace launch test could be created with a script like that shown below.</p>"},{"location":"architecture/sdkvm/sdkvm_automation/#pre-requisites","title":"Pre-requisites","text":"<p>Create two workspaces with a number of connections in each workspace. These can be created using the OSD by using the connections and workspaces tab.</p> <p>Assign the newly created workspaces to hotkeys in the users tab.</p>"},{"location":"architecture/sdkvm/sdkvm_automation/#how-to-automate","title":"How to automate","text":"<pre><code>#!/bin/bash\nx=1\nwhile [ $x ]\ndo\n  echo \"Launching workspace 1\"\n  python3 /home/snuc/workspaceserver/launch_workspace.py -w1\n  sleep 600\n  echo \"Terminating workspace 1\"    \n  /home/snuc/KeyBindings/Scripts/terminate_workspace.sh \n  sleep 5\n  echo \"Launching workspace 2\"\n  python3 /home/snuc/workspaceserver/launch_workspace.py -w2\n  sleep 600\n  echo \"Terminating workspace 2\"    \n  /home/snuc/KeyBindings/Scripts/terminate_workspace.sh \ndone\n</code></pre> <p>In the script above 'w1\" invokes the workspace associated with hotkey 1 and 'w2\" invokes the workspace associated with hotkey 2. More workspaces and hotkeys can be added as required to scale the test.</p> <p>Limitations; This script will cycle between the two workspaces continually launching and terminating. This script does not check that the workspaces launched sucessfully (that would require additional work), but it can be used as the basis for a continuous soak test that cycles between different workspaces.</p>"},{"location":"architecture/sdkvm/sdkvm_automation/#references","title":"References","text":"<ul> <li>Running Multiple Tests</li> <li>Flutter Test Tutorial Part 1</li> <li>Flutter Test Tutorial Part 2</li> <li>Testing in Flutter</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_clients/","title":"SDKVM Clients Specification 1.0.0.35","text":""},{"location":"architecture/sdkvm/sdkvm_clients/#changes-from-clients-specification-10034-to-10035","title":"Changes from Clients Specification 1.0.0.34 to 1.0.0.35","text":"<ul> <li>Renamed smart-sizing to window-sizing</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_clients/#source-code","title":"Source Code","text":""},{"location":"architecture/sdkvm/sdkvm_clients/#kvm-client","title":"KVM Client","text":"<ul> <li>svn location - svn-server/SoftwareClients/trunk/SDKVM/KVM_Client</li> <li>Software Clients on Github for SDKVM</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_clients/#class-name","title":"Class Name","text":"<ul> <li>Match(wm_class=\"bb_kvm\")</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_clients/#audio","title":"Audio","text":"<p>To enable audio support for the KVM client</p> <pre><code>/sound\n</code></pre> <p>To enable analog audio the option is:</p> <p>/analog-audio</p> <p>(the option /sound should not be used in this case; though I can add a check with /analog-audio to disable the /sound option in this case).</p> <p>The script pulse_volume_control.sh needs to be placed/copied to /usr/bin/blackbox/ and the executable option set via chmod +x.</p> <p>The KVM can support sourcing audio from two audio sources on the TX. The analog audio is audio received on TX's audio port (3.5 mm). The HID audio is the audio the TX receives on the HID from the target PC. When making a connection we must specify the source on the TX by passing the required argument. </p>"},{"location":"architecture/sdkvm/sdkvm_clients/#left-right-audio-channels","title":"Left Right Audio Channels","text":"<p>It should probably mention that the data comes in as right-left samples from the TX (though might want to double check this). The default channel order/mapping for PCM is typically left-right; however, when testing this with the TX box the left and right channels were reversed; ie, something that should play on the right speaker would play on the left speaker and vis-versa. If I connect speakers to the target machine directly via the audio jack the channels play correctly on the left and right speakers.</p> <p>In the code I'm working on, I've reversed the channel order for the pulse audio stream so it outputs on the expected channel.</p>"},{"location":"architecture/sdkvm/sdkvm_clients/#audio-formats-for-shared-connections","title":"Audio Formats for Shared Connections","text":"<p>The audio data sent is just raw pcm data. Unlike the Video the Audio App engines on the appliance receivers does not parse/modify the data it receives. The audio packets are a fixed size of 512 bytes. Data going to/from the audio deserialiser/serialiser in the receiver and transmitter is in units of 64 bytes. To keep everything easily divisible the audio data will be structured as 512 bytes in each packet. Since the Audio data is written to DRAM, the header can be read for each received packet if it has not been written over by a new packet.</p> <p>The data is signed 48 Khz PCM 16 bit stereo so a sample is 32 bits wide. </p> <p>AVAE provides an option to turn on Audio header which provide a 64 byte header with timestamps and frame marker. A 512 byte packet is divided in 64 byte header and 448 byte payload (PCM 16 bit stereo) if the audio header functionality is turned ON. At present this functionlity is disabled, but we may decide to turn this on at some future point -that of course would require SDKVM changes. </p>"},{"location":"architecture/sdkvm/sdkvm_clients/#audio-ingress-mic-path","title":"Audio ingress (MIC Path)","text":"<p>In bi-directional audio, the audio data stream can be transmitted from the EMD transmitter to the SDKVM and vice versa. For simplicity's sake, we refer to the audio path from the SDKVM to the EMD transmitter as the 'MIC path'. The audio format remains consistent, whether it's for audio egress or audio ingress.</p> <ul> <li>The EMD transmitter receives the audio data on port 9000</li> <li>The audio packets have a fixed size of 512 bytes.</li> <li>To maintain ease of handling, the audio data is structured in 512-byte packets.</li> <li>It is signed 48 kHz PCM (Pulse Code Modulation) with a 16-bit stereo format, meaning each sample is 32 bits wide.</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_clients/#silence-supression","title":"Silence Supression","text":"<p>The Egress side also support silence supression. After a certain silence threshold value egress side doesn't send the audio sample until it sees the genuine audio data. On the ingress side if the audio buffer is empty, it plays a silence sample on repeat to avoid distorted audio. Deskvue needs to implement a similar stratergy to play out silence.</p> <p>The audio buffer would simply drain and it will auto mute. The egress side still seems to stream out audio data even when audio channel is muted, ie, zero level samples (muted).</p>"},{"location":"architecture/sdkvm/sdkvm_clients/#scripts-for-confirming-audio","title":"Scripts for Confirming Audio","text":""},{"location":"architecture/sdkvm/sdkvm_clients/#ingress","title":"Ingress","text":"<pre><code>source /opt/blackbox/test/debug_utilities.sh\n#set -x\n\nAAE_INGRESS_START_BUFFER_ADDR=0x6fff0000\n#AAE_INGRESS_START_BUFFER_ADDR=0x3fff0000 for 2K SE/PE\n#AAE_INGRESS_START_BUFFER_ADDR=0x1fff0000 for ZeroU\n#AAE_INGRESS_START_BUFFER_ADDR=0x1fff0000 for Corrib\n\nfor i in $(seq 1 1 128)\ndo\n        AUDIO_DATA=$(devmem $AAE_INGRESS_START_BUFFER_ADDR)\n                UpperAndLower16 $AUDIO_DATA\n                ConvertPCMToDecimal $UPPER_BYTE\n                LEFT=$PCM_VALUE\n                ConvertPCMToDecimal $LOWER_BYTE\n                RIGHT=$PCM_VALUE\n                printf \"Left Channel: %04X %d %d Right Channel: %04X %d %d \\n\" $((UPPER_BYTE)) $(($UPPER_BYTE))  $((LEFT)) $((LOWER_BYTE)) $(($LOWER_BYTE)) $((RIGHT))\n        AAE_INGRESS_START_BUFFER_ADDR=$(($AAE_INGRESS_START_BUFFER_ADDR+4))\ndone\n</code></pre> <p>The functions UpperAndLower16 and ConvertPCMToDecimal can be found in Buildroot/buildroot-2017.02.4/board/blackbox/common/common/rootfs_overlay/opt/blackbox/test/debug_utilities.sh</p>"},{"location":"architecture/sdkvm/sdkvm_clients/#egress","title":"Egress","text":"<pre><code>source /opt/blackbox/test/debug_utilities.sh\n#set -x\n\nAAE_EGRESS_START_BUFFER_ADDR=0x6ffe0000\n#AAE_EGRESS_START_BUFFER_ADDR=0x3ffe0000 for 2K SE/PE\n#AAE_EGRESS_START_BUFFER_ADDR=0x1ffe0000 for ZeroU\n\n\nfor i in $(seq 1 1 128)\ndo\n        AUDIO_DATA=$(devmem $AAE_EGRESS_START_BUFFER_ADDR)\n                UpperAndLower16 $AUDIO_DATA\n                ConvertPCMToDecimal $UPPER_BYTE\n                LEFT=$PCM_VALUE\n                ConvertPCMToDecimal $LOWER_BYTE\n                RIGHT=$PCM_VALUE\n                printf \"Left Channel: %04X %d %d Right Channel: %04X %d %d \\n\" $((UPPER_BYTE)) $(($UPPER_BYTE))  $((LEFT)) $((LOWER_BYTE)) $(($LOWER_BYTE)) $((RIGHT))\n        AAE_INGRESS_START_BUFFER_ADDR=$(($AAE_EGRESS_START_BUFFER_ADDR+4))\ndone\n</code></pre> <p>The functions UpperAndLower16 and ConvertPCMToDecimal can be found in Buildroot/buildroot-2017.02.4/board/blackbox/common/common/rootfs_overlay/opt/blackbox/test/debug_utilities.sh</p>"},{"location":"architecture/sdkvm/sdkvm_clients/#extended-desktop-operation","title":"Extended Desktop Operation","text":""},{"location":"architecture/sdkvm/sdkvm_clients/#kvm-connection-dual-head-example","title":"kvm connection (dual head) example:","text":"<pre><code>/window-sizing:1920x1080,1280x1024 /window-position:0x0,1920x0 /dual\n</code></pre> <p>Specifies two comma delineated windows via smart sizing and two comma delineated positions for the respective windows. The \"dual\" switch is also required to enable extended desktop.</p>"},{"location":"architecture/sdkvm/sdkvm_clients/#kvm-connection-single-head-example","title":"kvm connection (single head) example:","text":"<pre><code>/window-sizing:1920x1080 /window-position:0x0\n</code></pre> <p>Specifies one window via smart sizing and the position</p> <p>There wouldn\u2019t be an extended desktop for a kvm connection (TX) since it is configured to present a single or dual set of monitors to windows at configured resolutions on the TX.</p>"},{"location":"architecture/sdkvm/sdkvm_clients/#rdp-connection-extended-desktop-example","title":"RDP connection (extended desktop) example:","text":"<pre><code>/desktop-resolution: 3840x2160,3840x2160  /window-sizing:3840x2160,3840x2160 /window-position:0x0,3840x0\n</code></pre> <p>Specifies the RDP connection should request a desktop width and height of 3840x1920 specified by /w and /h. The window size would typically match the /w and /h but that\u2019s not necessary; it could be different, ie /window-sizing:1920x540 which would show the extended desktop scaled down to a window with the same ratio.</p>"},{"location":"architecture/sdkvm/sdkvm_clients/#swap-heads-or-flip","title":"Swap Heads or Flip","text":"<pre><code>/display-swap\n</code></pre> <p>which flips the primary and secondary display to their respective windows.</p>"},{"location":"architecture/sdkvm/sdkvm_clients/#rdp-client","title":"RDP CLient","text":"<ul> <li>svn location - svn-server/SoftwareClients/trunk/SDKVM/RDP_Client</li> <li>Software Clients on Github for SDKVM</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_clients/#class-name_1","title":"Class Name","text":"<ul> <li>Match(wm_class=\"bb_rdp\")</li> </ul> <p>Release:</p> <pre><code>cmake -GNinja -DCMAKE_PREFIX_PATH=$DEPENDENCIES -DCMAKE_BUILD_TYPE=Release -DCHANNEL_URBDRC=OFF -DWITH_DSP_FFMPEG=OFF -DWITH_CUPS=OFF -DWITH_PULSE=ON -DWITH_FAAC=OFF -DWITH_FAAD2=OFF -DWITH_GSM=ON -DWITH_SSE2=ON -DWITH_WAYLAND=OFF -DBUILD_SHARED_LIBS=OFF -DWITH_BB=ON -DCMAKE_VERBOSE_MAKEFILE:BOOL=ON -Bbuild_release -H.\n</code></pre> <p>Debug:</p> <pre><code>cmake -GNinja -DCMAKE_PREFIX_PATH=$DEPENDENCIES -DCMAKE_BUILD_TYPE=Debug -DCHANNEL_URBDRC=OFF -DWITH_DSP_FFMPEG=OFF -DWITH_CUPS=OFF -DWITH_PULSE=ON -DWITH_FAAC=OFF -DWITH_FAAD2=OFF -DWITH_GSM=ON -DWITH_SSE2=ON -DWITH_WAYLAND=OFF -DBUILD_SHARED_LIBS=OFF -DWITH_BB=ON -DCMAKE_VERBOSE_MAKEFILE:BOOL=ON -Bbuild_debug -H.\n</code></pre> <p>There's also a script in the client folder called pulse_volume_control.sh (modified version that is used for mute/unmute under bb_pcoip_client); this supports the mute/unmute as well as setting the volume for the first stream of the process. Currently the program looks for the script from the path it's run in, but will need to be updated to use the install location (via deb package).</p> <p>This should build on both ubuntu 20.04 and 22.04 for testing from either.</p> <p>To enable audio for the rdp client you can add an option like:</p> <pre><code>/sound:format:1,rate:44100,quality:high\n</code></pre> <p>to get a good quality sound; it's only tested against a valid rdp connection. Once I clean it up and start adding handling for connecting or connection error we can start doing some proper testing. You should get a window similar to:</p> <p>Upper-right corner there is a hotspot that will popup a basic control window when hovered; Clicking on stats will bring up the basic stats window on top-left; Lock/Unlock will disable/enable mouse/keyboard input; Demo brings up the default dear imgui demo window (for browsing around a lot of it's functionality). Volume will be disabled (but still shown) if the /sound option is not provided.</p>"},{"location":"architecture/sdkvm/sdkvm_clients/#pcoip-client","title":"PCoIP Client","text":"<ul> <li>svn location - svn-server/SoftwareClients/trunk/SDKVM/PCoIP_Client</li> <li>Software Clients on Github for SDKVM</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_clients/#class-name_2","title":"Class Name","text":"<ul> <li>Match(wm_class=\"bb_pcoip\")</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_clients/#command-line-arguments","title":"Command Line Arguments","text":""},{"location":"architecture/sdkvm/sdkvm_clients/#client-uid","title":"Client UID","text":"<pre><code>/client-uid=\"AA819902112\"\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_clients/#workspace-uid","title":"Workspace UID","text":"<pre><code>/workspace-uid=\"AC819DD2112\"\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_clients/#statistics","title":"statistics","text":"<p>Display statistics</p> <pre><code>/show-stats \n</code></pre> <p>To enable statistics through the workspaceserver create (touch) a file in ~/SDKVM/debug/enable_stats. This will enable stats in all clients. To disable them remove this file.</p>"},{"location":"architecture/sdkvm/sdkvm_clients/#sound","title":"Sound","text":"<pre><code>/sound \n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_clients/#view-only","title":"View Only","text":"<pre><code>/view-only \n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_clients/#resizing","title":"Resizing","text":"<p>option to rdp-client, kvm-client, and pcoip-client </p> <pre><code>/window-noresize\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_clients/#window-titles","title":"Window Titles","text":"<p>Command line option to rdp-client, kvm-client, and pcoip-client to set the title on launch</p> <pre><code>/t:'tile title'\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_clients/#disable-window-decorations","title":"Disable Window Decorations","text":"<p>To remove window decorations and tile bars</p> <pre><code>-decorations\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_clients/#always-on-top-feature","title":"Always On Top Feature","text":"<p>The \"Always On Top Feature\" gives us the ability to designate one or more client windows as always on top. It should not be possible to move other windows in front of these.</p> <pre><code>/window-ontop\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_clients/#range-control-for-absolute-co-ordinates-for-mouse","title":"Range Control for Absolute Co-Ordinates for Mouse","text":"<pre><code>/abs-coords:(&lt;x&gt;,&lt;y&gt;)(&lt;x&gt;,&lt;y&gt;),[(&lt;x&gt;,&lt;y&gt;)(&lt;x&gt;,&lt;y&gt;)] - provides absolute coordinate mapping for primary and secondary monitors. These are done in coordinate pairs (x,y - upper left)(x,y - bottom right)\n</code></pre> <pre><code>Example of new params for a target running the hiseclabs driver on a dual head tx would be:\n\n/abs-coords:(0,0)(16383,32767),(16384,0)(32767,32767) /show-local-mouse\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_clients/#show-local-mouse-cursor","title":"Show local Mouse Cursor","text":"<pre><code>/show-local-mouse - always show local mouse cursor\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_clients/#disable-hotbaroverlay","title":"Disable Hotbar/Overlay","text":"<p>To remove the hotbar/overlay from the client</p> <pre><code>-hotbar\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_clients/#hotbar-content-control","title":"Hotbar Content Control","text":"<pre><code>/hotbar:feature1,feature2,feature3,...\n</code></pre> <p>where the features are comma delimited and optional. The listed features will specify which ones should be enabled for the hotbar on the client. All other will be removed.</p> <p>For example:</p> <p><pre><code>/hotbar:lock,aspect,resize,mute,volume\n</code></pre> where the options above control the following behaviours:</p> <ul> <li>lock = lock/unlock input</li> <li>aspect = stretch/maintain picture aspect ratio</li> <li>resize = lock/unlock window resize</li> <li>mute = mute/unmute audio</li> <li>volume = volume control</li> </ul> <p>To enable all features: </p> <pre><code>/hotbar: all\n</code></pre> <p>where all = enable all features</p> <p>Note</p> <ul> <li>If the /hotbar option is not specified, the hotbar will have all features enabled.</li> <li>If -hotbar is provided, hotbar will not be shown to the user.</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_clients/#common-resources","title":"Common Resources","text":""},{"location":"architecture/sdkvm/sdkvm_clients/#images","title":"Images","text":"<p>https://github.com/SDKVMAssetsResources/images_icons.</p> <p>The png files will need to be packaged/placed at the following location for the clients to access:</p> <p>/usr/share/blackbox/images</p>"},{"location":"architecture/sdkvm/sdkvm_clients/#overlay-bar-contents","title":"Overlay Bar Contents","text":"<ol> <li>If audio has been abled on the connection, then the overlay should show a speaker icon, which, when clicked can mute the audio. (Not implemented, but required). The icon should transition to indicate audio is muted once clicked.</li> <li>A volume control for that tile. (Implemented)</li> <li>A target icon that allows the user select the tile to move to a central featured window. (hold on this for now)</li> <li>A lock icon to allow the tile to become view only. (Implemented as this was requested by John Hickey, but Tom and Alex do not agree, so hold on this for now)</li> <li>Invoke statistics button (Implemented).</li> <li>Volume control slider (Implemented).</li> <li>An option to prevent window resize. The default behaviour of a window should be that is resizable. However we would like a command line option to override this behaviour on launch (\\fixedsize perhaps), and, if possible, be able to disable resizing dynamically also by toggling a button on the overlay (Not implemented, what is the feasibility of this?).</li> </ol>"},{"location":"architecture/sdkvm/sdkvm_clients/#mqtt-commands-to-control-clients","title":"MQTT Commands to control clients","text":""},{"location":"architecture/sdkvm/sdkvm_clients/#to-launch","title":"To Launch","text":"<pre><code>/home/snuc/clients/KVM/kvm-client/build/client/X11/xfreerdp /boxilla:id:08:00:27:c0:a1:9d /gdi:sw /window-sizing:1920x1044 /sec-rdp /floatbar:sticky:off,default:hidden,show:always /rfx /client-uid:4K_TX_169_3b07e2a340 /mqtt-endpoint:127.0.0.1:1883 -grab-keyboard /shared /window-position:0x0 /t:'TX: 4K_TX_169: 192.168.1.169 0' /v:192.168.1.169\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_clients/#to-terminate-a-client","title":"To Terminate a Client","text":"<pre><code>mosquitto_pub -h 127.0.0.1 -t \"blackbox/sdkvm/deskvue/cmd/3b07e2a340/terminate\" -m {}\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_clients/#to-terminate-all-clients","title":"To Terminate all Clients","text":"<pre><code>mosquitto_pub -h 127.0.0.1 -t \"blackbox/sdkvm/deskvue/cmd/clients/terminate\" -m {}\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_clients/#to-terminate-all-clients-in-a-given-workspace","title":"To Terminate all Clients in a given Workspace","text":"<pre><code>mosquitto_pub -h 127.0.0.1 -t \"blackbox/sdkvm/deskvue/cmd/workspace/3b07e2a340/terminate\" -m {}\n</code></pre> <p>In the circumstance where a connection is terminated outside of the client window then the client will display a message for n seconds indicating that the window is being closed by a local OSD or external entity and then closes the window. The exact behaviour will depend on the contents of the MQTT message. It can specify if an informative message should appear or and the duration for that message.</p> <p>To listen for these events:</p> <pre><code>mosquitto_sub -h 127.0.0.1 -v -t blackbox/sdkvm/deskvue/cmd\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_clients/#to-mute-a-client","title":"To Mute a Client","text":"<pre><code>mosquitto_pub -h 127.0.0.1 -t \"blackbox/sdkvm/deskvue/cmd/3b07e2a340/mute\" -m {}\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_clients/#to-mute-all-clients","title":"To Mute all Clients","text":"<pre><code>mosquitto_pub -h 127.0.0.1 -t \"blackbox/sdkvm/deskvue/cmd/clients/mute\" -m {}\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_clients/#to-mute-all-clients-in-a-given-workspace","title":"To Mute all Clients in a given Workspace","text":"<pre><code>mosquitto_pub -h 127.0.0.1 -t \"blackbox/sdkvm/deskvue/cmd/workspace/3b07e2a340/mute\" -m {}\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_clients/#to-unmute-a-client","title":"To Unmute a Client","text":"<pre><code>mosquitto_pub -h 127.0.0.1 -t \"blackbox/sdkvm/deskvue/cmd/3b07e2a340/unmute\" -m {}\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_clients/#to-unmute-all-clients","title":"To Unmute all Clients","text":"<pre><code>mosquitto_pub -h 127.0.0.1 -t \"blackbox/sdkvm/deskvue/cmd/clients/unmute\" -m {}\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_clients/#to-unmute-all-clients-in-a-given-workspace","title":"To Unmute all Clients in a given Workspace","text":"<pre><code>mosquitto_pub -h 127.0.0.1 -t \"blackbox/sdkvm/deskvue/cmd/workspace/3b07e2a340/unmute\" -m {}\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_clients/#to-display-the-connection-overlay-for-a-client","title":"To Display the Connection Overlay for a Client","text":"<pre><code>mosquitto_pub -h 127.0.0.1 -t \"blackbox/sdkvm/deskvue/cmd/3b07e2a340/hotbar\" -m {}\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_clients/#to-display-the-connection-overlay-for-all-clients","title":"To Display the Connection Overlay for all Clients","text":"<pre><code>mosquitto_pub -h 127.0.0.1 -t \"blackbox/sdkvm/deskvue/cmd/clients/hotbar\" -m {}\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_clients/#to-display-the-connection-overlay-for-all-clients-in-a-given-workspace","title":"To Display the Connection Overlay for all Clients in a given Workspace","text":"<pre><code>mosquitto_pub -h 127.0.0.1 -t \"blackbox/sdkvm/deskvue/cmd/workspace/3b07e2a340/hotbar\" -m {}\n</code></pre> <p>The overlay can additionally be disabled setting the json payload:</p> <pre><code>-m { \"state\": \"disabled\" }\n</code></pre> <p>and enabled with</p> <pre><code>-m { \"state\": \"enabled\" }\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_clients/#registering-for-connection-status-events","title":"Registering for Connection Status Events","text":"<p>When a connection is terminated the client will send out a connection status event over MQTT. The OSD can subscribe to these events and terminate accordingly:</p> <p>MQTT Topic:  'blackbox/sdkvm/deskvue/workspace_server/event/connection</p> <pre><code>{\n    \"boxilla\":\"id:08:00:27:c0:a1:9d\",\n    \"client_uid\":\"800f998103\",\n    \"connection_type\":\"transmitter\",\n    \"connection_mode\":\"shared\",\n    \"server_hostname\":\"192.168.1.161\",\n    \"server_port\":3389,\n    \"status\":\"disconnected\",\n    \"reason\":\"\",\n    \"error\":\"ERRBASE_SUCCESS\",\n    \"time_stamp\":\"14:36:00 16-01-2023\"\n }\n</code></pre> <p>The \"status\" indicates the connection status and the OSD must use this status to reflect the correct text and color on the connection and workspace launch buttons.</p> <pre><code>mosquitto_sub -h 127.0.0.1 -v -t blackbox/sdkvm/deskvue/workspace_server/event/connection\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_clients/#registering-for-connection-statistics","title":"Registering for Connection Statistics","text":"<p>MQTT Topic:  'blackbox/sdkvm/deskvue/workspace_server/status/statistics' </p> <p>{     \"client_uid\":\"3b07e2a340\",     \"connection_type\":\"transmitter\",     \"connection_mode\":\"shared\",     \"server_hostname\":\"192.168.1.169\",     \"server_port\":3389,     \"bit_rate\":27427220,     \"frame_rate\":21.0,     \"time_stamp\":\"15:16:14 16-01-2023\" }</p> <pre><code>mosquitto_sub -h 127.0.0.1 -v -t blackbox/sdkvm/deskvue/workspace_server/status/statistics\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_clients/#logging","title":"Logging","text":"<p>Add these environment variables for redirecting client logging to syslog</p> <pre><code>export WLOG_APPENDER=\"syslog\" \nexport WLOG_PREFIX=\"pid=%pid:tid=%tid:fn=%fn -\"\n</code></pre> <p>Enabling debug logging on the client</p> <pre><code>/log-level:debug \n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_clients/#hot-key-handling","title":"Hot Key Handling","text":"<ul> <li>Currently we are using the 'Windows' hot key as our Controller Hoy Key. This poses certain issues, for example, the control sequence Windows + Up Arrow controls maximises the client window, but this key combination is also a popular hotkey sequence in Windows itself.</li> <li>One option we have explored is to use the Ctrl key as an additional modifier key so when pressed in conjunction with combinations like Windows + Up Arrow would send the key sequence directly to windows.</li> <li>Ultimately we want to move towards the industry standard control key sequences like Ctrl + Ctrl, Alt + ALt etc.</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_clients/#issues","title":"Issues","text":""},{"location":"architecture/sdkvm/sdkvm_clonezilla/","title":"CloneZilla","text":""},{"location":"architecture/sdkvm/sdkvm_clonezilla/#tools","title":"Tools","text":"<ul> <li>usb-creator-gtk</li> <li>unattended update and restore with Clonezilla</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_clonezilla/#creating-a-self-boot-image-installer","title":"Creating a self boot image installer","text":"<ul> <li>Insert a newly fat32 formatted USB in a linux PC</li> <li>By default this will mount at: /media/sdx</li> <li>On the linux PC download the clonezilla zip file:Downloads stable</li> <li> <p>sudo unzip clonezilla-live-3.1.0-22-amd64.zip -d /media/sdb1/</p> </li> <li> <p>This directory has the following format:</p> </li> </ul> <pre><code>amd64-release.txt\nClonezilla-Live-Version\nGPL\n\nboot:\n    grub\n\nEFI:\n    boot\n\nlive:\n    Clonezilla-Live-Version\n    filesystem.packages\n    filesystem.packages-remove\n    filesystem.squashfs\n    freedos.img\n    initrd.img\n    ipxe.efi\n    ipxe.lkn\n    mt86+x32.efi\n    mt86+x32.mbr\n    mt86+x64.efi\n    mt86+x64.mbr\n    vmlinuz\n\nsyslinux:\n    boot.cat\n    boot-local-efi.cfg\n    chain.c32\n    drblwp.png\n    isolinux.bin\n    isolinux.cfg\n    iso_sort.txt\n    ldlinux.c32\n    libcom32.c32\n    libutil.c32\n    memdisk\n    menu.c32\n    ocswp.png\n    syslinux.cfg\n    vesamenu.c32\n\nutils:\n    linux\n    mbr\n    README.txt\n    win32\n    win64\n</code></pre> <p>Download the Clonezilla ISO: Visit the Clonezilla website (https://clonezilla.org/) and download the latest stable version of the Clonezilla Live ISO file.</p> <p>Prepare a bootable USB drive: Insert a USB drive with sufficient storage capacity into your computer. Format the USB drive as FAT32 if needed. Use a tool like Rufus (https://rufus.ie/) or BalenaEtcher (https://www.balena.io/etcher/) to create a bootable USB drive from the Clonezilla ISO. Select the Clonezilla ISO file and the USB drive as the destination.</p> <p>Prepare the image files: Copy the disk or partition image files that you want to install onto the USB drive. Ensure that the image files are in the appropriate format supported by Clonezilla (e.g., gzip-compressed or dd format). You can create these image files using Clonezilla itself or other tools.</p> <p>Create a directory for image storage: On the USB drive, create a directory (e.g., \"images\") to store the image files. Place the image files inside this directory.</p> <p>Modify the Clonezilla menu: Navigate to the \"syslinux\" folder on the USB drive and locate the \"syslinux.cfg\" or \"syslinux/syslinux.cfg\" file. Open it in a text editor and add entries for each image you want to install. You'll need to specify the path to each image file and provide a menu entry title.</p> <p>Here's an example of how an entry for an image might look in the syslinux.cfg file:</p> <p>bash Copy code LABEL image1     MENU LABEL Image 1     KERNEL /live/vmlinuz     APPEND initrd=/live/initrd.img boot=live config noswap nolocales edd=on nomodeset ocs_live_run=\"ocs-live-general\" ocs_live_extra_param=\"\" ocs_live_keymap=\"NONE\" ocs_live_batch=\"no\" ocs_lang=\"en_US.UTF-8\" ocs_live_dist=\"clonezilla\" ocs_live_image=\"/images/image1.img\" ocs_live_swap=\"none\" ocs_live_target=\"sda1\" vga=788 nosplash i915.blacklist=yes radeonhd.blacklist=yes nouveau.blacklist=yes vmwgfx.enable_fbdev=no Save the modifications and eject the USB drive: Save the changes to the syslinux.cfg file and safely eject the USB drive from your computer. Now, when you boot from this USB drive, you should see a menu with multiple options, each corresponding to a different image. You can select the desired image and proceed with the installation process using Clonezilla.</p> <p>Note that the specific steps and file paths may vary slightly depending on the Clonezilla version and customization options. Refer to the Clonezilla documentation or community resources for more detailed instructions on using MultiBoot with Clonezilla.</p>"},{"location":"architecture/sdkvm/sdkvm_configuration/","title":"SDKVM Configuration","text":"<p>The SDKVM uses the Openbox Window Manager. It uses the gdm3 display manager, but autologs on the user snuc and starts X11 from the profile file. To configure the SDKVM to boot in this manner we need to setup a number of files;</p>"},{"location":"architecture/sdkvm/sdkvm_configuration/#dependencies","title":"Dependencies","text":"<p>Before begining configuration on a newly installed Ubuntu 22.04 system the following dependencies must be installed.</p> <pre><code>sudo apt-get -y install -y git ninja-build build-essential git-core debhelper cdbs dpkg-dev autotools-dev cmake pkg-config xmlto libssl-dev docbook-xsl xsltproc libxkbfile-dev libx11-dev libwayland-dev libxrandr-dev libxi-dev libxrender-dev libxext-dev libxinerama-dev libxfixes-dev libxcursor-dev libxv-dev libxdamage-dev libxtst-dev libcups2-dev libpcsclite-dev libasound2-dev libpulse-dev libjpeg-dev libgsm1-dev libusb-1.0-0-dev libudev-dev libdbus-glib-1-dev uuid-dev libxml2-dev\nsudo apt-get -y install -y libgstreamer1.0-dev  libfaad-dev libfaac-dev libcunit1-dev libdirectfb-dev xmlto doxygen libxtst-dev gparted curl libavutil-dev  glade xdotool libspdlog-dev libcairo2 libimlib2-dev librsvg2-dev\nsudo apt-get -y install -y ffmpeg nfs-common wmctrl xdotool net-tools mlocate net-tools xbindkeys xbindkeys-config\nsudo apt-get -y install -y xwit  gnome-shell-extensions  grub-customizer feh libmosquitto-dev nlohmann-json3-dev libmosquittopp-dev libmosquittopp1 mosquitto mosquitto-clients libjson-c-dev libboost-all-dev\nsudo apt -y install snapd\nsudo apt -y install -y python3-pip\nsudo apt-get install -y compton\npip install psutil screeninfo flask pyautogui\ncurl -1sLf https://dl.teradici.com/EBJEhivCeJnv2Yx1/pcoip-client-sdk/cfg/setup/bash.deb.sh | sudo -E distro=ubuntu codename=jammy bash\nsudo apt update\nsudo apt -y install pcoip-client-sdk\ncurl -1sLf https://dl.teradici.com/5XDaVehlfuYbrKxa/pcoip-client/cfg/setup/bash.deb.sh | sudo -E distro=ubuntu codename=jammy bash\nsudo apt update\nsudo apt -y install pcoip-client\nsudo apt -y install python3-pkgconfig libstartup-notification0-dev\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_configuration/#configuring-openbox","title":"Configuring OpenBox","text":"<p>There are two principle files used to configure Openbox's start up sequence. The openbox-sessiosn file and the openbox.desktop file.</p>"},{"location":"architecture/sdkvm/sdkvm_configuration/#openbox-session-file","title":"OpenBox Session File","text":"<p>Openbox uses a xession file which is located in /usr/local/bin/openbox-session </p> <pre><code>#!/bin/sh\nif test -n \"$1\"; then\n    echo \"Syntax: openbox-session\"\n    echo\n    echo \"See the openbox-session(1) manpage for help.\"\n  exit\nfi\n# Clean up after GDM\nxprop -root -remove _NET_NUMBER_OF_DESKTOPS \\\n      -remove _NET_DESKTOP_NAMES \\\n      -remove _NET_CURRENT_DESKTOP 2&gt; /dev/null\n# Set up the environment\nA=\"/usr/local/etc/xdg/openbox/environment\"\ntest -r $A &amp;&amp; . $A\nA=\"${XDG_CONFIG_HOME:-\"$HOME/.config\"}/openbox/environment\"\ntest -r $A &amp;&amp; . $A\n\n# Run Openbox, and have it run the autostart stuff\nexec /usr/local/bin/openbox --startup \"/usr/local/libexec/openbox-autostart OPENBOX\" \"$@\"\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_configuration/#turning-on-logging-in-openbox","title":"Turning on Logging in OpenBox","text":"<ul> <li>The Openbox log file can be found in: /home/snuc/.cache/openbox/openbox.log</li> <li>For more verbose output change: </li> </ul> <pre><code>exec /usr/local/bin/openbox --startup \"/usr/local/libexec/openbox-autostart OPENBOX\" \"$@\"\n</code></pre> <p>to</p> <pre><code>exec /usr/local/bin/openbox --debug --startup \"/usr/local/libexec/openbox-autostart OPENBOX\" \"$@\"\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_configuration/#openbox-desktop-file","title":"OpenBox Desktop File","text":"<p>This is located in /usr/share/xsessions/openbox.desktop </p> <pre><code>[Desktop Entry]\nName=Openbox\nComment=Log in using the Openbox window manager (without a session manager)\nExec=/usr/bin/openbox-session\nTryExec=/usr/bin/openbox-session\nIcon=openbox\nType=Application\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_configuration/#removing-other-boot-options","title":"Removing Other Boot Options","text":"<p>To prevent other desktop and session options we remove any other desktop files in /usr/share/xsessions. openbox.desktop should be the only file present.</p>"},{"location":"architecture/sdkvm/sdkvm_configuration/#startup-sequence","title":"Startup Sequence","text":"<p>The trace below shows a typical openbox startup sequence</p> <pre><code>   2112 tty2     Ssl+   0:00 /usr/lib/gdm3/gdm-x-session --register-session --run-script /usr/local/bin/openbox-session\n   2156 tty2     Sl+    0:00 /usr/local/bin/openbox --sm-save-file /home/snuc/.cache/openbox/sessions/1667402537-2156-3346969190.obs --sm-no-load\n   2216 ?        Ss     0:00 /usr/bin/ssh-agent /usr/bin/im-launch /usr/local/bin/openbox-session\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_configuration/#openbox-theme","title":"Openbox Theme","text":"<p>The Open box Theme in Github should be placed in ~/.themes. </p>"},{"location":"architecture/sdkvm/sdkvm_configuration/#starting-other-applications-from-openbox","title":"Starting other applications from Openbox","text":"<p>When Openbox begins to run it will look for an autostart script in /home/{USER}/.config/openbox.</p> <p>This file determines what programs will be start as Openbox launches.</p> <pre><code>#!/bin/bash\nlogger \"disabling Virtual Terminal Switching\"\nsetxkbmap -option srvrkeys:none\nlogger \"Setting session ID\"\necho \"0\" &gt; /tmp/session_id\n# Start the workspace server\nlogger \"Openbox autostart: Running workspaceserver from openbox\" \n/usr/bin/startserver.sh\n# Start Discovery\nlogger \"Openbox autostart: Starting Discovery service\"\n/usr/bin/startdiscovery.sh\n# Start Webservice\nlogger \"Openbox autostart: Starting Webservice service\"\n/usr/bin/startwebservice.sh\n# Configuring Keyboard\nlogger \"Openbox autostart: Configuring Keyboard to gb local\"\n/usr/bin/setxkbmap -layout gb\nsleep 2\nlogger \"Openbox autostart: Starting deskvue application\"\n/home/snuc/.config/openbox/configure_monitors.sh\nsleep 1\nlogger \"Starting Compton Compositor\"\ncompton --backend glx  --vsync opengl-swc &amp;\nlogger \"OSD Post Connect: Adding background images using feh\" \nfeh --bg-scale /home/snuc/.config/openbox/background.png &amp;\n/home/snuc/.config/openbox/disable_sleep.sh\nlogger \"OSD Post Connect: Setting Keyboard layout\"\nsetxkbmap -layout gb\nlogger \"OSD Post Connect: Positioning the mouse for login\"\nxdotool mousemove 960 540\n/home/snuc/SDKVM/emeralddeskvue/build/linux/x64/release/bundle/emeralddeskvue &amp;\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_configuration/#disabling-automatic-updates","title":"Disabling Automatic Updates","text":"<ul> <li>How to disable automatic updates</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_configuration/#configuring-the-mouse-cursor-not-tstable-for-now","title":"Configuring the Mouse Cursor (not tstable for now)","text":"<p>The relevant file is in /home/snuc/.gtkrc-2.0 if configured using lxappearance other wise in ~/.gtkrc-2.0.mine</p> <p><pre><code>include \"/home/snuc/.gtkrc-2.0.mine\"\ngtk-theme-name=\"Raleigh\"\ngtk-icon-theme-name=\"hicolor\"\ngtk-font-name=\"Sans 10\"\ngtk-cursor-theme-name=\"redglass\"\ngtk-cursor-theme-size=0\ngtk-toolbar-style=GTK_TOOLBAR_BOTH\ngtk-toolbar-icon-size=GTK_ICON_SIZE_LARGE_TOOLBAR\ngtk-button-images=1\ngtk-menu-images=1\ngtk-enable-event-sounds=1\ngtk-enable-input-feedback-sounds=1\ngtk-xft-antialias=1\ngtk-xft-hinting=1\ngtk-xft-hintstyle=\"hintfull\"\n</code></pre> For GTK 3.0 the file is in</p> <pre><code>/etc/gtk-3.0/settings.ini\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_configuration/#auto-mounting-usb-drives-in-openbox","title":"Auto-mounting USB drives in Openbox","text":"<p>To automount the USB drives in openbox we used the solution below. Clone the repository and run the configure script.</p> <ul> <li>autoMount-usb</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_configuration/#enabling-autologin-in-gdm3","title":"Enabling Autologin in GDM3","text":"<ul> <li>Guide for gnome</li> </ul> <p>Edit the config in /etc/gdm3/custom.conf</p> <pre><code># GDM configuration storage\n#\n# See /usr/share/gdm/gdm.schemas for a list of available options.\n\n[daemon]\n# Uncomment the line below to force the login screen to use Xorg\nWaylandEnable=false\n\n# Enabling automatic login\nAutomaticLoginEnable = true\nAutomaticLogin = snuc\n\n# Enabling timed login\n#  TimedLoginEnable = true\n#  TimedLogin = user1\n#  TimedLoginDelay = 10\n\n[security]\n\n[xdmcp]\n\n[chooser]\n\n[debug]\n# Uncomment the line below to turn on debugging\n# More verbose logs\n# Additionally lets the X server dump core if it crashes\n#Enable=true\n\n\n\n## Disabling unwanted services \n\n### Disable SSH access\n\n```sh\nsystemctl stop ssh\nsystemctl disable ssh\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_configuration/#disabling-network-dispatcher","title":"Disabling Network Dispatcher","text":"<pre><code>sudo apt purge --autoremove -s networkd-dispatcher\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_configuration/#disable-wifi","title":"Disable Wifi","text":"<pre><code>nmcli radio wifi off # turn off wifi\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_configuration/#disabling-monitor-sleep","title":"Disabling Monitor Sleep","text":"<pre><code># To disable\nsudo systemctl mask sleep.target suspend.target hibernate.target hybrid-sleep.target\n\n# To check\nsudo systemctl status sleep.target suspend.target hibernate.target hybrid-sleep.target\n\n# To re-enable\nsudo systemctl unmask sleep.target suspend.target hibernate.target hybrid-sleep.target\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_configuration/#partitioning-and-mounting-drives","title":"Partitioning and Mounting Drives","text":""},{"location":"architecture/sdkvm/sdkvm_configuration/#blkid","title":"blkid","text":"<pre><code>/dev/nvme0n1p2: UUID=\"57c446d1-d205-4aeb-9fae-87fd80f6f4a6\" BLOCK_SIZE=\"4096\" TYPE=\"ext4\" PARTLABEL=\"OS-A\" PARTUUID=\"bbffbf61-0eae-4c9e-9790-7cf66248f5b8\"\n/dev/loop1: TYPE=\"squashfs\"\n/dev/nvme0n1p7: UUID=\"a6299056-fe2c-437d-be23-fe2a043c230f\" BLOCK_SIZE=\"4096\" TYPE=\"ext4\" PARTLABEL=\"DATA-2\" PARTUUID=\"19d9bc4a-f383-4272-aff7-a5cefba271a3\"\n/dev/nvme0n1p5: UUID=\"5573cfa3-cdf2-461d-9459-4d3f124df53a\" BLOCK_SIZE=\"4096\" TYPE=\"ext4\" PARTLABEL=\"OS-B\" PARTUUID=\"ffc7817c-5808-4148-84fc-50161333e934\"\n/dev/nvme0n1p3: UUID=\"a7fcb1b5-42ce-49b2-a31f-a277e2b0c31f\" TYPE=\"swap\" PARTLABEL=\"SWAP\" PARTUUID=\"cff35ab8-d2c7-4236-a44f-7fab46ca296b\"\n/dev/nvme0n1p1: UUID=\"3ED5-3C49\" BLOCK_SIZE=\"512\" TYPE=\"vfat\" PARTLABEL=\"EFI-A\" PARTUUID=\"9ecc9f35-4f10-4fdc-980a-4d341798a6bb\"\n/dev/nvme0n1p6: UUID=\"560445fd-314d-4388-b695-60d4f39fb77d\" BLOCK_SIZE=\"4096\" TYPE=\"ext4\" PARTLABEL=\"DATA-1\" PARTUUID=\"4700bd34-2bae-4c8b-b137-42b0144227ac\"\n/dev/nvme0n1p4: UUID=\"3ED5-9611\" BLOCK_SIZE=\"512\" TYPE=\"vfat\" PARTLABEL=\"EFI-B\" PARTUUID=\"b97166f6-919e-44c5-bedb-97b729bde6f0\"\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_configuration/#default-fstab","title":"Default fstab","text":"<pre><code># /etc/fstab: static file system information.\n#\n# Use 'blkid' to print the universally unique identifier for a\n# device; this may be used with UUID= as a more robust way to name devices\n# that works even if disks are added and removed. See fstab(5).\n#\n# &lt;file system&gt; &lt;mount point&gt;   &lt;type&gt;  &lt;options&gt;       &lt;dump&gt;  &lt;pass&gt;\n# / was on /dev/nvme0n1p2 during installation\nUUID=57c446d1-d205-4aeb-9fae-87fd80f6f4a6 /               ext4    errors=remount-ro 0       1\n# /boot/efi was on /dev/nvme0n1p1 during installation\nUUID=3ED5-3C49  /boot/efi       vfat    umask=0077      0       1\n# swap was on /dev/nvme0n1p3 during installation\nUUID=a7fcb1b5-42ce-49b2-a31f-a277e2b0c31f none            swap    sw              0       0\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_configuration/#proposed-fstab-for-mounting-data-partitiions","title":"Proposed fstab for mounting data partitiions","text":"<pre><code># /etc/fstab: static file system information.\n#\n# Use 'blkid' to print the universally unique identifier for a\n# device; this may be used with UUID= as a more robust way to name devices\n# that works even if disks are added and removed. See fstab(5).\n#\n# &lt;file system&gt; &lt;mount point&gt;   &lt;type&gt;  &lt;options&gt;       &lt;dump&gt;  &lt;pass&gt;\n# / was on /dev/nvme0n1p2 during installation\nUUID=57c446d1-d205-4aeb-9fae-87fd80f6f4a6 /               ext4    errors=remount-ro 0       1\n# /boot/efi was on /dev/nvme0n1p1 during installation\nUUID=3ED5-3C49  /boot/efi       vfat    umask=0077      0       1\n# swap was on /dev/nvme0n1p3 during installation\nUUID=a7fcb1b5-42ce-49b2-a31f-a277e2b0c31f none            swap    sw              0       0\nUUID=560445fd-314d-4388-b695-60d4f39fb77d /media/datagold ext4    defaults        0       2\nUUID=a6299056-fe2c-437d-be23-fe2a043c230f /media/datalive ext4    defaults        0       2\nUUID=5573cfa3-cdf2-461d-9459-4d3f124df53a /media/osb      ext4    defaults        0       2\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_configuration/#configuring-the-bashrc-file","title":"Configuring the .bashrc file","text":"<p>The following lines should be added to the .bashrc file</p> <pre><code>export WLOG_APPENDER=\"syslog\" \nexport WLOG_PREFIX=\"pid=%pid:tid=%tid:fn=%fn -\"\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_configuration/#to-mount-the-shared-area","title":"To mount the shared area","text":"<pre><code>sudo mount -t nfs 10.211.128.208:/data/shared_area ~/shared_area  -orw,bg,rsize=1024,wsize=1024,namlen=255,hard,nolock\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_configuration/#timers","title":"Timers","text":""},{"location":"architecture/sdkvm/sdkvm_configuration/#checking-configured-timers","title":"Checking Configured Timers","text":"<pre><code>systemctl status *timer\n</code></pre> <p>or</p> <pre><code>systemctl list-timers\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_configuration/#disabling-timers","title":"Disabling Timers","text":"<pre><code>sudo systemctl stop ua-timer.service\nsudo systemctl mask ua-timer.service\nsudo systemctl stop ua-timer.timer\nsudo systemctl mask ua-timer.timer\n</code></pre> <pre><code>sudo systemctl stop motd-news.service\nsudo systemctl mask motd-news.service\nsudo systemctl stop motd-news.timer\nsudo systemctl mask motd-news.timer\n</code></pre> <pre><code>sudo systemctl stop apt-daily.service\nsudo systemctl mask apt-daily.service\nsudo systemctl stop apt-daily.timer\nsudo systemctl mask apt-daily.timer\n</code></pre> <pre><code>sudo systemctl stop apt-daily-upgrade.service\nsudo systemctl mask apt-daily-upgrade.service\nsudo systemctl stop apt-daily-upgrade.timer\nsudo systemctl mask apt-daily-upgrade.timer\n</code></pre> <pre><code>sudo systemctl stop man-db.service\nsudo systemctl mask man-db.service\nsudo systemctl stop man-db.timer\nsudo systemctl mask man-db.timer\n</code></pre> <pre><code>sudo systemctl stop update-notifier-download.service\nsudo systemctl mask update-notifier-download.service\nsudo systemctl stop update-notifier-download.timer\nsudo systemctl mask update-notifier-download.timer\n</code></pre> <pre><code>sudo systemctl stop update-notifier-motd.service\nsudo systemctl mask update-notifier-motd.service\nsudo systemctl stop update-notifier-motd.service\nsudo systemctl mask update-notifier-motd.service\n</code></pre> <p>To view disabled timers:</p> <pre><code>ls /etc/systemd/system/*.timer\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_configuration/#configuring-a-debug-terminal-in-rcxml","title":"Configuring a Debug Terminal in rc.xml","text":"<p>edit the rc.xml file in ~/.config/openbox</p> <pre><code>    &lt;keybind key=\"C-W-A-t\"&gt;\n      &lt;action name=\"Execute\"&gt;\n        &lt;command&gt;/usr/bin/x-terminal-emulator&lt;/command&gt;\n      &lt;/action&gt;\n    &lt;/keybind&gt;  \n    &lt;keybind key=\"W-n\"&gt;\n      &lt;action name=\"NextWindow\"&gt;\n        &lt;finalactions&gt;\n          &lt;action name=\"Focus\"/&gt;\n          &lt;action name=\"Raise\"/&gt;\n          &lt;action name=\"Unshade\"/&gt;\n        &lt;/finalactions&gt;\n      &lt;/action&gt;\n    &lt;/keybind&gt;\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_configuration/#syslog-rotation","title":"Syslog Rotation","text":"<p>There is a file at: /usr/lib/systemd/system/logrotate.timer this is also configured for daily</p> <p>I think this is the one that is meant to run, but may not be running</p> <p>The service can be enabled with:</p> <pre><code>systemctl reenable logrotate.timer\n</code></pre> <p>Logrotate\u2019s configuration information can generally be found in two places on Ubuntu:</p> <ul> <li>/etc/logrotate.conf: this file contains some default settings and sets up rotation for a few logs that are not owned by any system packages. It also uses an include statement to pull in configuration from any file in the /etc/logrotate.d directory.</li> <li>/etc/logrotate.d/: this is where any packages you install that need help with log rotation will place their Logrotate configuration. On a standard install you should already have files here for core system tools like apt, dpkg, rsyslog and so on.</li> </ul> <p>To test</p> <pre><code>sudo logrotate /etc/logrotate.conf --debug\n</code></pre> <p>To check the service logs</p> <pre><code>journalctl -u logrotate.service\n\n# and the timer\n\njournalctl -u logrotate.timer\n</code></pre> <p>To check the service:</p> <p><pre><code>systemctl status logrotate.timer\nlogrotate /etc/logrotate.d/rsyslog --debug\n</code></pre> The configuration for the Log Rotate Timer is in: /usr/lib/systemd/system/logrotate.timer</p> <pre><code>[Unit]\nDescription=Daily rotation of log files\nDocumentation=man:logrotate(8) man:logrotate.conf(5)\n\n[Timer]\nOnCalendar=daily\nAccuracySec=1h\nPersistent=true\n\n[Install]\nWantedBy=timers.target\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_configuration/#to-view-the-logrotate-status-and-determine-when-the-last-rotation-occured","title":"To view the logrotate status and determine when the last rotation occured","text":"<pre><code>sudo cat /var/lib/logrotate/status\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_configuration/#creating-an-alternative-syslog-rotation-service","title":"Creating an Alternative Syslog Rotation Service","text":"<p>Create two files in the directory /etc/systemd/system:</p> <p>altrotate.service</p> <p><pre><code>[Unit]\nDescription=Alt Log Rotate\n\n[Service]\nType=oneshot\nExecStart=/usr/bin/alt_logrotate.sh\n</code></pre> And</p> <p>altrotate.time</p> <pre><code>[Unit]\nDescription=Alternative Logrotate monitoring\n\n[Timer]\nOnBootSec=5m\nOnUnitActiveSec=1d\n\n[Install]\nWantedBy=timers.target\n</code></pre> <p>Place the following file in /usr/bin</p> <p>alt_logrotate.sh</p> <pre><code>#!/bin/bash\nlogger \"Alr Log Rotate starting\"\n/usr/sbin/logrotate /etc/logrotate.conf\nlogger \"Alr Log Rotate Complete\"\n</code></pre> <p>Enable the service</p> <pre><code>sudo systemctl reenable altrotate.timer\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_configuration/#reference","title":"Reference","text":"<ul> <li>logrotate not working</li> <li>SystemD Timers</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_configuration/#determining-serial-number","title":"Determining Serial Number","text":"<pre><code>sudo apt-get install dmidecode\n\nsudo dmidecode -s bios-release-date\nsudo dmidecode -s baseboard-product-name\nsudo dmidecode -s baseboard-manufacturer\nsudo dmidecode -s system-serial-number+\n</code></pre> <p>For a full list of available data run</p> <p><pre><code>sudo dmidecode \n</code></pre> The system information section has the main data of interest.</p> <p>To show the serial number:</p> <pre><code>/usr/bin/sudo /usr/sbin/dmidecode -s system-serial-number\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_configuration/#simplynuc-serial-number-format","title":"SimplyNuc Serial Number Format","text":"<ul> <li>Production serial numbers that shipped recently are in this format \uf0e0 S1L1T70023M0001</li> <li>The first 8 digits of the serial number are the Model number, ie S1L1T700 remaining 7 digits are yy-m-xxxx (where xxxx is a sequential number).</li> <li>The months are as follows: Y \u2013 Jan, F \u2013 Feb, H \u2013 Mar, L \u2013 Apr, M \u2013 May, E \u2013 Jun, J \u2013 Jul, A \u2013 Aug, S \u2013 Sep, O \u2013 Oct, N \u2013 Nov, D \u2013 Dec.</li> </ul> <p>Model number will not change (S1L1T700) for future production shipments, this is our custom configuration so this is the S/N format going forward.</p>"},{"location":"architecture/sdkvm/sdkvm_configuration/#cloning-process","title":"Cloning Process","text":""},{"location":"architecture/sdkvm/sdkvm_configuration/#prerequisites","title":"Prerequisites","text":"<ul> <li>sudo apt install usb-creator-gtk</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_configuration/#references","title":"References","text":"<ul> <li>Create_Recovery_Clonezilla</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_control_bridge/","title":"SDKVM and Control Bridge","text":""},{"location":"architecture/sdkvm/sdkvm_control_bridge/#references","title":"References","text":"<ul> <li>Sturle Havsvik in the Scandinavian office controls the Control Bridge development in Europe.</li> <li>IBC PRM</li> <li>Jira Ticket Tracking Development</li> <li>IBC is held in Amsterdam from 15 - 18 September 2023. These features are initially targetted for a demo at this show.</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_control_bridge/#requirements","title":"Requirements","text":"<ul> <li>We will need to support control bridge operation on the SDKVM. This should be compatible with the existing appliance implementation.</li> <li>The existing RX appliance can support certain control bridge operations via an unsecure REST API.</li> <li>When we developed SDKVM initially this unsecure API was not supported. This unsecure API is enabled through Boxilla and can handle basic commands like launching and terminating connections. The unsecure API should only run when enabled by Boxilla. It should not run on bootup.</li> <li>The existing C based implementation should be ported to the SDKVM.</li> <li>The means of launching the actual connection and terminating on the SDKVM will be different. The connections can be launched by sending the necessary json connection object to the internal REST API server used by the workspace server. The unsecure RESTAPI will parse the control bridge data and form a suitable json object that can be sent to the workspaceserver API.</li> <li>The necessary API details for the internal workspaceserver API are here - see Connection and Workspace APIs (note these may evolve for 1.2, but this document will always reflect the latest API)</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_control_bridge/#proposed-architecture-a","title":"Proposed Architecture A","text":"<ul> <li>Port the existing unsecure REST API from the appliance.</li> <li>Replace the existing connection launch and connection termination calls with those specified here - see Connection and Workspace APIs.</li> <li>Data coming from Control Bridge should be parsed and translated into a JSON object that is compatible with the existing workspaceserver API.</li> <li>This approach would require us to add a new API to handle workspaces (as opposed to connections)</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_control_bridge/#alternative-proposal-b","title":"Alternative Proposal B","text":"<ul> <li>Control bridge can talk to Boxilla over https.</li> <li>We use this existing scheme and allow Boxilla send the workspace launch and terminate commands to the SDKVm over the existing API.</li> <li>This approach would require Boxilla to develop APIs (modelled on the connection API) that could launch and terminate a workspace.</li> <li>This approach would require SDKVM to develop new secure APIs (modelled on the connection API) that could accept the launch and termination of a workspace.</li> <li>Boxilla already has the capability to export its unsigned certificate so that other clients can control various functions through the northbound API.</li> <li>Replace the existing connection launch and connection termination calls with those specified here - see Connection and Workspace APIs.</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_control_bridge/#another-alternative-proposal-c","title":"Another Alternative Proposal C","text":"<ul> <li>Control bridge can talk to the secure REST API directly.</li> <li>I am not aware if this has ever been done and if possible would require certificate installation etc or a capability to export the appliances unsigned certificate.</li> <li>This approach would require SDKVM to develop new secure APIs (modelled on the connection API) that could accept the launch and termination of a workspace.</li> <li>Replace the existing connection launch and connection termination calls with those specified here - see Connection and Workspace APIs.</li> <li>This approach would not require Boxilla development.</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_control_bridge/#implementation-details","title":"Implementation Details","text":"<p>For Proposal A</p> <p></p>"},{"location":"architecture/sdkvm/sdkvm_control_bridge/#force-login-requirements","title":"Force Login Requirements","text":""},{"location":"architecture/sdkvm/sdkvm_control_bridge/#put-user-login-force-login","title":"PUT User Login (Force Login)","text":""},{"location":"architecture/sdkvm/sdkvm_control_bridge/#url","title":"URL","text":"<p>http://IP:7778/user/login</p>"},{"location":"architecture/sdkvm/sdkvm_control_bridge/#implementation-notes","title":"Implementation Notes","text":"<p>Logs a user in to Rx OSD</p>"},{"location":"architecture/sdkvm/sdkvm_control_bridge/#request-class-json-structure","title":"Request Class JSON Structure","text":"<pre><code>{\n            \"user\": \"kvm_user\",\n            \"force\": 1,\n            \"ad\": 1,\n            \"md5sum\": \"a7d794f4a687efd2094c589714e310e3\"\n}\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_control_bridge/#request-class-formats","title":"Request Class Formats","text":"Parameter Format user 32 byte char array max force 1/0 ad 1/0 md5sum 32 byte char array"},{"location":"architecture/sdkvm/sdkvm_control_bridge/#response","title":"Response","text":"<p>Http status code.</p>"},{"location":"architecture/sdkvm/sdkvm_control_bridge/#force-login-webservice-role","title":"Force Login Webservice Role","text":"<pre><code>{\n            \"user\": \"kvm_user\",\n            \"force\": 1,\n            \"ad\": 1,\n            \"md5sum\": \"a7d794f4a687efd2094c589714e310e3\"\n}\n</code></pre> <ul> <li>Notes on value \"user\":<ul> <li>Force login will not work for username \"Boxilla\"</li> <li>For force login the user should be an existing user in boxilla and be present in the in sdkvm users database\"</li> </ul> </li> <li>Notes on \"force\" value:<ul> <li>1, This will ill work irrrepective of login status.</li> <li>0, No user should be logged in, this means the OSD must be in a logged out state.</li> </ul> </li> <li>Notes on \"ad\" field     ad = 0 for static user     ad = 1 for an active directory user (currently SDKVM does not support ad users)</li> <li>Notes on md5sum<ul> <li>If the checksums mismatch for database.json file then the SDKVM (webservice) will update the database.json, using the North Bound Rest Interface: <pre><code>\"https://%s/api/deskvue/v1/users\"\n</code></pre></li> </ul> </li> <li>The webservice will terminate any existing workspaces using http://localhost:5000/workspace restapi to get the workspaces status and then use the command below to terminate the connection: </li> </ul> <pre><code>/home/snuc/KeyBindings/Scripts/terminate_workspace/home/snuc/KeyBindings/Scripts/terminate_workspace.sh\n</code></pre> <ul> <li>The webservice will publish an mqtt message to the OSD after terminating the current workspace connections. This will take the following form:</li> </ul> <pre><code>    blackbox/sdkvm/deskvue/event/osd_sdkvm/force_login  -m {\"username\": \"user\"}\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_control_bridge/#force-login-osd-role","title":"Force Login OSD Role","text":"<ul> <li>The webservice component will send the above mqtt message to the OSD on receipt of Force Login from the REST API, so the OSD should subscribe to the topic: blackbox/sdkvm/deskvue/status/osd_sdkvm/force_login to receive this event.</li> <li>The OSD has to validate the user name received in the above message against the users.json file.</li> <li>The OSD must raise an alert for FORCE LOGOUT for the previous user if another user is currently logged in. The internal REST handler component will receive and process these alerts by adding them to the alerts queue.</li> <li>The OSD has to raise a FORCE LOGIN alert for the new user in the case of a succesful login. The internal REST handler component will receive and process these alerts by adding them to the alerts queue.</li> <li>The OSD has to raise a failure alert for FORCE LOGIN for the new user in the case of a failed login. </li> <li> <p>The following format is used to send all of these alerts: <pre><code>\"blackbox/sdkvm/deskvue/status/internal_rest_handler/alerts\" -m {\"alert_category\": int,\"alert_condition\": int,\"alert_component\": int,\n                                                            \"alert_command\": int, \"alert_status\":int, \"alert_description\":string,alert_context1\": string,\n                                                            ,\"alert_context2\":string,alert_context3\": string,alert_context4\": string}\n</code></pre></p> </li> <li> <p>Example Alert for Logout Success:  (INFO, OPERATION, USER, FORCE_LOGOUT, SUCCESS, \"OSD_LOGOUT\", prev_user_name_as_string, \"\", \"\", \"\") where the fields like INFO and OPERATION are integer values that can be found in the tables below.</p> </li> <li>Example Alert for Login Success: (INFO, OPERATION, USER, FORCE_LOGIN, SUCCESS, \"OSD_LOGIN\", new_user_name_string, \"\", \"\", \"\") where the fields like INFO and OPERATION are integer values that can be found in the tables below.</li> <li>Example Alert for Login Failed: (INFO, OPERATION, USER, FORCE_LOGIN, FAILED, \"OSD_LOGOUT\", prev_user_name_ch, \"\", \"\", \"\" )  where the fields like INFO and OPERATION are integer values that can be found in the tables below.</li> </ul> <p>The fields are populated as follows:</p> <p>alert_category </p> Field Value CRITICAL 0 WARNING 1 INFO 2 <p>alert_condition</p> Field Value METRIC 0 TRAIT 1 AVAILABILITY 2 OPERATION 3 SEVERITY 4 MONITOR 5 <p>alert_status</p> Field Value SUCCESS 0 FAILED 1 INPROGRESS 2 CANCELLED 3 TIMEOUT 4 ONLINE 5 <p>alert_component</p> Field Value USER 0 APPLIANCE 1 CONNECTION 2 ETHERNET 3 <p>alert_command</p> Field Value LOGIN 0 AUTO_LOGIN 1 MANUAL_LOGIN 2 POST_CONNECT_LOGIN 3 MANUAL_LOGOUT 4 GUI_TIMEOUT_LOGOUT 5 REBOOT 6 UPGRADE 7 START 8 DISCONNECT 9 RDP_CONNECTION 10 ETHERNET_LINK 11 <ul> <li>The OSD also needs to update force login username and id in system_level_settings.json in the case of a succesful login.</li> <li>The OSD must then go to the main window of the OSD using the login of the new user specified in the Force Login message.</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_control_bridge/#force-logout-requirements","title":"Force Logout Requirements","text":""},{"location":"architecture/sdkvm/sdkvm_control_bridge/#put-logoff-user-force-logoff","title":"PUT Logoff User (Force Logoff)","text":""},{"location":"architecture/sdkvm/sdkvm_control_bridge/#url_1","title":"URL","text":"<p>http://IP:7778/control/user</p>"},{"location":"architecture/sdkvm/sdkvm_control_bridge/#implementations-notes","title":"Implementations Notes","text":"<p>This node logs off the current user.</p>"},{"location":"architecture/sdkvm/sdkvm_control_bridge/#request-class-definition","title":"Request Class Definition","text":"Parameter Format action 32 byte char array"},{"location":"architecture/sdkvm/sdkvm_control_bridge/#request-class-json-structure_1","title":"Request Class JSON Structure","text":"<pre><code>{\n  \"action\": \"log_off\"\n}\n</code></pre> <p>Response</p> <p>Http status code.</p>"},{"location":"architecture/sdkvm/sdkvm_control_bridge/#force-logout-webservice-role","title":"Force Logout Webservice Role","text":"<ul> <li>The webservice will terminate any existing workspaces using http://localhost:5000/workspace restapi to get the workspaces status and then use the command below to terminate the connection:  <pre><code>/home/snuc/KeyBindings/Scripts/terminate_workspace/home/snuc/KeyBindings/Scripts/terminate_workspace.sh\n</code></pre></li> <li>The webservice component will send the mqtt message below to the OSD on receipt of Force Logout from the REST API <pre><code>    blackbox/sdkvm/deskvue/event/osd_sdkvm/force_logout -m {}\n</code></pre></li> </ul>"},{"location":"architecture/sdkvm/sdkvm_control_bridge/#force-logout-osd-role","title":"Force Logout OSD Role","text":"<ul> <li>The OSD should subscribe to the topic: blackbox/sdkvm/deskvue/status/osd_sdkvm/force_logout to receive the force_logout event.</li> <li> <p>The OSD must raise an alert for FORCE LOGOUT for the previous user if another user is currently logged in. <pre><code>\"blackbox/sdkvm/deskvue/status/internal_rest_handler/alerts\" -m {\"alert_category\": int,\"alert_condition\": int,\"alert_component\": int,\n                                                            \"alert_command\": int, \"alert_status\":int, \"alert_description\":string,alert_context1\": string,\n                                                            ,\"alert_context2\":string,alert_context3\": string,alert_context4\": string}\n</code></pre></p> </li> <li> <p>Example Alert for Logout Success:  (INFO, OPERATION, USER, FORCE_LOGOUT, SUCCESS, \"OSD_LOGOUT\", prev_user_name_as_string, \"\", \"\", \"\") where the fields like INFO and OPERATION are integer values that can be found in the tables above.</p> </li> <li>Example Alert for Logout Failed: (INFO, OPERATION, USER, FORCE_LOGOUT, FAILED, \"OSD_LOGOUT\", prev_user_name_ch, \"\", \"\", \"\" )  where the fields like INFO and OPERATION are integer values that can be found in the tables above.</li> <li>The OSD must then go to the login screen.</li> </ul> <p>The fields are populated as shown in the tables above. </p>"},{"location":"architecture/sdkvm/sdkvm_control_bridge/#force-workspace-requirements","title":"Force Workspace Requirements","text":""},{"location":"architecture/sdkvm/sdkvm_control_bridge/#proposed-force-workspace-rest-api","title":"Proposed Force Workspace REST API","text":"<p>PUT Force Workspace Unsecure</p>"},{"location":"architecture/sdkvm/sdkvm_control_bridge/#url_2","title":"URL","text":"<p>http://IP:7778/control/workspaces</p> <p>IMPLEMENTATION NOTES This node establishes a connection between the SDKVM and the Transmitters specified in the workspace. This object contains parameters used to log in a user and launch an associated connection. The user and associated connection must be configured prior calling this URL.</p>"},{"location":"architecture/sdkvm/sdkvm_control_bridge/#request-class-json-structure_2","title":"Request Class JSON Structure","text":"<pre><code>{\n    \"action\": \"force_workspace\",\n    \"workspace\": \"workspace-id\",\n    \"user\": \"cb-user\",\n}\n</code></pre> <p>REQUEST  CLASS  FORMATS</p> Parameter Format action force_workspace workspace 32 byte char array user 32 byte char array <p>Response</p> <p>Http status code.</p>"},{"location":"architecture/sdkvm/sdkvm_control_bridge/#force-workspace-webservice-role","title":"Force Workspace Webservice Role","text":"<ul> <li>The webservice receives a force workspace message on the REST API.</li> <li>The Webservice validates the message by checking the user name against the user names in users.json.</li> <li>The webservice also validates that the specified user has acess to the specified workspace and that the workspace ID is valid.</li> <li>The webservice then send the following MQTT message to the OSD;</li> </ul> <p><pre><code>blackbox/sdkvm/deskvue/cmd/osd_sdkvm/force_workspace -m {\"username\" : \"user\", \"workspace_id\" :  \"id\"}\n</code></pre> - The internal Rest Handler will supscribe to TBD message { \"usename\" : \"user\" } and send a post to https://%s/bxa-api/users/kvm/status on Boxilla.</p>"},{"location":"architecture/sdkvm/sdkvm_control_bridge/#force-workspace-osd-role","title":"Force Workspace OSD Role","text":"<ul> <li>The OSD should subscribe to the topic: blackbox/sdkvm/deskvue/cmd/osd_sdkvm/force_workspace.</li> <li> <p>There are three possible scenarios:</p> <ul> <li>The specified user is already logged in: In this case the OSD does not need to take any action regarding updating login details.</li> <li>There is no logged in user: In this case the OSD must log the user in and update the system_level_settings file. It must also call the resrapi_cli (this will notify Boxilla that the specified user is logged into the SDKVM): </li> </ul> <p><pre><code>/usr/local/bin/restapi_cli -j user_login username &amp;\n</code></pre> - If the existing user and the specified user are different: In this case the OSD must logout the existing user and login with the specified user. It must also call the resrapi_cli (this will notify Boxilla that the specified user is logged into the SDKVM): </p> <pre><code>/usr/local/bin/restapi_cli -j user_login username &amp;\n</code></pre> </li> <li> <p>If the specified user is not logged in then the OSD must login the specified user.</p> </li> <li>The OSD must update the system_level_settings file to the username and the associated user id.</li> <li>If the login of the user fails the OSD must display an appropriate error message.</li> <li>The OSD must then launch the specified workspace.</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_freerdp_prototyping/","title":"Building Current FreeRDP Client","text":"<p>Based on Release 2.7.0 on Github</p>"},{"location":"architecture/sdkvm/sdkvm_freerdp_prototyping/#installing-on-ubuntu-linux","title":"Installing on Ubuntu Linux","text":"<ul> <li>git clone https://github.com/FreeRDP/FreeRDP.git</li> <li>cd FreeRDP</li> </ul> <p>Build Reference</p>"},{"location":"architecture/sdkvm/sdkvm_freerdp_prototyping/#flatpak","title":"Flatpak","text":"<p>Note: This appears to be broken, the fltpaks for org.freedesktop.Sdk do not appear to be on the flatpakrepo</p> <ul> <li>sudo add-apt-repository ppa:flatpak/stable</li> <li>sudo apt update</li> <li>sudo apt install flatpak</li> <li>sudo apt install gnome-software-plugin-flatpak</li> <li>flatpak remote-add --if-not-exists flathub https://flathub.org/repo/flathub.flatpakrepo</li> <li>flatpak remote-add --if-not-exists flathub org.freedesktop.Sdk//19.08</li> <li>flatpak remote-add --if-not-exists flathub org.freedesktop.Platform.ffmpeg-full//19.08</li> <li>flatpak remote-add --if-not-exists flathub org.freedesktop.Platform//19.08</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_freerdp_prototyping/#installing-dependencies-and-tools","title":"Installing Dependencies and Tools","text":"<pre><code>sudo apt-get install ninja-build build-essential git-core debhelper cdbs dpkg-dev autotools-dev cmake pkg-config xmlto libssl-dev docbook-xsl xsltproc libxkbfile-dev libx11-dev libwayland-dev libxrandr-dev libxi-dev libxrender-dev libxext-dev libxinerama-dev libxfixes-dev libxcursor-dev libxv-dev libxdamage-dev libxtst-dev libcups2-dev libpcsclite-dev libasound2-dev libpulse-dev libjpeg-dev libgsm1-dev libusb-1.0-0-dev libudev-dev libdbus-glib-1-dev uuid-dev libxml2-dev libgstreamer1.0-dev libgstreamer0.10-dev libgstreamer-plugins-base1.0-dev libgstreamer-plugins-base0.10-dev libfaad-dev libfaac-dev libavcodec-dev libswscale-dev libcairo2-dev libfuse-dev mlocate net-tools subversion \n\n\n\n\n# The following are optional dependencies\nsudo apt-get install libcunit1-dev libdirectfb-dev xmlto doxygen libxtst-dev\n</code></pre> <p>For Ubuntu 21:0 use this instead</p> <pre><code>sudo apt-get install ninja-build build-essential git-core debhelper cdbs dpkg-dev autotools-dev cmake pkg-config xmlto libssl-dev docbook-xsl xsltproc libxkbfile-dev libx11-dev libwayland-dev libxrandr-dev libxi-dev libxrender-dev libxext-dev libxinerama-dev libxfixes-dev libxcursor-dev libxv-dev libxdamage-dev libxtst-dev libcups2-dev libpcsclite-dev libasound2-dev libpulse-dev libjpeg-dev libgsm1-dev libusb-1.0-0-dev libudev-dev libdbus-glib-1-dev uuid-dev libxml2-dev libgstreamer1.0-dev libgstreamer-plugins-base1.0-dev libgstreamer-plugins-base1.0-dev libfaad-dev libfaac-dev libavcodec-dev libswscale-dev libcairo2-dev libfuse-dev glade xdotool libspdlog-dev libcairo2 ffmpeg nfs-common wmctrl xdotool\n</code></pre> <p>For Ubuntu 20:04 use</p> <p><pre><code>sudo apt-get install git ninja-build build-essential git-core debhelper cdbs dpkg-dev autotools-dev cmake pkg-config xmlto libssl-dev docbook-xsl xsltproc libxkbfile-dev libx11-dev libwayland-dev libxrandr-dev libxi-dev libxrender-dev libxext-dev libxinerama-dev libxfixes-dev libxcursor-dev libxv-dev libxdamage-dev libxtst-dev libcups2-dev libpcsclite-dev libasound2-dev libpulse-dev libjpeg-dev libgsm1-dev libusb-1.0-0-dev libudev-dev libdbus-glib-1-dev uuid-dev libxml2-dev libgstreamer1.0-dev libgstreamer-plugins-base1.0-dev libgstreamer-plugins-base1.0-dev libfaad-dev libfaac-dev libcunit1-dev libdirectfb-dev xmlto doxygen libxtst-dev gparted curl libavutil-dev libavresample-dev libavcodec-dev glade xdotool libspdlog-dev libcairo2 ffmpeg  nfs-common wmctrl xdotool\n</code></pre> To mount the shared area</p> <pre><code>sudo mount -t nfs 10.211.128.208:/data/shared_area ~/shared_area  -orw,bg,rsize=1024,wsize=1024,namlen=255,hard,nolock\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_freerdp_prototyping/#additional-utilities","title":"Additional Utilities","text":"<p>'''sh     sudo apt install mlocate     sudo apt install nasm '''</p>"},{"location":"architecture/sdkvm/sdkvm_freerdp_prototyping/#how-to-search-for-packages-in-ubuntu","title":"How to search for packages in Ubuntu","text":"<p>We can search for utilities with sudo apt search  For example: <ul> <li>sudo apt search libavcodec-devs</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_freerdp_prototyping/#to-configure-and-build","title":"To Configure and Build","text":"<p>Run</p> <p>cmake -GNinja -DCHANNEL_URBDRC=ON -DWITH_DSP_FFMPEG=ON -DWITH_CUPS=ON -DWITH_PULSE=ON -DWITH_FAAC=ON -DWITH_FAAD2=ON -DWITH_GSM=ON -B -H <pre><code>cmake -GNinja -DCHANNEL_URBDRC=ON -DWITH_DSP_FFMPEG=ON -DWITH_CUPS=ON -DWITH_PULSE=ON -DWITH_FAAC=ON -DWITH_FAAD2=ON -DWITH_GSM=ON -BFreeRDP_Build -HFreeRDP\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_freerdp_prototyping/#building","title":"Building","text":"<pre><code>cmake --build FreeRDP\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_freerdp_prototyping/#install-on-windows","title":"Install on Windows","text":"<ul> <li>Install Python from here or from the app store</li> <li> <p>In a command window: pip3 install --user meson</p> </li> <li> <p>CMake</p> </li> <li>NASM</li> <li>Perl</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_freerdp_prototyping/#building-dependent-libraries-from-source","title":"Building Dependent Libraries from Source","text":"<p>Use the following to obtain the source</p> <ul> <li>git clone https://github.com/cisco/openh264.git -b <li>git clone https://github.com/openssl/openssl.git -b <li>git clone https://github.com/FreeRDP/freerdp.git -b"},{"location":"architecture/sdkvm/sdkvm_freerdp_prototyping/#installing-pre-built-binaries-with-vcpkg","title":"Installing pre-built binaries with vcpkg","text":"<p>The package installer vcpkg can be used to install many of the dependent libraries. Assuming it is installed in c:\\vcpkg\\vcpkg, open a command prompt in that directory and run</p> <ul> <li>vcpkg install cairo,  from c:\\vcpkg\\vcpkg</li> <li>vcpkg install ffmpeg,  from c:\\vcpkg\\vcpkg</li> <li>vcpkg install libusb,  from c:\\vcpkg\\vcpkg</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_freerdp_prototyping/#building-on-windows-10","title":"Building on Windows 10","text":"<ul> <li>Discussion on Windows 10 issues</li> <li>Guide to Building on Windows</li> <li>use cmake-gui to configure or to see options you can configure, this will allow you enable and disable specific features</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_freerdp_prototyping/#how-to-configure-cmake","title":"How to configure cmake","text":"<pre><code>:: Create a directory for the dependencies\n:: mkdir C:\\Users\\BBOX\\SDKVM\\deps\n:: Copy all of the lib, bin and include directories into this dependencies directory from the dependent libraries you downloaded. for example from C:\\vcpkg\\vcpkg\\packages\n:: We can then specify the dependency path with: -DCMAKE_PREFIX_PATH. This tells cmake where to look for libraries on windows systems.\n\n\nSET DEPENDENCIES=C:\\Users\\BBOX\\SDKVM\\deps\nSET BASE_DIRECTORY=C:\\Users\\BBOX\\SDKVM\\FreeRDP\nSET VCPKGS_DIRECTORY=C:\\vcpkg\\vcpkg\\packages\nSET BUILD_DIRECTORY=%BASE_DIRECTORY%\\FreeRDP_Build\nSET SOURCE_DIRECTORY=C:\\Users\\BBOX\\SDKVM\\FreeRDP\\FreeRDP\n\n:: Remove all generated CMake files\ncd /d %BUILD_DIRECTORY%\nfor /F \"delims=\" %%i in ('dir /b') do (rmdir \"%%i\" /s/q || del \"%%i\" /s/q)\ncd ..\n\n\n\ncmake -GNinja -B%BUILD_DIRECTORY%  -H%SOURCE_DIRECTORY%  -DCMAKE_PREFIX_PATH=%DEPENDENCIES% -DCMAKE_BUILD_TYPE=Release -DCHANNEL_URBDRC=OFF -DWITH_CAIRO=ON -DWITH_SWSCALE=ON -DWITH_FFPMEG=ON\ncmake --build %BUILD_DIRECTORY% \n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_freerdp_prototyping/#how-to-configure-include-and-library-directories","title":"How To Configure Include and Library Directories","text":"<p>In windows, it is recommended that one use a single dependency directory as ashown above rather than set individual directories.</p> <pre><code>SET OPENSSL_ROOT_DIR=C:\\Program Files (x86)\\OpenSSL-Win32\nSET LIBUSB_1_LIBRARY=%VCPKGS_DIRECTORY%\\libusb_x86-windows\\lib\\libusb-1.0.lib\nSET LIBUSB_1_INCLUDE_DIR=%VCPKGS_DIRECTORY%\\libusb_x86-windows\\include\\libusb-1.0\nSET SWScale_INCLUDE_DIR=%VCPKGS_DIRECTORY%\\ffmpeg_x86-windows\\include\\libswscale\nSET SWScale_LIBRARY=%VCPKGS_DIRECTORY%\\ffmpeg_x86-windows\\lib\\swscale.lib\nSET AVCODEC_INCLUDE_DIR=%VCPKGS_DIRECTORY%\\ffmpeg_x86-windows\\include\\libavcodec\nSET AVCODEC_LIBRARY=%VCPKGS_DIRECTORY%\\ffmpeg_x86-windows\\lib\nSET AVUTIL_LIBRARY=%VCPKGS_DIRECTORY%\\ffmpeg_x86-windows\\lib\nSET AVUTIL_INCLUDE_DIR=%VCPKGS_DIRECTORY%\\ffmpeg_x86-windows\\include\\libavutil\nSET SWRESAMPLE_LIBRARY=%VCPKGS_DIRECTORY%\\ffmpeg_x86-windows\\lib\nSET SWRESAMPLE_INCLUDE_DIR=%VCPKGS_DIRECTORY%\\ffmpeg_x86-windows\\include\\libswresample\n\nSET CAIRO_INCLUDE_DIR=%VCPKGS_DIRECTORY%\\cairo_x86-windows\\include\\cairo\nSET CAIRO_LIBRARY=%VCPKGS_DIRECTORY%\\vcpkg\\packages\\cairo_x86-windows\\lib\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_freerdp_prototyping/#creating-a-visual-studio-solution-file","title":"Creating A Visual Studio Solution File","text":"<pre><code>cmake . -G\"Visual Studio 15\" -B%BUILD_DIRECTORY%  -H%SOURCE_DIRECTORY%  -DCMAKE_PREFIX_PATH=%DEPENDENCIES% -DCMAKE_BUILD_TYPE=Release -DCHANNEL_URBDRC=OFF -DWITH_CAIRO=ON -DWITH_SWSCALE=ON -DWITH_FFPMEG=ON\ncmake --build %BUILD_DIRECTORY% \n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_freerdp_prototyping/#build-location","title":"Build Location","text":"<ul> <li>C:\\Users\\BBOX\\SDKVM\\FreeRDP\\FreeRDP_Build\\wfreerdp.exe</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_freerdp_prototyping/#freerdp-command-line","title":"FreeRDP Command Line","text":""},{"location":"architecture/sdkvm/sdkvm_freerdp_prototyping/#options","title":"Options","text":"<pre><code>Usage: xfreerdp [file] [options] [/v:&lt;server&gt;[:port]]\nSyntax:\n\n/flag (enables flag)\n/option:&lt;value&gt; (specifies option with value)\n+toggle -toggle (enables or disables toggle, where '/' is a synonym of '+')\n\n/v:&lt;server&gt;[:port]    Server hostname\n/port:&lt;number&gt;        Server port\n/w:&lt;width&gt;            Width\n/h:&lt;height&gt;           Height\n/size:&lt;width&gt;x&lt;height&gt; Screen size\n/f                    Fullscreen mode\n/bpp:&lt;depth&gt;          Session bpp (color depth)\n/kbd:0x&lt;layout id&gt; or &lt;layout name&gt; Keyboard layout\n/kbd-list             List keyboard layouts\n/kbd-type:&lt;type id&gt;   Keyboard type\n/kbd-subtype:&lt;subtype id&gt; Keyboard subtype\n/kbd-fn-key:&lt;function key count&gt; Keyboard function key count\n/admin                Admin (or console) session\n/multimon             Multi-monitor\n/workarea             Work area\n/t:&lt;title&gt;            Window title\n+decorations (default:off) Window decorations\n/a                    Addin\n/vc                   Static virtual channel\n/dvc                  Dynamic virtual channel\n/u:[&lt;domain&gt;\\\\]&lt;user&gt; or &lt;user&gt;[@&lt;domain&gt;] Username\n/p:&lt;password&gt;         Password\n/d:&lt;domain&gt;           Domain\n/g:&lt;gateway&gt;[:port]   Gateway Hostname\n/gu:[&lt;domain&gt;\\\\]&lt;user&gt; or &lt;user&gt;[@&lt;domain&gt;] Gateway username\n/gp:&lt;password&gt;        Gateway password\n/gd:&lt;domain&gt;          Gateway domain\n/app:||&lt;alias&gt; or &lt;executable path&gt; Remote application program\n/app-name:&lt;app name&gt;  Remote application name for user interface\n/app-icon:&lt;icon path&gt; Remote application icon for user interface\n/app-cmd:&lt;parameters&gt; Remote application command-line parameters\n/app-file:&lt;file name&gt; File to open with remote application\n/app-guid:&lt;app guid&gt;  Remote application GUID\n+compression (default:off) Compression\n/shell                Alternate shell\n/shell-dir            Shell working directory\n/audio-mode           Audio output mode\n/mic                  Audio input (microphone)\n/network              Network connection type\n+clipboard (default:off) Redirect clipboard\n+fonts (default:off)  Smooth fonts (cleartype)\n+aero (default:off)   Desktop composition\n+window-drag (default:off) Full window drag\n+menu-anims (default:off) Menu animations\n-themes (default:on)  Themes\n-wallpaper (default:on) Wallpaper\n/gdi:&lt;sw|hw&gt;          GDI rendering\n/rfx                  RemoteFX\n/rfx-mode:&lt;image|video&gt; RemoteFX mode\n/frame-ack:&lt;number&gt;   Frame acknowledgement\n/nsc                  NSCodec\n/jpeg                 JPEG codec\n/jpeg-quality:&lt;percentage&gt; JPEG quality\n-nego (default:on)    protocol security negotiation\n/sec:&lt;rdp|tls|nla|ext&gt; force specific protocol security\n-sec-rdp (default:on) rdp protocol security\n-sec-tls (default:on) tls protocol security\n-sec-nla (default:on) nla protocol security\n+sec-ext (default:off) nla extended protocol security\n/cert-name:&lt;name&gt;     certificate name\n/cert-ignore          ignore certificate\n/pcb:&lt;blob&gt;           Preconnection Blob\n/pcid:&lt;id&gt;            Preconnection Id\n/vmconnect:&lt;vmid&gt;     Hyper-V console (use port 2179, disable negotiation)\n-authentication (default:on) authentication (hack!)\n-encryption (default:on) encryption (hack!)\n-grab-keyboard (default:on) grab keyboard\n-mouse-motion (default:on) mouse-motion\n/parent-window:&lt;window id&gt; Parent window id\n-bitmap-cache (default:on) bitmap cache\n-offscreen-cache (default:on) offscreen bitmap cache\n-glyph-cache (default:on) glyph cache\n/codec-cache:&lt;rfx|nsc|jpeg&gt; bitmap codec cache\n-fast-path (default:on) fast-path input/output\n+async-input (default:off) asynchronous input\n+async-update (default:off) asynchronous update\n/version              print version\n/help                 print help\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_freerdp_prototyping/#examples","title":"Examples","text":"<pre><code>xfreerdp connection.rdp /p:Pwd123! /f\nxfreerdp /u:CONTOSO\\\\JohnDoe /p:Pwd123! /v:rdp.contoso.com\nxfreerdp /u:JohnDoe /p:Pwd123! /w:1366 /h:768 /v:192.168.1.100:4489\nxfreerdp /u:JohnDoe /p:Pwd123! /vmconnect:C824F53E-95D2-46C6-9A18-23A5BB403532 /v:192.168.1.100\n\nClipboard Redirection: +clipboard\n\nDrive Redirection: /a:drive,home,/home\nSmartcard Redirection: /a:smartcard,&lt;device&gt;\nPrinter Redirection: /a:printer,&lt;device&gt;,&lt;driver&gt;\nSerial Port Redirection: /a:serial,&lt;device&gt;\nParallel Port Redirection: /a:parallel,&lt;device&gt;\nPrinter Redirection: /a:printer,&lt;device&gt;,&lt;driver&gt;\n\nAudio Input Redirection: /dvc:audin,sys:alsa\nAudio Output Redirection: /vc:rdpsnd,sys:alsa\n\nMultimedia Redirection: /dvc:tsmf,sys:alsa\nUSB Device Redirection: /dvc:urbdrc,id,dev:054c:0268\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_freerdp_prototyping/#command-lines-for-testing","title":"Command Lines for Testing","text":""},{"location":"architecture/sdkvm/sdkvm_freerdp_prototyping/#windows","title":"Windows","text":"<pre><code>wfreerdp.exe /u:BBOX /p:cloud /w:1920 /h:1080 /cert-ignore /rfx /v:192.168.1.10\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_freerdp_prototyping/#linux","title":"Linux","text":"<pre><code>xfreerdp /boxilla:00:8C:10:1C:C9:1F  /w:1920 /h:1080 /gdi:sw  /sec-rdp /cert-ignore /rfx /v:10.211.130.107\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_freerdp_prototyping/#settings-for-evaluation","title":"Settings for Evaluation","text":"<pre><code>-DCMAKE_BUILD_TYPE=Release -DCHANNEL_URBDRC=OFF -DWITH_CAIRO=OFF -DWITH_SWSCALE=OFF -DWITH_FFPMEG=OFF -DWITH_OPENSSL=ON -DWITH_SSE2=ON\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_freerdp_prototyping/#build-the-remoate-app-code","title":"Build the Remoate App Code","text":"<p>The remote app consists of three elements - The OSD or GUI written in C# located at svn://svn-server/SoftwareClients/trunk/GUI_Apps/EmeraldRA2.0 - A version of FreeRDP that can interoperate with the Emerald KVM products: svn://svn-server/Zinq/Corrib/branches/cloudRDP/wCloudBBv2. This is based on FreeRDP-2.0.0-rc3 (https://github.com/FreeRDP/FreeRDP/releases/tag/2.0.0-rc2) - A Version of FreeRDP that can interoperate with RDP VMs: svn://10.211.128.12/SoftwareClients/trunk/RDP_Apps/VM/wCloudRDP/freerdp-2.3.1, this is based on freerdp-2.3.1 (https://github.com/FreeRDP/FreeRDP/releases/tag/2.3.1)</p>"},{"location":"architecture/sdkvm/sdkvm_freerdp_prototyping/#vscode-setup","title":"VSCode Setup","text":""},{"location":"architecture/sdkvm/sdkvm_freerdp_prototyping/#guides","title":"Guides","text":"<p>Guide to setting up VSCode</p>"},{"location":"architecture/sdkvm/sdkvm_freerdp_prototyping/#configurations","title":"Configurations","text":"<p>Assuming we have configured CMake for a build diretcory of FreeRDP_Build_KVMCLIENT</p> <pre><code>{\n  // Use IntelliSense to learn about possible attributes.\n  // Hover to view descriptions of existing attributes.\n  // For more information, visit: https://go.microsoft.com/fwlink/?linkid=830387\n  \"version\": \"0.2.0\",\n  \"configurations\": [\n    {\n      \"name\": \"(gdb) Launch\",\n      \"type\": \"cppdbg\",\n      \"request\": \"launch\",\n      \"program\": \"${workspaceFolder}/../FreeRDP_Build_KVMCLIENT/client/X11/xfreerdp\",\n      \"args\": [\n        \"/boxilla:id:8:0:27:c0:a1:9d\",\n        \"/log-level:debug\",\n        \"/sec-rdp\",\n        \"/rfx\",\n        \"/shared\",\n        \"/v:192.168.1.161\"\n      ],\n      \"stopAtEntry\": false,\n      \"cwd\": \"${fileDirname}\",\n      \"environment\": [],\n      \"externalConsole\": false,\n      \"MIMode\": \"gdb\",\n      \"setupCommands\": [\n        {\n          \"description\": \"Enable pretty-printing for gdb\",\n          \"text\": \"-enable-pretty-printing\",\n          \"ignoreFailures\": true\n        },\n        {\n          \"description\": \"Set Disassembly Flavor to Intel\",\n          \"text\": \"-gdb-set disassembly-flavor intel\",\n          \"ignoreFailures\": true\n        }\n      ]\n    }\n  ]\n}\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_freerdp_prototyping/#restoring-the-nucs","title":"Restoring the NUCs","text":"<ul> <li>Using the Restore USB</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_freerdp_prototyping/#reference","title":"Reference","text":"<p>FreeRDP Builds ferom Cloudbase</p>"},{"location":"architecture/sdkvm/sdkvm_hotkey_manager/","title":"SDKVM Hot Key Manager","text":"<p>The BlackBox Hotkey Manager is responsible for managing hotkey sequences on the SDKVM. It allows us trap double tab key sequences like ctrl ctrl or printscreen printscreen and use these sequences as control keys. This allows us support industry standard kvm hot key sequences.</p> <p>The service is written in Python and can be run on the command line with:</p> <pre><code>sudo python3 bb_hotkeys_service.py /home/snuc/bb_hotkeys.json\n</code></pre> <p>The service can be configured with a json script.</p> <ul> <li>The primer time is the time in milliseconds of the window within which the control keys must be pressed.</li> <li>The action time is the time the service will wait after the primer time for an action key to be pressed.</li> <li>Primer Keys are the control keys that prepare the service to expect an action. A primer key has two properties: <ul> <li>A description that describes the key</li> <li>A keycode for the desired key</li> </ul> </li> <li>Action Keys are the keys that are associated with a specific action.</li> <li>An action key has three properties:<ul> <li>A description that describes the key</li> <li>A keycode for the desired key</li> <li>A command that will be executed when the key is pressed.</li> <li>A user that provides the user context in which the command will run.</li> </ul> </li> </ul> <pre><code>{\n    \"primer-time\": 0.300,\n    \"action-time\": 0.600,\n    \"primer-keys\":\n        [{ \"desc\": \"ctrl\",\n           \"code\": 29,\n           \"action-keys\":\n               [\n               {\n                    \"desc\": \"'r'\",\n                    \"code\": 19,\n                    \"cmd\": \"/home/snuc/KeyBindings/Scripts/relaunch_workspace.sh\",\n                    \"user\": \"snuc\"\n                },\n                { \n                    \"desc\": \"'last workspace'\",\n                    \"code\": 25,\n                    \"cmd\": \"/usr/bin/python /home/snuc/workspaceserver/launch_workspace.py -wl\",\n                    \"user\": \"snuc\"\n                },\n                ]\n        }]\n}\n</code></pre> <p>The handler also supports the concept of builtin commands.</p> <pre><code>               {\n                \"desc\": \"up\",\n                \"code\": 103,\n                \"cmd\": \"builtin:x11:maximize\"\n                    },\n                    {\n                \"desc\": \"down\",\n                \"code\": 108,\n                \"cmd\": \"builtin:x11:unmaximize\"\n                }\n</code></pre> <p>These commands allow us access internal built in functions that the bb_hotkey_service provides. These may be actions associated with maximizing or minimizing windows or actions which must be done on the currently active window.</p> <p>The properties for an individual user can be defined in the file:</p> <pre><code>  \"users\": {\n        \"snuc\": {\n            \"cwd\": \"/home/snuc\",\n            \"env\": {\n                \"DISPLAY\": \":0\",\n                \"HOME\": \"/home/snuc\",\n                \"PATH\": \"/home/snuc/.local/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin:/snap/bin\"\n            }\n        }\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_hotkey_manager/#troubleshooting","title":"TroubleShooting","text":"<p>The linux utility showkey can be used to find keycodes and scancodes</p> <pre><code>sudo showkey\n</code></pre> <pre><code>sudo showkey --scancodes # or sudo showkey --keycodes, the default is keycodes\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_hotkey_manager/#dependencies-and-setup","title":"Dependencies and Setup","text":"<ul> <li> <p>Install the following dependencies via the apt package manager:</p> <ul> <li>sudo apt install python3-aionotify python3-pyudev python3-evdev</li> <li>This step is a part of firmware install in <code>install_templates/post_firmware_install.sh</code> script.</li> </ul> </li> <li> <p>To run as the snuc user (non-root) you must make 'snuc' user as a part of 'input' group:</p> <ul> <li>/usr/bin/sudo /usr/sbin/usermod -aG input snuc</li> <li>This step is a part of firmware install in <code>install_templates/post_firmware_install.sh</code> script.</li> </ul> </li> <li> <p>Add a udev rule to include 'input' group in /dev/uinput along with access permission 660</p> <ul> <li>Added in sdkvm_config (etc/udev/rules.d/99-uinput.rules) and getting copied to target at (/etc/udev/rules.d/99-uinput.rules)  <pre><code>cat /etc/udev/rules.d/99-uinput.rules\nKERNEL==\"uinput\", GROUP=\"input\", MODE=\"0660\"\n</code></pre></li> </ul> </li> <li> <p>Place the service file in \"/home/snuc/.config/systemd/user/bb_service_hotkeys.service\"</p> <ul> <li>Service file is the part of sdkvm_config (home/snuc/.config/systemd/user/bb_service_hotkeys.service)</li> </ul> </li> <li>Run the service using <code>systemctl --user start bb_service_hotkeys</code><ul> <li>A start utility is placed in sdkvm_config (home/snuc/SDKVM/scripts/servicemgmt/starthotkeys.sh) which gets copied in /usr/bin/ on the target</li> <li>The start utility is called from openbox autostart.sh script. </li> </ul> </li> <li>Stop the service using <code>systemctl --user stop bb_service_hotkeys</code><ul> <li>A stop utility is placed in sdkvm_config (home/snuc/SDKVM/scripts/servicemgmt/stophotkeys.sh) which gets copied in /usr/bin/ on the target</li> </ul> </li> </ul>"},{"location":"architecture/sdkvm/sdkvm_hotkey_manager/#source-code","title":"Source Code","text":"<p>The source code for this is in: https://github.com/SDKVM-Core/bb_hotkeys</p>"},{"location":"architecture/sdkvm/sdkvm_monitor_management/","title":"SDKVM Monitor Management","text":""},{"location":"architecture/sdkvm/sdkvm_monitor_management/#requirements","title":"Requirements","text":"<ul> <li>On powerup the SDKVM Monitor Management Layer should detect available monitors and create a configuration script that the OSD can call to configure its monitor configuration screen. The system should be cacapble of detecting monitors that were not part of a previous configuration.</li> <li>The user has the ability to configure the placement, resolution and rate of connected monitors through the OSD. The SDKVM Monitor Management Layer should provide a means of writing this desired configuration to the system.</li> <li>The SDKVM Monitor Management Layer must provide a means of detecting hotplug of monitors and communicate their addition or removal to the OSD screen. We could use an MQTT message for this as the OSD screen has an MQTT client.</li> <li>It should provide a script that can be called from a file placed in /lib/systemd/system-sleep/reconfigure_displays.sh, for example: <pre><code>#!/bin/sh\ncase $1/$2 in\n  pre/*)\n    echo \"Going to $2...\"\n    # Place your pre suspend commands here, or `exit 0` if no pre suspend action required\n    exit 0  \n    ;;\n  post/*)\n    echo \"Waking up from $2...\"\n    # Place your post suspend (resume) commands here, or `exit 0` if no post suspend action required\n    /home/snuc/.config/openbox/configure_monitors.sh\n    ;;\nesac\n</code></pre></li> <li>It should provide a simple interface to disable or enable monitor sleep depending on the users requirements set on the OSD.</li> </ul> <p>Note: If using the older Wall Street Model as your SDKVM then delete HDMI-2 from this file:  /etc/X11/xorg.conf.d/xorg.conf This is required because that device has a HDMI-2 port.</p>"},{"location":"architecture/sdkvm/sdkvm_network_redundancy/","title":"SDKVM network redundancy and port aggregation","text":""},{"location":"architecture/sdkvm/sdkvm_network_redundancy/#current-implementation","title":"Current Implementation","text":"<p>Despite having two Ethernet interfaces, Deskvue only supports a single Ethernet interface for all forms of network communication.</p>"},{"location":"architecture/sdkvm/sdkvm_network_redundancy/#proposed-implementation","title":"Proposed Implementation","text":"<p>To enhance network reliability and performance, we propose binding Deskvue's dual Ethernet interfaces into a single logical link, enabling link redundancy and aggregation using the LACP protocol.</p> Deskvue Bond Configuration"},{"location":"architecture/sdkvm/sdkvm_network_redundancy/#bonding-driver-and-modes","title":"Bonding driver and modes","text":"<p>Ubuntu supports aggregating multiple Ethernet links into a logical bond interface using standard Linux bonding driver. Bonding driver provides following bonding mode. </p> <ul> <li>Balance-rr: Round robin policy</li> <li>Active-Backup: Pure network redundancy (No aggregation)</li> <li>Balance-xor</li> <li>Broadcast</li> <li>802.3ad: LACP</li> <li>Balance-tlb: Adaptive transmit load balancing</li> <li>Balance-alb: Adaptive load balancing</li> </ul> <p>** A network bond could use only one mode at a time. **</p>"},{"location":"architecture/sdkvm/sdkvm_network_redundancy/#deskvue-with-active-backup-bonding-mode","title":"Deskvue with \u201cActive-Backup\u201d bonding mode","text":"<ul> <li>By default, Deskvue will operate in the 'active-backup' bonding mode providing network redundancy.</li> <li>This is equivalent to the physical switchover mode in the 4K and PE.</li> <li>Essential active-backup bonding options<ul> <li>Bonding mode: Active-Backup</li> <li>Miimon: 100ms</li> <li>Primary_reselect: 2 (Don\u2019t switch back to primary when plugged in)</li> </ul> </li> </ul> Deskvue \"Active-Backup\" Bonding Mode"},{"location":"architecture/sdkvm/sdkvm_network_redundancy/#deskvue-with-8023ad-lacp-bonding-mode","title":"Deskvue with \u201c802.3ad\u201d (LACP) bonding mode","text":"<ul> <li> <p>If LACP option is enabled through GUI/Boxilla, Deskvue bonding mode will switch to \u201c802.3ad\u201d LACP mode with following parameters:</p> <ul> <li>LACP mode = Active</li> <li>LACP rate = fast</li> <li>Xmit Algo = layer 2+3</li> <li>Miimon = 100 ms </li> <li>Radomized ad_actor-system_prio, ad_actor_system, ad_user_port_key</li> </ul> </li> <li> <p>In Deskvue, after turning on the LACP in active mode, both Ethernet interface starts sending the LACP PDU.</p> </li> <li>In EMD 4K or PE, due to restrictions in the TOE driver, only a single Ethernet interface can send LACP PDUs, effectively enabling communication through a single active interface.</li> </ul> Deskvue \"802.3ad\" (LACP) Bonding Mode"},{"location":"architecture/sdkvm/sdkvm_network_redundancy/#deskvue-lacp-multi-lag-mode","title":"Deskvue LACP multi-LAG mode","text":"<ul> <li>Once LACP is enabled on the Deskvue side, the LACP working mode is determined by switch-side configuration. </li> <li>Below are two configurations that enabled LACP to function exclusively in LACP switchover mode (same as appliance LACP functionality)</li> <li>This configuration allows for the detection of switch-side failures and trigger \u201cLACP switchover\u201d (Media converter use case).</li> </ul> Deskvue (LACP) Multi Lag - Single switch  Deskvue (LACP) Multi Lag - Multi switch"},{"location":"architecture/sdkvm/sdkvm_network_redundancy/#deskvue-lacp-single-lag-mode","title":"Deskvue LACP single-LAG mode","text":"<ul> <li>When both the switch side ports are bonded together in a single LAG, the configuration supports both LACP aggregation and switchover. </li> <li>The aggregation is done on the basis of per connection stream and determined through the xmit_algo selected on the transmit side. </li> </ul> Deskvue (LACP) Single Lag - Link aggregation"},{"location":"architecture/sdkvm/sdkvm_network_redundancy/#link-aggregation-in-lacp","title":"Link aggregation in LACP","text":"<ul> <li>The connection stream from one host will be transmitted on a single physical Ethernet channel and the stream from another host will be transmitted on another Ethernet channel. </li> <li>Unlike balance-rr mode where stream is divided between two ports, this is done to hold in-order TCP delivery principle. </li> <li>Ethernet channel is determined through xmit_algo selected. <ul> <li>Layer2+3: Uses XOR of hardware MAC addresses and IP addresses to generate the hash and then hash is reduced modulo slave count </li> </ul> </li> </ul> Deskvue Link aggregation"},{"location":"architecture/sdkvm/sdkvm_network_redundancy/#downside-of-link-aggregation-in-lacp","title":"Downside of Link aggregation in LACP","text":"<ul> <li>A shared session from one TX will always flow from same Ethernet channel. </li> <li>If two hosts falls into same Ethernet channel, how we can avoid link saturation?</li> <li>Shall we explore another bonding mode such as adaptive load balancing? Add it as a GUI option to select between active-backup, adaptive load balancing or LACP mode. </li> <li>Need more test and analysis in link aggregation and load balancing. </li> </ul>"},{"location":"architecture/sdkvm/sdkvm_network_redundancy/#impact-on-deskvue-applications","title":"Impact on Deskvue applications","text":""},{"location":"architecture/sdkvm/sdkvm_network_redundancy/#upgrade-requirement","title":"Upgrade requirement","text":"<p>Seamless transfer from enp45s0 to bond0 without deleting any customer network configuration.</p>"},{"location":"architecture/sdkvm/sdkvm_network_redundancy/#all-applications","title":"All applications","text":"<p>Refer to bond0 instead of enp45s0.</p>"},{"location":"architecture/sdkvm/sdkvm_network_redundancy/#guiboxilla","title":"GUI/Boxilla","text":"<ul> <li>Remove the restrictions of disabling enp0s31f6 (second ethernet port).</li> <li>start working with bond0 configuration in regards to setting IP, gateway, DNS etc.</li> <li>add LACP enable option (Require reboot?).</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_network_redundancy/#restore-configuration","title":"Restore configuration","text":"<ul> <li>After restore bond0 should be up with static default IP.</li> <li>Restore should ideally delete and recreate the bond configuration in active-backup mode. </li> </ul>"},{"location":"architecture/sdkvm/sdkvm_network_redundancy/#export-settings","title":"Export settings","text":"<p>Support LACP config in export and import. </p>"},{"location":"architecture/sdkvm/sdkvm_network_redundancy/#connection-control","title":"Connection control","text":"<p>Need persistent connection feature to bring the connection up after LACP switchover</p>"},{"location":"architecture/sdkvm/sdkvm_networking/","title":"SDKVM Networking","text":"<p>The OSD Networking tab makes calls into the operating system using the nmcli utility.</p>"},{"location":"architecture/sdkvm/sdkvm_networking/#using-nmcli-to-confirm-settings","title":"Using nmcli to confirm settings","text":"<pre><code>nmcli con add type ethernet con-name 'static-ip' ifname enp86s0 ipv4.method manual ipv4.addresses 192.168.1.98/24 gw4 192.168.1.254\nnmcli con up id 'static-ip' #check IP is setup\nnmcli connection show # show available connections\nnmcli connection delete static-ip # delete a connection\nnmcli con mod static-ip ipv4.dns 182.168.1.254 # add dns\nnmcli con up id 'static-ip' # activate the static connection\nnmcli con add type ethernet con-name 'dhcp' ifname enp86s0 ipv4.method auto\nnmcli d show |  grep GATEWAY # show gateway settings\nnmcli d show # Show all settings\nnmcli connection modify dhcp ipv4.routes \"10.211.128.192/21\" # Add a route for a given connection, connection must be activated with nmcli con up id 'dhcp'\nnmcli connection show dhcp | grep ipv4.routes # show routes for this connection\nnmcli con show --active # show active connections\nnmcli dev show | grep GENERAL.HWADDR # command to get a list of all the mac addresses \nnmcli radio wifi off # turn off wifi\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_networking/#dns-settings","title":"DNS settings","text":""},{"location":"architecture/sdkvm/sdkvm_networking/#setting-up-a-dns-server","title":"Setting up a DNS Server","text":"<ul> <li>Using Bind</li> <li>maraDNS</li> <li>maraDNS Setup</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_networking/#dnsmasq","title":"dnsmasq","text":""},{"location":"architecture/sdkvm/sdkvm_networking/#configuration-for-dnsmasq","title":"Configuration for dnsmasq","text":"<p>/etc/dnsmasq.conf</p> <pre><code>domain-needed\nbogus-priv\n#local=/test.com/\nlocal=/abc.com/\nexpand-hosts\n#domain=test.com\ndomain=abc.com\nno-hosts\naddn-hosts=/etc/hosts.dnsmasq\nlog-queries\n# Delays sending DHCPOFFER and proxydhcp replies for at least the specified numb                                                                          er of seconds.\ndhcp-mac=set:client_is_a_pi,B8:27:EB:*:*:*\ndhcp-reply-delay=tag:client_is_a_pi,2\n</code></pre> <p>/etc/hosts.dnsmasq</p> <pre><code>192.168.1.172   ZeroU\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_networking/#restarting-dnsmasq","title":"Restarting dnsmasq","text":"<pre><code> sudo service network-manager restart\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_networking/#removing-dnsmasq","title":"Removing dnsmasq","text":"<pre><code>sudo apt-get remove dnsmasq\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_networking/#maradns","title":"MaraDNS","text":""},{"location":"architecture/sdkvm/sdkvm_networking/#installing","title":"Installing","text":"<p>Use wget to download from https://maradns.samiam.org/download.html e.g \u201cwget https://maradns.samiam.org/download/3.5/3.5.0036/maradns-3.5.0036.tar.xz\u201d</p> <ul> <li>This will download the file into the default root directory.</li> <li>Unpack with tar \u2013xf command e.g. \u201ctar -xf maradns-3.5.0036.tar.xz\u201d.</li> <li>Enter the unpacked directory.</li> <li>Type in \u201c./configure\u201d followed by \u201cmake\u201d in the top-level MaraDNS directory.</li> <li>Type in \u201cmake install\u201d.</li> <li>Installation is now complete.</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_networking/#configuring-maradns","title":"Configuring MaraDNS","text":"<ol> <li>Use MaraDNS to set up a recursive DNS service (required for access to external upstream DNS server like Google, CloudFlare, OpenDNS etc.), which your clients will use as their primary DNS setting.</li> <li>Use MaraDNS to setup an authoritative DNS service, which the recursive DNS service will use for resolving DNS hostnames on your local network.</li> </ol>"},{"location":"architecture/sdkvm/sdkvm_networking/#recursive-dns-server-configuration","title":"Recursive DNS Server Configuration","text":"<ul> <li>The recursive DNS service is provided by the \u201cdeadwood\u201d service.</li> <li>Set this service to autostart via \u201cchkconfig deadwood on\u201d.</li> <li>If you need to disable it from autostarting you can use \u201csystemctl disable deadwood\u201d.</li> <li>Note you can manually start the service via \u201csystemctl start deadwood\u201d.</li> <li>Note you can manually restart the service via \u201csystemctl restart deadwood\u201d.</li> <li>Note you can manually stop the service via \u201csystemctl stop deadwood\u201d.</li> <li>The config file for the Deadwood service is located at \u201c/etc/dwood3rc\u201d.</li> <li>The settings you need to set / configure here are:</li> </ul> <pre><code>bind_address\nupstream_servers = {}\nupstream_servers[\".\"]=\"x.x.x.x, y.y.y.y\" (upstream recursive servers to use e.g. 8.8.8.8, 8.8.4.4)\nroot_servers = {} root_servers[\"*.\"]=\"x.x.x.x\" * = DNS names ending with this word\nx.x.x.x = IP address of Authoritative DNS Server (\u201cmaradns\u201d service) to direct resolution to for DNS names ending with * (i.e. your own local hosts on your network)\nrecursive_acl = \"0.0.0.0/0\" (gives permission for any device on the network to use this server)\nfilter_rfc1918 = 0 (ensures compatibility for devices on the local network)\n</code></pre> <p>Example dwood3rc file</p> <pre><code>[root@localhost ~]# cat /etc/dwood3rc\n# This is an example deadwood rc file\n# Note that comments are started by the hash symbol\n\nbind_address=\"10.211.132.57, 127.0.0.2\" # IP we bind to\n\n# The following line is disabled by being commented out\n#bind_address=\"::1\" # We have optional IPv6 support\n\nchroot_dir = \"/etc/maradns\" # Directory we run program from (not used in Win32)\n\n# The following upstream DNS servers are Google's public DNS servers.\n# For more information, see https://code.google.com/speed/public-dns/\n#\n# These IPs can be changed to the IPs of any recursive DNS servers that\n# can be reached from the computer running Deadwood.\n#\n# These are commented out; if upstream_servers is not set, Deadwood will\n# use QUAD9 recursive DNS server\nupstream_servers = {}\nupstream_servers[\".\"]=\"8.8.8.8, 8.8.4.4\" # Servers we connect to\n\n# It is also possible to use ICANN root servers, as follows\n#root_servers = {}\n# ICANN DNS root servers\n#root_servers[\".\"]=\"198.41.0.4, 199.9.14.201, 192.33.4.12, 199.7.91.13,\"\n#root_servers[\".\"]+=\"192.203.230.10, 192.5.5.241, 192.112.36.4, \"\n#root_servers[\".\"]+=\"198.97.190.53, 192.36.148.17, 192.58.128.30, \"\n#root_servers[\".\"]+=\"193.0.14.129, 199.7.83.42, 202.12.27.33\"\n\nrecursive_acl = \"0.0.0.0/0\" # Who is allowed to use the cache\n\nmaxprocs = 2048 # Maximum number of pending requests\nhandle_overload = 1 # Send SERVER FAIL when overloaded\n\nmaradns_uid = 99 # UID Deadwood runs as\nmaradns_gid = 99 # GID Deadwood runs as\n\nmaximum_cache_elements = 60000\n\n# If you want to read and write the cache from disk, make sure chroot_dir\n# above is readable and writable by the maradns_uid/gid above, and\n# uncomment the following line\n#cache_file = \"cache/dw_cache\"\n\n# The following line tells deadwood to fetch an expired record if it's\n# impossible to connect to any nameservers\nresurrections = 1\n\n# By default, for security reasons, Deadwood does not allow IPs in the\n# 192.168.x.x, 172.[16-31].x.x, 10.x.x.x, 127.x.x.x, 169.254.x.x,\n# 224.x.x.x, or 0.0.x.x range.  If using Deadwood to resolve names\n# on an internal network, uncomment the following line:\nfilter_rfc1918 = 0\n\n# We can have given names resolve to bogus IPv4 addresses.  Here, we\n# have the name \"maradns.foo\" resolve to \"10.10.10.10\" and \"kabah.foo\"\n# resolve to \"10.11.11.11\", regardless of what real values these DNS\n# records may have.  Note that a given name can only resolve to a\n# single IP, and that the records have a fixed TTL of 30 seconds.\nip4 = {}\nip4[\"maradns.foo.\"] = \"10.10.10.10\"\nip4[\"kabah.foo.\"] = \"10.11.11.11\"\n# Blacklist a bad site; this blocks resolution for both IPv4 and IPv6\nip4[\"phish.example.com.\"] = \"X\"\n\n# We can also use a similar syntax to have bogus IPv6 addresses.\n# We don't use standard notation for IPv6 addresses.  Instead, we\n# we use 32-character hex addresses (case insensitive); to make\n# it easier to count long strings of \"0\"s, the \"_\" acts like a 0\nip6 = {}\nip6[\"maradns.foo.\"] = \"20010db84d617261444e530000001234\"\nip6[\"kabah.foo.\"] = \"2001_DB84D617261444E5300__002345\"\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_networking/#authoritative-dns-server-configuration","title":"Authoritative DNS Server Configuration","text":"<p>The authoritative DNS service is provided by the \u201cmaradns\u201d service. Set this service to autostart via \u201cchkconfig maradns on\u201d.</p> <p>If you need to disable it from autostarting you can use \u201csystemctl disable maradns\u201d.</p> <p>Stopiing and Starting the Service</p> <ul> <li>start the service via \u201csystemctl start maradns\u201d.</li> <li>restart the service via \u201csystemctl restart maradns\u201d.</li> <li>stop the service via \u201csystemctl stop maradns\u201d.</li> </ul> <p>The config file for the maradns service is located at \u201c/etc/mararc\u201d.</p> <p>The settings you need to set / configure here are: csv2[\"x.y.\"] = \"db.x.y\" (x.y = DNS zone e.g. db.alpha.hot) ipv4_bind_addresses</p> <p>Configuring the DNS zone file:</p> <ul> <li>maradns looks for the DNS zone files at /etc/maradns</li> <li>Create your zone file with the touch command e.g. \u201ctouch db.alpha.hot\u201d</li> <li>Edit the zone file and add the required entries for the local hosts on your network e.g.</li> </ul> <pre><code>tx1.alpha.hot. 192.168.1.22 ~\n</code></pre> <p>Example /etc/mararc file</p> <pre><code># Example mararc file.\n# This only shows a subset of MaraDNS' features needed to be an\n# authoritative name server.  Look at\n# detailed/example_full_mararc for an example showing most of\n# the features that MaraDNS has.\n\n# Note that this example mararc file will not actually do anything\n# without modification.\n# Look in the doc/en/examples directory for a working example\n# authoritative nameserver, and a working recursive nameserver.\n\n# The various zones we support\n\n# When running in authoritative mode, we must initialize the csv2 hash,\n# or MaraDNS will be unable to load any csv2 zone files\ncsv2 = {}\n\n# This is just to show the format of the file\n# Note the this is commented out.  Any line that starts with\n# a '#' is not read by the parser.  Remove the leading '#' to\n# enable any line that is commented out\n\n# The following line (commented out) tells MaraDNS to look at the\n# file db.example.net to get the zone for example.net\ncsv2[\"example.net.\"] = \"db.example.net\"\ncsv2[\"deskvue.emd.\"] = \"db.deskvue.emd\"\n# Naturally, we can have multiple zone files\n#csv2[\"example.com.\"] = \"db.example.com\"\n\n# The address this DNS server runs on.  If you want to bind\n# to multiple addresses, separate them with a comma like this:\n# \"10.1.2.3, 10.1.2.4, 127.0.0.1\"\nipv4_bind_addresses = \"10.211.132.56, 127.0.0.1\"\n# The directory with all of the zone files\nchroot_dir = \"/etc/maradns\"\n</code></pre> <p></p> <pre><code>root@10.211.132.57 - cloud$1 - Authoritive Server\nroot@10.211.132.56 - cloud$1 - Recursive Server\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_networking/#trouble-shooting-maradns","title":"Trouble Shooting MaraDNS","text":"<ul> <li>MaraDNS troubleshooting guide</li> <li>Alex's Documentation</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_networking/#monitoring-dns-traffic","title":"Monitoring DNS Traffic","text":""},{"location":"architecture/sdkvm/sdkvm_networking/#monitoring-dns-traffic-with-tcpdump","title":"Monitoring DNS traffic with TCPDump","text":"<pre><code>sudo tcpdump -i eth0 port 53\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_networking/#checking-dns-settings","title":"Checking DNS Settings","text":""},{"location":"architecture/sdkvm/sdkvm_networking/#checking-at-the-interface-level","title":"Checking at the interface level","text":"<pre><code>nmcli device show enp45s0 | grep IP4.DNS\nIP4.DNS[1]:                             192.168.1.131\nIP4.DNS[2]:                             8.8.8.8\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_networking/#checking-at-the-connection-level","title":"Checking at the connection level","text":"<pre><code> nmcli connection show static-ip | grep -i dns\nconnection.mdns:                        -1 (default)\nconnection.dns-over-tls:                -1 (default)\nipv4.dns:                               192.168.1.131,8.8.8.8\nipv4.dns-search:                        --\nipv4.dns-options:                       --\nipv4.dns-priority:                      0\nipv4.ignore-auto-dns:                   no\nipv6.dns:                               --\nipv6.dns-search:                        --\nipv6.dns-options:                       --\nipv6.dns-priority:                      0\nipv6.ignore-auto-dns:                   no\nIP4.DNS[1]:                             192.168.1.131\nIP4.DNS[2]:                             8.8.8.8\nIP6.DNS[1]:                             fe80::9a42:65ff:fe7f:6f17\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_networking/#checking-dns-status","title":"Checking DNS status","text":"<pre><code>resolvectl status\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_networking/#flush-dns-cache","title":"Flush DNS Cache","text":"<pre><code>sudo resolvectl flush-caches\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_networking/#how-to-ignore-auto-dns","title":"How to ignore auto DNS","text":"<pre><code>sudo nmcli con mod static-ip ipv4.ignore-auto-dns yes\nsudo nmcli con mod static-ip ipv4.dns \"10.211.132.56\"\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_networking/#using-dig-to-check-dns-servers","title":"Using dig to check DNS servers","text":"<pre><code>dig 10.211.132.56 tx103.blackbox.emd\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_networking/#lacp-proposal","title":"LACP Proposal","text":"<ul> <li>LACP Proposal for DESKVUE</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_open_questions/","title":"SDKVM Architectural Issues","text":""},{"location":"architecture/sdkvm/sdkvm_open_questions/#dual-network-interfaces","title":"Dual Network Interfaces","text":"<p>The Emerald Snuc selected for the SDKVM has two network interfaces. The discovery protocol and Boxilla all assume that they are dealing with an appliance with a single interface.</p> <p>Each interfaces can potentially have a separate IP address. One could be DHCP and the other Static or both could be static.</p> <p>The OSD assumes a single interface and only provides a configuration screen for one interface.</p> <p>We need to decide how we are going to handle this because a user can plug into either interface. If, having configured on Interface \"A\", they later switch to Interface \"B\", then the system will not work. I think for now we will have to designate one of these physical interfaces as non-functional and instruct the user to use only one of the two available physical interfaces.</p> <p>It is not clear to me how we intend to use the second interface in time or whether both interfaces could be connected in a customer's network. Supporting switchover would require work which we have not yet planned or evaluated and unless it is transparent to the OS and the applications it may have implications for discovery, Boxilla etc.</p> <p>On our 4K product this is handled at a very low level making it transparent to the upper levels. I think the only practical short term solution for the SDKVM is to disabled one of the ports.</p>"},{"location":"architecture/sdkvm/sdkvm_os/","title":"Deskvue OS bring-up","text":"<p>This section talks about bringing up Deskvue OS from a fresh install of Ubuntu 22.04 OS. We already discussed installing two instances of Ubuntu 22.04 OS in this article Dual Boot Ubuntu 22.04.</p> <p>Source code building and packaging is described in this post SDKVM Source control.</p> <p>It will be helpful to install openssh package on the fresh install on Ubuntu 22.04 OS and take an SSH access for the rest of the task. </p> <p><code>sudo apt-get install openssh-server</code></p> <p>Copy over following packages and scripts from the build system to Ubuntu OS. Keep all the files in the same location. </p> <ul> <li> <p>DESKVUE_1.0.0_amd64.deb</p> </li> <li> <p>OPENBOX_BB_1.0.0_amd64.deb</p> </li> <li> <p>SDKVM_WORKREPO/install_templates/install.sh</p> </li> </ul> <p>Make sure you have an active internet connection. Run ./install.sh and it will install all the dependent packages required to run software components of Deskvue OS. It will also install OPENBOX_BB_1.0.0_amd64.deb and DESKVUE_1.0.0_amd64.deb.</p> <p>Once the installation is complete, reboot the system and you should see Deskvue login page after the reboot. </p>"},{"location":"architecture/sdkvm/sdkvm_pcoip_prototyping/","title":"PCoIP","text":""},{"location":"architecture/sdkvm/sdkvm_pcoip_prototyping/#ubuntu-2104","title":"Ubuntu 21:04","text":"<p>Fetch and run the following:</p> <pre><code>curl -1sLf https://dl.teradici.com/DeAdBCiUYInHcSTy/pcoip-client/cfg/setup/bash.deb.sh | sudo -E distro=ubuntu codename=hirsute bash\nsudo apt update\nsudo apt search pcoip-client\nSorting... Done\nFull Text Search... Done\nSo no client available is available for this particular release.(June 2022)\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_pcoip_prototyping/#ubuntu-2004","title":"Ubuntu 20:04","text":"<p>Fetch and run the following:</p> <pre><code>curl -1sLf https://dl.teradici.com/DeAdBCiUYInHcSTy/pcoip-client/cfg/setup/bash.deb.sh | sudo -E distro=ubuntu codename=focal bash\nsudo apt search pcoip-client\nSorting... Done\nFull Text Search... Done\npcoip-client/focal 22.04.0-20.04 amd64\n  PCoIP Soft Client\nsudo apt install pcoip-client\n</code></pre> <p>So there is a client available is available for this particular release</p>"},{"location":"architecture/sdkvm/sdkvm_pcoip_prototyping/#ubuntu-2204","title":"Ubuntu 22.04","text":""},{"location":"architecture/sdkvm/sdkvm_pcoip_prototyping/#sdk","title":"SDK","text":"<pre><code>curl -1sLf https://dl.teradici.com/EBJEhivCeJnv2Yx1/pcoip-client-sdk/cfg/setup/bash.deb.sh | sudo -E distro=ubuntu codename=jammy bash\n\nsudo apt update\nsudo apt install pcoip-client-sdk\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_pcoip_prototyping/#client","title":"Client","text":"<pre><code>curl -1sLf https://dl.teradici.com/5XDaVehlfuYbrKxa/pcoip-client/cfg/setup/bash.deb.sh | sudo -E distro=ubuntu codename=jammy bash\nsudo apt install pcoip-client\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_pcoip_prototyping/#sdk-install","title":"SDK Install","text":"<p>Login: john.osullivan@blackbox.com Password: 90938_Teradici</p> <p>site</p>"},{"location":"architecture/sdkvm/sdkvm_pcoip_prototyping/#to-set-up-the-repo-automatically","title":"To set up the repo automatically","text":"<pre><code>- curl -1sLf https://dl.teradici.com/EBJEhivCeJnv2Yx1/pcoip-client-sdk/cfg/setup/bash.deb.sh | sudo -E bash\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_pcoip_prototyping/#to-force-a-specific-distribution-release-or-architecture","title":"To force a specific distribution, release, or architecture,","text":"<pre><code>- curl -1sLf https://dl.teradici.com/EBJEhivCeJnv2Yx1/pcoip-client-sdk/cfg/setup/bash.deb.sh | sudo -E distro=some-distro codename=some-codename arch=some-arch bash\n</code></pre> <p>then</p> <pre><code>sudo apt-get install pcoip-client-sdk\nsudo apt-get install pcoip-client\n#or you may need to use\nsudo apt-get -o Dpkg::Options::=\"--force-overwrite\" install /var/cache/apt/archives/pcoip-client_22.04.2-20.04_amd64.deb\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_pcoip_prototyping/#license-for-pcoip-agents","title":"License for PCoIP agents","text":"<pre><code>C7BB9B7P33G4@B20B-85BB-E89F-13F5\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_pcoip_prototyping/#pcoip-agents","title":"PCoIP Agents","text":"<ul> <li>downloads</li> </ul> <p>Note: Graphic agents are for physical machines, standard agents are for VMs only.</p>"},{"location":"architecture/sdkvm/sdkvm_pcoip_prototyping/#setting-up-ultra","title":"Setting up Ultra","text":"<ul> <li>Graphics Agent Configuration</li> <li>Setting up and configuring Ultra</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_pcoip_prototyping/#logging","title":"Logging","text":"<ul> <li>how do i find the pcoip log files and set logging level for different pcoip products</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_pcoip_prototyping/#client-side","title":"Client Side","text":"<p>On a Linux computer, client logs are placed in /tmp/Teradici//logs/ where Username is the name of the user that launched the client."},{"location":"architecture/sdkvm/sdkvm_pcoip_prototyping/#host-agent-log-files-windows","title":"Host Agent Log Files (Windows):","text":"<p>Required Level for Debug : Level 3 logs: - (Setting Log Levels)[https://www.teradici.com/web-help/pcoip_agent/graphics_agent/windows/22.04/admin-guide/diagnostics/setting-log-levels/] - Alternatively - Locating Log Files</p>"},{"location":"architecture/sdkvm/sdkvm_pcoip_prototyping/#server-side-logging","title":"Server side Logging","text":"<p>|Component| Log file |location| | ------------------ | -------------- | |Graphics Agent for Windows|    %programdata%\\Teradici\\PCoIPAgent\\logs| |PCoIP Server|  PCoIP Server%programdata%\\Teradici\\PCoIPAgent\\logs|</p>"},{"location":"architecture/sdkvm/sdkvm_pcoip_prototyping/#setting-up-the-client","title":"Setting up the client","text":"<p>-Documentation on setting up the client</p>"},{"location":"architecture/sdkvm/sdkvm_pcoip_prototyping/#command-line","title":"Command Line","text":""},{"location":"architecture/sdkvm/sdkvm_pcoip_prototyping/#guide-to-command-line","title":"Guide to Command Line","text":"<ul> <li>Security Modes</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_pcoip_prototyping/#launch-a-pcoip-connection","title":"Launch a PCoIP connection","text":"<pre><code>pcoip-client -u BBOX -p cloud  -b 192.168.1.10:60443   --accept-disclaimer\n</code></pre> <p>Leostream Evaluation and Configuration</p>"},{"location":"architecture/sdkvm/sdkvm_profiling/","title":"SDKVM Profiling","text":""},{"location":"architecture/sdkvm/sdkvm_profiling/#references","title":"References","text":"<p>Article explaining significance of load average nethogs - bandwidth monitoring by process</p>"},{"location":"architecture/sdkvm/sdkvm_profiling/#emerald-and-wall-street-specifications","title":"Emerald and Wall Street Specifications","text":""},{"location":"architecture/sdkvm/sdkvm_profiling/#terms","title":"Terms","text":"<ul> <li>BogoMips: (from \"bogus\" and MIPS) is a crude measurement of CPU speed made by the Linux kernel when it boots to calibrate an internal busy-loop.</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_profiling/#comparative-analysis","title":"Comparative Analysis","text":"Emerald Wall Street Architecture: x86_64 x86_64 CPU op-mode(s): 32-bit, 64-bit 32-bit, 64-bit Byte Order: Little Endian Little Endian Address sizes: 39 bits physical, 48 bits virtual 39 bits physical, 48 bits virtual CPU(s): 8 16 On-line CPU(s) list: 0-7 0-15 Thread(s) per core: 2 1 Core(s) per socket: 4 12 Socket(s): 1 1 NUMA node(s): 1 1 Vendor ID: GenuineIntel GenuineIntel CPU family: 6 6 Model: 140 154 Model name: 11th Gen Intel(R) Core(TM) i7-1165G7 @ 2.80GHz 12th Gen Intel(R) Core(TM) i7-1260P Stepping: 1 3 CPU MHz: 2812.099 2230.299 CPU max MHz: 4700.0000 4700.0000 CPU min MHz: 400.0000 400.0000 BogoMIPS: 5606.40 4992.00 Virtualization: VT-x VT-x L1d cache: 192 KiB 288 KiB L1i cache: 128 KiB 192 KiB L2 cache: 5 MiB 7.5 MiB L3 cache: 12 MiB NUMA node0 CPU(s): 0-7 0-15"},{"location":"architecture/sdkvm/sdkvm_profiling/#emerald-and-wall-street-comparative-analysis","title":"Emerald and Wall Street Comparative Analysis","text":""},{"location":"architecture/sdkvm/sdkvm_profiling/#cpu-and-memory-profile-in-top","title":"CPU and Memory Profile in Top","text":"<p>Criteria: Eight simultaneous KVM connections to targets running 1920 X 1080 video</p> <p>** CPU Utilisation shown in Bold in the table below**</p> Wall Street Emerald top - 13:44:17 up 11 min, 1 user, load average: 12.80, 8.66, 4.17 PID USER  PR NI  VIRT  RES  SHR S %CPU %MEM  TIME+ COMMAND PID USER  PR NI  VIRT  RES  SHR S %CPU %MEM  TIME+ COMMAND 5336 snuc  20  0 1753784 44288 21032 S 145.8  0.3  3:41.85 xfreerdp 157201 snuc  20  0 1163944  47724  22224 S  95.3  0.3  14:23.50 xfreerdp 5327 snuc  20  0 1753784 45440 21132 S 140.5  0.3  4:11.08 xfreerdp 157208 snuc  20  0 1163944  45376  21092 S  60.7  0.3  5:06.91 xfreerdp 5324 snuc  20  0 1753784 45576 21260 S 128.9  0.3  2:49.43 xfreerdp 157199 snuc  20  0 1163944  48688  20972 S  57.7  0.3  7:03.14 xfreerdp 5335 snuc  20  0 1753784 44980 21192 S 112.3  0.3  3:20.40 xfreerdp 157206 snuc  20  0 1163944  46380  21304 S  43.7  0.3  4:47.67 xfreerdp 5338 snuc  20  0 1753784 48076 21392 S 104.0  0.3  2:49.56 xfreerdp 157202 snuc  20  0 1163944  52908  21232 S  38.7  0.3  5:54.20 xfreerdp 1855 snuc  20  0 2924104 531512 74656 R 95.0  3.3  4:03.58 Xorg 154663 snuc  20  0 1008860  80324  45928 S  31.7  0.5  10:24.92 Xorg 5332 snuc  20  0 1753784 45028 21244 S 82.1  0.3  2:31.45 xfreerdp 157220 snuc  20  0 1163944  49572  22204 S  22.7  0.3  3:23.11 xfreerdp 5325 snuc  20  0 1753784 48296 21340 S 37.9  0.3  3:05.76 xfreerdp 157197 snuc  20  0 1163944  46568  21228 S  21.0  0.3  3:20.92 xfreerdp 5329 snuc  20  0 1753784 46936 21040 S 30.2  0.3  2:40.73 xfreerdp 157205 snuc  20  0 1163944  47312  20920 S  7.7  0.3  2:56.96 xfreerdp"},{"location":"architecture/sdkvm/sdkvm_profiling/#frame-rates","title":"Frame Rates","text":"<p>Criteria: Eight simultaneous KVM connections to targets running 1920 X 1080 video</p> Wall Street Emerald Connection Bit Rate Frame Rate Bit Rate Frame Rate Source Frame Rate Connection 1 73460611 36.55 62369336 27.18 Source at 60 FPS Connection 2 28281250 21.01 25563076 18.38 Source at 60 FPS Connection 3 48679825 20.44 25112601 16.25 Source at 25 FPS Connection 4 27742593 17.48 33558560 14.71 Source at 60 FPS Connection 5 68089461 16.08 63189263 14.033 Source at 60 FPS Connection 6 28987358 12.41 33667455 12.28 Source at 60 FPS Connection 7 25888188 9.70 65315258 9.88 Source at 60 FPS Connection 8 28009423 9.00 33547672 7.73 Source at 25 FPS <p>The Wall Street unit provides approximately 25% greater throughput for the test criteria.</p> <p>Criteria: Four simultaneous KVM connections to targets running 1920 X 1080 video</p> Wall Street Emerald Connection Bit Rate Frame Rate Bit Rate Frame Rate Source Frame Rate Connection 1 65461810 23.85 50052738 23.80 Source at 25 FPS Connection 2 45265684 32.01 106339913 45 Source at 60 FPS Connection 3 90104252 34.44 132420703 51 Source at 60 FPS Connection 4 69081420 30.48 59838527 51 Source at 60 FPS <p>This appears to show better performance on the Emerald for the four connections scenario; this has been confirmed on a number of tests. This suggests that for the four connection scenario the Emerald Snuc has approximately 70% better throughput</p> <p>Criteria: Six simultaneous KVM connections to targets running 1920 X 1080 video</p> Wall Street Emerald reference Connection Bit Rate Frame Rate Bit Rate Frame Rate Source Frame Rate Connection 1 69636073 15.06 36821301 7.86 Source at 25 FPS 10.211.130.136 Connection 2 51087028 22.19 67802162 29.85 Source at 60 FPS 10.211.129.204 Connection 3 72544032 14.33 84194689 16.43 Source at 60 FPS 10.211.130.181 Connection 4 47288471 21.16 42409766 20.40 Source at 60 FPS 10.211.129.40 Connection 5 61587048 15.16 47554643 11.30 Source at 60 FPS 10.211.129.36 Connection 6 48847820 16.80 44406253 19.73 Source at 60 FPS 10.211.128.14 <p>This appears to show better performance on the Emerald for the six connections scenario. This suggests that for the six connection scenario the Emerald Snuc has marginally better or similar throughput</p>"},{"location":"architecture/sdkvm/sdkvm_profiling/#network-utilization","title":"Network Utilization","text":"<p>Criteria: Eight simultaneous KVM connections to targets running 1920 X 1080 video</p> Wall Street Emerald Parameter Mbs Packets Per Second Mbs Packets Per Second Peak total activity: 989.52 Mbps 169110 pps 968.78 Mbps 166645 pps Peak incoming rate: 963.44 Mbps 87568 pps 942.87 Mbps 85685 pps Peak outgoing rate: 26161.92 kbps 81743 pps 25910.86 kbps 80959 pps Average Total: 959.24 Mbps 161421 pps 960.43 Mbps 165143 pps Average  Incoming: 934.77 Mbps 84967 pps 934.76 Mbps 84959 pps Average  Outgoing: 24469.85 kbps 76454 pps 25664.47 kbps 80183 pps <p>Network Saturation occurs on both devices for 8 connections Note: Network saturation does not occur with 4 connections, we are instead CPU bound.</p>"},{"location":"architecture/sdkvm/sdkvm_profiling/#tools-used","title":"Tools Used","text":"<pre><code>git clone https://github.com/sysstat/sysstat.git; cd sysstat ./configure; make; sudo make install\nsudo apt-get install nethogs\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_profiling/#using-pidstat","title":"Using pidstat","text":"<ul> <li>pidstat --human -p"},{"location":"architecture/sdkvm/sdkvm_profiling/#determining-the-cpu-profile","title":"Determining the CPU Profile","text":"<p>lscpu command</p>"},{"location":"architecture/sdkvm/sdkvm_profiling/#understanding-top-statistics","title":"Understanding Top Statistics","text":""},{"location":"architecture/sdkvm/sdkvm_profiling/#load-average","title":"Load Average","text":"<p>The load average is a measure of CPU demand. The load average is an average of the number of runnable processes over a given time period. For example, an hourly load average of 10 would mean that (for a single CPU system) at any time during that hour one could expect to see 1 process running and 9 others ready to run (i.e., not blocked for I/O) waiting for the CPU</p> <p>The load average is the figure at the top right of top. It is taken by looking at tasks that are running on the CPU, and those that are waiting to run. You get a set of 3 figures, which show the average system load, over the last 1 minute, 5 minutes and 15 minutes.</p> <p>Load average takes your multiple CPUs into account. So if you have multiple cores (as most modern computers do), you can divide the load average by the number of CPUs, to get the system load as a whole.</p> <p>For example, if you have a quad-core machine (4 cores), then 100% utilisation for you would mean a load average of 4.00.</p>"},{"location":"architecture/sdkvm/sdkvm_profiling/#understand-load-averages","title":"Understand Load Averages","text":"<ul> <li>If the averages are 0.0, then your system is idle.</li> <li>If the 1 minute average is higher than the 5 or 15 minute averages, then load is increasing.</li> <li>If the 1 minute average is lower than the 5 or 15 minute averages, then load is decreasing.</li> <li>If they are higher than your CPU count, then you might have a performance problem (it depends).   </li> </ul>"},{"location":"architecture/sdkvm/sdkvm_prorail_proposal/","title":"ProRail Proposal","text":""},{"location":"architecture/sdkvm/sdkvm_prorail_proposal/#overview","title":"Overview","text":"<p>This is a large project with ProRail (&gt;\u20ac5M) as part of a refit of rail systems in Netherlands monitoring stations. It will be based on Deskvue with a DESKVUE units on operator desks and PE/4K units on server side connecting to Quad or Octo head servers. </p>"},{"location":"architecture/sdkvm/sdkvm_prorail_proposal/#background-from-johnh","title":"Background from JohnH","text":"<ul> <li>Refit of rail systems in Netherlands each DESKVUE typically drives 3 monitors.</li> <li>They have around 290 servers distributed across stations, these are Quad head and Octo-head machines.</li> <li>The main dDisplay can also be displayed across all 3 monitors on DESKVUE.</li> <li>Screens are broken into operational zones with 3 tiles at top of screen that are fixed. These will constantly show train track video.</li> <li>Below that operational area , fixed tiles present various views, but the operator can change the tile contents by right clicking on a tile and selecting a connection from a list of connections from a drop down.</li> <li>The non-fixed tiles can move (but never over the top of the fixed tiles), a user can move these tiles to another monitor.</li> <li>Users require the ability to connect to the internet and browse the internet.</li> <li>Users can also make webex type calls using bi-directional audio.</li> <li>The main USB peripherals are mouse, key board, and headsets.</li> <li>The typical user cannot plug in mass storage devices, but the admin user should be able to do this. </li> <li>The overall system requires the ability to re-allocate work across different control centres so low bandwidth across WANs is an important feature.</li> <li>Reliability is very important - so the ability to download database to DESKVUE from Boxilla is a big advantage.</li> <li>Connections should support Shared Mode and Private Mode.</li> <li>Headsets will only work in Private Mode.</li> <li>Audio may follow a particular tile, but this is to be confirmed.</li> <li>People can listen to spotify and use applications like Webex, but it is not clear where these applications reside.</li> <li>No dual ethernet or aggregation required at this point.</li> <li>The customers target machines are running Linux Redhat Enterprise 8 and Windows 10.</li> <li>Customers target resolutions are 1920x1080, 1600x1200,2560x1400.</li> <li>We will have to work with a system integrator from Belgium (I believe they are called 10).</li> <li>POC evaluation will be carried out on site by users and admin over a two week period.</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_prorail_proposal/#boxilla-implication","title":"Boxilla Implication","text":"<ul> <li>New Tile attributes:<ul> <li>Fixed position</li> <li>Always on top</li> </ul> </li> <li>Ability to save a custom workspace to Boxilla. (this is an option for the POC. We can just save the workspace locally)</li> <li>Mouse settings may need to be configured and downloaded. (No specific requirement exists for this at the moment)</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_prorail_proposal/#appliance-implications","title":"Appliance Implications","text":"<ul> <li>4K60 required</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_prorail_proposal/#request-for-clarification","title":"Request for Clarification","text":""},{"location":"architecture/sdkvm/sdkvm_prorail_proposal/#open","title":"Open","text":"<ul> <li>Clarify audio model required for Prorail. How does the end user expect to use audio. Can we get typical use cases for the existing system. - JohnH</li> <li>Webex and Deskview - can we assume these applications will run on an external server rather than on DESKVUE itself. - Clarify with customer - Johnh</li> <li>What is the use case of the existing application?<ul> <li>Does the rail monitor application produce different views on different extended desktops. For example, screen 1 may be a control application, screen 2 may be a video of a particular track etc.</li> <li>Do these applications produce views that span one or more of the heads on the existing system.</li> <li>Is the existing application similar to a video wall where the physical placement of monitors must map to a particular arrangement of monitors.</li> <li>Will a given DESKVUE connect to multiple quad and octo head machines so that a view could have (for example), four tiles from Octo machine 1 and 4 tiles from Octo machine 2.</li> </ul> </li> <li>Can our OSD appear over \"always on top\" tiles. - Johnh</li> <li>For the tiles on which the user can change a connection, will these tiles connect to the multihead machines also?</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_prorail_proposal/#closed","title":"Closed","text":"<ul> <li>Evaluate technical challenges on ABS mouse control over extended desktop on Windows - Johnos,Alex</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_prorail_proposal/#poc-requirements","title":"POC Requirements","text":"<ol> <li>Mouse management - ABS mouse control over extended desktop, how do we map and manage this.</li> <li>Always on top tiles</li> <li>Saving a customised user space</li> <li>Selecting alternative connections from existing tile</li> <li>Bi-directional audio from headset (need spec for audio input)</li> <li>Support for vertical and horizontal stacking</li> <li>Fixed position tiles</li> <li>New hot key handler</li> </ol>"},{"location":"architecture/sdkvm/sdkvm_prorail_proposal/#poc-status","title":"POC Status","text":"Functionality Status Comments Mouse management - ABS mouse control over extended desktop Prototype scheme implemented in clients, but no easy way of configuring this for a given customer configuration. Technically challenging and very complex to setup based on current assumptions about customer use case Always on top tiles Implemented in client, but need a way of managing this with the OSD. At the moment these cover the OSD and every other window. Analysis required to understand how Always on top tiles and OSD as top of the display stack would work. No easy options. Always on-top by its very nature is always on top Saving a customised user space Feasibility Stage Technically very difficult with current architecture Selecting alternative connections from existing tile Implemented Alex Testing at the moment Bi-directional audio from headset Implementation in progress on clients, OSD work waiting on SquareRoot, johnos working on adding audio input to audio framework. Manas will manage this for the coming week. No real understanding of what the customer wants or expects. Significant work required to integrate all of this into the system. Support for vertical and horizontal stacking Square root developing OSD support, Micheal managing integration of this feature, Arbaz needs to fetch monitor data using existing interface, Micheal will provide an additional API to take the output of Arbaz's model and translate it back into values that are compatible with xrandr SquareRoot making very slow progress - this is in turn blocking other work New hot key handler Implemented - needs Boxilla integration Alex is testing"},{"location":"architecture/sdkvm/sdkvm_prorail_proposal/#dependencies","title":"Dependencies","text":"<p>The windows target needs the following driver installed for dual head operation. This is a third party driver from Highseclabs.</p> <p>Note: This is not compataible with three of more extended heads and must be removed.</p>"},{"location":"architecture/sdkvm/sdkvm_prorail_proposal/#feature-detail","title":"Feature Detail","text":""},{"location":"architecture/sdkvm/sdkvm_prorail_proposal/#saving-a-user-modified-workspace","title":"Saving a User Modified Workspace","text":"<p>In the scenario a user will have the opportunity to modify an existing workspace by changing the location, size, connection target and connection attributes of tiles in a workspace. The user can then save this modified workspace to Boxilla (if the system is managed).</p> <p>This introduces a new dimension to the relationship between Boxilla and the devices it manages. Traditionally Boxilla has always pushed configuration data to the devices it manages, but with the introduction of user generated workspaces the devices willl also be able to push configuration data back to Boxilla. This has a number of implications which are explored below in the form of questions for Product Management:</p> <ol> <li>If a user customises a workspace, does he need to push those changes back to Boxilla? I assume yes so that the user can use that modified or customised workspace on other DESKVUE units.</li> <li>If the user is logged into two DESKVUE systems and makes different modifications on each system, how are the conflicts resolved in Boxilla?</li> <li>What should be the model for synchronising customised workspace to Boxilla be? The choices are as follow:<ul> <li>Once a user on DESKVUE saves a modified workspace, should DESKVUE immediately push that workspace to Boxilla? If so, what if Boxilla is offline. Does DESKVUE continue to try to push that workspace until successful?</li> <li>Alternatively, DESKVUE can send a workspace modified event to Boxilla and then Boxilla can come and pull the modified workspace. If Boxilla is offline then it may fail to get this event.</li> <li>Alternatively, Boxilla routinely audits the DESKVUE and interrogates a workspace modification status. This lists the names of any modified workspaces and Boxilla then pulls these modified workspaces.</li> </ul> </li> <li>Conflict resolution: <ul> <li>Where are conflicts modified? Is Boxilla always responsible for modifying conflicting versions of the same workspace.</li> <li>Is Boxilla allowed to force overwrite a user's local modifications when the user logs in and logs out. </li> <li>If multiple different users modify the same workspace how are those different modifications resolved.</li> </ul> </li> <li>If a user modifies a workspace, is that modification propagated to other users who share that workspace?     </li> </ol>"},{"location":"architecture/sdkvm/sdkvm_prorail_proposal/#replacing-a-tile-in-an-existing-workspace","title":"Replacing a tile in an existing workspace","text":"<ul> <li>Pop up menu with available connections.</li> <li>Option to filter on a type or Letter.</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_prorail_proposal/#mouse-evaluation","title":"Mouse Evaluation","text":"<p>We modelled the Freedom setup typically used with Receivers:</p> <p></p> <p>Using the deskvue setup shown below an using the following driver we were able to move a mouse across all four screens with the mouse leaving on edge and entering the adjacent edge of the next tile.</p> <p>We did encounter some issues when we used dual head transmitters. This needs further investigation.</p> <p></p>"},{"location":"architecture/sdkvm/sdkvm_prorail_proposal/#bi-directional-audio-from-headset","title":"Bi-directional audio from headset","text":"<p>The DeskVue may only have an analogue port for audio out. The Simply Nuc specification indicates it does support audio in, but this has not been proven to work.</p> <p>Alex has ordered a TRRS headset for further evaluation. </p>"},{"location":"architecture/sdkvm/sdkvm_prorail_proposal/#changes-to-data-model-for-new-tile-attributes","title":"Changes to Data Model for new tile attributes","text":"<p>To make the window always appear at the top of the display stack.</p> <pre><code>\"always_on_top\" : \"True\" \n</code></pre> <p>To make the window appear in a fixed position</p> <pre><code>\"fixed_position\" : \"True\" \n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_prorail_proposal/#importance-of-mapping-views-to-physical-monitor-configuration","title":"Importance of Mapping Views to Physical Monitor Configuration","text":"<p>When connecting to targets with multiple heads mapped as extended desktops it is important that the orientation and alignment of the view on the SDKVM match the orientation and alignment of the target machine.</p> <p>There are two levels of mapping to consider:</p> <ul> <li>The mapping between the SDKVM connected monitors and their designations (1 - 4) and the view numbers and placement on the SDKVM screen.</li> <li>The mapping between view numbers and placement on the SDKVM screen and the physical mapping of monitors on the target machine.</li> </ul> <p></p> <p></p>"},{"location":"architecture/sdkvm/sdkvm_prorail_proposal/#deskvue-performance-and-implications-for-prorail","title":"DESKVUE Performance and implications for Prorail","text":"<p>The SDKVM performance is influenced by how many monitors it has attached ( see Framerate not met ). This means at default quality a SDKVM kvm client can reach 60 fps with no dropped frames, but this drops to 45 when a second monitor (even if it is idle) is attached. Every subsequent monitor that is attached additionally degrades the frame rate. This drop is likely due to the fact that the decoding of the video depends on the GPU. The decoding is largely offloaded for the most intensive parts of the  decode process. Each additional monitor also loads the GPU so that processing power available declines. This means we cannot achieve 60 fps on more than one client window if more than one monitor is attached to the DESKVUE unit.</p> <p>This has implications because Linux by default dithers and this processing load makes interaction can make Linux unusable when a number of monitors are attached to the SDKVM. There is no commonly agreed way of disabling dithering on Linux. There have been specific solutions in the past that are GPU, OS, driver and version specific. This is certainly the case with Ubuntu running with an AMD GPU. I believe Prorail are using Red Hat Enterprise 8. We ran this on a machine with an integrated Intel graphics card. The experience is much better, but I should caution this might deteriorate significantly with another GPU.</p> <p>We could deploy the dithering filter on the TX, this would only be available on one head. The efficacy of this would need to be evaluated.</p>"},{"location":"architecture/sdkvm/sdkvm_prorail_proposal/#dithering-on-linux","title":"Dithering on Linux","text":"<ul> <li>IHSE Guide to Disbling Dithering</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_prorail_proposal/#always-on-top-windows","title":"Always on Top Windows","text":"<p>The \"Always on Top\" windows can be implemented, but a n issue arises as to how we manage this with respect to the OSD. The OSD will always be behind the Always on Top\" window and this may not be what the user expects. We could also make the OSD an \"Always on Top\", but then any workspaces or connections launched from the OSD will immediately go to the background and will not be visible on the monitor where the OSD resides.</p> <p>The user could minimise the OSD with a hot key, or we could automatically minimise or iconify the OSD whenever it launches a workspace. The use would then need to maximise the OSD through a hot key to bring it back to the foreground.</p>"},{"location":"architecture/sdkvm/sdkvm_prorail_proposal/#co-ordinate-mapping-in-the-clients","title":"Co-ordinate mapping in the Clients","text":"<p>A SDKVM client receives relative mouse events. When a user clicks inside the client window space we retrieve a relative co-ordinate from the window client framework that specified the position relative to the size of the window within the client. This client frame of reference will be in the form of (x=0,y=0) for the top left of the screen and (x=w,y=h) for the bottom right. This co-ordinate system must then get mapped to the actual resolution of the target desktop and finally we map this into an absolute co-ordinate with a 32K X 32K grid that is presented via the mouse HID. The target operating system in extended desktop mode takes this 32K X 32K grid reference and maps it to its desktop space. On Linux this mapping is direct with the 32K X 32K grid mapped directly to the virtual desktop resolution. On windows the mapping depends on the driver being used. The highseclabs driver splits a dual head windows display into two individual co-ordinate systems. The first head has a co-ordinate reference for the X scale in the range 0 - 16385  on the first head and 16386 to 32767 for the second head. So head 1 top left is (0,0 and bottom right is (16385,32767), the second head is (16386,0) and bottom right is (32767,32767).</p> <p>Mapping the mouse into these co-ordinate systems is a challenge, but we could control what we map by passing a co-ordinate context to the clients on launch. This context would allow us specify the range of absolute values that a specific client would generate as part of its process of converting its local co-ordinates to the target co-ordinates.</p> <p></p> <p></p>"},{"location":"architecture/sdkvm/sdkvm_prorail_proposal/#sample-arguments-to-clients","title":"Sample arguments to Clients","text":"<p>Example for 4 Clients connected to 4 heads</p> <pre><code>/usr/local/bin/bb_kvm_client /boxilla:id:00:8c:10:1c:c6:02 /gdi:sw /window-sizing:3836x2135 /sec-rdp /rfx /client-uid:78_1259_5708386D08 /mqtt-endpoint:127.0.0.1:1883 /abs-coords:'(24577,0)(32767,32767)' -grab-keyboard /shared /window-position:11522x0 /analog-audio /t:'S1 TX: TX_Shared_10.211.129.204: 10.211.129.204: id:A603' /v:10.211.129.204 &amp;\n</code></pre> <pre><code>/usr/local/bin/bb_kvm_client /boxilla:id:00:8c:10:1c:c6:02 /gdi:sw /window-sizing:3836x2135 /sec-rdp /rfx /client-uid:78_1133_5708386D08 /mqtt-endpoint:127.0.0.1:1883 /abs-coords:'(16384,0)(24577,32767)' -grab-keyboard /shared /window-position:7682x0 /analog-audio /t:'S2 TX: PE_DP_TX_133: 10.211.130.133: id:4154' /v:10.211.130.133 &amp;\n</code></pre> <pre><code>/usr/local/bin/bb_kvm_client /boxilla:id:00:8c:10:1c:c6:02 /gdi:sw /window-sizing:3836x2135 /sec-rdp /rfx /client-uid:78_1278_5708386D08 /mqtt-endpoint:127.0.0.1:1883 /abs-coords:'(8192,0)(16384,32767)' -grab-keyboard /shared /window-position:3842x0 /analog-audio /t:'S3 TX: TX_Shared_10.211.130.103: 10.211.130.103: id:E27A' /v:10.211.130.103 &amp;\n</code></pre> <pre><code>/usr/local/bin/bb_kvm_client /boxilla:id:00:8c:10:1c:c6:02 /gdi:sw /window-sizing:3836x2135 /sec-rdp /rfx /client-uid:78_1261_5708386D08 /mqtt-endpoint:127.0.0.1:1883 /abs-coords:'(0,0)(8191,32767)' -grab-keyboard /shared /window-position:2x0 /analog-audio /t:'S4 TX: TX_Shared_10.211.130.128: 10.211.130.128: id:8483' /v:10.211.130.128 &amp;\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_prorail_proposal/#issues-with-mapping-co-ordinates","title":"Issues with Mapping Co-ordinates","text":""},{"location":"architecture/sdkvm/sdkvm_prorail_proposal/#mapping-to-a-linux-target","title":"Mapping to a Linux Target","text":"<ul> <li>Redhat does not know what TX is connected to a particular head. It arbitrarily maps video monitors outputs to display numbers. It maintains this mapping through subsequent reboots because it maps the monitor EDID.</li> <li>DESKVUE does not know which mouse sector should apply to a particular connection. To know that it would need to know which TX corresponds to a particular head in the Redhat representation. To know this we need to know know where that head appears in the RedHat's overall virtual desktop.</li> <li>On the DESKVUE side mappings may not necessarily correspond 1 to 1 with the Redhat representation of the desktops, for example Monitor 1 on DESKVUE might be reserved for the OSD with head 1 of the Redhat Display Application mapping to Monitor 2 of DESKVUE.</li> <li>Will need a new option to assign a mouse sector to a connection. The number of sector depends on the number of heads in the target Redhat System Matrix which can be both horizontally and vertically stacked.</li> <li>If we try to mix heads from two different systems, for example two different quad heads then we need two independent mouse sector collections that can be allocated to a given connection. One for Quad Head 1 and a second for Quad Head 2.</li> <li>The process of mapping all of this can become really complex. We have to devise a means of making the process easier.</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_prorail_proposal/#mapping-to-a-windows-target","title":"Mapping to a Windows Target","text":"<p>The process of allocating to a windows machine is similar. We must allocated the correct sector to the correct head.</p> <p><pre><code>/usr/local/bin/bb_kvm_client /boxilla:id:00:8c:10:1c:c6:02 /gdi:sw /window-sizing:3836x2160 /sec-rdp /rfx /client-uid:70_969_0AAD56D140 /mqtt-endpoint:127.0.0.1:1883 /abs-coords:'(24577,0)(32767,32767)' -grab-keyboard /shared /window-position:11522x0 /analog-audio /t:'TX: TX_36_Optimized_Shared: 10.211.129.36: id:A807' /v:10.211.129.36 &amp;\n/usr/local/bin/bb_kvm_client /boxilla:id:00:8c:10:1c:c6:02 /gdi:sw /window-sizing:3836x2160 /sec-rdp /rfx /client-uid:70_972_D8A1AD26A1 /mqtt-endpoint:127.0.0.1:1883 /abs-coords:'(16384,0)(24577,32767)' -grab-keyboard /shared /window-position:7682x0 /analog-audio /t:'TX: TX_40_Optimized_Shared: 10.211.129.40: id:D645' /v:10.211.129.40 &amp;\n/usr/local/bin/bb_kvm_client /boxilla:id:00:8c:10:1c:c6:02 /gdi:sw /window-sizing:3836x2160 /sec-rdp /rfx /client-uid:70_973_B7D098D6B3 /mqtt-endpoint:127.0.0.1:1883 /abs-coords:'(8192,0)(16384,32767)' -grab-keyboard /shared /window-position:3842x0 /analog-audio /t:'TX: TX_190_Optimized_Shared: 10.211.129.190: id:4918' /v:10.211.129.190 &amp;\n/usr/local/bin/bb_kvm_client /boxilla:id:00:8c:10:1c:c6:02 /gdi:sw /window-sizing:3836x2160 /sec-rdp /rfx /client-uid:70_1090_563C6BD9D1 /mqtt-endpoint:127.0.0.1:1883 /abs-coords:'(0,0)(8191,32767)' -grab-keyboard /shared /window-position:2x0 /analog-audio /t:'TX: TX_247_Optimized_Shared: 10.211.129.247: id:17A6' /v:10.211.129.247 &amp;\n</code></pre> Note: The Highseclabs must be removed as it also attempts to divide the mouse input into sectors. It appears to create two sectors only.</p> <p>Note: It is also import to recognise that any other third party drivers (from our competitors) will also potentially cause issues. </p> <p></p> <p></p> <p></p>"},{"location":"architecture/sdkvm/sdkvm_prorail_proposal/#possible-mapping-schemes","title":"Possible Mapping Schemes","text":"<p>One approach would be as follows:     - On the target RedHat machine we run a program as part of setup that generates a json array which shows each monitor ID (In  our TX EDID we embed the serial number) and its pixel mapping as derived from an application like XrandR. From this we could calculate information that could be imported into DESKVUE to help us in the process of mapping relevant sectors.     - DESKVUE would use a REST call to the existing TXs to get their serial number. This information could then be used to correlated the information in the json array (exported from Redhat) and provide the user defining the connection with the relevant mouse sector to associate with a given connection. </p> <p>A second approach would be to provide a option for a SDKVM user to apply different mouse sectors on a given window. Only the correct mouse sector would allow the user see the mouse move in the client window. He would then select and bind that mouse sector to that tile. The user would then have to repeat this procedure for each tile associated with a head in the multiheaded configuration.</p> <p>A third approach would be to attempt to automate the process above. In the setup phase a user launches a connection to a given head. The connection logic then tries various mouse sector mappings. It sends a mouse positioning even to the target and then takes a snapshot of the target desktop looking for evidence of the mouse at a specific location. This analysis would require the ability to find the mouse pointer on the screen by analysing the captured bitmap. Once it confirmed the bitmap then the mouse sector would be bound to that connection.</p> <p>The difficulties with all of these approaches is that the number of potential mouse sectors scales with the number of targets, so, for example, if we had 10 target machines each with 10 heads then the number of possible sectors to select from would be 80. We could try and manage this by trying to figure out which sectors are appropriate for a given target and then only presenting 8 options for each connection, but this again requires some correlation between the target and the deskvues knowledge of where that target is connected on a given TX.</p> <p>An alternative approach would be to develop mouse filter drivers for the Linux and Windows platforms. These drivers would segment the incoming mouse co-ordinates from a 32K X 32K grid and direct the mouse to the appropriate head. With our system in which each TX presents a mouse hid the driver would need to still maintain a mapping between a particular mouse input (from a given TX) and the head associated with that TX. In the latest versions of the appliance we expose the TX serial number in the HID as part of the device descriptor.</p>"},{"location":"architecture/sdkvm/sdkvm_prorail_proposal/#abstracting-the-mapping-scheme","title":"Abstracting the Mapping Scheme","text":"<p>Simple Horizontal Mapping</p> <p></p> <p>Simple Vertical Mapping</p> <p></p> <p>Grid or Matrix Mapping </p> <p></p> <p>L Shaped Mapping</p> <p>These is no scheme that allows us resolve a vertical scheme and a horizontal scheme where both schemes interact.</p> <p></p>"},{"location":"architecture/sdkvm/sdkvm_prorail_proposal/#mouse-speed","title":"Mouse Speed","text":"<p>We present a 32k X 32K matrix to the target PC. This may be problematic when the mouse is mapped across a span of horizontal monitors. The matrix ideally should match the shape of the target grid.</p>"},{"location":"architecture/sdkvm/sdkvm_prorail_proposal/#prorail-audio-requirements","title":"Prorail Audio Requirements","text":"<ul> <li>Implications for audio management on the OSD</li> <li>Implications for audio management at Audio Management level.</li> <li>Jira Ticket</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_prorail_proposal/#rx-tx-audio-paths-and-interfaces","title":"RX TX Audio Paths and Interfaces","text":""},{"location":"architecture/sdkvm/sdkvm_prorail_proposal/#reference-and-resources","title":"Reference and Resources","text":"<pre><code>Red Hat target OSD login\nTester\ncloud$1\n10.211.132.59\n\nfor SSH\n\nroot\ncloud$1\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_rest_work/","title":"Deskvue REST API TASKS","text":""},{"location":"architecture/sdkvm/sdkvm_rest_work/#find-the-below-docs-for-manual-login-and-logout-on-deskvue","title":"Find the below docs for Manual login and logout on Deskvue","text":""},{"location":"architecture/sdkvm/sdkvm_rest_work/#stats_cli-role-for-manual-login-and-logout","title":"Stats_cli role for Manual login and logout","text":"<ul> <li>Share point link for DOC</li> <li>source code</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_rest_work/#osd-role-for-manual-login-and-logout","title":"OSD role for Manual login and logout","text":"<ul> <li>Share point link for DOC</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_rest_work/#internal-rest-api-handler","title":"Internal REST API Handler","text":""},{"location":"architecture/sdkvm/sdkvm_rest_work/#video-statistics","title":"Video statistics","text":"<p>To handle the video statistics, the internal_resthandler will subscribe to the topic shown below and put the video statistics in a json queue using the rest api http://localhost:9998/statistics/facts/video_facts</p> <p>Subscribed MQTT TOPIC is blackbox/sdkvm/deskvue/workspace_server/status/statistics.</p> <p>Payload message of mqtt is {     \"client_uid\":\"3b07e2a340\",     \"connection_type\":\"transmitter\",     \"connection_mode\":\"shared\",     \"server_hostname\":\"192.168.1.169\",     \"server_port\":3389,     \"bit_rate\":27427220,     \"frame_rate\":21.0,     \"time_stamp\":\"15:16:14 16-01-2023\"   }</p> <ul> <li>source code refernece</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_rest_work/#deskvue-upgrade-progress","title":"DeskVue upgrade progress","text":"<p>To handle DeskVue upgrade progress, the internal_resthandler will subscribe to the topic below and put the upgrade progress in global variables using the rest api http://localhost:9998/upgrade/progress</p> <p>Subscribed MQTT TOPIC is blackbox/sdkvm/deskvue/status/osd_sdkvm/upgrade.</p> <p>Payload message of mqtt is {\"status\":\"\",\"progress\":&lt;0-100&gt;,\"exit_code\":&lt;0/n&gt;} <ul> <li> <p>source code refernece</p> </li> <li> <p>See reference 2 to know the upgrade flow on Deskvue</p> </li> </ul>"},{"location":"architecture/sdkvm/sdkvm_rest_work/#force-login-and-logout-alerts","title":"Force Login and Logout Alerts","text":"<p>To handle DeskVue alerts, the internal_resthandler will subscribe to the topic below and put the alert data in global variables using the rest api http://localhost:9998//alerts</p> <p>Subscribed MQTT TOPIC is blackbox/sdkvm/deskvue/status/internal_rest_handler/alerts.</p> <p>Payload message of mqtt is {\"alert_category\": int,\"alert_condition\": int,\"alert_component\": int,                             \"alert_command\": int, \"alert_status\":int, \"alert_description\":string,\"alert_context1\": string,                             \"alert_context2\":string,alert_context3\": string,alert_context4\": string}</p> <ul> <li> <p>for more more info, see the link </p> </li> <li> <p>Reference 2 for source code </p> </li> <li> <p>see section 1.11.4.11 GET Alerts</p> </li> </ul>"},{"location":"architecture/sdkvm/sdkvm_rest_work/#control-bridge-task-for-force-login-logout-and-workspace","title":"Control Bridge task for Force login, Logout and workspace","text":"<ul> <li>sdkvm_control_bridge</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_rest_work/#stats-monitor-for-eth-link-alerts-network-link-and-connection-statistics","title":"Stats monitor for eth link alerts, network link and connection statistics","text":"<p>Currently statsmonitor application handles ethernet link change or up/down alert, ethernet link statistics and network connection statistics.</p>"},{"location":"architecture/sdkvm/sdkvm_rest_work/#eth-link-alert","title":"ETH LINK ALERT","text":"<p>1.For Every 60 seconds, stats_monitor check the eth link status like up or down.</p> <p>2.If it is toggled to previous state then raise the alert for eth link status.</p> <p>3.INTERNAL REST API http://localhost:9998/alerts.</p> <ul> <li>see section 1.11.4.11 GET Alerts </li> </ul>"},{"location":"architecture/sdkvm/sdkvm_rest_work/#network-link-statistics","title":"NETWORK LINK STATISTICS","text":"<p>1.For Every 60 seconds, stats_monitor check the eth physical connection type, physical connection speed and LACP connection.</p> <p>2.Send those stats using INTERNAL REST API http://localhost:9998/statistics/facts/network/physical.</p> <ul> <li>see section 1.11.4.17.1 URL for json format</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_rest_work/#network-connection-statistics","title":"NETWORK CONNECTION STATISTICS","text":"<p>1.For Every 60 seconds, stats_monitor reads the tranfer, receiving and dropped bytes from  the file /proc/net/dev based on ethernet interface.</p> <p>3.Send those stats using INTERNAL REST API http://localhost:9998/statistics/facts/network/eth_connections.</p> <ul> <li> <p>see section 11.11.4.19 for json format</p> </li> <li> <p>Reference for source code </p> </li> <li>Referance for JIRA TRACK</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_rest_work/#additional-rest-apis-added-specific-to-sdkvm","title":"Additional REST API's Added Specific to SDKVM","text":""},{"location":"architecture/sdkvm/sdkvm_rest_work/#rest-api-for-unmange-the-device","title":"REST API for unmange the device","text":"<ul> <li>Referance, section 1.11.1.25 PUT UnManage the device</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_rest_work/#rest-api-for-upload-the-file","title":"REST API for upload the file","text":"<ul> <li>Referance, section 1.11.2.2 POST File Upload</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_rest_work/#rest-api-for-upload-the-large-file","title":"REST API for upload the large file","text":"<ul> <li>Referance, section1.11.2.4 POST LargeFile Upload</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_rest_work/#rest-api-for-receiving-network-settings-of-the-device","title":"REST API for receiving network settings of the device","text":"<ul> <li>Referance, section 1.11.4.3 GET network Settings</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_rest_work/#rest-api-for-configuring-network-settings-of-the-device","title":"REST API for configuring network settings of the device","text":"<ul> <li>Referance, section 1.11.1.26 PUT Network Settings</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_rest_work/#rest-api-to-get-disk-space-to-start-upgrade-of-the-device","title":"REST API to get disk space to start upgrade of the device","text":"<p>-Referance, section 1.11.4.4 GET disk space to start upgrade</p>"},{"location":"architecture/sdkvm/sdkvm_rest_work/#rest-api-for-removing-upgrade-image-files-of-the-device","title":"REST API for removing upgrade image files of the device","text":"<ul> <li>Referance, section 1.11.1.28 PUT Remove upgrade image files</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_rest_work/#rest-api-to-start-upgrade-of-the-device","title":"REST API to start upgrade of the device","text":"<ul> <li>Referance, section 1.11.1.27 PUT Upgrade Start</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_rest_work/#rest-api-to-get-upgrade-progress-or-status-from-the-device","title":"REST API to get upgrade progress or status from the device","text":"<ul> <li>Referance, section 1.11.4.5 GET upgrade status</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_rest_work/#rest-api-to-get-network-eth-connection-stats-of-the-device","title":"REST API to get network eth connection stats of the device","text":"<ul> <li>Referance, section 1.11.4.19 GET Network eth Connection stats for SDKVM</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_rest_work/#rest-api-launch-workspace-forcefully-on-the-device","title":"REST API launch Workspace forcefully on the device","text":"<ul> <li>Referance, section 1.11.1.7 PUT Force Workspace (Secure and Unsecure)</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_rest_work/#rest-api-to-get-sdkvm-receiver-users-workspaces-list","title":"REST API to get SDKVM Receiver Users Workspaces List","text":"<ul> <li>Referance, section 1.11.4.40 Secure GET SDKVM Receiver Users Workspaces List</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_rest_work/#rest-api-to-get-status-of-workspace-on-sdkvm","title":"REST API to get status of workspace on SDKVM","text":"<ul> <li>Referance, section 1.11.4.38 Secure GET REST API to get status of workspace on SDKVM</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_rest_work/#diagnostics-log-export-using-boxilla","title":"Diagnostics-log-export-using-boxilla","text":"<ul> <li> <p>Reference for diag.</p> </li> <li> <p>Reference for jira track</p> </li> </ul>"},{"location":"architecture/sdkvm/sdkvm_software_drops/","title":"Software Drops For SDKVM","text":""},{"location":"architecture/sdkvm/sdkvm_software_drops/#sdkvm-100-ecrc-drops","title":"SDKVM 1.0.0 EC/RC Drops","text":""},{"location":"architecture/sdkvm/sdkvm_software_drops/#ec1-january-31st","title":"EC1 - January 31st","text":"<ul> <li>System auto boots to the OSD</li> <li>System can operate in unmanaged mode or managed mode (Managed mode is limited to making connections to managed appliances only, there is no Boxilla configuration)</li> <li>A user with appropriate permissions can create connections and workspaces in an unmanaged device.</li> <li>The OSD will display correct workspace status for active or inactive workspaces.</li> <li>The SDKVM can be discovered by Boxilla.</li> <li>The SDKVM can be managed by Boxilla. (but does not support Boxilla provisioned connections). It will copy the XML file (but not use it), place a Boxilla token on SDKVM, change IP address to a static IP.</li> <li>Boxilla can reboot the SDKVM over REST</li> <li>Boxilla can retrieve Product Details over REST</li> <li>Boxilla can manually manage a SDKVM without having to depend on the discovery protocol.</li> <li>The SDKVM can respond to a Boxilla Ping</li> <li>The system will support multiple users in unmanaged mode and each of these users will be able to maintain a separate connection and workspace.</li> <li>It will be possible to configure and persist network settings through the OSD allowing the user set a static or DHCP address. (Note: Boxilla does not support DHCP). Note: This is only possible in unmanaged mode.</li> <li>Hotkeys are managed locally but there functionality will be limited to terminating connections. (Launching workspaces through a hot key will not be supported)</li> <li>A user can launch workspaces based on pre-provisioned connections from the OSD workspace screen.</li> <li>When a workspace is launched the OSD reflects the status of that launch. If the workspace is terminated by a hot key then the OSD will update to reflect that change in status.</li> <li>Boxilla can retrieve information on a version compatibility check </li> </ul>"},{"location":"architecture/sdkvm/sdkvm_software_drops/#not-supported","title":"Not Supported","text":"<ul> <li>No audio support in this release.</li> <li>Configuration of users and connection on the SDKVM through Boxilla is not supported.</li> <li>It is not possible to launch Workspaces from hot keys</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_software_drops/#ec2-february-27th","title":"EC2 - February 27th","text":"<ul> <li>Monitors designations, positions and resolutions can be managed through the OSD.</li> <li>It will be possible to perform a basic upgrade of the system from a Thumb drive.</li> <li>Boxilla can unmanage the SDKVM using the REST API and remove any Boxilla related settings.</li> <li>Boxilla can change network settings on the SDKVM using the REST API. </li> <li>The Boxilla Mac can be retrieved from the Discovery file and configured in the SDKVM system Settings File without the user having to enter this directly.</li> <li>When a user logs out all active connections in a workspace are terminated.</li> <li>It will be possible to configure and persist network settings through Boxilla.</li> <li>Basic audio support on RDP, KVM and PCoIP connections.</li> <li>Full connection failure and status messages on failed connections with appropriate messages.</li> <li>It should be possible for the admin user to assign connections to other local (non-admin) users.</li> <li>Access to the underlying operating system should not be possible.</li> <li>Connection and workspace status should be reflected in the OSD and on the workspace launch buttons.</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_software_drops/#ec3-march-27th","title":"EC3 - March 27th","text":"<p>This is the first prototype for a version of the SDKVM suitable for demos. This will be the basis for RC1.</p> <ul> <li>It will be possible to mute audio on a per tile level.</li> <li>Full audio per tile control and integration</li> <li>It will be possible to select the desired audio interfaces on the SNUC hardware through th OSD.</li> <li>The SDKVM will provide informative and appropriate messaging for any connection failure or connection loss.</li> <li>Complete System backup and restore to a thumb drive.</li> <li>The System will support the retrieval of minimal diagnostic information and log files using a thumb drive.</li> <li>Complete system lockdown available, but no bios or hard disk encryption.</li> <li>Hotkeys are managed locally with the ability to configure locally for locally provisioned users. These mappings will allow users launch workspaces from mapped hot keys.</li> <li>Workspace Restore functionality mapped to a hot key allows a user snap the workspace tiles to their original positions.</li> <li>Connections launch and terminate reliably without freezing or dropout. (still an isue with freezing)</li> <li>An Admin user can create workspaces and assign hot keys on a managed system.</li> <li>It will be possible to perform a basic upgrade of the system from a Thumb drive.</li> <li>It should be possible to set the keyboard locale from the OSD.</li> <li>It should be possible to reboot the SDKVM from the OSD.</li> <li>It should be possible to assign either DHCP or Static IP and have this persist through a reboot.</li> <li>It should be possible to mute and unmute audio globally through a hot key (Windows +m, windows + u)</li> <li>It should be possible to bring up the tile overlay controls for all tiles by pressing windows + b.</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_software_drops/#rc1-april-29th","title":"RC1 - April 29th","text":"<p>This is the first release for the SDKVM suitable for demos. This will be a preliminary proof of concept release. It can operate in managed or unmanaged mode, but the unmanaged mode is limited to Boxilla managing the device and facilitating connections to managed devices; however, Boxilla cannot configure the device or create workspaces and connections for the SDKVM.</p>"},{"location":"architecture/sdkvm/sdkvm_software_drops/#likely-features","title":"Likely Features:","text":"<ul> <li>It will be possible to mute audio on a per tile level.</li> <li>Full audio per tile control and integration</li> <li>It will be possible to select the desired audio interfaces on the SNUC hardware through th OSD.</li> <li>The SDKVM will provide informative and appropriate messaging for any connection failure or connection loss.</li> <li>Complete System backup and restore to a thumb drive.</li> <li>The System will support the retrieval of minimal diagnostic information and log files using a thumb drive.</li> <li>Complete system lockdown available, but no bios or hard disk encryption.</li> <li>Hotkeys are managed locally with the ability to configure locally for locally provisioned users. These mappings will allow users launch workspaces from mapped hot keys.</li> <li>Connections launch reliably from the OSD.</li> <li>Connections launch reliably from the Hot Keys.</li> <li>Connections can run on an extended soak without freezing or dropping.</li> <li>The system can be discovered and managed by Boxilla, and it will also be possible to make connections to managed transmitters, but Boxilla cannot be used to create connections and workspaces or to otherwise configure the SDKVM.</li> <li>An Admin user can create workspaces and assign hot keys on a managed system.</li> <li>It will be possible to perform a basic upgrade of the system from a Thumb drive.</li> <li>It should be possible to set the keyboard locale from the OSD login screen.</li> <li>It should be possible to reboot the SDKVM from the OSD.</li> <li>It should be possible to restore the system to factory defaults.</li> <li>It should be possible to assign either DHCP or Static IP and have this persist through a reboot.</li> <li>It should be possible to mute and unmute audio globally through a hot key (Windows +m, windows + u)</li> <li>It should be possible to bring up the tile overlay controls for all tiles by pressing windows + b.</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_software_drops/#possible-features","title":"Possible Features","text":"<ul> <li>An administrative user can create connections and workspaces and assign these to another standard user.</li> <li>The system supports the configuration, hot swaping and reconfiguration of monitors.</li> <li>Changes in the monitor configuration are propagated to existing workspaces. </li> <li>Tile locations are calculated dynamically on launch by translating the virtual positioning system into actual screen co-ordinates.</li> <li>Any additional support required for bios protection, system lock down and security.</li> <li>Upgrade packages should be encrypted.</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_software_drops/#not-supported-in-rc1","title":"Not supported in RC1","text":"<ul> <li>Leostream broker is not supported due to an inability to test and lack of a detailed formal specification or user scenarios.</li> <li>The SDKKVM can be discovered and managed by Boxilla. It will also be possible to make connections to managed transmitters, but Boxilla cannot be used to create connections and workspaces or to otherwise configure the SDKVM.</li> <li>The system does not support logins authenticated by Boxilla.</li> <li>No Login and Logout events are sent to Boxilla.</li> <li>The System will not support the retrieval of minimal diagnostic information and log files over Boxilla.</li> <li>It will not be possible to upgrade the system from Boxilla. </li> <li>Extended Desktop is not supported on any connection type.</li> <li>Boxilla cannot retrieve statistics from the SDKVM.</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_software_drops/#limitations","title":"Limitations","text":"<ul> <li>The designated hotkey is the windows key and cannot be changed in this version.</li> <li>Only horizontal placement of workspaces is supported in this release. Support for vertical placement will be supported in subsequent releases.</li> <li>On the SDKVM we current cannot have a total pixel width or height over 16384 x 16384 this means than when using a 5K monitor the maximum resolutions that can be use is:<ul> <li>1x Monitor at  5120x2160</li> <li>2x Monitors at 3840x2160</li> <li>1x Monitor at some resolution less than 3584 pixels wide.</li> </ul> </li> <li>DNS resolution of connection names does not work reliably.</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_software_drops/#targeted-bugs","title":"Targeted Bugs","text":"<ul> <li>SDKVM 1.0.0 targeted bug list</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_software_drops/#sdkvm-101","title":"SDKVM 1.0.1","text":""},{"location":"architecture/sdkvm/sdkvm_software_drops/#ec1-june-30th-provisional-changed-to-june-to-align-with-boxilla-ec5-release","title":"EC1 - June 30th (provisional - changed to June to align with Boxilla EC5 Release)","text":"<ul> <li>The SDKVM will send limited status events for Login and Logout to Boxilla over the North-bound REST API.</li> <li>The system will support multiple users via Boxilla in managed mode.</li> <li>Logged in users can be authenticated by Boxilla. (only static user support).</li> <li>All relevant REST API interfaces are functional.</li> <li>All short-listed bugs fixed</li> <li>Full Boxilla integration :<ul> <li>Connections created in Boxilla can be provisioned on the SDKVM (assumes Boxilla does the necessary translation from XML into the json format for users and connections defined in the SDKVM data model). In the first iteration tile locations and widths for a template are normalised to a 1920x1080 screen - Data Model </li> <li>Workspaces designed in Boxilla can be downloaded to the SDKVM and will map to the available monitors.</li> </ul> </li> <li>The System will support the retrieval of minimal diagnostic information and log files over Boxilla.</li> <li>It will be possible to upgrade the system from Boxilla or a Thumb drive. </li> <li>The System will support the retrieval of complete diagnostic information and log files over Boxilla.</li> <li>The System will support the retrieval of complete diagnostic information and log files using a thumb drive.</li> <li>Dual network interfaces supported - active network interface detected on power-up and link change</li> <li>Boxilla can force a user logout using the REST API.</li> <li>Bios password protected</li> <li>Extended Desktop Support</li> <li>Unmanaged systems impose user, connection and workspace limits as defined in https://bboxjira.atlassian.net/browse/BUG-5139</li> <li>The system will communicate changes in IP address to Boxilla over the Northbound Rest API</li> <li>The system can be built from source for provisioning on a standard SNUC</li> <li>Clonzilla image support for manufacturing</li> <li>EC4 will be released in the form of an upgrade package.</li> <li>Bios password protected</li> <li>Secure boot</li> <li>The system will implement a complete monitor management layer to manage monitor reconfiguration and hot-swap</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_software_drops/#ec2-jule-22nd-provisional","title":"EC2 - Jule 22nd (provisional)","text":"<ul> <li>All the above with bugs fixed and stabilisation of features.</li> <li>Bios lockdown available.</li> <li>Complete system lockdown available</li> <li>TX Settings configurable</li> <li>Hotkeys can be managed through Boxilla. These mappings will allow Boxilla provisioned users to launch workspaces from mapped hot keys.</li> <li>Favourites defined in Boxilla map to workspaces on the SDKVM.</li> <li>Auto Login support </li> <li>Auto Launch support</li> <li>It will be possible to upgrade a TX from a SDKVM instance.</li> <li>Upgarde of TX from SDKVM receiver </li> <li>The SDKVM will send a complete set of status events for Login and Logout to Boxilla over the North-bound REST API.</li> <li>Variable size mouse cursor</li> <li>Active directory users supported.</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_software_drops/#rc1-august-30th-provisional","title":"RC1 - August 30th (provisional)","text":"<ul> <li>All of the above with optimisation, profiling, critical bugs fixed and stabilisation of features.</li> <li>Disk encryption to prevent mount and snoop</li> <li>It will be possible to connect to Dual head transmitters and display each head in a different tile with provisioned audio.</li> <li>Bonded connections</li> <li>Zones</li> <li>Statistics from connections and workspaces can be displayed in Boxilla</li> <li>Beaconing for Mouse location</li> <li>Licensing support</li> <li>Labels support </li> <li>Export workspaces to Boxilla </li> <li>Mouse Acceleration Support</li> <li>Production Grade internal REST servers</li> <li>Production Grade Secure internal MQTT server for workspace server with TLS</li> <li>Persistent Connections</li> <li>Switch to previous workspace</li> <li>Import workspaces to Boxilla on login</li> <li>Logged in users authentication through Boxilla and LDAP</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_software_drops/#rc2-september-provisional","title":"RC2 - September  (provisional)","text":"<ul> <li>Statistics and Performance information for workspaces on the OSD  </li> <li>Statistics and Performance information for the OS Core on the OSD  </li> <li>Tile Pinning for fixed windows</li> <li>Flexible Tile manipulation</li> <li>User defined Templates</li> <li>Dynamic Bandwidth Allocation</li> <li>Zone support</li> <li>Support for Organisational Units</li> <li>Full Boxilla Integration - Boxilla understand and can manage the concept of workspaces and dependent connections, templates etc</li> <li>LACP</li> <li>Valid audio, video statistics for multiple connections in a workspace</li> <li>Force Connect support: - ability to launch individual connections from Boxilla</li> <li>Dual network interfaces and switch over</li> <li>Support for Manufacturing</li> <li>Support for Automation</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_software_drops/#workshop-agenda-for-sdkvm-scoping-of-100","title":"Workshop Agenda for SDKVM Scoping of 1.0.0","text":""},{"location":"architecture/sdkvm/sdkvm_software_drops/#code-repo-and-branching-strategy-930-1000","title":"Code Repo and Branching Strategy 9:30 \u2013 10.00","text":"<p>Discussion on the branching strategy and code management that we intend to use with the SDK This is a low level technical discussion of interest to SDKVM team only.</p>"},{"location":"architecture/sdkvm/sdkvm_software_drops/#display-monitor-management-1000-1030","title":"Display Monitor Management 10:00 \u2013 10:30","text":"<p>Discussion on monitor management and its impact on the current design and data model. Micheal will discuss the proposed changes to accommodate monitor management and a move towards a virtual frame of reference to accommodate the requirements to create workspaces in Boxilla that are independent of monitor configuration. We are proposing a scheme for specifying workspaces and tiles that are independent of resolution. Getting this into the first version of the product is key as it will minimise future changes to the structure of the data model.</p> <p>This is a low level discussion of interest to SDKVM team and Boxilla team, but could have implications for customers use and expectations.</p> <p>Associated bugs for Monitor Management:</p> <ul> <li>BUG-5086            OSD: Monitor detect function does not work reliably</li> <li>BUG-4860            SDKVM/Openbox sometimes fails to detect all monitors</li> <li>BUG-4595            OSD: Display screen Identify button doesn't work</li> <li>BUG-5086            OSD: Monitor detect function does not work reliably</li> <li>BUG-4860            SDKVM/Openbox sometimes fails to detect all monitors</li> <li>BUG-5429            OSD: Display -Unable to update resolutions on multiple screens concurrently as unable to view confirmation prompt</li> <li>BUG-5381            OSD: Display -If assigning primary status to screen on HDMI 1 (screen 1) then OSD incorrectly appears and stays on DP 2 (screen 2)</li> <li>BUG-5368            OSD: Display -Black screen and partial screen after updating resolutions on two displays concurrently</li> <li>BUG-5323            OSD: Display -Attempting to do a subsequent resolution change after the initial resolution change results in the selected display switching to the display which is the designated OSD display</li> <li>BUG-4673            OSD: Recommending changes to Identify functionality in Display</li> <li>BUG-5421            OSD: Workspaces -Screen are been displayed in correct ordering but with absolute IDs instead of relative IDs</li> <li>BUG-5325            OSD: Display -Dead / Empty space between refresh rate options for 5120 x 2160 resolution on 5K screen</li> <li>BUG-4595            OSD: Display screen Identify button doesn't work</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_software_drops/#assigning-workspaces-to-other-users-1030-1100","title":"Assigning workspaces to other users. 10:30 \u2013 11:00","text":"<p>A requirement of the unmanaged and managed system is that an Admin user can create workspaces and assign then to other users. This has a lot of implications for the OSD and the data model. I will discuss a proposed solution for the data model, but we need product management input on how this will look in practise on the OSD. We need to give square root clear direction on how this should look and operate.</p> <p>This is a usability discussion of interest to SDKVM team and the Boxilla team, but could have implications for data model and customer experience.</p>"},{"location":"architecture/sdkvm/sdkvm_software_drops/#questions","title":"Questions","text":"<ul> <li> <p>Can a power user create connections? - - No \u2013 only admin can create connections or users.</p> </li> <li> <p>Can a power user modify connections they have created? - No \u2013 only admin can create connections or users.</p> </li> <li> <p>Can an admin user allocate connections to other users, for example, can an admin user allocate connections to a power user so that the power user can subsequently use these connections in creating his own workspaces? - Yes  - admin needs to be able to allocate connections to Power Users \u2013 but in V1.0  \u2013 only admin can create connections or users.</p> </li> <li> <p>Can a connection created by a power user be allocated by an admin user to another admin user? Is this a copy of the connection, can the other admin user modify it independently of the power user that created it? - No \u2013 only admin can create connections or users</p> </li> <li> <p>Can a workspace created by a power user be allocated by an admin user to another user? Is this a copy of the workspace, can the other admin user modify it independently of the power user that created it? - Yes \u2013 this should be possible,  but only if the user has the access rights to connections in that Work-space</p> </li> <li> <p>If an admin user allocates a workspace to another admin user. Is this a copy of the workspace, can the other admin user modify it independently of the original admin user that created it? - Yes \u2013 all admin users can modify/update workspaces. Not sure there needs to be \u201callocation\u201d of workspaces between admins \u2026. What can implement what is easier for V1.0.</p> </li> <li> <p>Can an Admin user modify workspaces created by other admin users? Does the modification replace the existing workspace? - Yes \u2013 all admin users can modify/update workspaces. Yes this replaces existing workspace for all.</p> </li> <li> <p>Can a power user modify a connection allocated to it by the admin user? - Need more thinking on this \u2013 as it can impact total available Workspaces in a Deskvue. For V1.0 we should do what is easiest \u2013 even if means Power Users cannot create/modify workspaces. </p> </li> <li> <p>Can a power user delete a connection allocated to it by an admin user? - No \u2013 power users cannot delete connections allocated</p> </li> <li> <p>Can an admin user delete a connection created by a power user? - Power-users do not have ability to create connections</p> </li> <li> <p>If a connection is in an allocated workspace and the admin user (or power user) decides to delete the connection, should the deletion be prevented with a warning that the connection is in use, or should we delete the connection and remove it from any existing workspaces that feature it? -- Ideally we should prompt user with message saying in use in Workspaces (ideally listing workspaces where it used) \u2013 user can decide to delete or cancel operation. It decided to delete connection it should be removed from all workspaces if features in. For V1.0 we may need to limit what we do \u2026.. time is more important than functionality</p> </li> </ul>"},{"location":"architecture/sdkvm/sdkvm_software_drops/#reliability-1100-1130","title":"Reliability 11:00 \u2013 11:30","text":"<p>Discuss outstanding reliability issues and agree on strategies or mitigations to address these.</p> <p>This is a discussion of interest to SDKVM team and product management.</p> <p>Associated bugs:  - BUG-5370            Failed to init Syn/Fin response from TX while making a shared connection from SDKVM - BUG-4670            KVM Connections: KVM connections froze and blocked RXs from connecting - BUG-5378            OSD: Unable to launch DNS connections after configuring network, managing and then importing settings - BUG-5099            OSD: Workspaces -Unable to launch DNS connections after overnight soak</p>"},{"location":"architecture/sdkvm/sdkvm_software_drops/#outstanding-product-management-issues","title":"Outstanding product Management Issues","text":"<p>11:30 \u2013 12:00 Review Outstanding Product Management issues and finalise a version of the DPS that can be used for RC1</p> <p>https://bboxjira.atlassian.net/issues/?filter=10792</p>"},{"location":"architecture/sdkvm/sdkvm_software_drops/#john-hickeys-list","title":"John Hickey's list","text":"<ol> <li>Upgrades for V1.0 \u2013 how we do them  \u2026 how do we upgrade demo units (do not need to preserve DB, would be nice if we could but not vital) \u2026 how we see upgrading V1.0 to V1.1, etc.</li> <li>How we lock down V1.0 \u2026  (e.g. we need to disable ability to launch a terminal)</li> <li>I think we need to have a \u201cmechanism\u201d to run \u201cconversion\u201d of Configuration/DB over time \u2026 ie say upgrading from V1.0 to V1.1 \u2026 we find 1.1 need to change model \u2026 need to convert 1.0 DB </li> <li>Need \u201cmechanism\u201d to soak test \u201cswitching\u201d between work-spaces \u2026. For system test \u2013 can be using Keyboard simulator or rest api</li> <li>Network interface operation for V1.0</li> <li>Monitor detection/update for V1.0 \u2026.</li> <li>What we will implement for \u201cUser\u201d allocations of workspaces \u2026.</li> </ol> <p>This is a discussion of interest to SDKVM team and product management.</p> <p>12:00 \u2013 12:15 Discussion on secure boot and encryption</p> <p>This is a discussion of interest to SDKVM team and product management.</p> <p>12:15 \u2013 12:30 Any other business</p> <p>This is a discussion of interest to SDKVM team and product management.</p> <p>Notes: There are a large number of items outstanding on the SDKVM which require Product Management input. I have sent a list of Jira tickets which I have asked John and Tom to review but there are other issues which we need to agree on before we can finalise aspects of the SDKVM design. -   There are a list of outstanding product management issues at : https://bboxjira.atlassian.net/issues/?filter=10792 . These ideally need to be reviewed before the workshop. -   The proposed feature list for RC1 is as follows:</p>"},{"location":"architecture/sdkvm/sdkvm_tile_replacement_menu/","title":"Tile Replacement Process","text":""},{"location":"architecture/sdkvm/sdkvm_tile_replacement_menu/#dependencies","title":"Dependencies","text":"<pre><code>sudo apt-get install python3-tk\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_upgrade/","title":"Deskvue software upgrade","text":""},{"location":"architecture/sdkvm/sdkvm_upgrade/#introduction","title":"Introduction","text":"<p>The purpose of this document is to capture the design and specification of the Deskvue software update strategy. The document defines the layered architecture design of the software upgrade process and the requirement corresponding to each layer. This document also discusses the utility and tools required for the complete software upgrade process.</p> <p>Deskvue uses a self-extracting package to upgrade itself through OSD or Boxilla. The firmware package is named DESKVUE_{VERSION}.signed.dkv. Deskvue supports signed encrypted firmware upgrade.</p>"},{"location":"architecture/sdkvm/sdkvm_upgrade/#package-building","title":"Package Building","text":""},{"location":"architecture/sdkvm/sdkvm_upgrade/#packaging-choice","title":"Packaging choice","text":"<p>For the current phase of SDKVM, we chose to package the software using Debian packages. In the future, advance package manager can be used. These advanced packages worked on the principle of containerization but have a learning curve to implement and use in the product.</p> <ul> <li> <p>snap</p> </li> <li> <p>appimage</p> </li> <li> <p>flatpak</p> </li> </ul> <p>The Debian packager is used to build the Debian package that contains updates for the SDKVM's principle applications, core libraries, window manager configuration files, OS security upgrades, and patches.</p> <p>The signed firmware package and Debian packages get built as a part of build_component_jenkin.sh script in SDKVM WORKREPO. For package build instructions please refer below.</p> <p>For package build instructions please refer below.</p>"},{"location":"architecture/sdkvm/sdkvm_upgrade/#debian-package-build","title":"Debian package build","text":"<pre><code>dpkg-deb --build --root-owner-group DESKVUE_1.0.0_amd64\n\ndpkg-deb --build --root-owner-group OPENBOX_BB_1.0.0_amd64\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_upgrade/#debian-package-install","title":"Debian package install","text":"<pre><code>sudo dpkg --force-all -i OPENBOX_BB_1.0.0_amd64.deb\n\nsudo dpkg --force-all -i DESKVUE_1.0.0_amd64.deb\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_upgrade/#firmware-package-build","title":"Firmware package build","text":"<pre><code>cp install_templates/firmware_setup.sh DESKVUE_1.0.0_amd64.deb OPENBOX_BB_1.0.0_amd64.deb release/\n\n# Un-encrypted version\nmakeself --xz --sha256 --nox11 --follow release/ DESKVUE_1.0.0.$GIT_REF_SHORT.dkv \"DESKVUE:$GIT_REF_LONG\" ./firmware_setup.sh\n\n# Encrypted package for release\nmakeself --xz --sha256 --nox11 --follow --ssl-encrypt --ssl-pass-src pass:$ENCRYPT_PASS release/ DESKVUE_1.0.0.$GIT_REF_SHORT.enc.dkv \"DESKVUE:$GIT_REF_LONG\" ./firmware_setup.sh\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_upgrade/#firmware-package-signing","title":"Firmware package signing","text":"<pre><code># Signing the encrypted package\nopenssl dgst -sign $SIGN_KEY -keyform PEM -sha256 -passin pass:BBox@Limers_23 -out DESKVUE_1.0.0.$GIT_REF_SHORT.signature -binary DESKVUE_1.0.0.$GIT_REF_SHORT.enc.dkv\n\ncp DESKVUE_1.0.0.$GIT_REF_SHORT.enc.dkv DESKVUE_1.0.0.$GIT_REF_SHORT.signed.dkv\n\n# Merge singature and encrypted firmware\ndd if=DESKVUE_1.0.0.$GIT_REF_SHORT.signature bs=512 count=1 &gt;&gt; DESKVUE_1.0.0.$GIT_REF_SHORT.signed.dkv\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_upgrade/#deskvue-upgrade-utility","title":"Deskvue Upgrade utility","text":"<p>Deskvue follows a layered approach to provide the software update functionality. Each layer contains a set of functionality. As shown in the figure Deskvue can fetch firmware image from the following possible sources:</p> <ul> <li> <p>USB Storage</p> </li> <li> <p>Update via Manager (Boxilla)</p> </li> <li> <p>SFTP to <code>/home/snuc/SDKVM/upgrade</code> location</p> </li> </ul> <p> Firmware upgrade layer </p> <p>A signed and encrypted, self-extracting firmware will pass through OSD or Boxilla manager to the firmware update utility. In terms of the software upgrade, a core software update application will process the firmware upgrade image and performs the signature verification, integrity check, and decryption. In the end software upgrade utility will execute the firmware to install the required Debian packages packaged in self-extracting firmware.</p>"},{"location":"architecture/sdkvm/sdkvm_upgrade/#firmware-upgrade-utility","title":"Firmware upgrade utility","text":"<p>Firmware upgrade utility is a middleware component which segments the signed encrypted firmware image and provides housekeeping functions such as Checksum verification, size verification. This layer will provide the return codes and progress status to upper layer. Based on the return code, OSD can notify the user about the progress/status of the software upgrade. </p> <p> Firmware upgrade flow diagram </p>"},{"location":"architecture/sdkvm/sdkvm_upgrade/#primary-function-of-core-updater","title":"Primary function of core updater:","text":"<ol> <li> <p>As an argument core updater takes the location of Firmware file.</p> </li> <li> <p>Check available memory in \u201c/tmp\u201d &gt; 500 MB.</p> </li> <li> <p>Segment signature and firmware components from firmware package.</p> </li> <li> <p>Verify digital signature of the provided firmware package</p> </li> <li> <p>Verify the CRC, md5 and sha1 checksum integrity </p> </li> <li> <p>Decrypt the firmware package</p> </li> <li> <p>Execute self-extracting firmware package which in turn install the debian packages </p> </li> <li> <p>Clean-up all temporary and backed files in update operation. </p> </li> </ol>"},{"location":"architecture/sdkvm/sdkvm_upgrade/#error-codes","title":"Error Codes","text":"Error Identifier Error Number Error Description UPDATE_SUCCESS 0 Firmware upgrade successful ERR_ARGUMENT 1 Error in passing arguments to utility ERR_NOMEM 2 Not enough memory in unit or error while any memory related operation. ERR_BACKUP 3 Error while taking backup of original firmware snapshot ERR_RESTORE 4 Error while restoring original firmware snapshot ERR_HEADER 5 Error while parsing image metadataERR_SEGMENT ERR_CHECKSUM 7 Error while matching checksum after update ERR_UPDATE 8 Error while placing components in firmware partitions. ERR_SAME_VERSION 9 All the components in firmware image are duplicate. ERR_ENCRYPT 10 Failed to decrypt self-extracting package ERR_SIG_VERIFY 11 Failed to verify the signature of firmware package ERR_INTERNAL 12 Internal error while updating the package"},{"location":"architecture/sdkvm/sdkvm_upgrade/#command-specification","title":"Command specification","text":"<p>This will also allow you upgrade from the command line</p> <pre><code>/usr/local/bin/deskvue_upgrade -f &lt;FILENAME&gt;\n\nExample:\n/usr/local/bin/deskvue_upgrade -f DESKVUE_1.0.0.5f20dc0.signed.dkv\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_upgrade/#lsm-metadata-in-firmware","title":"LSM metadata in firmware","text":"<pre><code>./DESKVUE_1.0.0.r1.enc.dkv --lsm\nBegin3\nSoftware-Version:V1.0.0_r1\nSoftware-Version-Dual:V1.0.0_r1\nBuild-Date:06-06-2023\nBoard Type:Deskvue\nBoard Class:Deskvue\nBoard Brand:EMD\nDisplay-Port-Support:Yes\nCompatibility:0x1\nEncryption:On\nUpgrade-Format:Single\nPackage-Number:1\nPackage-1:\nPackage-2:\nGITref:bd7e738526fb075adb4be59a01c51926a17e4ce2\nPackage-size:31239917\nEnd\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_upgrade/#progress-status-and-exit-code","title":"Progress status and exit code","text":"<p>Progress of deskvue firmware upgrade is getting tracked through \"/home/snuc/SDKVM/info/upgarde_progress.txt\" text file. </p> <p>The file has the following format <pre><code>PROGRESS:&lt;INT&gt;\nEXIT:&lt;0&gt;\n</code></pre> The integer number in the PROGRESS tag signifies the percentage of upgrade progress. The exit code signifies the result of upgrade.  A non-zero exit code any time during the upgrade signifies the upgrade process has failed. A zero exit code with 100 progress value signifies successful upgrade. </p>"},{"location":"architecture/sdkvm/sdkvm_upgrade/#disk-partioning-in-the-base-os","title":"Disk partioning in the base OS.","text":"<p>At present, Deskvue works on a single base parition for both OS and data files. In a practical situation Deskvue require atleast 3 paritions as mentioned below.</p> <ul> <li> <p>Active OS partition</p> </li> <li> <p>Failsafe OS parition</p> </li> <li> <p>Data partition</p> </li> </ul> <p>In general, upgrades related to same base OS can be done through packages but upgrading OS from base version to higher version could be tricky at customer site. In some situations upgrading OS version through packages might not work. We propose to carry a redundant failsafe OS parition which can be used to install a fresh OS. Later bootloader can point to the newly install OS as an active partition and boot the Deskvue with new OS.</p> <p></p> <p>Similarly, we also propose a separate data parition to store user configurations and system logs which should be protected from any kind of upgrade activity.</p> <p>More details on Dual Boot Ubuntu 22.04.</p>"},{"location":"architecture/sdkvm/sdkvm_upgrade/#appendix","title":"Appendix","text":""},{"location":"architecture/sdkvm/sdkvm_upgrade/#split-the-signature-and-firmware-package","title":"Split the signature and firmware package","text":"<p>Package size: <code>wc -c &lt; {Firmware File}</code></p> <p>Split signature: <code>/bin/dd if={Firmware File} of={Signature File} bs=1 skip={firm_size - 512} count=512</code></p> <p>Split Firmware: <code>/bin/dd if={Firmware File} of={Encrypted package file} bs={firm_size - 512} count=1</code></p>"},{"location":"architecture/sdkvm/sdkvm_upgrade/#verify-the-signature-on-extracted-encrypted-file","title":"Verify the signature on extracted encrypted file","text":"<p><code>/usr/bin/openssl dgst -verify {PUBLIC KEY} -keyform PEM -sha256 -signature {Signature File} -binary {Encrypted package file}</code></p>"},{"location":"architecture/sdkvm/sdkvm_upgrade/#verify-self-extracting-package-integrity","title":"Verify self extracting package integrity","text":"<pre><code>./DESKVUE_1.0.0.5f20dc0.dkv --check\nVerifying archive integrity...  100%   SHA256 checksums are OK.  100%   MD5 checksums are OK. All good.\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_upgrade/#decrypt-and-install-self-extracting-package","title":"Decrypt and install self-extracting package","text":"<p><code>./DESKVUE_1.0.0.5f20dc0.dkv --ssl-pass-src pass:{Encryption Password}</code></p>"},{"location":"architecture/sdkvm/sdkvm_upgrade/#building-the-osd-snap-package","title":"Building the OSD Snap Package","text":"<p>To create an snap package for this we have few components on the project which is the snapcraft.yaml file for configuration of snap package and one snap/gui/emeralddeskvue.desktop file for version managment and icon setting. All the configuration related to the application are present in snapcraft.yaml file.</p> <p>To generate the snap package you can run below commands:</p> <pre><code>flutter clean       // For cleaning the project\nflutter pub get   // For getting all the dependency\nsnapcraft          // This is the main command for generating the .snap packge \n</code></pre> <p>Note : please run all the commands on project root folder where the pubspec.yaml file is present. - If all the configuration finds well it will generate the .snap package with applicationname_version.snap formate - You can install this package by below command:</p> <pre><code>sudo snap install {application_package}.snap --devmode\n</code></pre>"},{"location":"architecture/sdkvm/sdkvm_upgrade/#references","title":"References","text":"<ul> <li>Installing packages without root access</li> </ul>"},{"location":"architecture/sdkvm/sdkvm_upgrade_path/","title":"SDKVM supported Upgrade path","text":"<p>V1.0.1_r58</p> <p>This is the current image given to the factory for flashing new Deskvue units. This image supports OSD upgrades using an encrypted and signed Deskvue firmware image (.signed.dkv file). Users can upgrade to V1.0.2 or a higher version using the OSD upgrade. Downgrading to V1.0.0 is not possible.</p> <ul> <li>Clonezilla Image: \"\\10.211.128.208\\tftpboot\\work\\Deskvue_Release\\V1.0.1\\RC1\\SDKVM_1.0.1_RC1_r58_img.zip\"</li> <li>Firmware: \"\\10.211.128.208\\tftpboot\\work\\Deskvue_Release\\V1.0.1\\RC1\\DESKVUE_1.0.1.r58.signed.dkv\"</li> </ul> <p>V1.0.2_r64</p> <p>This version supports OSD upgrades using an encrypted and signed Deskvue firmware image (.signed.dkv file). Users can upgrade to V1.1.0 or a higher version using the OSD upgrade. Downgrading is possible up to V1.0.1.</p> <ul> <li>Firmware: \"\\10.211.128.208\\tftpboot\\work\\Deskvue_Release\\V1.0.2\\1.0.2.r64\\DESKVUE_1.0.2.r64.signed.dkv\"</li> </ul> <p>V1.1.0_r94</p> <p>This version supports both OSD and Boxilla upgrades using an encrypted and signed Deskvue firmware image (.signed.dkv file). Users can upgrade to V1.2.0 or a higher version using the OSD or Boxilla upgrade. Downgrading is possible up to V1.0.1.</p> <p>Upon release, this version will replace the V1.0.1_r58 version in the factory for production purposes. </p> <p>Update: SDKVM-1.1.0-R94-RC4 given to SNUC as a factory image</p> <ul> <li>Clonezilla Image: \"\\10.211.128.208\\tftpboot\\work\\Deskvue_Release\\V1.1.0\\RC4\\SDKVM-1.1.0-R94-RC4-img.zip\"</li> <li>Firmware: \"\\10.211.128.208\\tftpboot\\work\\Deskvue_Release\\V1.1.0\\RC4\\DESKVUE_1.1.0.r94.signed.dkv\"</li> </ul>"},{"location":"architecture/sdkvm/software_architecture/","title":"Software architecture","text":""},{"location":"architecture/sdkvm/software_architecture/#embedded-software-architectural-impact-analysis-software-defined-kvm","title":"Embedded Software Architectural Impact Analysis - Software Defined KVM","text":"<p>Note: This was the original proposal and is largely obsolete now: see here, for new document</p>"},{"location":"architecture/sdkvm/software_architecture/#introduction","title":"Introduction","text":"<p>The Software Defined KVM product (SDKVM) is a PC based offering that allows a user connect to multiple different sources from a single same pixel multihead, multiscreen application.</p>"},{"location":"architecture/sdkvm/software_architecture/#terms-and-definitions","title":"Terms and Definitions","text":"Term Definition CAS Teradici CAS (Cloud Access Software) Decoder See Receiver Encoder See Transmitter Multiviewer A multiviewer is similar to a video wall. But while video walls require a separate TV display for each video source, multiviewers only require one display surface. Multiviewers are able to showcase full, split, quad, and custom configurations on the same pixel surface. PCoIP PC over IP (PCoIP) is a remote display protocol that Teradici developed for delivering remote desktops and applications to endpoints. PCoIP works by rendering client desktops on a network or cloud server. The desktop's pixels are then compressed, encrypted and then transmitted to the client device. The client then decrypts and renders the desktop view for the user. RFX RemoteFX Codec Extension developed by Microsoft which uses a lossy image codec to encode screen images with efficient and effective compression. This is the lossy scheme used in Blackbox products. Receiver A Blackbox appliance that receives and displays a video stream. A receiver is also referred to as a client or decoder. Source The term Source is commonly used to describe the PC connected to a transmitter appliance. Shared Mode A generic term used in Blackbox to describe schemes that allow more than one receiver view the video source from a transmitter. See Municast and Multicast. Transmitter A Blackbox appliance that captures and transmits a video from a source PC. A transmitter is also referred to as a server or encoder. Work Space A collection of views containing tiles Video Source A source of input for a Transmitter, normally the DVI or Display Port output of a PC. Video Wall A video wall is a special multi-monitor setup that consists of multiple computer monitors, video projectors, or television sets tiled together contiguously or overlapped in order to form one large screen. Typical display technologies include LCD panels, Direct View LED arrays, blended projection screens, Laser Phosphor Displays, and rear projection cubes. Tile A instance of a connection in a given position within a workspace <p>Table 1 Terms and Definitions</p>"},{"location":"architecture/sdkvm/software_architecture/#references","title":"References","text":"<ul> <li>Siemens Proposal for the Operator Desk</li> <li>DPS for the Remote App</li> <li>Draft of Proposed Design</li> <li>This proposal uses a Windows 11 Pro 64-bit on a Lenova Intel(R) Core(TM) i9-10900 CPU @ 2.80GHz (20 CPUs), ~2.8GHz and 65536MB RAM</li> <li>Teradici</li> <li>LeoStream Leostream works seamlessly with Teradici Cloud Access Software and PCoIP Remote Workstation Cards, providing high-quality graphics for applications running in the datacenter or cloud. The Leostream Connection Broker allows IT to pool, assign, and manage all PCoIP devices in their organization from a single interface.</li> <li>CAS Teradici CAS (Cloud Access Software) enables users access Teradici cloud based virtual machines.</li> <li>Windows Updates API</li> <li> </li> </ul>"},{"location":"architecture/sdkvm/software_architecture/#tca-license","title":"TCA License","text":""},{"location":"architecture/sdkvm/software_architecture/#architectural-overview","title":"Architectural Overview","text":""},{"location":"architecture/sdkvm/software_architecture/#sdkvm-osd","title":"SDKVM OSD","text":"<p>The OSD provides the main user interface for the SDKVM. The SDKVM is a multi-user system and each user can provision and manage a range of connections and workspaces.</p> <p>The OSD communicates with the workspaceserver through a REST API and MQTT messages to launch workspaces and connections. The status of these connections and workspaces are returned to the SDKVM either as MQTT messages or through polling the workspaceserver's REST API.</p> <p>The OSD is a thin layer providing the various user interface screens. It has minimal logic and will talk to other components to implement the core functionality of the system. It will have the following screens:</p> <p></p>"},{"location":"architecture/sdkvm/software_architecture/#user-screens","title":"User Screens","text":"<p>Screen shots will be added soon</p>"},{"location":"architecture/sdkvm/software_architecture/#managed-and-unmanaged-mode","title":"Managed and Unmanaged Mode","text":"<p>The SDKVM system can operate in either managed or unmanaged mode. In managed mode the configuration (management) of the system is controlled by our Boxilla management platform. Boxilla is responsible for creating users, administering permissions, provisioning connections and creating workspaces.</p> <p>When a SDKVM is managed then the options to locally create Users and Connections and to configure device settings are disabled. All modifications must be done on Boxilla and downloaded to the SDKVM system. (DPS Reference: UI0134)</p> <p>In unmanaged mode a user with administrative access can create connections and assign them to workspaces. A user with administrative access should be able to allocate connections and workspaces to regular (local) users.</p>"},{"location":"architecture/sdkvm/software_architecture/#managing-a-sdkvm","title":"Managing a SDKVM","text":"<p>A SDKVM becomes managed through the process of discovery and management by Boxilla. When Boxilla has managed a SDKVM a two files will appear in:</p> <p><pre><code>    /home/snuc/SDKVM/boxilla\n</code></pre> These files are as follows:</p> <ul> <li>The discovery file: /home/snuc/SDKVM/boxilla/discovery</li> </ul> <p><pre><code>MGR=0:8c:10:1c:c6:d4\nSTATE=Discovered\nDEBUG=OFF\n</code></pre> and the Boxilla Manager IP file: /home/snuc/SDKVM/boxilla/mgr_ip</p> <p><pre><code>MGR_IP=10.211.129.3\n</code></pre> The OSD should use the presence of these files to determine if it is operating in managed or unmanaged mode. It should read the Boxilla mac address from the discovery file and use this as the Boxilla ID. The OSD should indicate clearly if the system is operating in managed or unmanaged mode. </p> <p>Boxilla can choose to unmanage a device. In the process on unmanaging a device it will remove the users.json, discovery and mgr_ip files and also remove any existing user data structure and associated workspaces.</p> <p>If having been previously managed the OSD detects that these files and directories have been removed it should create a new empty users directory and a new users.json file.</p>"},{"location":"architecture/sdkvm/software_architecture/#administrator-permissions-on-a-managed-system","title":"Administrator Permissions on a Managed System","text":"<p>The Configuration option available to the Administrator on a managed unit are as follows: (DPS Reference: UI0135)</p> <ul> <li>To over-ride the managed device setting by restoring to Factory defaults.</li> <li>Set Keyboard locale on the system.</li> <li>Set Transmitter configuration options for Transmitters that also reside within that managed domain.</li> </ul>"},{"location":"architecture/sdkvm/software_architecture/#data-models","title":"Data Models","text":"<p>The SDKVM uses various data structures to model its internal representations. These are documented separately.</p> <ul> <li>See Data Models for structure of json representation of connections and workspaces</li> </ul>"},{"location":"architecture/sdkvm/software_architecture/#general-sdkvm-directory-structure","title":"General SDKVM Directory Structure","text":"<p>The SDKVM uses a particular data structure as part of its data model.</p> <p></p> <p>Each user (designated by a 10 digit hex code) has a connections and workspaces directory. The workspaces directory contains individual workspace files (again designated by a 10 digit hex code). The connections directory contains a single connections.json file with a list of all of the connections that user can access. In unmanaged mode a user can select from these connections when constructing workspaces by allocating connections to tiles.</p> <p>There are also a number of general purpose directories:</p>"},{"location":"architecture/sdkvm/software_architecture/#logs","title":"Logs","text":"<p>Holds all logging information including the OSD log</p>"},{"location":"architecture/sdkvm/software_architecture/#info","title":"Info","text":"<p>Contains serial numbers, model numbers, MPN, xml data uploaded from Boxilla</p>"},{"location":"architecture/sdkvm/software_architecture/#boxilla","title":"Boxilla","text":"<p>Contains the discovery and mgr_ip files created by the discovery process</p>"},{"location":"architecture/sdkvm/software_architecture/#backup","title":"Backup","text":"<p>Contains files related to backup and restore</p>"},{"location":"architecture/sdkvm/software_architecture/#upgrade","title":"Upgrade","text":"<p>Contains files related to upgrade</p>"},{"location":"architecture/sdkvm/software_architecture/#scripts","title":"Scripts","text":"<p>A collection of (mostly bash) scripts used by the OSD, discovery process and the webservice to access and configure aspects of the system and the OS.</p>"},{"location":"architecture/sdkvm/software_architecture/#user-data-model-and-directory-structure","title":"User Data Model and Directory Structure","text":"<p>The user data model is defined here; however, the directory structure within the SDKVM must support this data model.</p> <p></p> <p>User directories use the 10 digit ID (not the user name). Any references to ser data should use this 10 digit ID using the user.json file as a cross reference. This allows the user name and details to change without changing the directory structure.</p>"},{"location":"architecture/sdkvm/software_architecture/#sdkvm-clients","title":"SDKVM Clients","text":"<p>Individual client applications for connecting to PCoIP, RDP based VMs, Emerald TXs and H264 streams. These clients  have the following functionality.</p> <ul> <li>The can be launched by the workspaceserver based on supplied connection details.</li> <li>A client will display video from the target in a scaled or non-scaled format.</li> <li>A client window can be resized and moved between windows (unless it is pinned).</li> <li>Each client has support for overlays and hot spots.</li> <li>A client can display failure information in tile on its overlay screen.</li> <li>A client can display summary statistics</li> </ul>"},{"location":"architecture/sdkvm/software_architecture/#note-on-dual-head-operation","title":"Note on Dual Head Operation","text":"<p>For SDKVM we are proposing that we maintain maximum flexibility by opening each head in a separate window. Each window can then be smart-sized independently so that scaling does not distort extended windows of different resolutions (figure above). It also means that a user configuring their workspace could in theory place the second head where they wish in a PIP or quad type workspace.</p> <p>Note: There are limitations in supporting a mouse on a multihead windows and linux system when the mouse is operating in absolute mode.</p>"},{"location":"architecture/sdkvm/software_architecture/#workspace-server","title":"Workspace Server","text":"<p>The workspaceserver is a python flask application that serves as a bridge principally between the OSD and the clients. When a user launches a workspace on the OSD a json based description of that workspace is sent to the workspaceserver. The workspaceserver parses the json data and then launches the necessary client components with the required arguments.</p> <p>The workspace server communicates with the clients using MQTT. This communication is bidirectional with the clients returning status information and statistics and the server sending commands.</p> <p>The workspaceserver also provides an internal REST API for the OSD. The OSD uses this REST API to send workspace and connection launch requests to the workspaceserver. The server parses the workspace json data and creates the required command line arguments for the Video Clients. These arguments detail where the tiles will be positioned and what properties a particular connection will have.</p> <p>Once a client launches it sends connection status information to the workspace server. This connection information is aggregated by the server and presented to the OSD in summary form at the workspaceservers REST API.</p> <p>The OSD can retrieve this information over the REST API by polling, or for more efficient operation it can subscribe to MQTT events that the workspaceserver publishes when the status of a connection changes.</p> <p>When a video client is up and running it will periodically publish usage and bandwidth statistics in MQTT form. The workspaceserver subscribes to these messages and aggregates the data for Boxilla and logging purposes.</p>"},{"location":"architecture/sdkvm/software_architecture/#logical-view","title":"Logical View","text":""},{"location":"architecture/sdkvm/software_architecture/#workspace","title":"Workspace","text":"<p>A workspace is a collection of views. It is the main surface on which a user interacts with the SDKVM.</p> <p></p> <p>Workspaces are defined for each user and are stored in the users workspace directories. The workspace name should use the unique 10 digit ID code associated with that workspace. This is to allow the workspace name to change without affecting the file or its hot key binding.</p> <p></p>"},{"location":"architecture/sdkvm/software_architecture/#view","title":"View","text":"<p>A view is a defined target within a workspace. A view is associated with a monitor attached to the SDKVM. If a SDKVM has three monitors then a workspace might have a different view associated with each monitor. The view will normally have a collection of associated connections (called tiles) or the view may simply be left blank.</p> <p></p>"},{"location":"architecture/sdkvm/software_architecture/#connection","title":"Connection","text":"<p>A connection is associated with a tile. A connection description defined in the OSD holds the details of a specific target machine that a client can connect to. This target could be a physical transmitter (TX/KVM) or a virtual connection (RDP or PCoIP).</p> <p></p>"},{"location":"architecture/sdkvm/software_architecture/#template","title":"Template","text":"<p>A template is a predefined collection of view placeholders with a defined screen placement. A user can create a workspace from a template and afterwards modify it.</p> <p></p>"},{"location":"architecture/sdkvm/software_architecture/#process-view","title":"Process View","text":""},{"location":"architecture/sdkvm/software_architecture/#role-of-the-workspace-design-screen","title":"Role of the Workspace Design Screen","text":"<p>The workspace design screen must allow a user allocate connections to the tiles in the various workspace views. When a user associates a connection with a tile the software can create some of the tile definition. For example the parameters like user name, password, domain, type in the connection definition map to the equivalent parameters in the tile definition.</p> <p>Some of the other parameters in the tile definition must be inferred from where the user places the tile and the type of template they select.</p> <p></p> <p>So, for example, for tile 2 in view 1 above \"tile_location\" for Tile 2 would be: \"3841,0\", \"tile_width\": \"1920\", \"tile_height\": \"1080\". These can all be calculated from a particular template by determining where the tile appears. If it is a single tile in a single view then its location is (0,0) if it is on head 0 (the first monitor), but if the tile appears on head 1 (the second monitor) as a single tile in a single view  then its location is ((desktop width of monitor 0) + 1,0).</p> <p>The tile width and height can be determined by examining the template structure. For a Quad tile view on a 1920 X 1080 screen the tile width and height would be 960 X 540 for each tile in the view.</p> <p></p> <p>In the diagram above we can determine the x,y co-ordinates of each tile by adding the tile widths and heights to the starting co-ordinates for a given head. Co-ordinates for head 0 start at 0,0, but Linux will sum the widths of joined monitors to create a single virtual desktop. The starting position for head 1 (the second head) start at (0+ head 0 width + 1, 0) for example.</p>"},{"location":"architecture/sdkvm/software_architecture/#4k4tilespipleft","title":"4K4TilesPIPLeft","text":""},{"location":"architecture/sdkvm/software_architecture/#4k8tiles","title":"4K8Tiles","text":""},{"location":"architecture/sdkvm/software_architecture/#4k4tilespipright","title":"4K4TilesPIPRight","text":"<p>You will notice that PCoIP and RDP connections also have a width and height parameter in addition to the tile width and tile height. This width and height is the resolution we wish to connect to the remote desktop at. The workspace design screen must prompt the user for this value and then assign it to those tile properties. Each tile should have an option to set properties like:</p> <ul> <li>resizable</li> <li>decorations</li> <li>reparent</li> </ul> <p>and in the case of PCoIP and RDP - width - height</p>"},{"location":"architecture/sdkvm/software_architecture/#checking-connections","title":"Checking Connections","text":"<p>To check a connection in the connection view you should send the connection json object (shown above) to the url 127.0.0.1:5000/connection using a http request similar to that used for sending the workspaces.</p>"},{"location":"architecture/sdkvm/software_architecture/#client-applications-and-window-managers-to-be-revised","title":"Client Applications and Window Managers (To be revised)","text":"<p>The client applications use the following class names:</p> <ul> <li>bb_pcoip_client - bb_pcoip</li> <li>ccloudbbv2 - bb_sdkvm</li> <li>freerdp - bb_rdp</li> </ul> <p>One can change the class name by settings the option /wm-class:class-name for each of the clients.</p>"},{"location":"architecture/sdkvm/software_architecture/#mqtt-api","title":"MQTT API","text":"<p>MQTT is used for communication between the various elements of the SDKVM. An MQTT broker running on local host facilitates the exchange of messages.</p> <p>Format for MQTT Messages</p>"},{"location":"architecture/sdkvm/software_architecture/#messages-from-workspace-server-to-client-applications","title":"Messages from Workspace Server to Client Applications","text":"<ul> <li>Terminate Connection</li> </ul>"},{"location":"architecture/sdkvm/software_architecture/#messages-from-client-applications-to-workspace-server","title":"Messages from Client Applications to Workspace Server","text":""},{"location":"architecture/sdkvm/software_architecture/#events","title":"Events","text":"<ul> <li>Connection Termination Event</li> <li>Connection Status Event - Indicates he state of the connection after launching. The json body will provide more complete information regarding connnection target etc. The possible states are: <ul> <li>Connecting</li> <li>Connected</li> <li>Failed to Connect</li> </ul> </li> </ul>"},{"location":"architecture/sdkvm/software_architecture/#status","title":"Status","text":"<ul> <li>Periodic Statistics showing FPS, Bandwidth</li> </ul>"},{"location":"architecture/sdkvm/software_architecture/#mqtt-logging-and-configuration","title":"MQTT Logging and Configuration","text":"<p>See the MQTT Logging Guide</p>"},{"location":"architecture/sdkvm/software_architecture/#message-paths","title":"Message Paths","text":""},{"location":"architecture/sdkvm/software_architecture/#deployment-view","title":"Deployment View","text":""},{"location":"architecture/sdkvm/software_architecture/#managed-deployment","title":"Managed Deployment","text":""},{"location":"architecture/sdkvm/software_architecture/#unmanaged-deployment","title":"Unmanaged Deployment","text":""},{"location":"architecture/sdkvm/software_architecture/#source-code-control","title":"Source Code Control","text":"<p>All code is currently controlled on github to allow third party developers access without the requirement to be on our VPN.</p> <ul> <li>Common Apps for SDKVM on Github</li> <li>Software Clients on Github for SDKVM</li> </ul>"},{"location":"architecture/sdkvm/software_architecture/#proof-of-concept-proposal","title":"Proof of concept Proposal","text":"<ul> <li>John Hickey's POC Slides</li> </ul>"},{"location":"architecture/sdkvm/software_architecture/#questions","title":"Questions","text":"<ul> <li>Questions have been moved to Jira tickets</li> </ul> <p>Task List and proposed software drops for 1.0.0</p>"},{"location":"architecture/sdkvm/sourcecontrol/","title":"Deskvue Source Control","text":""},{"location":"architecture/sdkvm/sourcecontrol/#source-code-organization","title":"Source code organization","text":"<p>SDKVM WORK Repo is the main repository; it contains all build and packaging related code. The core components of SDKVM such as libsystem, libmodel, logging, restapi, OSD, clients, workspace server are maintained in its own seperate GIT repository. These repositories are linked with the SDKVM WORK repo as a git submodule. Please refer <code>git submodule foreach --recursive 'git rev-parse HEAD'</code> for submodule details.</p> <p>SDKVM WORK REPO  [Main repo contains ]</p> <p>|</p> <p>-- KVM CLIENT</p> <p>|</p> <p>-- RDP CLIENT</p> <p>|</p> <p>-- PCOIP CLIENT</p> <p>|</p> <p>-- OSD FLUTTER APP</p> <p>| </p> <p>-- WORKSPACE SERVER</p> <p>| </p> <p>-- SDKVM CONFIG/SCRIPTS</p> <p>| </p> <p>-- Discovery</p> <p>|</p> <p>-- Webservice</p> <p>|</p> <p>-- Librestapi</p> <p>|</p> <p>-- Open Source Libs</p> <p>|</p> <p>-- Customized Libs</p> <p>|</p> <p>-- BBConstants</p> <p>|</p> <p>-- Deskvue Upgrade</p> <p>|</p> <p>-- OSD Helper</p>"},{"location":"architecture/sdkvm/sourcecontrol/#source-checkout-and-update","title":"Source checkout and update","text":"<ul> <li>git clone --recurse-submodules -j8 git@github.com:blackbox-common-apps/SDKVM_WORKREPO.git</li> <li>or for a branch git clone -b 1.1.0 --recurse-submodules -j8 git@github.com:blackbox-common-apps/SDKVM_WORKREPO.git</li> </ul>"},{"location":"architecture/sdkvm/sourcecontrol/#to-update-all-modules-to-the-latest","title":"To update all modules to the latest","text":"<ul> <li>git submodule update --remote</li> </ul>"},{"location":"architecture/sdkvm/sourcecontrol/#to-set-the-version-number","title":"To set the version number","text":"<p>Edit the PROJECT_VERSION in build_component_jenkins.sh</p> <pre><code>#!/bin/bash\nPROJECT_VERSION=\"1.1.0\"\nDIR=\"$(cd \"$(dirname \"${BASH_SOURCE[0]}\")\" &amp;&amp; pwd)\"\nKVM_CLIENT=\"$DIR/kvm-client\"\n</code></pre>"},{"location":"architecture/sdkvm/sourcecontrol/#to-commit-code-inside-of-a-submodule-checked-out-under-sdkvm_workrepo","title":"To Commit code inside of a submodule checked out under SDKVM_WORKREPO","text":"<pre><code> git pull origin &lt;Branch&gt;\n git add &lt;File to commit&gt;\n git commit -m \"Message\"\n git push origin HEAD:&lt;Branch&gt;\n</code></pre>"},{"location":"architecture/sdkvm/sourcecontrol/#add-git-submodule","title":"Add git submodule","text":"<ul> <li>git add submodule"},{"location":"architecture/sdkvm/sourcecontrol/#build","title":"Build","text":"<ul> <li>To build the source code we use the build_component_jenkins.sh in SDKVM_WORKREPO to build all the components and package the firmware.</li> <li>deskvue-docker-build repository</li> </ul>"},{"location":"architecture/sdkvm/sourcecontrol/#packaging","title":"Packaging","text":"<p>The firmware will be packaged in the following packages</p> <ul> <li> <p>OPENBOX_BB_VERSION_amd64.deb  [Open box custom package (patched version)]</p> </li> <li> <p>DESKVUE_VERSION_amd64.deb  [Contains all the proprietary software for Deskvue]</p> </li> <li> <p>DESKVUE_VERSION.dkv [Un-encrypted Self extracting package for Deskvue software upgrade through OSD/Boxilla]</p> </li> <li> <p>DESKVUE_VERSION.signed.dkv [Encrypted and signed self extracting package for Deskvue software upgrade through OSD/Boxilla]</p> </li> </ul>"},{"location":"architecture/sdkvm/sourcecontrol/#commit-of-code","title":"Commit of Code","text":"<p>To commit inside of a submodule</p> <pre><code> git pull origin main\n git add &lt;File to commit&gt;\n git commit -m \"Message\"\n git push origin HEAD:main\n</code></pre>"},{"location":"architecture/sdkvm/sourcecontrol/#creating-a-pull-request","title":"Creating A Pull Request","text":"<p><pre><code>git checkout -b &lt;new_branch&gt;\n</code></pre> One may need to push the branch as well</p> <pre><code>git push --set-upstream origin BUG-5633\n</code></pre>"},{"location":"architecture/sdkvm/sourcecontrol/#cleaning-up-after-a-pull-request-on-main","title":"Cleaning up after a Pull Request on main","text":"<pre><code>git checkout main\ngit pull --rebase\n# and then\ngit fetch origin --prune\n# to remove your feature branch\n</code></pre>"},{"location":"architecture/sdkvm/sourcecontrol/#cleaning-up-after-a-pull-request-on-a-branch","title":"Cleaning up after a Pull Request on a branch","text":"<pre><code>git checkout &lt;branch&gt;\ngit pull --rebase\n# and then\ngit fetch origin --prune\n# to remove your feature branch\n</code></pre>"},{"location":"architecture/sdkvm/sourcecontrol/#updating-references-in-sdkvm_workrepo","title":"Updating References in SDKVM_WORKREPO","text":"<pre><code>git config --file=.gitmodules submodule.&lt;Module Name&gt;.branch &lt;Branch&gt;\ngit submodule sync\ngit submodule update --init --recursive --remote\n</code></pre> <p>For example:</p> <pre><code>git config --file=.gitmodules submodule.workspaceserver.branch 1.2.0\ngit submodule sync\ngit submodule update --init --recursive --remote\n</code></pre>"},{"location":"architecture/sdkvm/sourcecontrol/#identifying-the-branch","title":"Identifying the Branch","text":"<pre><code>git branch --show-current\n</code></pre>"},{"location":"architecture/sdkvm/sourcecontrol/#switching-to-a-branch","title":"Switching to a Branch","text":"<pre><code>git checkout  &lt;new_branch&gt;\n</code></pre>"},{"location":"architecture/sdkvm/sourcecontrol/#tagging-a-release","title":"Tagging a release","text":"<p><pre><code>git tag &lt;tagname&gt; -a\ngit push origin --tags \n</code></pre> - Add release notes in the tag - Attach the release assets (fimrware) to new tag after downloading it from \"latest\" tag</p>"},{"location":"architecture/sdkvm/sourcecontrol/#using-the-same-key-pair-on-different-machines","title":"Using the same key pair on different machines","text":"<p>Generate a key pair, for example:</p> <p><pre><code>ssh-keygen -t ed25519 -C \"your_name@blackbox.com\"\n</code></pre> This will create two keys in ~/.ssh</p> <p><pre><code> 4 -r--------  1 developer developer   419 Jul  3 09:11 id_ed25519\n 4 -rw-rw-r--  1 developer developer   110 Jul  3 09:12 id_ed25519.pub\n</code></pre> These keys can be copied to other machines from which you access the git repository. </p> <p>Add them to the ssh agent</p> <p><pre><code>eval \"$(ssh-agent -s)\"\nAgent pid 827391\nssh-add ~/.ssh/id_ed25519\n</code></pre> If you are copying these then you may need to change permissions after copying. Permissions 0664 for '/home/developer/.ssh/id_ed25519' are too open. It is required that your private key files are NOT accessible by others. This private key will be ignored.</p> <p>To fix this:</p> <pre><code>chmod 400 ~/.ssh/id_ed25519\n</code></pre> <p>Then try adding again:</p> <pre><code>ssh-add ~/.ssh/id_ed25519\n</code></pre>"},{"location":"architecture/sdkvm/sourcecontrol/#rebasing-a-branch-with-master","title":"Rebasing a branch with master","text":"<p>This needs to be done on the Github UI with a pull request.</p>"},{"location":"architecture/sdkvm/sourcecontrol/#downloading-debian-packages-from-github","title":"Downloading Debian Packages from Github","text":"<p>Builds can be found in https://github.com/blackbox-common-apps/SDKVM_WORKREPO/releases/tag/latest</p> <p>Branch Builds can be found in https://github.com/blackbox-common-apps/SDKVM_WORKREPO/releases/tag/latest-1.1.0</p> <p>Images are stored on the NAS in: </p> <pre><code>\\\\10.211.128.208\\tftpboot\\work\\Deskvue_Release\\\n\nFor example:\n\n\\\\10.211.128.208\\tftpboot\\work\\Deskvue_Release\\V1.0.2\\DESKVUE_1.0.2.r62.signed.dkz\n</code></pre>"},{"location":"architecture/sdkvm/teradici_connection_manager/","title":"Installing And Configuring the Teradici Connection Manager","text":""},{"location":"architecture/sdkvm/teradici_connection_manager/#links-and-references","title":"Links and References","text":"<ul> <li>Leostream\u2019s overview on Leostream interop with Teradici PCoIP client</li> <li>Teradici\u2019s overview on interop with third party brokers (Leostream Broker in our case)</li> <li>Installing the Connection Manager</li> <li>Connection Manager Gateway Security</li> <li>Installing the Docker prerequisite</li> </ul>"},{"location":"architecture/sdkvm/teradici_connection_manager/#teradici-connection-manager-installation-guide","title":"Teradici Connection Manager Installation guide","text":"<ul> <li>Note: The PCoIP Security Gateway is not required for LAN access.</li> <li>Note: Rocky Linux was used as the underlying server OS.</li> <li>Required Repos (only supported for RedHat 8 and Rocky Linux 8):</li> </ul> <p>RHEL 8</p> <pre><code>curl -1sLf https://dl.teradici.com/yhZcahyhknSCEu6R/pcoip-cmsg/cfg/setup/bash.rpm.sh | sudo -E distro=el codename=8 bash\n</code></pre> <p>Rocky Linux 8</p> <pre><code>curl -1sLf https://dl.teradici.com/yhZcahyhknSCEu6R/pcoip-cmsg/cfg/setup/bash.rpm.sh | sudo -E distro=el codename=8 bash\n</code></pre> <p>Command used to install the Connection Manager with configuration for the local instance of the Leostream Broker (security gateway disabled and default test certs set):</p> <pre><code>sudo pcoip-cmsg-setup install --accept-policies=true --broker-url=https://10.211.130.179 \u2011\u2011enable-security-gateway=false --self-signed=true\n</code></pre> <ul> <li>Configuration interface post install (i.e. updating the configuration)</li> </ul>"},{"location":"architecture/sdkvm/teradici_connection_manager/#testing-the-connection","title":"Testing the connection","text":"<p>Install the Teradici PCoIP standard agents on all the VMs in the \u201cWindows\u201d defined pool on the Leostream Broker. The Teradici PCoIP software clients will be able to connect to any desktops on the emerald.lan domain (as all the desktops in that domain are constituted by the \u201cWindows\u201d pool) by providing valid user login credentials for that domain.</p> <p>Launching a connection from the Teradici PCoIP software client to the Leostream Broker: - Start the Teradici PCoIP software client. - Create a new connection. - Name the connection at your discretion. - For the IP use the Teradici Connection Manager IP. - Launch the connection. - The client will now list the available domains from the Leostream Broker that are available for logon. - There will be two listed from the Leostream Broker configuration in the lab:   - emerald.com    - emerald.lan - Select the emerald.lan domain as that is where the Windows desktops with the PCoIP agents are located. - Enter valid user credentials for the domain and the client will successfully launch a PCoIP connection to an available (not assigned) desktop in the pool.</p>"},{"location":"architecture/sdkvm/teradici_connection_manager/#rocky-linux-installation","title":"Rocky Linux Installation","text":"<ul> <li>The minimal version of Rocky did not work (kernel crash) on the ESiX. </li> <li>The primary network interface is disabled by default on bootup and needs to be enabled by default (done via the GUI) otherwise the server will be offline with every reboot.</li> <li>SSH was installed by default.</li> <li>Use systemctl to disable the firewall by default.</li> </ul>"},{"location":"architecture/sdkvm/teradici_connection_manager/#getting-rocky-linux-up-to-date","title":"Getting Rocky Linux Up-to-date:","text":"<pre><code>sudo dnf check-update\nsudo dnf update\n</code></pre>"},{"location":"architecture/sdkvm/teradici_connection_manager/#miscellaneous-notes","title":"Miscellaneous Notes","text":"<ul> <li>Teradici PCoIP software clients in the test lab:</li> <li>The Windows machines running the Teradici PCoIP software clients are Windows 7 which Teradici stopped supporting. Therefore the clients are the last supported version of the software which works with Windows 7 instead of the very latest which requires a minimum of Windows 10 or Windows 11.</li> <li>Quick note on trying to access network shares to download setup files (e.g. Teradici PCoIP agent binaries) on Windows 10: The latest version of Windows 10 by default (or updated with the latest updates) prevents access to the Samba share in the Limerick office as it classifies them as a security risk due to \u201cUnsecured Access\u201d. A registry change is required to work around this. </li> </ul> <pre><code>Default registry value:\n[HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Services\\LanmanWorkstation\\Parameters] \"AllowInsecureGuestAuth\"=dword:0\nConfigured registry value:\n[HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Services\\LanmanWorkstation\\Parameters] \"AllowInsecureGuestAuth\"=dword:1\n</code></pre>"},{"location":"architecture/sdkvm/window_manager_research/","title":"Window Manager Research","text":""},{"location":"architecture/sdkvm/window_manager_research/#reference","title":"Reference","text":"<ul> <li>Window Managers</li> <li>Display Manager</li> <li>Configs</li> <li>Switch to old network interfaces file</li> <li>Switching from networkd to NetworkManager</li> <li>Switching from NetworkManager to Systemd</li> </ul>"},{"location":"architecture/sdkvm/window_manager_research/#gnome","title":"Gnome","text":"<ul> <li>Enable autologin - sudo nano /etc/gdm/custom.conf, change AutomaticLoginEnable to true</li> <li>Network Configuration</li> </ul>"},{"location":"architecture/sdkvm/window_manager_research/#restore-gnome-as-default-window-manager","title":"Restore Gnome as default window manager","text":"<ul> <li>sudo dpkg-reconfigure gdm3 </li> </ul>"},{"location":"architecture/sdkvm/window_manager_research/#qtile","title":"QTile","text":"<ul> <li>Qtile Homepage</li> <li>Github Examples</li> <li>Documentation</li> <li>YouTube Tutorial</li> <li>Configuration</li> <li>Youtube Configuration Tutorial</li> <li>Set position for a window</li> <li>Sample config</li> <li>Sample config startup</li> </ul>"},{"location":"architecture/sdkvm/window_manager_research/#installing-qtile","title":"Installing QTile","text":"<p><pre><code>pip3 install xcffib\npip3 install --no-cache-dir cairocffi\nsudo apt install python-gobject \nsudo apt install python-dbus\npip3 install qtile\n</code></pre> or more reliably</p> <pre><code>pip install --no-cache-dir cairocffi\ngit clone https://github.com/qtile/qtile.git\ncd qtile\npip install \n</code></pre>"},{"location":"architecture/sdkvm/window_manager_research/#configuring-qtile","title":"Configuring QTile","text":""},{"location":"architecture/sdkvm/window_manager_research/#wallpaper","title":"Wallpaper","text":"<ul> <li>feh</li> </ul>"},{"location":"architecture/sdkvm/window_manager_research/#qtile-and-screen-mappings","title":"QTile and Screen Mappings","text":"<ul> <li>Mapping workspaces to screens</li> </ul>"},{"location":"architecture/sdkvm/window_manager_research/#sample-configpy","title":"Sample config.py","text":"<p>This should reside in ~/.config/qtile</p> <p><pre><code>from libqtile.utils import guess_terminal\nfrom libqtile import hook\nfrom typing import List  # noqa: F401\nfrom libqtile import qtile\nfrom libqtile import bar, layout, widget\nfrom libqtile.config import Click, Drag, Group, Key, Match, Screen\nfrom libqtile.layout.floating import Floating\nfrom libqtile.lazy import lazy\nfrom libqtile import hook\nfrom datetime import datetime as dt\nimport os\nimport subprocess\nimport time\nfrom libqtile.log_utils import logger\n\n\n\nmod = \"mod4\"\nterminal = guess_terminal()\n\nkeys = [\n    # A list of available commands that can be bound to keys can be found\n    # at https://docs.qtile.org/en/latest/manual/config/lazy.html\n    # Switch between windows\n    Key([mod], \"h\", lazy.layout.left(), desc=\"Move focus to left\"),\n    Key([mod], \"l\", lazy.layout.right(), desc=\"Move focus to right\"),\n    Key([mod], \"j\", lazy.layout.down(), desc=\"Move focus down\"),\n    Key([mod], \"k\", lazy.layout.up(), desc=\"Move focus up\"),\n    Key([mod], \"space\", lazy.layout.next(), desc=\"Move window focus to other window\"),\n    # Move windows between left/right columns or move up/down in current stack.\n    # Moving out of range in Columns layout will create new column.\n    Key([mod, \"shift\"], \"h\", lazy.layout.shuffle_left(), desc=\"Move window to the left\"),\n    Key([mod, \"shift\"], \"l\", lazy.layout.shuffle_right(), desc=\"Move window to the right\"),\n    Key([mod, \"shift\"], \"j\", lazy.layout.shuffle_down(), desc=\"Move window down\"),\n    Key([mod, \"shift\"], \"k\", lazy.layout.shuffle_up(), desc=\"Move window up\"),\n    # Grow windows. If current window is on the edge of screen and direction\n    # will be to screen edge - window would shrink.\n    Key([mod, \"control\"], \"h\", lazy.layout.grow_left(), desc=\"Grow window to the left\"),\n    Key([mod, \"control\"], \"l\", lazy.layout.grow_right(), desc=\"Grow window to the right\"),\n    Key([mod, \"control\"], \"j\", lazy.layout.grow_down(), desc=\"Grow window down\"),\n    Key([mod, \"control\"], \"k\", lazy.layout.grow_up(), desc=\"Grow window up\"),\n    Key([mod], \"n\", lazy.layout.normalize(), desc=\"Reset all window sizes\"),\n    # Toggle between split and unsplit sides of stack.\n    # Split = all windows displayed\n    # Unsplit = 1 window displayed, like Max layout, but still with\n    # multiple stack panes\n    Key(\n        [mod, \"shift\"],\n        \"Return\",\n        lazy.layout.toggle_split(),\n        desc=\"Toggle between split and unsplit sides of stack\",\n    ),\n    Key([mod], \"Return\", lazy.spawn(terminal), desc=\"Launch terminal\"),\n    # Toggle between different layouts as defined below\n    Key([mod], \"Tab\", lazy.next_layout(), desc=\"Toggle between layouts\"),\n    Key([mod], \"w\", lazy.window.kill(), desc=\"Kill focused window\"),\n    Key([mod, \"control\"], \"r\", lazy.reload_config(), desc=\"Reload the config\"),\n    Key([mod, \"control\"], \"q\", lazy.shutdown(), desc=\"Shutdown Qtile\"),\n    Key([mod], \"r\", lazy.spawncmd(), desc=\"Spawn a command using a prompt widget\"),\n    Key([mod], \"m\", lazy.window.toggle_maximize(), desc=\"Toggle maximize\"), \n    Key([mod], \"n\", lazy.window.toggle_minimize(), desc=\"Toggle minimize\"),\n]\n\n# groups = [Group(i) for i in \"123\"] # original\n\n\ngroups = []\n\ngroup_names = [\"1\",]\ngroup_labels = [\"OSD\",]\ngroup_layouts = [\"floating\", ]\n\n\nfor i in range(len(group_names)):\n    groups.append(\n        Group(\n            name=group_names[i],\n            layout=group_layouts[i].lower(),\n            label=group_labels[i],\n        ))\n\nfor i in groups:\n    keys.extend([\n            Key([mod], i.name, lazy.group[i.name].toscreen()),\n            Key([mod], \"Tab\", lazy.screen.next_group()),\n            Key([mod, \"shift\" ], \"Tab\", lazy.screen.prev_group()),\n            Key([\"mod1\"], \"Tab\", lazy.screen.next_group()),\n            Key([\"mod1\", \"shift\"], \"Tab\", lazy.screen.prev_group()),\n\n            Key([mod, \"shift\"], i.name, lazy.window.togroup(i.name) , lazy.group[i.name].toscreen()),\n        ])\n\n\nlayouts = [\n    layout.Columns(border_focus_stack=[\"#d75f5f\", \"#8f3d3d\"], border_width=4),\n    layout.Max(),\n    # Try more layouts by unleashing below layouts.\n    layout.Stack(num_stacks=2),\n    # layout.Bsp(),\n    # layout.Matrix(),\n    layout.MonadTall(),\n    # layout.MonadWide(),\n    # layout.RatioTile(),\n    layout.Tile(),\n    # layout.TreeTab(),\n    # layout.VerticalTile(),\n    # layout.Zoomy(),\n]\n\nwidget_defaults = dict(\n    font=\"sans\",\n    fontsize=16,\n    padding=3,\n)\nextension_defaults = widget_defaults.copy()\n\nscreens = [\n    Screen(\n        bottom=bar.Bar(\n            [\n                widget.CurrentLayout(),\n                widget.GroupBox(),\n                widget.Prompt(),\n                widget.WindowName(),\n        widget.CPUGraph(),\n        widget.Net(interface=\"enp45s0\"),\n                widget.Systray(),\n                widget.Clock(format=\"%Y-%m-%d %a %I:%M %p\"),\n                widget.QuickExit(),\n            ],\n            24,\n            # border_width=[2, 0, 2, 0],  # Draw top and bottom borders\n            # border_color=[\"ff00ff\", \"000000\", \"ff00ff\", \"000000\"]  # Borders are magenta\n        ),\n    ),\n]\n\n# Drag floating layouts.\nmouse = [\n    Drag([mod], \"Button1\", lazy.window.set_position_floating(), start=lazy.window.get_position()),\n    Drag([mod], \"Button3\", lazy.window.set_size_floating(), start=lazy.window.get_size()),\n    Click([mod], \"Button2\", lazy.window.bring_to_front()),\n]\n\ndgroups_key_binder = None\ndgroups_app_rules = []  # type: list\nfollow_mouse_focus = True\nbring_front_click = False\ncursor_warp = False\nfloating_layout = layout.Floating(\n    float_rules=[\n        # Run the utility of `xprop` to see the wm class and name of an X client.\n        *layout.Floating.default_float_rules,\n        Match(wm_class=\"bb_pcoip\"),  # \n        Match(wm_class=\"bb_rdp\"),  # \n        Match(wm_class=\"bb_pcoip\"),  # \n        Match(title=\"Blackbox\"),  # GPG key password entry\n        Match(wm_class=\"Firefox\"),  # GPG key password entry\n        Match(wm_class=\"Navigator\")\n\n    ]\n)\nauto_fullscreen = True\nfocus_on_window_activation = \"smart\"reconfigure_screens = True\n\n\n@hook.subscribe.startup_once\ndef start_once():\n    home = os.path.expanduser('~')\n    subprocess.call([home + '/.config/qtile/scripts/autostart.sh'])\n\n\n# If things like steam games want to auto-minimize themselves when losing\n# focus, should we respect this or not?\nauto_minimize = True\n\n# When using the Wayland backend, this can be used to configure input devices.\nwl_input_rules = None\n\n# XXX: Gasp! We're lying here. In fact, nobody really uses or cares about this\n# string besides java UI toolkits; you can see several discussions on the\n# mailing lists, GitHub issues, and other WM documentation that suggest setting\n# this string if your java app doesn't work correctly. We may as well just lie\n# and say that we're a working one by default.\n#\n# We choose LG3D to maximize irony: it is a 3D non-reparenting WM written in\n# java that happens to be on java's whitelist.\nwmname = \"LG3D\"\n</code></pre> In /usr/share/xsessions create a file qtile.desktop</p> <pre><code>[Desktop Entry]\nName=Qtile\nComment=Qtile Session\nExec=qtile start\nType=Application\nKeywords=wm;tiling\n</code></pre> <p>Create a .xinitrc file in your home directory. This will run gnome terminal followed by qtile</p> <pre><code> ~/.xinitrc \n#!/usr/bin/env bash\ngnome-terminal &amp;\nexec qtile start\n</code></pre> <p>In /usr/share/xsessions, create xsession.desktop </p> <pre><code>[Desktop Entry]\nName=XSession\nComment=This session uses the custom xsession file\nExec=/etc/X11/Xsession\nType=Application\nDesktopNames=GNOME-Flashback;GNOME;\nX-Ubuntu-Gettext-Domain=gnome-flashback\n</code></pre> <p>This will allow us invoke the .xinitrc file we created in ~/.xinitrc when the system boots</p>"},{"location":"architecture/sdkvm/window_manager_research/#determining-the-current-window-manager","title":"Determining the Current Window Manager","text":"<pre><code>wmctrl -m\nName: GNOME Shell\nClass: N/A\nPID: N/A\nWindow manager's \"showing the desktop\" mode: OFF\n</code></pre>"},{"location":"architecture/sdkvm/window_manager_research/#qtile-logs","title":"QTile Logs","text":"<ul> <li>These can be found in ~/.local/share/qtile/qtile.log</li> </ul>"},{"location":"architecture/sdkvm/window_manager_research/#awesome","title":"Awesome","text":"<p>-Running on bootup</p>"},{"location":"architecture/sdkvm/window_manager_research/#dwm","title":"DWM","text":"<ul> <li>Building and installing</li> <li>Cheat Sheet</li> <li>Home Page</li> </ul>"},{"location":"architecture/sdkvm/window_manager_research/#openbox","title":"OpenBox","text":"<p>OpenBox Configuration</p> <ul> <li>Cheat Sheet</li> </ul>"},{"location":"architecture/sdkvm/window_manager_research/#to-patch","title":"To patch","text":"<p>patch -p1 &lt;"},{"location":"architecture/sdkvm/window_manager_research/#arch-linux","title":"Arch Linux","text":"<ul> <li>Intel Graphics</li> <li>Xorg</li> <li>MultiHead</li> <li>Detecting Displays </li> <li>X on Resize</li> <li>Installing NoMachine</li> <li>ARandR - GUI for XrandR</li> </ul>"},{"location":"architecture/sdkvm/window_manager_research/#general","title":"General","text":"<ul> <li>disabling Network Manager</li> <li>Systemd</li> <li>Systemd User Services</li> <li>Very Simple Window Manager</li> <li>Simple Stackable Window Manager </li> </ul>"},{"location":"architecture/sdkvm/window_manager_research/#kiosk-mode","title":"Kiosk Mode","text":"<ul> <li>Kiosk Mode on Ubuntu</li> </ul>"},{"location":"architecture/sdkvm/window_manager_research/#compositors","title":"Compositors","text":"<ul> <li>Checking for a compositor: -inxi -Gxx | grep compositor or for compton :  pgrep compton</li> </ul>"},{"location":"architecture/sdkvm/window_manager_research/#cursor-size","title":"Cursor Size","text":"<p>The cursor theme and size can be changed using the .Xresources file in your home directory(create it if it doesn't exist).</p>"},{"location":"architecture/sdkvm/window_manager_research/#example","title":"Example","text":"<pre><code>Xcursor.theme: Adwaita\nXcursor.size: 36\n</code></pre> <p>You can find the exact names of your installed cursors by running find /usr/share/icons ~/.local/share/icons ~/.icons -type d -name \"cursors\".</p>"},{"location":"architecture/sdkvm/workspaceserver/","title":"Workspace Server","text":""},{"location":"architecture/sdkvm/workspaceserver/#overview","title":"Overview","text":""},{"location":"architecture/sdkvm/workspaceserver/#connection-and-workspace-apis","title":"Connection and Workspace APIs","text":""},{"location":"architecture/sdkvm/workspaceserver/#connection-check","title":"Connection Check","text":"<p>The OSD Connection screen allows an Administrative user create connections in an unmanaged system. A user can check a connection by selecting the 'check' button.</p> <p>It is proposed that this end-point will also be used for Control Bridge.</p> <p>The check connection function will launch a connection by sending a POST with a connection object to:</p> <pre><code>127.0.0.1:5000/connection\n</code></pre> <p>see data model for the format of the json formatted connection object.</p>"},{"location":"architecture/sdkvm/workspaceserver/#connection-check-status","title":"Connection Check Status","text":"<p>The status for a connection can be retrieved via a GET Request from the end point:</p> <p><pre><code>127.0.0.1:5000/connection\n</code></pre> It will return the status for the connection as active or inactive. </p> <pre><code>{\n    \"query\": \"inactive\"\n}\n</code></pre>"},{"location":"architecture/sdkvm/workspaceserver/#workspace-launch","title":"Workspace Launch","text":"<p>A workspace can be launched by posting a workspace json object to </p> <pre><code>127.0.0.1:5000/workspace\n</code></pre> <p>see data model for the format of the workspace object.</p>"},{"location":"architecture/sdkvm/workspaceserver/#workspace-termination","title":"Workspace Termination","text":"<p>A user can terminate a workspace by selecting the 'terminate' button.</p> <p>The workspace terminate function will terminate the active connection by sending a DELETE to: Only one workspace is active at anyone time.</p> <pre><code>127.0.0.1:5000/workspace\n</code></pre>"},{"location":"architecture/sdkvm/workspaceserver/#workspace-status","title":"Workspace Status","text":"<p>The status for a workspace can be retrieved via a GET Request from the end point:</p> <p><pre><code>127.0.0.1:5000/workspace\n</code></pre> It will return the status for the workspace as active or inactive. The workspace is active if any one connection within the workspace is still active.</p> <pre><code>{\n    \"query\": \"inactive\"\n}\n</code></pre>"},{"location":"architecture/sdkvm/workspaceserver/#generate-sdkvm-user-configuration-from-boxilla-data","title":"Generate SDKVM User Configuration from Boxilla Data","text":"<p>To generate the User Configuration and Workspace and Connection directory structures and files run the following command:</p> <p><pre><code> ~/workspaceserver/process_json_data_file.py -d &lt;path to data file&gt;\n</code></pre> for example:</p> <p><pre><code> ~/workspaceserver/process_json_data_file.py -d ~/SDKVM/boxilla/single_user.json\n\n will produce the following in ~/SDKVM/users\n\u251c\u2500\u2500 1\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 connections\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 1644.json\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 workspaces\n\u2502\u00a0\u00a0     \u2514\u2500\u2500 1.json\n\u251c\u2500\u2500 test_users.json\n\nWhere 1 is the user ID\nand test_users.json is the users,json file (temporarily renamed to test_users.json while we develop the feature. Once we are happy with the functionality we will set this name to users.json)\n</code></pre> Note. The file should be invoked from ~/workspaceserver</p> <p>Sample Data for file used in the above data example single_user.json</p> <pre><code>{\n   \"code\":200,\n   \"status\":\"success\",\n   \"count\":1,\n   \"checksum\":\"d98d64cf1fa83edaedf38ef12e8b8138162e6ceb\",\n   \"data\":{\n      \"kvm_users\":[\n         {\n            \"user\":{\n               \"user_id\":1,\n               \"name\":\"admin\",\n               \"active_directory\":false,\n               \"type\":\"admin\",\n               \"workspace_inactivity_timer\":\"30\",\n               \"osd_inactivity_timer\":\"30\",\n               \"screen_saver\":\"30\",\n               \"keyboard\":\"gb\",\n               \"mouse_cursor_size\":\"medium\",\n               \"password\":\"pswd\",\n               \"remember_login_details\":\"True\",\n               \"auto_launch_workspace\":1,\n               \"hotkey_mappings\":{\n                  \"F1\":\"\",\n                  \"F2\":\"\",\n                  \"F3\":\"\",\n                  \"F4\":\"\",\n                  \"F5\":\"\",\n                  \"F6\":\"\",\n                  \"F7\":\"\",\n                  \"F8\":\"\",\n                  \"F9\":\"\",\n                  \"F10\":\"\",\n                  \"F11\":\"\",\n                  \"F12\":\"\",\n                  \"r\":\"\",\n                  \"c\":\"\",\n                  \"o\":\"\",\n                  \"x\":\"\",\n                  \"Up Arrow\":\"\",\n                  \"Down Arrow\":\"\"\n               }\n            },\n            \"connections\":[\n               {\n                  \"connection_id\":1644,\n                  \"connection_name\":\"tx30_to_rx36\",\n                  \"type\":\"bonded\",\n                  \"mode\":\"Shared\",\n                  \"target\":null,\n                  \"port\":null,\n                  \"user_name\":\"\",\n                  \"password\":\"\",\n                  \"domain\":null,\n                  \"audio\":null,\n                  \"usbr\":null,\n                  \"view_only\":\"No\",\n                  \"persistent\":null,\n                  \"boxilla_id\":\"\"\n               }\n            ],\n            \"workspaces\":[\n               {\n                  \"workspace_id\":1,\n                  \"workspace_name\":\"ws_1\",\n                  \"workspace_description\":\"short description\",\n                  \"views\":[\n                     {\n                        \"view_id\":1,\n                        \"view_name\":\"view_name\",\n                        \"view_template_reference\":1,\n                        \"head\":\"0\",\n                        \"tiles\":[\n                           {\n                              \"tile_id\":1,\n                              \"tile_name\":\"tile_name\",\n                              \"tile_location\":\"co-ordinates\",\n                              \"tile_width\":\"\",\n                              \"tile_height\":\"\",\n                              \"connection_id\":\"\"\n                           }\n                        ]\n                     }\n                  ]\n               }\n            ]\n         }\n      ]\n   }\n}\n</code></pre> <p>A more complete sample file is available in shared_area/johnos/SDKVM/100_users.json</p>"},{"location":"architecture/sdkvm/workspaceserver/#logging","title":"Logging","text":"<p>The program will create a log entry as follows:</p> <pre><code>Mar 30 13:51:02 SDKVMREFERENCE process_json_data_file.py: ProcessData: Creating connection resources for user id:1\nMar 30 13:51:02 SDKVMREFERENCE process_json_data_file.py: ProcessData: Creating worksapce resources for user id:1\nMar 30 13:51:02 SDKVMREFERENCE process_json_data_file.py: ProcessData: Creating users.json file:test_users.json\n</code></pre>"},{"location":"architecture/sdkvm/workspaceserver/#obfuscation","title":"Obfuscation","text":"<ul> <li>Discussion on obfuscation</li> </ul>"},{"location":"architecture/sdkvm/workspaceserver/#current-task-list","title":"Current Task List","text":"<ul> <li>Implement MQTT messaging from clients to workspace server</li> <li>Present workspace and connection status on REST API</li> </ul>"},{"location":"architecture/sdkvm/workspaceserver/#running-the-worskpace-server-as-a-service","title":"Running the Worskpace Server as a Service","text":"<ul> <li>Flask as a Systemd Service</li> <li>without venv</li> <li>As a user service</li> </ul>"},{"location":"architecture/sdkvm/workspaceserver/#sample-services-file","title":"Sample Services File","text":"<pre><code>[Unit]\nDescription=Workspace Server for Emerald Deskvue\nWants=mosquitto.service\nAfter=network.target mosquitto.service\nPartOf=graphical-session.target\n\n[Service]\n\nWorkingDirectory=/home/snuc/workspaceserver\nExecStart=/home/snuc/workspaceserver/app.py \nRestart=on-failure\nPermissionsStartOnly=true\nTimeoutSec=600\nRuntimeDirectoryMode=755\n\n\n[Install]\n\nWantedBy=graphical-session.target\n</code></pre>"},{"location":"architecture/sdkvm/workspaceserver/#installation","title":"Installation","text":"<ul> <li>mkdir -p /home/snuc/.config/systemd/user/</li> <li>cp workspaceserver.service /home/snuc/.config/systemd/user/</li> <li>systemctl --user enable workspaceserver</li> </ul>"},{"location":"architecture/sdkvm/workspaceserver/#depenencies","title":"Depenencies","text":"<p>To generate a requirements.txt file run the following commands:</p> <ul> <li>pip3 install pipreqs</li> <li>python3 -m  pipreqs.pipreqs .</li> </ul>"},{"location":"architecture/sdkvm/workspaceserver/#starting-stopping","title":"Starting Stopping","text":"<ul> <li>systemctl --user start workspaceserver</li> <li>systemctl --user stop workspaceserver</li> <li>systemctl --user status workspaceserver</li> </ul>"},{"location":"architecture/sdkvm/workspaceserver/#after-changing","title":"After Changing","text":"<ul> <li>systemctl --user daemon-reload</li> </ul>"},{"location":"architecture/sdkvm/workspaceserver/#inspecting-logs","title":"Inspecting Logs","text":"<ul> <li>journalctl --user -u workspaceserver</li> </ul>"},{"location":"architecture/sdkvm/workspaceserver/#service-file-location","title":"Service File Location","text":"<p>/etc/systemd/system/workspaceserver.service</p>"},{"location":"architecture/sdkvm/workspaceserver/#starting-and-stopping","title":"Starting and Stopping","text":"<ul> <li>sudo systemctl daemon-reload - will reload the service</li> <li>sudo systemctl start workspaceserver</li> <li>sudo systemctl stop workspaceserver</li> <li>sudo systemctl restart workspaceserver</li> <li>sudo systemctl status workspaceserver</li> </ul>"},{"location":"architecture/sdkvm/workspaceserver/#python","title":"Python","text":"<ul> <li>Threading Options</li> <li>Threaded Queue</li> <li>Multi-Processing</li> <li>Multiprocessing-managers</li> <li>Multiprocessing-queue example</li> </ul>"},{"location":"architecture/sdkvm/technical_notes/2x2_config_ibc_demo/","title":"2x2 Display Configuration for IBC","text":"<p>As part of the IBC demo a 2x2 monitor configuration is required for Video Walls demos. The following tech note describes how to configure this setup on the IBC version of DeskVue 1.2.0. </p>"},{"location":"architecture/sdkvm/technical_notes/2x2_config_ibc_demo/#prerequisites","title":"Prerequisites","text":"<p>To set the monitors to a 2x2 configuration the following prerequisites must first be met</p> <ul> <li>The DeskVue must have 4 monitors connected.</li> <li>All monitors must have the same resolution configured.</li> </ul> <p>If these prerequisites have not been met than the hotkey shall have no effect.</p>"},{"location":"architecture/sdkvm/technical_notes/2x2_config_ibc_demo/#envoking-the-functionality","title":"Envoking the functionality","text":"<p>The configure the SDKVM into 2x2 Video Wall mode the following hotkey can be used</p> <p>Info</p> <p>Ctrl-Win-Alt-q</p>"},{"location":"architecture/sdkvm/technical_notes/2x2_config_ibc_demo/#2x2-configuration-details","title":"2x2 Configuration Details","text":"<p>The setup of the monitors for 2x2 mode is a hardcoded configuration, this means that each monitor interface and head number shall always be the same. The diagram below details the postion of each monitor in the configuration and its designated head number.</p> <p> </p> 2x2 IBC Monitor Config"},{"location":"architecture/sdkvm/technical_notes/2x2_config_ibc_demo/#2x2-tile-template","title":"2x2 Tile Template","text":"<p>The data model for 4 Displays in a 2x2 Matrix can be found here. The <code>head</code> field for a multi-monitor template needs to reference the source monitor i.e. the monitor that contains the top left corner of the connection, for the purposes of the IBC demo the <code>head</code> field should be set to 4.</p>"},{"location":"architecture/sdkvm/technical_notes/2x2_config_ibc_demo/#limitations","title":"Limitations","text":"<p>The DeskVue OSD does not currently support monitor stacking, if the User makes changes in the OSD Display Menu the 2x2 configuration shall be un-configured. The User can reconfigure by pressing the Hot-Key again.</p>"},{"location":"architecture/sdkvm/technical_notes/multimonitor-weighting/","title":"Monitor IDs in multimonitor enviroments","text":""},{"location":"architecture/sdkvm/technical_notes/multimonitor-weighting/#current-id-implementation","title":"Current ID Implementation","text":"<p>The current monitor management implementation follows a scheme similar to  Windows and Ubuntu. As each monitor is connected to the system it is assigned an  incrementing ID number which cannot be modified. </p> <p> </p> Current Display Settings with IDs <p>This monitor ID can be used when creating workspaces through the GUI and  Boxilla to assign the monitor a view should be placed on.</p>"},{"location":"architecture/sdkvm/technical_notes/multimonitor-weighting/#limitation-of-this-system","title":"Limitation of this system","text":"<p>While this approach functions effectively in a closed environment where workspaces  are exclusively generated within the OSD for a specific Deskvue system,  it encounters scalability challenges when employed in systems configured using  Boxilla. In such cases, as monitors are dynamically added based on the order of system  detection, it's possible for two systems with identical physical monitor setups to have  distinct IDs assigned to the monitor connected to a specific interface.</p> <p> </p> An example of identical setup with different IDs <p>In such a case launching the same workspace on the above systems will result in the view associated with head IDs 2 and 4 being drawn in different physical positions. </p>"},{"location":"architecture/sdkvm/technical_notes/multimonitor-weighting/#proposed-improvment","title":"Proposed Improvment","text":"<p>To enhance the consistency of the system in large-scale deployments while preserving the flexibility for customers to utilize their preferred combinations of display  interfaces, we propose assigning a \"preferred\" ID number or weight to each interface. </p> Interface Weighting HDMI-1 1 HDMI-3 2 HDMI-4 3 DP-2 4 <p>This weight determines the priority of interfaces in the display configurations,  ensuring that consistent IDs are assigned to interfaces across various physical  setups within a deployment. Below are examples of these setups:</p> Interface Assigned ID HDMI-1 1 DP-2 2 Interface Assigned ID HDMI-3 1 HDMI-4 2 DP-2 3 Interface Assigned ID HDMI-1 1 HDMI-3 2 HDMI-4 3 DP-2 4 <p>Info</p> <p>Changing to this method will mean that existing deployments will need to update their workspaces as their monitor IDs could change.</p>"},{"location":"architecture/sdkvm/user_login/ENG-0008-051/","title":"ENG 0008 051","text":"<p>  ------------------------------------------------------------------------------------------------   DeskVue-OSD: Static User Login and Logout</p> <p>SDD</p> <p>Document Number: ENG-0008-051</p> <p>Author: Thirunavukkarasu B</p> <p>Status: In-Progress</p> <p>Rev: 0.04</p> <p>Date: 06/06/2023</p> <p>This document details the proposed design for the work flow of DeskVue-OSD for the User login and logout through OSD manually.</p> <p>Master Document Revision History</p> <p>Date Version Description Author /                                                               Editor</p> <p>25/05/2023   0.01          Initial Draft                    Thirunavukkarasu B</p> <p>29/05/2023   0.02          Diagram updates                  Thirunavukkarasu B</p> <p>31/05/2023   0.03          Diagram updates with sequence    Thirunavukkarasu B                              and changed the description as                               per the flow.                    </p> <p>06/06/2023   0.04          Diagram updates with sequence    Thirunavukkarasu B                              and changed the description as                               per the flow.                    </p>"},{"location":"architecture/sdkvm/user_login/ENG-0008-051/#3-introduction","title":"3 Introduction","text":"<p>The OSD is one of the important component in DeskVue Receiver. OSD provides the main User Interface for the SDKVM. OSD UI provides the features like configure the Network settings, Connections, Workspaces, Templates, and No. of Displays.</p> <ul> <li> <p>User can login with managed and unmanaged mode.</p> </li> <li> <p>User can configure the DeskVue receiver network settings on     unmanaged mode.</p> </li> <li> <p>Launch the connections with different types of Transmitters     (TX/RDP/PCIOP).</p> </li> <li> <p>Managed mode used to make more secure with Black Box BOXILLA.</p> </li> </ul> <p>[Managed and Unmanaged Mode:]{.underline}</p> <p>The SDKVM system can operate in either managed or unmanaged mode.</p> <p>In managed mode the configuration (management) of the system is controlled by our BOXILLA management platform. BOXILLA is responsible for creating users, administering permissions, provisioning connections and creating workspaces.</p> <p>When a SDKVM is managed then the options to locally create Users and Connections and to configure device settings are disabled. In unmanaged mode a user with administrative access can create connections and assign them to workspaces. A user with administrative access should be able to allocate connections and workspaces to regular (local) users.</p>"},{"location":"architecture/sdkvm/user_login/ENG-0008-051/#4-overview","title":"4 Overview","text":"<p>Access to the DeskVue system is achieved via the OSD (On Screen Display) on the DeskVue Unit. The User enters his/her credentials on the OSD screen, from here the user authentication process is captured in the sequence below:</p> <p> []{#_Toc136957174 .anchor}Figure 1: Overview</p> <p>From the above diagram,</p> <ul> <li> <p>User enters the login credentials on the OSD login screen.</p> </li> <li> <p>OSD then passes the user credentials to the STATS_CLI</p> </li> <li> <p>STATS_CLI returns the authentication message back to OSD through     MQTT interface.</p> </li> <li> <p>Authentication success will move to the OSD main screen and the     error displayed to the user on the OSD.</p> </li> </ul>"},{"location":"architecture/sdkvm/user_login/ENG-0008-051/#user-login","title":"User Login","text":""},{"location":"architecture/sdkvm/user_login/ENG-0008-051/#5-component-overview","title":"5 Component Overview","text":"<p>This section describes the various components within Deskvue OSD and STATS_CLI from a Static User Login perspective.</p>"},{"location":"architecture/sdkvm/user_login/ENG-0008-051/#51-key-components-for-static-user-login","title":"5.1 Key Components for Static User Login","text":"<p> []{#_Toc136957175 .anchor}Figure 2: Key Components</p> <p>The key components on DeskVue for Static User Login are,</p> <ul> <li> <p>Flutter</p> </li> <li> <p>OSD</p> </li> <li> <p>STATS_CLI</p> </li> <li> <p>MQTT interface</p> </li> <li> <p>File System</p> </li> </ul> <p>The User login credentials are entered on the OSD login window. Once OSD receives the user credentials, it will be captured from the text-field which user entered in the login window and send to the STATS_CLI interface with username and password.</p> <p>STATS_CLI will process or validate the user credential with BOXILLA (STATS_CLI will communicate to BOXILLA through the REST API). Once STATS_CLI receive the response from BOXILLA, it will send the response to OSD through MQTT interface.</p> <p>OSD will move to the main menu screen up on the successful authentication, otherwise pop-up the Failure Message to the user in case of invalid credential.</p>"},{"location":"architecture/sdkvm/user_login/ENG-0008-051/#52-component-data-flow","title":"5.2 Component Data Flow","text":"<p> []{#_Toc136957176 .anchor}Figure 3: Component Data Flow</p> <p>The above diagram describes the dataflow between the User and the System for authentication of user credentials. Diagram also provides an in-depth overview of the components involved in the data flow</p> <ol> <li> <p>User enters credentials on the OSD login screen.</p> </li> <li> <p>OSD will check the device is managed or unmanaged, if managed state     then only OSD will call STATS_CLI with username and password which     is entered by user in the login window.</p> </li> <li> <p>On managed device, check any existing STATS_CLI interface is     running.</p> </li> <li> <p>Kill the process of existing STATS_CLI interface, to initiate the     new one and avoid the duplicate/multiple processes running.</p> </li> <li> <p>Call the STATS_CLI interface with username and password.</p> <p>a.  Command: stats_cli --login username password</p> </li> <li> <p>Start the timer to wait for the response.</p> </li> <li> <p>Once processed with the username and password STATS_CLI will respond     to OSD through MQTT interface.</p> </li> <li> <p>In case of OSD not received any response from STATS_CLI then send     the timeout response to the user and send the call STATS_CLI timeout     alert.</p> <p>a.  Command: stats_cli --timeout username</p> </li> <li> <p>As per the MQTT response (from STATS_CLI) it will pop-up the error     message up on invalid username and/or password.</p> </li> <li> <p>OSD will move to the main menu on successful login which will have     all the functionalities like, Network, Connections, Workspaces, and     etc.</p> </li> <li> <p>STATS_CLI will update the file system from user directory upon     successful login.</p> </li> </ol>"},{"location":"architecture/sdkvm/user_login/ENG-0008-051/#6-login-deskvue-components","title":"6 Login DeskVue Components","text":"<p>The DeskVue Receiver has three main components, OSD, Stats_CLI, and MQTT.</p> <p>OSD will communicate to STATS_CLI for user login authentication and get the response through MQTT interface.</p>"},{"location":"architecture/sdkvm/user_login/ENG-0008-051/#61-osd","title":"6.1 OSD","text":"<p>OSD (On Screen Display) is one of the software components in DeskVue Receiver.</p> <p>This component is used to</p> <ul> <li> <p>Login and logout a user.</p> </li> <li> <p>Launch and break the different types of connections (TX, RDP, and     PCOIP).</p> </li> <li> <p>Configure the Network settings of a DeskVue device on unmanaged     mode.</p> </li> </ul> <p> []{#_Toc136957177 .anchor}Figure 4: OSD Login Flow Diagram</p> <p>From the diagram,</p> <ol> <li> <p>User enters credentials on the OSD login screen.</p> </li> <li> <p>OSD will check the device is managed or unmanaged, if managed state     then only it will call the STATS_CLI interface to communicate to     REST API (to validate the user credential with BOXILLA).</p> </li> <li> <p>On managed device, check any existing STATS_CLI interface is     running.</p> </li> <li> <p>Kill the process of existing CLI interface (stats_cli), to initiate     the new one.</p> </li> <li> <p>Call STATS_CLI interface with username and password</p> <p>a.  Command: stats_cli --login username password</p> </li> <li> <p>Start the timer to wait for the response.</p> </li> <li> <p>Start the progress indicator to the user to understand the process     running behind.</p> </li> <li> <p>If there is no response from STATS_CLI within the timeout period     then STOP the progress indicator.</p> </li> <li> <p>If there is no response from STATS_CLI, indicate to the user as     authentication is timed out and call STATS_CLI for the Manual Login     alert.</p> <p>a.  Command: stats_cli --timeout username</p> </li> <li> <p>Once processed with the username and password, STATS_CLI will     respond to OSD through MQTT interface with the below topic.     blackbox/sdkvm/deskvue/status/osd_sdkvm/webservice/authentication</p> </li> <li> <p>This MQTT response will be captured in Flutter MQTT API and ready to     process. The response will be like, {\\\"login_type\\\" : \\\"local\\\",     \\\"login_status\\\" : \\\"success\\\", \\\"details\\\" : \\\"Boxilla return     details\\\" }</p> </li> <li> <p>Stop the progress indicator once the response received as well,     either of success or failure.</p> </li> <li> <p>As per the MQTT response (from STATS_CLI) it will pop-up the error     message up on invalid username and/or password.</p> </li> <li> <p>OSD will move to the main menu on successful login which will have     all the functionalities like, Network, Connections, Workspaces, and     etc.</p> </li> </ol>"},{"location":"architecture/sdkvm/user_login/ENG-0008-051/#62-stats_cli","title":"6.2 STATS_CLI","text":"<p>The STATS_CLI is one of the software interface components in DeskVue. This component is used to provide a convenient CLI that allows other components send alerts, authentication stats and other REST based commands to BOXILLA.</p> <p> []{#_Toc136957178 .anchor}Figure 5: STATS_CLI Login Flow Diagram</p> <p>The DeskVue OSD receives the username and password in the login window, it will be captured and send to the CLI interface. STATS_CLI will process the login credential with BOXILLA using REST API interface and response to OSD via MQTT interface.</p> <p>In case of not received any response from STATS_CLI to OSD, then the timeout alert will be executed from OSD.</p>"},{"location":"architecture/sdkvm/user_login/ENG-0008-051/#63-mosquitto","title":"6.3 MOSQUITTO","text":"<p>Mosquitto is a MQTT broker used to send/receive messages between software components. Clients subscribe to particular topics for which they want to receive messages.</p> <p>The OSD subscribes to Mosquitto to receive the user login authentication status. This will be sent (published) by the STATS_CLI.  []{#_Toc136957179 .anchor}Figure 6: MOSQUITTO interface diagram</p> <p>MOSQUITTO_PUB MOSQUITTO_SUB MOSQUITTO_TOPIC</p> <p>stats_cli           osd                 blackbox/sdkvm/deskvue/status/osd_sdkvm/webservice/authentication</p> <p>stats_cli           osd                 blackbox/sdkvm/deskvue/status/osd_sdkvm/webservice/error</p> <p>Table 1: MOSQUITTO TABLE</p> <p>MQTT client created with the Server IP, Client identified, and Port. For example,</p> <p>MQTTServerClient client = MQTTServerClient.withPort('127.0.0.1', 'client_name', 1883);</p> <p>And, maintaining the KeepAlivePeriod for 60 seconds to make sure the connection between client and server is established by PING Commands. For example, client.keepAlivePeriod = 60</p> <p>MQTT Client</p> <ol> <li> <p>Connect -- function will connect to the MOSQUITTO broker to send and     receive the messages which are subscribed with topics.</p> </li> <li> <p>Subscribe -- function will subscribe the topic(s) to receive the     message. And it will subscript with QoS level-1 for Guaranteed     Delivered.</p> </li> <li> <p>Get Message Stream - will receive the data when published it on     particular topic</p> </li> <li> <p>Unsubscribe -- will remove the subscription on particular topic(s).</p> </li> <li> <p>Disconnect -- will disconnect the MQTT Client-Server communication.</p> </li> </ol> <p>MQTT Server</p> <ol> <li> <p>Broker or server will enable with the subscribed topic(s). Here,     there are two topics used for user login one is for authentication     and another one for error.</p> <p>a.  For login authentication:     blackbox/sdkvm/deskvue/status/osd_sdkvm/webservice/authentication</p> <p>b.  For error:     blackbox/sdkvm/deskvue/status/osd_sdkvm/webservice/error</p> </li> <li> <p>Publisher -- will be configured with QoS Level-2 for message will be     delivered once, and only once. Message will be retried until it is     successfully sent.</p> </li> </ol>"},{"location":"architecture/sdkvm/user_login/ENG-0008-051/#64-user-data-directory-structure","title":"6.4 User Data directory structure","text":"<p> []{#_Toc136957180 .anchor}Figure 7: User Data Directory Structure</p> <p>The User data folder structure will be used for maintaining the authentication user credentials, connection details and workspaces details.</p> <p>From the Diagram</p> <ol> <li> <p>The file users.json will be updating by the StatsCLI when the     requested user.json database checksum is not matched with the     BOXILLA user.json database and responded with updated user.json     database.</p> </li> <li> <p>The file users.json will also be used for the local user     authentication when the BOXILLA is offline or send negative     response.</p> </li> <li> <p>The file connections.json defines the connections a given user can     access.</p> </li> <li> <p>The file connections.json will be updated by the StatsCLI when the     requested user.json database checksum does not match the BOXILLA     user.json database checksum.</p> </li> <li> <p>The file workspaces.json will be updated by StatsCLI when the     requested user.json database checksum does not match the BOXILLA     user.json database checksum.</p> </li> </ol>"},{"location":"architecture/sdkvm/user_login/ENG-0008-051/#user-logout","title":"User Logout","text":""},{"location":"architecture/sdkvm/user_login/ENG-0008-051/#7-logout-deskvue-components","title":"7 Logout DeskVue Components","text":"<p>Logout is one of the step in the OSD to come out from the current logged-in session. Once click the Logout button OSD will logout the current session and will be stay on Login Window.</p> <p> []{#_Toc136957181 .anchor}Figure 8: Logout Components</p>"},{"location":"architecture/sdkvm/user_login/ENG-0008-051/#71-osd-logout","title":"7.1 OSD (Logout)","text":"<p> []{#_Toc136957182 .anchor}Figure 9: OSD Logout Flow Diagram</p> <ol> <li> <p>The User press logout button on OSD.</p> </li> <li> <p>OSD is checking this device is managed or unmanaged, and it will     proceed if it is managed.</p> </li> <li> <p>Check the CLI process is running already.</p> </li> <li> <p>Kill the CLI process if it is running.</p> </li> <li> <p>Start the timer to check the timeout for no response.</p> </li> <li> <p>Start the STATS_CLI with logout command.</p> </li> <li> <p>Initiate the command with logged username, Command: stats_cli     --logout username</p> </li> <li> <p>Start the progress indicator to indicate to the user for delay in     process.</p> </li> <li> <p>Wait for the response from STATS_CLI</p> </li> <li> <p>STATS_CLI will send the logout response to MQTT interface.</p> </li> <li> <p>MQTT interface will send the response data to MQTT Flutter API.</p> </li> <li> <p>Once the OSD is received the response then it will stop the Progress     Indicator. And if there is no response from STATS_CLI also it will     stop the Progress Indicator.</p> </li> <li> <p>OSD will indicate the Timeout error message to the user if there is     no response from STATS_CLI and it will logout as well.</p> </li> <li> <p>OSD send the STATS_CLI command for Manual Logout alert REST API for     Timeout</p> </li> <li> <p>OSD is getting logged out for successful response from STATS_CLI.</p> </li> <li> <p>The DeskVue will further update users database JSON in SDKVM folder     structure after validation.</p> </li> </ol>"},{"location":"architecture/sdkvm/user_login/ENG-0008-051/#72-stats_cli-logout","title":"7.2 STATS_CLI (Logout)","text":"<p>The STATS_CLI is one of the software interface components in DeskVue. This component is used to provide a convenient CLI that allows other components send alerts, authentication stats, logout request and other REST based commands to BOXILLA.</p> <p> []{#_Toc136957183 .anchor}Figure 10: STATS_CLI Logout Flow Diagram</p> <p>Once the user click the logout button, the OSD will send Logout Request to STATS_CLI.</p> <p>STATS_CLI will process the logout credential with BOXILLA using REST API interface and response to OSD via MQTT interface.</p> <p>The Logout Timeout Request will update the OSD Manual Logout timeout alert if OSD calls Stats cli when timer expires for the user logout request.</p>"},{"location":"architecture/sdkvm/user_login/ENG-0008-051/#73-mosquitto","title":"7.3 MOSQUITTO","text":"<p>Mosquitto is a MQTT broker used to send/receive messages between software components. Clients subscribe to particular topics for which they want to receive messages.</p> <p>The OSD subscribes to Mosquitto to receive the user logout response from STATS_CLI.</p> <p>MOSQUITTO_PUB MOSQUITTO_SUB MOSQUITTO_TOPIC</p> <p>stats_cli           osd                 blackbox/sdkvm/deskvue/status/osd_sdkvm/webservice/logout</p> <p>Table 2: MOSQUITTO LOGOUT TABLE</p> <p> []{#_Toc136957184 .anchor}Figure 11: MOSQUITTO Interface Diagram (Logout)</p> <p>From the Diagram,</p> <p>1. Mosquiito_pub will send the message of user logout response or cli command error to the Mosquito broker or server once stats_cli completes the user logout process.</p> <p>{ \\\"logout\\\" : \\\"local\\\", \\\"details\\\" : \\\"Boxilla return error: error details\\\" }</p> <p>2. Mosquito_broker will receive the message from Mosquito_pub and send it to Mosqutto_sub.</p> <p>3. Mosquito_sub will receive the message from broker and send it to the OSD to logout the user.</p> <p>MQTT Client</p> <ol> <li> <p>Connect -- function will connect to the MOSQUITTO broker to send and     receive the messages which are subscribed with topics.</p> </li> <li> <p>Subscribe -- function will subscribe the topic(s) to receive the     message. And it will subscript with QoS level-1 for Guaranteed     Delivered.</p> </li> <li> <p>Get Message Stream - will receive the data when published it on     particular topic</p> </li> <li> <p>Unsubscribe -- will remove the subscription on particular topic(s).</p> </li> <li> <p>Disconnect -- will disconnect the MQTT Client-Server communication.</p> </li> </ol> <p>MQTT Server</p> <ol> <li> <p>Broker or server will enable with the subscribed topic(s). Here,     there is a topic used for user logout.</p> <p>a.  For user logout:     blackbox/sdkvm/deskvue/status/osd_sdkvm/webservice/logout</p> </li> <li> <p>Publisher -- will be configured with QoS Level-2 for message will be     delivered once, and only once. Message will be retried until it is     successfully sent.</p> </li> </ol>"},{"location":"architecture/sdkvm/user_login/ENG-0008-051/#74-user-data-directory-structure","title":"7.4 User Data Directory Structure","text":"<p>The User data folder structure will be used for maintaining the authentication user credentials, connection details and workspaces details.</p> <p> []{#_Toc136957185 .anchor}Figure 12: User Data Directory Structure (Logout)</p> <p>From the Diagram,</p> <ol> <li> <p>The file users.json will be updated by the STATS_CLI when the     multiple users json database checksum of Deskvue is not matched with     the BOXILLA multiple users json database and responded with updated     user json database.</p> </li> <li> <p>The connections.json file will be updated by the STATS_CLI when the     multiple users json database checksum of DeskVue is not matched with     the BOXILLA multiple users json database.</p> </li> <li> <p>The workspaces json files will be updated by STATS_CLI when the     multiple users json database checksum of DeskVue is not matched with     the BOXILLA multiple users json database.</p> </li> </ol>"},{"location":"architecture/usb/usbr/","title":"Emerald USB Architecture","text":""},{"location":"architecture/usb/usbr/#emerald4kse-software-design-for-vusb-devices","title":"Emerald4K/SE Software Design for vUSB Devices","text":""},{"location":"architecture/usb/usbr/#introduction","title":"Introduction","text":""},{"location":"architecture/usb/usbr/#purpose","title":"Purpose","text":"<p>The document details a new model of USB virtual device which will be a key module of USB Redirection implementation. This model focuses on trying to support all kind of USB transfers and solve known issues of previous implementations.</p>"},{"location":"architecture/usb/usbr/#scope","title":"Scope","text":"<p>The document focuses on the desired Software Architecture; it does not outline the phasing of work or migration strategies for moving from the current architecture to the desired one. Only specific details of USB related functionality is discussed in this document.</p>"},{"location":"architecture/usb/usbr/#overview-of-document-organization","title":"Overview of Document Organization","text":""},{"location":"architecture/usb/usbr/#design-and-implementation-constraints","title":"Design and Implementation Constraints","text":"<p>Many aspects of the current USB Redirection architecture are unsuitable for current market requirements. They constrain timely development of features and impose significant maintenance challenges. From a development perspective this constantly pushes us into development dead ends and no optimal implementation so it was decided to make a new approach backward compatible with previous ones already on field. Furthermore, this new design must be transversal to Black Box Emerald KVM family and keep portability between kernel versions in mind.</p>"},{"location":"architecture/usb/usbr/#assumptions-and-dependencies","title":"Assumptions and Dependencies","text":"<p>TBD</p>"},{"location":"architecture/usb/usbr/#definitions-acronyms-and-abbreviations","title":"Definitions, Acronyms and Abbreviations","text":""},{"location":"architecture/usb/usbr/#definitions","title":"Definitions","text":"Term Description 3DES Triple DES (Data Encryption Standard) AC Alternating Current AD Active Directory AAE Audio Application Engine AE Application Engines AES Advanced Encryption Standard AGC Automatic Gain Control ASIC Application Specific Integrated Circuit Barrow Project code for an early version of DTX1000 that is now obsolete BIST BIST In Self-Test CAP CloudAccel Protocol CD Compact Disk CE Conformit\u00e9 Europ\u00e9enne Corrib Project code for current DTX1000/DTX1002 products CMN Certification Model Number CMU Central Management Unit CPU Central Processing Unit CTS Clear to Send Deel Project code for DTX1000SA product \u2013 which is a Corrib unit with audio/serial added with a metal enclosure (versus plastic body for Corrib). HDCP High-bandwidth Digital Content Protection DC Direct Current DES Data Encryption Standard DHCP Dynamic Host Configuration Protocol DNS Domain Name System DPS Detailed Product Specifications DRAM Dynamic Random Access Memory DSP Digital Signal Processing DVI Digital Video Interface EDID Extended Display Identification Data ELMD Entry Level Management Device ESD Electrostatic Discharge EuP Energy using Products FCC Federal Communications Commission FPGA Field Programmable Gate Array FQDN Fully Qualified Domain Name GUI Graphical User Interface HDCP High-bandwidth Digital Content Protection HID Human Interface Devices HTTP Hypertext Transfer Protocol IC Integrated Circuit IEC International Electrotechnical Commission IGMP Internet Group Management Protocol IP Internet Protocol ISTA International Safe Transit Authority JSON JavaScript Object Notation KVM Keyboard, Video, Mouse LAN Local Area Network LED Light Emitting Diode MAC Media Access Control MPS Multipoint Server MRD Marketing Requirements Document MST Multi-Stream Transport NLA Network Level Authentication NOC Network Operating Centre OEM Original Equipment Manufacturer OS Operating System OSD On Screen Display PC Personal Computer PCI Peripheral Component Interconnect PCB Printed Circuit Board PID Peripheral ID PSU Power Supply Unit QIG Quick Install Guide RDP Remote Desktop Protocol RDSH Remote Desktop Session Host (formally Terminal Services) REST Representational state transfer ROHS Restriction Of Hazardous Substances RF Radio Frequency SDI Serial Data Interface SFP Small Form factor Pluggable SSH Secure Shell SST Single Stream Transport TCP Transmission Control Protocol UDP User Datagram Protocol UI User Interface UL Underwriters Laboratories URL Uniform Resource Locator USB Universal Serial Bus VDI Virtual Desktop Infrastructure VESA Video Electronics Standards Association VGA Video Graphics Adaptor VID Vendor ID VM Virtual Machine VNC Virtual Network Computing WAN Wide Area Network WEEE Waste Electrical and Electronic Equipment XML eXensible Markup Language UDC USB Device Controller"},{"location":"architecture/usb/usbr/#references","title":"References","text":"<ol> <li>Microsoft RDP Base Standard: MS_RDPBCGR Version 48.0</li> <li>InvisaPC DPS \u2013 EDD-0003-001</li> <li>Emerald MRD</li> <li>VESA DisplayPort Standard; Version 1, Revision 2a</li> <li>DVI 1.0 Standard</li> <li>VESA</li> <li>PC99 http://www.microsoft.com/whdc/archive/pcguides.mspx</li> <li>RemoteFX RDP Specification: MS_RDPRFX</li> <li>USB Redirection Specification :MS_RDPEUSB</li> <li>Domain Names - Implementation and Specification https://tools.ietf.org/html/rfc1035</li> <li>Boxilla DPS \u2013 EDD-0007-030.</li> </ol>"},{"location":"architecture/usb/usbr/#overall-description","title":"Overall Description","text":"<p>The ultimate purpose of USB Redirection is to create a transparent path between a hardware USB device and host that are not physically connected each other. This feature is widely used in consumer software as Virtual Box, VMware Player, etc. but in those cases a second software USB host is used by creating a virtual USB port so there is no need of an entity in charge of capturing or inject USB packets, everything is done by software. The actual challenge comes when an unknown remote hardware USB host is desired to be supported.</p> <p>If a remote hardware USB host has to be supported, a way of capturing and replying USB packets will be required. There are specific hardware on board Emerald family appliances for this task, specifically on Tx side. It is equipped with a Peripheral Controller IC which will be connected to remote hardware USB host. Peripheral Controller IC will be able to handle USB traffic but it cannot do anything by itself, it will need a way to communicate with remote device, take its response to a given USB host request and inject that response to the bus where it is connected. On the other hand, it will have to expose correct USB device status and endpoints to the bus so it will be necessary to not only to capture and write USB packets but to locally model a complete USB device.</p> <p>This document will focus on the design of the piece of software required to successfully read and write USB traffic by using a Peripheral Controller IC from a Linux user space application. This software will be referred as USB virtual device.</p>"},{"location":"architecture/usb/usbr/#architecture-overview","title":"Architecture Overview","text":""},{"location":"architecture/usb/usbr/#usb-redirection-scenario","title":"USB Redirection Scenario","text":"<p>The scenario where a Virtual USB device is required is shown below.</p> <p> Figure 1 USB Redirection scheme for hardware USB Host</p> <p>USB hardware configuration of Tx is designed to support up to four Peripheral Controllers. In case of Emerald 4K, there are three net2272 ICs and one USB3320C IC. All of them are accesed by USB host through a USB hub.</p> <p> Figure 2 USB Redirection hardware</p> <p>Peripheral Controllers used for USB Redirection will be net2272 due to its flexibility and number of endpoints supported.</p>"},{"location":"architecture/usb/usbr/#usb-redirection-software-components","title":"USB Redirection Software Components","text":""},{"location":"architecture/usb/usbr/#net2272-ic","title":"Net2272 IC","text":"<p>Net2272 is a dedicated integrated circuit that will be used as USB Device Physical Layer implementation, it will be required for interacting with USB target host. This IC is interfaced against Linux Kernel by modelling it as a UDC (USB Device Controller) through a dynamically loadable kernel module \u201cnet2272.ko\u201d.</p>"},{"location":"architecture/usb/usbr/#linux-usb-gadget-api","title":"Linux USB Gadget API","text":"<p>This API is used by Linux Kernel to interact with a UDC as net2272, dwc3 or chipidea. It will be intensively used during the whole development as long as endpoints, transfers and bus signalling are accessed through this API.</p>"},{"location":"architecture/usb/usbr/#composite-device-framework","title":"Composite Device Framework","text":"<p>Composite Device Framework is used to facilitate USB device representation to USB host. It is designed to easily create USB composite devices that support several USB functions under Linux (for example: keyboard, mouse and audio USB functions on the same USB gadget device). It will use Linux USB Gadget API to interact with hardware. Default use of this framework is NOT suitable for USB Redirection solution because it assumes that all information about USB device will be available \u201ca priori\u201d but this is not possible because at the beginning of USB Redirection process nothing is known about remote USB device and a dynamic construction of virtual USB device is required. All the information needed will be provided by control transfers triggered by USB target host. However, several functions from this framework will be used to create a virtual USB Device.</p>"},{"location":"architecture/usb/usbr/#kvm-clientserver-application","title":"KVM Client/Server Application","text":"<p>KVM Client/Server Applications are responsible for the following:</p> <ul> <li>Implementing the RDP protocol</li> <li>Creating an RDP connection and calling the relevant connection scripts</li> <li>Create a channel against USB redirected device</li> <li>Complete all USB transfers initiated by USB Host</li> <li>Close session correctly</li> </ul> <p>The functionality of the application layer will not be discussed in this document.</p>"},{"location":"architecture/usb/usbr/#usb-virtual-device-driver","title":"USB Virtual Device Driver","text":"<p>Virtual USB Device will be implemented as a Linux Kernel module and it will be a local soft representation of a remote hard USB device. It will handle USB transfers initiated by USB host that comes from USB bus through a UDC, typically net2272 and change its state representing the remote USB on local USB bus. The functionality of this module is similar to the one provided by Composite Device Framework. This module must not use the default composite driver, its use would be a misconception. A new composite driver is required and only some auxiliary functions from Composite Device Framework will be used.</p>"},{"location":"architecture/usb/usbr/#simplified-logical-usb-scheme","title":"Simplified Logical USB Scheme","text":"<p> Figure 3 Virtual USB Device scheme</p> <p>Virtual USB device needs to be smart enough to satisfy and maintain, Gadget API and Composite Framework inside Linux Kernel with the information provided by control transfers. For this reason, it will need to parse descriptors and control requests that comes through Gadget API.</p>"},{"location":"architecture/usb/usbr/#user-space-interface","title":"User Space Interface","text":"<p>Communication with user space will be based on a very simple interface with eight commands. A half of them are specific to trigger some actions on Linux Kernel and the rest are designed for USB packets bypassing.</p>"},{"location":"architecture/usb/usbr/#message-format","title":"Message Format","text":"<p>This module provides an interface for user space to access USB host transfers. The format messages is shown belown.</p> Offset Field Size Description 0 Type 1 Type of message 1 Result 1 Result of Message 2 Request 2 USB 2.0 Spec. chapter 9 (CONTROL XFER ONLY) 4 Value 2 USB 2.0 Spec. chapter 9 (CONTROL XFER ONLY) 6 Index 2 USB 2.0 Spec. chapter 9 (CONTROL XFER ONLY) 8 address 1 Endpoint address 9 attributes 1 Endpoint attributes 10 maxPacketSize 4 Depending on transfer direction, it could be expected transfer length or maximum length allowed. 14 data N Message payload <p>Figure 4 Virtual USB device interface, generic message format</p> <p>Message format will be different in case of ISOCHRONOUS IN transfers. Several USB packets needs to be passed together from userspace to kernel in same message.</p> Offset Field Size Description 0 type 1 Type of message 1 result 1 Result of Message 2 request 2 USB 2.0 Spec. chapter 9 (CONTROL XFER) 4 value 2 USB 2.0 Spec. chapter 9 (CONTROL XFER) 6 index 2 USB 2.0 Spec. chapter 9 (CONTROL XFER) 8 address 1 Endpoint address 9 attributes 1 Endpoint attributes 10 maxPacketSize 4 Depending on transfer direction, it could be expected transfer length or maximum length allowed. 14 isoch_packet_desc_num 4 Number of isoch descriptors 18 isoch_descs 12*K Isochronous packet descriptors is a complex extructure defined later. K is equal isoch_packet_desc_num 18+12*K Isoch packets N Lengths and limits of pckets must be deducted from isochronous packet descriptors <p>Figure 5 Virtual USB device interface, ISOCHRONOUS IN message format</p> Offset Field Size Description 0 length 4 Max length expected for a packet 1 actual_length 4 Actual length of packet returned. This field is expected to be used for \u201cIsoch packets\u201d processing. 2 status 4 Status of packet <p>Figure 6 Isochronous packet descriptor</p>"},{"location":"architecture/usb/usbr/#commands","title":"Commands","text":""},{"location":"architecture/usb/usbr/#usbqt_request_resource","title":"USBQT_REQUEST_RESOURCE","text":"<p>This type of command is the initial user space to kernel communication. It will claim and check communication through interface against Kernel since it has to acknowledge it.</p>"},{"location":"architecture/usb/usbr/#usbqt_release_resource","title":"USBQT_RELEASE_RESOURCE","text":"<p>This will be the last command sent from user space in a USBR session. It will release the interface and its resources. All used usb gadget driver resources must be cleared.</p>"},{"location":"architecture/usb/usbr/#usbqt_configure_resource","title":"USBQT_CONFIGURE_RESOURCE","text":"<p>A Linux UDC will be requested when this command gets executed inside Kernel. It means that usb_gadget_probe_driver() will get executed and if it returns success, virtual USB device will be presented to the USB host and control transfers will start to come.</p>"},{"location":"architecture/usb/usbr/#usbqt_transfer_in_request","title":"USBQT_TRANSFER_IN_REQUEST","text":"<p>It will be used to mark transfers from remote USB device to USB host. It may contain any type of transfer.</p>"},{"location":"architecture/usb/usbr/#usbqt_transfer_out_request","title":"USBQT_TRANSFER_OUT_REQUEST","text":"<p>It will be used to mark transfers from USB host to remote USB device. It may contain any type of transfer.</p>"},{"location":"architecture/usb/usbr/#usbqt_urb_completion_data-and-usbqt_usb_completion_no_data","title":"USBQT_URB_COMPLETION_DATA and USBQT_USB_COMPLETION_NO_DATA","text":"<p>These commands will be used in conjunction with USBQT_TRANSFER_XXX_REQUEST. They will finish a transfer or urb.</p>"},{"location":"architecture/usb/usbr/#linux-usb-gadget-api_1","title":"Linux USB Gadget API","text":"<p>This is the API used to access the USB hardware which is in charge of enumerating the device and signalling connections and disconnections of the virtual USB device, any event that is not handled at this level will be probably handled by UDC level and will not be visible at all from user space. Several callbacks must be correctly implemented to keep virtual USB device working even when USB cable or port is faulty, user has disconnected it or any other process that requires a reenumeration i.e: USB host reboot has been triggered.</p> <p>The most important structure used in this API is showed below.</p> <pre><code>struct usb_gadget_driver {\n    char *function;\n    enum usb_device_speed  max_speed;\n    int(*bind)(struct usb_gadget *gadget, struct usb_gadget_driver *driver);\n    void(*unbind)(struct usb_gadget *);\n    int(*setup)(struct usb_gadget *, const struct usb_ctrlrequest);\n    void(*disconnect)(struct usb_gadget *);\n    void(*suspend)(struct usb_gadget *);\n    void(*resume)(struct usb_gadget *);\n    void(*reset)(struct usb_gadget *);\n    struct device_driver  driver;\n    char *udc_name;\n    struct list_head        pending;\n    unsigned match_existing_only:1;\n}\n</code></pre> <p>Figure 7 usb_gadget_driver structure</p> <p>Bind/unbind() functions are instrumentation to perform memory allocation and some USB gadget configurations before probing this driver to kernel. Setup() callback will be called during enumeration in order to satisfy control requests from host if it is connected. Disconnect(), suspend(), resume(), reset() are used for handling of those bus events.</p> <p>Setup callback is key for enumeration process of USB virtual device, it will deploy a complex configuration process which will set up Composite Framework. From USB Redirection perspective, every setup request must be propagated over the network towards the actual redirected USB device. This callback will be continuously selecting correct device configuration in terms of USB configuration, function, interfaces and non control endpoints.</p> <p>Disconnect, suspend, resume and reset callbacks must be implemented.</p>"},{"location":"architecture/usb/usbr/#virtual-usb-configuration-and-usb-functions","title":"Virtual USB Configuration and USB Functions","text":"<p>Composite Framewok is fundamental for implementation of USB devices based on Linux, it allows to build complex devices with more than 1 configuration or 1 function.</p> <p>The conventional use of USB Composite Framework layer adds a lot of complexity to USB Redirection development. It was designed to implement USB devices with a known structure but in USBR context no data about remote USB device is given until transfers between host and device are going on through the bus.</p> <p>Only some structures and auxiliary functions from this layer will be used. The use of usb_composite_probe() will be completely avoided, it is used to load the standard composite driver which is not needed in our context. This will make our USB approach portable to other platforms.</p> <p>Virtual USB device will be modelled with this framework by using only 1 USB configuration and 1 USB function that will be capable of representing all possible configurations and functions that remote device offers.</p> <pre><code>struct usb_composite_dev {\n struct usb_gadget  *gadget;\n struct usb_request  *req;\n struct usb_request  *os_desc_req;\n\n struct usb_configuration *config;\n\n /* OS String is a custom (yet popular) extension to the USB standard. */\n u8    qw_sign[OS_STRING_QW_SIGN_LEN];\n u8    b_vendor_code;\n struct usb_configuration *os_desc_config;\n unsigned int   use_os_string:1;\n\n /* private: */\n /* internals */\n unsigned int   suspended:1;\n struct usb_device_descriptor desc;\n struct list_head  configs;\n struct list_head  gstrings;\n struct usb_composite_driver *driver;\n u8    next_string_id;\n char    *def_manufacturer;\n\n /* the gadget driver won't enable the data pullup\n  * while the deactivation count is nonzero.\n  */\n unsigned   deactivations;\n\n /* the composite driver won't complete the control transfer's\n  * data/status stages till delayed_status is zero.\n  */\n int    delayed_status;\n\n /* protects deactivations and delayed_status counts*/\n spinlock_t   lock;\n\n /* public: */\n unsigned int   setup_pending:1;\n unsigned int   os_desc_pending:1;\n};\n</code></pre> <p>Figure 8 usb_composite_dev structure</p> <p>This structure will be maintained in USB virtual device module, It is the basis representation of the USB device represented to USB bus. It will link to structures representing USB configurations and functions.</p> <p>USB Virtual device needs to maintain a list with all endpoint descriptors and interfaces of remote device. USB Host will switch through them.</p>"},{"location":"architecture/usb/usbr/#usb-enumeration-and-descriptors-handling","title":"USB Enumeration and Descriptors Handling","text":"<p>Ideally, virtual kernel module will be required to bypass communication between USB host and USB device in order to be transparent from USB Host perspective but during enumeration of remote USB device it needs to store useful descriptors that will be required by Linux Kernel to maintain all USB Gadget Framework correctly. It means that the module will keep track of every descriptor.</p>"},{"location":"architecture/usb/usbr/#usb-30-descriptors-considerations","title":"USB 3.0 Descriptors Considerations","text":"<p>Part of USB 3.0 devices enumeration is done by using USB 2.0 physical layer due to backward compatibility. If USB 3.0 related descriptors are bypassed to a USB 3.0 host, it will try to enable all USB 3.0 features but this is not possible because only USB 2.0 is supported by hardware.</p> <p>Only in this case a modification in descriptors will be proposed. During enumeration, host will always request a Device Descriptor, it specifies in WbcdUSB\u201d field the USB specification number that the device complies, if it is different than 2.0 it will be modified.</p>"},{"location":"architecture/usb/usbr/#usb-non-control-transfers","title":"USB Non-control Transfers","text":"<p>During setting alternate interface function which is part of Composite Framework, it will be required to correctly handle non control endpoints. Addresses of locally enabled enpoint must be the same as remote endpoints.</p>"},{"location":"architecture/usb/usbr/#usb-bus-events","title":"USB Bus Events","text":"<p>It is required to signal all USB events to upper layers. In current implementation of USB virtual device some of the events are processed locally. For example, in static void net2272_handle_stat0_irqs(struct net2272 *dev, u8 stat) some USB events are masked: USB_REQ_GET_STATUS, USB_REQ_CLEAR_FEATURE, USB_REQ_SET_FEATURE, USB_REQ_SET_ADDRESS.</p> <p>All those events will be delegated to setup() callback in gadget driver structure.</p> <p>This events need to be correctly handled by user space layer as well.</p>"},{"location":"architecture/usb/usbr/#current-architecture-overview-end-to-end","title":"Current Architecture Overview: End to End","text":""},{"location":"architecture/usb/usbr/#current-architecture-transmission-and-reception","title":"Current Architecture Transmission and Reception","text":""},{"location":"architecture/usb/usbr/#application-level-current-implementation","title":"Application Level Current Implementation","text":"<p>The Threads and Queues used in the Server Application are shown below.</p> <p></p>"},{"location":"architecture/usb/usbr/#current-usb-architecture-detailed","title":"Current USB Architecture Detailed","text":""},{"location":"architecture/usb/usbr/#proposed-new-usb-ip-phasing","title":"Proposed New USB IP Phasing","text":""},{"location":"architecture/usb/usbr/#phase-1","title":"Phase 1","text":""},{"location":"architecture/usb/usbr/#phase-2-and-3","title":"Phase 2 and 3","text":""},{"location":"architecture/usb/usbr/#phase-4","title":"Phase 4","text":""},{"location":"architecture/usb/usbr/#analysis-of-usb-queues-in-kvm-connection-wip","title":"Analysis of USB Queues in KVM Connection (WIP)","text":"<p>event_usb_command_available commands (EQ_EVENT_USB_COMMAND_AVAILABLE) are created in ep_process_virtual_command. These are sent to the hm_cm_queue.</p>"},{"location":"architecture/usb/usbr/#usb-user-interface-thread","title":"USB User Interface Thread","text":"<p> Figure 14: Application Client Process View and Threading</p>"},{"location":"architecture/usb/usbr/#notes-on-futher-automation","title":"Notes on Futher Automation","text":"<p>With reference to the Phase 2 diagram above, we could create an automation by using the USB Software Defined Logical Device (Kernel Version) to define an endpoint configuration.</p> <p>An application of a PC (Linux or Windows) could then be used to confirm the correct end points (shown as Linux User Space Driver in the same diagram)</p> <p>Once Phase 3 is developed we would then test from USB Software Defined Logical Device (Application Space Version).</p>"},{"location":"architecture/usb/usbr/#dependencies","title":"Dependencies","text":"<p>How_to_use_libusb_on_Windows</p> <p>SOFTWARE DEFINED USB DEVICE - Based on USB Gadget API, configurable to be a BASIC BULK/INT/ISOCH device SOURCE CODE: svn://10.211.128.12/Emerald/branches/develop_aws_ip/Applications/KernelModules/tx_usb_modules/oot-usblogicaldevice</p> <p>DEVICE DRIVER ON HOST SIDE SOURCE CODE: svn://10.211.128.12/Emerald/branches/develop_aws_ip/Applications/Debugging/Encoder/USB/usb_logical_device_driver GUIDE: http://10.211.129.241:8000/architecture/usb/usbr_utilities/</p> <p>SCRIPT TO SELECT USB DEVICE CONTROLLER AND CONFIGURE XFER TYPE, XFER SIZE, EP ADDRESSES AND B_INTERVAL for ISOCH XFERS</p> <pre><code>______________________________________________________________________________________________\n# cat ./usbdev.sh\nAWSUDCIP=\"80120000.awsudcip\"\nCHIPIDEA=\"ci_hdrc.0\"\n\nUDC=${AWSUDCIP}\n\nif [ \"${UDC}\" = \"${AWSUDCIP}\" ]; then\n        echo \"WAIT\"\n        rmmod awsudcip\n        sleep 4\n        insmod awsudcip.ko long_word_operation=1\n        modprobe libcomposite\nelif [ \"${UDC}\" = \"${CHIPIDEA}\" ]; then\n        echo \"\" &gt; /sys/kernel/config/usb_gadget/bb_composite_hid/UDC\nfi\n\ninsmod usblogicaldevice.ko udc=${UDC} xfer_type=2 xfer_size=512 in_ep_no=1 out_ep_no=1\n______________________________________________________________________________________________\n</code></pre>"},{"location":"architecture/usb/usbr_udc/","title":"USB Device Controller","text":"<p>USB Device Controller drivers are the lowest level software layer of the Linux USB software stack. These drivers must be compatible with USB Gadget API on one side and designed to be interfaced directly with the HW on the other. They are typically in charge of servicing all interrupt requests from hardware and they handle the communication over each endpoint enabled at any given time.</p>"},{"location":"architecture/usb/usbr_udc/#net2272","title":"Net2272","text":"<p>It is an integrated circuit supplied by PLX/Broadcom. It has 3 hardware configurable endpoints but it is possible to set the chip to support up to 15 endpoints in each direction by using endpoint virtualization. Note that endpoint virtualization is not a USB standard technique, only some ICs from PLX/Broadcom support it and it takes advantage of flow control mechanism of int and bulk endpoint types.</p> <p>Datasheet: \\\\10.211.128.208\\shared_area\\rodrigo\\shared\\NET2272F.pdf</p> <p>Driver source code: (branch)/Applications/KernelModules/tx_usb_modules/oot-net2272/</p>"},{"location":"architecture/usb/usbr_udc/#asicws-usb-20-device-ip-core","title":"ASICws USB 2.0 Device IP Core","text":"<p>This USB Device Controller is a soft core that resides in the Emerald FPGA.</p> <p>Datasheet: \\\\10.211.128.208\\shared_area\\rodrigo\\shared\\udev_um.pdf</p> <pre><code>insmod awsudcip.ko long_word_operation=1 ftraces_enable=1 stall_not_supp=0\n\n# long_word_operation: enables 32 bits HW accesses. 8 bits otherwise (r/w) (default=1)\n# ftraces_enable: enables ftrace debug (default=0)\n# stall_not_supp: reports STALL xfers are not supported to OS (default=0)\n</code></pre>"},{"location":"architecture/usb/usbr_utilities/","title":"USB Device Controller Debugging Utilities","text":"<p>There are some utilities developed by Black Box Embedded Software Team that can be used to debug any USB Device Controller (UDC) supported by Linux. These have been specifically developed for the integration of ASICSws USB 2.0 Device IP Core hence it will be assumed that UDC is under test.</p>"},{"location":"architecture/usb/usbr_utilities/#usb-logical-device","title":"USB Logical Device","text":"<p>An UDC is unable to represent a USB device by itself, in order to have a model of a USB device is required to have an object that is able to respond every USB Host request with coherent data about its auto-description via control enpoint.</p> <p>This object is going to be implemented by a kernel module (usblogicaldevice.ko) that will use the most basic linux framework to talk to the hardware UDC: USB Gadget API. This API allows upper layers to enable hardware, configure physical endpoints, receive/send USB requests over control and data endpoints, detect Suspend, Resume, Reset, Disconnect events, etc.</p> <p>Descriptors contained in this kernel module are going to be used by USB host to enumerate the device. They describe the architecture of the device and provide some information as address and type of each endpoint the USB device is going to expose to USB Host. This has to be coherent with underlying hardware capabilities and configuration.</p> <p>The USB device described by this particular driver doesn't belong to any USB Class so no USB host is going to be able to communicate with it via data endpoints unless a custom driver is provided.</p> <p>Device will get enumerated with VID/PID 325a/0001.</p> <p>The following command is used to insert this kernel module:</p> <pre><code>insmod usblogicaldevice.ko udc=80120000.awsudcip xfer_size=64\n\n# Enables two bulk data endpoints with addresses 0x81 (IN) and 0x01 (OUT)\n</code></pre> <p>List of available UDCs (some of them can be in use for other purposes i.e: ci_hdrc.0 on EMSE/EMPE/EM2K/ZEROU or dwc3 on 4K are typically used for the implementation of HID device):</p> <p><pre><code>ls /sys/class/udc/\n</code></pre> The device driver will enable two data endpoints on the hardware. Both will be BULK and will have endpoint number set to 1 but one of them will be IN direction and the other will be OUT direction. Their addresses will be 0x81 and 0x01 respectively.</p> <pre><code>Example:\ninsmod usblogicaldevice.ko udc=80120000.awsudcip xfer_type=1 xfer_size=1024 in_ep_no=1 out_ep_no=2 in_binterval=4 out_binterval=4\n\nParameters:\n    xfer_type: set transfer type [0=int 1=isoc 2=bulk]\n    xfer_size: set transfer size\n    in_ep_no: set in endpoint number\n    out_ep_no: set out endpoint number\n    in_binterval: set bIntervalVariable\n    out_binterval: set bIntervalVariable\n</code></pre> <p>Check limitations given by USB Spec. 2.0 Chapter 9 Section 9.6.6 (Endpoint descriptor) for each parameters. It will create a custom device with two isochronous endpoints with addresses 0x81(IN) and 0x02(OUT). Given the bInterval values, each endpoint will be polled every 1ms if device is HighSpeed and every 8ms if FullSpeed.</p> <p>Note</p> <p>This kernel module is currently being parameterized to enable/disable data integrity validation</p>"},{"location":"architecture/usb/usbr_utilities/#linux-mass-storage-device-driver","title":"Linux Mass Storage Device Driver","text":"<p>A custom version of the Linux Mass Storage Device Driver has been internally developed in order to make it suitable for UDC testing. The most important feature that has been added is the posibility of changing the endpoint number of its two bulk endpoints. This driver has two parts, a Linux USB function driver (usb_f_mass_storage.ko) and a Linux USB gadget driver (g_mass_storage.ko). All changes made by blackbox are in the function driver.</p> <p>The most simple way to use this driver is by running the following commands: <pre><code>insmod usb_f_mass_storage.ko in_ep_num=0x81 out_ep_num=0x02\nmodprobe g_mass_storage file=/usr/local/mass_storage.disk\n</code></pre> The main disadvantage of using this method is that it is not possible to select what UDC to use programatically. Also there are several USB parameters that are hardcoded in g_mass_storage.ko driver and not configurable by the user (vid, pid, serial, strings, etc...).</p> <p>The custom version of usb_f_mass_storage.ko can be found at \\\\10.211.128.208\\shared_area\\rodrigo\\shared\\usb_f_mass_storage.ko. Modprobe command uses the default version of g_mass_storage.ko installed on the board.</p> <p>Linux Mass Storage driver also requires a correctly formatted \"virtual\" disk to be enumerated and handled correctly by a USB host. A suitable disk for test has been uploaded to \\\\10.211.128.208\\shared_area\\rodrigo\\shared\\mass_storage.disk</p> <p>The recommended way to use usb_f_mass_storage.ko driver is as follows:</p> <pre><code>#!/bin/bash -xe\n\n# \"manual\" insertion of Black Box custom driver. If it is not inserted, Linux is\n# going to interpret we want to use the default version installed on the board.\ninsmod usb_f_mass_storage.ko in_ep_num=0x81 out_ep_num=0x02\n\nUDC_NAME=\"80120000.awsudcip\"\n\nCONFIGFS_BASE_PATH=\"/sys/kernel/config\"\nCONFIGFS_GADGET_PATH=${CONFIGFS_BASE_PATH}\"/usb_gadget/bb_mass_storage\"\n\n\nGADGET_SERIAL_NUMBER=$(libsystem_cli --serial)\nGADGET_MANUFACTURER=\"Black Box Corp.\"\nGADGET_PRODUCT=\"Black Box Mass Storage Test Device\"\nGADGET_CONFIG_DESCRIPTION=\"BLACKBOX_MASS_STORAGE_TEST_DEVICE\"\n\nmodprobe libcomposite\nif [ ! -e ${CONFIGFS_BASE_PATH} ]\nthen\n    mount none ${CONFIGFS_BASE_PATH} -t configfs\nfi\n\nmkdir -p ${CONFIGFS_GADGET_PATH}\n\necho 0x325a &gt; ${CONFIGFS_GADGET_PATH}/idVendor   # Black Box Corporation\necho 0x0002 &gt; ${CONFIGFS_GADGET_PATH}/idProduct  # Mass Storage Test Device assigned PID\necho 0x00  &gt; ${CONFIGFS_GADGET_PATH}/bDeviceClass\necho 0x00 &gt; ${CONFIGFS_GADGET_PATH}/bDeviceSubClass\necho 0x00 &gt; ${CONFIGFS_GADGET_PATH}/bDeviceProtocol\n\nmkdir -p ${CONFIGFS_GADGET_PATH}/strings/0x409\n\necho ${GADGET_SERIAL_NUMBER} &gt; ${CONFIGFS_GADGET_PATH}/strings/0x409/serialnumber\necho ${GADGET_MANUFACTURER} &gt; ${CONFIGFS_GADGET_PATH}/strings/0x409/manufacturer\necho ${GADGET_PRODUCT} &gt; ${CONFIGFS_GADGET_PATH}/strings/0x409/product\n\nmkdir -p ${CONFIGFS_GADGET_PATH}/configs/c.1/strings/0x409\necho ${GADGET_CONFIG_DESCRIPTION} &gt; ${CONFIGFS_GADGET_PATH}/configs/c.1/strings/0x409/configuration\n\n###################### mass storage ########################\nmkdir -p ${CONFIGFS_GADGET_PATH}/functions/mass_storage.usb0\necho /usr/local/mass_storage.disk &gt; ${CONFIGFS_GADGET_PATH}/functions/mass_storage.usb0/lun.0/file\nln -s ${CONFIGFS_GADGET_PATH}/functions/mass_storage.usb0 ${CONFIGFS_GADGET_PATH}/configs/c.1/\n############################################################\n\necho ${UDC_NAME} &gt; ${CONFIGFS_GADGET_PATH}/UDC\n</code></pre>"},{"location":"architecture/usb/usbr_utilities/#usb-logical-device-driver","title":"USB Logical Device Driver","text":"<p>The driver provided for the USB Logical Device is an application written in C and potentially portable to any OS compatible with libusb (https://libusb.info/)</p> <p>This application will generate arbitrary traffic over the two data endpoints. The type of traffic to be generated is parameterized and can be bulk or isochronous. There is also a parameter for the transfer size.</p> <p>It is important to note that endpoint addresses, type of transfers supported, transfer sizes are not imposed by this application but by the device itself via its descriptors shared with USB Host during the enumeration.</p> <p>List of parameters supported by host application:</p> <pre><code>./blackbox_logical_device_driver\n./blackbox_logical_device_driver: &lt;compilation date&gt;\nMust have root permissions (sudo) to successfully run\nUSAGE: ./blackbox_logical_device_driver &lt;vendor-id&gt; &lt;product-id&gt;\n        must be run with root permissions (sudo)!\n--packet_count: number of packets to send/receive (default: infinite)\n--disable_rx: disable receive packets\n--disable_tx: disable transmit packets\n--rx_crc: display rx crc debug info\n--tx_crc: display tx crc debug info\n--ignore_rx_crc: ignore rx crc verification failure\n--rx_data: display rx debug data\n--tx_data: display tx debug data\n--xfer_size=&lt;numbytes&gt;: set transfer size (default=512 bytes)\n--xfer_type=&lt;transfertype&gt;: set transfer type [0=int 1=isoch 2=bulk] (default=2)\n--vendor_id=&lt;xxxx&gt;: 4 digit vendor id (default=325a)\n--product_id=&lt;xxxx&gt;: 4 digit product id (default=0001)\n--flush: clear the buffers\n--scenario=&lt;scenario&gt;: set test scenario (default=0)\n--help: this help\n--loud:  increase verbosity\n--quiet: reduce verbosity\n</code></pre>"},{"location":"architecture/video/emerald4k_rx_scaling/","title":"Emerald 4K Receiver Scaling","text":"<p>Emerald4K Receivers supports hardware resolution upscaling on all data paths. This document describes the first implementation of scaling which only supports the optimized datapath. Due to limitations of the IP not all resolutions are supported by upscaling, see the table below for latest supported configs. The maximum supported output resolution of the scaler is 4096x2160@60Hz.</p>"},{"location":"architecture/video/emerald4k_rx_scaling/#scaler-ip-and-configuration","title":"Scaler IP and Configuration","text":"<p>The scaler implementation uses the Video Processing Subsystem IP from Xilinx. This IP is configured in the <code>DP_Emerald_Decoder</code> application which runs on RPU0 using the API provided by the Xilinx BSP. MD put link to RPU documentation here.</p>"},{"location":"architecture/video/emerald4k_rx_scaling/#fpga-hardware-overview","title":"FPGA Hardware Overview","text":"<p>The upscaling functionality is implemented using a group of blocks of IP\u2019s connected together in hardware to capture the actual DVI video, upscale it and regenerates a new DVI video. The below block diagram gives a detailed breakdown of the hardware. </p> <p></p> <p>Upscaling is the process of converting an input video with a given resolution to an output video with a larger resolution. It converts a specific rectangular area from original grid to a bigger rectangular area. The video upscaler runs in stream mode, it means that there is no frame buffer, the video is process \u201cas it comes\u201d from the 4k Decoder IP. The process latency is around 7 video lines (6 tap process).</p> <p>The design has two DVI timing generators and two video clocks, for input and output resolutions respectively. The output video will have a custom resolution calculated based in the input resolution multiplied by the scale factor that will be applied (it can be the opposite, external resolution fixed and internal custom).</p>"},{"location":"architecture/video/emerald4k_rx_scaling/#software-implementation-overview","title":"Software Implementation Overview","text":"<p>Info</p> <p>Though the hardware supports upscaling in both the Tile Differencing and YUV datapath the current implementation only uses the YUV path.</p>"},{"location":"architecture/video/emerald4k_tx_scaling/","title":"Emerald 4K Transmitter Scaling","text":"<p>Emerald4K currently supports hardware resolution scaling on the YUV data-path. The maximum supported resolution of the YUV data-path is 1920x1200 any input resolution over this will be scaled. Where possible the input resolution shall be scaled to a resolution with a similar aspect ratio.</p>"},{"location":"architecture/video/emerald4k_tx_scaling/#scaler-ip-and-configuration","title":"Scaler IP and Configuration","text":"<p>The scaler implementation uses the Video Processing Subsystem IP from Xilinx. This IP is configured in the <code>DP_Emerald_Encoder</code> application which runs on RPU0 using the API provided by the Xilinx BSP.</p>"},{"location":"architecture/video/emerald4k_tx_scaling/#fpga-hardware-overview","title":"FPGA Hardware Overview","text":"<p>To facilitate downscaling the Video Process IP block has been added after the Emerald Line Buffer IP with two scaler bypass muxs before each Encoder block (Tile Diff and YUV) as can be seen in the diagram below.</p> <p></p> <p>As the scaler is in parallel with the unscaled input path it can be fully configured after each resolution change with the relevant downscaled resolution without effecting the unscaled path. To facilitate scaling support the FPGA configuration now has the concept of an <code>external</code> and <code>internal</code> resolution, the <code>external</code> resolution is the input video received from the DisplayPort RX IP and the <code>internal</code> resolution can either be the unscaled or scaled resolution received by the Encoder blocks.</p>"},{"location":"architecture/video/emerald4k_tx_scaling/#software-implementation-overview","title":"Software Implementation Overview","text":"<p>Info</p> <p>Though the hardware supports scaling in both the Tile Differencing and YUV datapath the current implementation only uses the YUV path.</p>"},{"location":"architecture/video/emerald4k_tx_scaling/#configuration","title":"Configuration","text":""},{"location":"architecture/video/emerald4k_tx_scaling/#video-process-ip","title":"Video Process IP","text":"<p>Initialisation and configuration of the Video Process block is done using the Xilinx API provided through the BSP code in the <code>bb_scaler.c</code> module. As part of the configuration detailed video timing must be provided to the video process block for the output resolution, this timing defaults to <code>CVT-RB</code> and is calculated in the module <code>bb_modeline.c</code>.</p>"},{"location":"architecture/video/emerald4k_tx_scaling/#encoder-block-ip","title":"Encoder Block IP","text":"<p>Currently the maximum supported resolution of the YUV datapath is 1920x1200 60Hz hence if the video outputted by the DisplayPort RX IP is greater than this we can assume scaling must be enabled on the YUV path. Where possible the input aspect ratio shall be maintained, however some resolutions will not display well on HD panels e.g. 32:9, ~21:9. These shall be scaled to 1920x1080. The below table maps the most common aspect ratios to the scaler output resolution and aspect ratios, common resolutions with an already covered Input aspect ratio have been omitted from the table for brevity.</p>"},{"location":"architecture/video/emerald4k_tx_scaling/#input-to-output-resolution-table","title":"Input to Output Resolution Table","text":"Input Resolution Input Aspect Ratio Scaled Output Output Aspect Ratio 4096x2160 ~17:9 1920x1080 16:9 3840x2160 16:9 1920x1080 16:9 3840x1600 21:9 1920x1080 16:9 3840x1080 32:9 1920x1080 16:9 2560x1600 8:5 1680x1050 8\u22365 2560x1440 16:9 1920x1080 16:9 2560x2048 5:4 1280x1024 5:4 2048x2048 1:1 1080x1080 1:1 2048x1536 4:3 1600x1200 4:3"},{"location":"architecture/video/emerald4k_tx_scaling/#user-space-configuration","title":"User Space Configuration","text":""},{"location":"architecture/video/emerald4k_tx_scaling/#capture-layer","title":"Capture-Layer","text":"<p>Scaling configuration information has been added to the APU/RPU Shared memory space at the following positions.</p> Memory Offset Data Units Data Type <code>0x5EC0_000C</code> Scaled Width Pixels uint16_t <code>0x5EC0_000E</code> Scaled Height Pixels uint16_t <code>0x5EC0_0010</code> Scaled Refresh Rate Hertz uint16_t <code>0x5EC0_0012</code> Scaler Enabled bool bool <p>The <code>Capture-Layer</code> API has been updated to provide a method to read these values. </p>"},{"location":"architecture/video/emerald4k_tx_scaling/#server-emerald","title":"Server Emerald","text":"<p>When performing resolution detection the scaled resolution details must also be read and maintained in <code>hardware_manager</code>. When configuring the YUV FPGA block the scaled resolution values must be used if the Scaler Enabled bit is set. At the point of YUV block configuration if the Scaler Enabled bit is set then the YUV scaler MUX bit (0xDFA1 Bit[0]) is automatically enabled in capture-layer.</p> <p>As the connection resolution could be either the input/unscaled resolution or the scaled resolution depending on connection type a check is needed in the connection manager state machine once the connection compression type has been determined. The below sequence diagram shows when this check occurs</p> sequenceDiagram     participant TX Connection Manager State Machine     participant TX Connection Manager     participant RDP Client      RDP Client-&gt;&gt;TX Connection Manager: cm_new_client()     TX Connection Manager-&gt;&gt;TX Connection Manager: connection_manager_handle_server_peer_ready()     TX Connection Manager-&gt;+TX Connection Manager State Machine: connection_manager_state_machine     Note left of TX Connection Manager State Machine:If EMD4K Server and connection type is OPTIMISED then use scaled resolution     TX Connection Manager State Machine-&gt;-TX Connection Manager: okay"},{"location":"automation/OSD_messages/","title":"OSD Messages","text":"<p>GUI messages to user. </p> <p>MAINWINDOW.CPP </p> <p>Location: FreeRDP Errors on returning to GUI (Main window-&gt;Connections) </p> <p>Action: NON </p> <p>Causes: Error code 7 </p> <p>Message heading: Unable To Connect To Target </p> <p>Message text: \u201cServer\u201d is in use by User \u201cClient*\u201d. Unable to connect.1 </p> <p>Location: FreeRDP Errors on returning to GUI (Main window-&gt;Connections) </p> <p>Action: NON </p> <p>Causes: Error code 132 or 138. We can't connect to server becouse Server is not online or is powered off. If local Ethernet is gone the following message will apear: </p> <p>Message heading: Lost Connection </p> <p>Message text: Lost connection to \"Server\" due to connection problem. Please confirm local Ethernet connection. </p> <p>If network is up then following message will apear: </p> <p>Message heading: Lost Connection </p> <p>Message text: Lost connection to \"Server\". Please confirm \"Server\" is powered up and connected to the network. </p> <p>Location: FreeRDP Errors on returning to GUI (Main window-&gt;Connections) </p> <p>Action: NON </p> <p>Causes: Error code 131 </p> <p>Message heading: Unable To Connect To Target </p> <p>Message text: Unable to connect to \"Server\". Please confirm \"Server\" is powered up and connected to the network. </p> <p>Location: FreeRDP Errors on returning to GUI (Main window-&gt;Connections) </p> <p>Action: NON </p> <p>Causes: All other Error codes </p> <p>Message heading: Unable To Connect To Target </p> <p>Message text: Unable to connect to \"Server\". Exit code XXX***. </p> <p>Location: Main window-&gt;Connections </p> <p>Action: User click New Button </p> <p>Causes: Message pop up in the case when 32 connections already defined </p> <p>Message heading:  Information </p> <p>Message text: The maximum number of connections is limited to 32. Remove any connection before adding new connection. </p> <p>Location: GUI Initialization </p> <p>Action: NON </p> <p>Causes: Screen changed and selected screen resolution is not listed in EDID table </p> <p>Message heading:  Error </p> <p>Message text: Preferred Screen Resolution not supported </p> <p>Location: Main window-&gt;Network-&gt;Static IP </p> <p>Action: User click Apply Button </p> <p>Causes:  Network Mask field left empty or is set to 0.0.0.0 </p> <p>Message heading: Network Mask Validation </p> <p>Message text: Network Mask is out of valid range.  </p> <p>Location: Main window-&gt;Network-&gt;Static IP </p> <p>Action: User click Apply Button  </p> <p>Causes: Any of IP Address octets is out of range 0:255 </p> <p>Message heading: IP Address Validation </p> <p>Message text:IP address is out of valid range. </p> <p>Location: Main window-&gt;Network-&gt;Static IP </p> <p>Action: User click Apply Button  </p> <p>Causes: Any of Network Mask octets is out of range 0:255 </p> <p>Message heading:  Network Mask Validation </p> <p>Message text: Network Mask is out of valid range. </p> <p>Location: Main window-&gt;Network-&gt;Static IP </p> <p>Action: User click Apply Button  </p> <p>Causes: Any of Default Gateway octets is out of range 0:255 </p> <p>Message heading:   Gateway Validation </p> <p>Message text: Default Gateway is out of valid range. </p> <p>Location: Main window-&gt;Network </p> <p>Action: User change network configurations and click Apply Button  </p> <p>Causes: Informative message before system reboot </p> <p>Message heading: Information </p> <p>Message text: Network configuration changed. The system will reboot now. </p> <p>Location:  Main window-&gt;Connections </p> <p>Action: User click Connect Button  </p> <p>Causes: No connections in the list  </p> <p>Message heading: Information </p> <p>Message text: Create new connection and data to perform connection. </p> <p>NOTE: This message is now obsolete as if no connections in the list Connect button is disabled. </p> <p>Location:  Main window-&gt;Connections </p> <p>Action: User click Connect Button  </p> <p>Causes: No connection selected in the list </p> <p>Message heading: Information </p> <p>Message text: No connection specified. </p> <p>Location: Main window-&gt;Connections </p> <p>Action:  User click Connect Button </p> <p>Causes: Network is down. </p> <p>Message heading: Network Status </p> <p>Message text:Connection failed. Local Network is down. </p> <p>Location: Main window-&gt;Connections </p> <p>Action: User click Connect Button </p> <p>Causes: Network is up, unit configured for DHCP, but IP address is not issued. </p> <p>Message heading: Network Status </p> <p>Message text: Connection failed. DHCP server was not found. </p> <p>Location: Main window-&gt;Users </p> <p>Action: User click Add Button </p> <p>Causes: Message pop up in the case when 32 users already defined </p> <p>Message heading: Information </p> <p>Message text: User Limit is reached. </p> <p>Location: Main window-&gt;Users </p> <p>Action: User click Remove Button </p> <p>Causes: Message pop up in the case when admin is selected in the list </p> <p>Message heading: Information </p> <p>Message text: User admin is protected and can not be removed. </p> <p>Location: Main window-&gt;Users </p> <p>Action: User click Add Button </p> <p>Causes: User click Remove Button when currently logged user is selected in the list </p> <p>Message heading: Information </p> <p>Message text: User \"current user name\" is currently logged in and can not be removed. </p> <p>Location: Main window-&gt;Control-&gt;System </p> <p>Action: User click Upgrade Button </p> <p>Causes: Cannot open /proc/mounts </p> <p>Message heading: Error </p> <p>Message text: Upgrade failed. Cannot open USB memory device. The upgrade can't proceed. </p> <p>Location: Main window-&gt;Control-&gt;System </p> <p>Action: User click Upgrade Button </p> <p>Causes: USB is not found </p> <p>Message heading:  Error </p> <p>Message text: Upgrade failed. Cannot read USB memory device.Thehe upgrade can't proceed. </p> <p>Location: Main window-&gt;Control-&gt;System </p> <p>Action: User click Upgrade Button </p> <p>Causes: When user selects file for upgrade with extension other then .clu or .run </p> <p>Message heading: Error </p> <p>Message text: Specified File type is not compatible. </p> <p>NOTE: This is obsolete now as user can not see the files with other extensions for upgrade. </p> <p>Location: Main window-&gt;Control-&gt;System </p> <p>Action: User click Upgrade Button </p> <p>Causes:  File extraction failed </p> <p>Message heading:  Error </p> <p>Message text: File extraction failed.Theupgrade can't proceed. </p> <p>Location: Main window-&gt;Control-&gt;System </p> <p>Action: User click Upgrade Button </p> <p>Causes:  For some reason RELEASE* dir is not found </p> <p>Message heading: Error </p> <p>Message text: Upgrade failed. RELEASE* dir is not found, so the upgrade can't proceed. </p> <p>Location: Main window-&gt;Control-&gt;System </p> <p>Action: User click Upgrade Button </p> <p>Causes:  Multiple RELEASE Directories found on USB </p> <p>Message heading: Error </p> <p>Message text: Upgrade failed. Your memory stick has multiple RELEASE Directories..., so the upgrade can't proceed. </p> <p>NOTE: Obsolete as now we are providing the choice of files available for upgrade and user select one of them. </p> <p>Location: Main window-&gt;Control-&gt;System </p> <p>Action: User click Upgrade Button </p> <p>Causes:  Upgrade version is less then 1.3.1 </p> <p>Message heading: Error </p> <p>Message text: Upgrade failed. The Version you are upgrading to is too OLD - You can only upgrade to version 1.3.1 or Newer via the GUI... </p> <p>Location: Main window-&gt;Control-&gt;System </p> <p>Action: User click Upgrade Button </p> <p>Causes: One of the following errors is detected; </p> <p>MISSING_FILE_ERROR                              1 </p> <p>BAD_CHECKSUM_ERROR                              2 </p> <p>ERASE_BOOTSTRAP_ERROR                           3 </p> <p>WRITE_BOOTSTRAP_ERROR                           4 </p> <p>ERASE_BOOTLOADER_ERROR                          5 </p> <p>WRITE_BOOTLOADER_ERROR                          6 </p> <p>ERASE_WORKING_IMAGE_ERROR                       7 </p> <p>WRITE_WORKING_IMAGE_ERROR                       8 </p> <p>ERASE_SAFE_IMAGE_ERROR                          9 </p> <p>WRITE_SAFE_IMAGE_ERROR                          10 </p> <p>ERASE_FPGA1_ERROR                               11 </p> <p>WRITE_FPGA1_ERROR                               12 </p> <p>ERASE_FPGA2_ERROR                               13 </p> <p>WRITE_FPGA2_ERROR                               14 </p> <p>ERASE_SAFE_LOGO_ERROR                           15 </p> <p>WRITE_SAFE_LOGO_ERROR                           16 </p> <p>ERASE_WORKING_LOGO_ERROR                        17 </p> <p>WRITE_WORKING_LOGO_ERROR                        18 </p> <p>ERASE_SAFE_CLIENT_ERROR                         19 </p> <p>WRITE_SAFE_CLIENT_ERROR                         20 </p> <p>ERASE_WORKING_CLIENT_ERROR                      21 </p> <p>WRITE_WORKING_CLIENT_ERROR                      22 </p> <p>PREPARE_FILESYSTEM_ERROR                        23 </p> <p>ERASE_FILESYSTEM_ERROR                          24 </p> <p>WRITE_FILESYSTEM_ERROR                          25 </p> <p>ERASE_RESERVED_ERROR                            26 </p> <p>DUMP_ENVIRONMENT_ERROR                          27 </p> <p>COPY_ENVIRONMENT_ERROR                          28 </p> <p>UPGRADE_NEW_PART_ERROR                          29 </p> <p>MULTIPLE_RELEASE_DIRE_ERROR              126 </p> <p>CANNOT_FIND_UPGRADE_SCRIPT_ERROR         127 </p> <p>Message heading: Error </p> <p>Message text: Upgrade failed. Error X. </p> <p>NOTE: X represents the value of error as integer. </p> <p>Location: Main window-&gt;Control-&gt;System </p> <p>Action: User click Upgrade Button </p> <p>Causes: Unknown error is detected; </p> <p>Message heading: Error </p> <p>Message text: Upgrade failed. Unknown Error ... </p> <p>Location: GUI Initialization Read Screen Resolution </p> <p>Action: NON </p> <p>Causes: tfp410_port_t error </p> <p>Message heading: Error </p> <p>Message text:  Error retrieving monitor's EDID </p> <p>Location: GUI Initialization Read Screen Resolution </p> <p>Action: NON </p> <p>Causes:  Monitor's EDID is not supported </p> <p>Message heading: Error </p> <p>Message text: Attached monitor's EDID \u201cedid_version and edid_revision\" is not supported. </p> <p>Location: GUI Initialization Read Screen Resolution </p> <p>Action: NON  </p> <p>Causes: Selected Resolution is not in EDID list </p> <p>Message heading: Error </p> <p>Message text: Error retrieving preferred resolution from EDID </p> <p>Location: GUI Initialization Read Screen Resolution </p> <p>Action: NON  </p> <p>Causes: Selected Resolution is not in the available screen resolution list  </p> <p>Message heading: Error </p> <p>Message text: Preferred display resolution \"pref_res\" is not supported. </p> <p>Location: GUI Initialization Read Screen Resolution </p> <p>Action: NON  </p> <p>Causes: There is no common resolutions in cloudium supported list and EDID table </p> <p>Message heading: Critical Error </p> <p>Message text: Attached monitor is not supported. Please replace and try again. </p> <p>Location: All Read or write of database file. Function currentFileCheck() </p> <p>Action: NON </p> <p>Causes: Files \"/mnt/perm/CloudDataA.xml\" or \"/mnt/perm/CloudDataB.xml\" does not exist. </p> <p>Message heading: Error </p> <p>Message text: Fatal error. Restore to factory default database files. Please contact Administrator. </p> <p>Location: All Read or write of database file. Function currentFileCheck() </p> <p>Action: NON </p> <p>Causes: Can not create or write /mnt/perm/CloudDataB.xml </p> <p>Message heading:  WARNING </p> <p>Message text:Can not create database backup file. </p> <p>Location: All Read or write of database file. Function currentFileCheck() </p> <p>Action: NON </p> <p>Causes: Can not create or write /mnt/perm/CloudDataA.xml </p> <p>Message heading:  WARNING </p> <p>Message text: Can not create main database file. </p> <p>Location: Main window-&gt;Control-&gt;System </p> <p>Action: User click Restore Button </p> <p>Causes: Before restore will take place user have to confirm or deny this action by clicking one of the Buttons Yes or Cancel </p> <p>Message heading: Restore </p> <p>Message text: Restore to factory default settings. Please confirm. </p> <p>Location: Main window-&gt;Control-&gt;System </p> <p>Action: User click Restore Button </p> <p>Causes: After restore completed  </p> <p>Message heading: Restore </p> <p>Message text:Device will Reboot now. </p> <p>Location: Main window-&gt;Control-&gt;System </p> <p>Action: User click Import Button </p> <p>Causes: In the case if import file with same name already exist on USB user have to confirm or deny this action by clicking one of the Buttons Yes or No </p> <p>Message heading: Import </p> <p>Message text:Settings file already exist. Are you sure you want to overwrite the existing settings? </p> <p>Location: Main window-&gt;Control-&gt;System </p> <p>Action: User click Import Button </p> <p>Causes: Cannot open /proc/mounts </p> <p>Message heading: Error </p> <p>Message text: Import failed. Cannot open USB memory device.The Import can't proceed. </p> <p>Location: Main window-&gt;Control-&gt;System </p> <p>Action: User click Import Button </p> <p>Causes:  USB not found </p> <p>Message heading:  Error </p> <p>Message text:Import failed. USB memory device not found. </p> <p>Location: Main window-&gt;Control-&gt;System </p> <p>Action: User click Import Button </p> <p>Causes: Cannot change directory mnt/usb </p> <p>Message heading: Error </p> <p>Message text: Cannot find USB device. </p> <p>Location: Main window-&gt;Control-&gt;System </p> <p>Action: User click Import Button </p> <p>Causes: Selected file does not have extension *.ccfg </p> <p>Message heading: Error </p> <p>Message text: Specified File type is not compatible. </p> <p>NOTE: This is obsolete now as user can not see the files with other extensions. </p> <p>Location: Main window-&gt;Control-&gt;System </p> <p>Action: User click Import Button </p> <p>Causes: Cannot open directory mnt/perm </p> <p>Message heading: Error </p> <p>Message text: Cannot open target directory. </p> <p>Location: Main window-&gt;Control-&gt;System </p> <p>Action: User click Import Button </p> <p>Causes: After File import completed open this file. If file is not opened this message is pop up and Restore to factory default is called. </p> <p>Message heading: Error </p> <p>Message text: Error during file Import occurred. Return to factory default. </p> <p>Location: Main window-&gt;Control-&gt;System </p> <p>Action: User click Import Button </p> <p>Causes: If import successfully completed. </p> <p>Message heading:  Information </p> <p>Message text: Configuration settings successfully imported. The system will reboot now. </p> <p>Location: Main window-&gt;Control-&gt;System </p> <p>Action: User click Import Button </p> <p>Causes: If import successfully completed and interfaces file was modified </p> <p>Message heading:  Information </p> <p>Message text: Configuration settings successfully imported. The system will reboot now. </p> <p>Location: Main window-&gt;Control-&gt;System </p> <p>Action: User click Import Button </p> <p>Causes: If import successfully completed and interfaces file was not modified </p> <p>Message heading:  Information </p> <p>Message text: Import successfully completed. </p> <p>Location: Main window-&gt;Control-&gt;System </p> <p>Action: User click Export Button </p> <p>Causes:  Cannot open /proc/mounts </p> <p>Message heading: Error </p> <p>Message text: Export failed. Cannot open USB memory device The configuration settings export can't proceed. </p> <p>Location: Main window-&gt;Control-&gt;System </p> <p>Action: User click Export Button </p> <p>Causes: Settings file already exist. User need to confirm or deny file overwrite  by clicking Yes or No Button </p> <p>Message heading: Export File </p> <p>Message text: Configuration file with same name already exists. Are you sure you want to overwrite the existing file? </p> <p>Location: Main window-&gt;Control-&gt;System </p> <p>Action: User click Export Button </p> <p>Causes: USB not found </p> <p>Message heading: Error </p> <p>Message text: Export failed. USB memory device not found. </p> <p>Location: Main window-&gt;Control-&gt;System </p> <p>Action: User click Export Button </p> <p>Causes: Can not change directory to mnt/perm </p> <p>Message heading: Error </p> <p>Message text: Export failed. Cannot open target directory.. </p> <p>Location: Main window-&gt;Control-&gt;System </p> <p>Action: User click Export Button </p> <p>Causes: Checksum is not corresponding </p> <p>Message heading: Error </p> <p>Message text: configuration file  has an error. Configuration export is aborted. </p> <p>Location: Main window-&gt;Control-&gt;System </p> <p>Action: User click Export Button </p> <p>Causes: No settings file can be found on /mnt/perm/ (CloudDataB.xml or  CloudDataA.xml </p> <p>Message heading: Error </p> <p>Message text: Export failed. Local Configuration file is not found. </p> <p>Location: Main window-&gt;Control-&gt;System </p> <p>Action: User click Export Button </p> <p>Causes: //mnt/usb can not be opened </p> <p>Message heading: Error </p> <p>Message text: Export failed. Cannot open target directory. </p> <p>Location: Main window-&gt;Control-&gt;System </p> <p>Action: User click Export Button </p> <p>Causes:  Can't create /usr/local/CloudDataA.ccfg on USB </p> <p>Message heading: Error </p> <p>Message text: Can't create configuration file on target device. </p> <p>Location: Main window-&gt;Control-&gt;System </p> <p>Action: User click Export Button </p> <p>Causes: Export successfully completed </p> <p>Message heading: Information </p> <p>Message text: Configuration export successfully completed. </p> <p>Location: Main window-&gt;Control-&gt;System </p> <p>Action: User click Export Button </p> <p>Causes: /mnt/usb/CloudDataA.ccfg does not exist </p> <p>Message heading: Error </p> <p>Message text: Configuration Export failed. Unknown error. </p> <p>Location: Main window-&gt;Control-&gt;System </p> <p>Action: User changes GUI Resolution and hit Apply Button </p> <p>Causes: GUI Resolution changes </p> <p>Message heading: GUI Resolution </p> <p>Message text: GUI Resolution has changed. The GUI will reload now. </p> <p>Location: Main window-&gt;Connections </p> <p>Action: User click Remove Button </p> <p>Causes: User have to confirm that selected connection has to be removed by selecting Yes or Cancel </p> <p>Message heading: Remove connection </p> <p>Message text: Do you want to remove connection \u201cconnection name\u201d? </p> <p>Location: Main window-&gt;Users </p> <p>Action: User click Remove Button </p> <p>Causes: User have to confirm tha selected user has to be removed by selecting Yes or Cancel </p> <p>Message heading: Remove User </p> <p>Message text: Do you want to remove user\u201cuser name\u201d? </p> <p>Location: Main window-&gt;Control-&gt;System </p> <p>Action: User click Upgrade Button </p> <p>Causes: User has to confirm that upgrade file selected is correct by clicking Yes or No before file extraction </p> <p>Message heading: Confirm Upgrade </p> <p>Message text: Found update file \u201cfile name\u201d in \u201cfile path\u201d. Do you wish to proceed? </p> <p>Location: Main window-&gt;Control-&gt;System </p> <p>Action: User click Upgrade Button </p> <p>Causes:  User have to confirm that upgrade can proceed by clicking Yes or Cancel after file extraction </p> <p>Message heading: Download starting ... </p> <p>Message text: Do not power off the system until upgrade has completed and the system has rebooted... Hit OK to start the Upgrade... </p> <p>Location: Main window-&gt;Power menu </p> <p>Action: User select  Shut Down option in power menu </p> <p>Causes:  User have to confirm system Shut Down by clicking Yes or No </p> <p>Message heading: Shut Down </p> <p>Message text: Are you sure you want to Shut Down the system?  NOTE: This option is currently disabled </p> <p>Location: Main window-&gt;Power menu </p> <p>Action: User select Reboot option in power menu </p> <p>Causes:  User have to confirm system Reboot by clicking Yes or No </p> <p>Message heading:  Reboot </p> <p>Message text: Are you sure you want to reboot the system? </p> <p>Location: Main window-&gt;Control-&gt;Transmitter Button clicked (new window pop up) -&gt;System Button clicked </p> <p>Action: User hit Upgrade Button </p> <p>Causes: Transmitter Upgrade successful </p> <p>Message heading: Transmitter Upgrade  Message text: Transmitter Upgrade was successful. </p> <p>Location: Main window-&gt;Control-&gt;Transmitter Button clicked (new window pop up) -&gt;System Button clicked </p> <p>Action: User hit Upgrade Button </p> <p>Causes: Transmitter Upgrade failed. X represent one of error codes listed above </p> <p>Message heading: Transmitter Upgrade  Message text: Transmitter Upgrade failed. </p> <p>CHANGEPASSWORD.CPP </p> <p>Location: Main window-&gt;Control-&gt;Password Button clicked (new window pop up) </p> <p>Action: User hit Save Button </p> <p>Causes:  User type wrong password in the Confirm Your Password field </p> <p>Message heading: Information </p> <p>Message text:  Your password is incorrect. Please reenter. </p> <p>Location: Main window-&gt;Control-&gt;Password Button clicked (new window pop up) </p> <p>Action: User hit Save Button </p> <p>Causes:  User type different password in the field New Password and Confirm New Password </p> <p>Message heading: Information </p> <p>Message text:  New password does not match </p> <p>EDITCONNECTION.CPP </p> <p>Location: Main window-&gt;Connections-&gt;Edit Button clicked (new window pop up) </p> <p>Action: User hit Save Button </p> <p>Causes:  Name field left blank </p> <p>Message heading: Information </p> <p>Message text: No name entered. </p> <p>Location: Main window-&gt;Connections-&gt;Edit Button clicked (new window pop up) </p> <p>Action: User hit Save Button </p> <p>Causes:  IP Address field left blank  </p> <p>Message heading: Information </p> <p>Message text: No IP address entered. </p> <p>Location: Main window-&gt;Connections-&gt;Edit Button clicked (new window pop up) </p> <p>Action: User hit Save Button </p> <p>Causes:  User specify connection name which already exist </p> <p>Message heading: Information </p> <p>Message text: Connection name already exists. </p> <p>Location: Main window-&gt;Connections-&gt;Edit Button clicked (new window pop up) </p> <p>Action: User hit Save Button </p> <p>Causes:  User specify User Name which contain one or more of restricted characters </p> <p>Message heading:  WARNING </p> <p>Message text:User Invalid character included in name. Invalid characters are: </p> <p>\u201c ' /  [ ] : ; | = , + * ? &lt; &gt; ` </p> <p>Location: Main window-&gt;Connections-&gt;Edit Button clicked (new window pop up) </p> <p>Action: User hit Save Button </p> <p>Causes:  User specify Password which contain one or more of restricted characters </p> <p>Message heading:  WARNING </p> <p>Message text: Invalid character included in password. . Invalid characters are:  \u201c ' ` </p> <p>EDITUDATA.CPP </p> <p>Location: Main window-&gt;Users-&gt;Edit Button clicked (new window pop up) </p> <p>Action: User hit Save Button </p> <p>Causes: User Name field left blank </p> <p>Message heading: Information </p> <p>Message text: No User name entered. </p> <p>Location: Main window-&gt;Users-&gt;Edit Button clicked (new window pop up) </p> <p>Action: User hit Save Button </p> <p>Causes:  User specify User Name which already exist </p> <p>Message heading: Information </p> <p>Message text: User name already exist. </p> <p>LOGINDIALOG.CPP </p> <p>Location: Logon  </p> <p>Action: User hit Log On Button </p> <p>Causes:  User specify User Name which does not exist in database or Password does not match specified user password </p> <p>Message heading:  Log On Data Incorrect </p> <p>Message text: Incorrect User Name or Password entered. </p> <p>NOTE: Action performed in NORMAL MODE </p> <p>Location: Logon  </p> <p>Action: User hit Log On Button </p> <p>Causes:  User specify User Name exist in database and Password is correct, but user does not have Administrator privilege </p> <p>Message heading:   WARNING: SAFE MODE </p> <p>Message text: Only Administrator may Log In in SAFE MODE. </p> <p>NOTE: Action performed in SAFE MODE </p> <p>Location: Logon  </p> <p>Action: User hit Log On Button </p> <p>Causes:  User specify User Name which does not exist in database or Password does not match specified user password  </p> <p>Message heading:   WARNING: SAFE MODE </p> <p>Message text: User Name or Password entered is incorrect. </p> <p>NOTE: Action performed in SAFE MODE </p> <p>Location: Logon </p> <p>Action: User hit Help Button (new window popup) </p> <p>Causes:  NON  </p> <p>Message heading: Help </p> <p>Message text:  Please visit www.blackbox.com </p> <p>NOTE: Unit model starts with 300-01 </p> <p>Location: Logon </p> <p>Action: User hit Help Button (new window popup) </p> <p>Causes:  NON  </p> <p>Message heading: Help </p> <p>Message text:   Please visit www.cloudiumsystems.com </p> <p>NOTE: Unit model starts with 300-02 </p> <p>Location: Logon </p> <p>Action: User hit Help Button (new window popup) </p> <p>Causes:  NON  </p> <p>Message heading: Help </p> <p>Message text:    </p> <p>NOTE: Unit model does not starts with 300-01 or 300-02 </p> <p>Location: Logon </p> <p>Action: User hit Help Button (new window popup) </p> <p>Causes:  User specify User Name which is defined as AD user and Password is correct or incorrect </p> <p>Message heading: \"Authentication\"  Message text: \"Internal error. Error code X </p> <p>NOTE: This error occurs if there is the problem on appliance side which might be one of following:  Boxilla IP address not found;  RX MAC address not found. </p> <p>Location: Logon </p> <p>Action: User hit Help Button (new window popup) </p> <p>Causes:  User specify User Name which is defined as AD user and Password is correct or incorrect  Header: \"Authentication\"  Message text: \u201cBoxilla\u202fcan\u2019t\u202fbe contacted \u2013 Check Boxilla Configuration\u201d  NOTE: This error occurs if there is the problem communicating with Boxilla. </p> <p>Location: Logon </p> <p>Action: User hit Help Button (new window popup) </p> <p>Causes:  User specify User Name which is defined as AD user and Password is correct or incorrect  Header: \"Authentication\"\u202f  Message text: \"Authentication error. Error code X.\" NOTE: This error occurs if umknown error code received from REST API. This should never happen unless REST API code modified and GUI code is not changed. </p> <p>Location: Logon </p> <p>Action: User hit Help Button (new window popup) </p> <p>Causes:  User specify User Name which is defined as AD user and Password is incorrect  Header: \"Authentication\"  Message text: \"Authentication failed. Please try again.\"  </p> <p>Location: Logon </p> <p>Action: User hit Help Button (new window popup) </p> <p>Causes:  User specify User Name which is defined as AD user and Password is correct or incorrect  Header: \"Authentication Timeout\"  Message text: \" System busy \u2013 Please try again\u201d  NOTE: This error occurs if there was no authentication reply received from Boxilla within 30 sec.\u202f </p> <p>NEWCONNECTION.CPP </p> <p>Location: Main window-&gt;Connections-&gt;New Button clicked (new window pop up) </p> <p>Action: User hit Save Button </p> <p>Causes:  Name field left blank </p> <p>Message heading: Information </p> <p>Message text: No Connection Name entered. </p> <p>Location: Main window-&gt;Connections-&gt;New Button clicked (new window pop up) </p> <p>Action: User hit Save Button </p> <p>Causes:  IP Address field left blank  </p> <p>Message heading: Information </p> <p>Message text: No IP address field entered </p> <p>Location: Main window-&gt;Connections-&gt;New Button clicked (new window pop up) </p> <p>Action: User hit Save Button </p> <p>Causes:  User specify connection name which already exist </p> <p>Message heading: Information </p> <p>Message text: Same connection name already exists. </p> <p>Location: Main window-&gt;Connections-&gt;New Button clicked (new window pop up) </p> <p>Action: User hit Save Button </p> <p>Causes:  User specify User Name which contain one or more of restricted characters </p> <p>Message heading:  WARNING </p> <p>Message text:User Name contains invalid characters. Invalid characters are: </p> <p>\u201c ' /  [ ] : ; | = , + * ? &lt; &gt; ` </p> <p>Location: Main window-&gt;Connections-&gt;New Button clicked (new window pop up) </p> <p>Action: User hit Save Button </p> <p>Causes:  User specify Password which contain one or more of restricted characters </p> <p>Message heading:  WARNING </p> <p>Message text: Password can't contain certain characters. Invalid characters are:  \u201c ' ` </p> <p>SSH2_CLOUDIUM.C </p> <p>Location: Main window-&gt;Control-&gt;Transmitter Button clicked (new window pop up) -&gt;Network Button clicked  </p> <p>Action: User hit Apply Button </p> <p>Causes:  NON </p> <p>Message heading: Network Settings </p> <p>Message text: Your settings will be applied. This may take up to 2 minutes. </p> <p>Location: Main window-&gt;Control-&gt;Transmitter Button clicked (new window pop up) -&gt;Network Button clicked  </p> <p>Action: User hit Apply Button </p> <p>Causes:  NON function SetTXUnitNetworkSettings </p> <p>Progress Dialog heading: Network Settings </p> <p>Message text: Attempting to connect to Transmitter Unit... </p> <p>Message text:Connection success. confirming that device is a Transmitter... </p> <p>Message text:Device is confirmed to be a Transmitter. Network configurations will be changed now. </p> <p>Message text:Attempting reconnection to Transmitter Unit. </p> <p>Message text:Network configuration change was successful. Transmitter rebooting. </p> <p>Message text:Transmitter is rebooting now. </p> <p>Message text:Reconnection to Transmitter Unit was successful. </p> <p>Location: Main window-&gt;Control-&gt;Transmitter Button clicked (new window pop up) -&gt;System Button clicked  </p> <p>Action: User hit Upgrade Button </p> <p>Causes: NON function UpgradeTxUnit </p> <p>Progress Dialog heading: Upgrade </p> <p>Message text: Attempting to connect to Transmitter Unit... </p> <p>Message text:Connection success. </p> <p>Message text: Checking current software version on the Transmitter </p> <p>Message text:Transferring Upgrade File. Please wait... </p> <p>Message text:File Transfer completed. Please wait... </p> <p>Message text:Upgrade process started. Please wait... </p> <p>Message text:Upgrade process completed. The Transmitter will reboot now. </p> <p>Message text:Attempting reconnection to Transmitter Unit in X sec  Message text:Attempting reconnection to Transmitter Unit. </p> <p>Message text:Connection to Transmitter Unit is successful. Checking Software version. </p> <p>Message text:Upgrade completed. </p> <p>Location: Main window-&gt;Control-&gt;Transmitter Button clicked (new window pop up) -&gt;System Button clicked  </p> <p>Action: User hit Information Button </p> <p>Causes: NON function GetTXUnitDeviceInfo </p> <p>Progress Dialog heading:  </p> <p>Message text: Getting Device Information... </p> <p>Message text: Attempting to connect to Transmitter Unit... </p> <p>Message text:Connection success. Confirming that device is a Transmitter. </p> <p>Message text: Connection success. </p> <p>Message text: Device information reading in progress... </p> <p>TXSETTINGS.CPP </p> <p>Location: Main window-&gt;Control-&gt;Transmitter Button clicked (new window pop up)  </p> <p>Action: User specify Transmitter IP Address and hit Apply Button </p> <p>Causes:  Any of IP Address octates is out of range 0:255 </p> <p>Message heading: Transmitter IP Validation </p> <p>Message text: Transmitter IP Address is not valid. </p> <p>Location: Main window-&gt;Control-&gt;Transmitter Button clicked (new window pop up)  </p> <p>Action: User hit Discover Button </p> <p>Causes:  NON Information provided on the actions necessary to perform for TX IP Address Discovery </p> <p>Message heading:  Information </p> <p>Message text: To find Transmitter IP Address,  perform the following actions:  1. Connect directly to Transmitter  </p> <ol> <li> <p>Power cycle Transmitter. </p> </li> <li> <p>Transmitter IP Address will be visible within 60 sec. </p> </li> </ol> <p>Location: Main window-&gt;Control-&gt;Transmitter Button clicked (new window pop up)  </p> <p>Action: User hit Discover Button </p> <p>Causes:  Any of listed below errors is returned. X represent error code </p> <p>Message heading:  Error </p> <p>Message text: Can not find Transmitteron network. Error X </p> <p>SSH_OK,1 </p> <p>SSH_GENERAL_ERROR,2 </p> <p>SSH_INIT_FAIL,3 </p> <p>SSH_GET_SOCKET_FAIL,4 </p> <p>SSH_CREATE_SESSION_FAIL,5 </p> <p>SSH_CONNECT_FAIL,6 </p> <p>SSH_TX_CHECK_FAIL,7 </p> <p>SSH_VER_CHECK_FAIL,8 </p> <p>SSH_LED_FLASH_FAIL,9 </p> <p>SSH_SCP_SEND_FAIL,10 </p> <p>SSH_PERMISSION_CHANGE_FAIL,11 </p> <p>SSH_EXTRACT_UPGRADE_FAIL,12 </p> <p>SSH_RUN_UPGRADE_FAIL,13 </p> <p>SSH_REBOOT_FAIL,14 </p> <p>SSH_FILE_SEARCH_FAIL,15 </p> <p>SSH_SOCKET_LISTEN_ERROR,16 </p> <p>SSH_SOCKET_OPTION_ERROR,17 </p> <p>SSH_SOCKET_BIND_ERROR,18 </p> <p>SSH_RECVFROM_ERROR19 </p> <p>Location: Main window-&gt;Control-&gt;Transmitter Button clicked (new window pop up) -&gt;Network Button clicked </p> <p>Action: User specifies Transmitter network settings and hit Apply Button </p> <p>Causes:  Network Mask left blank </p> <p>Message heading:  Network Mask Validation </p> <p>Message text: Network Mask is out of valid range.  </p> <p>Location: Main window-&gt;Control-&gt;Transmitter Button clicked (new window pop up) -&gt;Network Button clicked </p> <p>Action: User specifies Transmitter network settings and hit Apply Button </p> <p>Causes: Network Mask specified 0.0.0.0 </p> <p>Message heading:  Network Mask Validation </p> <p>Message text: Network Mask is out of valid range.  </p> <p>Location: Main window-&gt;Control-&gt;Transmitter Button clicked (new window pop up) -&gt;Network Button clicked </p> <p>Action: User specify Transmitter network settings and hit Apply Button </p> <p>Causes: Transmitter Network Settings successfully changed </p> <p>Message heading:   Transmitter Network </p> <p>Message text: Transmitter Network Settings changed successfully. </p> <p>Location: Main window-&gt;Control-&gt;Transmitter Button clicked (new window pop up) -&gt;Network Button clicked </p> <p>Action: User specify Transmitter network settings and hit Apply Button </p> <p>Causes: Transmitter Network Settings changes failed. X represent one of error codes listed above </p> <p>Message heading: Error </p> <p>Message text: Error X. Transmitter Network Settings change failed. </p> <p>Location: Main window-&gt;Control-&gt;Transmitter Button clicked (new window pop up) -&gt;System Button clicked </p> <p>Action: User hit Information Button </p> <p>Causes: NON Information provided </p> <p>Message heading:  Device Information </p> <p>Message text: The device with IP Address \u201ccurrentTXIP\u201d is reachable. </p> <p>Device Model: \"txModel\" </p> <p>Device Serial Number: \"txSerial\" </p> <p>Device MAC: \"txMAC\" </p> <p>Device Software Version: \"txSoftware\u201d </p> <p>Location: Main window-&gt;Control-&gt;Transmitter Button clicked (new window pop up) -&gt;System Button clicked </p> <p>Action: User hit Information Button </p> <p>Causes: Transmitter Information reading failed. X represent one of error codes listed above </p> <p>Message heading: Error  Message text: Error X. Unable to Acquire Device Information. </p> <p>Location: Main window-&gt;Control-&gt;Transmitter Button clicked (new window pop up) -&gt;System Button clicked </p> <p>Action: User hit Restore Button </p> <p>Causes: Transmitter Restore successful </p> <p>Message heading: Transmitter Restore  Message text: Transmitter Restore was successful. </p> <p>Location: Main window-&gt;Control-&gt;Transmitter Button clicked (new window pop up) -&gt;System Button clicked </p> <p>Action: User hit Restore Button </p> <p>Causes: Transmitter Restore failed. X represent one of error codes listed above </p> <p>Message heading: Error  Message text: Error X. Transmitter Restore failed. </p> <p>Location: Main window-&gt;Control-&gt;Transmitter Button clicked (new window pop up) -&gt;System Button clicked </p> <p>Action: User hit Reboot Button </p> <p>Causes: NON </p> <p>Message heading: Transmitter Reboot  Message text: Transmitter will reboot now. </p> <p>Location: Main window-&gt;Control-&gt;Transmitter Button clicked (new window pop up) -&gt;System Button clicked </p> <p>Action: User hit Reboot Button </p> <p>Causes: NON </p> <p>Message heading: Reboot  Message text: Transmitter Rebooted successfully. </p> <p>Location: Main window-&gt;Control-&gt;Transmitter Button clicked (new window pop up) -&gt;System Button clicked </p> <p>Action: User hit Reboot Button </p> <p>Causes: Transmitter Restore failed. X represent one of error codes listed above </p> <p>Message heading: Error  Message text: Error X. Transmitter Reboot failed. </p> <p>USERDATA.CPP </p> <p>Location: Main window-&gt;Users-&gt;Add Button clicked (new window pop up) </p> <p>Action: User hit Save Button </p> <p>Causes: User Name field left blank </p> <p>Message heading: Information </p> <p>Message text: No User Name entered.. </p> <p>Location: Main window-&gt;Users-&gt;Add Button clicked (new window pop up) </p> <p>Action: User hit Save Button </p> <p>Causes: User enter different text in Password and Confirm Password fields </p> <p>Message heading: Information </p> <p>Message text: Password does not match. </p> <p>Location: Main window-&gt;Users-&gt;Add Button clicked (new window pop up) </p> <p>Action: User hit Save Button </p> <p>Causes:  User specify User Name which already exist </p> <p>Message heading: Information </p> <p>Message text: User name already exists. </p> <p>ADDDEVICE.CPP </p> <p>Location: Main window-&gt;Devices-&gt;Expand Button clicked-&gt;Add Device Button clicked (new window pop up) </p> <p>Action: User hit Next Button </p> <p>Causes: Specify Device IP address field left blank </p> <p>Message heading: Error </p> <p>Message text: Device IP address is empty. </p> <p>Location: Main window-&gt;Devices-&gt;Expand Button clicked-&gt;Add Device Button clicked (new window pop up) </p> <p>Action: User hit Next Button </p> <p>Causes: Specify Device IP address field have an invalid IP address </p> <p>Message heading: IP Address Validation </p> <p>Message text: IP address is out of valid range. </p> <p>Location: Main window-&gt;Devices-&gt;Expand Button clicked-&gt;Add Device Button clicked (new window pop up) </p> <p>Action: User hit Next Button </p> <p>Causes: Specify Device IP address field have an IP address which is not reachable (remote device is offline)  </p> <p>Message heading: Error </p> <p>Message text: Device is not reachable. </p> <p>Location: Main window-&gt;Devices-&gt;Expand Button clicked-&gt;Add Device Button clicked (new window pop up) </p> <p>Action: User hit Next Button </p> <p>Causes: Device managed in another domain </p> <p>Message heading: Add New Device </p> <p>Message text: Restricted action. You do not have permission to reconfigure this device. It is part of another domain. </p> <p>Location: Main window-&gt;Devices-&gt;Expand Button clicked-&gt;Add Device Button clicked (new window pop up) </p> <p>Action: User hit Next Button </p> <p>Causes: Device is not recognized as TX or RX </p> <p>Message heading: Add New Device </p> <p>Message text: Access denied. The device you are trying to access is not Transmitter or Receiver. </p> <p>Location: Main window-&gt;Devices-&gt;Expand Button clicked-&gt;Add Device Button clicked (new window pop up) </p> <p>Action: User hit Next Button </p> <p>Causes: Device information read failed </p> <p>SSH_GENERAL_ERROR,          / 1 / </p> <p>SSH_INIT_FAIL,              / 2 / </p> <p>SSH_GET_SOCKET_FAIL,        / 3 / </p> <p>SSH_CREATE_SESSION_FAIL,    / 4 / </p> <p>SSH_CONNECT_FAIL,           / 5 / </p> <p>SSH_FILE_SEARCH_FAIL,       / 14 / </p> <p>SSH_GET_INFO_FAIL,          / 19 / </p> <p>SSH_COMMAND_EXECUTION_FAIL, / 30 / </p> <p>Message heading: Add New Device </p> <p>Message text: Error X getting device discovery information. </p> <p>Location: Main window-&gt;Devices-&gt;Expand Button clicked-&gt;Add Device Button clicked (new window pop up) </p> <p>Action: User hit Next Button </p> <p>Causes: Device is not Barrow/Corrib/Deel. (Device does not belong to InvisaPC family). </p> <p>Message heading: Add New Device </p> <p>Message text: Management of this device not supported. </p> <p>Location: Main window-&gt;Devices-&gt;Expand Button clicked-&gt;Add Device Button clicked (new window pop up, user specify valid reachable device IP address) -&gt;Next Button clicked </p> <p>Action: User hit Save Button </p> <p>Causes: Specify device name left empty. </p> <p>Message heading: Information </p> <p>Message text: No Device name entered. </p> <p>Location: Main window-&gt;Devices-&gt;Expand Button clicked-&gt;Add Device Button clicked (new window pop up, user specify valid reachable device IP address) -&gt;Next Button clicked </p> <p>Action: User hit Save Button </p> <p>Causes: Device with same MAC address found in database with different IP address </p> <p>Message heading: Information </p> <p>Message text: This device is already managed. </p> <p>Location: Main window-&gt;Devices-&gt;Expand Button clicked-&gt;Add Device Button clicked (new window pop up, user specify valid reachable device IP address) -&gt;Next Button clicked </p> <p>Action: User hit Save Button </p> <p>Causes: Device management failed for any of reasons listed below: </p> <p>SSH_GENERAL_ERROR,          / 1 / </p> <p>SSH_INIT_FAIL,              / 2 / </p> <p>SSH_GET_SOCKET_FAIL,        / 3 / </p> <p>SSH_CREATE_SESSION_FAIL,    / 4 / </p> <p>SSH_CONNECT_FAIL,           / 5 / </p> <p>SSH_SCP_SEND_FAIL,          / 9 / </p> <p>SSH_COMMAND_EXECUTION_FAIL, / 30 / </p> <p>Message heading: Error </p> <p>Message text: Error X. Device management failed.  </p> <p>Note: Error number instead of X will be presented in the message. </p> <p>Location: Main window-&gt;Devices-&gt;Expand Button clicked-&gt;Add Device Button clicked (new window pop up, user specify valid reachable device IP address) -&gt;Next Button clicked </p> <p>Action: User hit Save Button </p> <p>Causes: Device management success </p> <p>Message heading: Manage Device </p> <p>Message text: Device management successful. </p>"},{"location":"automation/appliance_automation_hooks/","title":"Appliance Hooks for Automation","text":"Purpose Script Output File Comments Used By Device Information like model, MPN, MAC etc /opt/blackbox/test/device_info.sh /usr/local/device_info.json Used by TechZilla Capture Layer Information, Head Resolutions etc capture_layer_cli -j stdout Used by TechZilla Display Layer Information, Supported Resolutions, Supported Monitors display_layer_cli -j stdout Used by TechZilla Video Information, FPS, Dropped Frames etc hardware_manager.c in /usr/bin/shfreerdp-server /tmp/video_stats_n.json One file per head, where n can be 0 or 1 Used by TechZilla TOE Information, Network Statistics for the TOE /usr/bin/statsmonitor /tmp/toe_stats_n.json One file per active channel Used by TechZilla Device Information Summary /opt/blackbox/test/device_info_summary.sh /tmp/device_info_summary.json Greats a super-set of all of the other information above Used by TechZilla Video Performance /opt/blackbox/test/device_info_summary.sh /tmp/device_info_summary.json Greats a super-set of all of the other information above Used by TechZilla json formating utility /opt/blackbox/format_stats.sh /tmp/video_stats_0.json_formatted usage:  /opt/blackbox/format_stats.sh /tmp/video_stats_0.json, (can also format toe stats) Test Cases to determine video performance Making Connection /home/developer/ApplianceAutomation/AutomationNodejs/TestCaseGenerator/test/connection_test_common.sh tmp/connect Calls in Make_Osd_Connection function in connection_test_common.sh Automation Connection launch EXIT_REASON_FILE /home/developer/ApplianceAutomation/AutomationNodejs/TestCaseGenerator/test/connection_test_common.sh tmp/exit_info.json Defines the exit reason on connection termination Automation Connection termination labels_enabled /home/developer/ApplianceAutomation/AutomationNodejs/TestCaseGenerator/test/connection_test_common.sh tmp/labels.json Target error /home/developer/ApplianceAutomation/AutomationNodejs/TestCaseGenerator/test/connection_test_common.sh tmp/target_errors.json Defines the target error on connection Automation Tests Error_summary /home/developer/ApplianceAutomation/AutomationNodejs/TestCaseGenerator/test/connection_test_common.sh tmp/error_summary.json Summarised the error on connection Automation Tests Target type /home/developer/ApplianceAutomation/AutomationNodejs/TestCaseGenerator/test/connection_test_common.sh tmp/su_exec.ssh.tmp calls in getTargetType function in connection_test_common.sh Automation Tests EXIT_CODE /home/developer/ApplianceAutomation/AutomationNodejs/TestCaseGenerator/test/connection_test_common.sh tmp/exit_code Identifies the exit code on connection termination Automation Connection termination EXIT_Message /home/developer/ApplianceAutomation/AutomationNodejs/TestCaseGenerator/test/connection_test_common.sh tmp/exit_message Defines the exit message on connection termination Automation Connection Termination Connection_termination /home/developer/ApplianceAutomation/AutomationNodejs/TestCaseGenerator/test/connection_test_common.sh tmp/rdpeusb calls in terminateClient function in connection_test_common Automation Connection Termination Connection_launch /home/developer/ApplianceAutomation/AutomationNodejs/TestCaseGenerator/test/connection_test_common.sh tmp/makerun_tmp calls in MakeVMconnection in connection_test_common Automation Connection launch"},{"location":"automation/appliance_automation_hooks/#in-list-form","title":"In List Form","text":"<ul> <li> <p>Device Information like model, MPN, MAC etc</p> <ul> <li>/opt/blackbox/test/device_info.sh  -  /usr/local/device_info.json</li> <li>Used by TechZilla   </li> </ul> </li> <li> <p>Capture Layer Information, Head Resolutions etc</p> <ul> <li>capture_layer_cli -j  -  stdout</li> <li>Used by TechZilla  </li> </ul> </li> <li> <p>Display Layer Information, Supported Resolutions, Supported Monitors </p> <ul> <li>display_layer_cli -j  -  stdout</li> <li>Used by TechZilla   </li> </ul> </li> <li> <p>Video Information, FPS, Dropped Frames etc</p> <ul> <li>hardware_manager.c in /usr/bin/shfreerdp-server</li> <li>/tmp/video_stats_n.json</li> <li>One file per head, where n can be 0 or 1</li> <li>Used by TechZilla   </li> <li></li> </ul> </li> <li> <p>TOE Information, Network Statistics for the TOE</p> <ul> <li>/usr/bin/statsmonitor</li> <li>/tmp/toe_stats_n.json</li> <li>One file per active channel</li> <li>Used by TechZilla   </li> </ul> </li> <li> <p>Device Information Summary </p> <ul> <li>/opt/blackbox/test/device_info_summary.sh</li> <li>/tmp/device_info_summary.json</li> <li>Greats a super-set of all the other information above</li> <li>Used by TechZilla   </li> </ul> </li> <li> <p>Video Performance  -  /opt/blackbox/test/device_info_summary.sh</p> <ul> <li>/tmp/device_info_summary.json</li> <li>Greats a super-set of all of the other information above</li> <li>Used by TechZilla   </li> <li>json formating utility</li> <li>/opt/blackbox/format_stats.sh</li> <li>/tmp/video_stats_0.json_formatted</li> <li>usage:  /opt/blackbox/format_stats.sh /tmp/video_stats_0.json, (can also format toe stats) </li> <li>Used by Test Cases to determine video performance</li> </ul> </li> <li> <p>Making Connection </p> </li> <li>/home/developer/ApplianceAutomation/AutomationNodejs/TestCaseGenerator/test/</li> <li>connection_test_common.sh  -  tmp/connect  -  Calls in Make_Osd_Connection function in connection_test_common.sh  -  Automation Connection launch  - </li> <li>EXIT_REASON_FILE -  /home/developer/ApplianceAutomation/AutomationNodejs/TestCaseGenerator/test/connection_test_common.sh  -  tmp/exit_info.json  -  Defines the exit reason on connection termination  -  Automation Connection termination  - </li> <li>labels_enabled  -  /home/developer/ApplianceAutomation/AutomationNodejs/TestCaseGenerator/test/connection_test_common.sh  -  tmp/labels.json    </li> <li>Target error -  /home/developer/ApplianceAutomation/AutomationNodejs/TestCaseGenerator/test/connection_test_common.sh  -  tmp/target_errors.json  -  Defines the target error on connection  -  Automation Tests  - </li> <li>Error_summary -  /home/developer/ApplianceAutomation/AutomationNodejs/TestCaseGenerator/test/connection_test_common.sh  -  tmp/error_summary.json  -  Summarised the error on connection  -  Automation Tests  - </li> <li>Target type -  /home/developer/ApplianceAutomation/AutomationNodejs/TestCaseGenerator/test/connection_test_common.sh  -  tmp/su_exec.ssh.tmp  -  calls in getTargetType function in connection_test_common.sh  -  Automation Tests  - </li> <li>EXIT_CODE -  /home/developer/ApplianceAutomation/AutomationNodejs/TestCaseGenerator/test/connection_test_common.sh  -  tmp/exit_code  -  Identifies the exit code on connection termination  -  Automation Connection termination  - </li> <li>EXIT_Message -  /home/developer/ApplianceAutomation/AutomationNodejs/TestCaseGenerator/test/connection_test_common.sh  -  tmp/exit_message -  Defines the exit message on connection termination  -  Automation Connection Termination  - </li> <li>Connection_termination -  /home/developer/ApplianceAutomation/AutomationNodejs/TestCaseGenerator/test/connection_test_common.sh  -  tmp/rdpeusb  -  calls in terminateClient function in connection_test_common  -  Automation Connection Termination  - </li> <li>Connection_launch -  /home/developer/ApplianceAutomation/AutomationNodejs/TestCaseGenerator/test/connection_test_common.sh  -  tmp/makerun_tmp -  calls in MakeVMconnection in connection_test_common  -  Automation Connection launch  - </li> </ul>"},{"location":"automation/audio/","title":"Audio Testing","text":""},{"location":"automation/audio/#notes","title":"Notes","text":"<p>cat /proc/aae/audio_egress/status/byte_cnt for TX</p> <p>cat /proc/aae/audio_ingress/status/byte_cnt for RX</p> <p></p>"},{"location":"automation/audio/#ingress","title":"Ingress","text":"<p><pre><code>source /opt/blackbox/test/debug_utilities.sh\n#set -x\n\nAAE_INGRESS_START_BUFFER_ADDR=0x6fff0000\n#AAE_INGRESS_START_BUFFER_ADDR=0x3fff0000 for 2K SE/PE\n#AAE_INGRESS_START_BUFFER_ADDR=0x1fff0000 for ZeroU\n#AAE_INGRESS_START_BUFFER_ADDR=0x1fff0000 for Corrib\n\nfor i in $(seq 1 1 128)\ndo\n        AUDIO_DATA=$(devmem $AAE_INGRESS_START_BUFFER_ADDR)\n                UpperAndLower16 $AUDIO_DATA\n                ConvertPCMToDecimal $UPPER_BYTE\n                LEFT=$PCM_VALUE\n                ConvertPCMToDecimal $LOWER_BYTE\n                RIGHT=$PCM_VALUE\n                printf \"Left Channel: %04X %d %d Right Channel: %04X %d %d \\n\" $((UPPER_BYTE)) $(($UPPER_BYTE))  $((LEFT)) $((LOWER_BYTE)) $(($LOWER_BYTE)) $((RIGHT))\n        AAE_INGRESS_START_BUFFER_ADDR=$(($AAE_INGRESS_START_BUFFER_ADDR+4))\ndone\n</code></pre> The functions UpperAndLower16 and ConvertPCMToDecimal can be found in Buildroot/buildroot-2017.02.4/board/blackbox/common/common/rootfs_overlay/opt/blackbox/test/debug_utilities.sh</p>"},{"location":"automation/audio/#audio-samples","title":"Audio Samples","text":""},{"location":"automation/audio/#silence","title":"Silence","text":""},{"location":"automation/audio/#avitar-playing","title":"Avitar Playing","text":""},{"location":"automation/audio/#egress","title":"Egress","text":"<p><pre><code>source /opt/blackbox/test/debug_utilities.sh\n#set -x\n\nAAE_EGRESS_START_BUFFER_ADDR=0x6ffe0000\n#AAE_EGRESS_START_BUFFER_ADDR=0x3ffe0000 for 2K SE/PE\n#AAE_EGRESS_START_BUFFER_ADDR=0x1ffe0000 for ZeroU\n\n\nfor i in $(seq 1 1 128)\ndo\n        AUDIO_DATA=$(devmem $AAE_EGRESS_START_BUFFER_ADDR)\n                UpperAndLower16 $AUDIO_DATA\n                ConvertPCMToDecimal $UPPER_BYTE\n                LEFT=$PCM_VALUE\n                ConvertPCMToDecimal $LOWER_BYTE\n                RIGHT=$PCM_VALUE\n                printf \"Left Channel: %04X %d %d Right Channel: %04X %d %d \\n\" $((UPPER_BYTE)) $(($UPPER_BYTE))  $((LEFT)) $((LOWER_BYTE)) $(($LOWER_BYTE)) $((RIGHT))\n        AAE_INGRESS_START_BUFFER_ADDR=$(($AAE_EGRESS_START_BUFFER_ADDR+4))\ndone\n</code></pre> The functions UpperAndLower16 and ConvertPCMToDecimal can be found in Buildroot/buildroot-2017.02.4/board/blackbox/common/common/rootfs_overlay/opt/blackbox/test/debug_utilities.sh</p>"},{"location":"automation/audio/#confirming-silence-supression","title":"Confirming Silence Supression","text":"<ul> <li>To turn on silence suppression : devmem 0xa0300018 32 0x8000FFFF</li> <li>To change the threshold : devmem 0xa030001c = 0x0010FFF0</li> </ul> <p>The audio suppression is only present on the I2S interface (audio serialiser/deserialiser). If a contiguous number of \u2018silence\u2019 16 bit samples are received the subsequent samples are marked as silence are are not sent to the Audio App Engine section. The DisplayPort Audio on 4K is another input/output on the Mux (along with Serialiser/TrafficGenChk) so there is no silence suppression there</p> <p>Silent suppression is ether enabled or disabled. If it is disabled then it doesn't check that that samples are in the correct range.</p> <p>For the audio sampler one can check the in_silence_suppression bit. This is 0x1 when in silence suppression mode. For Audio serialiser you can check if the aee_internal_fifo_empty is 0x0. This means that the buffers are empty i.e. the remote side has stopped transmitting audio data.</p> <p></p>"},{"location":"automation/audio/#further-notes","title":"Further Notes","text":""},{"location":"automation/audio/#silence-suppression-in-the-avae","title":"Silence suppression in the AVAE","text":"<p>There are two control registers for this</p> <p>AAE_EGRESS_SILENCE_CTRL0         (0x00018) = 0x0000089d</p> <p>bit 31 : silence suppression enable bit 23-0 : number of continuous silent samples before going into silence suppression mode </p> <p>AAE_EGRESS_SILENCE_CTRL1         (0x0001c) = 0x0010fff0 </p> <p>bit 15-0 : Silence_threshold_high_level:  Any value equal or above this threshold is considered Silence. 0xfff0 in current configuration. bit 31-16 : Silence_threshold_low_level: Any value equal or below this threshold is considered Silence. 0x0010 in current configuration.  </p> <p>The normal configuration has the silence suppression (bit 31 of  AAE_EGRESS_SILENCE_CTRL0) turned off. Enabling this does not mean that silence will be detected. The audio data is written to DRAM so it is possible to read what data the Audio sends.</p> <p>To detect silence one can tune the threshold levels and increase the number of silent samples.</p> <p>AAE_EGRESS_SILENCE_CTRL0         (0x00018) = 0x8000ffff  </p> <p>Seems to be a good value.</p> <p>AAE_INGRESS_SILENCE_THRESHOLD    (0x0004c) = 0x00000002</p>"},{"location":"automation/autokeys/","title":"Autokeys","text":"<p>Injects Keyboard key events based on a scripted input file</p>"},{"location":"automation/autokeys/#description","title":"Description","text":"<p>Intended to be used in test automation to simulate user key input, This program injects keyboard key strokes from a scripted file. The syntax used is inspired by the Hak5 rubber ducky scripting language.</p>"},{"location":"automation/autokeys/#quick-one-lines","title":"Quick One lines","text":"<p>This will click the O Key</p> <ul> <li>echo -e \"O\" | autokeys </li> </ul> <p>This will click shift twice followed by the O key and delay for 1 second</p> <ul> <li>echo -e \"SHIFT\\nSHIFT\\nO\\nDELAY 1000\" | autokeys</li> </ul> <p>This will hold down the keys ctrl alt and delete and then release the keys</p> <ul> <li>echo -e \"CTRL ALT DELETE\" | autokeys</li> </ul> <p>This will Type out the string \"This is just a test\" shift twice</p> <ul> <li>echo -e \"STRING This is just a test\" | autokeys</li> </ul>"},{"location":"automation/autokeys/#testing-that-it-works","title":"Testing that it works","text":"<p>On both 2k and 4k run libinput-debug-events on a seperate console, You should see a keyboard get added called \"Black Box Autokeys Keyboard\" and the desired key strokes get injected once run.</p>"},{"location":"automation/autokeys/#autokeys-script","title":"Autokeys Script","text":""},{"location":"automation/autokeys/#syntax","title":"SYNTAX","text":"<p>Most commands invoke keystrokes, key-combos, strings of text and delays.  Below is a list of commands and their function, followed by some example usage.</p>"},{"location":"automation/autokeys/#rem","title":"REM","text":"<p>REM is a comment.</p> <p>REM The next three lines execute a command prompt in Windows GUI r STRING cmd ENTER</p>"},{"location":"automation/autokeys/#delay","title":"DELAY","text":"<p>DELAY creates a momentary pause in the ducky script. It is quite handy for creating a moment of pause between sequential commands that may take the target computer some time to process. DELAY time is specified in milliseconds from 1 to 10000. Multiple DELAY commands can be used to create longer delays. - DELAY 50 - REM will wait 50ms before continuing to the next command.</p>"},{"location":"automation/autokeys/#string","title":"STRING","text":"<p>STRING processes the text following taking special care to auto-shift. STRING can accept a single or multiple characters. STRING | a\u2026z A\u2026Z 0\u20269 !\u2026) `~+=_-\u201c\u2018;:&lt;,&gt;.?[{]}/|!@#$%^&amp;*() - GUI r - DELAY 50 - STRING notepad.exe - ENTER - DELAY 100 - STRING Hello World!</p>"},{"location":"automation/autokeys/#windows-or-gui","title":"WINDOWS OR GUI","text":"<p>Emulates the Windows-Key, sometimes referred to as the Super-key. - GUI r - REM will hold the Windows-key and press r, on windows systems resulting in the Run menu.</p>"},{"location":"automation/autokeys/#menu-or-app","title":"MENU OR APP","text":"<p>Emulates the App key, sometimes referred to as the menu key or context menu key. On Windows systems this is similar to the SHIFT F10 key combo, producing the menu similar to a right-click. - GUI d - MENU - STRING v - STRING d - REM Switch to desktop, pull up context menu and choose actions v, then d toggles displaying Windows desktop icons</p>"},{"location":"automation/autokeys/#shift","title":"SHIFT","text":"<p>Unlike CAPSLOCK, cruise control for cool, the SHIFT command can be used when navigating fields to select text, among other functions. SHIFT | DELETE, HOME, INSERT, PAGEUP, PAGEDOWN, WINDOWS, GUI, UPARROW, DOWNARROW, LEFTARROW, RIGHTARROW, TAB - SHIFT INSERT - REM this is paste for most operating systems</p>"},{"location":"automation/autokeys/#alt","title":"ALT","text":"<p>Found to the left of the space key on most keyboards, the ALT key is instrumental in many automation operations. ALT is envious of CONTROL ALT |END, ESC, ESCAPE, F1\u2026F12, Single Char, SPACE, TAB - GUI r - DELAY 50 - STRING notepad.exe - ENTER - DELAY 100 - STRING Hello World - ALT f - STRING s - REM alt-f pulls up the File menu and s saves. This two keystroke combo is why ALT is jealous of CONTROL's leetness and CTRL+S</p>"},{"location":"automation/autokeys/#control-or-ctrl","title":"CONTROL OR CTRL","text":"<p>The king of key-combos, CONTROL is all mighty. CONTROL | BREAK, PAUSE, F1\u2026F12, ESCAPE, ESC, Single Char | | CTRL | BREAK, PAUSE, F1\u2026F12, ESCAPE, ESC, Single Char - CONTROL ESCAPE - REM this is equivalent to the GUI key in Windows</p>"},{"location":"automation/autokeys/#arrow-keys","title":"ARROW KEYS","text":"<p>DOWNARROW or DOWN | | LEFTARROW or LEFT | | RIGHTARROW or RIGHT | | UPARROW or UP</p>"},{"location":"automation/autokeys/#extended-commands","title":"EXTENDED COMMANDS","text":"<p>These extended keys are useful for various shortcuts and operating system specific functions and include: - BREAK or PAUSE - CAPSLOCK - DEL or DELETE - END - ESC or ESCAPE - HOME - INSERT - NUMLOCK - PAGEUP - PAGEDOWN - PRINTSCREEN - SCROLLOCK - SPACE - TAB</p>"},{"location":"automation/autokeys/#some-more-examples","title":"Some more examples","text":"<pre><code>function switch_connection()\n{\n    #example command: echo -e \"CTRL\\nCTRL\\np\\nDELAY 1000\" | autokeys\n    echo -e \"${HOTKEY_SEQUENCE}p\\nDELAY 1000\" | autokeys \n}\n\n\u200bfunction move_click()                                                   \n{                       \n    update_osd_resolution                                                \n    echo -e \"ABS_MOVE $OSD_OFFSET_X $OSD_OFFSET_Y\\n REL_MOVE $1 $2\\nDELAY 50\\nCLICK\" | autokeys                                                                   \n}\n</code></pre>"},{"location":"automation/autokeys/#osd-functions","title":"OSD Functions","text":"<p>There is a script called osd_functions.sh in ApplianceAutomation/autokeys/sources that contains functions for navigating and changing settings in the OSD. To use the functions copy the source folder to /usr/local on the receiver you want to use the functions on. Source the osd_functions.sh script from your own script and call the functions you need to call.</p> <p>svn://10.211.128.12/automation/trunk/ApplianceAutomation/AutoKeys</p> <p>List of macros is as follows:</p> <ul> <li>osd_logoff</li> <li>osd_change_user_password(CUR_PASS, NEW_PASS)</li> <li>osd_control_hotkey(HOTKEY, FUNCTIONAL_KEY)</li> <li>osd_control_osd_resolution(RESOLUTION)</li> <li>osd_control_rdp_resolution(RESOLUTION)</li> <li>osd_connection_exit</li> <li>osd_connection_previous</li> <li>osd_connection_favorite(FAVORITE)</li> <li>osd_connections_remove(CONNECTION_NAME)</li> <li>osd_connections_new(CONNECTION_PLATFORM, CONNECTION_NAME, CONNECTION_IP, CONNECTION_TYPE)</li> <li>osd_connections_connect</li> <li>osd_connections_select(LIST_NUMBER)</li> <li>osd_connections_search_clear</li> <li>osd_connections_search(SEARCH)</li> <li>osd_login(USERNAME, PASSWORD)</li> </ul>"},{"location":"automation/autokeys/#author","title":"Author\u200b","text":"<p>Tom Moore (tom.moore@blackbox.com) John O'Sullivan</p>"},{"location":"automation/elements_of_automated_test/","title":"Elements of the Automated Test Framework","text":"<p> The components are explained below.</p>"},{"location":"automation/elements_of_automated_test/#automation-framework-changes","title":"Automation Framework Changes","text":"<p> Download automated_framework_changes document </p>"},{"location":"automation/elements_of_automated_test/#descriptions","title":"Descriptions","text":""},{"location":"automation/elements_of_automated_test/#test-cases","title":"Test Cases","text":"<p>A test case is the root object of a test case. It stores the test asset configuration object, the filePath, reference and expected outcome. It handles downloading the test assets to devices and executing the scripts.</p> <ul> <li>Test Case 5 - Ensure a TX in an existing shared connection rejects a private connection from an RX attempting to connect to the existing session.</li> <li>Test Case 7 - Ensure a TX in an existing private connection rejects a private connection from an RX attempting to connect to the existing session.</li> <li>Test Case 2 - Ensure a TX in an existing lossless shared connection rejects a shared connection from an RX attempting to connect to the existing session in compressed (YUV) mode.</li> <li>Test Case 9 - Ensure a TX in an existing lossless shared connection accepts a shared connection from an RX attempting to connect to the existing session in lossless mode.</li> </ul> <p>It is composed of a reference to one or more test assets and test configurations.</p>"},{"location":"automation/elements_of_automated_test/#test-assets","title":"Test Assets","text":"<p>The primary test assets are the appliance devices themselves, but for certain tests peripheral devices (like USB) devices or specific targets can also be specified. A collection of test assets is configured as a Soak (see below). A Soak is defined as a collection of test assets organised into a logical unit for the purpose of executing a test.</p>"},{"location":"automation/elements_of_automated_test/#test-soak","title":"Test Soak","text":"<p>A Soak is a collection of test assets organised into a logical unit for the purpose of executing a test.</p>"},{"location":"automation/elements_of_automated_test/#test-asset-configuration","title":"Test Asset Configuration","text":"<p>A test asset is configured by setting a number of properties on the device. Each appliance in a test has an associated test configuration associated with it. This configuration describes the value of the configurable parameters associated with the device. For example:</p> <pre><code>{\n      \"receivers\": [\"10.211.133.10\",\"10.211.133.17\",\"10.211.131.24\"],\n      \"kill_on_fail\": \"On\",\n      \"save_tx_log\": \"On\",\n      \"time_between_tests\": 10,\n      \"video_wait_count\": 20,\n      \"iterations\": 1000,\n      \"testcase_results_server\": \"10.211.129.241:3090/result\",\n      \"site_location\": \"Limerick\",\n      \"archive_results\": \"On\",\n      \"switching_sequence\": \"1,2,1,1,1,2\",\n      \"version\": \"Connection Test Config V1.3.1\",\n      \"tx_password\": \"barrow1admin_12\",\n      \"hotkey\": \"ALT\\nALT\",\n      \"targets\": [\n          {\n            \"name\": \"2KTX_2\",\n            \"ipaddress\": \"10.211.133.18\",\n            \"pc_ipaddress\": \"10.211.135.31\",\n            \"device_type\": \"EMDSETXSH\",\n            \"frame_count\": 6,\n            \"compression_mode\": \"YUV\",\n            \"audio\": \"Off\",\n            \"usbr\": \"Off\",\n            \"extended_desktop\": \"Off\",\n            \"shared\": \"On\",\n            \"expected_exit_code\": 173,\n            \"exclusive\": \"On\"\n          }\n\n    ]\n    }\n</code></pre> <p>Info</p> <p>The \"site_location\" value is read from a file called site_id in the TestCaseGenerator directory. Using the Limerick testrig as an example, we can write \"Limerick\" into the site_id file to set Limerick as the site_location.</p> <pre><code>echo \"Limerick\" &gt; ./AutomationNodejs/TestCaseGenerator/site_id\n</code></pre> <p>Can be run from the root ApplianceAutomation folder to write Limerick to a file called site_id in the TestCaseGenerator directory. If no site_id is specified, future results should have the site_location value set to \"Unknown\".</p> <p>In future updates this might be integrated into the labtestrig.json file</p> Test Asset Device Type Connection_Mode Optimization \u200bAudio \u200bOuality_Level \u200bDelay_Between_Connections \u200bTest_Mode \u200bUSBR \u200bUSBR_Devices Persistence View_Only\u200b \u200bVideo_source_optimization HID_Configuration OSD_Resolution 1 RX Private Unicast \u200bOff \u200b1 \u200b10 \u200bOSD_Test \u200bOff \u200bNone Off Off\u200b \u200b0ff Basic 1920X1080 2 RX Private Unicast \u200bOn \u200b1 \u200b10 \u200bOSD_Test \u200bOff \u200bNone Off Off\u200b \u200b0ff Basic 1920X1080 3 RX Private Unicast \u200bOn \u200b1 \u200b10 \u200bOSD_Test \u200bOn \u200bNone Off Off\u200b \u200b0ff Basic 1920X1080"},{"location":"automation/elements_of_automated_test/#test-run","title":"Test Run","text":"<p>A Test Run is a collection of test cases chosen for a particular automated test. A test run is associated with a particular test soak for the purpose of evaluation.</p>"},{"location":"automation/elements_of_automated_test/#test-results","title":"Test Results","text":"<p>Each test run produces a set of test results for a specific set of test case. These results are unique to a specific sequence of test cases and a specific set of assets. Results are stored for analysis and future comparative analysis.</p>"},{"location":"automation/elements_of_automated_test/#test-reporter","title":"Test Reporter","text":"<p> Consolidates, reports and archives results for a test run and publishes the results to a website.</p>"},{"location":"automation/elements_of_automated_test/#test-publisher","title":"Test Publisher","text":"<p>Provides a web interface to view and query results.</p>"},{"location":"automation/elements_of_automated_test/#test-controller","title":"Test Controller","text":"<p>The test controller is a machine that manages the processing of test cases, their associated configurations and the results of test runs. The test controller has a number of components that assist it in running automated tests.</p>"},{"location":"automation/elements_of_automated_test/#test-configurator","title":"Test Configurator","text":"<p>This takes a test run object and processes the test cases and their associated configuration files to create a set of device files that can be down loaded onto an appliance.</p>"},{"location":"automation/elements_of_automated_test/#image-upgrade-service","title":"Image Upgrade Service","text":"<p>A web service that can take a list of IP addresses or a Soak object and upgrade all test assets to a given revision.</p>"},{"location":"automation/elements_of_automated_test/#test-executive","title":"Test Executive","text":"<p>This component is responsible for downloading software to the boards, invoking the test configurator and gathering the results from the data gathering component</p>"},{"location":"automation/elements_of_automated_test/#representation-of-test-objects","title":"Representation of Test Objects","text":"<p>The automation test uses json objects to specify tests. The following section shows the formal definition of these objects in json format</p>"},{"location":"automation/elements_of_automated_test/#test-case","title":"Test Case","text":"<pre><code>{\n    \"description\" : \"Ensure a TX in an existing shared connection rejects a private connection from an RX attempting to connect to the existing session\",\n    \"test_case_reference\" : 7,\n    \"configurations\" :\n    [\n        { \"test_asset_reference\" ; 2, \"device_type\" : \"EMD4KRX\", \"connection_mode\" : \"private\", \"optimisation\" : \"lossless\", \"audio\" : \"off\", \"quality_level\" : 1,\n        \"delay_between_connections\" : 10 , \"test_mode\" : \"osd\", \"usbr\" :  \"off\", \"usbr_device_reference\" : 0, \"persistence\" : \"off\", \"view_only\" : \"off\",\n        \"video_source_optimization\" : 0, \"hid_configuration\" : \"basic\", \"resolution\" : \"1920x1080\", \"osd_resolution\" : \"1920x1080\" },\n        { \"test_asset_reference\" ; 3, \"device_type\" : \"EMD4KRX\", \"connection_mode\" : \"private\", \"optimisation\" : \"lossless\", \"audio\" : \"off\", \"quality_level\" : 1,\n        \"delay_between_connections\" : 10 , \"test_mode\" : \"osd\", \"usbr\" :  \"off\", \"usbr_device_reference\" : 0, \"persistence\" : \"off\", \"view_only\" : \"off\",\n        \"video_source_optimization\" : 0, \"hid_configuration\" : \"basic\", \"resolution\" : \"1920x1080\", \"osd_resolution\" : \"1920x1080\" },\n    },\n    \"expected_outcome\" : \"second connection is rejected with the appropriate error message and exit code\"\n}\n</code></pre>"},{"location":"automation/elements_of_automated_test/#test-run_1","title":"Test Run","text":"<pre><code>{\n    \"test_run_reference\" : 12\n    \"description\" : \"Shared Connections on 2K\",\n    \"test_case_references\" : [7,12,5,9,11],\n    \"soak_reference\" : \"embedded_soak1\",\n}\n</code></pre>"},{"location":"automation/elements_of_automated_test/#test-result","title":"Test Result","text":"<pre><code>{\n    \"Test_run_reference\" : 12,\n    \"test_case_results\" :\n    [\n        {\n        \"test_case_reference\" : 7,\n        \"status\" : \"pass\",\n        \"iterations\" 2000,\n        \"details\" : \"Detailed Test Results\"\n        }\n    ]\n}\n</code></pre>"},{"location":"automation/elements_of_automated_test/#test-soak_1","title":"Test Soak","text":"<pre><code>[\n  {\n    \"_ipaddress\": \"10.211.129.35\",\n    \"_mac\": \"\",\n    \"_deviceType\": \"EMD4KRX\",\n    \"_deviceName\": \"4K_RX_35\",\n    \"_technology\": \"\",\n    \"_heads\": \"\",\n    \"_selected\": false\n  },\n  {\n    \"_ipaddress\": \"10.211.129.36\",\n    \"_mac\": \"\",\n    \"_deviceType\": \"EMD4KTX\",\n    \"_deviceName\": \"4K_TX_36\",\n    \"_technology\": \"\",\n    \"_heads\": \"\",\n    \"_selected\": false\n  },\n  {\n    \"_ipaddress\": \"10.211.129.39\",\n    \"_mac\": \"\",\n    \"_deviceType\": \"EMD4KRX\",\n    \"_deviceName\": \"4K_RX_39\",\n    \"_technology\": \"\",\n    \"_heads\": \"\",\n    \"_selected\": false\n  },\n  {\n    \"_ipaddress\": \"10.211.129.40\",\n    \"_mac\": \"\",\n    \"_deviceType\": \"EMD4KTX\",\n    \"_deviceName\": \"4K_TX_40\",\n    \"_technology\": \"\",\n    \"_heads\": \"\",\n    \"_selected\": false\n  },\n  {\n    \"_ipaddress\": \"10.211.129.189\",\n    \"_mac\": \"\",\n    \"_deviceType\": \"EMD4KRX\",\n    \"_deviceName\": \"4K_RX_189\",\n    \"_technology\": \"\",\n    \"_heads\": \"\",\n    \"_selected\": false\n  },\n  {\n    \"_ipaddress\": \"10.211.129.190\",\n    \"_mac\": \"\",\n    \"_deviceType\": \"EMD4KTX\",\n    \"_deviceName\": \"4K_TX_190\",\n    \"_technology\": \"\",\n    \"_heads\": \"\",\n    \"_selected\": false\n  },\n  {\n    \"_ipaddress\": \"10.211.130.103\",\n    \"_mac\": \"\",\n    \"_deviceType\": \"EMDPETXSH\",\n    \"_deviceName\": \"PE_TX_103\",\n    \"_technology\": \"\",\n    \"_heads\": \"\",\n    \"_selected\": true\n  },\n  {\n    \"_ipaddress\": \"10.211.130.102\",\n    \"_mac\": \"\",\n    \"_deviceType\": \"EMDPERXSH\",\n    \"_deviceName\": \"PE_RX_102\",\n    \"_technology\": \"\",\n    \"_heads\": \"\",\n    \"_selected\": true\n  }\n]\n</code></pre>"},{"location":"automation/elements_of_automated_test/#test-configuration-standard-test","title":"Test Configuration Standard Test","text":"<p>The configuration for a stanard connection test (No OSD involvement) is configured via a JSON configuration file. The object can contain a list of targets</p> <pre><code>{\n  \"kill_on_fail\": \"On\",\n  \"save_tx_log\": \"On\",\n  \"time_between_tests\": \"10\",\n  \"video_wait_count\": 20,\n  \"iterations\": 1000,\n  \"switching_sequence\": \"1,2,1,1,1,2\",\n  \"version\": \"Connection Test Config V1.3.1\",\n  \"tx_password\": \"\",\n  \"hotkey\": \"ALT\\nALT\",\n  \"targets\": [\n    {\n      \"name\": \"target1\",\n      \"ipaddress\": \"192.168.1.161\",\n      \"frame_count\": 300,\n      \"compression_mode\": \"YUV\",\n      \"audio\": \"Off\",\n      \"usbr\": \"Off\",\n      \"extended_desktop\": \"Off\",\n      \"shared\": \"On\",\n      \"expected_exit_code\": \"173\"\n    },\n    {\n      \"name\": \"target2\",\n      \"ipaddress\": \"192.168.1.169\",\n      \"frame_count\": 300,\n      \"compression_mode\": \"YUV\",\n      \"audio\": \"Off\",\n      \"usbr\": \"Off\",\n      \"extended_desktop\": \"Off\",\n      \"shared\": \"On\",\n      \"expected_exit_code\": \"173\"\n    }\n  ],\n  \"osd_targets\": [\n    {\n      \"favourite_reference\": \"2\"\n    },\n    {\n      \"favourite_reference\": \"1\"\n    }\n  ]\n}\n</code></pre>"},{"location":"automation/elements_of_automated_test/#test-configuration-osd-test","title":"Test Configuration OSD Test","text":"<p>The configuration for a OSD based connection test (No OSD involvement) is configured via a JSON configuration file. The object can contain a list of targets</p> <pre><code>{\n\n\"kill_on_fail\" : \"On\",\n\"save_tx_log\" : \"On\",\n\"time_between_tests\" : \"10\",\n\"video_wait_count\" : 20,\n\"iterations\" : 1000,\n\"switching_sequence\" : \"1,2,1,1,1,2\",\n\"version\" : \"Connection Test Config V1.3.1\",\n\"targets\" : [\n{\n\"name\" : \"target1\",\n\"ipaddress\" : \"192.168.1.161\",\n\"txpassword\" : \"\",\n\"frame_count\" : 300\n},\n{\n\"name\" : \"target2\",\n\"ipaddress\" : \"192.168.1.169\",\n\"txpassword\" : \"\",\n\"frame_count\" : 300\n}\n]\n\n}\n</code></pre> <p></p>"},{"location":"automation/elements_of_automated_test/#automation-setup-walk-through","title":"Automation Setup Walk Through","text":"<ul> <li>The test controller controls the process of test automation</li> <li>The user configures the test controller to run a particular test run</li> <li>The test controller reads the list of test cases associated with that test run</li> <li>The test configurator generates a set of configuration files based on this test run for the first test case.</li> <li>The appliances are downloaded with the appropriate software image files (clu and fit images) to be tested.</li> <li>The generated configuration files (xml and json formatted files) are generated and then down loaded to the appliances using the test asset configurator.</li> <li>The test controller starts the test on the target devices for the configured test run.</li> <li>Each test case runs for a given number of iterations.</li> <li>On failure the test generates a test result, records the failure and takes a snapshot of logs, states and memory. These are transferred to the test controller for later analysis.</li> <li>The statistic associated with the test are recorded by the test report publisher ans sent to a mongo databse for storage.</li> <li>If the test case completes a pass then a record is written to the test controller and the next test case in the test run is launched.</li> <li> <p>Once the test run has completed all test_cases a final test result is written to the test controller.</p> </li> <li> <p>For top level phasing of this project see: \u200bPlanning</p> </li> <li>For a current status of this project see: \u200bStatus</li> </ul>"},{"location":"automation/elements_of_automated_test/#rest-api-requests","title":"Rest API Requests","text":"<p>Two classes have been added to the Automation Framework directory with the intention of interacting with the existing REST API's on the appliances and soak pcs.</p>"},{"location":"automation/elements_of_automated_test/#restjs","title":"rest.js","text":"<p>The rest.js class sends http requests to TX and RX devices using the existing REST API provided. The full list of endpoints and functions for the Rest API can be found on the document provided in the limerick sharepoint wiki.</p> Request Structure Get rest.get(ipaddress, command).then((data) =&gt; Put rest.put(ipaddress, command, body).then((data) =&gt; Post rest.post(ipaddress, command, body).then((data) =&gt; Delete A compressed encrypted file format used for 4K appliance software images"},{"location":"automation/enhanced_osd/","title":"Enhanced OSD Automated Testing","text":"<p>The enhanced OSD automated testing is an update to the existing automated test framework to allow the tests to run on the enhanced osd version of software using mqtt requests instead of launching applications through ssh as was done previously.</p>"},{"location":"automation/enhanced_osd/#how-to-run-automated-tests","title":"How to run automated tests","text":"<ol> <li>To run automated tests from the automated Jenkins build, we can send a http POST request to the address http://10.211.129.241:3090/run passing the branch through the body like below...</li> </ol> <pre><code>{\n  \"build\": {\n    \"parameters\": {\n      \"BRANCH\": \"develop_enhanced_osd\"\n    }\n  }\n}\n</code></pre> <ol> <li>For development purposes when running test cases on our own machine, we can change the default enhanced_osd value to \"true\". Navigate to AutomationFramework/testAssetConfiguration.js and in the TestAssetConfiguration constructor change <code>this._enhanced_osd</code> from \"false\" to \"true\". This will run every test in enhanced osd mode, so long as the test script itself is written to use the $ENHANCED parameter</li> </ol>"},{"location":"automation/enhanced_osd/#tasks-needed-to-run-enhanced_osd-tests-smoothly","title":"Tasks needed to run enhanced_osd tests smoothly","text":"Summary Description Status Call MQTT commands correctly We need to change the connection_test_common.sh to use the correct commands to make and break connections using mosquitto_pub instead of bbfreerdp done Accept enh_osd as parameter The AutomationFramework needs to accept the branch as a parameter to decide whether we are running the enhanced_osd tests or develop tests done Upgrade correct devices Enhanced OSD only runs on PE receivers and all transmitters. We need to take all PE RX devices from the labtestrig.json and all transmitters and upgrade them using the nightly_upgrade.sh script done Test script modifications We need to modify the test scripts to use the enhanced osd parameter in makeConnection and terminate_dfreerdp. VSCode search and replace done Configure jenkins to POST on build Need to configure Jenkins to POST to testCaseResultServer on build. Need Michael's help with this in progress"},{"location":"automation/enhanced_osd/#enhanced-osd-mqtt-requests-used","title":"Enhanced OSD MQTT requests used","text":"<p>JSON Object</p> <pre><code>{\n    \"connection_name\": \"automation\", \n    \"ip\": \"$TX_TARGET\", \n    \"username\": \"automation\", \n    \"audio\": false, \n    \"usbr\": false, \n    \"shared\": false, \n    \"persist\": false, \n    \"view_only\": false, \n    \"extended_desktop\": false, \n    \"timer_val\": 0, \n    \"cmode\": 10, \n    \"connection_type\": 0, \n    \"connection_mode\": 2\n}\n</code></pre>"},{"location":"automation/enhanced_osd/#make-connection","title":"Make Connection","text":"<pre><code>mosquitto_pub -h $IPADDRESS -t /blackbox/appliance/cmd/$IPADDRESS/not_specified/make_OSD_connection  -m '\"\"$JSON\"\"'\n</code></pre>"},{"location":"automation/enhanced_osd/#make-favourite-connection-force-connection","title":"Make Favourite Connection (force connection)","text":"<pre><code>mosquitto_pub -h $IPADDRESS -t /blackbox/appliance/cmd/$IPADDRESS/not_specified/force_connection  -m '\"\"$JSON\"\"'\n</code></pre>"},{"location":"automation/enhanced_osd/#terminate-connection","title":"Terminate Connection","text":"<pre><code>mosquitto_pub -h $IPADDRESS -t /blackbox/appliance/cmd/$IPADDRESS/not_specified/terminate_cc_connection -m '{\"termination_connection\": 1}'\n</code></pre>"},{"location":"automation/enhanced_osd/#switch-to-previous-connection","title":"Switch to Previous Connection","text":"<pre><code>mosquitto_pub -h $TX_TARGET -t /blackbox/appliance/cmd/$IPADDRESS/not_specified/previous_connection -m '{\"termination_connection\": 2}'\n</code></pre>"},{"location":"automation/error_code/","title":"Error Codes for Appliance","text":""},{"location":"automation/error_code/#kvm-error-codes","title":"KVM Error Codes","text":"Description Code Comments PRIVATE_TO_EXISTING_PRIVATE_ERROR_CODE 202 // attempt to connect to an existing private connection from a receiver configured for private mode PRIVATE_TO_EXISTING_SHARED_ERROR_CODE 203 attempt to connect to a shared connection from a receiver configured for private mode SHARED_TO_EXISTING_PRIVATE_ERROR_CODE 204 attempt to connect to an existing private connection from a receiver configured for shared mode OPTIMISED_NOT_SUPPORTED_ERROR_CODE 205 attempt to make an optimized connection when it is not supported PIXEL_PERFECT_NOT_SUPPORTED_ERROR_CODE 206 attempt to make a pixel perfect connection when it is not supported LOSSLESS_NOT_SUPPORTED_ERROR_CODE 207 attempt to make a lossless connection when it is not supported OPTIMISED_TO_EXISTING_LOSSLESS_ERROR_CODE 208 attempt to make an optimized connection to an existing lossless shared connection. LOSSLESS_TO_EXISTING_OPTIMISED_ERROR_CODE 209 attempt to make a lossless connection to an existing optimized shared connection. EXCEEDED_MUNICAST_CONNECTION_LIMIT_ERROR_CODE 210 attempt to make an nth connection to a municast session exceeds limit. EXCEEDED_MULTICAST_CONNECTION_LIMIT_ERROR_CODE 211 attempt to make an nth connection to a multiicast session exceeds limit. DOMAIN_KEY_ERROR_CODE 212 Domain Keys do not match SYN_FIN_FAILED_TO_INIT_ERROR_CODE 213 Failed to setup video/audio TOE fast-path connection"},{"location":"automation/error_code/#vm-error-codes","title":"VM Error Codes","text":""},{"location":"automation/error_code/#section-0-15-protocol-independent-code","title":"Section 0 - 15: protocol - independent code","text":"Description Code Comments DF_EXIT_SUCCESS 0 DF_EXIT_DISCONNECT 1 DF_EXIT_lOGOFF 2 DF_EXIT_IDLE_TIMEOUT 3 DF_EXIT_LOGON_TIMEOUT 4 DF_EXIT_CONN_REPLACED 5 DF_EXIT_OUT_OF_MEMORY 6 DF_EXIT_CONN_DENIED 7 DF_EXIT_CONN_DENIED_FIPS 8 DF_EXIT_USER_PRIVILEDGES 9 DF_EXIT_FRESH_CREDENTIALS_REQUIRED 10 DF_EXIT_DESCONNECTED_BY_USER 11 DF_EXIT_LOGOFF_BY_USER 12 Needs to be added in for Win 8/ Server 2012"},{"location":"automation/error_code/#section-16-31-license-error-set","title":"Section 16 - 31: license error set","text":"Description Code Comments DF_EXIT_LICENSE_INTERNAL 16 DF_EXIT_LICENSE_NO_LICENSE_SERVER 17 DF_EXIT_LICENSE_NO_LICENSE 18 DF_EXIT_LICENSE_BAD_CLIENT_MSG 19 DF_EXIT_LICENSE_HWID_DOESNT_MATCH 20 DF_EXIT_LICENSE_BAD_CLIENT 21 DF_EXIT_LICENSE_CANT_FINISH_PROTOCOL 22 DF_EXIT_LICENSE_CLIENT_ENDED_PROTOCOL 23 DF_EXIT_LICENSE_BAD_CLIENT_ENCRYPTION 24 DF_EXIT_LICENSE_CANT_UPGRADE 25 DF_EXIT_LICENSE_NO_REMOTE_CONNECTIONS 26"},{"location":"automation/error_code/#section-32-127-rdp-protocol-error-set","title":"Section 32 - 127: RDP protocol error set","text":"Description Code Comments DF_EXIT_RDP 32"},{"location":"automation/error_code/#section-128-254-dfreerdp-specific-exit-codes","title":"Section 128 - 254: DFreerdp specific exit codes","text":"Description Code Comments DF_EXIT_PARSE_ARGUMENTS 128 DF_EXIT_MEMORY 129 DF_EXIT_PROTOCOL 130 DF_EXIT_CONN_FAILED 131 DF_EXIT_CLOUDIUM_PIPE 132 DF_EXIT_IHSE_ERROR 133 IDSE Specific Codes DF_EXIT_KILL 134 Used when killing connection with keyboard combination DF_EXIT_PREVIOUS 135 Used when user enters key coombo to load previous connection DF_EXIT_NEXT 136 Used when user enters key combo to load next connection DF_EXIT_RESTORE 137 restore the current connection DF_EXIT_TIMEOUT 138 DF_EXIT_NLA_NEG_FAIL 139 NLA connection failure DF_EXIT_NLA_AUTH_FAIL 140 NLA authentication failure DF_EXIT_DEV_NODE_FAIL 141 Dev Nodes Fail to Open DF_EXIT_INACTIVITY_TIMEOUT 142 NLA authentication failure DF_EXIT_PREEMPTION_ACCESS_DENIED 143 DF_EXIT_PREEMPTION_ACCESS_GRANTED 144 DF_EXIT_PREEMPTION_IN_PROGRESS 145 DF_EXIT_NON_PREEMPTIBLE_CONNECTION 146 DF_EXIT_DOMAIN_KEY_ERROR 147 DF_EXIT_FPGA_RESET_ERROR 148 VERSION_MISMATCH_ERROR_CODE 149 DF_EXIT_LEGACY_MODE_NOT_SUPPORTED_ERROR 150 DF_EXIT_UNKNOWN 255"},{"location":"automation/mongodb/","title":"MongoDB","text":""},{"location":"automation/mongodb/#installing-the-mongodb-cli","title":"Installing the MongoDB CLI","text":"<ul> <li>sudo apt-get install gnupg</li> <li>sudo apt-get install -y mongocli</li> <li>sudo apt-get install --only-upgrade mongocli</li> <li>mongocli --version</li> </ul>"},{"location":"automation/mongodb/#mongosh","title":"mongosh","text":""},{"location":"automation/mongodb/#opening-a-database-with-mongosh","title":"Opening a database with mongosh","text":"<ul> <li>mongosh mongodb://10.211.131.38:27017<ul> <li>show dbs</li> <li>test&gt; use testautomations -&gt; switched to db testautomations</li> </ul> </li> </ul>"},{"location":"automation/mongodb/#backing-up-and-moving-the-database","title":"Backing up and moving the database","text":""},{"location":"automation/mongodb/#to-backup","title":"To backup","text":"<ul> <li>mongodump --host 10.211.131.38:27017 --out ~/Downloads/dbdump</li> <li>This will produce</li> </ul> <pre><code>.\n\u251c\u2500\u2500 admin\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 system.version.bson\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 system.version.metadata.json\n\u251c\u2500\u2500 test\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 inventory.bson\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 inventory.metadata.json\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 results.bson\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 results.metadata.json\n\u2514\u2500\u2500 testautomations\n    \u251c\u2500\u2500 results.bson\n    \u251c\u2500\u2500 results_copy.bson\n    \u251c\u2500\u2500 results_copy.metadata.json\n    \u2514\u2500\u2500 results.metadata.json\n</code></pre>"},{"location":"automation/mongodb/#to-restore","title":"To Restore","text":"<ul> <li>To restore this to a mongo instance on another machine use: mongorestore -d testautomations ~/Downloads/testautomations  --host (IP of new machine):27017</li> </ul>"},{"location":"automation/mongodb/#to-prune-old-results","title":"To prune old results","text":"<p>Info</p> <p><code>db.results.deleteMany({})</code></p> <p>This command will delete every result in the database. If your query inside the curly brackets is invalid mongodb will read your command as above and proceed to delete every result in the database. It is highly recommend you follow these steps to backup the database before running any deleteMany command as mongo doesn't have a restore feature. Run the db.results.find({_id: {$in: ids}}) command before running db.results.deleteMany({_id: {$in: ids}}) to make sure the query is correct before deleting anything.</p> <p>To prune old results, open robo3t and connect to the database. Enter the following into the query bar changing  to the amount of results you want to prune. <pre><code>var ids = [];\n\ndb.results.find({}, {_id: 1}).sort({_id: 1}).limit(&lt;number&gt;).forEach(function(doc) {\n    ids.push(doc._id)\n});\n\ndb.results.find({_id: {$in: ids}})\n</code></pre> <ul> <li><code>var ids = [];</code> creates an empty array for us to store our ids.</li> <li><code>db.results.find({}, {_id: 1})</code> returns only the _id value of each document. <code>.sort({_id: 1})</code> sorts the list of ids by oldest first (the _id value is generated based on the timestamp at the time the result was submitted).</li> <li><code>.limit(&lt;number&gt;)</code> limits the list of ids by the specified number inside the brackets.</li> <li>The <code>.forEach(function(doc) ... )</code> function interates through every id in the list and adds them to the ids array.</li> <li><code>db.results.find({_id: {$in: ids}})</code> will return a list of all the documents that match the ids in that array. Look over this list and make sure this is the correct list of results you plan on deleting. When you're satisfied this list of devices is correct, replace this line with <code>db.results.deleteMany({_id: {$in: ids}})</code>.</li> </ul>"},{"location":"automation/mouse_latency_testing/","title":"Mouse Latency","text":""},{"location":"automation/mouse_latency_testing/#two-principle-approaches","title":"Two Principle Approaches","text":"<ul> <li>Mobile phone approach: Record at 120 fps and measure is a video editor. This approach is limited in its effectiveness, a resolution of  120 fps is required - there are two many potential inaccuracies in the measurement process.</li> <li>LDAT based solution\u200b - This is the preferred solution, see below</li> </ul>"},{"location":"automation/mouse_latency_testing/#ldat","title":"LDAT","text":"<p>We have in-house an Alienware monitor with integrated Nvidia LDAT technology. Micheal has written a small application that facilitates the testing of mouse latency using this method.</p> <p>It measures full latency from click to pixel change through NVidia experience tool. It is a two step process:</p> <ul> <li>First measure mouse connected directly.</li> <li>Then measure with our system in line.</li> </ul>"},{"location":"automation/mouse_latency_testing/#constraints","title":"Constraints","text":"<ul> <li>Only works to 2K on the current monitor.</li> </ul>"},{"location":"automation/mouse_latency_testing/#options","title":"Options","text":"<p>There is an open LDAT - Possibly a project for the new co-op which would give us a monitor independent (and resolution independent) solution.</p> <p>Using this method the current mouse measurement is : 28 ms</p> <p>The base line is around 77 ms for an average PC mouse click to a screen update. We add an additional 28 ms to that. Micheal will verify this on his next visit.</p>"},{"location":"automation/mouse_latency_testing/#mouse-latency-test-strategy","title":"Mouse Latency Test Strategy","text":"<ul> <li>Near term: source a monitor with LDAT functionality</li> <li>Near to long term: Co-op Student look at open source LDAT solution</li> <li>Longer term: LDAT based solution either open-source or monitor based.</li> </ul>"},{"location":"automation/mouse_latency_testing/#resources","title":"Resources","text":"<ul> <li>LDAT Compatible Monitors</li> <li>Open LDAT</li> <li>LDAT Source code and device schematics</li> <li>You Tube Video</li> <li>SysLat</li> <li>Arduino IDE</li> <li>VS Code</li> </ul>"},{"location":"automation/mouse_latency_testing/#plan","title":"Plan","text":"<ul> <li>Week 1: Get familiar with details of the project<ul> <li>Review all of the links above - Done</li> </ul> </li> <li>Week 2: Overview of project, create project plan<ul> <li>Order material required - In progress</li> <li>Plan<ul> <li>See below for weeks 3 to 6</li> </ul> </li> </ul> </li> <li>Week 3:<ul> <li>Source and build all relevant software</li> <li>Setup development environment on your PC, IDEs etc</li> </ul> </li> <li>Week 4: Deploy software and begin initial testing on actual hardware</li> <li>Week 5: Build hardware into a usable state - cased unit</li> <li>week 6: Characterization</li> </ul>"},{"location":"automation/mouse_latency_testing/#resources-required","title":"Resources Required","text":"<ul> <li>KVM System</li> <li>Mouse, Keyboard, Monitor</li> </ul>"},{"location":"automation/mouse_latency_testing/#configuring-the-hardware","title":"Configuring the Hardware","text":"<p> SparkFun Micro Pro DataSheet</p>"},{"location":"automation/mouse_latency_testing/#io-pins","title":"I/O Pins","text":"<p>The Pro Micro's I/O pins -- 18 in all -- are multi-talented. Every pin can be used as a digital input or output, for blinking LEDs or reading button presses. These pins are referenced in the Arduino IDE via an integer value between 0 and 21. (The A0-A3 pins can be referenced digitally using either their analog or digital pin number).</p> <p>Nine pins feature analog to digital converters (ADCs) and can be used as analog inputs. These are useful for reading potentiometers or other analog devices using the analogRead([pin]) function.</p> <p>There are five pins with pulse width modulation (PWM) functionality, which allows for a form of analog output using the analogWrite([pin], [value]) function. These pins are indicated on-board with a faint, white circle around them.</p> <p>There are hardware UART (serial), I2C, and SPI pins available as well. These can be used to interface with digital devices like serial LCDs, XBees, IMUs, and other serial sensors.</p> <p>The Pro Micro has five external interrupts, which allow you to instantly trigger a function when a pin goes either high or low (or both). If you attach an interrupt to an interrupt-enabled pin, you'll need to know the specific interrupt that pin triggers: pin 3 maps to interrupt 0 (INT0), pin 2 is interrupt 1 (INT1), pin 0 is interrupt 2 (INT2), pin 1 is interrupt 3 (INT3), and pin 7 is interrupt 4 (INT6).</p>"},{"location":"automation/mouse_latency_testing/#adding-support-for-a-new-board-type","title":"Adding Support for a New Board Type","text":""},{"location":"automation/mouse_latency_testing/#selecting-the-correct-board-type","title":"Selecting the Correct Board Type","text":""},{"location":"automation/mouse_latency_testing/#selecting-the-processor-type","title":"Selecting the Processor Type","text":"<p>IMPORTANT: If you select the wrong processor type you will brick the board</p> <p></p>"},{"location":"automation/mouse_latency_testing/#selecting-the-serial-port","title":"Selecting the Serial Port","text":"<p>Launch devmgr (Device Manager) on your PC and identify the serial port.</p> <p></p>"},{"location":"automation/mouse_latency_testing/#installing-the-hid-library-project","title":"Installing the HID-Library Project","text":""},{"location":"automation/mouse_latency_testing/#to-compile-and-upload-the-code","title":"To compile and upload the code","text":""},{"location":"automation/mouse_latency_testing/#open-the-ldat-project","title":"Open the LDAT Project","text":""},{"location":"automation/mouse_latency_testing/#software-section","title":"Software Section","text":""},{"location":"automation/mouse_latency_testing/#download-the-required-jdk-version-to-run-software","title":"Download the required jdk version to run software","text":"<p>jdk 1.7 temurin</p>"},{"location":"automation/mouse_latency_testing/#opening-the-source-code","title":"Opening the source code","text":"<p>open the project from Vs code</p> <p>follow the path OpenLdat-master -&gt; app -&gt; OpenLdat -&gt; src</p> <p></p>"},{"location":"automation/mouse_latency_testing/#adding-jar-files","title":"Adding jar files","text":"<p>Add the jar files to compile program correctly</p> <p></p> <p></p> <p>After opening the src folder in VS code, look to the bottom left for 'Java projects'. </p> <p>Click on the plus sign and navigate to the 'referenced libraries' and then add the relevant jar files from the path shown above</p>"},{"location":"automation/mouse_latency_testing/#making-a-jar-executable","title":"Making a Jar executable","text":"<p>Website for reference</p> <p>Following the steps from the website above we can proceed, provided we have done all the above steps on this page. </p> <p></p> <p>After this we should have a .jar file ready. </p>"},{"location":"automation/mouse_latency_testing/#documenting-steps-for-testing-latency","title":"Documenting steps for testing Latency","text":"<p>We are currrently interested in manual or automatic testing of System Latency. The application has additional features which could be explored further as needed.</p> <p></p> <p>Input Lag(Automated test) - This feature generates clicks automatically in regualar intervals which can be recieved by the LDAT system which then produces a flash to assist in comparing Latency with mouse clicks. </p> <p>All we need to do is set the LDAT device and run the application.</p> <p></p> <p></p> <p></p> <p>The algorithm works by measuring the black level and by finding peaks that are significantly above it. Each peak is associated to the click that caused it (there will be more than one peak per flash if PWM is present), and the delay between click and light increase is measured. </p>"},{"location":"automation/mouse_latency_testing/#the-test-allows-us-these-customizations","title":"The test allows us these customizations :","text":"<ul> <li>V-sync mode - Allows to simulate V-sync through device</li> <li>Fake CPU load - Allows us to simulate latency due to CPU</li> <li>Fake GPU load - Allows us to simulate latency due to GPU</li> <li>Test Time - Allows us to set the run time of the test</li> </ul> <p>Input lag(Manual test) - This feature allows to test using a Modified Mouse, Test machine and Target Machine. </p> <p></p>"},{"location":"automation/mouse_latency_testing/#steps-involved-in-testing","title":"Steps involved in testing:","text":"<ol> <li>Connect LDAT device to test machine.</li> <li>Attach the MODIFIED Mouse to LDAT using 2 wires and connect it to the external port of LDAT device.</li> <li>Connect the Usb of the mouse to the Target Machine. </li> <li>Press it regular intervals, slow down if there is noticiable delay.</li> </ol> <p>If the target machine and test machine are the same, we don't need a modified mouse as the device can generate clicks.</p>"},{"location":"automation/mouse_latency_testing/#things-to-remember","title":"Things to remember","text":"<p>We have to place the sensor at the exact spot where there is supposed to be a change of light, preferably muzzle flash</p>"},{"location":"automation/mouse_latency_testing/#for-best-results","title":"For best results:","text":"<ol> <li>Do tests in a dark room.</li> <li>Hold the device still while measuring</li> <li>Disable dynamic contrast, local dimming, ambient light, power saving etc.</li> <li>Disable picture enhancement(eg. Gpu)</li> <li>Display shadowplay, msi afterburner and any capture software</li> <li>If using a TV, use the game mode</li> <li>Use the full range of RGB</li> <li>Don't force V-sync, let the application control it.</li> <li>Don't connect multiple displays</li> <li>Connect directly to device and avoid streaming over network</li> </ol>"},{"location":"automation/mouse_latency_testing/#creating-the-hardware","title":"Creating the Hardware","text":""},{"location":"automation/mouse_latency_testing/#proposed-wiring","title":"Proposed Wiring","text":""},{"location":"automation/plan/","title":"Outline of the Automation Plan","text":""},{"location":"automation/plan/#phase-1-development-of-automation-framework","title":"Phase 1: Development of Automation Framework","text":"<ul> <li>Phase 1 of this process focuses on developing the infrastructure for the Automation Framework. The infrastructure consists of the components on the appliances that provide automation services and the components on the test controllers that interact and use the automation services on the appliance.</li> </ul>"},{"location":"automation/plan/#phase-1-delivery","title":"Phase 1 delivery","text":"<ul> <li>The key delivery of phase 1 will be a functional Automation Framework that provides an automated test capable of being configured, automatically executed, and capable of self-reporting from all appliance types</li> </ul>"},{"location":"automation/plan/#phase-1-time-scales","title":"Phase 1 Time Scales","text":"<ul> <li>Phase 1 is 100% complete and completed in December 2021 (based on current staffing).</li> </ul>"},{"location":"automation/plan/#phase-2-development-of-automation-technologies","title":"Phase 2: Development of Automation Technologies","text":"<ul> <li>Phase 2 of this project focuses on developing a range of technologies that can extend our functional coverage. At the end of phase 1 we will have a capability to test the core functionality of making and breaking connections. To extend this we need to add automation components to the target PC. These will work in sympathy with the automated tests running on the appliance. This will allow us target areas like resolution changing, audio and USB.</li> <li>The proposal is to develop a set of components that can be invoked from the Test Controller or the Appliance. These components will carry out local functions on the target that assist in automated testing of all appliance interfaces.</li> <li>USB Proposals - Draft</li> </ul>"},{"location":"automation/plan/#phase-2-delivery","title":"Phase 2 delivery","text":"<ul> <li>The key delivery of phase 2 will be an Automation Framework that covers 80% of Appliance functionality. This additional test coverage will be capable of being configured from a central controller. This increased test coverage will fold into the existing connection test, supporting automated execution, and self-reporting from all appliance types</li> </ul> <p>The test cases will cover basic connectivity, Interoperability, connection switching, audio testing, performance metrics, parameterised testing of connection phases, shared and private modes, graceful and non-graceful exit.  </p>"},{"location":"automation/plan/#phase-2-time-scales","title":"Phase 2 Time Scales","text":"<ul> <li>Phase 2 is 40% complete and is scheduled to complete in September 2022 (based on current staffing). Completed Test Cases are here</li> <li>Current Sprint details are here</li> </ul>"},{"location":"automation/plan/#phase-3-development-of-comprehensive-test-suites","title":"Phase 3: Development of Comprehensive Test Suites","text":"<ul> <li>Phase 3 of this project builds on Phase 1 and Phase 2 to provide a complete set of itemised, trackable Test Cases that provide automated test coverage for up to 80% of the product's functionality. Each test case will have an association with a Product Requirement in the DPS. Test Cases can be encapsulated into targeted Test Runs to target specific type of testing. These would include:</li> <li>Developer Smoke Testing.</li> <li>Targeted Soak Testing of specific functional areas.</li> <li>Smoke Testing of new releases by the Test Group.</li> <li>Targeted Soak Testing of specific areas on new releases by the Test Group.</li> <li>Reliability Soak Testing for new releases by the Test Group.</li> </ul> <p>The major functional goal for phase 3 is the addition of USBR coverage.</p>"},{"location":"automation/plan/#phase-3-delivery","title":"Phase 3 delivery","text":"<ul> <li>The key delivery of phase 3 will be a complete Automation Framework that covers 80% of Appliance functionality and maps a number of test suites to DPS requirements. Test results will be stored and available for comparative analysis across different releases. The testing will allow early detection of issues and will be programmed to identify known and new problems so that developer time on analysis can be dramatically reduced.</li> <li>The Automation Framework will evolve as new products are developed and additional features are added. Beyond the delivery of Phase 3 there is a maintenance requirement to keep the Automated Test Framework running reliably as the product evolves. This is likely to consume 50% of the teams time on an ongoing basis.</li> </ul>"},{"location":"automation/plan/#phase-3-time-scales","title":"Phase 3 Time Scales","text":"<ul> <li>Phase 3 is not started and is scheduled to complete in March 2023 (based on current staffing and priorities).</li> </ul> <p>Note: The introduction of Enhanced OSD re-architecture will cause a refactoring of core libraries. This is likely to impact the above estimates.</p> <p>To Investigate</p> <p>-Chamelium - Googles, Display Emulation TEchnology - XDC 2019 | Display hardware testing with Chamelium</p>"},{"location":"automation/results/","title":"Results REST API and Results Server","text":"<p>The Results REST API and the results server are currently hosted on machine 10.211.129.241 - The REST API is on port 8001 - The Results server is on port 3030</p>"},{"location":"automation/results/#managing-the-docker-container","title":"Managing the Docker Container","text":""},{"location":"automation/results/#start-the-container","title":"Start the container","text":"<p>The Docker container running the Results REST API, the Results Server and the Mongo database containing the results is hosted on 10.211.129.241. </p> <p>You can ssh into this machine using terraterm with the credentials user=\"developer\" and pass=\"cloud$1\" to run these commands, or you can open the machine from the vm list.</p> <p>To check the process is running, ssh into the machine and run the command <pre><code>docker ps\n# if the docker container is running you should see something similar to the following\n# CONTAINER ID        IMAGE                       COMMAND                    CREATED             STATUS                 PORTS\n# 0fc0a0c776f6        automationnodejs_results    \"docker-entrypoint.s\u00e2\u20ac\u00a6\"   19 hours ago        Up 19 hours            0.0.0.0:3030-&gt;3030/\n# c55310c213ce        automationnodejs_rest       \"docker-entrypoint.s\u00e2\u20ac\u00a6\"   19 hours ago        Up 19 hours            0.0.0.0:8001-&gt;8000/\n# 48286737d085        mongo                       \"docker-entrypoint.s\u00e2\u20ac\u00a6\"   19 hours ago        Up 19 hours            0.0.0.0:27017-&gt;27017/\n# if the images don't show up the processes aren't running\n# to start the processes, use the following command\ncd ~/AutomationNodejs\ndocker-compose build\ndocker-compose up -d\n</code></pre></p> <p>The docker-compose build command builds the image, implementing any changed to the code. Docker-compose up starts the image, -d being the option for detached mode.</p>"},{"location":"automation/results/#updating-the-code","title":"Updating the code","text":"<p>If there are new changes to the code, you'll have to stop the image, run an update, rebuild the image and then rerun the image again.</p> <p>There is a script on the docker machine to do this.</p> <pre><code>./update.sh\n\n#docker-compose logs results rest testcaserest &gt; docker-logs.log\n#docker-compose stop\n#svn update\n#docker-compose build\n#docker-compose up -d\n</code></pre> <p>This script exports the logs to a file called docker-logs.log. Every time the container is restarted the logs are wiped, so this allows the user to view the logs from the previous build. docker-compose stop brings down the containers, and svn update updates the code. docker-compose build builds the containers using their respective dockerfiles, and docker-compose up -d runs the containers in the background.</p> <p>This script will automatically run every Sunday but can be called anytime the containers need to be updated.</p> <pre><code>docker images\n# REPOSITORY                  TAG                 IMAGE ID            CREATED             SIZE\n# automationnodejs_rest       latest              3e3662263ce5        19 hours ago        1GB\n# automationnodejs_results    latest              9f89ad82856c        19 hours ago        951MB\n# &lt;none&gt;                      &lt;none&gt;              4a70ad063c27        19 hours ago        1GB\n</code></pre> <p>Since there was a change in the REST API code since the last build, docker created a new image with the latest changed in code called automationnodejs_rest, and renamed the previous build to \"\". Although  is no longer used, it's still taking 1GB of space on the harddrive, so we can remove is using either of the following. <pre><code>docker image prune # removes any dangling images (doesnt always work)\n\ndocker image rm IMAGE ${IMAGE ID} # replacing ${IMAGE ID} with the image ID listed with the &lt;none&gt; image (has to be run manually for each dangling image) \n</code></pre>"},{"location":"automation/results/#view-the-docker-container-logs","title":"View the Docker container logs","text":"<p>You can also view the latest logs from the docker-compose container using the built-in command \"docker-compose logs\".</p> <pre><code>cd ~/AutomationNodejs\n\ndocker-compose logs -f -t --tail=10\n# Usage: logs [options] [SERVICE...]\n\n# Options:\n#     --no-color          Produce monochrome output.\n#     -f, --follow        Follow log output.\n#     -t, --timestamps    Show timestamps.\n#     --tail=\"all\"        Number of lines to show from the end of the logs\n#                         for each container.\n</code></pre> <p>Each docker process will be labelled differently, with a different color indicating a difference process.  The --tail option changes how many lines of logs you want to see from previous processes. --tail=10 will show you the last 10 lines from the results-server, results-database and rest-api.</p> <p>The results-database checks in very regularly which may flood the logs. You can disable the results-database logs by specifying the services results and rest after the docker-compose logs command.</p> <pre><code>docker-compose logs -f -t --tail=25 rest results\n</code></pre> <p>The results logs will display any information logged by the results server routes or app.js. This may be useful for debugging, or letting you know any results that a user deleted or edited from the website. They will also display whenever a user navigates to a new endpoint.</p> <p>The rest logs will display any new results that get added to the database through the appliances.</p>"},{"location":"automation/results/#nightly-tests","title":"Nightly Tests","text":""},{"location":"automation/results/#overview","title":"Overview","text":"<p>The testcase_rest_api docker container runs a rest api for posting test case results to the test case results database. When the /run endpoint receives a POST request, it will change the site_id file in TestCaseGenerator to the build specified in the nightly post request and run app.js. When the jenkins nightly build completes it will send a POST request to this endpoint and run app.js. If you want to run app.js manually on the docker machine you can send a POST request to http://10.211.129.241:3090/run</p> <pre><code>{\n    \"build\": {\n        \"parameters\": {\n            \"NODE\": \"Nightly machine test\"\n        }\n    }\n}\n</code></pre> <p>This will run app.js through to completion with the site_location set to \"Nightly machine test\". Usually the app.js process can't easily be stopped without stopping and restarting the container.</p>"},{"location":"automation/results/#running-individual-tests-on-the-machine","title":"Running individual tests on the machine","text":"<p>You can follow these steps to run an individual test on the docker machine.</p> <ol> <li>SSH into the docker machine 10.211.129.241 using credentials developer and cloud$1</li> <li>run the command <code>docker exec -it testcase_rest_api bash</code> to enter the testcase rest api container in interactive mode</li> <li><code>cd TestCaseGenerator</code></li> <li>Run testcase as you normally would on your machine <code>npm run testcase $REFERENCE 1 true</code></li> </ol> <p>The testcase should run normally on the docker machine and post it's result to the server, although this method isn't recommended unless you're unable to run the testcase on your own AutomationNodejs instance.</p>"},{"location":"automation/results/#troubleshooting","title":"Troubleshooting","text":"<ol> <li>Tests not finishing - If the Nightly tests run up until a certain test and stop, that indicates that a test case got stuck and couldn't finish. Run the test case that didn't finish using characterise.js on your own machine and check to see if it finishes. Run the update.sh script on the docker machine in ~/AutomationNodejs to update and restart the service.</li> </ol>"},{"location":"automation/results/#results-database","title":"Results database","text":"<p>The results are currently stored in a mongo database located at mongodb://10.211.129.241/testautomations. The resuts are stored in JSON format, using the following model...</p> <pre><code>{\n    date: String,\n    appliance_ipaddess: String,\n    status: String,\n    stage: String,\n    cycle: Number,\n    technology: String,\n    target: String,\n    mode: String,\n    access_mode: String,\n    usbr: String,\n    audio: String,\n    test_type: String,\n    target_name: String,\n    target_type: String,\n    software_version: String,\n    bugs: String,\n    comment: String,\n}\n</code></pre> <p>As new tests are completed , the test case reporter will upload the results to the mongodb database, and the webpage will be able to retreive the results from here.</p>"},{"location":"automation/results/#results-rest-api","title":"Results REST API","text":"<p>The REST API allows the user to post a result to the database. To post a result, it should be in the format</p> <pre><code>{\n    status: \"completed\" or \"failed\" or \"stopped\",\n    cycle: Number,\n    stage: String,\n    appliance_ipaddess: String,\n    test_type: String,\n    technology: String,\n    mode: \"YUV\" or \"LOSSLESS\",  //compression mode\n    access_mode: \"Private unicast\" or \"Shared municast\" or \"Shared multicast\",\n    USBR: \"On\" or \"Off\",\n    audio: \"On\" or \"Off\",\n    iterations: Number,\n    target_type: String,\n    target: String,  //target device ip address\n    software_version: String,\n    bugs: String,\n}\n</code></pre> <p>The date and time will be automatically added to the result. Any other properties not included will be left as undefined in the database. If the program encounters an error, it will still store the result locally but it won't save it in the database.</p> <p>To add a result to the database, post an object in the above format to http://10.211.129.241:8001/result using Postman or cURL in the body property.</p> <p></p>"},{"location":"automation/results/#results-server","title":"Results Server","text":"<p>The results server is written in node.js and express, and it currently allows the user to view and edit the results from the automated testing scripts. When you first visit the address 10.211.129.241:3030, the server will automatically redirect you to the results page and sort the results by newest first. Below is a diagram of the makeup of the webpage and how the scripts interact with each other</p> <p></p>"},{"location":"automation/results/#results-page","title":"Results Page","text":"<p>The results page is the main page of the results server. It displayed the results in a coloured table, and allows the searching and sorting of data from the database. The results are paginated in pages of 9 results each, you can switch pages using the buttons to the bottom left of the table. The bugs column of the table provides links to the jira page of any known bugs.</p>"},{"location":"automation/results/#colour-coding","title":"Colour Coding","text":"<p>The colour coding is done as follows:</p> <ul> <li>Red: Failed result</li> <li>Orange: Passed, but with a known error.</li> <li>Yellow: Passed, but with an unknown error.</li> <li>Green: Passed with no errors.</li> <li>Blue: None of the above (shouldn't occur naturally, unless a new stage is added in a future update).</li> </ul> <p>There is an image to the top right of the table, showing a key for the colour coding.</p>"},{"location":"automation/results/#sorting","title":"Sorting","text":"<p>If you want to sort by a different header, click the table header you want to sort by and the page should refresh with the new sorting parameters. If you click the header again the sorting will switch between ascending and descending.</p>"},{"location":"automation/results/#searching","title":"Searching","text":""},{"location":"automation/results/#basic-search","title":"Basic Search","text":"<p>By clicking the filter button above the results table, a modal form will open with a basic search text box, an advanced search text box, checkboxes for status, compression mode, access mode, usbr and audio and a display of all the filters you have currently active. The basic search box allows the user to search across all fields which contain a specified substring. For example, if you searched for \"129.31\" it would show any results which have the substring \"129.31\" in either the Appliance IP address or the Target Device.</p> <p>The display will only show the filters you have previously selected. They're currently displayed under the advanced_search bar as labels, however this might have to change in the future</p>"},{"location":"automation/results/#advanced-search","title":"Advanced Search","text":"<p>The advanced search function is still in development. As of right now, all search terms must start with \"WHERE\" and each term is seperated with an \"AND\". You can assign a value to a property to search for using the \"=\" character. eg. WHERE status = completed AND usbr = On</p> Argument Description WHERE Signifies the start of the search string, the search will only be submitted if it starts with WHERE. AND Executes AND logic between two search statements. OR Executes OR logic between two search statements. HAS Searches for substring of selected property. e.g access_mode HAS Shared returns results with Shared Municast or Shared Multicast = Searched for string of selected property. e.g cycle = 1001 returns results that are on cycle 1001, but none that include 1001 <p></p>"},{"location":"automation/results/#bug-links","title":"Bug links","text":"<p>In the bugs column of the table, the bug names themselves will be displayed as a hyperlink. Clicking this hyperlink will take you to the jira page for that particular bug, for ease of use.</p>"},{"location":"automation/results/#changing-the-amount-of-results-per-page","title":"Changing the amount of results per page","text":"<p>To the right of the pagination buttons is a text box that allows the user to select the amount of results to display on a page. The minimum value this can go down to is 10 and the max is 50.</p>"},{"location":"automation/results/#admin-page","title":"Admin page","text":"<p>The admin page contains all the filter and sort functions from the results page. When you click a table row, the id will display below the table and an open form button will appear. Clicking open form will open a modal with text fields for all the properties of the result, a button to delete the result submit the changes you made, and to close the modal form.</p> <p></p>"},{"location":"automation/results/#edit-form","title":"Edit Form","text":"<p>After clicking open form, a modal form will open with fields for each of the result properties. The database ID for the result is listed at the top of the form. Using this modal, you can delete a result, make changes to any of it's fields and save a comment. The comment can currently only be viewed in this modal form.</p> <p></p>"},{"location":"automation/results/#test-case-results-page","title":"Test Case Results Page","text":"<p>The test case results page shows the results of any recently run test cases. You can also view the information for any existing test case by selecting it in the list to the left of the webpage. The results themselves allow for pagination and the deleting of resutls. By flicking the switch below the table, a new column will appear with buttons beside each result. The user can click on the button beside the result they want to delete to delete it.</p> <p></p>"},{"location":"automation/source_pc/","title":"Source PC Automation","text":"<p>As part of automating testing of Transmitter and Receiver devices it must be possible to remotely control the source PC connected to the Transmitter. To achieve this the proposal is to run a REST server on the source PCs to invoke the functionality needed. This application will be called the <code>Source PC Automation Server</code>.</p>"},{"location":"automation/source_pc/#setting-up-a-target-pc","title":"Setting Up A Target PC","text":""},{"location":"automation/source_pc/#nomachine","title":"NoMachine","text":"<p>NoMachine is a tool we use to remote access the PCs without logging out the current user. </p> <p>Download the latest version of NoMachine and go through the install process. Reboot when prompted to restart. To check the service is running open the windows start menu and search for nomachine service.   Nomachine service will automatically run at startup and should broadcast the pc name and ip to other pcs with nomachine installed on the same network. Ideally the PC should have a static IP Address though.</p>"},{"location":"automation/source_pc/#setting-a-static-ip-address","title":"Setting a static IP Address","text":"<p>The IP Management Portal is where we request new static IP Addresses.</p> <p>If you don't have an account on the management portal, you can contact an admin to get an account or reserve an ip address for you. To reserve an IP Address click the Request IP button on the dashboard, and select a Range from the list, stating your purpose in the input field. A html alert will tell you if you're successful or not, if unsuccessful try a different range.</p> <p>After reserving an IP Address you have to change the IP Address on the PC itself.</p> <ol> <li>Open the control panel and click on network and internet.</li> <li>Click on Networks and Sharing Center</li> <li>Open the change adapter settings link in the left navbar, right-click the active ethernet adapter and open the properties.</li> <li>open the ipv4 settings and change the IP Address to your reserved IP.</li> <li>Change the subnet mask to 255.255.248.0 and the gateway to 10.211.128.1</li> <li>Change the main DNS server to 8.8.8.8 and the backup to 8.8.4.4</li> <li>Save settings and close.</li> </ol>"},{"location":"automation/source_pc/#setting-up-avatar","title":"Setting up Avatar","text":"<p>The avatar video we use is located in the AutomationTools directory on the nas drive</p> <p>//10.211.128.208/shared_area/AutomationTools/source_pc/avatar_60fps.mkv</p> <p>For the source_pc rest api to be able to play this video, it should be copied into the user's Videos folder. C:/Users/BBOX/Videos</p> <p>VLC link</p> <p>VLC will be needed to play the video automatically. Download the latest installer from this webpage and open the file, following the instructions given.</p> <p>Another thing to keep in mind is that vlc must be added to PATH first. To add vlc to PATH...</p> <ol> <li>Open windows file explorer, right-click on \"This PC\" and select properties. Navigate to Advanced System Settings.</li> <li>From the Advanced System Settings, click on Environment Variables.</li> <li>Under System Variables, locate and select Path and click Edit.</li> <li>Add a new Path and enter the location for vlc.exe. By default, this is usually C:/Program Files/VideoLAN/VLC/</li> </ol>"},{"location":"automation/source_pc/#setting-up-nircmd-and-multimonitortool","title":"Setting up nircmd and multimonitortool","text":"<p>NirCmd link</p> <p>MultiMonitorTool link</p> <p>Download the zip files from the above links. Create a folder called nirsoft in the C:/ directory and place nircmd.exe and multimonitortool.exe executables from the downloaded zip files inside.</p>"},{"location":"automation/source_pc/#setting-up-source-pc-rest-api-on-new-pc","title":"Setting up source pc rest api on new PC","text":"<p>To set up the source pc rest api on a new source pc you will need the following dependencies...</p> <ul> <li>nircmd</li> <li>vlc</li> <li>python 3.7 (or above)</li> <li>Flask (installed using pip)</li> <li>Tortoise SVN (to update the rest api when changes are made)</li> </ul>"},{"location":"automation/source_pc/#installing-python","title":"Installing python","text":"<p>Download the python installer from the link above and run the installer. Follow the on-screen instructions and restart the system if needed.</p> <p>You can check if you have python installed by typing python into the command line. If you enter the python interpreter, python is installed on your machine and you can close the interpreter by typing exit() into the command line.</p>"},{"location":"automation/source_pc/#installing-the-source-pc-automation-rest-server","title":"Installing the source pc automation rest server","text":"<p>The url for the source pc automation folder is as follows - svn://10.211.128.12/automation/trunk/ApplianceAutomation/source_pc_automation.</p> <p>Download the TortoiseSVN installer from the following link and follow the installers steps to install. After you've installed TortoiseSVN, create a folder in the user's Documents folder called source_pc_automation. Right-click on this folder and select the svn checkout option.  </p> <p>You can then input the svn url shown above and enter your credentials. The files automation_server.bat, automation_server.vbs, server.py and setup.bat should be added to the folder. Run the setup.bat file to start the python virtual environment and install Flask.</p> <p>You should now be able to run the automation_server.bat file to start the server. The pc will need nircmd, MultiMonitorTool and VLC installed to run avatar and change the monitor settings.</p>"},{"location":"automation/source_pc/#running-on-startup","title":"Running on startup","text":"<p>The python server is running on startup on all the PC's in the testrig at the moment.</p> <p>Steps to add server.py to windows startup...</p> <ol> <li>Open windows Run program and enter shell:startup</li> <li>Open the source pc automation folder and copy the automation_server.bat and the automation_vlc.bat files into the startup folder.</li> <li>You can also check if the app launches correctly by running automation_server.bat. The output should look like this... </li> </ol> <p></p>"},{"location":"automation/source_pc/#video-automation","title":"Video Automation","text":"<p>To begin with the automation of Video testing will be the focus of the <code>Source PC Automation Server</code>. The following functionality will be required</p> <ul> <li>Resolution change on multiple monitors</li> <li>Sync loss on multiple monitors</li> <li>Sync enable on multiple monitors</li> <li>Read current resolution for a given monitor</li> <li>Dump report on current monitors for traceability</li> <li>Enable video test application on a particular monitor</li> </ul> <p>A number of different tools will be needed to facilitate the above requirements.</p>"},{"location":"automation/source_pc/#resolution-change","title":"Resolution Change","text":"<p>The tool NirCmd from NirSoft can be used to set the resolution of any connected monitor. Below are the full options for the <code>setdisplay</code>option</p> <p>Info</p> <p><code>setdisplay {monitor:index/name} [width] [height] [color bits] {refresh rate} {-updatereg} {-allusers}</code></p> <p>Changes your display settings. The [width] and [height] parameters represents the number of pixels on your screen. The [color bits] parameter represents the number of colors shown on your screen (8 - 256 color, 16 - 16bit color, 24 - 24bit color, and so on). {refresh rate} is an optional parameter that specifies the monitor refresh rate. If you specify the {-updatereg} parameter, the new settings will be saved in the Registry. If you specify both {-updatereg} and {-allusers} parameters, the new settings will be saved in the Registry for all users. If you have multiple monitors, you can use the optional monitor parameter, which specifies for which monitor you want to change the display settings. You can specify the monitor by index (0 for the first monitor, 1 for the second one, and so on) or by specifying a string in the system monitor name. The monitor name can be found in the Device manager of Windows: Right click on the monitor item, and then choose 'Properties'. The string displayed in the 'location' field is the monitor name. Example: <pre><code>setdisplay 800 600 24 -updatereg\nsetdisplay 1024 768 24 90\nsetdisplay 1024 768 8\nsetdisplay monitor:1 1024 768 24 90\nsetdisplay monitor:name1 1024 768 24 90\n</code></pre></p> <p>As an example of our use case we can set the resolution of the primary monitor to 3840x2160@60Hz with the following command</p> <p><code>nircmd.exe setdisplay 3840 2160 32 60</code></p>"},{"location":"automation/source_pc/#sync-loss-onoff","title":"Sync Loss On/Off","text":"<p>The tool MultiMonitorTool from NirSoft can be used to enable/disable any monitor connected to the PC with the following command</p> <pre><code>#Disable first monitor\nMultiMonitorTool.exe /disable 1\n#Disable second monitor\nMultiMonitorTool.exe /disable 2\n#Disable both monitors\nMultiMonitorTool.exe /disable 1 2\n#Enable first monitor\nMultiMonitorTool.exe /enable 1\n#Enable second monitor\nMultiMonitorTool.exe /enable 2\n#Enable both monitors\nMultiMonitorTool.exe /enable 1 2\n</code></pre>"},{"location":"automation/source_pc/#read-current-monitor-configuration","title":"Read Current Monitor Configuration","text":"<p>The tool MultiMonitorTool from NirSoft can be used to save the current Monitor configuration to a text file using the following command</p> <pre><code>#Saves the current configuration into the same folder as the exe\nMultiMonitorTool.exe /SaveConfig config.txt\n</code></pre> <p>An example of the output can be seen below</p> <pre><code>[Monitor0]\nName=\\\\.\\DISPLAY1\nMonitorID=MONITOR\\BBX0004\\{4d36e96e-e325-11ce-bfc1-08002be10318}\\0010\nBitsPerPixel=32\nWidth=1920\nHeight=1080\nDisplayFlags=0\nDisplayFrequency=60\nDisplayOrientation=0\nPositionX=0\nPositionY=0\n[Monitor1]\nName=\\\\.\\DISPLAY2\nMonitorID=MONITOR\\BBX0001\\{4d36e96e-e325-11ce-bfc1-08002be10318}\\0008\nBitsPerPixel=32\nWidth=3840\nHeight=2160\nDisplayFlags=0\nDisplayFrequency=60\nDisplayOrientation=0\nPositionX=1920\nPositionY=0\n</code></pre>"},{"location":"automation/source_pc/#run-avatar","title":"Run Avatar","text":"<p>To launch avatar in fullscreen mode and on repeat, we can use VLC to run the below command to launch the video <pre><code>vlc C:\\Users\\BBOX\\Videos\\avatar.mkv --fullscreen --loop --one-instance\n</code></pre></p> <p>The --one-instance parameter ensures that there will only ever be one instance of vlc open at a time, meaning sending a get request to the /run_avatar multiple times won't open multiple avatar videos playing at the same time.</p>"},{"location":"automation/source_pc/#endpoints","title":"Endpoints","text":"<p>The URL for a request is http://{IP of PC}:5000/{endpoint}</p>"},{"location":"automation/source_pc/#get-requests","title":"GET Requests","text":"<ol> <li>/run_avatar       - Runs the avatar video in fullscreen mode and on repeat from the Videos folder.</li> <li>/get_monitor_info - Retreives info about the connected monitors to each PC</li> </ol>"},{"location":"automation/source_pc/#put-requests","title":"PUT Requests","text":"<ol> <li>/set_resolution  - Sets the display resolution for one head from the PC <pre><code>{\n    \"head\": \"which video output to set resolution of.\",\n    \"refresh\": \"refresh rate of monitor\",\n    \"xres\": \"x resolution of video feed\",\n    \"yres\": \"y resolution of video feed\",\n}\n</code></pre></li> <li>/set_sync_loss   - Turns off the monitor connected to the PC <pre><code>{\n    \"monitor\": \"name of monitor to turn off\",\n}\n</code></pre></li> <li>/set_sync_enable - Turns on the monitor connected to the PC <pre><code>{\n    \"monitor\": \"name of monitor to turn on\",\n}\n</code></pre></li> </ol>"},{"location":"automation/status/","title":"Introduction","text":"<p>The automation framework Emerald appliances will provide scripted (automated) testing of appliance devices. The Framework will provide Test Coverage in the following areas:</p> <ul> <li>Nightly Build Validation</li> <li>Developer Testing</li> <li>New Release functional testing in System Test</li> </ul>"},{"location":"automation/status/#status","title":"Status","text":""},{"location":"automation/status/#july-2022","title":"July 2022","text":""},{"location":"automation/status/#summary","title":"Summary","text":"<ul> <li> <p>Details of the current Sprint is here</p> </li> <li> <p>Phase 2 of the project is in progress. Around 80 Test Cases have been completed and run as part of the nightly build.</p> </li> <li>The goal is to add a few test cases every week.</li> <li>The changes for the concurrent OSD project require refactoring to all tests, this is in progress and we have started running initial tests.</li> <li>Emerging Test Cases are Here</li> </ul>"},{"location":"automation/status/#most-recent-tasks","title":"Most Recent Tasks","text":""},{"location":"automation/status/#summary-of-work","title":"Summary of work","text":"<ul> <li>Ensure all test cases are passing and running reliably</li> <li>Starting to implement VM based tests - hitting issues with artifacts</li> <li>Working on shared test cases</li> <li>Reviewed Alex's test cases to determine delta against automation testing. Meet with Ronan and agreed to select a subset of tests to target next.</li> <li>Evaluated latest OpenLDAT prototype - need to modify switch mechanism on modified mouse.</li> </ul>"},{"location":"automation/status/#eoin","title":"Eoin","text":"<ul> <li>Off this week</li> <li>Additional tasks as per Jira Task List</li> <li></li> </ul>"},{"location":"automation/status/#johnos","title":"johnos","text":"<ul> <li>Reviewing code and directing work for Eoin, Roy and Arup</li> <li>Additional tasks as per Jira Task List</li> </ul>"},{"location":"automation/status/#arup","title":"Arup","text":"<ul> <li>Working with Eoin to ensure that automations run reliably each night</li> <li>Developing automations for VMs</li> <li>Reviewed Alex's test cases and agreed areas of focus for next phase of automation. </li> </ul>"},{"location":"automation/status/#roy","title":"Roy","text":"<ul> <li>Evaluating LDAT, trying to incorporate OpenGL based screen flash</li> <li>Working on Documentation </li> </ul>"},{"location":"automation/summary/","title":"Emerald Automated Test FrameWork","text":""},{"location":"automation/summary/#core-concepts","title":"Core Concepts","text":"<p>The automation framework Emerald appliances will provide scripted (automated) testing of appliance devices. The Framework will provide Test Coverage in the following areas:</p> <ul> <li>Nightly Build Validation</li> <li>Developer Testing</li> <li>New Release functional testing in System Test</li> </ul> <p>The primary purpose of this development is to ensure that the software we build is automatically tested each night after a build completes. The technology developed has other benefits in the validation of the product during test, but the tests are a way for developers to ensure that the software they deliver to test undergoes a level of regression test before evaluation by the test group.</p>"},{"location":"automation/summary/#nightly-builds","title":"Nightly Builds","text":"<p>Nightly builds will trigger an automatic run of a subset of test cases on hardware dedicated to the purpose. The results of these tests will be summarised and sent to Jenkins to integrate into the current build System. An initial integration is available at Nightly Build Integration</p>"},{"location":"automation/summary/#developer-testing","title":"Developer Testing","text":"<p>Developer Tests are a set of specific test cases run over a given number of iterations. These tests will be required before a any significant code changes can be checked in. The Test Cases can be organised into specific functional areas.</p>"},{"location":"automation/summary/#new-release-testing","title":"New Release Testing","text":"<p>The Automation Framework will also reduce the amount of manual testing carried out by System Test by automating a large percentage of the product test.</p>"},{"location":"automation/system_latency/","title":"System Latency Tester","text":""},{"location":"automation/system_latency/#references","title":"References","text":"<ul> <li>Alex's Guide to Testing System Latency</li> </ul>"},{"location":"automation/system_latency/#how-it-works","title":"How it Works","text":"<ul> <li>Using a modified mouse the user clicks on an application on the screen connected to the RX.</li> <li>The System Latency Tester based on a ATMega32U4 device records the time of this click through sampling an input pin on the ATMega32U4 which is connected to the modified mouse. (T1)</li> <li>The System Latency Tester then waits for the screen to flash in response to the mouse click.</li> <li>It observes this screen flash by monitoring an input voltage connected to a light sensor. Once the voltage exceeds a certain threshold (due to transition from black to white pixels) a second time is recorded. (T2)</li> <li>Both the time of the original mouse click (T1) and the time of the screen flash (T2) are sent to a measurement PC.</li> <li>The difference between these times is the overall system latency (T2 - T1).</li> <li>On average, we see a system latency of 128 msecs. Values are normally distributed around this mean value.</li> <li>Our KVM system generally contributes 48 msecs of this overall latency of 128 msecs, the other 80 Msec is the base line latency of the system which can be measured by removing the kvm from the system and running the same test. The standard deviation of the base latency is smaller than the KVM latency indicating a greater variation in the KVM latency, but both distributions are normal without skew.</li> <li>Remember we are simply measuring the time from when a mouse button is clicked to the exact moment the screen updates. I believe this represents true system latency and is the most accurate way of measuring. Mouse latency is a subset of this and cannot be measured without further analysis.</li> </ul>"},{"location":"automation/system_latency/#initial-measurements","title":"Initial Measurements","text":"<p>The initial results from the system latency tester with an EMD SH PE DP TX with an EMD SH PE RX were as follows:</p> Test Scenario Overall System Latency Baseline System Latency KVM Contributed Latency Static Screen 128 ms 80 ms 48 ms Video Playing 111 ms 66 ms 44 ms"},{"location":"automation/system_latency/#verification-of-the-accuracy-of-the-results","title":"Verification of the Accuracy of the Results","text":"<p>The System Latency accuracy was confirmed by creating a screen capture of two adjacent monitos. One is attached directly to the target PC, the second is connected to the Receiver. A digital clock is then presented and the output of the monitors is recorded by a camera. An analysis of the results show:</p> <ul> <li>Average added Emerald latency for static screen = 65 ms</li> <li>Average added Emerald latency for video playing = 64 ms</li> </ul> <p>Thus, the values from this test are largely consistent with the results from the System latency tester.</p> <p></p>"},{"location":"automation/system_latency/#more-accurate-results","title":"More Accurate Results","text":"<p>The latency tester can also be used to measure the KVM contribution more accurately by: - Measuring latency with KVM in line - Repeating measure with KVM system removed and the modified mouse connected directly to the target PC - Subtracting the first from the second.</p> <p>Remember we should measure the following characteristics</p> <ul> <li>Mean Latency</li> <li>Standard Deviation</li> <li>Normality Test of the data</li> </ul>"},{"location":"automation/system_latency/#test-records-template","title":"Test Records Template","text":"<ul> <li>System Latency Records Template</li> </ul>"},{"location":"automation/techzilla/","title":"Techzilla User Manual","text":""},{"location":"automation/techzilla/#what-is-techzilla","title":"What is Techzilla","text":"<p>Techzilla is an application that allows Blackbox Test personnel and support engineers to diagnose issues with Blackbox appliances. It has been designed to allow a user to interact with a number of devices at once some that common functions can be performed in parallel.\u200b\u200b</p> <p>The current version of techzilla is 1.1.3</p>"},{"location":"automation/techzilla/#installation","title":"Installation","text":"<p>Copy the zip file into a directory of our choosing (The file can be found n shared_area/johnos/techzilla.zip)</p> <p></p> <p>Extract the contents into a directory</p> <p></p> <p>Launch the application for the first time</p> <p></p> <p>Copy the zip file into a directory of our choosing (The file can be found n shared_area/johnos/techzilla.zip)</p> <p></p> <p>Restart the application and select the preferences option</p> <p></p> <p>The preferences window will appear</p> <p></p> <ul> <li>Set the appliance file path to a location where you wish to store and apliance files you create. By default, this is stored in C:\\Users{username}\\AppData\\Roaming\\appliances.</li> <li>Set the appliance file path to a location where you wish to store and apliance files you create. By default, this is stored in C:\\Users{username}\\AppData\\Roaming\\appliances.</li> <li>Similarily, set the location for where you wish to store log files retrieved from the appliances. By default, this is stored in C:\\Users{username}\\AppData\\Roaming/\\ogs</li> <li>Add the correct user name and password for the SSH and REST services.</li> </ul> <p></p> <p>Your changes are automatically saved once you close the dialog</p>"},{"location":"automation/techzilla/#creating-a-desktop-shortcut","title":"Creating a desktop shortcut","text":"<p>A desktop shortcut for Techzilla can be created by selecting the application, right clicking and then selecting send to desktop</p> <p></p> <p></p>"},{"location":"automation/techzilla/#importing-device-files","title":"Importing device files","text":"<p>When Techzilla is installed it creates a sample appliance file called samplesoak, but Techzilla can import device files created by another user. A device file defines a collection of appliances used in a particular soak or test setup.</p> <p></p> <p>Select the file to import. The device files are stored in tar format.</p> <p></p> <p>Close and re-open Techzilla</p> <p>The imported device files will appear on the soak bar as shown.</p> <p></p>"},{"location":"automation/techzilla/#adding-a-soak","title":"Adding a soak","text":"<p>You can add a new soak from the main screen using the add new soak button in the soak bar, or the + icon in the header.</p> <p></p> <p>After clicking add a new soak, a window will pop up asking you where you want to save your soak, and what to call it. After you click save file, the soak will be created.</p>"},{"location":"automation/techzilla/#editing-a-soak","title":"Editing a soak","text":"<p>We can select a soak by clicking on it.</p> <p></p> <p>Once selected, this becomes the active soak.</p> <p>We can edit this soak by selecting the device manager icon.</p> <p></p> <p>This will launch the device management window as shown.</p> <p></p> <p>We can then edit devices, add new devices or copy this soak to a new appliance file.</p> <p>We will start by making a copy of the soak by using the saveas option.</p> <p></p> <p>Save the new file into the designated appliance directory.</p> <p></p> <p>The newly saved file will then appear in the soak selector bar</p> <p></p> <p>We can now delete, add or edit devices in the soak file. To delete a device from the collection select the (x)</p> <p></p> <p>To edit an existing device use the pen icon.</p> <p></p> <p>A dialog will open with the device details.</p> <p></p> <p>To save, simply close the dialog.</p> <p>Devices in a soak can be either active (selected) or inactive. The commands on the left hand side only apply to selected devices.</p> <p>To select a device, click the select box.</p> <p></p> <p>To select or deselect all devices, use the main selection icons at the top.</p> <p></p> <p>To add a device use the plus icon.</p> <p></p>"},{"location":"automation/techzilla/#deleting-a-soak","title":"Deleting a soak","text":"<p>To delete a soak, select the soak in the soak bar and click (x) in the header bar</p> <p></p> <p>A confirmation window will show, asking if you want to delete this soak. After clicking yes the soak will be removed from it's directory.</p>"},{"location":"automation/techzilla/#opening-a-putty-session","title":"Opening a putty session","text":"<p>On the main screen, you can see the selected devices in your selected soak to the right of the window. Double click on the ip address of the deivce to highlight it, and right click to open the options. Open a putty session for device should be an option.</p> <p></p>"},{"location":"automation/techzilla/#main-screen-and-layout","title":"Main Screen and Layout","text":""},{"location":"automation/techzilla/#connection-tests","title":"Connection Tests","text":""},{"location":"automation/techzilla_installer/","title":"TechZilla Installer Instructions","text":""},{"location":"automation/techzilla_installer/#installing-the-requirements","title":"Installing the requirements","text":"<p>You'll need two programs to create a techzilla installer, NSIS to compile the script and HM NIS Edit to create the script.</p>"},{"location":"automation/techzilla_installer/#nsis","title":"NSIS","text":"<p>The techzilla installer is written in NSIS script, which is a system for creating flexible windows installers. You'll need to download NSIS to compile the scripts written by HM NIS Edit.</p> <p>You can find the latest version of NSIS in https://nsis.sourceforge.io/Download where the latest version at this time is 3.08. Any later releases should also be able to compile past scripts.</p>"},{"location":"automation/techzilla_installer/#hm-nis-edit","title":"HM NIS Edit","text":"<p>HM NIS Edit is a popular editor for NSIS. It has a useful Script Wizard walks the user through creating a complex script with just a few options. Although it doesn't create the whole script we need, it gets the majority of the script written and it's easiest to edit the script from there before compiling instead of writing a custom script from scratch.</p> <p>You can download the latest version here here http://hmne.sourceforge.net/index.php#Download</p>"},{"location":"automation/techzilla_installer/#using-the-hm-nis-edit-wizard","title":"Using the HM NIS Edit Wizard","text":"<p>Once you install HM NIS Edit, open the application using the desktop shortcut or the executable. The text editor should open first, which you can use to write scripts with color highlighting and text attributes.</p> <p></p> <p>Click the icon of the wand to the top right of the window to open the script wizard. It'll open to an introductory screen where you can just click next to proceed.</p> <p></p> <p>After the intro page, the wizard will ask you for the application information. The important fields are title and version, the rest can be left blank.</p> <p></p> <p>On the setup page the only thing you need to change is the installer name. you can leave it as Setup.exe although you'll get a warning from the compiler if you leave it at that.</p> <p></p> <p>The directory page lets you set a default directory for the app to install the files to. It defaults to program files x86, this isn't too important since the user can change the directory using the installer. NSIS has several directory name constants, they should all be listed here. You can optionally use a license by navigating to the LICENSE file in techzilla-win32-ia32.</p> <p></p> <p>The application files window is where you will add the techzilla files. Delete the existing default files and rename the main section to techzilla. </p> <p></p> <p>Then you can click the add directory tree button in the files selction and navigate to your techzilla folder. HM NIS will automatically add all the files inside that directory</p> <p></p> <p>Your files section should look like the screenshot below when you're done.</p> <p></p> <p>When the installer finishes it will ask the user if they want to run after they finish. For this just copy the executable directory from the program field.</p> <p></p> <p>The finish page is next, just check the save script and convert to relative paths checkboxes and save the script in a location with access to your techzilla installation. </p>"},{"location":"automation/techzilla_installer/#editing-the-script","title":"Editing the Script","text":"<p>The current installer script will allow the user to install techzilla, create a start menu shortcut, create a desktop shortcut and run on finish. It won't remove the previous installation or let the user decide whether they want to create a desktop shortcut or not. </p>"},{"location":"automation/techzilla_installer/#user-install-level","title":"User install level","text":"<p>To make the installer usable for non-admin users, add the following line in the initial definitions- <pre><code>RequestExecutionLevel user\n</code></pre></p> <p></p>"},{"location":"automation/techzilla_installer/#optional-desktop-shortcut","title":"Optional Desktop Shortcut","text":"<p>At the moment, the installer creates a desktop shortcut at the end of the installation whether the user wants it or not. So the first thing you need to do is navigate down to the bottom of Section \"techzilla\" SEC01</p> <p></p> <p>Where you see CreateShortcut \"$DESKTOP...\" you should erase that line</p> <p></p> <p>You can repurpose the readme checkbox at the finish page of the installer to act as a create desktop shortcut box.</p> <p></p>"},{"location":"automation/techzilla_installer/#remove-previous-files","title":"Remove Previous Files","text":"<p>To force the installer to remove any existing files in the installation directory, add this line before where the files get copied onto the user's machine.</p> <p>RMDir /r \"$INSTDIR\\techzilla-win32-ia32\"</p> <p>/r removes all files within the directory, if you exclude /r, the directory will only be removed if empty.</p> <p></p>"},{"location":"automation/techzilla_installer/#compiling-the-script","title":"Compiling the script","text":"<p>To compile the script, open Make NSIS and click compile scripts. Then copy the techzilla-script file into the C:\\Users\\josulli\\Portable\\techzilla\\release-builds\\techzilla-win32-ia32 directory.</p> <p></p> <p>From here, drag your script file into the NSIS window. NSIS will run the compiling process when you select NSIS-&gt; compile-default, and once it's finished successfully the compile window will turn green. It may also turn yellow or red if there are errors or warnings in your script.</p> <p></p> <p>The resulting installer will be located in the same directory your script was stored.</p> <p>Output: \"C:\\Users\\josulli\\Portable\\techzilla\\release-builds\\techzilla-win32-ia32\\techzilla_installer.exe\"</p>"},{"location":"automation/techzilla_installer/#uploading-the-script","title":"Uploading the script","text":"<p>We store the latest version of the script in //10.211.128.208/shared_area/AutomationTools/techzilla_installers</p> <p>When you're finished compiling the installer, make sure it's named techzilla_installer.exe and drag the it into the shared folder mentioned above.</p>"},{"location":"automation/test_equipment/","title":"Development Test Equipment Set Up in the Lab","text":""},{"location":"automation/test_equipment/#add-a-new-device-to-the-upgrade-list","title":"Add a new device to the upgrade list","text":"<p>When a new build is available for the appliances, jenkins will upgrade all the appliances on the testrig with the latest build. To add a new device to the list of devices intended for upgrade, we have to add it's IP address to the list using Jenkins.</p> <ol> <li>Sign into the Jenkins webpage using the credentials username=developer and password=cloud$1</li> <li>From the homepage select the branch we upgrade the devices on, currently we are using the develop branch </li> <li>Click the configure option on the left navbar </li> <li>Scroll down to the Office365 header and add your new device IP Address in the IP parameter list as shown in the image. </li> <li>Save and exit</li> </ol> <p>Once your new device is saved to the list it should upgrade with the other devices each night there is a new build available.</p>"},{"location":"automation/test_equipment/#windows-10-vm","title":"Windows 10 VM","text":"<p>We use a windows 10 VM hosted on the 10.211.128.204 VM machine for use in automated VM testing.</p> <ul> <li>name: embedded_rdp_automation_1</li> <li>ip address: 10.211.128.239</li> <li>User: BBOX</li> <li>Password: cloud$1</li> </ul> <p>This VM has the source pc automation requirements and server installed and set up to run on startup, similar to the physical source PC's.</p>"},{"location":"automation/test_equipment/#upgrading-the-labtestrig-devices-using-script","title":"Upgrading the labtestrig devices using script","text":"<p>The upgrade_labtestrig_enh-osd.sh script is located in the HostTools/Tools directory of the Emerald repository at svn://svn-server/Emerald/branches/HostTools/Tools. It uses the nightly_upgrade.sh script with the branch develop_enhanced_osd and the list of devices in the lab testrig, so the script can be run without any arguments.</p> <p>Because this shell script calls the nightly_upgrade.sh script, the upgrade_enh_osd.sh script should be called from HostTools/Tools, or you can copy both scripts to another location on your machine.</p>"},{"location":"automation/test_equipment/#setting-a-custom-resolution","title":"Setting a Custom Resolution","text":"<p>In some cases, an external device won't accept the transmitter EDID and will limit the PC resolution to 1920x1080p. To get around this we can set a custom resolution on the PC connected to the intermittent device (splitter etc) before the transmitter.</p>"},{"location":"automation/test_equipment/#finding-the-graphics-settings","title":"Finding the graphics settings","text":"<p>To find your graphics driver, open the device manager from the start menu and expand the display adapters menu. Each brand of graphics adapter should have it's own control panel. The one shown below is AMD.</p> <p></p>"},{"location":"automation/test_equipment/#amd-radeon-graphics-settings","title":"AMD Radeon Graphics Settings","text":"<p>The AMD Radeon Graphics Software can be opened by right clicking the Radeon Software icon in your taskbar and selecting Open Radeon Software. </p> <p></p> <p>In the Radeon Software navigate to the settings by clicking the gear in the top right corner of the window and select the display tab to open the display settings. There should be a collapsed Custom Resolutions section for adding custom resolutions.</p> <p></p> <p>In the custom resolutions tab, add a new resolution and enter the following settings. When you select CVT_reduced blanking most of the settings should adjust to the resolution you entered. The resolution is 3840x2160. When done, save the changes and exit. The custom resolution should now be available from the windows display settings.</p> <p></p>"},{"location":"automation/test_equipment/#intel-graphics","title":"Intel Graphics","text":"<p>The Intel Graphics Control Panel isn't always located in the taskbar like the Radeon Software. If it's not in the taskbar, open up the start menu and search for intel graphics until you find the app shown.</p> <p></p> <p>From the Intel Graphics sidebar, click Display and click the plus next to the resolution to add a custom resolution.</p> <p></p> <p>Enter the following settings.</p> <p></p> <p>The new custom resolution should now appear in the windows display settings resolutions.</p> <p></p>"},{"location":"automation/test_equipment/#labtestrigjson","title":"labtestrig.json","text":"<p> Download labtestrig.json </p>"},{"location":"automation/testcase_code_walkthrough/","title":"Test Code Walkthrough","text":"<ul> <li>Create two new targets</li> <li>One for the first shared connection</li> <li>The second for the Private Connection</li> <li>The target objects are configured by loading the appropriate json files</li> </ul> <pre><code>  target_1 = new Target(\"4KTX_1\");\n  target_2 = new Target(\"4KTX_2\");\n  target_1.load();\n  target_2.load();\n</code></pre> <ul> <li>Create two Test Asset Configurations, one for each RX that will be used.</li> <li>Add a target to each configuration</li> <li>We create a Test Case and then configure it using the TestAssetConfiguration Class. A Test Case may have one or more TestAssetConfiguration Classes. These are typically the configuration associated with the devices on which the test will be run (normally Receiver devices).</li> <li>A Test Asset Configuration can have one or more Targets, these are normally Transmitter (TX) devices.</li> </ul> <pre><code>  //we create a Test Case and then configure it using the TestAssetConfiguration Class.\n  testCase_1 = new TestCase();\n  testAssetConfiguration1 = new TestAssetConfiguration();\n  testAssetConfiguration1.fileName = \"tstconfig1.json\"; //Optional\n  testAssetConfiguration1.load();\n  testAssetConfiguration1.addTarget(target_1);\n\n  testAssetConfiguration2 = new TestAssetConfiguration();\n  testAssetConfiguration2.fileName = \"tstconfig2.json\"; //Optional\n  testAssetConfiguration2.load();\n  testAssetConfiguration2.addTarget(target_2);\n</code></pre> <ul> <li>Create a Test Case Object</li> <li>Assign the two configuration objects to the Test Case</li> <li>Request the Test Case Object to setup the boards, by downloading any required files</li> </ul> <pre><code>  testCase_1.load(); \n  testCase_1.addTestConfiguration(testAssetConfiguration1);\n  testCase_1.addTestConfiguration(testAssetConfiguration2);\n  // Generate the configuration Files and gather any additional scripts required\n  testCase_1.generateConfigurationFiles();\n  // Download the Configurations to the test assets\n  testCase_1.downLoadToTestAssets();\n  await sleep(1000); //wait for the files to download\n</code></pre> <ul> <li>Run the Test Case</li> <li>The Test Case Object will make the first connection using the details supplied in Test Asset Configuration #1.</li> <li>The Test Case Object will make the second connection using the details supplied in Test Asset Configuration #2.</li> <li>The Test Case Object will report pass or failure depending on the result.</li> </ul> <pre><code>  //Create the commands we want to run\n  testCase_1_a_command = new Command(\n    testAssetConfiguration1.testScriptReference,\n    \"/usr/local/\"\n  );\n\n  //In this case there are two of them one for each receiver\n  testCase_1_b_command = new Command(\n    testAssetConfiguration2.testScriptReference,\n    \"/usr/local/\"\n  );\n\n  // Create the ssh Commands over which these commands will be run\n  sshCommand_1_a = new SSHCommand(testAssetConfiguration1.ipaddress);\n  sshCommand_1_a.command = testCase_1_a_command;\n\n  sshCommand_1_b = new SSHCommand(testAssetConfiguration2.ipaddress);\n  sshCommand_1_b.command = testCase_1_b_command;\n  sshCommand_1_b.command.expecteOutcome = \"Test Case 1 Passed\";\n\n  console.log(\n    `Executing the Test Case on ${testAssetConfiguration1.ipaddress}`\n  );\n</code></pre> <ul> <li>We use a Command Sequencer to run the two commands we have created</li> </ul> <pre><code>  //runs commands in sequence, the second command depends on the first command finishing sucessfully\n  commandSequencer = new CommandSequencer(sshCommand_1_a, sshCommand_1_b);\n  commandSequencer\n    .run()\n    .then((result) =&gt; {\n      if (commandSequencer.result == \"Passed\")\n        console.log(\"Test Case 1 Passed\");\n      else\n        console.log(\"Test Case 1 Failed: \" + commandSequencer.failureDetails);\n    })\n    .catch((error) =&gt; {\n      console.log(error);\n    });\n}\n</code></pre> <ul> <li>We then run Clean up scripts to terminate any remaining applications associated with the test on each asset. <pre><code>function cleanup() {\n  //Create the commands we want to run for cleanup\n  cleanup_1_a_command = new Command(\n    testAssetConfiguration1.cleanupScriptReference,\n    \"/usr/local/\"\n  );\n  cleanup_1_b_command = new Command(\n    testAssetConfiguration2.cleanupScriptReference,\n    \"/usr/local/\"\n  );\n</code></pre></li> <li>Create the SSH commands to launch these <pre><code>  sshCommand_1_c = new SSHCommand(testAssetConfiguration1.ipaddress);\n  sshCommand_1_c.command = cleanup_1_a_command;\n  // Execute the command for the first board\n  sshCommand_1_c\n    .run()\n    .then((result) =&gt; {\n      console.log(\"Cleaning up 1 a\");\n    })\n    .catch((error) =&gt; {\n      console.log(\"Error cleaning up 1 a\");\n    });\n</code></pre></li> <li>Execute the command for the second board <pre><code>  sshCommand_1_b = new SSHCommand(testAssetConfiguration2.ipaddress);\n  sshCommand_1_b.command = cleanup_1_b_command;\n  sshCommand_1_b\n    .run()\n    .then((result) =&gt; {\n      console.log(\"Cleaning up 1 b\");\n    })\n    .catch((error) =&gt; {\n      console.log(\"Error cleaning up 1 b\");\n    });\n}\n</code></pre></li> </ul>"},{"location":"automation/testcases/","title":"Emerald Automated Test Cases","text":""},{"location":"automation/testcases/#core-concepts","title":"Core Concepts","text":"<p>A test case is an object that describes a specific Test. Each Test Case has a unique reference number, For example:</p> <ul> <li>Test Case 1 - Ensure a TX in an existing shared connection rejects a private connection from an RX attempting to connect to the existing session.</li> <li>Test Case 2 - Ensure a TX in an existing private connection rejects a private connection from an RX attempting to connect to the existing session.</li> <li>Test Case 3 - Ensure a TX in an existing lossless shared connection rejects a shared connection from an RX attempting to connect to the existing session in compressed (YUV) mode.</li> <li>Test Case 4 - Ensure a TX in an existing lossless shared connection accepts a shared connection from an RX attempting to connect to the existing session in lossless mode.</li> </ul>"},{"location":"automation/testcases/#configuring-the-test-case","title":"Configuring the Test Case","text":"<p>Test Cases are configured using json files. The files expose the main properties of a connection as a set of value-pairs. Many of these values can just be let at default, but the format gives considerable flexibility to the person configuring the test if it is required.</p> <p>For the purpose of explanation, we will use Test Case 1 as a reference. </p> <p></p> <p>Ensure a TX in an existing shared connection rejects a private connection from an RX attempting to connect to the existing session.</p> <p>It has the following properties. First a top level configuration describing the Test Case and what we expect to happen.</p> <pre><code>{\n    \"_description\": \"Ensure a TX in an existing shared connection rejects a private connection from an RX attempting to connect to the existing session\",\n    \"_reference\": 1,\n    \"_expectedOutcome\": \"The second connection should fail with an exit code of 204\",\n    \"_testConfigurations\": [],\n    \"_fileName\": \"testcase_10.json\",\n    \"_filePath\": \"./temp\",\n    \"_backupBeforeSave\": false\n}\n</code></pre> <p>The actual Test Cases are run on Test Assets . By Test Asset we mean any piece of hardware involved in the test. The most common form of test asset is an appliance (an RX or TX), but test assets can also be target PCs, USB devices or other equipment that will be used in a test. There is an assumption that every Test Asset can be configured in some way to assist the running of the test.</p> <p>The Test Manager knows how to configure there assets for a particular test. The person specifying the test has considerable flexibility in how a Test Asset can be configured.</p>"},{"location":"automation/testcases/#test-asset-configurations","title":"Test Asset Configurations","text":"<p>Examining our chosen Test Case in more detail then, the first configuration configures an RX device to make the first shared connection to a designated TX device.</p> <p>The Test Asset Configurations describes how the Test Assets  (RX devices in this case) will be configured to execute this particular test. </p> <p>The first configuration configures an RX device to make a shared connection to a TX.</p> <pre><code>{\n    \"_description\": \"Shared Connection\",\n    \"_testAssetReference\": \"12\",\n    \"_testCaseReference\": \"1\",\n    \"_testScriptReference\": \"test_case_1_a.sh\",\n    \"_testCaseConfigurationReference\": \"test_case_1_a\",\n    \"_ipaddress\": \"192.168.1.160\",\n    \"_deviceType\": \"\",\n    \"_qualityLevel\": 1,\n    \"_persistence\": \"Off\",\n    \"_view_only\": \"Off\",\n    \"_videoSourceOptimization\": \"Off\",\n    \"_hidConfiguration\": \"basic\",\n    \"_videoWait_count\": 20,\n    \"_fileName\": \"tstconfig1\",\n    \"_filePath\": \"./temp\",\n    \"_targets\": [],\n    \"_iterations\": 1000,\n    \"_killOnFail\": \"On\",\n    \"_saveTXlog\": \"On\",\n    \"_version\": \"Connection Test Config V1.3.1\",\n    \"_tx_password\": \"barrow1admin_12\",\n}\n</code></pre> <p>Once the test has been defined the only parameter that needs to be set is the IP address of the RX we wish to use.</p> <p>The second configuration configures a second RX device to make a private connection to a the same TX. <pre><code>{\n    \"_description\": \"Private Connection\",\n    \"_testAssetReference\": \"11\",\n    \"_testCaseReference\": \"1\",\n    \"_testScriptReference\": \"test_case_1_b.sh\",\n    \"_testCaseConfigurationReference\": \"test_case_1_b\",\n    \"_ipaddress\": \"192.168.1.166\",\n    \"_deviceType\": \"\",\n    \"_qualityLevel\": 1,\n    \"_delayBetweenConnections\": 10,\n    \"_testMode\": \"\",\n    \"_persistence\": \"Off\",\n    \"_view_only\": \"Off\",\n    \"_videoSourceOptimization\": \"Off\",\n    \"_hidConfiguration\": \"basic\",\n    \"_videoWait_count\": 20,\n    \"_fileName\": \"tstconfig2\",\n    \"_filePath\": \"./temp\",\n    \"_targets\": [],\n    \"_iterations\": 1000,\n    \"_killOnFail\": \"On\",\n    \"_saveTXlog\": \"On\",\n    \"_tx_password\": \"barrow1admin_12\",\n}\n</code></pre></p> <p>Again, once the test has been defined the only parameter that needs to be set is the IP address of the RX we wish to use.</p> <p>Each RX in this test scenario must be associated with a target, we must define two target objects, one for each RX.</p> <p>The target for the first RX is set to a shared connection, we expect an exit code of 173 which will indicate a successful connection</p> <pre><code>{\n    \"_name\": \"4KTX_1\",\n    \"_ipaddress\": \"192.168.1.169\",\n    \"_frame_count\": 300,\n    \"_compression_mode\": \"LOSSLESS\",\n    \"_audio\": \"Off\",\n    \"_usbr\": \"Off\",\n    \"_extended_desktop\": \"Off\",\n    \"_shared\": \"On\",\n    \"_expected_exit_code\": 173,\n    \"_fileName\": \"target_4KTX_1.json\",\n    \"_filePath\": \"./temp\"\n}\n</code></pre> <p>The target for the second RX is set to a private connection, we expect an exit code of 204 which will indicate a rejection because the target is already in a shared connection</p> <pre><code>{\n    \"_name\": \"4KTX_2\",\n    \"_ipaddress\": \"192.168.1.169\",\n    \"_frame_count\": 300,\n    \"_compression_mode\": \"LOSSLESS\",\n    \"_audio\": \"Off\",\n    \"_usbr\": \"Off\",\n    \"_extended_desktop\": \"Off\",\n    \"_shared\": \"Off\",\n    \"_expected_exit_code\": 204,\n    \"_fileName\": \"target_4KTX_2.json\",\n    \"_filePath\": \"./temp\"\n}\n</code></pre> <p>Again for this test, once the test has been defined, the TX ipaddress is the only parameter that needs to be set by a user.</p>"},{"location":"automation/testcases/#test-execution","title":"Test Execution","text":"<p>The Test is executed in the Automation Framework. The process is as follows:</p>"},{"location":"automation/testcases/#first-stage","title":"First Stage","text":"<ul> <li>Create two new targets</li> <li>One target for the first shared connection</li> <li>The second target for the private Connection</li> <li>The target objects are configured by loading the appropriate json files</li> </ul>"},{"location":"automation/testcases/#second-stage","title":"Second Stage","text":"<ul> <li>Create two Test Asset Configurations, one for each RX that will be used.</li> <li>Add a target from each of the configurations above to each configuration.</li> <li>Create a Test Case Object.</li> <li>Add the two configuration objects to the Test Case, we now have a fully configured Test Case.</li> <li>Request the Test Case Object to setup the boards, by downloading any required files.</li> </ul>"},{"location":"automation/testcases/#third-stage","title":"Third Stage","text":"<ul> <li>Run the Test Case</li> <li>The Test Case Object will make the first connection using the details supplied in Test Asset Configuration #1.</li> <li>The Test Case Object will make the second connection using the details supplied in Test Asset Configuration #2.</li> <li>The Test Case Object will report pass or failure depending on the result.</li> <li>For this Test Case, we expect the second private connection to fail with a code of 204. If this happens the Test Case passes.</li> </ul>"},{"location":"automation/testcases/#fourth-stage","title":"Fourth Stage","text":"<ul> <li>Run the clean-up scripts, remove any test configuration, terminate any application that ran as part of the test.</li> </ul>"},{"location":"automation/testcases/#creating-new-test-cases","title":"Creating New Test Cases","text":"<p>New test cases can be created by taking these basic configurations and modifying them, for example, consider Test Case 2:</p> <p>Ensure a TX in an existing private connection rejects a private connection from an RX attempting to connect to the existing session.</p> <p>This can be created by modifying the first target configuration file from the previous example, so that it makes a private connection and then modifying target configuration for the second receiver to check for an exit code of 202.</p> <p>The process of developing test cases then requires someone to create and adapt the necessary configuration files. As new features are added additional test cases can be created to verify the connection logic associated with those features. These Test Cases can be run by both development or Test to automate the testing of much of the core logic. The goal is to build a full library of Test Cases that can be invoked as part of every new test drop or proposed release. These Test Cases can also be run for a given number of iterations to isolate intermittent issues.</p> <p>If a Test Case fails, the Test Manager can interrogate the Test Assets to determine the reason for failure. It can associate the failure with any known bugs or issues or prompt for the creation of new issues.</p>"},{"location":"automation/testcases_list/","title":"Emerald Automated Test Cases","text":""},{"location":"automation/testcases_list/#list-of-test-cases","title":"List of Test Cases","text":"Test Case Reference Description Status Test Assets Required Details Comments 1 Ensure a 2K TX SH in an existing shared connection rejects a private connection from an 2K RX SH attempting to connect to the existing session Implemented  Two 2K SH RXs and a 2K TX SH The second 2K RX SH should fail with an exit code of 203 2 Ensure a 2K TX SH in an existing private connection rejects a private connection from an 2K RX SH attempting to connect to the existing session Implemented  Two 2K SH RXs and a 2K TX SH The second 2K RX SH should fail with an exit code of 202 3 Ensure a 4K TX without an existing connection accepts a private connection from an 4K RX attempting to connect in private_mode Implemented  One 4K RX and one 4K TX Verified by waiting for connection established file 4 Ensure a 2K TX SH without an existing connection accepts a shared connection from a 2K RX SH attempting to connect in shared municast mode Implemented  One 2K RX SH and one 2K TX SH 5 Ensure a 4K TX without an existing connection accepts a optimised shared connection from an 4K RX attempting to connect in shared multicast mode Implemented  One 4K RX and one 4K TX 6 Ensure a 4K TX in an existing multicast shared connection rejects a municast shared connection from an 2K RX SH attempting to connect to the existing session with an exit code of 208 Implemented  One 2K RX SH, one 4K RX and one 4K TX uses a dual template, can use TC1 or 2 as an example - Arup 7 Ensure a 2K TX SH in an existing municast optimised shared connection accepts a municast shared connection from a 4K RX attempting to connect in municast shared mode to the existing session Implemented  One 2K TX SH, one 4K RX and one 2K TX SH 8 Ensure a 4K RX in private_mode receives the connection accepted message 15 milli-seconds after the connection is launched to a 4K TX Implemented  One 4K RX, and one 4K TX Parametric test, confirms that connection is accepted within a defined window 9 Ensure a 2K RX SH in private_mode receives the connection accepted message 80 milli-seconds after the connection is launched to a 2K TX SH Implemented  One 2K RX SH and one 2K TX SH Parametric test, confirms that connection is accepted within a defined window 10 Ensure a 2K RX DH in private_mode receives the connection accepted message 80 milli-seconds after the connection is launched to a 2K TX DH Implemented  One 2K RX DH and one 2K TX DH Parametric test, confirms that connection is accepted within a defined window 11 Ensure a 2K RX SH in shared municast mode receives the connection accepted message 80 milli-seconds after the connection is launched to a 2K TX SH Implemented  One 2K RX SH, and one 2K TX SH 12 Ensure a 4K RX in shared multicast mode receives the connection accepted message 15 milli-seconds after the connection is launched to a 4K TX Implemented  One 4K RX and one 4K TX 13 Ensure a 4K RX in shared municast mode receives the connection accepted message 80 milli-seconds after the connection is launched to a 2K TX SH Implemented  One 2K RX, one 4K TX <p>| 14        | Ensure a 4K RX in private_mode sees the first video frame in less than 60 milli-seconds after the connection is launched to a 4K TX       | Implemented          | One 4K RX, and one 4K TX     | Parametric test, confirms that performance is  within a defined window|  | | 19        | Ensure a 4K RX in shared municast mode sees the first video frame 50 milli-seconds after the connection is launched to a 2K TX SH          | Implemented          | One 4K RX, one 2K TX SH  | Parametric test, confirms that performance is  within a defined window |    | | 20        | Ensure a 4K RX in private_mode has a retry rate of 0% after the connection is launched to a 2K TX SH         | Implemented          | One 4K RX, one 2K TX SH   |  Parametric test, confirms that performan| 15       | Ensure a 2K RX SH in private_mode sees the first video frame in less than 50 milli-seconds after the connection is launched to a 4K TX        | Implemented         | One 2K RX and one 4K TX     | Parametric test, confirms that performance is  within a defined window|  | | 16        | Ensure a 4K RX in private_mode sees the first video frame 35 milli-seconds after the connection is launched to a 2K TX SH          | Implemented         | One 4K RX, one 2K TX SH    | Parametric test, confirms that performance is  within a defined window|  | | 17        | Ensure a 2K RX SH in shared municast mode sees the first video frame 350 milli-seconds after the connection is launched to a 2K TX SH      | Implemented           | One 2K RX SH, and one 2K TX SH     | Parametric test, confirms that performance is  within a defined window|    | | 18       | Ensure a 4K RX in shared multicast mode sees the first video frame 50 milli-seconds after the connection is launched to a 4K TX        | Implemented          | One 4K RX and one 4K TX     | Parametric test, confirms that performance is  within a defined window|    | ce is  within a defined window|   | | 21        | Ensure a 2K RX in shared municast mode has a retry rate of 0% after the connection is launched to a 2K TX       |  Implemented           | One 2K RX, and one 2K TX     |  Parametric test, confirms that performance is  within a defined window|   | | 22       | Ensure a 4K RX in shared multicast mode has a retry rate of 0% after the connection is launched to a 4K TX        | Implemented          | One 4K RX and one 4K TX     |  Parametric test, confirms that performance is  within a defined window|    | | 23        | Ensure a 4K RX in shared municast mode has a retry rate of 0% after the connection is launched to a 2K TX           | Implemented          | One 2K RX, one 4K TX    |  Parametric test, confirms that performance is  within a defined window|    | | 24        | Ensure a 4K RX in private lossless mode is rejected with a 207 error when it tries to connect to a 2K TX           | Implemented          | One 4K RX, one 2K TX    | The second RX should fail with an exit code of 207 |    |</p> <p>| 25        | For a resolution of 1920x1080 and a default quality level, Ensure a 4K RX in private lossless mode has an FPS of 47 FPS, a dropped frame count of 0, 2 minutes after it connects to a 4K TX if the target PC is playing Avitar full screen in VLC           | Implemented           | One 4K RX, one 4K TX    | Parametric test, confirms that performance is  within a defined window |   | | 26        | For a resolution of 1920x1080 and a default quality level, Ensure a SH 2K RX in private optimised mode has an FPS of 59 FPS,  a dropped frame count of 0 , 2 minutes after it connects to a 2K TX if the target PC is playing Avitar full screen in VLC           | Implemented         | One SH 2K RX, one 2K TX    | Parametric test, confirms that performance is  within a defined window | | | 27        | For a resolution of 3840x2160, Ensure a 4K RX in private lossless mode has an FPS of 47 FPS, a dropped frame count of 12, 2 minutes after it connects to a 4K TX if the target PC is playing Avitar full screen in VLC           | Implemented          | One 4K RX, one 4K TX    | Parametric test, confirms that performance is  within a defined window |     | | 28        | For a resolution of 3840x2160, Ensure a 4K RX in shared lossless mode has an FPS of 47 FPS,  a dropped frame count of 12, 2 minutes after it connects to a 4K TX if the target PC is playing Avitar full screen in VLC           | Implemented          | One 4K RX, one 4K TX    | Parametric test, confirms that performance is  within a defined window |   | | 29       | For a resolution of 1280X1024, Ensure a 4K RX in private optimised mode has an FPS of 59 FPS, a dropped frame count of 0, 2 minutes after it connects to a SH 2K TX if the target PC is playing Avitar full screen in VLC           | Implemented          | One 4K RX, one 2K TX    | Parametric test, confirms that performance is  within a defined window |   |</p> <p>Page 2</p> Test Case Reference Description Status Test Assets Required Details Comments 35 Ensure a 2K RX in a shared municast connection can switch to a previous connection to a 4K transmitter within 200 milli-seconds  Implemented  2 X 4K RX, 2 X 4K TX Parametric test, confirms that performance is  within a defined window Threshold updated to 300Ms from 250Ms 36 Ensure a 4K RX in a shared multicast connection can switch to a previous connection to a 4K transmitter within 200 milli-seconds Implemented  2 X 4K RX, 2 X 4K TX Parametric test, confirms that performance is  within a defined window use a dual template, can be based on 35 - Arup 37 Ensure a 2K RX in a shared municast connection can switch to a previous connection to a 4K transmitter within 200 milli-seconds Implemented  2 X 4K RX, 2 X 4K TX Parametric test, confirms that performance is  within a defined window use a dual template, can be based on 35 - Arup 38 Ensure a 2K RX in a private connection can switch to a previous connection to a 4K transmitter within 200 milli-seconds Implemented  One 4K RX, 2 X 4K TX Parametric test, confirms that performance is  within a defined window use a dual template, can be based on 35 - Arup 39 Ensure an attempt attempt to make a shared lossless connection from a 4K RX to a 2K TX is rejected with an error code of 207 Implemented  One 4K RX, 1 X 2K TX Logic test use a single template - Arup 40 Unplanned Leave:  a 4K RX 1 makes a shared multicast connection to a 4K TX. Make a second shared connection to that same 4K TX with RX 2. Cause an unplanned leave of RX 1 by rebooting the device. Ensure that we do not see an interruption in video to RX 2 greater than 500ms.  Implemented  Two 4K RX, 1 X 4K TX Parametric Test Requires a dual template 41 Unplanned Leave:  a 2K RX 1 makes a shared municast connection to a 4K TX. Make a second shared connection to that same 4K TX with RX 2. Cause an unplanned leave of RX 1 by rebooting the device. Ensure that we do not see an interruption in video to RX 2 greater than 500ms.  Implemented  1 2K RX, 1 4K RX, 1 X 2K TX Parametric Test Requires a dual template 42 Unplanned Leave:  a 2K RX 1 makes a shared municast connection to a 2K TX. Make a second shared connection to that same 2K TX with RX 2. Cause an unplanned leave of RX 1 by rebooting the device. Ensure that we do not see an interruption in video to RX 2 greater than 500ms.  Implemented  2 X 2K RX, 1 X 2K TX Parametric Test Requires a dual template <p>| 43        | For a resolution of 1920x1080 and a Quality Level of Best Quality, Ensure a SH 2K RX in private optimised mode has an FPS of 59 FPS,  a dropped frame count of 0 , 2 minutes after it connects to a SH 2K TX if the target PC is playing Avitar full screen in VLC           | Implemented          | One SH 2K RX, one 2K TX    | Parametric test, confirms that performance is  within a defined window |    uses single template, can be based on 25 - Arup  | | 44        | For a resolution of 1920x1080 and a Quality Level of Best Quality, Ensure a SH 2K RX in private optimised mode has an FPS of 59 FPS,  a dropped frame count of 0, 2 minutes after it connects to a 4K TX if the target PC is playing Avitar full screen in VLC           | Implemented          | One SH 2K RX, one 4K TX    | Parametric test, confirms that performance is  within a defined window |    uses single template, can be based on 25 - Arup  | | 45        | For a resolution of 1920x1080 and a Quality Level of Best Quality, Ensure a SH 2K RX in private optimised mode has and an average bandwidth on 136 Mbps, 2 minutes after it connects to a 4K TX if the target PC is playing Avitar full screen in VLC           | Implemented          | One SH 2K RX, one 4K TX    | Parametric test, confirms that performance is  within a defined window |    uses single template, can be based on 25 - Arup  | | 46        | For a resolution of 1920x1080 and a Quality Level of Best Quality, Ensure a SH 2K RX in private optimised mode has and an average bandwidth on 136 Mbps, 2 minutes after it connects to a 2K TX if the target PC is playing Avitar full screen in VLC           | Implemented          | One SH 2K RX, one SH 2K TX    | Parametric test, confirms that performance is  within a defined window |    uses single template, can be based on 25 - Arup  | | 47        | For a resolution of 1920x1080 and a Quality Level of Best Compression, Ensure a SH 2K RX in private optimised mode has an FPS of 59 FPS,  a dropped frame count of 0 , 2 minutes after it connects to a SH 2K TX if the target PC is playing Avitar full screen in VLC           |  Implemented          | One SH 2K RX, one SH 2K TX    | Parametric test, confirms that performance is  within a defined window |    uses single template, can be based on 25 - Arup  | | 48        | For a resolution of 1920x1080 and a Quality Level of Best Compression, Ensure a SH 2K RX in private optimised mode has an FPS of 59 FPS,  a dropped frame count of 0, 2 minutes after it connects to a 4K TX if the target PC is playing Avitar full screen in VLC           | Implemented          | One SH 2K RX, one 4K TX    | Parametric test, confirms that performance is  within a defined window |    uses single template, can be based on 25 - Arup  | | 49        | For a resolution of 1920x1080 and a Quality Level of Best Compression, Ensure a SH 2K RX in private optimised mode has and an average bandwidth on n Mbps, 2 minutes after it connects to a 4K TX if the target PC is playing Avitar full screen in VLC           | Implemented          | One SH 2K RX, one 4K TX    | Parametric test, confirms that performance is  within a defined window |    uses single template, can be based on 25 - Arup  | | 50        | For a resolution of 1920x1080 and a Quality Level of Best Compression, Ensure a DH 2K RX in private optimised mode has and an average bandwidth on n Mbps, 2 minutes after it connects to a 2K TX if the target PC is playing Avitar full screen in VLC           | Implemented          | One 2K RX, one 2K TX    | Parametric test, confirms that performance is  within a defined window |    uses single template, can be based on 25 - Arup  | | 51        | For a resolution of 3840x2160, Ensure a SH 2K RX in private optimised mode has an FPS of 59 (+/- 2 FPS) FPS,  a dropped frame count of 0 (+/- 1), 2 minutes after it connects to a 4K TX with scaling enabled if the target PC is playing Avitar full screen in VLC           | not Implemented          | One SH 2K RX, one 4K TX    | Parametric test, confirms that performance is  within a defined window | Blocked by the need to have a way of setting the desktop resolution - Eoin, Arup can still generate the test cases, single template, can be based on 26    | | 52        | For a resolution of 1920x1080 and a Quality Level of Best Compression, Ensure a SH 2K RX in private optimised mode has and an average bandwidth on n Mbps, 2 minutes after it connects to a 2K TX if the target PC is playing Avitar full screen in VLC           | Implemented          | One SH 2K RX, one SH 2K TX    | Parametric test, confirms that performance is  within a defined window |    uses single template, can be based on 25 - Arup  | | 53        | Ensure a 4K RX in private_mode receives the connection accepted message 8 milli-seconds after the connection is launched to a 2K TX SH          | Implemented         | One 4K RX, one 2K TX SH    | |  | | 54        | Ensure a 4K RX in shared municast mode receives the connection accepted message 80 milli-seconds after the connection is launched to a 2K TX DH          | Implemented         | One 4K RX, one 2K TX DH    | |  |</p> <p>| 56        | Ensure a 4K RX in private_mode sees the first video frame 35 milli-seconds after the connection is launched to a 2K TX DH          | Implemented         | One 4K RX, one 2K TX DH    | Parametric test, confirms that performance is  within a defined window|  | | 55       | Ensure a 2K RX DH in private_mode sees the first video frame in less than 50 milli-seconds after the connection is launched to a 4K TX        | Implemented         | One 2K RX SH and one 4K TX     | Parametric test, confirms that performance is  within a defined window|  | | 57        | Ensure a 2K RX DH in shared municast mode sees the first video frame 350 milli-seconds after the connection is launched to a 2K TX DH      | Implemented           | One 2K RX DH, and one 2K TX DH     | Parametric test, confirms that performance is  within a defined window|    | | 58        | Ensure a 4K RX in shared municast mode sees the first video frame 50 milli-seconds after the connection is launched to a 2K TX DH          | Implemented          | One 4K RX, one 2K TX DH  | Parametric test, confirms that performance is  within a defined window |    | | 59        | Ensure a 4K RX in private_mode has a retry rate of 0% after the connection is launched to a 2K TX DH          | Implemented          | One 4K RX, one 2K TX DH   |  Parametric test, confirms that performance is  within a defined window|   | | 60        | For a resolution of 3840x2160, Ensure a 4K TX in shared lossless mode has an FPS of 47 FPS,  a dropped frame count of 12, 2 minutes after it connects to 3 4K RXs if the target PC is playing Avitar full screen in VLC           | not Implemented          | 3 4K RX, one 4K TX    | Parametric test, confirms that performance is  within a defined window |  Blocked by the need to have a way of setting the desktop resolution - Eoin, Arup can still generate the test cases, single template, can be based on 26   | | 61        | Create a 2K SH TX to 2K SH RX Private connection with audio enabled. Ensure that we can detect audio on the RX by measuring the standard deviation of the samples in the audio buffer. The standard deviation should be greater than 20 for an active audio connection. | Implemented          | one 2K SH TX, one 2K SH RX    | Test confirms the audio is enabled for a connection and video is playing. |   | | 62        | Create a 2K SH TX to 2K SH RX  Shared connection with audio enabled. Ensure that we can detect audio on the RX by measuring the standard deviation of the samples in the audio buffer. The standard deviation should be greater than 20 for an active audio connection. | Implemented          | one 2K SH TX, one 2K SH RX    | Test confirms the audio is enabled for a connection and video is playing. |   | | 63        | Create a 2K SH TX to 2K DH RX  Private connection with audio enabled. Ensure that we can detect audio on the RX by measuring the standard deviation of the samples in the audio buffer. The standard deviation should be greater than 20 for an active audio connection. | Implemented          | one 2K SH TX, one 2K DH RX    | Test confirms the audio is enabled for a connection and video is playing. |   | | 64        | Create a 2K SH TX to 2K DH RX  Shared connection with audio enabled. Ensure that we can detect audio on the RX by measuring the standard deviation of the samples in the audio buffer. The standard deviation should be greater than 20 for an active audio connection. | Implemented          | one 2K SH TX, one 2K DH RX    | Test confirms the audio is enabled for a connection and video is playing. |   | | 65        | Create a 2K SH TX to 4K SH RX  Private connection with audio enabled. Ensure that we can detect audio on the RX by measuring the standard deviation of the samples in the audio buffer. The standard deviation should be greater than 20 for an active audio connection. | Implemented          | one 2K SH TX, one 4K SH RX    | Test confirms the audio is enabled for a connection and video is playing. |   | | 66        | Create a 2K SH TX to 4K SH RX Shared connection with audio enabled. Ensure that we can detect audio on the RX by measuring the standard deviation of the samples in the audio buffer. The standard deviation should be greater than 20 for an active audio connection. | Implemented          | one 2K SH TX, one 4K SH RX    | Test confirms the audio is enabled for a connection and video is playing. |   | | 67        | Create a 2K DH TX to 2K DH RX Private connection with audio enabled. Ensure that we can detect audio on the RX by measuring the standard deviation of the samples in the audio buffer. The standard deviation should be greater than 20 for an active audio connection. | Implemented          | one 2K DH TX, one 2K DH RX    | Test confirms the audio is enabled for a connection and video is playing. |   | | 68        | Create a 2K DH TX to 2K DH RX Shared connection with audio enabled. Ensure that we can detect audio on the RX by measuring the standard deviation of the samples in the audio buffer. The standard deviation should be greater than 20 for an active audio connection. | Implemented          | one 2K DH TX, one 2K DH RX    | Test confirms the audio is enabled for a connection and video is playing. |   | | 69        | Create a 2K DH TX to 2K SH RX Private connection with audio enabled. Ensure that we can detect audio on the RX by measuring the standard deviation of the samples in the audio buffer. The standard deviation should be greater than 20 for an active audio connection. | Implemented          | one 2K DH TX, one 2K SH RX    | Test confirms the audio is enabled for a connection and video is playing. |   | | 70        | Create a 2K DH TX to 2K SH RX Shared connection with audio enabled. Ensure that we can detect audio on the RX by measuring the standard deviation of the samples in the audio buffer. The standard deviation should be greater than 20 for an active audio connection. | Implemented          | one 2K DH TX, one 2K SH RX    | Test confirms the audio is enabled for a connection and video is playing. |   | | 71        | Create a 2K DH TX to 4K SH RX Private connection with audio enabled. Ensure that we can detect audio on the RX by measuring the standard deviation of the samples in the audio buffer. The standard deviation should be greater than 20 for an active audio connection. | Implemented          | one 2K DH TX, one 4K SH RX    | Test confirms the audio is enabled for a connection and video is playing. |   | | 72        | Create a 2K DH TX to 4K SH RX Shared connection with audio enabled. Ensure that we can detect audio on the RX by measuring the standard deviation of the samples in the audio buffer. The standard deviation should be greater than 20 for an active audio connection. | Implemented          | one 2K DH TX, one 4K SH RX    | Test confirms the audio is enabled for a connection and video is playing. |   | | 73        | Create a 4K SH TX to 4K SH RX Private connection with audio enabled. Ensure that we can detect audio on the RX by measuring the standard deviation of the samples in the audio buffer. The standard deviation should be greater than 20 for an active audio connection. | Implemented          | one 4K SH TX, one 4K SH RX    | Test confirms the audio is enabled for a connection and video is playing. |   | | 74        | Create a 4K SH TX to 4K SH RX Shared connection with audio enabled. Ensure that we can detect audio on the RX by measuring the standard deviation of the samples in the audio buffer. The standard deviation should be greater than 20 for an active audio connection. | Implemented          | one 4K SH TX, one 4K SH RX    | Test confirms the audio is enabled for a connection and video is playing. |   | | 75        | Create a 4K SH TX to 2K SH RX Private connection with audio enabled. Ensure that we can detect audio on the RX by measuring the standard deviation of the samples in the audio buffer. The standard deviation should be greater than 20 for an active audio connection. | Implemented          | one 4K SH TX, one 2K SH RX    | Test confirms the audio is enabled for a connection and video is playing. |   | | 76        | Create a 4K SH TX to 2K SH RX Shared connection with audio enabled. Ensure that we can detect audio on the RX by measuring the standard deviation of the samples in the audio buffer. The standard deviation should be greater than 20 for an active audio connection. | Implemented          | one 4K SH TX, one 2K SH RX    | Test confirms the audio is enabled for a connection and video is playing. |   | | 77        | Create a 4K SH TX to 2K DH RX Private connection with audio enabled. Ensure that we can detect audio on the RX by measuring the standard deviation of the samples in the audio buffer. The standard deviation should be greater than 20 for an active audio connection. | Implemented          | one 4K SH TX, one 2K DH RX    | Test confirms the audio is enabled for a connection and video is playing. |   | | 78        | Create a 4K SH TX to 2K DH RX Shared connection with audio enabled. Ensure that we can detect audio on the RX by measuring the standard deviation of the samples in the audio buffer. The standard deviation should be greater than 20 for an active audio connection. | Implemented          | one 4K SH TX, one 2K DH RX    | Test confirms the audio is enabled for a connection and video is playing. |   | | 79        | Create a 2K SH TX to 4K SH RX Private connection with audio disabled. Ensure that we cannot detect audio on the RX by measuring the standard deviation of the samples in the audio buffer. The standard deviation should be less than 20 for an active non-audio connection. |  Not Implemented          | one 2K SH TX, one 4K SH RX   | Test confirms the audio is disabled for a connection and video is playing. |   | | 80        | Ensure a 2K RX in private optimised mode has an FPS of 59 FPS, a dropped frame count of 0, 2 minutes after it connects to a VM if the target VM is playing Avitar full screen in VLC |  Not Implemented          | one VM, one 2K SH RX   | Test confirms the video stats for a connection and video is playing. |   |</p>"},{"location":"automation/testcases_list/#notes-on-additional-test-cases","title":"Notes on Additional Test Cases","text":"<p>All Test Cases that measure FPS are currently using a default Quality Level (3). We need to create new Test Cases that repeat these tests using the other quality levels. This will require us to set the quality level on the transmitter first before running the test.</p>"},{"location":"automation/testcases_list/#reference-documentation","title":"Reference Documentation","text":"<ul> <li>Alex's proposal's on unplanned leave testing</li> <li> <p>Alex's 2K Test Plans - https://limerick.blackbox.com/SysTest/Reports/EMD-2K-6.3.10%20Test%20Plan%20Results.xlsx?d=w65e70183f6774b4f9a7ef42c52cccd7</p> </li> <li> <p>Alex's 4K Test Plans - https://limerick.blackbox.com/SysTest/Reports/EMD-4K-6.3.10%20Test%20Plan%20Results.xlsx?d=w9660bc0e4fa64d1a9c8b725dafdb498f</p> </li> <li> <p>Alex's Interop Test Plan - https://limerick.blackbox.com/SysTest/Reports/EMD-InterOp-6.3.10%20Test%20Plan%20results.xlsx?d=we6deff5d5b944502aee91daddceb6bbd</p> </li> </ul>"},{"location":"automation/testcases_list/#proposed-format-for-test-case-reporting","title":"Proposed format for Test Case Reporting","text":"<pre><code>{ \"test_case_reference_number\" : n, \"status\" : \"passed/failed\" , \"detail\" : \"Details of failure if appropriate\" , \"target_device_type\": \"EMD4KTX\", \"local_device_type\" : \"EMD4KRX\" }\n</code></pre> <p>Notes:</p> <ul> <li>Video Performance /tmp/video_stats_0.json - parse</li> </ul> <p><code>json { \"fps\" :  25,\"dropped\" : 33,\"dropped_total\" : 2069,\"Mbps\" : 96.00,\"AvgMbps\" : 96.00,\"connection_res\" : \"1920x1080@60Hz\",\"input_res\" :  \"1920x1080@60Hz\"}</code></p> <p>for values of fps, dropped and  AvgMbps\u200b greater than threshold, use jq utility</p> <ul> <li>Network Performance  /tmp/toe_stats_2.json - parse</li> </ul> <p><code>json { \"cid\" : 2,\"type\" : 2,\"rtt\" : 640,\"rto\" : 1960,\"tx\" : 500468645316,\"retx\" : 0,\"avgtx\" : 197358337,\"avgretx\" : 0,\"rcv\" : 0,\"avgrecv\" : 0,\"ack\" : 500458349768,\"avgack\" : 197357803,\"dropped\" : 0  }</code></p> <p>for values of retx greater than 0, use jq utility</p>"},{"location":"automation/testcases_listPG2/","title":"page2","text":"Test Case Reference Description Status Test Assets Required Details Comments 19 Ensure a 4K RX in shared municast mode sees the first video frame 50 milli-seconds after the connection is launched to a 2K TX SH Implemented  One 4K RX, one 2K TX SH Parametric test, confirms that performance is  within a defined window 20 Ensure a 4K RX in private_mode has a retry rate of 0% after the connection is launched to a 2K TX SH Implemented  One 4K RX, one 2K TX SH Parametric test, confirms that performan 15 16 Ensure a 4K RX in private_mode sees the first video frame 35 milli-seconds after the connection is launched to a 2K TX SH Implemented  One 4K RX, one 2K TX SH Parametric test, confirms that performance is  within a defined window 17 Ensure a 2K RX SH in shared municast mode sees the first video frame 350 milli-seconds after the connection is launched to a 2K TX SH Implemented  One 2K RX SH, and one 2K TX SH Parametric test, confirms that performance is  within a defined window 18 Ensure a 4K RX in shared multicast mode sees the first video frame 50 milli-seconds after the connection is launched to a 4K TX Implemented  One 4K RX and one 4K TX Parametric test, confirms that performance is  within a defined window 21 Ensure a 2K RX in shared municast mode has a retry rate of 0% after the connection is launched to a 2K TX Implemented  One 2K RX, and one 2K TX Parametric test, confirms that performance is  within a defined window 22 Ensure a 4K RX in shared multicast mode has a retry rate of 0% after the connection is launched to a 4K TX Implemented  One 4K RX and one 4K TX Parametric test, confirms that performance is  within a defined window 23 Ensure a 4K RX in shared municast mode has a retry rate of 0% after the connection is launched to a 2K TX Implemented  One 2K RX, one 4K TX Parametric test, confirms that performance is  within a defined window 24 Ensure a 4K RX in private lossless mode is rejected with a 207 error when it tries to connect to a 2K TX Implemented  One 4K RX, one 2K TX The second RX should fail with an exit code of 207 25 For a resolution of 1920x1080 and a default quality level, Ensure a 4K RX in private lossless mode has an FPS of 47 FPS, a dropped frame count of 0, 2 minutes after it connects to a 4K TX if the target PC is playing Avitar full screen in VLC Implemented  One 4K RX, one 4K TX Parametric test, confirms that performance is  within a defined window 26 For a resolution of 1920x1080 and a default quality level, Ensure a SH 2K RX in private optimised mode has an FPS of 59 FPS,  a dropped frame count of 0 , 2 minutes after it connects to a 2K TX if the target PC is playing Avitar full screen in VLC Implemented  One SH 2K RX, one 2K TX Parametric test, confirms that performance is  within a defined window 27 For a resolution of 3840x2160, Ensure a 4K RX in private lossless mode has an FPS of 47 FPS, a dropped frame count of 12, 2 minutes after it connects to a 4K TX if the target PC is playing Avitar full screen in VLC Implemented  One 4K RX, one 4K TX Parametric test, confirms that performance is  within a defined window 28 For a resolution of 3840x2160, Ensure a 4K RX in shared lossless mode has an FPS of 47 FPS,  a dropped frame count of 12, 2 minutes after it connects to a 4K TX if the target PC is playing Avitar full screen in VLC Implemented  One 4K RX, one 4K TX Parametric test, confirms that performance is  within a defined window 29 For a resolution of 1280X1024, Ensure a 4K RX in private optimised mode has an FPS of 59 FPS, a dropped frame count of 0, 2 minutes after it connects to a SH 2K TX if the target PC is playing Avitar full screen in VLC Implemented  One 4K RX, one 2K TX Parametric test, confirms that performance is  within a defined window 30 For a resolution of 3840x2160, Ensure a DH 2K RX in private optimised mode has an FPS of 56 (+/- 2 FPS) FPS,  a dropped frame count of 3 (+/- 1), 2 minutes after it connects to a 4K TX with scaling enabled if the target PC is playing Avitar full screen in VLC Implemented  One DH 2K RX, one 4K TX Parametric test, confirms that performance is  within a defined window 31 For a resolution of 3840x2160, Ensure a SH 2K RX in shared optimised mode has an FPS of 59 (+/- 2 FPS) FPS, a dropped frame count of 0, 2 minutes after it connects to a 4K TX with scaling enabled if the target PC is playing Avitar full screen in VLC Implemented  One SH 2K RX, one 4K TX Parametric test, confirms that performance is  within a defined window 32 For a resolution of 1280X1024, Ensure a SH 2K RX in private optimised mode has an FPS of 59 FPS,  a dropped frame count of 0, 2 minutes after it connects to a 4K TX with scaling enabled if the target PC is playing Avitar full screen in VLC Implemented  One SH 2K RX, one 4K TX Parametric test, confirms that performance is  within a defined window Blocked by the need to have a way of setting the desktop resolution - Eoin, Arup can still generate the test cases, single template, can be based on 26 33 For a resolution of 1280X1024, Ensure a SH 2K TX in shared optimised mode has an FPS of 59 FPS,  a dropped frame count of 0, 2 minutes after it connects to 3 2K RXs if the target PC is playing Avitar full screen in VLC Implemented  3 X SH 2K RX, 1 X SH 2K TX Parametric test, confirms that performance is  within a defined window Blocked by the need to have a way of setting the desktop resolution - Eoin, Arup can still generate the test cases, single template, can be based on 26 34 Ensure a 4K TX in shared multicast mode has a retry rate less than 0% n seconds after the connection is launched to 3 4K RXs not Implemented  3 X 4K RX, one 4K TX Parametric test, confirms that performance is  within a defined window Needs a new template to be created by johnos 35 Ensure a 2K RX in a shared municast connection can switch to a previous connection to a 4K transmitter within 200 milli-seconds  Implemented  2 X 4K RX, 2 X 4K TX Parametric test, confirms that performance is  within a defined window Threshold updated to 300Ms from 250Ms -- -- -- -- -- -- 36 Ensure a 4K RX in a shared multicast connection can switch to a previous connection to a 4K transmitter within 200 milli-seconds Implemented  2 X 4K RX, 2 X 4K TX Parametric test, confirms that performance is  within a defined window use a dual template, can be based on 35 - Arup 37 Ensure a 2K RX in a shared municast connection can switch to a previous connection to a 4K transmitter within 200 milli-seconds Implemented  2 X 4K RX, 2 X 4K TX Parametric test, confirms that performance is  within a defined window use a dual template, can be based on 35 - Arup 38 Ensure a 2K RX in a private connection can switch to a previous connection to a 4K transmitter within 200 milli-seconds Implemented  One 4K RX, 2 X 4K TX Parametric test, confirms that performance is  within a defined window use a dual template, can be based on 35 - Arup 39 Ensure an attempt attempt to make a shared lossless connection from a 4K RX to a 2K TX is rejected with an error code of 207 Implemented  One 4K RX, 1 X 2K TX Logic test use a single template - Arup 40 Unplanned Leave:  a 4K RX 1 makes a shared multicast connection to a 4K TX. Make a second shared connection to that same 4K TX with RX 2. Cause an unplanned leave of RX 1 by rebooting the device. Ensure that we do not see an interruption in video to RX 2 greater than 500ms.  Implemented  Two 4K RX, 1 X 4K TX Parametric Test Requires a dual template"},{"location":"automation/usb/","title":"USB Automation Proposal","text":""},{"location":"automation/usb/#usb-automation-proposal_1","title":"USB Automation Proposal","text":""},{"location":"automation/usb/#marco-recording","title":"Marco Recording","text":"<p>libinput record and playback</p>"},{"location":"automation/Seperated_test_case_lists/Audio_tests/","title":"Audio Tests","text":"Test Case Reference Description Status Test Assets Required Details Comments Testcase 1 Create a 2K SE SH TX to 2K PE SH RX Private connection with audio enabled. Ensure that we can detect audio on the RX by measuring the standard deviation of the samples in the audio buffer. The standard deviation should be greater than 8000 for an active audio connection.  Implemented  One 2K PE SH RX , 2K SE SH TX Test confirms the audio is enabled for a connection and video is playing. Testcase 2 Create a 2K SE SH TX to 2K PE SH RX Shared connection with audio enabled. Ensure that we can detect audio on the RX by measuring the standard deviation of the samples in the audio buffer. The standard deviation should be greater than 8000 for an active audio connection.  Implemented  One 2K PE SH RX , One 2K SE SH TX Test confirms the audio is enabled for a connection and video is playing. Testcase 3 Create a 2K SE SH TX to 2K SE DH RX Private connection with audio enabled. Ensure that we can detect audio on the RX by measuring the standard deviation of the samples in the audio buffer. The standard deviation should be greater than 8000 for an active audio connection.  Implemented  One 2K SE DH RX , One 2K SE SH TX Test confirms the audio is enabled for a connection and video is playing. Testcase 4 Create a 2K SE SH TX to 2K SE DH RX Shared connection with audio enabled. Ensure that we can detect audio on the RX by measuring the standard deviation of the samples in the audio buffer. The standard deviation should be greater than 8000 for an active audio connection.  Implemented  One 2K SE DH RX , One 2K SE SH TX Test confirms the audio is enabled for a connection and video is playing. Testcase 5 Create a 2K SE SH TX to 4K RX Private connection with audio enabled. Ensure that we can detect audio on the RX by measuring the standard deviation of the samples in the audio buffer. The standard deviation should be greater than 8000 for an active audio connection.  Implemented  One 4K RX , One 2K SE SH TX Test confirms the audio is enabled for a connection and video is playing. Testcase 6 Create a 2K SE SH TX to 4K RX Shared connection with audio enabled. Ensure that we can detect audio on the RX by measuring the standard deviation of the samples in the audio buffer. The standard deviation should be greater than 8000 for an active audio connection.  Implemented  One 4K RX , One 2K SE SH TX Test confirms the audio is enabled for a connection and video is playing. Testcase 7 Create a 2K PE DH TX to 2K SE DH RX Private connection with audio enabled. Ensure that we can detect audio on the RX by measuring the standard deviation of the samples in the audio buffer. The standard deviation should be greater than 8000 for an active audio connection.  Implemented  One 2K SE DH RX , One 2K PE DH TX Test confirms the audio is enabled for a connection and video is playing. Testcase 8 Create a 2K PE DH TX to 2K SE DH RX Shared connection with audio enabled. Ensure that we can detect audio on the RX by measuring the standard deviation of the samples in the audio buffer. The standard deviation should be greater than 8000 for an active audio connection.  Implemented  One 2K SE DH RX , One 2K PE DH TX Test confirms the audio is enabled for a connection and video is playing. Testcase 9 Create a 2K SE DH TX to 2K PE SH RX Private connection with audio enabled. Ensure that we can detect audio on the RX by measuring the standard deviation of the samples in the audio buffer. The standard deviation should be greater than 8000 for an active audio connection.  Implemented  One 2K PE SH RX , One 2K SE DH TX Test confirms the audio is enabled for a connection and video is playing. Testcase 10 Create a 2K SE DH TX to 2K PE SH RX Shared connection with audio enabled. Ensure that we can detect audio on the RX by measuring the standard deviation of the samples in the audio buffer. The standard deviation should be greater than 8000 for an active audio connection.  Implemented  One 2K PE SH RX , One 2K SE DH TX Test confirms the audio is enabled for a connection and video is playing. Testcase 11 Create a 2K SE DH TX to 4K RX Private connection with audio enabled. Ensure that we can detect audio on the RX by measuring the standard deviation of the samples in the audio buffer. The standard deviation should be greater than 8000 for an active audio connection.  Implemented  One 4K RX , One 2K SE DH TX Test confirms the audio is enabled for a connection and video is playing. Testcase 12 Create a 2K SE DH TX to 4K RX Shared connection with audio enabled. Ensure that we can detect audio on the RX by measuring the standard deviation of the samples in the audio buffer. The standard deviation should be greater than 8000 for an active audio connection.  Implemented  One 4K RX , One 2K SE DH TX Test confirms the audio is enabled for a connection and video is playing. Testcase 13 Create a 4K TX to 4K RX Private connection with audio enabled. Ensure that we can detect audio on the RX by measuring the standard deviation of the samples in the audio buffer. The standard deviation should be greater than 8000 for an active audio connection.  Implemented  One 4K RX , One 4K TX Test confirms the audio is enabled for a connection and video is playing. Testcase 14 Create a 4K TX to 4K RX Shared connection with audio enabled. Ensure that we can detect audio on the RX by measuring the standard deviation of the samples in the audio buffer. The standard deviation should be greater than 8000 for an active audio connection.  Implemented  One 4K RX , One 4K TX Test confirms the audio is enabled for a connection and video is playing. Testcase 15 Create a 4K TX to 2K PE SH RX Private connection with audio enabled. Ensure that we can detect audio on the RX by measuring the standard deviation of the samples in the audio buffer. The standard deviation should be greater than 8000 for an active audio connection.  Implemented  One 2K PE SH RX , One 4K TX Test confirms the audio is enabled for a connection and video is playing. Testcase 16 Create a 4K TX to 2K PE SH RX Shared connection with audio enabled. Ensure that we can detect audio on the RX by measuring the standard deviation of the samples in the audio buffer. The standard deviation should be greater than 8000 for an active audio connection.  Implemented  One 2K PE SH RX , One 4K TX Test confirms the audio is enabled for a connection and video is playing. Testcase 17 Create a 4K TX to 2K PE DH RX Private connection with audio enabled. Ensure that we can detect audio on the RX by measuring the standard deviation of the samples in the audio buffer. The standard deviation should be greater than 8000 for an active audio connection.  Implemented  One 2K PE DH RX , One 4K TX Test confirms the audio is enabled for a connection and video is playing. Testcase 18 Create a 4K TX to 2K PE DH RX Shared connection with audio enabled. Ensure that we can detect audio on the RX by measuring the standard deviation of the samples in the audio buffer. The standard deviation should be greater than 8000 for an active audio connection.  Implemented  One 2K PE DH RX , One 4K TX Test confirms the audio is enabled for a connection and video is playing. Testcase 19 Create a 2K SE SH TX to 4K RX Private connection with audio disabled. Ensure that we cannot detect audio on the RX by measuring the standard deviation of the samples in the audio buffer. The standard deviation should be 0 for an active non-audio connection.  Implemented  One 4K RX , One 2K SE SH TX Testcase 20 Create a 2K SE DP SH TX to 2K PE SH RX Private connection with audio enabled. Ensure that we can detect audio on the RX by measuring the standard deviation of the samples in the audio buffer. The standard deviation should be greater than 8000 for an active audio connection.  Implemented  One 2K PE SH RX , One 2K SE DP SH TX Test confirms the audio is enabled for a connection and video is playing. Testcase 21 Create a 4K TX to 2K PE DH RX and 4K RX Shared connection with audio enabled in Dual mode. Ensure that we can detect audio on the RX by measuring the standard deviation of the samples in the audio buffer. The standard deviation should be greater than 8000 for an active audio connection.  Implemented  One 4K RX, One 2K PE DH RX and One 4K TX Test confirms the audio is enabled for a connection and video is playing."},{"location":"automation/Seperated_test_case_lists/Connection_Cases/","title":"Connection Cases","text":"Test Case Reference Description Status Test Assets Required Details Comments Testcase 1 Ensure a 2K SE SH TX in an existing shared connection with 2K SE SH RX rejects a private connection from an 2K SE DH RX attempting to connect to the existing session.  Implemented  One 2K SE SH RX , One 2K SE DH RX and One 2K SE SH TX The second 2K SE DH RX should fail with an exit code of 203 Testcase 2 Ensure a 2K SE SH TX in an existing private connection with 2K SE DH RX rejects a private connection from an 2K SE SH RX attempting to connect to the existing session  Implemented  One 2K SE SH RX , One 2K SE DH RX and One 2K SE SH TX The second 2K SE SH RX should fail with an exit code of 204 Testcase 3 Ensure a 4K TX without an existing connection accepts a private connection from an 4K RX attempting to connect in private_mode  Implemented  One 4K RX and One 4K TX Verified by waiting for connection established file Testcase 4 Ensure a 2K SE SH TX\u00a0without\u00a0an existing connection accepts a shared connection from a 2K SE SH RX attempting to connect in\u00a0shared municast mode  Implemented  One 2K SE SH RX and one 2K SE SH TX Verified by waiting for connection established file Testcase 5 Ensure a 4K TX\u00a0without\u00a0an existing connection accepts a optimised shared connection from an 4K RX attempting to connect in\u00a0shared multicast mode  Implemented  One 4K RX and One 4K TX Verified by waiting for connection established file Testcase 6 Ensure a 4K TX in an existing multicast shared connection accepts a municast shared connection from an 2K SE SH RX attempting to connect to the existing session  Implemented  One 2K SE SH RX , one 4K RX and one 4K TX Verified by waiting for connection established file Testcase 7 Ensure a 2K SE SH TX in an existing municast optimised shared connection with 2K SE SH RX accepts a municast shared connection from a 4K RX attempting to connect in municast shared mode to the existing session  Implemented  One 2K SE SH RX , one 4K RX and one One 2K SE SH TX Verified by waiting for connection established file Testcase 8 Ensure a 4K RX in\u00a0private_mode\u00a0receives the connection accepted message in 15 milli-seconds after the connection is launched to a 4K TX  Implemented  One 4K RX and One 4K TX Parametric test, confirms that connection is accepted within a defined window Testcase 9 Ensure a 2K SE SH RX in\u00a0private_mode\u00a0receives the connection accepted message in 80 milli-seconds after the connection is launched to a 2K SE SH TX  Implemented  One 2K SE SH RX and One 2K SE SH TX Parametric test, confirms that connection is accepted within a defined window Testcase 10 Ensure a 2K SE DH RX in\u00a0private_mode\u00a0receives the connection accepted message in 80 milli-seconds after the connection is launched to a 2K SE DH TX  Implemented  One 2K SE DH RX and one One 2K SE DH TX Parametric test, confirms that connection is accepted within a defined window Testcase 11 Ensure a 2K SE SH RX in shared municast mode receives the connection accepted message in 80 milli-seconds after the connection is launched to a 2K SE SH TX  Implemented  One 2K SE SH RX and One 2K SE SH TX Parametric test, confirms that connection is accepted within a defined window Testcase 12 Ensure a 4K RX in shared multicast mode receives the connection accepted message in 15 milli-seconds after the connection is launched to a 4K TX  Implemented  One 4K RX and One 4K TX Parametric test, confirms that connection is accepted within a defined window Testcase 13 Ensure a 4K RX in\u00a0shared municast mode\u00a0receives the connection accepted message in 80 milli-seconds after the connection is launched to a 2K SE SH TX  Implemented  One 4K RX and one One 2K SE SH TX Parametric test, confirms that connection is accepted within a defined window Testcase 14 Ensure a 4K RX in\u00a0private_mode\u00a0sees the first\u00a0video frame\u00a0in less than 60 milli-seconds after the connection is launched to a 4K TX  Implemented  One 4K RX and One 4K TX Parametric test, confirms that performance is within a defined window Testcase 15 Ensure a 2K SE SH TX rejects a private lossless connection from a 4K RX  Implemented  One 4K RX and One 2K SE SH TX The 4K RX should fail with an exit code of 207 Testcase 16 Ensure a 4K RX in a shared multicast connection can switch to a previous connection to a 4K transmitter within 300 milli-seconds  Implemented  Two 4K RX and One 4K TX Parametric test, confirms that performance is within a defined window Testcase 17 Ensure a 2K SE DH RX in a shared connection can switch to a previous connection to a 2K SE SH transmitter within 250 milli-seconds  Implemented  One 2K SE SH RX, One 2K SE DH RX and One 2K SE DH TX Parametric test, confirms that performance is within a defined window Testcase 18 Ensure a 2K SE DH RX in a private connection can switch to a previous connection to a 4K transmitter within 250 milli-seconds  Implemented  One 2K PE SH RX, One 2K SE DH RX and One 4K TX Parametric test, confirms that performance is within a defined window Testcase 19 Ensure a 2K PE SH RX in a private connection can switch to a previous connection to a 4K transmitter within 300 milli-seconds  Implemented  One 2K PE DH RX, One 2K PE SH RX and One 4K TX Parametric test, confirms that performance is within a defined window Testcase 20 Ensure an attempt to make a shared lossless connection from a 4K RX to a 2K SE DH TX is rejected with an error code of 207  Implemented  One 4K RX and One 2K SE DH TX The 4K RX should fail with an exit code of 207 Testcase 21 Ensure a 4K RX in private_mode receives the connection accepted message in 85 milli-seconds after the connection is launched to a 2K SE SH TX  Implemented  One 4K RX and One 2K SE SH TX Parametric test, confirms that connection is accepted within a defined window Testcase 22 Ensure a 4K RX in shared municast mode receives the connection accepted message in 80 milli-seconds after the connection is launched to a 2K SE DH TX  Implemented  One 4K RX and One 2K SE DH TX Parametric test, confirms that connection is accepted within a defined window Testcase 23 Ensure a 2K SE DP SH TX in an existing shared connection rejects a private connection from an 2K PE SH RX attempting to connect to the existing session  Implemented  One 2K PE SH RX, One 2K SE SH RX and One 2K SE DP SH TX The second RX should fail with an exit code of 203 Testcase 24 Ensure a 2K SE SH RX in private_mode receives the connection accepted message in 80 milli-seconds after the connection is launched to a 2K PE SH DP TX  Implemented  One 2K SE SH RX and One 2K PE SH DP TX Parametric test, confirms that connection is accepted within a defined window Testcase 25 Ensure GUI should no display after terminating no osd request  Implemented  One 2K SE DH RX and One 2K SE SH TX Testcase 26 Ensure a 4K TX connects to a 4K RX, on a terminate no osd request, OSD screen should not be shown on screen  Implemented  One 4K RX and One 4K TX Testcase 27 Ensure a 2K PE DH RX in a shared connection can switch to a previous connection to a 2K PE DP transmitter within 250 milli-seconds  Implemented  One 2K PE SH RX , One 2K PE DH RX, One 2K PE DH TX and One 2K PE DP DH TX Parametric test, confirms that performance is within a defined window Testcase 28 Ensure a 2K SE DH RX in a shared connection can switch to a previous connection to a 2K PE DP transmitter within 250 milli-seconds  Implemented  One 2K SE SH RX , One 2K SE DH RX, One 2K PE DH TX and One 2K PE DP DH TX Parametric test, confirms that performance is within a defined window Testcase 29 Ensure a 2K PE DH RX in a shared connection can switch to a previous connection to a 2K PE DP transmitter within 250 milli-seconds  Implemented  One 2K PE SH RX , One 2K PE DH RX and One 2K ZeroU TX Parametric test, confirms that performance is within a defined window Testcase 30 Ensure a 2K SE DH RX in a shared connection can switch to a previous connection to a 2K ZeroU transmitter within 250 milli-seconds.  Implemented  One 2K SE SH RX , One 2K SE DH RX and One 2K SE SH TX Parametric test, confirms that performance is within a defined window Testcase 31 Ensure a 4K RX in a shared connection can switch to a previous connection to a 4K transmitter within 250 milli-seconds  Implemented  Two 4K RX and One 4K TX Parametric test, confirms that performance is within a defined window Testcase 32 Ensure a 2K PE DH RX in a shared connection can switch to a previous connection to a 2K SE DH TX transmitter within 250 milli-seconds  Implemented  One 2K PE SH RX , One 2K PE DH RX and One 2K SE DH TX Parametric test, confirms that performance is within a defined window"},{"location":"automation/Seperated_test_case_lists/Connection_Performance%20Unmanaged/","title":"Connection Performance Test Cases for Unmanaged Appliances","text":"Test Case Reference Description Status Test Assets Required Details Comments Testcase 1 Ensure a SE RX in a shared connection with a VM can switch to a previous connection to a 2K SE DH transmitter within 200 milli-seconds.   Not Implemented One 2K RX SH, one 2K TX SH Parametric test, confirms that the connection is view only Testcase 2 Ensure a 2K RX in a private connection can switch to a previous connection to a 4K transmitter within 200 milli-seconds   Not Implemented  One 2K RX SH, one 2K TX SH Parametric test, confirms that performance is within a defined window Testcase 3 Ensure a 2K RX in a private connection can switch to a previous connection to a 4K transmitter within 200 milli-seconds   Not Implemented  One 2K RX SH, one 2K TX SH Parametric test, confirms that performance is within a defined window Testcase 4 Ensure an attempt to make a shared lossless connection from a 4K RX to a 2K TX is rejected with an error code of 207   Not Implemented  One 2K RX SH, one 2K TX SH Parametric test, confirms that performance is within a defined window Testcase 5 Ensure a SE RX in a shared connection can switch to a previous connection to a 2K PE DP transmitter within 200 milli-seconds   Not Implemented  One 2K RX SH, one 2K TX SH Parametric test, confirms that performance is within a defined window"},{"location":"automation/Seperated_test_case_lists/DP_Devices/","title":"DP Devices","text":"Test Case Reference Description Status Test Assets Required Details Comments Testcase 1 Ensure a 2K SE SH DP TX in an existing shared connection rejects a private connection from an 2K SE DH RX attempting to connect to the existing session with 2K SE SH RX.  Implemented  One 2K SE SH RX , One 2K SE DH RX and One 2K SE SH DP TX The second RX should fail with an exit code of 203 Testcase 2 Ensure a 2K SE SH RX in private_mode receives the connection accepted message in 100 milli-seconds after the connection is launched to a 2K PE SH DP TX.  Implemented  One 2K SE SH RX and One 2K PE SH DP TX Parametric test, confirms that connection is accepted within a defined window Testcase 3 Ensure a 2K PE SH RX in private mode sees the first video frame in less than 300 milli-seconds after the connection is launched to a 2K SE SH DP TX.  Implemented  One 2K PE SH RX and One 2K SE SH DP TX Parametric test, confirms that connection is accepted within a defined window Testcase 4 Unplanned Leave: a 4K RX 1 makes a shared municast connection to a 2K SE SH DP TX. Make a second shared connection to that same 2K SE SH DP TX with 4K RX 2. Cause an unplanned leave of RX 1 by rebooting the device. Ensure that we do not see an interruption in video to RX 2 greater than 1000ms.  Implemented  Two 4K RX and One 2K SE SH DP TX Testcase 5 For a resolution of 1920x1080 and a default quality level, Ensure a 2K PE SH RX in private optimised mode has an FPS of 59 FPS, a dropped frame count of 0 , 2 minutes after it connects to a 2K SE SH DP TX if the target PC is playing Avitar full screen in VLC.  Implemented  One 2K PE SH RX and One 2K SE SH DP TX Testcase 6 Create a 2K SE SH DP TX to 2K PE SH RX Private connection with audio enabled. Ensure that we can detect audio on the RX by measuring the standard deviation of the samples in the audio buffer. The standard deviation should be greater than 8000 for an active audio connection.  Implemented  One 2K PE SH RX and One 2K SE SH DP TX Test confirms the audio is enabled for a connection and video is playing"},{"location":"automation/Seperated_test_case_lists/Dual_Mode/","title":"Dual Mode","text":"Test Case Reference Description Status Test Assets Required Details Comments Testcase 1 Ensure a 4K TX in an existing shared connection with 4K RX rejects a private connection from an 2K PE SH RX attempting to connect to the existing session in a Dual Mode.  Implemented  One 2K PE SH RX , One 4K RX and One 4K TX The second RX should fail with an exit code of 203 Testcase 2 Ensure a 4K TX without an existing connection accepts a shared connection from a 2K PE SH RX and 4K RX attempting to connect in Dual Mode.  Implemented  One 2K PE SH RX , One 4K RX and One 4K TX The second RX should fail with an exit code of 203 Testcase 3 Ensure a 4K RX and 2K PE DH RX in shared Dual Mode sees the first video frame in 35 milli-seconds after the connection is launched to a 4K TX.  Implemented  One 2K PE DH RX , One 4K RX and One 4K TX Parametric test, confirms that performance is within a defined window Testcase 4 Ensure a 4K TX in shared Dual mode has a retry rate of 0% in less than 180 seconds after the connection is launched to a 4K RX and 2K PE DH RX.  Implemented  One 2K PE DH RX , One 4K RX and One 4K TX Testcase 5 For a resolution of 3840x2160, Ensure a 2K PE DH RX in shared optimised Dual mode has an FPS of 59 (+/- 2 FPS) FPS and 4K RX has an FPS of 47 (+/- 1 FPS), a dropped frame count of 0 (+/- 1), 2 minutes after it connects to a 4K TX with scaling enabled if the target PC is playing Avitar full screen in VLC.  Implemented  One 2K PE DH RX , One 4K RX and One 4K TX Testcase 6 Unplanned Leave: a 4K RX 1 makes a shared Dual Mode shared connection to a 4K TX. Make a second shared connection to that same 4K TX with 2K PE DH RX 2. Cause an unplanned leave of RX 1 by rebooting the device. Ensure that we do not see an interruption in video to RX 2 greater than 500ms.  Implemented  One 2K PE DH RX , One 4K RX and One 4K TX"},{"location":"automation/Seperated_test_case_lists/First_Video_Frame/","title":"First Video Frame","text":"Test Case Reference Description Status Test Assets Required Details Comments Testcase 1 Ensure a 2K PE SH RX sees the first video frame in less than 300 ms after a private connection is launched to a 4K TX.  Implemented  One 2K PE SH RX , One 4K TX Parametric test, confirms that performance is within a defined window Testcase 2 Ensure a 4K RX sees the first video frame in less than 350 ms after a private connection is launched to a 2K SE SH TX.  Implemented  One 4K RX , One 2K SE SH TX Parametric test, confirms that performance is within a defined window Testcase 3 Ensure a 2K PE SH RX sees the first video frame in less than 350 ms after a shared municast connection is launched to a 2K SE SH TX.  Implemented  One 2K PE SH RX , One 2K SE SH TX Parametric test, confirms that performance is within a defined window Testcase 4 Ensure a 4K RX sees the first video frame in less than 350 ms after a shared multicast connection is launched to a 4K TX.  Implemented  One 4K RX , One 4K TX Parametric test, confirms that performance is within a defined window Testcase 5 Ensure a 4K RX sees the first video frame in less than 50 milli seconds after a shared municast connection is launched to a 2K SE SH TX.  Implemented  One 4K RX , One 2K SE SH TX Parametric test, confirms that performance is within a defined window Testcase 6 Ensure a 2K SE DH RX in private_mode sees the first video frame in less than 300 milli-seconds after the connection is launched to a 4K TX.  Implemented  One 2K SE DH RX , One 4K TX Parametric test, confirms that performance is within a defined window Testcase 7 Ensure a 4K RX in private mode sees the first video frame in less than 50 milli-seconds after the connection is launched to a 2K SE DH TX.  Implemented  One 4K RX , One 2K SE DH TX Parametric test, confirms that performance is within a defined window Testcase 8 Ensure a 2K SE DH RX in shared municast mode sees the first video frame in less than 350 milli-seconds after the connection is launched to a 2K SE DH TX  Implemented  One 2K SE DH RX , One 2K SE DH TX Parametric test, confirms that performance is within a defined window Testcase 9 Ensure a 4K RX in shared municast mode sees the first video frame in less than 50 milli seconds after the connection is launched to a 2K SE DH TX  Implemented  One 4K RX , One 2K SE DH TX Parametric test, confirms that performance is within a defined window Testcase 10 Ensure a 2K PE SH RX in private mode sees the first video frame in less than 300 milli-seconds after the connection is launched to a 2K SE DP SH TX.  Implemented  One 2K PE SH RX , One 2K SE DP SH TX Parametric test, confirms that performance is within a defined window"},{"location":"automation/Seperated_test_case_lists/General_2KRX_4KTX%20_Interop_Unmanaged_TestCases/","title":"General Test Cases for Interop 2KRX 4KTX Unmanaged Appliances","text":"Test Case Reference Description Status Test Assets Required Details Comments Testcase 1 Ensure an unmanaged 4K TX  without an existing connections accepts a private view only connection from an unmanaged 4K RX attempting to connect in a private mode. Ensure the active connection should have view only enabled.  Implemented One 4K RX , one 4K TX Parametric test, confirms that the connection is view only Testcase 2 For a Video Source Optimization as \"Off\", Ensure an unmanage 4K RX in private Optimised has an fps of 56, a dropped frame count of 0 and bandwidth of 88 Mbps or more , after it connects to an unmanage 4K TX if the target PC playing Avatar full screen in VLC.   Implemented  One 4K RX , one 4K TX Parametric test, confirms that performance is within a defined window Testcase 3 For a Video Source Optimization as \"DVI Optimised\", Ensure an unmanage 4K SE RX in private Optimised has an fps of 48, a dropped frame count of 0 and bandwidth of 136 Mbps or more , after it connects to an unmanaged 4K TX if the target PC playing Avatar full screen in VLC.   Implemented  One 4K RX, one 4K TX Parametric test, confirms that performance is within a defined window Testcase 4 For a Video Source Optimization as \"VGA - high performance\", Ensure an Unmanage 4K RX in private Optimised has an fps of 57, a dropped frame count of 0 and bandwidth of 128 Mbps or more , after it connects to an unmanaged 4K TX if the target PC playing Avatar full screen in VLC.   Implemented  One 2K RX SH, one 4K TX Parametric test, confirms that performance is within a defined window Testcase 5 For a Video Source Optimization as \" VGA - optimized performance\", Ensure an Unmanage 4K RX in private Optimised has an fps of 58, a dropped frame count of 0 and bandwidth of 120 Mbps or more , after it connects to an unmanage 4K TX  if the target PC playing Avatar full screen in VLC.    Implemented  One 4K RX , one 4K TX Parametric test, confirms that performance is within a defined window Testcase 6 For a Video Source Optimization as \" VGA - low bandwidth\", Ensure an Unmanage 4K RX in private Optimised has an fps of 58, a dropped frame count of 0 and bandwidth of 120 Mbps or more, after it connects to an unmanage 4K TX  if the target PC playing Avatar full screen in VLC.   Implemented  One 4K RX, one 4K TX Parametric test, confirms that performance is within a defined window Testcase 7 Create  a user and a connection in OSD screen, assign the created connection to the user as favourite connection, ensure the favourite connection is launched using HOT Key after the user logged in to the unmanaged RX .   Implemented  One 2K RX SH, one 2K TX SH Parametric test, confirms that performance is within a defined window Testcase 8 Ensure the various hot keys such as PrintScrn, Alt-Alt, Ctrl-Ctrl and Shift-Shift works .   Implemented  One 2K TX SH Parametric test, confirms that performance is within a defined window Testcase 9 Ensure the various hot keys such as PrintScrn+0, Alt-Alt+0, Ctrl-Ctrl+0, Shift-Shift+0 works .   Implemented  One 2K RX SH Parametric test, confirms that performance is within a defined window Testcase 10 Ensure that USBr is disabled for Shared Mode View Only conenctions   Implemented  One 2K RX SH, One 2K TX SH Parametric test, confirms that performance is within a defined window Testcase 11 Ensure to create a Power user and the user should have an option to reboot.   Implemented  One 2K RX SH, One 2K TX SH Parametric test, confirms that performance is within a defined window Testcase 12 Ensure to enable the connection inctivity timer check box in control tab, set the time to 2 mins and click on apply. Create a 2K Private conenction and launch the connection. Ensure that connection to terminate automatically after 2 minutes of inactivity.   Implemented  One 2K RX SH, One 2K TX SH Parametric test, confirms that performance is within a defined window Testcase 13 Ensure to enable the OSD inctivity timer check box in control tab, set the time to 2 min and click on apply. Ensure the OSD screen to log off and bring back to login screen after 2 minutes of inactivity on OSD screen.   Implemented  One 2K RX SH, One 2K TX SH Parametric test, confirms that performance is within a defined window Testcase 14 Ensure to enable both the OSD inctivity timer and the connection inctivity timer check boxes in control tab, set the time to 2 min and click on apply. Ensure the connection breaks exactly at 2 mins then OSD screen to log off and bring back to login screen after next 2 minutes of inactivity on OSD screen.   Implemented  One 2K RX SH, One 2K TX SH Parametric test, confirms that performance is within a defined window Testcase 15 Create and assign a connection to a user by enablling autoconnect option for the user.  Ensure the connection launches on login for the user.    Implemented  One 2K RX SH, One 2K TX SH Parametric test, confirms that performance is within a defined window Testcase 16 Ensure all the HID configuration applies successfully.   Implemented  One 4K TX, 4K RX Parametric test, confirms that performance is within a defined window Testcase 17 Ensure to select different video qualities for a 4K TX and launch a connection. check the video qulaity and measure the FPS.   Implemented  One 4K RX Parametric test, confirms that performance is within a defined window Testcase 18 Ensure the Information tab on the transmitter settings is clicked and should retrieve out the information.    Implemented  One 4K RX , One 4K TX Parametric test, confirms that performance is within a defined window"},{"location":"automation/Seperated_test_case_lists/General_2K_Unmanaged_TestCases/","title":"General Test Cases for 2K Unmanaged Appliances","text":"Test Case Reference Description Status Test Assets Required Details Comments Testcase 1 Ensure an unmanaged 2K TX SH without an existing connections accepts a private view only connection from an unmanaged 2K RX attempting to connect in a private mode. Ensure the active connection should have view only enabled.  Implemented One 2K RX SH, one 2K TX SH Parametric test, confirms that the connection is view only Testcase 2 For a Video Source Optimization as \"Off\", Ensure an unmanage 2K SE RX SH in private Optimised has an fps of 56, a dropped frame count of 0 and bandwidth of 88 Mbps or more , after it connects to an unmanage 2K TX SH if the target PC playing Avatar full screen in VLC.   Implemented  One 2K RX SH, one 2K TX SH Parametric test, confirms that performance is within a defined window Testcase 3 For a Video Source Optimization as \"DVI Optimised\", Ensure an unmanage 2K SE RX SH in private Optimised has an fps of 48, a dropped frame count of 0 and bandwidth of 136 Mbps or more , after it connects to an unmanaged 2K TX SH if the target PC playing Avatar full screen in VLC.   Implemented  One 2K RX SH, one 2K TX SH Parametric test, confirms that performance is within a defined window Testcase 4 For a Video Source Optimization as \"VGA - high performance\", Ensure an Unmanage 2K PE RX in private Optimised has an fps of 57, a dropped frame count of 0 and bandwidth of 128 Mbps or more , after it connects to an unmanaged 2K TX SH if the target PC playing Avatar full screen in VLC.   Implemented  One 2K RX SH, one 2K TX SH Parametric test, confirms that performance is within a defined window Testcase 5 For a Video Source Optimization as \" VGA - optimized performance\", Ensure an Unmanage 2K PE RX in private Optimised has an fps of 58, a dropped frame count of 0 and bandwidth of 120 Mbps or more , after it connects to an unmanage 2K TX SH if the target PC playing Avatar full screen in VLC.    Implemented  One 2K RX SH, one 2K TX SH Parametric test, confirms that performance is within a defined window Testcase 6 For a Video Source Optimization as \" VGA - low bandwidth\", Ensure an Unmanage 2K PE RX in private Optimised has an fps of 58, a dropped frame count of 0 and bandwidth of 120 Mbps or more, after it connects to an unmanage 2K TX SH if the target PC playing Avatar full screen in VLC.   Implemented  One 2K RX SH, one 2K TX SH Parametric test, confirms that performance is within a defined window Testcase 7 Create  a user and a connection in OSD screen, assign the created connection to the user as favourite connection, ensure the favourite connection is launched using HOT Key after the user logged in to the unmanaged RX .   Implemented  One 2K RX SH, one 2K TX SH Parametric test, confirms that performance is within a defined window Testcase 8 Ensure all the HID configuration applies successfully.   Implemented  One 2K TX SH Parametric test, confirms that performance is within a defined window Testcase 9 Ensure to select different video qualities for a TX and launch a connection. check the video qulaity and measure the FPS.   Implemented  One 2K RX SH Parametric test, confirms that performance is within a defined window Testcase 10 Ensure the various hot keys such as PrintScrn, Alt-Alt, Ctrl-Ctrl, Shift-Shift works .   Implemented  One 2K RX SH Parametric test, confirms that performance is within a defined window Testcase 11 Ensure the various hot keys such as PrintScrn+0, Alt-Alt+0, Ctrl-Ctrl+0, Shift-Shift+0 works .   Implemented  One 2K RX SH Parametric test, confirms that performance is within a defined window Testcase 12 Ensure that USBr is disabled for Shared Mode View Only conenctions   Implemented  One 2K RX SH, One 2K TX SH Parametric test, confirms that performance is within a defined window Testcase 13 Ensure to create a Power user and the user should have an option to reboot.   Implemented  One 2K RX SH, One 2K TX SH Parametric test, confirms that performance is within a defined window Testcase 14 Ensure to enable the connection inctivity timer check box in control tab, set the time to 2 mins and click on apply. Create a 2K Private conenction and launch the connection. Ensure that connection to terminate automatically after 2 minutes of inactivity.   Not Implemented  One 2K RX SH, One 2K TX SH Parametric test, confirms that performance is within a defined window Testcase 15 Ensure to enable the OSD inctivity timer check box in control tab, set the time to 2 min and click on apply. Ensure the OSD screen to log off and bring back to login screen after 2 minutes of inactivity on OSD screen.   Not Implemented  One 2K RX SH, One 2K TX SH Parametric test, confirms that performance is within a defined window Testcase 16 Ensure to enable both the OSD inctivity timer and the connection inctivity timer check boxes in control tab, set the time to 2 min and click on apply. Ensure the connection breaks exactly at 2 mins then OSD screen to log off and bring back to login screen after next 2 minutes of inactivity on OSD screen.  Not Implemented  One 2K RX SH, One 2K TX SH Parametric test, confirms that performance is within a defined window Testcase 17 Create and assign a connection to a user by enablling autoconnect option for the user.  Ensure the connection launches on login for the user.    Implemented  One 2K RX SH, One 2K TX SH Parametric test, confirms that performance is within a defined window Testcase 18 Ensure the Information tab on the transmitter settings is clicked and should retrieve out the information.    Implemented  One 4K RX , One 4K TX Parametric test, confirms that performance is within a defined window"},{"location":"automation/Seperated_test_case_lists/General_4KRX_2KTX%20_Interop_Unmanaged_TestCases/","title":"Interop 4K RX to 2K TX Test Cases for Unmanaged Appliances","text":"Test Case Reference Description Status Test Assets Required Details Comments Testcase 1 Ensure an unmanaged 4K TX  without an existing connections accepts a private view only connection from an unmanaged 4K RX attempting to connect in a private mode. Ensure the active connection should have view only enabled.  Implemented One 4K RX , one 4K TX Parametric test, confirms that the connection is view only Testcase 2 For a Video Source Optimization as \"Off\", Ensure an unmanage 4K RX in private Optimised has an fps of 56, a dropped frame count of 0 and bandwidth of 88 Mbps or more , after it connects to an unmanage 4K TX if the target PC playing Avatar full screen in VLC.   Implemented  One 4K RX , one 4K TX Parametric test, confirms that performance is within a defined window Testcase 3 For a Video Source Optimization as \"DVI Optimised\", Ensure an unmanage 4K SE RX in private Optimised has an fps of 48, a dropped frame count of 0 and bandwidth of 136 Mbps or more , after it connects to an unmanaged 4K TX if the target PC playing Avatar full screen in VLC.   Implemented  One 4K RX, one 4K TX Parametric test, confirms that performance is within a defined window Testcase 4 For a Video Source Optimization as \"VGA - high performance\", Ensure an Unmanage 4K RX in private Optimised has an fps of 57, a dropped frame count of 0 and bandwidth of 128 Mbps or more , after it connects to an unmanaged 4K TX if the target PC playing Avatar full screen in VLC.   Implemented  One 2K RX SH, one 4K TX Parametric test, confirms that performance is within a defined window Testcase 5 For a Video Source Optimization as \" VGA - optimized performance\", Ensure an Unmanage 4K RX in private Optimised has an fps of 58, a dropped frame count of 0 and bandwidth of 120 Mbps or more , after it connects to an unmanage 4K TX  if the target PC playing Avatar full screen in VLC.    Implemented  One 4K RX , one 4K TX Parametric test, confirms that performance is within a defined window Testcase 6 For a Video Source Optimization as \" VGA - low bandwidth\", Ensure an Unmanage 4K RX in private Optimised has an fps of 58, a dropped frame count of 0 and bandwidth of 120 Mbps or more, after it connects to an unmanage 4K TX  if the target PC playing Avatar full screen in VLC.   Implemented  One 4K RX, one 4K TX Parametric test, confirms that performance is within a defined window Testcase 7 Create  a user and a connection in OSD screen, assign the created connection to the user as favourite connection, ensure the favourite connection is launched using HOT Key after the user logged in to the unmanaged RX .   Implemented  One 2K RX SH, one 2K TX SH Parametric test, confirms that performance is within a defined window Testcase 8 Ensure the various hot keys such as PrintScrn, Alt-Alt, Ctrl-Ctrl and Shift-Shift works .   Implemented  One 2K TX SH Parametric test, confirms that performance is within a defined window Testcase 9 Ensure the various hot keys such as PrintScrn+0, Alt-Alt+0, Ctrl-Ctrl+0, Shift-Shift+0 works .   Implemented  One 2K RX SH Parametric test, confirms that performance is within a defined window Testcase 10 Ensure that USBr is disabled for Shared Mode View Only conenctions   Implemented  One 2K RX SH, One 2K TX SH Parametric test, confirms that performance is within a defined window Testcase 11 Ensure to create a Power user and the user should have an option to reboot.   Implemented  One 2K RX SH, One 2K TX SH Parametric test, confirms that performance is within a defined window Testcase 12 Ensure to enable the connection inctivity timer check box in control tab, set the time to 2 mins and click on apply. Create a 2K Private conenction and launch the connection. Ensure that connection to terminate automatically after 2 minutes of inactivity.   Implemented  One 2K RX SH, One 2K TX SH Parametric test, confirms that performance is within a defined window Testcase 13 Ensure to enable the OSD inctivity timer check box in control tab, set the time to 2 min and click on apply. Ensure the OSD screen to log off and bring back to login screen after 2 minutes of inactivity on OSD screen.   Implemented  One 2K RX SH, One 2K TX SH Parametric test, confirms that performance is within a defined window Testcase 14 Ensure to enable both the OSD inctivity timer and the connection inctivity timer check boxes in control tab, set the time to 2 min and click on apply. Ensure the connection breaks exactly at 2 mins then OSD screen to log off and bring back to login screen after next 2 minutes of inactivity on OSD screen.   Implemented  One 2K RX SH, One 2K TX SH Parametric test, confirms that performance is within a defined window Testcase 15 Create and assign a connection to a user by enablling autoconnect option for the user.  Ensure the connection launches on login for the user.    Implemented  One 2K RX SH, One 2K TX SH Parametric test, confirms that performance is within a defined window Testcase 16 Ensure all the HID configuration applies successfully.   Implemented  One 4K TX, 4K RX Parametric test, confirms that performance is within a defined window Testcase 17 Ensure to select different video qualities for a 4K TX and launch a connection. check the video qulaity and measure the FPS.   Implemented  One 4K RX Parametric test, confirms that performance is within a defined window Testcase 18 Ensure the Information tab on the transmitter settings is clicked and should retrieve out the information.    Implemented  One 4K RX , One 4K TX Parametric test, confirms that performance is within a defined window"},{"location":"automation/Seperated_test_case_lists/General_4K_Unmanaged_TestCases/","title":"General Test Cases for 4K Unmanaged Appliances","text":"Test Case Reference Description Status Test Assets Required Details Comments Testcase 1 Ensure an unmanaged 4K TX  without an existing connections accepts a private view only connection from an unmanaged 4K RX attempting to connect in a private mode. Ensure the active connection should have view only enabled.  Implemented One 4K RX , one 4K TX Parametric test, confirms that the connection is view only Testcase 2 For a Video Source Optimization as \"Off\", Ensure an unmanage 4K RX in private Optimised has an fps of 56, a dropped frame count of 0 and bandwidth of 88 Mbps or more , after it connects to an unmanage 4K TX if the target PC playing Avatar full screen in VLC.   Implemented  One 4K RX , one 4K TX Parametric test, confirms that performance is within a defined window Testcase 3 For a Video Source Optimization as \"DVI Optimised\", Ensure an unmanage 4K SE RX in private Optimised has an fps of 48, a dropped frame count of 0 and bandwidth of 136 Mbps or more , after it connects to an unmanaged 4K TX if the target PC playing Avatar full screen in VLC.   Implemented  One 4K RX, one 4K TX Parametric test, confirms that performance is within a defined window Testcase 4 For a Video Source Optimization as \"VGA - high performance\", Ensure an Unmanage 4K RX in private Optimised has an fps of 57, a dropped frame count of 0 and bandwidth of 128 Mbps or more , after it connects to an unmanaged 4K TX if the target PC playing Avatar full screen in VLC.   Implemented  One 2K RX SH, one 4K TX Parametric test, confirms that performance is within a defined window Testcase 5 For a Video Source Optimization as \" VGA - optimized performance\", Ensure an Unmanage 4K RX in private Optimised has an fps of 58, a dropped frame count of 0 and bandwidth of 120 Mbps or more , after it connects to an unmanage 4K TX  if the target PC playing Avatar full screen in VLC.    Implemented  One 4K RX , one 4K TX Parametric test, confirms that performance is within a defined window Testcase 6 For a Video Source Optimization as \" VGA - low bandwidth\", Ensure an Unmanage 4K RX in private Optimised has an fps of 58, a dropped frame count of 0 and bandwidth of 120 Mbps or more, after it connects to an unmanage 4K TX  if the target PC playing Avatar full screen in VLC.   Implemented  One 4K RX, one 4K TX Parametric test, confirms that performance is within a defined window Testcase 7 Create  a user and a connection in OSD screen, assign the created connection to the user as favourite connection, ensure the favourite connection is launched using HOT Key after the user logged in to the unmanaged RX .   Implemented  One 2K RX SH, one 2K TX SH Parametric test, confirms that performance is within a defined window Testcase 8 Ensure the various hot keys such as PrintScrn, Alt-Alt, Ctrl-Ctrl and Shift-Shift works .   Implemented  One 2K TX SH Parametric test, confirms that performance is within a defined window Testcase 9 Ensure the various hot keys such as PrintScrn+0, Alt-Alt+0, Ctrl-Ctrl+0, Shift-Shift+0 works .   Implemented  One 2K RX SH Parametric test, confirms that performance is within a defined window Testcase 10 Ensure that USBr is disabled for Shared Mode View Only conenctions   Implemented  One 2K RX SH, One 2K TX SH Parametric test, confirms that performance is within a defined window Testcase 11 Ensure to create a Power user and the user should have an option to reboot.   Implemented  One 2K RX SH, One 2K TX SH Parametric test, confirms that performance is within a defined window Testcase 12 Ensure to enable the connection inctivity timer check box in control tab, set the time to 2 mins and click on apply. Create a 2K Private conenction and launch the connection. Ensure that connection to terminate automatically after 2 minutes of inactivity.  Not Implemented  One 2K RX SH, One 2K TX SH Parametric test, confirms that performance is within a defined window Testcase 13 Ensure to enable the OSD inctivity timer check box in control tab, set the time to 2 min and click on apply. Ensure the OSD screen to log off and bring back to login screen after 2 minutes of inactivity on OSD screen.  Not Implemented  One 2K RX SH, One 2K TX SH Parametric test, confirms that performance is within a defined window Testcase 14 Ensure to enable both the OSD inctivity timer and the connection inctivity timer check boxes in control tab, set the time to 2 min and click on apply. Ensure the connection breaks exactly at 2 mins then OSD screen to log off and bring back to login screen after next 2 minutes of inactivity on OSD screen.   Not Implemented  One 2K RX SH, One 2K TX SH Parametric test, confirms that performance is within a defined window Testcase 15 Create and assign a connection to a user by enablling autoconnect option for the user.  Ensure the connection launches on login for the user.    Implemented  One 2K RX SH, One 2K TX SH Parametric test, confirms that performance is within a defined window Testcase 16 Ensure all the HID configuration applies successfully.   Implemented  One 4K TX, 4K RX Parametric test, confirms that performance is within a defined window Testcase 17 Ensure to select different video qualities for a 4K TX and launch a connection. check the video qulaity and measure the FPS.   Implemented  One 4K RX Parametric test, confirms that performance is within a defined window Testcase 18 Ensure the Information tab on the transmitter settings is clicked and should retrieve out the information.    Implemented  One 4K RX , One 4K TX Parametric test, confirms that performance is within a defined window"},{"location":"automation/Seperated_test_case_lists/General_Managed_TestCases/","title":"General Test Cases 2K","text":"Test Case Reference Description Status Test Assets Required Details Comments Testcase 1 Ensure a 2K TX SH without an existing connections accepts a private view only connection from a 2K RX attempting to connect in a private mode. Ensure the active connection should have view only enabled.  Not Implemented One 2K RX SH, one 2K TX SH Parametric test, confirms that the connection is view only Testcase 2 For a Video Source Optimization as \"Off\", Ensure a 2K RX DH in private Optimised has an fps of 56, a dropped frame count of 0 and bandwidth of 88 Mbps or more , after it connects to a 2K TX DH if the target PC playing Avatar full screen in VLC.  Implemented  One 2K RX, one 2K TX DH Parametric test, confirms that performance is within a defined window Testcase 3 For a Video Source Optimization as \"DVI Optimised\", Ensure a 2K RX SH in private Optimised has an fps of 48, a dropped frame count of 0 and bandwidth of 136 Mbps or more , after it connects to a 2K TX SH if the target PC playing Avatar full screen in VLC.  Implemented  One 2K RX SH, and one 2K TX SH Parametric test, confirms that performance is within a defined window Testcase 4 For a Video Source Optimization as \"VGA - high performance\", Ensure a 2K RX DH in private Optimised has an fps of 57, a dropped frame count of 0 and bandwidth of 128 Mbps or more , after it connects to a 2K TX DH if the target PC playing Avatar full screen in VLC.  Implemented  One 2K RX SH, and one 2K TX SH Parametric test, confirms that performance is within a defined window Testcase 5 For a Video Source Optimization as \" VGA - optimized performance\", Ensure a 2K RX SH in private Optimised has an fps of 58, a dropped frame count of 0 and bandwidth of 120 Mbps or more , after it connects to a 2K TX SH if the target PC playing Avatar full screen in VLC.  Implemented  One 2K RX SH, and one 2K TX SH Parametric test, confirms that performance is within a defined window Testcase 6 For a Video Source Optimization as \"VGA - low bandwidth\", Ensure a 2K RX DH in private Optimised has an fps of 57, a dropped frame count of 0 and bandwidth of 89 Mbps or more , after it connects to a 2K TX DH if the target PC playing Avatar full screen in VLC.  Implemented  One 2K RX DH, and one 2K TX DH Parametric test, confirms that performance is within a defined window Testcase 7 Create  a user and a connection, assign the created connection to the user as favourite connection, ensure the favourite connection is launched using HOT Key after the user logged in to the RX .  Not Implemented  One 2K RX SH, and one 2K TX SH Parametric test, confirms that performance is within a defined window Testcase 8 Ensure to unmanage a 2K TX SH then try to reboot the TX, ensure the 2K TX SH should reboot successfully.  Not Implemented  One 2K RX SH, and one 2K TX SH Parametric test, confirms that the unmanaged TX is rebooted successfully Testcase 9 Ensure to unmanage a 2K RX SH then try to reboot the TX, ensure the 2K RX SH should reboot successfully.  Not Implemented  One 2K RX SH, and one 2K TX SH Parametric test, confirms that the unmanaged RX is rebooted successfully"},{"location":"automation/Seperated_test_case_lists/General_unmanaged-4KTX/","title":"General_unmanaged-4KTX","text":"Test Case Reference Description Status Test Assets Required Details Comments Testcase 1 Ensure an unmanaged 4K TX without an existing connections accepts a private view only connection from an unmanaged 4K RX attempting to connect in a private mode. Ensure the active connection should have view only enabled.  Implemented  One 4K RX, One 4K TX Testcase 2 For a Video Source Optimization as 'Off', Ensure an unmanage 2K SE RX SH in private Optimised has an fps of 59, a dropped frame count of 0 and bandwidth of 2400 Mbps or more , after it connects to an unmanage 4K RX if the target PC playing Avatar full screen in VLC.  Implemented  One 4K RX, One 4K TX Testcase 3 For a Video Source Optimization as 'DVI Optimised', Ensure an unmanage 4K RX in private Optimised has an fps of 59, a dropped frame count of 0 and bandwidth of 2400 Mbps or more , after it connects to an unmanaged 4K TX if the target PC playing Avatar full screen in VLC.  Implemented  One 4K RX, One 4K TX Testcase 4 For a Video Source Optimization as 'VGA - high performance', Ensure an Unmanage 4K RX in private Optimised has an fps of 59, a dropped frame count of 0 and bandwidth of 2400 Mbps or more , after it connects to an unmanaged 4K TX if the target PC playing Avatar full screen in VLC.  Implemented  One 4K RX, One 4K TX Testcase 5 For a Video Source Optimization as 'VGA - optimized performance', Ensure an Unmanage 4K RX in private Optimised has an fps of 59, a dropped frame count of 0 and bandwidth of 2400 Mbps or more , after it connects to an unmanage 4K TX if the target PC playing Avatar full screen in VLC.  Implemented  One 4K RX, One 4K TX Testcase 6 For a Video Source Optimization as 'VGA - low bandwidth', Ensure an Unmanage 4K RX in private Optimised has an fps of 59, a dropped frame count of 0 and bandwidth of 2400 Mbps or more, after it connects to an unmanage 4K TX if the target PC playing Avatar full screen in VLC.  Implemented  One 4K RX, One 4K TX Testcase 7 Create a user and a connection in OSD screen, assign the created connection to the user as favourite connection, ensure the favourite connection is launched using HOT Key after the user logged in to the unmanaged RX.  Implemented  One 4K RX, One 4K TX Testcase 8 Ensure all the HID configuration applies successfully.  Implemented  One 4K RX, One 4K TX Testcase 9 Ensure to select different video qualities for a TX and launch a connection. check the video qulaity and measure the FPS.  Implemented  One 4K RX, One 4K TX Testcase 10 Ensure the various hot keys such as PrintScrn, Alt-Alt, Ctrl-Ctrl and Shift-Shift works.  Implemented  One 4K RX, One 4K TX Testcase 11 Ensure the various hot keys such as PrintScrn+0, Alt-Alt+0, Ctrl-Ctrl+0, Shift-Shift+0; and Mouse clicks works.  Implemented  One 4K RX, One 4K TX Testcase 12 Ensure that USBr is disabled for Shared Mode View Only conenctions.  Implemented  One 4K RX, One 4K TX Testcase 13 Ensure to create a Power user and the user should have an option to reboot.  Implemented  One 4K RX, One 4K TX Testcase 14 Ensure to enable the connection inctivity timer check box in control tab, set the time to 2 mins and click on apply. Create a 4K Private conenction and launch the connection. Ensure that connection to terminate automatically after 2 minutes of inactivity.  Implemented  One 4K RX, One 4K TX Testcase 15 Ensure to enable the OSD inactivity timer check box in control tab, set the time to 2 min and click on apply. Ensure the OSD screen to log off and bring back to login screen after 2 minutes of inactivity on OSD screen.  Implemented  One 4K RX, One 4K TX Testcase 16 Ensure to enable both the OSD inactivity timer and the connection inactivity timer check boxes in control tab, set the time to 2 min and click on apply. Ensure the connection breaks exactly at 2 mins then OSD screen to log off and bring back to login screen after next 2 minutes of inactivity on OSD screen.  Implemented  One 4K RX, One 4K TX Testcase 17 Create and assign a connection to a user by enablling autoconnect option for the user. Ensure the connection launches on login for the user.  Implemented  One 4K RX, One 4K TX Testcase 18 Ensure the Information tab is clicked and opened.  Implemented  One 4K RX, One 4K TX"},{"location":"automation/Seperated_test_case_lists/General_unmanaged-4KTXNEW/","title":"General_unmanaged-4KTXNEW","text":"Test Case Reference Description Status Test Assets Required Details Comments Testcase 1 Ensure an unmanaged 4K TX without an existing connections accepts a private view only connection from an unmanaged 2K SE DH RX attempting to connect in a private mode. Ensure the active connection should have view only enabled.  Implemented  One 2K SE DH RX, One 4K TX Testcase 2 For a Video Source Optimization as 'Off', Ensure an unmanage 2K SE DH RX in private Optimised has an fps of 59, a dropped frame count of 0 and bandwidth of 88 Mbps or more , after it connects to an unmanage 4K TX if the target PC playing Avatar full screen in VLC.  Implemented  One 2K SE DH RX, One 4K TX Testcase 3 For a Video Source Optimization as 'DVI Optimised', Ensure an unmanage 2K SE DH RX in private Optimised has an fps of 59, a dropped frame count of 0 and bandwidth of 88 Mbps or more , after it connects to an unmanaged 4K TX if the target PC playing Avatar full screen in VLC.  Implemented  One 2K SE DH RX, One 4K TX Testcase 4 For a Video Source Optimization as 'VGA - high performance', Ensure an Unmanage 2K SE DH RX in private Optimised has an fps of 59, a dropped frame count of 0 and bandwidth of 88 Mbps or more , after it connects to an unmanaged 4K TX if the target PC playing Avatar full screen in VLC.  Implemented  One 2K SE DH RX, One 4K TX Testcase 5 For a Video Source Optimization as 'VGA - optimized performance', Ensure an Unmanage 2K SE DH RX in private Optimised has an fps of 59, a dropped frame count of 0 and bandwidth of 88 Mbps or more , after it connects to an unmanage 4K TX if the target PC playing Avatar full screen in VLC.  Implemented  One 2K SE DH RX, One 4K TX Testcase 6 For a Video Source Optimization as 'VGA - low bandwidth', Ensure an Unmanage 2K SE DH RX in private Optimised has an fps of 59, a dropped frame count of 0 and bandwidth of 88 Mbps or more, after it connects to an unmanage 4K TX if the target PC playing Avatar full screen in VLC.  Implemented  One 2K SE DH RX, One 4K TX Testcase 7 Create a user and a connection in OSD screen, assign the created connection to the user as favourite connection, ensure the favourite connection is launched using HOT Key after the user logged in to the unmanaged RX.  Implemented  One 2K SE DH RX, One 4K TX Testcase 8 Ensure all the HID configuration applies successfully.  Implemented  One 2K SE DH RX, One 4K TX Testcase 9 Ensure to select different video qualities for a TX and launch a connection. check the video qulaity and measure the FPS.  Implemented  One 2K SE DH RX, One 4K TX Testcase 10 Ensure the various hot keys such as PrintScrn, Alt-Alt, Ctrl-Ctrl and Shift-Shift works.  Implemented  One 2K SE DH RX, One 4K TX Testcase 11 Ensure the various hot keys such as PrintScrn+0, Alt-Alt+0, Ctrl-Ctrl+0, Shift-Shift+0; and Mouse clicks works.  Implemented  One 2K SE DH RX, One 4K TX Testcase 12 Ensure that USBr is disabled for Shared Mode View Only conenctions.  Implemented  One 2K SE DH RX, One 4K TX Testcase 13 Ensure to create a Power user and the user should have an option to reboot.  Implemented  One 2K SE DH RX, One 4K TX Testcase 14 Ensure to enable the connection inctivity timer check box in control tab, set the time to 2 mins and click on apply. Create a 2K Private conenction and launch the connection. Ensure that connection to terminate automatically after 2 minutes of inactivity.  Implemented  One 2K SE DH RX, One 4K TX Testcase 15 Ensure to enable the OSD inactivity timer check box in control tab, set the time to 2 min and click on apply. Ensure the OSD screen to log off and bring back to login screen after 2 minutes of inactivity on OSD screen.  Implemented  One 2K PE SH RX, One 4K TX Testcase 16 Ensure to enable both the OSD inactivity timer and the connection inactivity timer check boxes in control tab, set the time to 2 min and click on apply. Ensure the connection breaks exactly at 2 mins then OSD screen to log off and bring back to login screen after next 2 minutes of inactivity on OSD screen.  Implemented  One 2K SE DH RX, One 4K TX Testcase 17 Create and assign a connection to a user by enablling autoconnect option for the user. Ensure the connection launches on login for the user.  Implemented  One 2K SE DH RX, One 4K TX Testcase 18 Ensure the Information tab is clicked and opened.  Implemented  One 2K SE DH RX, One 4K TX"},{"location":"automation/Seperated_test_case_lists/General_unmanaged-4KTXOLD/","title":"General_unmanaged-4KTXOLD","text":"Test Case Reference Description Status Test Assets Required Details Comments Testcase 1 Ensure an unmanaged 4K TX without an existing connections accepts a private view only connection from an unmanaged 2K PE DH RX attempting to connect in a private mode. Ensure the active connection should have view only enabled.  Implemented  One 2K PE DH RX, One 4K TX Testcase 2 For a Video Source Optimization as 'Off', Ensure an unmanage 2K SE DH RX in private Optimised has an fps of 59, a dropped frame count of 0 and bandwidth of 88 Mbps or more , after it connects to an unmanage 4K TX if the target PC playing Avatar full screen in VLC.  Implemented  One 2K SE DH RX, One 4K TX Testcase 3 For a Video Source Optimization as 'DVI Optimised', Ensure an unmanage 2K SE DH RX in private Optimised has an fps of 59, a dropped frame count of 0 and bandwidth of 88 Mbps or more , after it connects to an unmanaged 4K TX if the target PC playing Avatar full screen in VLC.  Implemented  One 2K SE DH RX, One 4K TX Testcase 4 For a Video Source Optimization as 'VGA - high performance', Ensure an Unmanage 2K SE DH RX in private Optimised has an fps of 59, a dropped frame count of 0 and bandwidth of 88 Mbps or more , after it connects to an unmanaged 4K TX if the target PC playing Avatar full screen in VLC.  Implemented  One 2K SE DH RX, One 4K TX Testcase 5 For a Video Source Optimization as 'VGA - optimized performance', Ensure an Unmanage 2K SE DH RX in private Optimised has an fps of 59, a dropped frame count of 0 and bandwidth of 88 Mbps or more , after it connects to an unmanage 4K TX if the target PC playing Avatar full screen in VLC.  Implemented  One 2K SE DH RX, One 4K TX Testcase 6 For a Video Source Optimization as 'VGA - low bandwidth', Ensure an Unmanage 2K SE DH RX in private Optimised has an fps of 59, a dropped frame count of 0 and bandwidth of 88 Mbps or more, after it connects to an unmanage 4K TX if the target PC playing Avatar full screen in VLC.  Implemented  One 2K SE DH RX, One 4K TX Testcase 7 Create a user and a connection in OSD screen, assign the created connection to the user as favourite connection, ensure the favourite connection is launched using HOT Key after the user logged in to the unmanaged RX.  Implemented  One 2K SE DH RX, One 4K TX Testcase 8 Ensure all the HID configuration applies successfully.  Implemented  One 2K SE DH RX, One 4K TX Testcase 9 Ensure to select different video qualities for a TX and launch a connection. check the video qulaity and measure the FPS.  Implemented  One 2K SE DH RX, One 4K TX Testcase 10 Ensure the various hot keys such as PrintScrn, Alt-Alt, Ctrl-Ctrl and Shift-Shift works.  Implemented  One 2K SE DH RX, One 4K TX Testcase 11 Ensure the various hot keys such as PrintScrn+0, Alt-Alt+0, Ctrl-Ctrl+0, Shift-Shift+0; and Mouse clicks works.  Implemented  One 2K SE DH RX, One 4K TX Testcase 12 Ensure that USBr is disabled for Shared Mode View Only conenctions.  Implemented  One 2K SE DH RX, One 4K TX Testcase 13 Ensure to create a Power user and the user should have an option to reboot.  Implemented  One 2K SE DH RX, One 4K TX Testcase 14 Ensure to enable the connection inctivity timer check box in control tab, set the time to 2 mins and click on apply. Create a 2K Private conenction and launch the connection. Ensure that connection to terminate automatically after 2 minutes of inactivity.  Implemented  One 2K SE DH RX, One 4K TX Testcase 15 Ensure to enable the OSD inactivity timer check box in control tab, set the time to 2 min and click on apply. Ensure the OSD screen to log off and bring back to login screen after 2 minutes of inactivity on OSD screen.  Implemented  One 2K PE DH RX, One 4K TX Testcase 16 Ensure to enable both the OSD inactivity timer and the connection inactivity timer check boxes in control tab, set the time to 2 min and click on apply. Ensure the connection breaks exactly at 2 mins then OSD screen to log off and bring back to login screen after next 2 minutes of inactivity on OSD screen.  Implemented  One 2K SE DH RX, One 4K TX Testcase 17 Create and assign a connection to a user by enablling autoconnect option for the user. Ensure the connection launches on login for the user.  Implemented  One 2K SE DH RX, One 4K TX Testcase 18 Ensure the Information tab is clicked and opened.  Implemented  One 2K SE DH RX, One 4K TX"},{"location":"automation/Seperated_test_case_lists/General_unmanaged-PEDPSHTX/","title":"General_unmanaged-PEDPSHTX","text":"Test Case Reference Description Status Test Assets Required Details Comments Testcase 1 Ensure an unmanaged 2K PE DP SH TX without an existing connections accepts a private view only connection from an unmanaged 2K SE DH RX attempting to connect in a private mode. Ensure the active connection should have view only enabled.  Implemented  One 2K SE DH RX, One 2K PE DP SH TX Testcase 2 For a Video Source Optimization as 'Off', Ensure an unmanage 2K SE DH RX in private Optimised has an fps of 59, a dropped frame count of 0 and bandwidth of 88 Mbps or more , after it connects to an unmanage 2K PE DP SH TX if the target PC playing Avatar full screen in VLC.  Implemented  One 2K SE DH RX, One 2K PE DP SH TX Testcase 3 For a Video Source Optimization as 'DVI Optimised', Ensure an unmanage 2K SE DH RX in private Optimised has an fps of 59, a dropped frame count of 0 and bandwidth of 88 Mbps or more , after it connects to an unmanaged 2K PE DP SH TX if the target PC playing Avatar full screen in VLC.  Implemented  One 2K SE DH RX, One 2K PE DP SH TX Testcase 4 For a Video Source Optimization as 'VGA - high performance', Ensure an Unmanage 2K SE DH RX in private Optimised has an fps of 59, a dropped frame count of 0 and bandwidth of 88 Mbps or more , after it connects to an unmanaged 2K PE DP SH TX if the target PC playing Avatar full screen in VLC.  Implemented  One 2K SE DH RX, One 2K PE DP SH TX Testcase 5 For a Video Source Optimization as 'VGA - optimized performance', Ensure an Unmanage 2K SE DH RX in private Optimised has an fps of 59, a dropped frame count of 0 and bandwidth of 88 Mbps or more , after it connects to an unmanage 2K PE DP SH TX if the target PC playing Avatar full screen in VLC.  Implemented  One 2K SE DH RX, One 2K PE DP SH TX Testcase 6 For a Video Source Optimization as 'VGA - low bandwidth', Ensure an Unmanage 2K SE DH RX in private Optimised has an fps of 59, a dropped frame count of 0 and bandwidth of 88 Mbps or more, after it connects to an unmanage 2K PE DP SH TX if the target PC playing Avatar full screen in VLC.  Implemented  One 2K SE DH RX, One 2K PE DP SH TX Testcase 7 Create a user and a connection in OSD screen, assign the created connection to the user as favourite connection, ensure the favourite connection is launched using HOT Key after the user logged in to the unmanaged RX.  Implemented  One 2K SE DH RX, One 2K PE DP SH TX Testcase 8 Ensure all the HID configuration applies successfully.  Implemented  One 2K SE DH RX, One 2K PE DP SH TX Testcase 9 Ensure to select different video qualities for a TX and launch a connection. check the video qulaity and measure the FPS.  Implemented  One 2K SE DH RX, One 2K PE DP SH TX Testcase 10 Ensure the various hot keys such as PrintScrn, Alt-Alt, Ctrl-Ctrl and Shift-Shift works.  Implemented  One 2K SE DH RX, One 2K PE DP SH TX Testcase 11 Ensure the various hot keys such as PrintScrn+0, Alt-Alt+0, Ctrl-Ctrl+0, Shift-Shift+0; and Mouse clicks works.  Implemented  One 2K SE DH RX, One 2K PE DP SH TX Testcase 12 Ensure that USBr is disabled for Shared Mode View Only conenctions.  Implemented  One 2K SE DH RX, One 2K PE DP SH TX Testcase 13 Ensure to create a Power user and the user should have an option to reboot.  Implemented  One 2K SE DH RX, One 2K PE DP SH TX Testcase 14 Ensure to enable the connection inctivity timer check box in control tab, set the time to 2 mins and click on apply. Create a 2K Private conenction and launch the connection. Ensure that connection to terminate automatically after 2 minutes of inactivity.  Implemented  One 2K SE DH RX, One 2K PE DP SH TX Testcase 15 Ensure the Information tab is clicked and opened.  Implemented  One 2K SE DH RX, One 2K PE DP SH TX Testcase 16 Ensure to enable both the OSD inactivity timer and the connection inactivity timer check boxes in control tab, set the time to 2 min and click on apply. Ensure the connection breaks exactly at 2 mins then OSD screen to log off and bring back to login screen after next 2 minutes of inactivity on OSD screen.  Implemented  One 2K SE DH RX, One 2K PE DP SH TX Testcase 17 Create and assign a connection to a user by enablling autoconnect option for the user. \u00a0Ensure the connection launches on login for the user.  Implemented  One 2K SE DH RX, One 2K PE DP SH TX Testcase 18 Ensure the Information tab is clicked and opened.  Implemented  One 2K SE DH RX, One 2K PE DP SH TX"},{"location":"automation/Seperated_test_case_lists/General_unmanaged-PEDPTXDH/","title":"General_unmanaged-PEDPDHTX","text":"Test Case Reference Description Status Test Assets Required Details Comments Testcase 1 Ensure an unmanaged 2K PE DP DH TX without an existing connections accepts a private view only connection from an unmanaged 2K PE DH RX attempting to connect in a private mode. Ensure the active connection should have view only enabled.  Implemented  One 2K PE DH RX, One 2K PE DP DH TX Testcase 2 Ensure to enable the connection inctivity timer check box in control tab, set the time to 2 mins and click on apply. Create a 2K Private conenction and launch the connection. Ensure that connection to terminate automatically after 2 minutes of inactivity.  Implemented  One 2K SE DH RX, One 2K PE DP DH TX Testcase 3 Ensure to enable the OSD inactivity timer check box in control tab, set the time to 2 min and click on apply. Ensure the OSD screen to log off and bring back to login screen after 2 minutes of inactivity on OSD screend.  Implemented  One 2K SE DH RX, One 2K PE DP DH TX Testcase 4 Ensure to enable both the OSD inactivity timer and the connection inactivity timer check boxes in control tab, set the time to 2 min and click on apply. Ensure the connection breaks exactly at 2 mins then OSD screen to log off and bring back to login screen after next 2 minutes of inactivity on OSD screen.  Implemented  One 2K SE DH RX, One 2K PE DP DH TX Testcase 5 Create and assign a connection to a user by enablling autoconnect option for the user. Ensure the connection launches on login for the user.  Implemented  One 2K SE DH RX, One 2K PE DP DH TX Testcase 6 Ensure the Information tab is clicked and opened.  Implemented  One 2K SE DH RX, One 2K PE DP DH TX Testcase 7 Create a user and a connection in OSD screen, assign the created connection to the user as favourite connection, ensure the favourite connection is launched using HOT Key after the user logged in to the unmanaged RX.  Implemented  One 2K SE DH RX, One 2K PE DP DH TX Testcase 8 Ensure all the HID configuration applies successfully.  Implemented  One 2K SE DH RX, One 2K PE DP DH TX Testcase 9 Ensure to select different video qualities for a TX and launch a connection. check the video qulaity and measure the FPS.  Implemented  One 2K SE DH RX, One 2K PE DP DH TX Testcase 10 Ensure the various hot keys such as PrintScrn, Alt-Alt, Ctrl-Ctrl and Shift-Shift works.  Implemented  One 2K SE DH RX, One 2K PE DP DH TX Testcase 11 Ensure the various hot keys such as PrintScrn+0, Alt-Alt+0, Ctrl-Ctrl+0, Shift-Shift+0; and Mouse clicks works.  Implemented  One 2K SE DH RX, One 2K PE DP DH TX Testcase 12 Ensure that USBr is disabled for Shared Mode View Only.  Implemented  One 2K SE DH RX, One 2K PE DP DH TX Testcase 13 Ensure to create a Power user and the user should have an option to reboot .  Implemented  One 2K SE DH RX, One 2K PE DP DH TX"},{"location":"automation/Seperated_test_case_lists/General_unmanaged-PEDVIDHTX/","title":"General_unmanaged-PEDVIDHTX","text":"Test Case Reference Description Status Test Assets Required Details Comments Testcase 1 Ensure an unmanaged 2K PE DVI DH TX without an existing connections accepts a private view only connection from an unmanaged 2K PE DH RX attempting to connect in a private mode. Ensure the active connection should have view only enabled.  Implemented  One 2K PE DH RX, One 2K PE DVI DH TX Testcase 2 Ensure the Information tab is clicked and opened.  Implemented  One 2K SE DH RX, One 2K PE DVI DH TX Testcase 3 Create and assign a connection to a user by enablling autoconnect option for the user. Ensure the connection launches on login for the user.  Implemented  One 2K SE DH RX, One 2K PE DVI DH TX Testcase 4 Ensure to enable both the OSD inactivity timer and the connection inactivity timer check boxes in control tab, set the time to 2 min and click on apply. Ensure the connection breaks exactly at 2 mins then OSD screen to log off and bring back to login screen after next 2 minutes of inactivity on OSD screen.  Implemented  One 2K SE DH RX, One 2K PE DVI DH TX Testcase 5 Ensure to enable the connection inctivity timer check box in control tab, set the time to 2 mins and click on apply. Create a 2K Private conenction and launch the connection. Ensure that connection to terminate automatically after 2 minutes of inactivity.  Implemented  One 2K SE DH RX, One 2K PE DVI DH TX Testcase 6 Ensure to create a Power user and the user should have an option to reboot.  Implemented  One 2K SE DH RX, One 2K PE DVI DH TX Testcase 7 Create a user and a connection in OSD screen, assign the created connection to the user as favourite connection, ensure the favourite connection is launched using HOT Key after the user logged in to the unmanaged RX.  Implemented  One 2K SE DH RX, One 2K PE DVI DH TX Testcase 8 Ensure all the HID configuration applies successfully.  Implemented  One 2K SE DH RX, One 2K PE DVI DH TX Testcase 9 Ensure to select different video qualities for a TX and launch a connection. check the video qulaity and measure the FPS.  Implemented  One 2K SE DH RX, One 2K PE DVI DH TX Testcase 10 Ensure the various hot keys such as PrintScrn, Alt-Alt, Ctrl-Ctrl and Shift-Shift works.  Implemented  One 2K SE DH RX, One 2K PE DVI DH TX Testcase 11 Ensure the various hot keys such as PrintScrn+0, Alt-Alt+0, Ctrl-Ctrl+0, Shift-Shift+0; and Mouse clicks works.  Implemented  One 2K SE DH RX, One 2K PE DVI DH TX Testcase 12 Ensure that USBr is disabled for Shared Mode View Only conenctions.  Implemented  One 2K SE DH RX, One 2K PE DVI DH TX"},{"location":"automation/Seperated_test_case_lists/General_unmanaged-PETXDH/","title":"General_unmanaged-PEDHTX","text":"Test Case Reference Description Status Test Assets Required Details Comments Testcase 1 Ensure an unmanaged 2K PE DH TX without an existing connections accepts a private view only connection from an unmanaged 2K PE DH RX attempting to connect in a private mode. Ensure the active connection should have view only enabled.  Implemented  One 2K PE DH RX, One 2K PE DH TX Testcase 2 Ensure to create a Power user and the user should have an option to reboot.  Implemented  One 2K SE DH RX, One 2K PE DH TX Testcase 3 Ensure to enable the connection inctivity timer check box in control tab, set the time to 2 mins and click on apply. Create a 2K Private conenction and launch the connection. Ensure that connection to terminate automatically after 2 minutes of inactivity.  Implemented  One 2K SE DH RX, One 2K PE DH TX Testcase 4 Ensure to enable both the OSD inactivity timer and the connection inactivity timer check boxes in control tab, set the time to 2 min and click on apply. Ensure the connection breaks exactly at 2 mins then OSD screen to log off and bring back to login screen after next 2 minutes of inactivity on OSD screen.  Implemented  One 2K SE DH RX, One 2K PE DH TX Testcase 5 Create and assign a connection to a user by enablling autoconnect option for the user. \u00a0Ensure the connection launches on login for the user.  Implemented  One 2K SE DH RX, One 2K PE DH TX Testcase 6 Ensure the Information tab is clicked and opened.  Implemented  One 2K SE DH RX, One 2K PE DH TX Testcase 7 Create a user and a connection in OSD screen, assign the created connection to the user as favourite connection, ensure the favourite connection is launched using HOT Key after the user logged in to the unmanaged RX.  Implemented  One 2K SE DH RX, One 2K PE DH TX Testcase 8 Ensure all the HID configuration applies successfully.  Implemented  One 2K SE DH RX, One 2K PE DH TX Testcase 9 Ensure to select different video qualities for a TX and launch a connection. check the video qulaity and measure the FPS.  Implemented  One 2K SE DH RX, One 2K PE DH TX Testcase 10 Ensure the various hot keys such as PrintScrn, Alt-Alt, Ctrl-Ctrl and Shift-Shift works.  Implemented  One 2K SE DH RX, One 2K PE DH TX Testcase 11 Ensure the various hot keys such as PrintScrn+0, Alt-Alt+0, Ctrl-Ctrl+0, Shift-Shift+0; and Mouse clicks works.  Implemented  One 2K SE DH RX, One 2K PE DH TX Testcase 12 Ensure that USBr is disabled for Shared Mode View Only conenctions.  Implemented  One 2K SE DH RX, One 2K PE DH TX"},{"location":"automation/Seperated_test_case_lists/General_unmanaged-PETXSHDVI/","title":"General_unmanaged-PEDVISHTX","text":"Test Case Reference Description Status Test Assets Required Details Comments Testcase 1 Ensure an unmanaged 2K PE DVI SH TX without an existing connections accepts a private view only connection from an unmanaged 2K SE DH RX attempting to connect in a private mode. Ensure the active connection should have view only enabled.  Implemented  One 2K SE DH RX, One 2K PE DVI SH TX Testcase 2 For a Video Source Optimization as 'Off', Ensure an unmanage 2K SE DH RX in private Optimised has an fps of 59, a dropped frame count of 0 and bandwidth of 88 Mbps or more , after it connects to an unmanage 2K PE DVI SH TX if the target PC playing Avatar full screen in VLC.  Implemented  One 2K SE DH RX, One 2K PE DVI SH TX Testcase 3 For a Video Source Optimization as 'DVI Optimised', Ensure an unmanage 2K SE DH RX in private Optimised has an fps of 59, a dropped frame count of 0 and bandwidth of 88 Mbps or more , after it connects to an unmanaged 2K PE DVI SH TX if the target PC playing Avatar full screen in VLC.  Implemented  One 2K SE DH RX, One 2K PE DVI SH TX Testcase 4 For a Video Source Optimization as 'VGA - high performance', Ensure an Unmanage 2K SE DH RX in private Optimised has an fps of 59, a dropped frame count of 0 and bandwidth of 88 Mbps or more , after it connects to an unmanaged 2K PE DVI SH TX if the target PC playing Avatar full screen in VLC.  Implemented  One 2K SE DH RX, One 2K PE DVI SH TX Testcase 5 For a Video Source Optimization as 'VGA - optimized performance', Ensure an Unmanage 2K SE DH RX in private Optimised has an fps of 59, a dropped frame count of 0 and bandwidth of 88 Mbps or more , after it connects to an unmanage 2K PE DVI SH TX if the target PC playing Avatar full screen in VLC.  Implemented  One 2K SE DH RX, One 2K PE DVI SH TX Testcase 6 For a Video Source Optimization as 'VGA - low bandwidth', Ensure an Unmanage 2K SE DH RX in private Optimised has an fps of 59, a dropped frame count of 0 and bandwidth of 88 Mbps or more, after it connects to an unmanage 2K PE DVI SH TX if the target PC playing Avatar full screen in VLC.  Implemented  One 2K SE DH RX, One 2K PE DVI SH TX Testcase 7 Create a user and a connection in OSD screen, assign the created connection to the user as favourite connection, ensure the favourite connection is launched using HOT Key after the user logged in to the unmanaged RX.  Implemented  One 2K SE DH RX, One 2K PE DVI SH TX Testcase 8 Ensure all the HID configuration applies successfully.  Implemented  One 2K SE DH RX, One 2K PE DVI SH TX Testcase 9 Ensure to select different video qualities for a TX and launch a connection. check the video qulaity and measure the FPS.  Implemented  One 2K SE DH RX, One 2K PE DVI SH TX Testcase 10 Ensure the various hot keys such as PrintScrn, Alt-Alt, Ctrl-Ctrl and Shift-Shift works.  Implemented  One 2K SE DH RX, One 2K PE DVI SH TX Testcase 11 Ensure the various hot keys such as PrintScrn+0, Alt-Alt+0, Ctrl-Ctrl+0, Shift-Shift+0; and Mouse clicks works.  Implemented  One 2K SE DH RX, One 2K PE DVI SH TX Testcase 12 Ensure that USBr is disabled for Shared Mode View Only conenctions.  Implemented  One 2K SE DH RX, One 2K PE DVI SH TX Testcase 13 Ensure to create a Power user and the user should have an option to reboot.  Implemented  One 2K SE DH RX, One 2K PE DVI SH TX Testcase 14 Ensure to enable the connection inctivity timer check box in control tab, set the time to 2 mins and click on apply. Create a 2K Private conenction and launch the connection. Ensure that connection to terminate automatically after 2 minutes of inactivity.  Implemented  One 2K SE DH RX, One 2K PE DVI SH TX Testcase 15 Ensure the Information tab is clicked and opened.  Implemented  One 2K SE DH RX, One 2K PE DVI SH TX Testcase 16 Ensure to enable both the OSD inactivity timer and the connection inactivity timer check boxes in control tab, set the time to 2 min and click on apply. Ensure the connection breaks exactly at 2 mins then OSD screen to log off and bring back to login screen after next 2 minutes of inactivity on OSD screen.  Implemented  One 2K SE DH RX, One 2K PE DVI SH TX Testcase 17 Create and assign a connection to a user by enablling autoconnect option for the user. \u00a0Ensure the connection launches on login for the user.  Implemented  One 2K SE DH RX, One 2K PE DVI SH TX Testcase 18 Ensure the Information tab is clicked and opened.  Implemented  One 2K SE DH RX, One 2K PE DVI SH TX"},{"location":"automation/Seperated_test_case_lists/General_unmanaged-SEDPSHTX/","title":"General_unmanaged-SEDPSHTX","text":"Test Case Reference Description Status Test Assets Required Details Comments Testcase 1 Ensure an unmanaged 2K SE DP SH TX without an existing connections accepts a private view only connection from an unmanaged 2K SE DH RX attempting to connect in a private mode. Ensure the active connection should have view only enabled.  Implemented  One 2K SE DH RX, One 2K SE DP SH TX Testcase 2 For a Video Source Optimization as 'Off', Ensure an unmanage 2K SE DH RX in private Optimised has an fps of 59, a dropped frame count of 0 and bandwidth of 88 Mbps or more , after it connects to an unmanage 2K SE DP SH TX if the target PC playing Avatar full screen in VLC.  Implemented  One 2K SE DH RX, One 2K SE DP SH TX Testcase 3 For a Video Source Optimization as 'DVI Optimised', Ensure an unmanage 2K SE DH RX in private Optimised has an fps of 59, a dropped frame count of 0 and bandwidth of 88 Mbps or more , after it connects to an unmanaged 2K SE DP SH TX if the target PC playing Avatar full screen in VLC.  Implemented  One 2K SE DH RX, One 2K SE DP SH TX Testcase 4 For a Video Source Optimization as 'VGA - high performance', Ensure an Unmanage 2K SE DH RX in private Optimised has an fps of 59, a dropped frame count of 0 and bandwidth of 88 Mbps or more , after it connects to an unmanaged 2K SE DP SH TX if the target PC playing Avatar full screen in VLC.  Implemented  One 2K SE DH RX, One 2K SE DP SH TX Testcase 5 For a Video Source Optimization as 'VGA - optimized performance', Ensure an Unmanage 2K SE DH RX in private Optimised has an fps of 59, a dropped frame count of 0 and bandwidth of 88 Mbps or more , after it connects to an unmanage 2K SE DP SH TX if the target PC playing Avatar full screen in VLC.  Implemented  One 2K SE DH RX, One 2K SE DP SH TX Testcase 6 For a Video Source Optimization as 'VGA - low bandwidth', Ensure an Unmanage 2K SE DH RX in private Optimised has an fps of 59, a dropped frame count of 0 and bandwidth of 88 Mbps or more, after it connects to an unmanage 2K SE DP SH TX if the target PC playing Avatar full screen in VLC.  Implemented  One 2K SE DH RX, One 2K SE DP SH TX Testcase 7 Create a user and a connection in OSD screen, assign the created connection to the user as favourite connection, ensure the favourite connection is launched using HOT Key after the user logged in to the unmanaged RX.  Implemented  One 2K SE DH RX, One 2K SE DP SH TX Testcase 8 Ensure all the HID configuration applies successfully.  Implemented  One 2K SE DH RX, One 2K SE DP SH TX Testcase 9 Ensure to select different video qualities for a TX and launch a connection. check the video qulaity and measure the FPS.  Implemented  One 2K SE DH RX, One 2K SE DP SH TX Testcase 10 Ensure the various hot keys such as PrintScrn, Alt-Alt, Ctrl-Ctrl and Shift-Shift works.  Implemented  One 2K SE DH RX, One 2K SE DP SH TX Testcase 11 Ensure the various hot keys such as PrintScrn+0, Alt-Alt+0, Ctrl-Ctrl+0, Shift-Shift+0; and Mouse clicks works.  Implemented  One 2K SE DH RX, One 2K SE DP SH TX Testcase 12 Ensure that USBr is disabled for Shared Mode View Only conenctions.  Implemented  One 2K SE DH RX, One 2K SE DP SH TX Testcase 13 Ensure to create a Power user and the user should have an option to reboot.  Implemented  One 2K SE DH RX, One 2K SE DP SH TX Testcase 14 Ensure to enable the connection inctivity timer check box in control tab, set the time to 2 mins and click on apply. Create a 2K Private conenction and launch the connection. Ensure that connection to terminate automatically after 2 minutes of inactivity.  Implemented  One 2K SE DH RX, One 2K SE DP SH TX Testcase 15 Ensure the Information tab is clicked and opened.  Implemented  One 2K SE DH RX, One 2K SE DP SH TX Testcase 16 Ensure to enable both the OSD inactivity timer and the connection inactivity timer check boxes in control tab, set the time to 2 min and click on apply. Ensure the connection breaks exactly at 2 mins then OSD screen to log off and bring back to login screen after next 2 minutes of inactivity on OSD screen.  Implemented  One 2K SE DH RX, One 2K SE DP SH TX Testcase 17 Create and assign a connection to a user by enablling autoconnect option for the user. \u00a0Ensure the connection launches on login for the user.  Implemented  One 2K SE DH RX, One 2K SE DP SH TX Testcase 18 Ensure the Information tab is clicked and opened.  Implemented  One 2K SE DH RX, One 2K SE DP SH TX"},{"location":"automation/Seperated_test_case_lists/General_unmanaged-SEDVITXSH/","title":"General_unmanaged-SEDVISHTX","text":"Test Case Reference Description Status Test Assets Required Details Comments Testcase 1 Ensure an unmanaged 2K SE DVI SH TX without an existing connections accepts a private view only connection from an unmanaged 2K SE DH RX attempting to connect in a private mode. Ensure the active connection should have view only enabled.  Implemented  One 2K SE DH RX, One 2K SE DVI SH TX Testcase 2 For a Video Source Optimization as 'Off', Ensure an unmanage 2K SE DH RX in private Optimised has an fps of 59, a dropped frame count of 0 and bandwidth of 88 Mbps or more , after it connects to an unmanage 2K SE DVI SH TX if the target PC playing Avatar full screen in VLC.  Implemented  One 2K SE DH RX, One 2K SE DVI SH TX Testcase 3 For a Video Source Optimization as 'DVI Optimised', Ensure an unmanage 2K SE DH RX in private Optimised has an fps of 59, a dropped frame count of 0 and bandwidth of 88 Mbps or more , after it connects to an unmanaged 2K SE DVI SH TX if the target PC playing Avatar full screen in VLC.  Implemented  One 2K SE DH RX, One 2K SE DVI SH TX Testcase 4 For a Video Source Optimization as 'VGA - high performance', Ensure an Unmanage 2K SE DH RX in private Optimised has an fps of 59, a dropped frame count of 0 and bandwidth of 88 Mbps or more , after it connects to an unmanaged 2K SE DVI SH TX if the target PC playing Avatar full screen in VLC.  Implemented  One 2K SE DH RX, One 2K SE DVI SH TX Testcase 5 For a Video Source Optimization as 'VGA - optimized performance', Ensure an Unmanage 2K SE DH RX in private Optimised has an fps of 59, a dropped frame count of 0 and bandwidth of 88 Mbps or more , after it connects to an unmanage 2K SE DVI SH TX if the target PC playing Avatar full screen in VLC.  Implemented  One 2K SE DH RX, One 2K SE DVI SH TX Testcase 6 For a Video Source Optimization as 'VGA - low bandwidth', Ensure an Unmanage 2K SE DH RX in private Optimised has an fps of 59, a dropped frame count of 0 and bandwidth of 88 Mbps or more, after it connects to an unmanage 2K SE DVI SH TX if the target PC playing Avatar full screen in VLC.  Implemented  One 2K SE DH RX, One 2K SE DVI SH TX Testcase 7 Create a user and a connection in OSD screen, assign the created connection to the user as favourite connection, ensure the favourite connection is launched using HOT Key after the user logged in to the unmanaged RX.  Implemented  One 2K SE DH RX, One 2K SE DVI SH TX Testcase 8 Ensure all the HID configuration applies successfully.  Implemented  One 2K SE DH RX, One 2K SE DVI SH TX Testcase 9 Ensure to select different video qualities for a TX and launch a connection. check the video qulaity and measure the FPS.  Implemented  One 2K SE DH RX, One 2K SE DVI SH TX Testcase 10 Ensure the various hot keys such as PrintScrn, Alt-Alt, Ctrl-Ctrl and Shift-Shift works.  Implemented  One 2K SE DH RX, One 2K SE DVI SH TX Testcase 11 Ensure the various hot keys such as PrintScrn+0, Alt-Alt+0, Ctrl-Ctrl+0, Shift-Shift+0; and Mouse clicks works.  Implemented  One 2K SE DH RX, One 2K SE DVI SH TX Testcase 12 Ensure that USBr is disabled for Shared Mode View Only conenctions.  Implemented  One 2K SE DH RX, One 2K SE DVI SH TX Testcase 13 Ensure to create a Power user and the user should have an option to reboot.  Implemented  One 2K SE DH RX, One 2K SE DVI SH TX Testcase 14 Ensure to enable the connection inctivity timer check box in control tab, set the time to 2 mins and click on apply. Create a 2K Private conenction and launch the connection. Ensure that connection to terminate automatically after 2 minutes of inactivity.  Implemented  One 2K SE DH RX, One 2K SE DVI SH TX Testcase 15 Ensure the Information tab is clicked and opened.  Implemented  One 2K SE DH RX, One 2K SE DVI SH TX Testcase 16 Ensure to enable both the OSD inactivity timer and the connection inactivity timer check boxes in control tab, set the time to 2 min and click on apply. Ensure the connection breaks exactly at 2 mins then OSD screen to log off and bring back to login screen after next 2 minutes of inactivity on OSD screen.  Implemented  One 2K SE DH RX, One 2K SE DVI SH TX Testcase 17 Create and assign a connection to a user by enablling autoconnect option for the user. \u00a0Ensure the connection launches on login for the user.  Implemented  One 2K SE DH RX, One 2K SE DVI SH TX"},{"location":"automation/Seperated_test_case_lists/General_unmanaged-SETXDH/","title":"General_unmanaged-SEDHTX","text":"Test Case Reference Description Status Test Assets Required Details Comments Testcase 1 Ensure an unmanaged 2K SE DH TX without an existing connections accepts a private view only connection from an unmanaged 2K SE DH RX attempting to connect in a private mode. Ensure the active connection should have view only enabled.  Implemented  One 2K SE DH RX, One 2K SE DH TX Testcase 2 Ensure to create a Power user and the user should have an option to reboot.  Implemented  One 2K SE DH RX, One 2K SE DH TX Testcase 3 Ensure to enable the connection inctivity timer check box in control tab, set the time to 2 mins and click on apply. Create a 2K Private conenction and launch the connection. Ensure that connection to terminate automatically after 2 minutes of inactivity.  Implemented  One 2K SE DH RX, One 2K SE DH TX Testcase 4 Ensure to enable both the OSD inactivity timer and the connection inactivity timer check boxes in control tab, set the time to 2 min and click on apply. Ensure the connection breaks exactly at 2 mins then OSD screen to log off and bring back to login screen after next 2 minutes of inactivity on OSD screen.  Implemented  One 2K SE DH RX, One 2K SE DH TX Testcase 5 Create and assign a connection to a user by enablling autoconnect option for the user. Ensure the connection launches on login for the user.  Implemented  One 2K SE DH RX, One 2K SE DH TX Testcase 6 Ensure the Information tab is clicked and opened.  Implemented  One 2K SE DH RX, One 2K SE DH TX Testcase 7 Create a user and a connection in OSD screen, assign the created connection to the user as favourite connection, ensure the favourite connection is launched using HOT Key after the user logged in to the unmanaged RX.  Implemented  One 2K SE DH RX, One 2K SE DH TX Testcase 8 Ensure all the HID configuration applies successfully.  Implemented  One 2K SE DH RX, One 2K SE DH TX Testcase 9 Ensure to select different video qualities for a TX and launch a connection. check the video qulaity and measure the FPS.  Implemented  One 2K SE DH RX, One 2K SE DH TX Testcase 10 Ensure the various hot keys such as PrintScrn, Alt-Alt, Ctrl-Ctrl and Shift-Shift works.  Implemented  One 2K SE DH RX, One 2K SE DH TX Testcase 11 Ensure the various hot keys such as PrintScrn+0, Alt-Alt+0, Ctrl-Ctrl+0, Shift-Shift+0; and Mouse clicks works.  Implemented  One 2K SE DH RX, One 2K SE DH TX Testcase 12 Ensure that USBr is disabled for Shared Mode View Only conenctions.  Implemented  One 2K SE DH RX, One 2K SE DH TX"},{"location":"automation/Seperated_test_case_lists/General_unmanaged-SETXSH/","title":"General_unmanaged-SESHTX","text":"Test Case Reference Description Status Test Assets Required Details Comments Testcase 1 Ensure an unmanaged 2K ZeroU TX without an existing connections accepts a private view only connection from an unmanaged 2K SE DH RX attempting to connect in a private mode. Ensure the active connection should have view only enabled.  Implemented  One 2K SE DH RX, One 2K ZeroU TX Testcase 2 For a Video Source Optimization as 'Off', Ensure an unmanage 2K SE SH RX in private Optimised has an fps of 59, a dropped frame count of 0 and bandwidth of 88 Mbps or more , after it connects to an unmanage 2K SE SH TX if the target PC playing Avatar full screen in VLC.  Implemented  One 2K SE SH RX, One 2K SE SH TX Testcase 3 For a Video Source Optimization as 'DVI Optimised', Ensure an unmanage 2K SE SH RX in private Optimised has an fps of 59, a dropped frame count of 0 and bandwidth of 88 Mbps or more , after it connects to an unmanaged 2K SE SH TX if the target PC playing Avatar full screen in VLC.  Implemented  One 2K SE SH RX, One 2K SE SH TX Testcase 4 For a Video Source Optimization as 'VGA - high performance', Ensure an Unmanage 2K SE SH RX in private Optimised has an fps of 59, a dropped frame count of 0 and bandwidth of 88 Mbps or more , after it connects to an unmanaged 2K SE SH TX if the target PC playing Avatar full screen in VLC.  Implemented  One 2K SE SH RX, One 2K SE SH TX Testcase 5 For a Video Source Optimization as 'VGA - optimized performance', Ensure an Unmanage 2K SE SH RX in private Optimised has an fps of 59, a dropped frame count of 0 and bandwidth of 88 Mbps or more , after it connects to an unmanage 2K SE SH TX if the target PC playing Avatar full screen in VLC.  Implemented  One 2K SE SH RX, One 2K SE SH TX Testcase 6 For a Video Source Optimization as 'VGA - low bandwidth', Ensure an Unmanage 2K SE SH RX in private Optimised has an fps of 59, a dropped frame count of 0 and bandwidth of 88 Mbps or more, after it connects to an unmanage 2K SE SH TX if the target PC playing Avatar full screen in VLC.  Implemented  One 2K SE SH RX, One 2K SE SH TX Testcase 7 Create a user and a connection in OSD screen, assign the created connection to the user as favourite connection, ensure the favourite connection is launched using HOT Key after the user logged in to the unmanaged RX .  Implemented  One 2K SE SH RX, One 2K SE SH TX Testcase 8 Ensure all the HID configuration applies successfully.  Implemented  One 2K SE SH RX, One 2K SE SH TX Testcase 9 Ensure to select different video qualities for a 2K SE SH TX and launch a connection. check the video qulaity and measure the FPS.  Implemented  One 2K SE SH RX, One 2K SE SH TX Testcase 10 Ensure the various hot keys such as PrintScrn, Alt-Alt, Ctrl-Ctrl and Shift-Shift works .  Implemented  One 2K SE SH RX, One 2K SE SH TX Testcase 11 Ensure the various hot keys such as PrintScrn+0, Alt-Alt+0, Ctrl-Ctrl+0, Shift-Shift+0; and Mouse clicks works.  Implemented  One 2K SE SH RX, One 2K SE SH TX Testcase 12 Ensure that USBr is disabled for Shared Mode View Only conenctions.  Implemented  One 2K SE SH RX, One 2K SE SH TX Testcase 13 Ensure to create a Power user and the user should have an option to reboot.  Implemented  One 2K SE SH RX, One 2K SE SH TX Testcase 14 Ensure to enable the connection inctivity timer check box in control tab, set the time to 2 mins and click on apply. Create a 2K Private conenction and launch the connection. Ensure that connection to terminate automatically after 2 minutes of inactivity.  Implemented  One 2K SE SH RX, One 2K SE SH TX Testcase 15 Ensure the Information tab is clicked and opened.  Implemented  One 2K SE SH RX, One 2K SE SH TX Testcase 16 Ensure to enable both the OSD inactivity timer and the connection inactivity timer check boxes in control tab, set the time to 2 min and click on apply. Ensure the connection breaks exactly at 2 mins then OSD screen to log off and bring back to login screen after next 2 minutes of inactivity on OSD screen.  Implemented  One 2K SE SH RX, One 2K SE SH TX Testcase 17 Create and assign a connection to a user by enablling autoconnect option for the user. Ensure the connection launches on login for the user.  Implemented  One 2K SE SH RX, One 2K SE SH TX"},{"location":"automation/Seperated_test_case_lists/General_unmanaged-ZeroUTXSH/","title":"General_unmanaged-ZerouSHTX","text":"Test Case Reference Description Status Test Assets Required Details Comments Testcase 1 Ensure an unmanaged 2K ZeroU TX without an existing connections accepts a private view only connection from an unmanaged 2K SE DH RX attempting to connect in a private mode. Ensure the active connection should have view only enabled.  Implemented  One 2K SE DH RX, One 2K ZeroU TX Testcase 2 For a Video Source Optimization as 'Off', Ensure an unmanage 2K SE DH RX in private Optimised has an fps of 59, a dropped frame count of 0 and bandwidth of 88 Mbps or more , after it connects to an unmanage 2K ZeroU TX if the target PC playing Avatar full screen in VLC.  Implemented  One 2K SE DH RX, One 2K ZeroU TX Testcase 3 For a Video Source Optimization as 'DVI Optimised', Ensure an unmanage 2K SE DH RX in private Optimised has an fps of 59, a dropped frame count of 0 and bandwidth of 88 Mbps or more , after it connects to an unmanaged 2K ZeroU TX if the target PC playing Avatar full screen in VLC.  Implemented  One 2K SE DH RX, One 2K ZeroU TX Testcase 4 For a Video Source Optimization as 'VGA - high performance', Ensure an Unmanage 2K SE DH RX in private Optimised has an fps of 59, a dropped frame count of 0 and bandwidth of 88 Mbps or more , after it connects to an unmanaged 2K ZeroU TX if the target PC playing Avatar full screen in VLC.  Implemented  One 2K SE DH RX, One 2K ZeroU TX Testcase 5 For a Video Source Optimization as 'VGA - optimized performance', Ensure an Unmanage 2K SE DH RX in private Optimised has an fps of 59, a dropped frame count of 0 and bandwidth of 88 Mbps or more , after it connects to an unmanage 2K ZeoU TX if the target PC playing Avatar full screen in VLC.  Implemented  One 2K SE DH RX, One 2K ZeroU TX Testcase 6 For a Video Source Optimization as 'VGA - low bandwidth', Ensure an Unmanage 2K SE DH RX in private Optimised has an fps of 59, a dropped frame count of 0 and bandwidth of 88 Mbps or more, after it connects to an unmanage 2K ZeroU TX if the target PC playing Avatar full screen in VLC.  Implemented  One 2K SE DH RX, One 2K ZeroU TX Testcase 7 Create a user and a connection in OSD screen, assign the created connection to the user as favourite connection, ensure the favourite connection is launched using HOT Key after the user logged in to the unmanaged RX .  Implemented  One 2K SE DH RX, One 2K ZeroU TX Testcase 8 Ensure all the HID configuration applies successfully.  Implemented  One 2K SE DH RX, One 2K ZeroU TX Testcase 9 Ensure to select different video qualities for a 2K ZeroU TX and launch a connection. check the video qulaity and measure the FPS.  Implemented  One 2K SE DH RX, One 2K ZeroU TX Testcase 10 Ensure the various hot keys such as PrintScrn, Alt-Alt, Ctrl-Ctrl and Shift-Shift works .  Implemented  One 2K SE DH RX, One 2K ZeroU TX Testcase 11 Ensure the various hot keys such as PrintScrn+0, Alt-Alt+0, Ctrl-Ctrl+0, Shift-Shift+0; and Mouse clicks works.  Implemented  One 2K SE DH RX, One 2K ZeroU TX Testcase 12 Ensure that USBr is disabled for Shared Mode View Only conenctions.  Implemented  One 2K SE DH RX, One 2K ZeroU TX Testcase 13 Ensure to create a Power user and the user should have an option to reboot.  Implemented  One 2K SE DH RX, One 2K ZeroU TX Testcase 14 Ensure to enable the connection inctivity timer check box in control tab, set the time to 2 mins and click on apply. Create a 2K Private conenction and launch the connection. Ensure that connection to terminate automatically after 2 minutes of inactivity.  Implemented  One 2K SE DH RX, One 2K ZeroU TX Testcase 15 Ensure the Information tab is clicked and opened.  Implemented  One 2K SE DH RX, One 2K ZeroU TX Testcase 16 Ensure to enable both the OSD inactivity timer and the connection inactivity timer check boxes in control tab, set the time to 2 min and click on apply. Ensure the connection breaks exactly at 2 mins then OSD screen to log off and bring back to login screen after next 2 minutes of inactivity on OSD screen.  Implemented  One 2K SE DH RX, One 2K ZeroU TX Testcase 17 Create and assign a connection to a user by enablling autoconnect option for the user. Ensure the connection launches on login for the user.  Implemented  One 2K SE DH RX, One 2K ZeroU TX"},{"location":"automation/Seperated_test_case_lists/Interop_Connection_UnManaged/","title":"Interop_Connection_UnManaged","text":"Test Case Reference Description Status Test Assets Required Details Comments Testcase 1 For a resolution of 3840 x 2160 ,Ensure a 4K RX in a shared connection can switch to a previous connection to a 4K transmitter within 250 milli-seconds.  Implemented  Two 4K RX, One 4K TX Parametric test, confirms that performance is within a defined window Testcase 2 For a resolution of 3840 x 2160, Ensure a 2K PE DH RX in a shared connection can switch to a previous conne.  Implemented  One 2K PE DH RX, One 2K PE SH RX, One 4K TX Parametric test, confirms that performance is within a defined window Testcase 3 For a resolution of 2560 x 1600, Ensure a 2K SE DH RX in a shared connection can switch to a previous connection to a 4K transmitter within 250 milli-seconds.  Implemented  One 2K SE DH RX, One 2K SE SH RX, One 4K TX Parametric test, confirms that performance is within a defined window Testcase 4 For a resolution of 2560 x 2048, Ensure a 2K PE DH RX in a shared connection can switch to a previous connection to a 4K DH transmitter within 250 milli-seconds.  Implemented  One 2K PE DH RX, One 2K PE SH RX, One 4K TX Parametric test, confirms that performance is within a defined window Testcase 5 For a resolution of 2048 x 2048, Ensure a 2K SE DH RX in a shared connection can switch to a previous connection to a 4K SH transmitter within 250 milli-seconds.  Implemented  One 2K SE DH RX, One 2K SE SH RX, One 4K TX Parametric test, confirms that performance is within a defined window Testcase 6 For a resolution of 2048 x 1536, Ensure a 2K PE DH RX in a shared connection can switch to a previous connection to a 4K transmitter within 250 milli-seconds.  Implemented  One 2K PE DH RX, One 2K PE SH RX, One 4K TX Parametric test, confirms that performance is within a defined window"},{"location":"automation/Seperated_test_case_lists/Keyboard/","title":"Keyboard","text":"Test Case Reference Description Status Test Assets Required Details Comments Testcase 1 Ensure to change the keyboard to German languages ensure that OSD supports the language change also validate a successful login.  Implemented  One 2K SE SH RX, One 2K SE SH TX Testcase 2 Ensure to change the keyboard to Japanese languages ensure that OSD supports the language change also validate a successful login.  Implemented  One 4K RX, One 2K SE SH TX Testcase 3 Ensure to change the keyboard to Belgian languages ensure that OSD supports the language change also validate a successful login.  Implemented  One 2K SE DH RX, One 2K SE SH TX Testcase 4 Ensure to change the keyboard to Norweign languages ensure that OSD supports the language change also validate a successful login.  Implemented  One 2K PE DH RX, One 2K SE SH TX Testcase 5 Ensure to change the keyboard to Swedish language ensure that OSD supports the language change also validate a successful login.  Implemented  One 2K PE SH RX, One 2K SE SH TX Testcase 6 Ensure to change the keyboard to English US language ensure that OSD supports the language change also validate a successful login.  Implemented  One 2K PE DH RX, One 2K SE SH TX Testcase 7 Ensure to change the keyboard to French language ensure that OSD supports the language change also validate a successful login.  Implemented  One 2K SE DH RX, One 2K SE SH TX Testcase 8 Ensure to change the keyboard to English UK language ensure that OSD supports the language change also validate a successful login.  Implemented  One 2K SE DH RX, One 2K SE SH TX"},{"location":"automation/Seperated_test_case_lists/Managed_Connection_Performance/","title":"Managed_Connection_Performance","text":"Test Case Reference Description Status Test Assets Required Details Comments Testcase 1 Ensure a 2K PE SH RX in a shared connection can switch to a previous connection (2K PE DH RX) to a 2K SE DP SH transmitter within 250 milli-seconds.  Implemented  One 2K PE SH RX, One 2K PE DH RX, One 2K SE DP SH TX Parametric test, confirms that performance is within a defined window Testcase 2 Ensure a 2K PE SH RX in a shared connection can switch to a previous connection (2K PE DH RX) to a 2K PE DP SH transmitter within 250 milli-seconds.  Implemented  One 2K PE SH RX, One 2K PE DH RX, One 2K PE DP SH TX Parametric test, confirms that performance is within a defined window Testcase 3 Ensure a 2K PE SH RX in a shared connection can switch to a previous connection (2K PE DH RX) to a 2K PE DP DH transmitter within 250 milli-seconds.  Implemented  One 2K PE SH RX, One 2K PE DH RX, One 2K PE DP DH TX Parametric test, confirms that performance is within a defined window Testcase 4 Ensure a 2K SE SH RX in a shared connection can switch to a previous connection (2K SE DH RX) to a 2K SE DP SH transmitter within 250 milli-seconds.  Implemented  One 2K SE SH RX, One 2K SE DH RX, One 2K SE DP SH TX Parametric test, confirms that performance is within a defined window Testcase 5 Ensure a 2K SE DH RX in a shared connection can switch to a previous connection (2K SE SH RX) to a 2K PE DP SH transmitter within 250 milli-seconds.  Implemented  One 2K SE SH RX, One 2K SE DH RX, One 2K PE DP SH TX Parametric test, confirms that performance is within a defined window Testcase 6 Ensure a 2K SE SH RX in a shared connection can switch to a previous connection (2K SE DH RX) to a 2K PE DP DH transmitter within 250 milli-seconds.  Implemented  One 2K SE SH RX, One 2K SE DH RX, One 2K PE DP DH TX Parametric test, confirms that performance is within a defined window Testcase 7 Ensure a 2K SE SH RX in a shared connection can switch to a previous connection (2K SE DH RX) to a VM Connection within 250 milli-seconds.  Implemented  One 2K SE SH RX, One 2K SE DH RX, One ZeroU TX Parametric test, confirms that performance is within a defined window Testcase 8 Ensure a 2K PE DH RX in a shared connection can switch to a previous connection (2K PE SH RX) to a VM Connection within 250 milli-seconds.  Implemented  One 2K PE SH RX, One 2K PE DH RX, One ZeroU TX Parametric test, confirms that performance is within a defined window Testcase 9 Ensure a 2K SE DH RX in a shared connection can switch to a previous connection (2K SE SH RX) to a VM Connection within 250 milli-seconds.  Implemented  One 2K SE SH RX, One 2K SE DH RX, One VM Parametric test, confirms that performance is within a defined window Testcase 10 Ensure a 2K PE DH RX in a shared connection can switch to a previous connection (2K PE SH RX) to a VM Connection within 250 milli-seconds.  Implemented  One 2K PE SH RX, One 2K DH RX, One VM Parametric test, confirms that performance is within a defined window"},{"location":"automation/Seperated_test_case_lists/PC_Resolution/","title":"PC Resolution Case","text":"Test Case Reference Description Status Test Assets Required Details Comments Testcase 1 For a resolution of 1920x1080, Ensure a 4K RX in private lossless mode has an FPS of 60 FPS 2 minutes after it connects to a 4K TX.  Implemented  One 4K RX , One 4K TX Parametric test, confirms that performance is within a defined window Testcase 2 For a resolution of 1920x1080, Ensure a 2K PE SH RX in private optimised mode has an FPS of 59 FPS and a dropped frame count of 0, 2 minutes after it connects to a 2K PE DH TX.  Implemented  One 2K PE SH RX , One 2K PE DH TX Parametric test, confirms that performance is within a defined window Testcase 3 For a resolution of 3840x2160, Ensure a 4K RX in private lossless mode has an FPS of 60 FPS, 2 minutes after it connects to a 4K TX if the target PC is playing Avatar full screen in VLC.  Implemented  One 4K RX , One 4K TX Parametric test, confirms that performance is within a defined window Testcase 4 For a resolution of 3840x2160, Ensure a 4K RX in private lossless mode has an FPS of 60 FPS, 2 minutes after it connects to a 4K TX if the target PC is playing Avatar full screen in VLC.  Implemented  One 4K RX , One 4K TX Parametric test, confirms that performance is within a defined window Testcase 5 For a resolution of 1280X1024, Ensure a 4K RX in private optimised mode has an FPS of 47 FPS, a dropped frame count of 12, 2 minutes after it connects to a 2K SE SH TX if the target PC is playing Avatar full screen in VLC.  Implemented  One 4K RX , One 2K SE SH TX Parametric test, confirms that performance is within a defined window Testcase 6 For a resolution of 3840x2160, Ensure a DH 2K SE DH RX in private optimised mode has an FPS of 47 FPS, a dropped frame count of 12, 2 minutes after it connects to a 4K TX with scaling enabled if the target PC is playing Avitar full screen in VLC.  Implemented  One 4K RX , One 2K SE DH TX Parametric test, confirms that performance is within a defined window Testcase 7 For a resolution of 3840x2160, Ensure a 2K PE SH RX in shared optimised mode has an FPS of 47 FPS, a dropped frame count of 12, 2 minutes after it connects to a 4K TX with scaling enabled if the target PC is playing Avitar full screen in VLC.  Implemented  One 4K RX , One 2K PE SH TX Parametric test, confirms that performance is within a defined window Testcase 8 For a resolution of 3840x2160, Ensure a 2K PE SH RX in private Optimised mode has an FPS of 47 FPS, a dropped frame count of 12, 2 minutes after it connects to a 4K TX if the target PC is playing Avitar full screen in VLC.  Implemented  One 2K PE SH RX , One 4K TX Parametric test, confirms that performance is within a defined window Testcase 9 For a resolution of 1280X1024, Ensure a 2K SE SH TX in shared optimised mode has an FPS of 59 FPS, a dropped frame count of 0, 2 minutes after it connects to 3 2K RXs (2K SE DH RX, 2K SE SH RX, 2K PE SH RX) if the target PC is playing Avitar full screen in VLC.  Implemented  One 2K SE DH RX, One 2K SE SH RX , One 2K PE SH RX and One 2K SE SH TX Parametric test, confirms that performance is within a defined window Testcase 10 For a resolution of 3840x2160, Ensure a 2K PE SH RX in private optimised mode has an FPS of 47 FPS, a dropped frame count of 0, 2 minutes after it connects to a 4K TX with scaling enabled if the target PC is playing Avitar full screen in VLC.  Implemented  One 2K PE SH RX One 4K TX Parametric test, confirms that performance is within a defined window Testcase 11 For a resolution of 3840x2160, Ensure a 3 4K RX in shared lossless mode with 3 4K TX has an FPS of 60 FPS, a dropped frame count of 0, 2 minutes after it connects to a 4K TX's if the target PC is playing Avatar full screen in VLC.  Implemented  Three 4K RX and Three 4K TX Parametric test, confirms that performance is within a defined window Testcase 12 Unplanned Leave: For a resolution of 3840x2160 a 4K RX 1 makes a shared multicast connection to a 4K TX. Make a second shared connection to that same 4K TX with 2K PE DH RX 2. Cause an unplanned leave of 4K RX 1 by rebooting the device. Ensure that we do not see an interruption in video to 2K PE DH RX 2 greater than 500ms.  Implemented  One 4K RX, One 2K PE DH RX , One 4K TX Parametric test, confirms that performance is within a defined window"},{"location":"automation/Seperated_test_case_lists/Retry_case/","title":"FRetry Case","text":"Test Case Reference Description Status Test Assets Required Details Comments Testcase 1 Ensure a 4K RX has a retry rate of 0% in less than 180 miliseconds after a private connection is launched to a 2K SE SH TX.  Implemented  One 4K RX , One 2K SE SH TX Parametric test, confirms that performance is within a defined window Testcase 2 Ensure a 2K PE SH RX has a retry rate of 0% in less than 180 miliseconds after a shared municast connection is launched to a 2K SE SH TX.  Implemented  One 2K PE SH RX , One 2K SE SH TX Parametric test, confirms that performance is within a defined window Testcase 3 Ensure a 4K RX has a retry rate of 0% in less than 180 miliseconds after a shared multicast connection is launched to a 4K TX.  Implemented  One 4K RX , One 4K TX Parametric test, confirms that performance is within a defined window Testcase 4 Ensure a 4K RX has a retry rate of 0% in less than 180 miliseconds after a shared municast connection is launched to a 2K SE SH TX.  Implemented  One 4K RX , One 2K SE SH TX Parametric test, confirms that performance is within a defined window Testcase 5 For a resolution of 1280X1024, Ensure a 4K TX in shared optimised mode has an FPS of 59 FPS, a dropped frame count of 0, 2 minutes after it connects to 3 4K RXs if the target PC is playing Avitar full screen in VLC.  Implemented  Three 4K RX , One 4K TX Parametric test, confirms that performance is within a defined window Testcase 6 Ensure a 4K RX in private mode has a retry rate of 0% in less than 180 miliseconds after the connection is launched to a 2K SE DH TX.  Implemented  One 4K RX , One 2K SE DH TX Parametric test, confirms that performance is within a defined window"},{"location":"automation/Seperated_test_case_lists/Unmanaged_Connection_Performance/","title":"Unmanaged_Connection_Performance","text":"Test Case Reference Description Status Test Assets Required Details Comments Testcase 1 Ensure a 2K SE DH RX in a shared connection with a VM can switch to a previous connection to a 2K SE SH DVI transmitter within 250 milli-seconds.  Implemented  One 2K SE DH RX, One 2K SE SH RX, One 2K SE SH DVI TX, One VM Parametric test, confirms that performance is within a defined window Testcase 2 Ensure a 2K PE DH RX in a private connection can switch to a previous connection to a 4K transmitter within 250 milli-seconds.  Implemented  One 2K PE DH RX, One 2K PE SH RX, One 4K TX Parametric test, confirms that performance is within a defined window Testcase 3 Ensure a 4K RX in a private connection can switch to a previous connection to a 4K transmitter within 250 milli-seconds.  Implemented  Two 4K RX, One 4K TX Parametric test, confirms that performance is within a defined window Testcase 4 Ensure an attempt to make a shared lossless connection from a 4K RX to a 2K SE DH TX is rejected with an error code of 207.  Implemented  One 4K RX, One 2K SE DH TX The RX should fail with an exit code of 207 Testcase 5 Ensure a 2K PE DH RX in a shared connection can switch to a previous connection to a 2K PE DH transmitter within 250 milli-seconds.  Implemented  One 2K PE SH RX, One 2K PE DH RX and One 2K PE DH TX Parametric test, confirms that performance is within a defined window Testcase 6 Ensure a 2K SE DH RX in a shared connection can switch to a previous connection to a 2K PE DP DH transmitter within 250 milli-seconds.  Implemented  One 2K SE SH RX, One 2K SE DH RX and One 2K PE DP DH TX Parametric test, confirms that performance is within a defined window Testcase 7 Ensure a 2K PE DH RX in a shared connection can switch to a previous connection to a 2K ZeroU transmitter within 250 milli-seconds.  Implemented  One 2K PE SH RX, One 2K PE DH RX and One 2K ZeroU TX Parametric test, confirms that performance is within a defined window Testcase 8 Ensure a 2K SE DH RX in a shared connection can switch to a previous connection to a 2K PE DP SH transmitter within 250 milli-seconds.  Implemented  One 2K SE SH RX, One 2K SE DH RX and One 2K PE DP SH TX Parametric test, confirms that performance is within a defined window Testcase 9 Ensure a 4K RX in a shared connection with a VM can switch to a previous connection to a 4K TX transmitter within 250 milli-seconds.  Implemented  Two 4K RX, One 4K TX, One VM Parametric test, confirms that performance is within a defined window Testcase 10 Ensure a 2K PE DH RX in a shared connection with a VM can switch to a previous connection to a 2K PE DH transmitter within 250 milli-seconds.  Implemented  One 2K PE SH RX, One 2K PE DH RX, One 2K PE DH TX and One VM Parametric test, confirms that performance is within a defined window Testcase 11 Ensure a 2K SE DH RX in a shared connection can switch to a previous connection to a 2K PE DH transmitter within 250 milli-seconds.  Implemented  One 2K SE SH RX, One 2K SE DH RX and One 2K PE DH TX Parametric test, confirms that performance is within a defined window"},{"location":"automation/Seperated_test_case_lists/Unmanaged_OSD_Interop/","title":"Unmanaged_OSD_Interop","text":"Test Case Reference Description Status Test Assets Required Details Comments Testcase 1 Ensure all the HID configuration applies successfully.  Implemented  One 2K SE SH RX, One 4K TX Testcase 2 Ensure all the EDID Settings applies successfully.  Implemented  One 2K SE DH RX, One 4K TX Testcase 3 Ensure an unmanaged 4K TX without an existing connections accepts a private view only connection from an unmanaged 2K SE DH RX attempting to connect in a private mode. Ensure the active connection should have view only enabled.  Implemented  One 2K SE DH RX, One 4K TX Testcase 4 Ensure the Information tab is clicked and opened.  Implemented  One 2K SE DH RX, One 4K TX Testcase 5 For a Video Source Optimization as 'Off', Ensure an unmanage 2K PE DH RX in private Optimised has an fps of 59, a dropped frame count of 0 and bandwidth of 88 Mbps or more , after it connects to an unmanage 4K TX if the target PC playing Avatar full screen in VLC.  Implemented  One 2K PE DH RX, One 4K TX Testcase 6 Ensure to select different video qualities for a TX and launch a connection. check the video qulaity and measure the FPS.  Implemented  One 2K PE DH RX, One 4K TX Testcase 7 Ensure the Information tab is clicked and opened.  Implemented  One 4K RX, One 2K SE SH TX"},{"location":"automation/Seperated_test_case_lists/Unplanned_Leave/","title":"Unplanned Leave","text":"Test Case Reference Description Status Test Assets Required Details Comments Testcase 1 Unplanned Leave: a 4K RX 1 makes a shared multicast connection to a 4K TX. Make a second shared connection to that same 4K TX with 2K PE DH RX 2. Cause an unplanned leave of RX 1 by rebooting the device. Ensure that we do not see an interruption in video to 2K PE DH RX 2 greater than 500ms.  Implemented  One 4K RX , One 2K PE DH RX and One 4K TX Testcase 2 Unplanned Leave: a 2K PE SH RX 1 makes a shared municast connection to a 4K TX. Make a second shared connection to that same 4K TX with 4K RX 2. Cause an unplanned leave of 2K PE SH RX 1 by rebooting the device. Ensure that we do not see an interruption in video to 4K RX 2 greater than 500ms.  Implemented  One 4K RX , One 2K PE SH RX and One 4K TX Testcase 3 Unplanned Leave: a 2K PE SH RX 1 makes a shared municast connection to a 2K SE SH TX. Make a second shared connection to that same 2K SE SH TX with 2K SE DH RX 2. Cause an unplanned leave of 2K PE SH RX 1 by rebooting the device. Ensure that we do not see an interruption in video to 2K SE DH RX 2 greater than 500ms.  Implemented  One 2K PE SH RX , One 2K SE SH RX and One 4K TX"},{"location":"automation/Seperated_test_case_lists/VM_Connections/","title":"VM Connections","text":"Test Case Reference Description Status Test Assets Required Details Comments Testcase 1 Ensure a 2K Rx in private optimised mode has an fps of 59fps, a dropped frame count of 0,2 mins after it connects to a VM if the target VM is playing Avitar full screen in VLC Implemented one Vm and one 2K SH Rx Test confirms the video stats for a connection and a video is playing Testcase 2 Ensure a VM without an existing connection accepts a private connection from an 4K RX attempting to connect in private_mode Implemented one Vm and one 4K RX Test confirms the video stats for a connection and a video is playing Testcase 3 Ensure a 4K RX in private_mode receives the connection accepted message 15 milli-seconds after the connection is launched to a VM Implemented one Vm and one 4K RX Test confirms the video stats for a connection and a video is playing Testcase 4 Ensure a 2K RX DH in private_mode receives the connection accepted message 80 milli-seconds after the connection is launched to a VM Implemented one Vm and one 4K RX Test confirms the video stats for a connection and a video is playing"},{"location":"automation/Seperated_test_case_lists/Video_performance/","title":"Video_performance","text":"Test Case Reference Description Status Test Assets Required Details Comments Testcase 1 For a resolution of 1920x1080, Ensure a 2K SE DH RX connects to a 2K ZeroU TX on Default Video quality and Dithering enabled with fullscreen video playing.  Implemented  One 2K SE DH RX, One 2K ZeroU TX Testcase 2 For a resolution of 1920x1080, Ensure a 2K SE DH RX connects to a 2K ZeroU TX on Best Quality Video and Dithering enabled with fullscreen video playing.  Implemented  One 2K SE DH RX, One 2K ZeroU TX Testcase 3 For a resolution of 1920x1080, Ensure a 2K SE DH RX connects to a 2K ZeroU TX on Best Compression Video and Dithering enabled with fullscreen video playing.  Implemented  One 2K SE DH RX, One 2K ZeroU TX Testcase 4 For a resolution of 1920x1080, Ensure a 2K SE DH RX connects to a 4K TX on Default Video quality and Dithering enabled with fullscreen video playing.  Implemented  One 2K SE DH RX, One 4K TX Testcase 5 For a resolution of 1920x1080, Ensure a 2K PE DH RX connects to a 2K PE SH DVI TX on Default Video quality with fullscreen video playing.  Implemented  One 2K PE DH RX, One 2K PE SH DVI TX Testcase 6 For a resolution of 1920x1080, Ensure a 2K PE DH RX connects to a 4K TX on Best Video quality without video source optimization having fullscreen video playing.  Implemented  One 2K PE DH RX, One 4K TX Testcase 7 For a resolution of 1920x1080, Ensure a 2K PE SH RX connects to a 2K PE SH DVI TX on Best Video quality without video source optimization having fullscreen video playing.  Implemented  One 2K PE SH RX, One 2K PE SH DVI TX Testcase 8 For a resolution of 1920x1080, Ensure a 2K PE SH RX connects to a 4K TX on Best Compression quality without video source optimization having fullscreen video playing.  Implemented  One 2K PE SH RX, One 4K TX Testcase 9 For a resolution of 1920x1080, Ensure a 2K PE SH RX connects to a 2K PE SH DVI TX on Best Compression quality without video source optimization having fullscreen video playing.  Implemented  One 2K PE SH RX, One 2K PE SH DVI TX Testcase 10 For a resolution of 1920x1080, Ensure a 2K PE DH RX connects to a 2K PE SH DVI TX on Default Video quality with fullscreen video playing.  Implemented  One 2K PE DH RX, One 2K PE SH DVI TX Testcase 11 For a resolution of 1920x1080, Ensure a 2K PE SH RX connects to a 2K SE SH TX on Best Video quality without video source optimization having fullscreen video playing.  Implemented  One 2K PE SH RX, One 2K SE SH TX Testcase 12 For a resolution of 1920x1080, Ensure a 2K PE SH RX connects to a 2K SE SH TX on Best Compression quality without video source optimization having fullscreen video playing.  Implemented  One 2K PE SH RX, One 2K SE SH TX Testcase 13 For a resolution of 1920x1080, Ensure a 2K SE DH RX connects to a 4K TX on Default Video quality, DVI Optimised and Dithering enabled with fullscreen video playing.  Implemented  One 2K SE DH RX, One 4K TX Testcase 14 For a resolution of 1920x1080, Ensure a 2K SE DH RX connects to a 4K TX on Best Video quality, DVI Optimised and Dithering enabled with fullscreen video playing.  Implemented  One 2K SE DH RX, One 4K TX Testcase 15 For a resolution of 1920x1080, Ensure a 2K SE DH RX connects to a 4K TX on Best compression quality, DVI Optimised and Dithering enabled with fullscreen video playing.  Implemented  One 2K SE DH RX, One 4K TX Testcase 16 For a resolution of 1920x1080, Ensure a 2K SE DH RX connects to a 4K TX on Default Video quality, DVI Optimised and Dithering enabled with fullscreen video playing.  Implemented  One 2K SE DH RX, One 4K TX Testcase 17 For a resolution of 1920x1080, Ensure a 2K SE DH RX connects to a 2K ZeroU TX on Best Video quality, DVI Optimised and Dithering enabled with fullscreen video playing.  Implemented  One 2K SE DH RX, One 2K ZeroU TX Testcase 18 For a resolution of 1920x1080, Ensure a 2K SE DH RX connects to a 4K TX TX on Best compression quality, DVI Optimised and Dithering enabled with fullscreen video playing.  Implemented  One 2K SE DH RX, One 4K TX Testcase 19 For a resolution of 3840 x 2160, Ensure a 4K RX connects to a 4K TX in LOSSLESS mode, Default quality with fullscreen video playing.  Implemented  One 4K RX, One 4K TX"},{"location":"automation/Seperated_test_case_lists/Video_quality/","title":"Video_quality","text":"Test Case Reference Description Status Test Assets Required Details Comments Testcase 1 For a resolution of 1920x1080 and a Quality Level of Best Quality, Ensure a 2K PE SH RX in private optimised mode has an FPS of 59 FPS, a dropped frame count of 0 , 2 minutes after it connects to a 2K SE SH TX if the target PC is playing Avitar full screen in VLC.  Implemented  One 2K PE SH RX, One 2K SE SH TX Testcase 2 For a resolution of 1920x1080 and a Quality Level of Best Quality, Ensure a 2K PE SH RX in private optimised mode has an FPS of 59 FPS, a dropped frame count of 0 , 2 minutes after it connects to a 4K TX if the target PC is playing Avitar full screen in VLC.  Implemented  One 2K PE SH RX, One 4K TX Testcase 3 For a resolution of 1920x1080 and a Quality Level of Best Quality, Ensure a 2K PE SH RX in private optimised mode has and an average bandwidth on 250 Mbps, 2 minutes after it connects to a 4K TX if the target PC is playing Avitar full screen in VLC.  Implemented  One 2K PE SH RX, One 4K TX Testcase 4 For a resolution of 1920x1080 and a Quality Level of Best Quality, Ensure a SH 2K PE SH RX in private optimised mode has and an average bandwidth on 136 Mbps, 2 minutes after it connects to a 2K SE SH TX if the target PC is playing Avitar full screen in VLC.  Implemented  One 2K PE SH RX, One 2K SE SH TX Testcase 5 For a resolution of 1920x1080 and a Quality Level of Best Quality, Ensure a SH 2K PE SH RX in private optimised mode has and an average bandwidth on 136 Mbps, 2 minutes after it connects to a 2K SE SH TX if the target PC is playing Avitar full screen in VLC.  Implemented  One 2K PE SH RX, One 2K SE SH TX Testcase 6 For a resolution of 1920x1080 and a Quality Level of Best Compression, Ensure a 2K PE SH RX in private optimised mode has an FPS of 59 FPS, a dropped frame count of 0, 2 minutes after it connects to a 4K TX if the target PC is playing Avitar full screen in VLC.  Implemented  One 2K PE SH RX, One 4K TX Testcase 7 For a resolution of 1920x1080 and a Quality Level of Best Compression, Ensure a 2K PE SH RX in private optimised mode has and an average bandwidth on 51 Mbps, 2 minutes after it connects to a 4K TX if the target PC is playing Avitar full screen in VLC.  Implemented  One 2K PE SH RX, One 4K TX Testcase 8 For a resolution of 1920x1080 and a Quality Level of Best Compression, Ensure a DH 2K PE DH RX in private optimised mode has and an average bandwidth on 56 Mbps, 2 minutes after it connects to a 2K PE DH TX if the target PC is playing Avitar full screen in VLC.  Implemented  One 2K PE DH RX, One 2K PE DH TX Testcase 9 For a resolution of 1920x1080 and a Quality Level of Best Compression, Ensure a 2K SE SH RX in private optimised mode has and an average bandwidth on 50 Mbps, 2 minutes after it connects to a 2K SE SH TX if the target PC is playing Avitar full screen in VLC.  Implemented  One 2K SE SH RX, One 2K SE SH TX Testcase 10 For a resolution of 1920x1080 and a default quality level, Ensure a 2K PE SH RX in private optimised mode has an FPS of 59 FPS, a dropped frame count of 0 , 2 minutes after it connects to a 2K PE DP SH TX if the target PC is playing Avitar full screen in VLC.  Implemented  One 2K PE SH RX, One 2K PE DP SH TX"},{"location":"automation/Seperated_test_case_lists/references/","title":"References","text":""},{"location":"automation/Seperated_test_case_lists/references/#notes-on-additional-test-cases","title":"Notes on Additional Test Cases","text":"<p>All Test Cases that measure FPS are currently using a default Quality Level (3). We need to create new Test Cases that repeat these tests using the other quality levels. This will require us to set the quality level on the transmitter first before running the test.</p>"},{"location":"automation/Seperated_test_case_lists/references/#reference-documentation","title":"Reference Documentation","text":"<ul> <li>Alex's proposal's on unplanned leave testing</li> <li> <p>Alex's 2K Test Plans - https://limerick.blackbox.com/SysTest/Reports/EMD-2K-6.3.10%20Test%20Plan%20Results.xlsx?d=w65e70183f6774b4f9a7ef42c52cccd7</p> </li> <li> <p>Alex's 4K Test Plans - https://limerick.blackbox.com/SysTest/Reports/EMD-4K-6.3.10%20Test%20Plan%20Results.xlsx?d=w9660bc0e4fa64d1a9c8b725dafdb498f</p> </li> <li> <p>Alex's Interop Test Plan - https://limerick.blackbox.com/SysTest/Reports/EMD-InterOp-6.3.10%20Test%20Plan%20results.xlsx?d=we6deff5d5b944502aee91daddceb6bbd</p> </li> </ul>"},{"location":"automation/Seperated_test_case_lists/references/#proposed-format-for-test-case-reporting","title":"Proposed format for Test Case Reporting","text":"<pre><code>{ \"test_case_reference_number\" : n, \"status\" : \"passed/failed\" , \"detail\" : \"Details of failure if appropriate\" , \"target_device_type\": \"EMD4KTX\", \"local_device_type\" : \"EMD4KRX\" }\n</code></pre> <p>Notes:</p> <ul> <li>Video Performance /tmp/video_stats_0.json - parse</li> </ul> <p><code>json { \"fps\" :  25,\"dropped\" : 33,\"dropped_total\" : 2069,\"Mbps\" : 96.00,\"AvgMbps\" : 96.00,\"connection_res\" : \"1920x1080@60Hz\",\"input_res\" :  \"1920x1080@60Hz\"}</code></p> <p>for values of fps, dropped and  AvgMbps\u200b greater than threshold, use jq utility</p> <ul> <li>Network Performance  /tmp/toe_stats_2.json - parse</li> </ul> <p><code>json { \"cid\" : 2,\"type\" : 2,\"rtt\" : 640,\"rto\" : 1960,\"tx\" : 500468645316,\"retx\" : 0,\"avgtx\" : 197358337,\"avgretx\" : 0,\"rcv\" : 0,\"avgrecv\" : 0,\"ack\" : 500458349768,\"avgack\" : 197357803,\"dropped\" : 0  }</code></p> <p>for values of retx greater than 0, use jq utility</p>"},{"location":"automation/guides/config_files/","title":"Config Files","text":"<p>This document will briefly describe the different config files we need to monitor and what each config file is used for.</p>"},{"location":"automation/guides/config_files/#framework-config","title":"Framework Config","text":"<p>The framework config file is located at <code>AutomationNodejs/AutomationFramework/config.json</code>. This file is very lightweight, and is changed primarily by testCaseResultServer.js to save the site_id and read the accepted branch. It's associated javascript class is testConfigurator.js.</p> <pre><code>{\n    \"_site_id\" : \"testing rest\",\n    \"_branch\"  : \"test\",\n    \"_filePath\": \"./config.json\"\n}\n</code></pre> <p>_site_id is the only non-essential value in this file, as it should be changed by the testCaseResultServer. The _branch value is read by testCaseResultServer to determine which test to run nightly.</p>"},{"location":"automation/guides/config_files/#test-case-config","title":"Test Case Config","text":"<p>The test case config is located at <code>AutomationNodejs/TestCaseGenerator/&lt;category&gt;/TC&lt;ref&gt;/testcase_&lt;ref&gt;.json</code> stores information relating to a specific test case. This included the test case reference number, the category, a description of the test case and it's expected output etc. The important values in this config file are the filePath, fileName, category and reference.</p> <pre><code>{\n    \"_description\": \"Ensure a 2K TX in an existing shared connection rejects a private connection from a 2K RX\",\n    \"_reference\": 1,\n    \"_expectedOutcome\": \"Exit code 203\",\n    \"_testConfigurations\": [],\n    \"_fileName\": \"testcase_1.json\",\n    \"_filePath\": \"./TC1\",\n    \"_backupBeforeSave\": false,\n    \"_type\": \"Connection Cases\"\n}\n</code></pre> <p>_description and _expectedOutcome have no effect on the function of the test case, but they are useful to refer to when a test case is showing problems.</p>"},{"location":"automation/guides/config_files/#test-asset-configuration","title":"Test Asset Configuration","text":"<p>The test asset configuration is located in <code>AutomationNodejs/TestCaseGenerator/&lt;category&gt;/TC&lt;ref&gt;/tstconfig1.json</code>. The test asset configuration shows various details related to the test, specifically from the receiver side. The information listed in test asset config will be used by the test script copied to the receiver. </p> <pre><code>{\n    \"_description\": \"Shared Connection\",\n    \"_testAssetReference\": \"1\",\n    \"_testCaseReference\": \"1\",\n    \"_testScriptReference\": \"test_case_1_a.sh\",\n    \"_cleanupScriptReference\": \"cleanup_1_a.sh\",\n    \"_testCaseConfigurationReference\": \"test_case_1_a\",\n    \"_testCaseResultsServer\": \"10.211.129.241:3090/result\",\n    \"_archiveResults\": \"On\",\n    \"_ipaddress\": \"10.211.133.17\",\n    \"_deviceType\": \"EMDSERXSH\",\n    \"_qualityLevel\": 1,\n    \"_delayBetweenConnections\": 10,\n    \"_testMode\": \"\",\n    \"_persistence\": \"Off\",\n    \"_view_only\": \"Off\",\n    \"_videoSourceOptimization\": \"Off\",\n    \"_hidConfiguration\": \"basic\",\n    \"_resolutionHeight\": 1080,\n    \"_resolutionWidth\": 1080,\n    \"_resolutionFrequency\": 60,\n    \"_OSDResolutionHeight\": 1080,\n    \"_OSDResolutionWidth\": 1920,\n    \"_videoWait_count\": 20,\n    \"_fileName\": \"tstconfig1\",\n    \"_filePath\": \"./connection_cases/TC1\",\n    \"_targets\": [],\n    \"_iterations\": 1000,\n    \"_killOnFail\": \"On\",\n    \"_saveTXlog\": \"On\",\n    \"_time_between_tests\": 10,\n    \"_videoWaitCount\": 20,\n    \"_switching_sequence\": [\n        1,\n        2,\n        1,\n        1,\n        1,\n        2\n    ],\n    \"_version\": \"Connection Test Config V1.3.1\",\n    \"_tx_password\": \"barrow1admin_12\",\n    \"_hotkey\": \"ALT\\\\nALT\"\n}\n</code></pre> <p>_description</p>"},{"location":"automation/guides/config_files/#target-config","title":"Target Config","text":"<p>The target config is located at <code>AutomationNodejs/TestCaseGenerator/&lt;category&gt;/TC&lt;ref&gt;/tstconfig1.json</code>. It shows information relating to the TX used during the test. Later during the test asset configuration, the target objects will be added to the test asset configuration.</p> <pre><code>{\n    \"_exclusive\": \"Off\",\n    \"_name\": \"2KTX_1\",\n    \"_device_type\": \"EMDSETXSH\",\n    \"_frame_count\": 300,\n    \"_compression_mode\": \"YUV\",\n    \"_audio\": \"Off\",\n    \"_usbr\": \"Off\",\n    \"_extended_desktop\": \"Off\",\n    \"_shared\": \"On\",\n    \"_expected_exit_code\": 173,\n    \"_fileName\": \"target_2KTX_1.json\",\n    \"_filePath\": \"./connection_cases/TC1\"\n}\n</code></pre>"},{"location":"automation/guides/troubleshooting/","title":"Troubleshooting","text":"<p>Due to the number of tests running on a nightly build, it may be necessary to rerun test cases using the <code>npm run testcase &lt;category&gt; &lt;reference&gt; 1 &lt;cleanup&gt; command</code> to check the terminal output</p>"},{"location":"automation/guides/troubleshooting/#test-not-passing","title":"Test not Passing","text":"<p>\"Test not Passing\" is a case where the nodejs framework was able to copy the configuration files to the selected devices and run the test case script using the sshCommand class, but the test case is consistently failing.</p> <p>Checks</p> <ul> <li>Did the test report the failure? If not proceed to Test not Reporting</li> <li>If the receiver is rebooted, and the test is repeated, does it pass? If so it might be a problem with a previous test not terminating correctly</li> </ul>"},{"location":"automation/guides/troubleshooting/#test-configuration-errors","title":"Test Configuration Errors","text":"<p>If the logs for the test case list a test configuration error it means the connection failed to launch for a known reasion. An example error message is <code>Test Configuration Error: RX is set to private and we are trying to connect to a shared session</code>. The test configuration error message is generated by the check_error_codes function in connection_test_common.sh. There are 2 known problems that might cause this.</p> <ol> <li>If we are running a dual test case, the test case script should have a variable near the beginning called INDEX. This variable specifies which target we are choosing to connect to from the JSON config file (INDEX=0 means target 1, INDEX=1 means target 2 etc.). If the second test case script is using the wrong index, the test case might try t launch 2 identical sessions to the same TX which might cause a test configuration error. In most cases, test_case_a.sh should have INDEX=0, test_case_b.sh should have INDEX=1 and so on. <li>This can also happen if a connection is left open from a previous test, or hasn't been terminated correctly. The cleanup scripts should take care of breaking the connections after the tests are finished, unless the test is run in debug mode with the cleanup option set to false. </li>"},{"location":"automation/guides/troubleshooting/#test-not-running","title":"Test not Running","text":"<p>Checks</p> <ul> <li>Did the script and config copy over to the device?</li> <li>Could the test find the requested devices from the soak?</li> </ul>"},{"location":"automation/guides/troubleshooting/#failed-to-find-device","title":"Failed to find Device","text":"<p>Failed to find Device means the AutomationFramework was unable to find a device for a particular test case. The Framework will report to the database what device it couldn't retreive.</p> <p>This can happen due to a problem with the labtestrig.json file, or simply due to there being no available matching device.</p> <p>In rare cases this can be caused by the framework not resetting the soak after it completes a test. See the following code snippet for resetting the soak file. <pre><code>soak.updateDeviceListInUsetatus(0, false, true);\n</code></pre></p>"},{"location":"automation/guides/troubleshooting/#failed-to-find-tx","title":"Failed to Find TX","text":"<p>If the device that couldn't be found was a TX, ask yourself if the test requires 2 different TX's or can the same result be obtained using 1 TX. To change the test to use one TX, go to the test case target config files and change \"_exclusive\" to \"Off\". If the test case does need 2 seperate TX's you might need to look into setting up a new TX in the lab, or changing the device type of the second TX to a similar but different device type.</p>"},{"location":"automation/guides/troubleshooting/#failed-to-find-rx","title":"Failed to Find RX","text":"<p>Since dual test cases require 2 seperate RXs, there's not much we can do except change the device type to one that's available, or source another RX from elsewhere. Check the labtestrig.json file isup to date with the latest version.</p>"},{"location":"automation/guides/troubleshooting/#failed-to-transfer-files","title":"Failed to transfer files","text":"<p>Usually this is a problem with the device itself. You might see a message saying <code>PutFile: failed to connect to...</code> followed by the IP Address of the device. If this message shows up, it's usually after a test which causes a device to reboot. If an unplanned leave test reboots a receiver and finishes quickly after, the framework might move onto the next test case faster than it takes the first device to come back online. When this happens the script and the config can't copy over to the device, resulting in a failure. This failure won't report to the server as it's not expected. There are 2 ways to combat this...</p> <p>Info</p> <p>We can avoid this by changing the order of test cases in unplanned_leave or unmanage in such a way that a test case requiring a certain device type doesn't follow another test using the same device type. If we need to follow a test with another of the same device type, we should add a sleep to the previous test case script, to delay long enough for the device to reboot.</p> <p>e.g A test case using an SE RX shouldn't follow another test using an SE RX.</p>"},{"location":"automation/guides/troubleshooting/#test-not-reporting","title":"Test not Reporting","text":"<ul> <li>Does the test case script have a sendResults function?</li> <li>Check the docker machine logs with the command <code>docker-compose logs --tail=500 testcaserest</code> in the AutomationNodejs directory. Was the POST request seen by the server?</li> <li>Are the \"_testCaseResultsServer\" values in the tstconfig files matching the IP Address of the docker machine?</li> <li>SSH into the receiver and try to parse the JSON config file using <code>jq . &lt;json config file name&gt;</code></li> </ul>"},{"location":"automation/guides/troubleshooting/#test-configuration-invalid-json","title":"Test Configuration Invalid JSON","text":"<p>Occasionally if we add new values to the JSON config file, the syntax might get changed and our jq application can't parse the text. Usually this is self-explanatory from the terminal output which usually reads <code>parse error: Expected seperator between values at...</code>. This failure cannot report to the server as it cannot read the results server IP from the JSON config file, nor any of the other relevant information.</p> <p>Check the test_case__a.json on the first receiver using <code>jq . test_case_&lt;ref&gt;_a.json</code>. The test configuration files are generated through testCase.js and testAssetConfiguration.js in a function called generateConnectionTestFile"},{"location":"buildroot_guides/buildroot_defconfig/","title":"Buildroot Configuration","text":""},{"location":"buildroot_guides/buildroot_defconfig/#buildroot-defconfig","title":"Buildroot defconfig","text":"<p>Info</p> <p>When checking out with the <code>blackbox_cli</code> the correct defconfig is selected as part of the checkout prodedure.</p> <p>When not using the <code>blackbox_cli</code> if you check out a build directory with the manual method then the developer must go into the buildroot directory and tell the system which device to build for.</p> <p>We currently follow a standard for the device naming conventions.</p> <pre><code>${BOARD_ARCH}_${BOARD_TYPE}_defconfig\n</code></pre> <p>Where <code>BOARD_ARCH</code> can be</p> <pre><code>1. emerald\n2. emeraldse\n3. emeraldpe\n4. corrib\n5. deel\n6. zerou\n</code></pre> <p>Where <code>BOARD_TYPE</code> can be</p> <pre><code>1. encoder\n2. decoder\n</code></pre> <p>For example if we want to build an emeraldse decoder. We run the following commands.</p> <pre><code>cd ~/Buildroot_emeraldse_decoder/buildroot-2017.02.4\nmake emeraldse_decoder_defconfig\nmake\n</code></pre> <p>This changes into the emeraldse decoder buildroot directory, tells buildroot which device to build and then runs the build.</p> <p>Info</p> <p>You will also need to perform this step if changes have been made to the defconfig by other developers during the course of a project.</p>"},{"location":"buildroot_guides/buildroot_defconfig/#saving-buildroot-defconfigs","title":"Saving buildroot defconfigs","text":"<p>To save an update you make to a buildroot configuration run</p> <pre><code>make emerald_encoder_defconfig\nmake menuconfig # Add packages etc\nmake savedefconfig\n# If your changes are permanent commit to SVN\nsvn commit -m 'Added package xyz to encoder defconfig' configs/\n</code></pre> <p>This will output the updated defconfig into the <code>/configs</code> directory</p>"},{"location":"buildroot_guides/command_runner/","title":"The Command Runner","text":"<p>The command runner is a tool that gathers a collection of useful commands that can be run in buildroot. To initialise on a newly provided build machine do the following steps.</p> <p>Navigate to your build directory (In this example emeraldse decoder) and run the following commands</p> <pre><code>cd ~/Buildroot_emeraldse_decoder\nsvn update\n./run update-run\nsource ~/.bashrc\n</code></pre> <p>The <code>update-run</code> command will update <code>.bashrc</code> so future GUI terminals or ssh sessions will automatically be correct.</p> <p>By entering <code>./run</code> and tabbing you should be able to see the available commands.</p> <pre><code>developer@developer-vm:~/Buildroot_emeraldse_decoder/buildroot-2017.02.4$ ./run\nbuild-vmware          clean-kernel          create-boot-bin       make                  update-run\nclean-bb              clean-kvm             create-dtb            minifixup             upgrade-image\nclean-boot            clean-package         create-dts            rootfs2nfs            vmware2rootfs\nclean-custom          clean-skeleton        fixup                 tunnel-upgrade-image\n</code></pre>"},{"location":"buildroot_guides/command_runner/#adding-new-options","title":"Adding New Options","text":"<p>To add new options add the option as a <code>function</code> in the <code>run</code> script. Ideally the script that does the work should be added to the <code>helper</code> folder in the base Buildroot directory. After doing this you can add the new functionality to the autocompletion by following the guide at the top of this page.</p> <p>Tip</p> <p>The helper scripts have a detailed readme that can be found in Phabricator at the following URL README.MD</p>"},{"location":"buildroot_guides/creating_buildroot_enviroment/","title":"Creating a Developer Build on your own machine","text":""},{"location":"buildroot_guides/creating_buildroot_enviroment/#configuring-your-machine-to-build-a-particular-product","title":"Configuring your machine to build a particular product","text":""},{"location":"buildroot_guides/creating_buildroot_enviroment/#recommended-method-using-blackbox-cli","title":"Recommended method using Blackbox CLI","text":"<p>On each development system there is a blackbox command line interface. Run the command <code>blackbox_cli</code> and you will receive multiple options with a number next to them. Enter a number to select that option and hit Enter. Follow these steps in order to checkout the build environment to the correct location.</p> <p>Note</p> <p>Always use the branch you are trying to build against. i.e. If you are building the develop branch then checkout Buildroot from develop, if you are building another branch then checkout the Buildroot on that branch. All rootfs_overlays, linux configs etc. will be on that branches buildroot, not just applications.</p> <p>An example of checking out the Emerald Decoder build directory might be as follows.</p> <pre><code>1. Create Build Environment\n2. Checkout Repository\n3. Run a Nightly Build\n4. Diagnostics\n5. Create Combo File\n6. Watch Star Wars\nq. Quit\nPlease choose an option: 1\n-------------------------------\n1. Emerald4K\n2. Corrib\n3. EmeraldSE\n4. Deel\n5. EmeraldPE\n6. ZeroU\nq. Quit\nPlease choose an option: 1\n-------------------------------\n1. Decoder\n2. Encoder\nq. Quit\nPlease choose an option: 1\n-------------------------------\n1. branches\n2. tags\nq. Quit\nPlease choose an option: 1\n-------------------------------\n1. HostTools/\n2. HostTools_Jenkins_Refactor/\n3. Release_1.1/\n4. dev-xilinx-v2017.4/\n5. develop/\nq. Quit\n</code></pre>"},{"location":"buildroot_guides/creating_buildroot_enviroment/#manual-creation","title":"Manual Creation","text":"<p>Warning</p> <p>Do not use attempt to use this method unless you are extremely familiar with the blackbox build enviroment stucture.</p> <p>Each build environment has specific naming conventions for their respective build directories.</p>"},{"location":"buildroot_guides/creating_buildroot_enviroment/#folder-locations","title":"Folder Locations","text":"<p>The following tabs show the folder location for the most common boards</p> Emerald4KEmeraldSEEmeraldPEZeroU <pre><code>/home/developer/Buildroot_emerald_encoder\n/home/developer/Buildroot_emerald_decoder\n</code></pre> <pre><code>/home/developer/Buildroot_emeraldse_encoder\n/home/developer/Buildroot_emeraldse_decoder\n</code></pre> <pre><code>/home/developer/Buildroot_emeraldpe_encoder\n/home/developer/Buildroot_emeraldpe_decoder\n</code></pre> <pre><code>/home/developer/Buildroot_zerou_encoder\n</code></pre> <p>The main buildroot directory that is used is on the <code>develop</code> branch.</p>"},{"location":"buildroot_guides/creating_buildroot_enviroment/#commands-to-checkout-project","title":"Commands to checkout project","text":"<p>First check out the branches buildroot folder to the relevant location on the development machine.</p> <pre><code>svn co svn://svn-server/Emerald/branches/develop/Buildroot ~/Buildroot_emerald_encoder\n</code></pre> <p>Next change the <code>SVN_ROOT</code> variable highlighted below in the board rc file to point to the correct branch</p> <pre><code>#!/bin/bash\n\n# Buildroot Vars\nexport SVN_ROOT=\"svn://svn-server/Emerald/branches/develop\"\nexport SVN_UBOOT_ROOT=\"${SVN_ROOT}/uboot\"\nexport SVN_KERNEL_ROOT=\"${SVN_ROOT}/Kernel\"\n\n# Emerald Encoder Vars\nexport DEVICE_IP_ENCODER=\"0.0.0.0\"\nexport MAC_ADDRESS_ENCODER=\"[ 00 00 00 00 00 00 ]\"\nexport MAC_ADDRESS_10G_ENCODER=\"[ 00 00 00 00 00 00 ]\"\nexport NFS_IP_ENCODER=\"0.0.0.0\"\nexport NFS_PATH_ENCODER=\"/home/developer/Encoder_NFS/EmeraldPE\"\n\n# Emerald Decoder Vars\nexport DEVICE_IP_DECODER=\"0.0.0.0\"\nexport MAC_ADDRESS_DECODER=\"[ 00 00 00 00 00 00 ]\"\nexport MAC_ADDRESS_10G_DECODER=\"[ 00 00 00 00 00 00 ]\"\nexport NFS_IP_DECODER=\"0.0.0.0\"\nexport NFS_PATH_DECODER=\"/home/developer/Decoder_NFS/EmeraldPE\"\n</code></pre> <p>next change into the checked out directory.</p> <pre><code>cd ~/Buildroot_emerald_encoder/buildroot-2017.02.4\n</code></pre> <p>The next command tells buildroot which device we would like to build for. See defconfig section for more detail</p> <pre><code>make emerald_encoder_defconfig\n</code></pre> <p>The final command starts the build process. If the build successfully finishes then there will be a complete image ready to be put onto the device in the output images folder. This image may be in different formats depending on the device that is being built against.</p> <pre><code>make\n</code></pre>"},{"location":"buildroot_guides/creating_package/","title":"Creating a Buildroot package","text":"<p>All new custom binaries or libraries created must be put into a buildroot package for buildroot to select, build and install files to the target device.</p> <p>Buildroot can handle many types of packages managers which include, but not limited to:</p> <ul> <li>CMake</li> <li>Automake</li> <li>Kernel Modules</li> </ul> <p>All packages are stored in <code>~/Buildroot_&lt;board&gt;_&lt;type&gt;/buildroot-2017.02.4/package/</code> and all BlackBox specific packages are stored in <code>~/Buildroot_&lt;board&gt;_&lt;type&gt;/buildroot-2017.02.4/package/blackbox</code>.</p>"},{"location":"buildroot_guides/creating_package/#using-the-create-packagepy","title":"Using the create-package.py","text":"<p>A python helper script exists in <code>~/Buildroot_&lt;board&gt;_&lt;type&gt;/buildroot-2017.02.4/package/blackbox</code> to help simplify the process, running it will create skeleton package files with the correct naming convention and format:</p> <pre><code>$ ./create-package.py &lt;package_name&gt;\n</code></pre> <p>e.g.</p> <pre><code>$ ./create-package.py new-package\nPackage new-package has been created!\nPlease update field NEW_PACKAGE_SITE in new-package/new-package.mk\nNOTE: You must now update blackbox/Config.in to add your newly created package!!\n</code></pre> <p>This will create a folder with the package name and template files to which to you will need to edit for the specific requirements of your package. The format of packages names should be lower case with '-' for spaces e.g 'Some Package Name' should be some-package-name.</p>"},{"location":"buildroot_guides/creating_package/#editing-the-package-config-file","title":"Editing the package Config file","text":"<p>The <code>Config.in</code> file controls how the package can be enabled and what it will enable within the buildroot menuconfig</p> <ul> <li><code>depends</code> greys out the option to select this package unless the depending package is selected</li> <li><code>select</code> selects other packages when you select this package</li> <li><code>help</code> contains the help text of the package if the user sends ? of highlighted package in the menuconfig</li> </ul> <pre><code>config BR2_PACKAGE_LIBFOO\n        bool \"libfoo\"\n        depends on BR2_PACKAGE_LIBBAZ\n        select BR2_PACKAGE_LIBBAR\n        help\n          This is a comment that explains what libfoo is. The help text\n          should be wrapped.\n\n          http://foosoftware.org/libfoo/\n</code></pre> <p>Unless you have linked libraries you will only need to modify the help text, other wise either select the library package as well or depend on it</p> <p>Info</p> <p>More detailed information on writing <code>Config.in</code> files can be found in the Buildroot User Manual.</p>"},{"location":"buildroot_guides/creating_package/#editing-the-package-mk-file","title":"Editing the package .mk file","text":"<p>The <code>mk</code> file specifies the project location, dependencies and any other build parameters it needs. Below shows a blank <code>mk</code> file created by <code>create-package.py</code></p> <pre><code>################################################################################\n#\n# NEW_PACKAGE\n#\n################################################################################\n\nNEW_PACKAGE_VERSION = $(SVN_REV)\nNEW_PACKAGE_DEPENDENCIES = host-cmake bb-constants\nNEW_PACKAGE_SITE = $(SVN_ROOT)/\nNEW_PACKAGE_INSTALL_STAGING = YES\nNEW_PACKAGE_CONF_OPTS = -DWITH_BUILDROOT=ON\n\n$(eval $(cmake-package))\n</code></pre> <p>Most internal Blackbox packages uses uses CMake for code compilation. CMake uses a CMakeLists.txt to describe the header/source files, dependencies and resulting binary name. In relation to creating packages we are only interested in the dependencies as buildroot will need to know what libraries to build before first building this package. By default all packages depend on <code>host-cmake</code> for compilation and <code>bb-constants</code> for global definitions. If your package depends on other packages you must add them to the <code>NEW_PACKAGE_DEPENDENCIES</code> variable. You must also add the svn URL of the packages source code to the <code>NEW_PACKAGE_SITE</code> variable. Below shows the <code>mk</code> file for <code>capture-layer</code> as an example of a package with multiple dependencies.</p> <pre><code>################################################################################\n#\n# CAPTURE_LAYER\n#\n################################################################################\n\nCAPTURE_LAYER_VERSION = $(SVN_REV)\nCAPTURE_LAYER_DEPENDENCIES = host-cmake logging bb-constants libframework libdatabase\nCAPTURE_LAYER_SITE = $(SVN_ROOT)/Applications/Encoder/CaptureLayer\nCAPTURE_LAYER_INSTALL_STAGING = YES\nCAPTURE_LAYER_CONF_OPTS = -DWITH_BUILDROOT=ON\n\n$(eval $(cmake-package))\n</code></pre> <p>Info</p> <p>More detailed information on writing mk files can be found in the Buildroot User Manual.</p>"},{"location":"buildroot_guides/creating_package/#add-package-to-buildroot-menuconfig","title":"Add package to Buildroot menuconfig","text":"<p>The new package must be added to the kconfig file in <code>package/blackbox/Config.in</code>. Packages are grouped under the following headings</p> <ul> <li>Common</li> <li>Decoder</li> <li>Encoder</li> <li>Kernel Modules</li> <li>Hardware</li> </ul> <p>Add the new package under the relevant heading following the format of the existing packages.</p>"},{"location":"buildroot_guides/creating_package/#select-buildroot-package","title":"Select Buildroot package","text":"<p>In <code>~/Buildroot_&lt;board&gt;_&lt;type&gt;/buildroot-2017.02.4/</code> run:</p> <pre><code>make menuconfig\n</code></pre> <p>Navigate to your package under one of the following headings and enable it.</p> <pre><code>Target packages ---&gt;\n    BlackBox Applications ---&gt;\n        Common ---&gt;\n        Decoder ---&gt;\n        Encoder ---&gt;\n        Kernel Modules ---&gt;\n        Hardware ---&gt;\n</code></pre> <p>Once you hit the \"save\" option the package will be selected and stored in your local config file at <code>~/Buildroot_emerald_decoder/buildroot-2017.02.4/.config</code>.</p> <p>Note</p> <p>If you have not checked in your project to the SVN you can modify the <code>local.mk</code> file in build the package from the out of tree location e.g; <code>~/Emerald_sources/branches/develop/Applications/Decoder/Autokeys</code></p>"},{"location":"buildroot_guides/creating_package/#turn-on-the-package-in-repository-builds","title":"Turn on the package in repository builds","text":"<p>After adding to package to buildroot you will need to enable it in the <code>.config</code> file for the boards you wish to have the package enabled in, see Buildroot Configuration for more detail.</p>"},{"location":"buildroot_guides/creating_package/#references-notes","title":"References &amp; Notes","text":"<p>The Buildroot user manual</p>"},{"location":"buildroot_guides/emeraldrc_files/","title":"Emerald RC Files","text":"<p>Each build type (Emerald4K, EmeraldSE, Corrib, Deel, Zerou) has their own specific config file. These are located in the developers home directory. The naming convention is as follows:</p> <ul> <li>Emerald4K - ~/.emeraldrc</li> <li>EmeraldSE - ~/.emeraldserc</li> <li>EmeraldPE - ~/.emeraldperc</li> <li>Corrib - ~/.corribrc</li> <li>Deel - ~/.deelrc</li> <li>Zerou - ~/zerourc</li> </ul> <p>When a developer initially receives their development machine there will already be templated files on their system. The template rc files are located at <code>svn://svn_server/Emerald/branches/HostTools/Chef/ConfigurationFiles/</code>.</p> <p>An example .emeraldrc file:</p> <pre><code>#!/bin/bash\n\n# SVN Variables - Enables quick branch switching\nexport SVN_ROOT=\"svn://svn_server/Emerald/branches/development\"\nexport SVN_UBOOT_ROOT=\"${SVN_ROOT}/uboot\"\nexport SVN_KERNEL_ROOT=\"${SVN_ROOT}/Kernel\"\n\n# Encoder Variables\nexport DEVICE_IP_ENCODER=\"0.0.0.0\"\nexport MAC_ADDRESS_ENCODER=\"[ 00 00 00 00 00 00 ]\"\nexport MAC_ADDRESS_10G_ENCODER=\"[ 00 00 00 00 00 ]\" # Only used on 4K\nexport NFS_IP_ENCODER=\"0.0.0.0\"\nexport NFS_PATH_ENCODER=\"/home/${USER}/Encoder_NFS/Emerald\"\n\n# Decoder Variables\nexport DEVICE_IP_DECODER=\"0.0.0.0\"\nexport MAC_ADDRESS_DECODER=\"[ 00 00 00 00 00 00 ]\"\nexport MAC_ADDRESS_10G_DECODER=\"[ 00 00 00 00 00 00 ]\" # Only used on 4K\nexport NFS_IP_DECODER=\"0.0.0.0\"\nexport NFS_PATH_DECODER=\"/home/${USER}/Decoder_NFS/Emerald\"\n</code></pre> Variable Description SVN_ROOT Points towards the branch that the developer would like to checkout the applications from during the build. Note this is set automatically when using the <code>blackbox_cli</code> SVN_UBOOT_ROOT Points towards the uboot application the developer would like to checkout. SVN_KERNEL_ROOT Points towards the kernel root directory the developer would like to checkout. DEVICE_IP_* The device IP of the relevant device during an NFS boot. MAC_ADDRESS_* The MAC address of the relevant Ethernet device. NFS_IP_* The IP of the developers 2nd NIC. Typically the 192.168.10.* address. NFS_PATH_* The NFS location on the developer machine that the device needs to boot from."},{"location":"buildroot_guides/local_mk/","title":"Incorporating Local Versions of Packages","text":"<p>Edit the <code>local.mk</code> file in the buildroot-2017.02.04 directory and uncomment the package you wish to include a local version of. When you run make again the source code in your local directory will be packaged up and incorporated as part of the build.</p> <p>Tip</p> <p>You can see what packages currently have been built locally by using the following command <pre><code>ls output/build/ | grep custom\n</code></pre></p> <p>One thing to be aware of is if you have not cleaned the package in a while there still may be a custom package left over from previous builds.</p>"},{"location":"buildroot_guides/local_mk/#cleaning-package","title":"Cleaning Package","text":"<p>Removing a package is unsupported by Buildroot without rebuilding from scratch. This is because Buildroot doesn\u2019t keep track of which package installs what files in the output/staging and output/target directories, or which package would be compiled differently depending on the availability of another package.</p> <p>The easiest way to rebuild a single package from scratch is to remove its build directory in output/build. Buildroot will then re-extract, re-configure, re-compile and re-install this package from scratch. There is a helper script available to do this which can be called as follows</p> <pre><code>./run clean-package &lt;Space delimited list of package names&gt;\n\n#e.g.\n\n./run clean-package server_emerald capture-layer libsystem\n</code></pre>"},{"location":"buildroot_guides/local_mk/#updating-localmk","title":"Updating local.mk","text":"<p>You can update this file when you add a new package by running <code>autocreate_local.py</code>. This will produce the output to standard out which you can then pipe to a file. In the buildroot-2017.02 directory call.</p> <pre><code>./autocreate_local.py &gt; local.mk\n</code></pre> <p>Tip</p> <p>To prevent accidental commiting of the <code>local.mk</code> file a pre commit hook blocks committing by anyone but the SVN administrator.</p>"},{"location":"buildroot_guides/packages/","title":"Packages","text":""},{"location":"buildroot_guides/packages/#cleaning-the-build-system","title":"Cleaning the Build System","text":"<p>To clean the build system change to the buildroot directory of your project, for example</p> <pre><code>/home/developer/Buildroot_emerald_encoder/buildroot-2017.02.4\n</code></pre> <p>And run ./run clean-bb followed by make</p>"},{"location":"buildroot_guides/packages/#cleaning-a-specific-package","title":"Cleaning a specific Package","text":"<p>To clean a specific package change to the buildroot directory within your project and type</p> <pre><code>./run clean-package &lt;package name&gt;\n</code></pre> <p>to find the correct name of a package you can run the following command</p> <pre><code>ls output/build/\n</code></pre> <p>For example ./run clean-package libsystem</p>"},{"location":"buildroot_guides/rootfs_overlays/","title":"Buildroot Root File System Overlays","text":"<p>Info</p> <p>A more detailed break-down on customising the generated target filesystem in the buildroot documentation located here</p> <p>Root file system overlays are used to customise the rootfs for individual board types. Many files are common across all board types or Encoder/Decoder boards and this method allows fine control of this without need for large amounts of file duplication. The general format of our rootfs overlay system is as follows:</p>"},{"location":"buildroot_guides/rootfs_overlays/#common-rootfs","title":"Common Rootfs","text":"<p>The base overlay of all Blackbox boards is:</p> <p><code>boards/blackbox/common/common</code></p> <p>Any files that belong in all boards types and technologies belong here. After that depending on whether the board is an Encoder or Decoder the following is overlayed over <code>common/common</code>.</p> EncoderDecoder <pre><code>boards/blackbox/common/encoder\n</code></pre> <pre><code>boards/blackbox/common/decoder\n</code></pre>"},{"location":"buildroot_guides/rootfs_overlays/#invisapc-rootfs","title":"InvisaPC Rootfs","text":"<p>If the board uses a Zynq7000 processor(currently all boards but 4K) then the next overlay that gets applied is:</p> EncoderDecoder <pre><code>boards/blackbox/invisapc/common\nboards/blackbox/invisapc/encoder\n</code></pre> <pre><code>boards/blackbox/invisapc/common\nboards/blackbox/invisapc/decoder\n</code></pre>"},{"location":"buildroot_guides/rootfs_overlays/#board-specific-rootfs","title":"Board Specific Rootfs","text":"<p>Finally the board specifc overlays are applied</p> Emerald 4KEmeraldSEEmeraldPEZeroU EncoderDecoder <pre><code>boards/blackbox/emerald/common\nboards/blackbox/emerald/encoder\n</code></pre> <pre><code>boards/blackbox/emerald/common\nboards/blackbox/emerald/decoder\n</code></pre> EncoderDecoder <pre><code>boards/blackbox/emeraldse/common\nboards/blackbox/emeraldse/encoder\n</code></pre> <pre><code>boards/blackbox/emeraldse/common\nboards/blackbox/emeraldse/decoder\n</code></pre> EncoderDecoder <pre><code>boards/blackbox/emeraldpe/common\nboards/blackbox/emeraldpe/encoder\n</code></pre> <pre><code>boards/blackbox/emeraldpe/common\nboards/blackbox/emeraldpe/decoder\n</code></pre> Encoder <pre><code>boards/blackbox/zerou/common\nboards/blackbox/zerou/encoder\n</code></pre>"},{"location":"buildroot_guides/rootfs_overlays/#full-example","title":"Full Example","text":"<p>The below table gives the full rootfs overlay order for an emeraldpe encoder/decoder</p> EncoderDecoder <pre><code>boards/blackbox/common/common\nboards/blackbox/common/encoder\nboards/blackbox/invisapc/common\nboards/blackbox/invisapc/encoder\nboards/blackbox/emeraldpe/common\nboards/blackbox/emeraldpe/encoder\n</code></pre> <pre><code>boards/blackbox/common/common\nboards/blackbox/common/decoder\nboards/blackbox/invisapc/common\nboards/blackbox/invisapc/decoder\nboards/blackbox/emeraldpe/common\nboards/blackbox/emeraldpe/decoder\n</code></pre>"},{"location":"buildroot_guides/transferring_images/","title":"Transferring Images","text":"<p>To transfer a built image to a board there are a number of methods availible.</p>"},{"location":"buildroot_guides/transferring_images/#ssh-transfer","title":"SSH Transfer","text":"<p>If you are working in a blackbox office where your boards have access to the Limerick Test Network then the simplest method to transfer an image to your board is to use the <code>upgrade-image</code> helper script. This script will copy the relevant files to your board and upgrade them in a safe and reproducible way. The below table gives examples on the scripts use</p> Emerald 4KEmerald2K <pre><code>    Usage: ./run upgrade-image &lt;ip_address&gt; [--boot] [--image]\n    #To upgrade BOOT.bin and Userspace\n    ./run upgrade-image 192.168.1.22\n    #To upgrade only BOOT.bin\n    ./run upgrade-image 192.168.1.22 --boot\n    #To upgrade only linux image\n    ./run upgrade-image 192.168.1.22 --image\n</code></pre> <pre><code>    ./run upgrade-image &lt;ip_address&gt; [--fsbl] [--fpga] [--dtb] [--uboot] [--rootfs/--uramdisk] [--uimage/--kernel]\n    #To upgrade all components\n    ./run upgrade-image 192.168.1.22\n    #Any combination of the above parameters can be passed to only update those components e.g.\n    ./run upgrade-image 192.168.1.22 --rootfs --kernel\n</code></pre>"},{"location":"buildroot_guides/transferring_images/#ssh-tunnel-transfer","title":"SSH Tunnel Transfer","text":"<p>If you are working from home the SSH tunnel method can be used to allow transferring  of images from the Limerick Test Network to your home network. This functions identiaclly to the SSH method but uses the <code>tunnel_upgrade_image</code> helper script. Instead of an IP address a SSH port must be passed see here for detailed setup instructions.</p>"},{"location":"buildroot_guides/transferring_images/#nfs-mounting","title":"NFS Mounting","text":"<p>To allow for quick development practices in linux user space we have the option to boot the Emerald file system over NFS (Network File System). This allows us to add files or folders to a location on our development machines which will show up on our Emerald devices. See the following guide for details on how to setup link</p>"},{"location":"buildroot_guides/transferring_images/#upgrading-with-nightly-images","title":"Upgrading with Nightly Images","text":"<p>All Dev machines have a tool to allow upgrading of boards with the Nightly build for a given branch, it can be invoked as follows</p> <pre><code>    nightly_upgrade -b &lt;branch_name&gt; -r [svn revision] [Space Delimited List of IP Addresses] \n</code></pre> <p>If a SVN revision is not passed then the latest nightly build will be used below are two examples of using the script</p> <pre><code>#Upgrade 2 boards with the latest nightly\nnightly_upgrade -b develop 10.211.1.1 10.211.1.2\n#Upgrade a board with a specified revision\nnightly_upgrade -b develop -r 9413 10.211.1.1\n</code></pre>"},{"location":"buildroot_guides/upgrade_images/","title":"Release Images","text":""},{"location":"buildroot_guides/upgrade_images/#2k-images","title":"2K Images","text":"<p>2K Release images are provided in a <code>.clu</code> format which is creating using <code>makeself</code>.</p>"},{"location":"buildroot_guides/upgrade_images/#makeself-images","title":"Makeself Images","text":"<p>makeself.sh is a shell script that generates a self-extractable compressed tar archive from a directory. The resulting file appears as a shell script, and can be launched as is. The archive will then decompress itself to a temporary directory and then <code>setup.sh</code> will be executed. Makeself archives also include checksums for integrity self-validation and encryption mechanisms.</p> <p>makeself website</p>"},{"location":"buildroot_guides/upgrade_images/#buildroot-integration","title":"Buildroot Integration","text":""},{"location":"buildroot_guides/upgrade_images/#file-locations","title":"File locations","text":"<p>Before the makeself script can run the required images have to built and staged</p> <p>Buildroot will generate the following images in <code>ouput/images</code>:</p> <ul> <li>devicetree blob</li> <li>fpga bit file</li> <li>fsbl binary</li> <li>u-boot.bin</li> <li>uImage</li> <li>uramdisk.image.gz</li> </ul> <p>The extra files needed to generate .clu files are stored in <code>board/blackbox/invisapc/common/clu_dependencies/</code> and can be seen below:</p> <pre><code>.\n\u251c\u2500\u2500 components\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 cloudium1.bmp\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 logserver\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 migration.sh\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 setup.sh\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 splashscreen.bmp\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 splashscreen_pe.bmp\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 u-boot.env\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 update_environment.elf\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 upgrade.sh\n\u251c\u2500\u2500 makeself-header.sh\n\u251c\u2500\u2500 makeself.sh\n\u251c\u2500\u2500 setup.sh\n\u2514\u2500\u2500 upgrade_signature.pem\n</code></pre>"},{"location":"buildroot_guides/upgrade_images/#creating-image","title":"Creating Image","text":"<p>A helper script has been provided to create the combo images and can be found:</p> <pre><code>/home/developer/Buildroot_&lt;board&gt;_&lt;type&gt;/helpers/create-combo.sh\n</code></pre> <p>To generate a combo image run:</p> <pre><code>./run create-combo \n</code></pre> <p>Both the encrypted and un-encrypted images are generated with this script.</p>"},{"location":"buildroot_guides/upgrade_images/#encryption","title":"Encryption","text":"<p>Place holder Tom to fill in.</p>"},{"location":"buildroot_guides/upgrade_images/#manual-upgrade","title":"Manual upgrade","text":"<p>SCP the CLU file onto the target at /usr/local/</p> <pre><code>scp {PATH_TO_CLU_FILE} root@{IP_ADDRESS}:/usr/local\n</code></pre> <p>then on the device</p> <pre><code>#Extract the CLU image\n/usr/local/&lt;filename.clu&gt; --noexec\n#cd into the extracted folder\ncd /usr/local/{FOLDER}\n#Run the upgrade script\n./upgrade.sh\n</code></pre>"},{"location":"buildroot_guides/upgrade_images/#4k-fit-images","title":"4K FIT Images","text":"<p>Get info off of Manas.</p>"},{"location":"coding_guides/conditional_compilation/","title":"Conditional Compilation","text":""},{"location":"coding_guides/conditional_compilation/#pre-make","title":"Pre Make","text":"<p>When compiling conditional code, if there are checks for board types then you should be using <code>#defines</code>. These defines are defined in the pre_make.sh script in </p> <pre><code>~/Buildroot_***_xxcoder/buildroot_2017.04.2/pre_make.sh\n</code></pre> <p>Pre make as the name suggests gets called prior to the actual make command on the system. This script sources the RC files and adds the compilation definitions. It then pipes all environment variables out in Makefile format to the file <code>makeenv</code>. This in turn gets sourced from the main Makefile giving all definitions specified to the compiler.</p>"},{"location":"coding_guides/conditional_compilation/#usage","title":"Usage","text":"<pre><code>#if defined(_EMERALD4K)\n\n// Some code\n\n#else\n\n// Some other code\n\n#endif\n</code></pre>"},{"location":"coding_guides/conditional_compilation/#availible-definitions","title":"Availible definitions","text":"<pre><code>#define _INVISAPC // Corrib, Deel, ZeroU\n#define _EMERALD // EmeraldSE, EmeraldPE and Emerald4K\n#define _CORRIB\n#define _EMERALD4K\n#define _DEEL\n#define _EMERALDSE\n#define _EMERALDPE\n#define _DECODER    //Is the board a Decoder\n#define _ENCODER    //Is the board an Encoder\n</code></pre> <p>The following formats should be used for board specific checks this allows easy searching of code for conditional statements.</p> <p>To test is something is defined use the following:</p> <pre><code>#if defined(_DEFINITION)\n// Some code\n#endif\n</code></pre> <p>To test if something is not defined use the following:</p> <pre><code>#if !defined(_DEFINITION)\n// Some code\n#endif\n</code></pre>"},{"location":"coding_guides/conditional_compilation/#qmake-and-gcc-variables","title":"QMAKE and GCC variables","text":"<p>Pre_make creates variables in two forms _VARIABLE is used for QMAKE while D_VARIABLE is used for gcc. Create_bb_defines does the conversion from one form to another</p>"},{"location":"coding_guides/conditional_compilation/#cmake-include-for-bb-defines","title":"CMAKE Include for BB Defines","text":"<p>All CMakeLists.txt files should include the line</p> <pre><code>ADD_DEFINITIONS($ENV{BB_DEFINES})\n</code></pre>"},{"location":"coding_guides/conditional_compilation/#adding-a-build-wide-variable","title":"Adding a Build Wide Variable","text":"<p>One option is to export an environment variable in your .rc file, for example</p> <pre><code>Export USER_FLAGS=\u201d_USER_FLAG_1\u201d\n</code></pre> <p>Then in <code>pre_make.sh</code> add</p> <pre><code>if [ -n $USER_FLAGS ]; then\n    Export BB_QMAKE_DEFINES=\u201d$BB_QMAKE_DEFINES $USER_FLAGS\u201d\nfi\n</code></pre>"},{"location":"developer_quick_start/blackbox_cli/","title":"Blackbox CLI","text":"<p>To manage repository checkouts and Buildroot checkouts a tool called the blackbox_cli is used, this is installed on all development systems by default, to run simply type the following in a terminal</p> <pre><code>blackbox_cli\n</code></pre> <p>The following high level options are available</p> <pre><code>1. Create Build Environment\n2. Checkout Repository\n3. Run a Nightly Build\n4. Diagnostics\n5. Create Combo File\n6. Watch Star Wars\nq. Quit\nPlease choose an option:\n</code></pre> <p>For the majority of developers the first two options are the only options of interest</p>"},{"location":"developer_quick_start/blackbox_cli/#1-create-build-environment","title":"1. Create Build Environment","text":"<p>This option will create a Buildroot directory from SVN for the requested board type in the required format. When you select this option you will be given a list of device variants as follows</p> <pre><code>1. Emerald4K\n2. Corrib\n3. EmeraldSE\n4. Deel\n5. EmeraldPE\n6. ZeroU\nq. Quit\nPlease choose an option:\n</code></pre> <p>Select the board type you wish to build then select if you wish to build a Encoder or Decoder variant. You will then have to select which branch or tag of code you wish to build. Once the checkout operation is completed a fresh buildroot folder will have been created with the format</p> <pre><code>/home/developer/Buildroot_{product_variant}_{encoder/decoder}\n</code></pre> <p>Navigate to this folder and into the subfolder buildroot-2017.02.4 and run a make to kick off a full build (this will take approximately 90mins). The below snippet gives an example on how to build a emeraldpe decoder</p> <pre><code>cd /home/developer/Buildroot_emeraldpe_decoder/buildroot-2017.02.4\nmake\n</code></pre>"},{"location":"developer_quick_start/blackbox_cli/#2-checkout-repository","title":"2. Checkout Repository","text":"<p>If you wish to work on code changes or to build code separately from Buildroot you can use this option to checkout the repository you wish to work on code is checked out in the format</p> <pre><code>/home/developer/Emerald_sources/branches/{branch_name}\n</code></pre> <p>For most developer they will only need to select the 1. Emerald option that appears after selecting Checkout Repository</p> <pre><code>1. Emerald\n2. Zinq/Corrib\nq. Quit\nPlease choose an option: \n</code></pre> <p>Zinq/Corrib is an older obsolete code base. Follow the on screen options to checkout your desired code repository.</p>"},{"location":"developer_quick_start/building_code/","title":"Compiling Code","text":"<p>Once you have checked out a repository you will be able to build the code. The majority of our binaries and libraries are contained in the following file structure.</p> <pre><code>\u251c\u2500\u2500 Applications \n\u2502\u00a0\u00a0 \u251c\u2500\u2500 Common\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 Decoder\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 Encoder\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 KernelModules\n\u2514\u2500\u2500  CustomLibraries\n</code></pre> <p>A number of helper aliases have been created to streamline building code, they take the following format To build a binary or library,</p> <pre><code>emerald_build\nemeraldse_build\nemeraldpe_build\nzerou_build\n</code></pre> <p>To build a kernel module</p> <pre><code>emerald_build --module\nemeraldse_build --module\nemeraldpe_build --module\nzerou_build --module\n</code></pre> <p>Additional arguments can be added such as <code>--clean</code> (cleans package) or <code>--debug</code> (adds debug symbols)</p> <p>As some applications have specific <code>#defines</code> for board type you must ensure you select the correct build alias for your hardware setup.</p>"},{"location":"developer_quick_start/building_code/#example","title":"Example","text":"<p>The following is a example on how to build the <code>server_emerald</code> application for an Emerald4K device on the <code>development_se_p2</code> branch</p> <pre><code>#Navigate to the correct branch\ncd Emerald_sources/branches/development_se_p2/\n#Nav to the application folder\ncd Applications/Encoder/ServerEmerald/\n#Build for Emerald4K \nemerald_build\n</code></pre> <p>Warning</p> <p>Before attempting to build code locally you must ensure you have a completed Buildroot build for the board variant as the code may have library or header file dependencies which come from Buildroot. If you have met these dependencies simply navigate to the root folder of the application you wish to build and run the relevant build alias from the list above</p>"},{"location":"developer_quick_start/connecting_to_vm/","title":"Developer Quick Start Guide","text":"<p>All Embedded development is performed on Ubuntu 16.04 Virtual Machines which run on an ESXi Server in the Limerick office. The URL for the ESXI GUI is https://10.211.128.204/. You should have received an email with login information for the server.</p>"},{"location":"developer_quick_start/connecting_to_vm/#connecting-to-your-machine","title":"Connecting to your Machine","text":""},{"location":"developer_quick_start/connecting_to_vm/#login-credentials","title":"Login Credentials","text":"<p>The default credentials are:</p> <p>Caution</p> <p>Do not changes these</p> <pre><code>username: developer\npassword: cloud$1\n</code></pre>"},{"location":"developer_quick_start/connecting_to_vm/#ssh","title":"SSH","text":"<p>All dev machines have ssh running as standard, if your prefer terminal based access you can simply use your preferred SSH Client to connect.</p>"},{"location":"developer_quick_start/connecting_to_vm/#esxi-gui","title":"ESXI GUI","text":"<p>The ESXI GUI allows you to access the desktop of your remote VM. When you enter the ESXi IP Address in your browser you should see the following screen</p> <p></p> <p>After you log in you can select the machines tab as highlighted below</p> <p></p> <p>then select the search box and type the name of the VM supplied to you</p> <p></p> <p>Once you have selected your machine you can open a console to your machine as highlighted below</p> <p></p>"},{"location":"developer_quick_start/connecting_to_vm/#vscode","title":"VSCode","text":"<p>Another option is to use the ssh plugin for VScode the previous link describes how to configure VScode on your work PC/Laptop to develop on a remote VM using SSH.</p>"},{"location":"developer_quick_start/phabricator/","title":"Setting Up Arcanist","text":"<p>Quick guide to getting Arcanist working for a new project. Arcanist is a command-line interface to Phabricator.</p> <p>Arcanist provides command-line access to many Phabricator tools (like Differential, Files, and Paste), integrates with static analysis (\"lint\") and unit tests, and manages common workflows like getting changes into Differential for review.</p> <p>A detailed command reference is available by running arc help. This document provides an overview of common workflows and installation.</p> <p>Warning</p> <p>All developer machines should have <code>arc</code> configured on them by default if this is not the case please contact DevOps. Do not attempt to install yourself.</p>"},{"location":"developer_quick_start/phabricator/#first-time-configuring","title":"First time configuring","text":"<p>Credentials allow you to authenticate. You must have an account on Phabricator before you can perform this step.</p> <pre><code>cd Emerald_sources/branches/mybranch\nEmerald_sources/branches/mybranch/ $ arc install-certificate\n</code></pre> <p>Follow the instructions. This will link your user account on your local machine to your Phabricator account.</p>"},{"location":"developer_quick_start/phabricator/#how-to-send-changes-for-review","title":"How to send changes for Review","text":"<p>For detailed instructions on using <code>arc diff</code>, see Arcanist User Guide: arc diff</p> <p>In Subversion, <code>arc diff</code> sends the uncommitted changes in the working copy for review. Due to a limitation in arcanist <code>arc</code> must be ran from the root of the project directory (where the <code>.arcconfig</code> file is located).</p> <p>To create a revision in SVN:</p> <pre><code>  # Make changes.\n  nano source_code.c \n  #Make sure you are in the root of the project\n  cd Emerald_sources/branches/mybranch\n  #Send for review\n  arc diff --create /path/to/my/changes\n</code></pre> <p>This will prompt you for information about the revision in the following format. Please fill in with as much detail as possible</p> <pre><code>&lt;&lt;Replace this line with your revision title&gt;\n\nSummary:\n\nTest Plan:\n\nReviewers:\n\nSubscribers:\n\n# NEW DIFFERENTIAL REVISION\n# Describe the changes in this new revision.\n#\n# arc could not identify any existing revision in your working copy.\n# If you intended to update an existing revision, use:\n#\n# $ arc diff --update &lt;revision&gt;\n</code></pre>"},{"location":"developer_quick_start/phabricator/#updating-a-revision","title":"Updating a revision","text":"<p>If a reviewer suggests changes you can resubmit with:</p> <pre><code>nano source_code.c # Make more changes.\narc diff --update D{DIFF_NUM} /path/to/my/changes\n</code></pre> <p>This time, <code>arc</code> will prompt you to update the revision.</p>"},{"location":"developer_quick_start/phabricator/#committing-a-revision","title":"Committing a Revision","text":"<p>Once your revision has been accepted, you can commit it like this:</p> <pre><code>arc commit --revision D{DIFF_NUM}\n</code></pre>"},{"location":"developer_quick_start/phabricator/#creating-multiple-reviews","title":"Creating multiple reviews","text":"<p>To submit a second separate review, you can use:</p> <pre><code>arc diff --create /path/to/my/changes\n</code></pre>"},{"location":"developer_quick_start/phabricator/#listing-open-revisions","title":"Listing Open Revisions","text":"<p>You can see what open arc revisions you have by using the command</p> <pre><code>arc list\n</code></pre>"},{"location":"developer_quick_start/phabricator/#common-errors","title":"Common Errors","text":"<p>If you get the following error on commit:</p> <p>Warning</p> <p>Please do not commit as developer. Add --username= to your commit command!</p> <p>This is because SVN has cached <code>developer</code> as the default user you can fix this by running the following command.</p> <pre><code>rm -rf ~/.subversion/auth/*\n</code></pre> <p>And trying again</p>"},{"location":"developer_quick_start/phabricator/#force-create-update","title":"Force Create / Update","text":"<p><code>arc</code> uses information about the working copy (like the path, branch name, local commit hashes, and local tree hashes, depending on which version control system you are using) to figure out whether you intend to create or update a revision. If it guesses incorrectly, you can force it to either create or update a revision with:</p> <pre><code>  arc diff --create             # Force \"create\".\n  arc diff --update &lt;revision&gt;  # Force \"update\".\n</code></pre> <p>You can figure out what <code>arc</code> believes to be in the working copy with <code>arc which</code>.</p>"},{"location":"developer_quick_start/phabricator/#applying-a-differential-review-to-your-local-code","title":"Applying a Differential Review to your local code","text":"<p>If you wish to apply a differential request to your local code before it has been commited you can use the following command</p> <pre><code>cd /Emerald_source/branches/my_branch\narc patch D{DIFF_NUM}\n</code></pre>"},{"location":"developer_quick_start/phabricator/#installing-arcanist","title":"Installing Arcanist","text":"<p>Note</p> <p>This is not recommended, all developer machines should have <code>arc</code> configured on them by default</p>"},{"location":"developer_quick_start/phabricator/#clone-repo","title":"Clone Repo","text":"<pre><code>$ sudo chown developer:developer /usr/local/share\n$ cd /usr/local/share\n$ git clone https://github.com/phacility/arcanist.git\n</code></pre>"},{"location":"developer_quick_start/phabricator/#install-extra-dependencies","title":"Install Extra Dependencies","text":"<pre><code>$ sudo apt-get install php php-curl php-xml\n</code></pre>"},{"location":"developer_quick_start/phabricator/#add-arc-to-path","title":"Add arc to $PATH","text":"<pre><code>$ export PATH=\"$PATH:/usr/local/share/arcanist/bin\"\n</code></pre>"},{"location":"developer_quick_start/reference_books/","title":"Reference Books","text":"<p>This page contains the important references, books and study material for the different areas realted to EMERALD KVM Technology</p>"},{"location":"developer_quick_start/reference_books/#linux-kernel-development","title":"Linux Kernel Development","text":"<ol> <li>Linux Kernel Development, Robert Love</li> </ol>"},{"location":"developer_quick_start/reference_books/#linux-device-driver","title":"Linux Device Driver","text":"<ol> <li>Linux Device Driver, Greg Kroah Hartman</li> <li>Essential Linux Device Driver, SreeKrishnan Venkateswaran</li> </ol>"},{"location":"developer_quick_start/reference_books/#network","title":"Network","text":""},{"location":"developer_quick_start/reference_books/#video-processing","title":"Video Processing","text":""},{"location":"developer_quick_start/reference_books/#buildroot","title":"Buildroot","text":""},{"location":"developer_quick_start/reference_books/#usb","title":"USB","text":""},{"location":"developer_quick_start/reference_books/#performance","title":"Performance","text":""},{"location":"features/4K30/","title":"4K 30","text":""},{"location":"features/4K30/#embedded-software-feature-proposal-4k-30","title":"Embedded Software Feature Proposal - 4K 30","text":""},{"location":"features/4K30/#introduction","title":"Introduction","text":""},{"location":"features/4K30/#references","title":"References","text":""},{"location":"features/4K30/#terms-and-definitions-used-in-blackbox","title":"Terms and Definitions used in Blackbox","text":"Term Definition Decoder See Receiver Encoder See Transmitter Municast The use of multiple individual TCP streams to share a video from a single transmitter to multiple receivers Multicast The use of an individual Multicast UDP stream to share a video from a single transmitter to multiple receivers. Blackbox uses reliable multicast so that any dropped frames are resent and no data loss occurs. Pixel Perfect Mode The original scheme used by 4K products where the entire frame of the source video was captured continuously and sent with compression to the decoder. RFX RemoteFX Codec Extension developed by Microsoft which uses a lossy image codec to encode screen images with efficient and effective compression. This is the lossy scheme used in Blackbox products. Receiver A Blackbox appliance that receives and displays a video stream. A receiver is also referred to as a client or decoder. SSH The Secure Shell Protocol (SSH) is a cryptographic network protocol for operating network services securely over an unsecured network. It is most notable applications are remote login and command-line execution. Shared Mode A generic term used in Blackbox to describe schemes that allow more than one receiver view the video source from a transmitter. See Municast and Multicast. Tile Differencing Mode A lossless scheme used to reduce bandwidth; only tiles (portions of the screen) that change are sent from encoder to decoder. Technical Debt Technical Debt is a concept in software development that reflects the implied cost of additional rework caused by choosing an easy (limited) solution now instead of using a better approach that would take longer. Transmitter A Blackbox appliance that captures and transmits a video from a source. A transmitter is also referred to as a server or encoder. Video Source A source of input for a Transmitter, normally the DVI or Display Port output of a PC. <p>Table 1 Terms and Definitions</p>"},{"location":"features/4K30/#feature-description","title":"Feature Description","text":"<p>New Module 4K 30, all YUV compression We need to do a display port receiver version as well as the transmitter same as other modules, display port 1.1 megachips part, no lossless 4K 30 to 4K 60 interop challenges - lossless 4K 60 will require FPGA changes, will have to drop frames to talk, only talks on optimised screen which is limited to 2K, issue is number of engines we would need, 4 times the size but have the framerate. Limited to 25 FPS, limited by the number of engines. Need a scaler in there to talk to 2K,  We could scale down and scale back up.  accommodating 4K res would drive changes to AVAE, Capture block, significant work on the encoder and decoder side, Performance - 2K panels side by side 2160 lines, bond two channels together, stream fed to both to create a single frame, width is dual head, height is second frame. If HD we expect 60 fps. Can we accommodate both</p> <p>Designing receiver to be Display Port ++ PC with display port ++, direct to monitor or DVI with passive adapter, can dynamically change, we can do one or the other but not both.</p> <p>Other features are the same</p> <p>Price is a big issue 4K 30 has dual network, similar to PE, base line is current PE Spec</p> <p>Paul has design for Display Port PE.</p> <p>Timescale - After Display Port PEs - Out of parts by November Display Port Transmitters 4K refresh after PEs DVI refreshes of transmitter??? Sept 2023 Display Port Receivers 4K 30 Receivers Then 4K 30 Transmitters Ultra Wide Resolutions</p>"},{"location":"features/4K30/#use-cases","title":"Use Cases","text":"<p>To be Completed</p>"},{"location":"features/4K30/#questions","title":"Questions","text":""},{"location":"features/Splashscreen_proposal/","title":"Splashscreen Feature Proposal","text":"<p>** This feature proposal is prepared in advance, while awaiting the final requirements.**       </p> <p>1.1 Introduction        </p> <p>This document describes the Splashscreen feature, which allows users to terminate a connection using a hotkey sequence and display a custom run-time splashscreen image, instead of the On-Screen Display (OSD). This feature can also be controlled by Boxilla, enabling a user terminal to be logged out of a connection and the splashscreen displayed. </p> <p>1.2 Feature Overview</p> <p>The Splashscreen feature is a request from a customer which we aim to turn into a generic feature. It allows users to terminate a connection using a hotkey sequence and display a custom image instead of the OSD.        This functionality is also controllable by Boxilla, enabling the user terminal to be logged out of a connection and the splashscreen displayed. The custom splashscreen image can be loaded onto the board, either by the user from the OSD or by Boxilla.</p> <p>1.3 Feature Description</p> <p>The design impacts are on the receiver side and Boxilla, requiring the addition of an extra framebuffer to the device tree and modifications to the overlay mechanism logic to support the splashscreen. The overlay mechanism will need to be reworked to account for the new use case and possible future uses for it.       In addition to the current Black Box boot splashscreen image, the board will now need to store up to four images, two customisable images and the two default images used as splashscreens on factory restore.      </p> <p>One option to add images to the board from Boxilla is using existing REST API functionality, while images can be added to the board from the OSD by mounting a USB and copying them to memory, which will require additons to the OSD layout to facilite the process.      </p> <p>The splashscreen image format for 2k boards is BMP3 800x600 8-bit sRGB 1.44MB.     The splashscreen image format for 4k boards is 1920x1080 raw rgba.      </p> <p>1.4 Use Cases</p> <ul> <li>User terminates a connection using hotkey + S, and the splashscreen is displayed instead of the OSD.</li> <li>User switches the overlay from splashscreen to display the OSD using hotkey + O.</li> <li>Boxilla terminates a connection and displays the splashscreen on a user terminal.</li> <li>User uploads a correct format splashscreen image from a USB to the new framebuffer through the OSD menu.</li> <li>User uploads an  incorrect format splashscreen image from a USB to the new framebuffer through the OSD menu.</li> <li>Boxilla adds correct format splashscreen image on the Emerald receiver.</li> <li>Boxilla adds incorrect format splashscreen image on the Emerald receiver.</li> <li>User switches from the splashscreen to a favorite connection using a Favorite Hotkey.</li> <li>Emerald receiver displays the default Black Box Disconnection Splash screen on factory reset.</li> <li>Emerald receiver displays the default Black Box Boot-up Splash screen on power-on.</li> <li>Splashscreen displayed \u2013 User moves mouse / hits keys on keyboard (events need to be ignored, bar hotkeys).</li> <li>Rest Request to terminate connection \u2013 either display OSD or splashscreen depending on the data (new parameter required to indicate whether to display OSD or Splashscreen).</li> <li>Rest Request to Logout User \u2013 once the connection is terminated, either display OSD or splashscreen depending on the data (new parameter required to indicate whether to display OSD or Splashscreen on user logout).</li> <li>Factory restore initiated \u2013 Custom splashscreen deleted.</li> <li>No custom splashscreen on RX \u2013 user selects Hotkey \u2018s\u2019. (reliant on full requirements list)</li> </ul>"},{"location":"features/all_settings_configurable_via_boxilla/","title":"All settings configurable via Boxilla","text":""},{"location":"features/all_settings_configurable_via_boxilla/#problem","title":"Problem","text":"<ul> <li>As per Request from JohnH, we need to create a list of 'things' that we cannot configure via boxilla and start adding them.</li> <li>This will have its difficulties, as the Boxilla aspect will need to be factored in</li> </ul>"},{"location":"features/all_settings_configurable_via_boxilla/#proposal","title":"Proposal","text":"<ul> <li>The initial effort should be to create a list of 'What is Only configurable from the OSD'. I'll start the list.<ul> <li>Setting the 'Auto Logon user' is Not possible from Boxilla</li> <li>... </li> </ul> </li> </ul>"},{"location":"features/cloudflare/","title":"CloudFare Interactivity","text":"<p>The following is a link to some slides based on the screen shots that I took during our call with Philips yesterday.</p> <ul> <li>Slides from Presentation</li> </ul> <p>Philips have connectivity between the BXA, RA  and TX devices over the Cloudflare network.</p> <p>Note:</p> <p>They are seeing some issues in comms from the TX back to BXA. We believe this may be caused by the use of the Cloudflare ZeroTrust product operating in uni-directional mode. Shravan is now investigating connecting our BXA instances on AWS with StrongSWAN from Cloudflare with a view to establishing connectivity with the TX devices on Philips network.</p>"},{"location":"features/downgrade_backwards_compatibility/","title":"Downgrades and Backwards Compatability","text":""},{"location":"features/downgrade_backwards_compatibility/#problem","title":"Problem","text":"<ul> <li>For example, If we downgrade we end up with the wrong directfb rc file.</li> <li>Another example is hid settings. </li> </ul>"},{"location":"features/downgrade_backwards_compatibility/#proposal","title":"Proposal","text":"<ul> <li>Develop a pre-upgrade step, it would know we are downgrading and make the necessary transformations to settings files depending on versions. </li> </ul>"},{"location":"features/feature_proposal_document_template/","title":"Feature Proposal Template","text":""},{"location":"features/feature_proposal_document_template/#embedded-software-feature-proposal-specify-feature-name","title":"Embedded Software Feature Proposal - Specify Feature Name","text":""},{"location":"features/feature_proposal_document_template/#introduction","title":"Introduction","text":"<p>Notes to the Authors \u2013 (Delete explanatory text from final approved version)</p> <p>Use this section to give an overview of the feature this document describes and how this feature relates to the existing system. This is not an architectural analysis, this is a description of the feature from a product management and user perspective. </p>"},{"location":"features/feature_proposal_document_template/#references","title":"References","text":"<p>Notes to the Authors \u2013 (Delete explanatory text from final approved version)</p> <p>Include references to any relevant documentation here. For an feature proposal we would link to the Marketing Requirements and PRM.</p> <p>Any competitive analysis or industry references should also be included here.  The completed and approved document reflects an agreement between software and product marketing on the definition of a feature.</p> <p>In time it is expected that the Feature and Functional Area architecture documents will tie to an Embedded SW System Architecture document that will follow a similar format to this document template. The intent is to keep this document updated so that it always represents the agreed feature and this should offer a starting point and reference for any discussions on architecture.</p> <p>No architectural or design work should start until this feature proposal is completed and accepted.</p> <p>The references included in this section of the template are for illustration only and should be replaced as appropriate in each specific instance.</p> <ul> <li>Marketing Requirements  https://bboxjira.atlassian.net/wiki/spaces/EM/pages/1230700564/Emerald+4K-+6.0</li> <li>ENG-0008-026 4K/2K Interoperability Analysis</li> </ul>"},{"location":"features/feature_proposal_document_template/#terms-and-definitions-used-in-blackbox","title":"Terms and Definitions used in Blackbox","text":"<p>Notes to the Authors \u2013 (Delete this explanatory text from final approved version)</p> <p>This section will include Black Box terms and Definitions; more general technology definitions need not be included here. They can, if required for a specific technology impact study, be added but one should exercise common sense and only define the technology terms that are relevant to the feature under consideration.</p> <p>The table of terms included in this section of the template are for reference only and should be replaced as appropriate in each specific instance.</p> Term Definition CLU Image A compressed encrypted file format used for 2K appliance software images. Decoder See Receiver Encoder See Transmitter FIT Image A compressed encrypted file format used for 4K appliance software images. Municast The use of multiple individual TCP streams to share a video from a single transmitter to multiple receivers Multicast The use of an individual Multicast UDP stream to share a video from a single transmitter to multiple receivers. Blackbox uses reliable multicast so that any dropped frames are resent and no data loss occurs. Pixel Perfect Mode The original scheme used by 4K products where the entire frame of the source video was captured continuously and sent with compression to the decoder. RFX RemoteFX Codec Extension developed by Microsoft which uses a lossy image codec to encode screen images with efficient and effective compression. This is the lossy scheme used in Blackbox products. Receiver A Blackbox appliance that receives and displays a video stream. A receiver is also referred to as a client or decoder. RPU Real Time Processing Unit. The Zynq Ultrascale+ MPSoC features two A5 RPUs. In our 4K products one of these is used for Display Port functionality using IP provided by Xilinx. The second on the encoder side acts a video processing feed between FPGA and TOE Shared Mode A generic term used in Blackbox to describe schemes that allow more than one receiver view the video source from a transmitter. See Municast and Multicast. Tile Differencing Mode A lossless scheme used to reduce bandwidth; only tiles (portions of the screen) that change are sent from encoder to decoder. TOE TCP Offload Engine: A hardware based TCP stack used to accelerate the transmission of data. This is essential in high bandwidth, low latency transmission of video and audio. Technical Debt Technical Debt is a concept in software development that reflects the implied cost of additional rework caused by choosing an easy (limited) solution now instead of using a better approach that would take longer. Transmitter A Blackbox appliance that captures and transmits a video from a source. A transmitter is also referred to as a server or encoder. Video Source A source of input for a Transmitter, normally the DVI or Display Port output of a PC. <p>Table 1 Terms and Definitions</p>"},{"location":"features/feature_proposal_document_template/#feature-overview","title":"Feature Overview","text":"<p>Notes to the Authors \u2013 (Delete this explanatory text from final approved version)</p> <p>In this section you should provide a summary of the feature.</p> <p>Some guidelines:</p> <ul> <li>What is the marketing forces driving this requirement?</li> </ul>"},{"location":"features/feature_proposal_document_template/#feature-description","title":"Feature Description","text":"<p>In this section you should provide a detailed description of the feature with drawings and other artifacts to illustrate how the feature will work.</p> <p>Some guidelines:</p> <ul> <li>What products does it impact?</li> <li>What other products does it impact, for example, Remote App, Boxilla, Control Bridge?</li> </ul>"},{"location":"features/feature_proposal_document_template/#use-cases","title":"Use Cases","text":"<p>Notes to the Authors \u2013 (Delete this explanatory text from final approved version)</p> <p>Use cases are essential in understanding the impact of a feature. If these are not properly understood then any subsequent work may end up missing the intent of the change or compromise the customer\u2019s expectations. Use cases must be provided by marketing, but in their absence the software architects or engineers may have to write then based on workshops with product marketing. They can be presented in tabular form or as a referenced list.</p> <p>These use cases can be used by Test to derive test cases so any assumptions or expectations should be clearly stated with no ambiguity.</p>"},{"location":"features/interoperability/","title":"Interoperability","text":""},{"location":"features/interoperability/#embedded-software-feature-proposal-interoperability","title":"Embedded Software Feature Proposal - Interoperability","text":""},{"location":"features/interoperability/#introduction","title":"Introduction","text":"<p>Interoperability assumes that all Emerald appliances must be able to connect with each other and process video, audio and USBR. A 2K RX must be able to connect to both a 2K TX and a 4K TX. A 4K RX must be able to connect to a 2K TX and a 4K TX. Any receiver should be capable of configuring the preferences and settings of any transmitter.</p>"},{"location":"features/interoperability/#references","title":"References","text":"<ul> <li>Link to Interoperability PRM</li> <li>DPS</li> <li>Aspect Ratio Calculator</li> </ul>"},{"location":"features/interoperability/#terms-and-definitions-used-in-blackbox","title":"Terms and Definitions used in Blackbox","text":"Term Definition Decoder See Receiver Encoder See Transmitter FIT Image A compressed encrypted file format used for 4K appliance software images. Municast The use of multiple individual TCP streams to share a video from a single transmitter to multiple receivers Multicast The use of an individual Multicast UDP stream to share a video from a single transmitter to multiple receivers. Blackbox uses reliable multicast so that any dropped frames are resent and no data loss occurs. Pixel Perfect Mode The original scheme used by 4K products where the entire frame of the source video was captured continuously and sent with compression to the decoder. RFX RemoteFX Codec Extension developed by Microsoft which uses a lossy image codec to encode screen images with efficient and effective compression. This is the lossy scheme used in Blackbox products. Receiver A Blackbox appliance that receives and displays a video stream. A receiver is also referred to as a client or decoder. RPU Real Time Processing Unit. The Zynq Ultrascale+ MPSoC features two A5 RPUs. In our 4K products one of these is used for Display Port functionality using IP provided by Xilinx. The second on the encoder side acts a video processing feed between FPGA and TOE Shared Mode A generic term used in Blackbox to describe schemes that allow more than one receiver view the video source from a transmitter. See Municast and Multicast. Tile Differencing Mode A lossless scheme used to reduce bandwidth; only tiles (portions of the screen) that change are sent from encoder to decoder. TOE TCP Offload Engine: A hardware based TCP stack used to accelerate the transmission of data. This is essential in high bandwidth, low latency transmission of video and audio. Technical Debt Technical Debt is a concept in software development that reflects the implied cost of additional rework caused by choosing an easy (limited) solution now instead of using a better approach that would take longer. Transmitter A Blackbox appliance that captures and transmits a video from a source. A transmitter is also referred to as a server or encoder. Video Source A source of input for a Transmitter, normally the DVI or Display Port output of a PC. <p>Table 1 Terms and Definitions</p>"},{"location":"features/interoperability/#feature-overview","title":"Feature Overview","text":"<p>The current appliances have constraints in terms of the type of connection that can be made. A 4K receiver can connect to both a 2K and 4K transmitter, but a 2K receiver cannot connect to a 4K transmitter. All Emerald appliances must be able to interoperate with each other. A 2K RX must be able to connect to both a 2K TX and a 4K TX. A 4K RX must be able to connect to a 2K TX and a 4K TX. Any receiver should be capable of configuring the preferences and settings of any transmitter.</p>"},{"location":"features/interoperability/#feature-description","title":"Feature Description","text":"<ul> <li>All Emerald appliances must be able to interoperate with each other. A 2K RX must be able to connect to both a 2K TX and a 4K TX. A 4K RX must be able to connect to a 2K TX and a 4K TX.</li> <li>If a Receiver tries to make an optimised connection to a 4K TX with a resolution greater than 1920 X1200 @60hz, then the 4K transmitter will downscale the video to a suitable resolution. (Note a receiver can be an Emerald Recover or the Remote App)</li> <li>The Emerald 4K TX must provide both a 2K video optimised stream and a 4K lossless video stream.</li> <li>For 4K shared connections the addition of a 2K RX should not cause the video on the 4K lossless connections to significantly deteriorate. There may be some drop in the frame rate but the video quality should not be compromised.</li> <li>The addition of 4K and 2K connections to a shared session should not result in any noticeable pause or blip in the existing streams.</li> <li>Receivers gracefully leaving a connection should not cause a noticeable pause or blip in a shared connection for other connected receivers, but receivers leaving in a non-graceful manner may cause a brief pause depending on the quality of the underlying network and bandwidth available. </li> <li>There will be a limit of 8 receivers (either Multicast or Municast) in a shared connection.</li> <li>Full interoperabilty should be possible irrespective of whether devices are managed or un-managed.</li> <li>Interoperability will ensure that a 2K RX can configure setttings on a 4K TX, and that a 4K RX can configure settings on a 2K TX. However the following things are excluded from this:<ul> <li>It will not be be possible to upgrade a 4K appliance from a 2K appliance. It will also not be possible to upgrade a 2K appliance from a 4K appliance.</li> <li>It will not be possible to Clone the EDID of a 2K receiver from a 4K receiver. It will also not be possible to Clone the EDID of a 4K receiver from a 2K receiver.</li> <li>It will not be possible to import a XML database from a 2K unit into a 4K unit. It will also not be possible to import a XML database from a 4K unit into a 2K unit.</li> </ul> </li> <li>There is no licensing requirement for this feature.</li> <li>The Audio has it's own unique path, so it is not affected by the video in any way. The TOE round robin guarantees that the audio data will be sent even if the other channels have high bandwidth or latency, however; if Municast or multicast is used for audio and two channels share the audio then the quality of the audio will be limited by the slowest channel.</li> </ul>"},{"location":"features/interoperability/#tx-down-scaling","title":"TX Down-Scaling","text":"<p>Currently the maximum supported resolution of the YUV data-path is 1920x1200 60Hz hence if the video outputted by the DisplayPort RX IP is greater than this we can assume scaling must be enabled on the YUV path. Where possible the input aspect ratio shall be maintained, however some resolutions will not display well on HD panels e.g. 32:9, ~21:9. These shall be scaled to 1920x1080 which may affect their proportionality. The below table maps the most common aspect ratios to the scaler output resolution and aspect ratios, common resolutions with an already covered Input aspect ratio have been omitted from the table for brevity.</p>"},{"location":"features/interoperability/#input-to-output-resolution-table","title":"Input to Output Resolution Table","text":"Input Resolution Input Aspect Ratio Scaled Output Output Aspect Ratio 4096x2160 ~17:9 1920x1080 16:9 3840x2160 16:9 1920x1080 16:9 3840x1600 21:9 1920x1080 16:9 3840x1080 32:9 1920x1080 16:9 2560x1600 8:5 1680x1050 8\u22365 2560x1440 16:9 1920x1080 16:9 2560x2048 5:4 1280x1024 5:4 2048x2048 1:1 1024x1024 1:1 2048x1536 4:3 1600x1200 4:3"},{"location":"features/interoperability/#rx-up-scaling","title":"RX Up-Scaling","text":"<p>Up-scaling is the process of converting an input video with a given resolution to an output video with a larger resolution.  It shall be possible to disable upscaling on 4K to 4K optimised Connections via a setting on the control preferences of the OSD or through Boxilla. The setting is a global setting and not a per connection setting. The default value of the setting is on. If the original video signal has been scaled down on the Transmitter for transmission to Emerald2K Receivers or RemoteApp, it shall be scaled up again on the Emerald4K Receiver before display provided it is one of the following supported resolutions:</p> Input Resolution Input Aspect Ratio Scaled Output Output Aspect Ratio 3840x2160@60Hz 16:9 3840x2160@60Hz 16:9 3840x2160@30Hz 16:9 3840x2160@30Hz 16:9 3440x1440@60Hz 21:9 3440x1440@60Hz 21:9 2560x1600@60Hz 16:10 2560x1600@60Hz 16:10 1024x1024@60Hz 1:1 2048x2048@60Hz 1:1"},{"location":"features/interoperability/#use-cases","title":"Use Cases","text":"<ul> <li>Scenario #1: First 4X RX shared to TX is lossless connection to a 4K TX.<ul> <li>A second RX joins in lossless mode: -  a multicast lossless connection is created.</li> </ul> </li> <li>Scenario #2: First 4X RX shared to TX is optimised connection to a 4K TX.<ul> <li>A second RX joins in optimised mode: - a municast optimised connection is created.</li> </ul> </li> <li>Scenario #3: First 4X RX shared to TX is lossless multicast connection to a 4K TX.<ul> <li>A second RX joins in optimised mode: - an additional municast optimised connection is created.</li> </ul> </li> <li>Scenario #4: First 4X RX shared to TX is optimised municast connection to a 4K TX.<ul> <li>A second RX joins in lossless mode: - an additional multicast lossless connection is created.</li> </ul> </li> <li>Scenario #5: First 4X RX shared to TX is lossless connection to a 4K TX.<ul> <li>A remote app joins in optimised mode: -  a municast optimised connection is created.</li> </ul> </li> </ul>"},{"location":"features/planning/","title":"Roadmap","text":""},{"location":"features/planning/#estimates","title":"Estimates","text":""},{"location":"features/planning/#prms","title":"PRMs","text":""},{"location":"features/planning/#interop","title":"Interop","text":"<ul> <li>Link to Interop PRM</li> </ul>"},{"location":"features/planning/#glitch-free-join-and-leave","title":"Glitch Free, Join and Leave","text":"<p>Glitch free Join and Leave PRM</p>"},{"location":"features/planning/#enhanced-osd","title":"Enhanced OSD","text":"<p>Enhanced OSD</p>"},{"location":"features/planning/#new-platform","title":"New Platform","text":"<p>New platform \u2013 Needs to be completed now we have the detail \u2013 This needed major research.</p>"},{"location":"features/planning/#switching-time","title":"Switching Time","text":"<p>Switch time PRM</p>"},{"location":"features/planning/#opal-opal-is-emd3000ge-gateway","title":"Opal (Opal is EMD3000GE (Gateway) )","text":"<p>For Opal John will send out a DPS \u2013 This will be the gold standard and will be tied to a basic PRM \u2013 I.e VM sharing and PCoIP and PCoIP ultra-required.)</p>"},{"location":"features/planning/#4k-over-1-gig","title":"4K over 1 GIG","text":"<p>https://bboxjira.atlassian.net/browse/PRM-106</p>"},{"location":"features/planning/#software-defined-kvm","title":"Software Defined KVM","text":"<p>Defined as SDKVM on roadmap.</p>"},{"location":"features/planning/#real-time-status","title":"Real Time Status","text":"<p>Real Time Status PRM</p>"},{"location":"features/planning/#vm-rdp-issues","title":"VM RDP Issues","text":"<ul> <li>Issues with blitting multiple small frames</li> <li>Performance issue on 4K VM</li> </ul>"},{"location":"features/planning/#technology-areas-impacted","title":"Technology Areas Impacted","text":"<ul> <li>OSD</li> <li>Connection Control</li> <li>XML Database</li> <li>Rest API, librestapi</li> <li>New Connection Manager</li> <li>Libsystem</li> <li>MQTT Messages</li> </ul>"},{"location":"features/planning/#push-and-get","title":"Push and Get","text":"<p>Push and Get PRM</p>"},{"location":"features/planning/#technology-areas-impacted_1","title":"Technology Areas Impacted","text":"<ul> <li>OSD</li> <li>Connection Control</li> <li>XML Database</li> <li>Rest API, librestapi</li> <li>New Connection Manager</li> </ul>"},{"location":"features/planning/#sonic","title":"SONIC","text":"<ul> <li>https://github.com/Azure/SONiC/wiki</li> </ul>"},{"location":"features/planning/#snmp","title":"SNMP","text":"<p>SNMP PRM</p>"},{"location":"features/planning/#zero-latency-cut-through","title":"Zero Latency Cut through","text":"<p>Zero Latency (Cut thru) PRM</p> <ul> <li>Are there software implications? We believe that it is a question of setting thresholds.</li> <li>How do we measure the latency improvement? - subjective assessment only - monitor with built in latency may be an option.</li> </ul>"},{"location":"features/planning/#glide-and-slide","title":"Glide and Slide","text":"<p>Glide and Switch PRM</p>"},{"location":"features/planning/#nistsp800-193","title":"NIST.SP.800-193","text":"<ul> <li>NIST.SP.800-193</li> </ul>"},{"location":"features/planning/#technology-areas-impacted_2","title":"Technology Areas Impacted","text":"<ul> <li>OSD</li> <li>Connection Control</li> <li>XML Database</li> <li>Rest API, librestapi</li> <li>New Connection Manager</li> <li>Libsystem</li> <li>MQTT Messages</li> </ul>"},{"location":"features/planning/#devlin-keyboard","title":"Devlin Keyboard","text":"<p>Devlin Keyboard and USBr issues are bugs/L4s that we need to reference on a per project basis.</p>"},{"location":"features/planning/#ability-to-enable-and-disable-an-appliance-from-boxilla","title":"Ability to Enable and Disable an Appliance from Boxilla","text":""},{"location":"features/planning/#brief","title":"Brief","text":"<p>Our customer Finnish Defense Force Logistic send me a request for Emerald feature: \u201cIf one development idea could be implemented there could be Enable / Disable operation of the transmitter and / or receiver through Boxilla. That is, in a managed environment, the use of a particular desired transmitter / receiver could be prevented or allowed through Boxilla. Even more wonderful would be that the above-mentioned function could also be implanted with a calendar, a clock with times, which could allow use at certain times or prevent use at certain times\u201d Regards, Jyrki</p>"},{"location":"features/push_and_get/","title":"Push and Get","text":""},{"location":"features/push_and_get/#embedded-software-feature-proposal-push-and-get-feature","title":"Embedded Software Feature Proposal - Push and Get Feature","text":""},{"location":"features/push_and_get/#version-101-released","title":"Version 1.0.1 - Released","text":""},{"location":"features/push_and_get/#introduction","title":"Introduction","text":"<p>The Push-Get function enables you to shift an image to or get an image from any computer connected to the KVM system managed network to the monitor of another user console. This way, you can exchange and edit computer or display contents. This feature optimises collaboration in the control room by allowing the user to Push the image on his monitor to the display of another workstation or a large-screen projection. Conversely the user can Get an existing connection from a source receiver and transfer it to his own workstation. This is a premium feature and will be licensed.</p> <p>This document uses terms like source and target in a very specific context, and this differs from some of the existing associations of those terms. Please read the Terms and Definitions section to understand the context.</p>"},{"location":"features/push_and_get/#references","title":"References","text":"<p>Push and Get PRM</p>"},{"location":"features/push_and_get/#terms-and-definitions-used-in-blackbox","title":"Terms and Definitions used in Blackbox","text":"Term Definition Decoder See Receiver Encoder See Transmitter Municast The use of multiple individual TCP streams to share a video from a single transmitter to multiple receivers Multicast The use of an individual Multicast UDP stream to share a video from a single transmitter to multiple receivers. Blackbox uses reliable multicast so that any dropped frames are resent and no data loss occurs. Pixel Perfect Mode The original scheme used by 4K products where the entire frame of the source video was captured continuously and sent with compression to the decoder. RFX RemoteFX Codec Extension developed by Microsoft which uses a lossy image codec to encode screen images with efficient and effective compression. This is the lossy scheme used in Blackbox products. Receiver A Blackbox appliance that receives and displays a video stream. A receiver is also referred to as a client or decoder. Get Source The term Source is commonly used to describe the PC connected to a transmitter appliance. However, in the context of this document we will be using Source to identify the receiver appliance that is the source for the get function. Shared Mode A generic term used in Blackbox to describe schemes that allow more than one receiver view the video source from a transmitter. See Municast and Multicast. Source In the context of Push and Get source refers to the receiver we get the connection from - see Get Source. Push Target The term Target is used in the context of this document to describe the receiver appliance that will receive the pushed connection. Target In the context of Push and Get the term target  refers to the receiver we get the connection from - see Push Target. Tile Differencing Mode A lossless scheme used to reduce bandwidth; only tiles (portions of the screen) that change are sent from encoder to decoder. Transmitter A Blackbox appliance that captures and transmits a video from a source PC. A transmitter is also referred to as a server or encoder. Video Source A source of input for a Transmitter, normally the DVI or Display Port output of a PC. Video Wall A video wall is a special multi-monitor setup that consists of multiple computer monitors, video projectors, or television sets tiled together contiguously or overlapped in order to form one large screen. Typical display technologies include LCD panels, Direct View LED arrays, blended projection screens, Laser Phosphor Displays, and rear projection cubes. <p>Table 1 Terms and Definitions</p>"},{"location":"features/push_and_get/#feature-overview","title":"Feature Overview","text":"<p>The Push-Get function enables you to shift the image to, or get the image from, any device in the KVM managed network. When you Push and Get a connection the attributes of that connection move with the connection. This includes, audio, mouse and keyboard. This way, you can exchange, share and edit computer or display contents as elements in a collaborative workspace. The target user console can be a standard console or a large screen projection, for example, a video wall. When a user Pushes a connection, they are targeting another receiver. The Get function differs from a normal connection because the user is selecting another receiver rather than a transmitter as the target.</p> <p>This feature is currently provided as a premium feature on competing devices like the G&amp;D ControlCenter-IP 2.0 see G&amp;D ControlCenter-IP 2.0 Manual</p>"},{"location":"features/push_and_get/#feature-description","title":"Feature Description","text":"<ul> <li>The user must be assigned access to Push and Get by the admin.</li> <li>The user must have connection access to the devices they wish to use the Push and Get feature on.</li> <li>The user must have the ability to set \"Push favorites\" where they can quickly setup to Push to their \"Favorite\" user station. eg. \"shift shift P F1\"</li> <li>The user must also have the ability to set \"Get favorites\" where they can quickly setup to Get their \"Favorite\" user station. eg. \"shift shift G F2\"</li> <li>The user must have the ability to invoke a special hotkey to bring up a popup window or overlay that displays the hotkey mappings and their associated targets and Sources for Push and Get operations.</li> </ul>"},{"location":"features/push_and_get/#user-permissions","title":"User Permissions","text":"<p>The ability to use Push and Get feature must be enabled for specific users. For example, if we create a user \"Bob\" then Boxilla must specifically enable Push and Get for that user. This would work in a similar fashion to the permissions associated with Remote App.</p>"},{"location":"features/push_and_get/#configuration-and-persistence-of-push-and-get-settings","title":"Configuration and Persistence of Push and Get settings","text":"<ul> <li>It is assumed that we will add a section to the XML file to define the association between a hot key sequence and a particular source or target device.</li> <li>There will also need to be an association between a specific user and their permission to use the Push and Get feature. This association is new and will be different than the current \"privilege\" field we use to differentiate a user's role with respect to Administrative and Power User roles.</li> <li>We will need to be able to download a secure license file to an appliance that uses this feature under license.</li> </ul>"},{"location":"features/push_and_get/#pre-emption-and-negotiation-of-push-and-get","title":"Pre-Emption and Negotiation of Push and Get","text":"<p>The initial deployment of Push and Get assumes no negotiation or pre-emption. Once a user Pushes the connection is automatically sent to the target without first informing the user of the target device.</p> <p>Note: This may change at some future point, but the mechanism for managing pre-emption would need to be specified.</p>"},{"location":"features/push_and_get/#valid-connection-modes-for-push-and-get","title":"Valid Connection Modes for Push and Get","text":"<p>The Push and Get feature is available in both shared and private modes of operation. </p>"},{"location":"features/push_and_get/#non-managed-environments","title":"Non Managed Environments","text":"<p>Push and Get is not available in non-managed environments. It is a requirement that devices with this functionality are managed by Boxilla.</p>"},{"location":"features/push_and_get/#how-the-feature-is-invoked","title":"How the Feature is Invoked","text":"<p>The feature should facilitate invocation from either the OSD or from within a connection using a pre-defined hot key sequence. The user hits a pre-defined hot key sequence to invoke a specific target or source device. This would require a pre-configured list of associated targets and sources. A range of hot keys would be associated with Push targets and a second range would be associated with Get sources. Boxilla would maintain and facilitate configuration of these hot key associations, but it should also be possible to make the association through the OSD. The user can see a visual indication of the target or source devices before making a selection by using a special hotkey to invoke a pop-up window that displays the current mappings between hotkeys and available targets and sources.</p>"},{"location":"features/push_and_get/#push-and-get-and-the-remote-app","title":"Push and Get and the Remote APP","text":"<ul> <li>The Remote App will not support this functionality. The target or source of a Push or get command cannot be a Remote App instance.</li> </ul> <p>Note: This may change in subsequent iterations of the product.</p>"},{"location":"features/push_and_get/#push-and-get-and-bonded-connections","title":"Push and Get and Bonded Connections","text":"<p>In the initial version of this feature we can Push and Get to or from a bonded connection, but this has certain implications. The entire bonded connection collection cannot be pushed, only the part of the connection currently active on the receiver of the user pushing the connection will be pushed. There are a number of unique Use Cases associated with this, and these are discussed in the Use Cases section below.</p>"},{"location":"features/push_and_get/#push-and-get-and-non-kvm-connections","title":"Push and Get and non-KVM connections","text":"<p>Shared and Private KVM connections between receivers and transmitters will support the Push and Get feature. All other types of connections such as VMware, RDP VMs, VNC and SSH will not be supported.</p>"},{"location":"features/push_and_get/#support-for-multiple-push-targets","title":"Support for Multiple Push Targets","text":"<p>A single connection is pushed to a single target receiver for each invocation of the Push command. A user may push the same connection to a number of different receivers, but this would require multiple Hot Key activations. At some future we point we may want to be able to associate a list of target receivers to a single push command, but that is outside the scope of this current definition.</p>"},{"location":"features/push_and_get/#push-and-get-and-the-logged-in-user","title":"Push and Get and the Logged in User","text":"<ul> <li>The target user must have access to the connection being pushed to them, if they do not the Push will fail.</li> <li>If no one is logged in to the target RX the Push fails.</li> </ul>"},{"location":"features/push_and_get/#user-feedback","title":"User Feedback","text":"<p>An appropriate informative error message must be displayed for all Push and Get attempts that fail.</p>"},{"location":"features/push_and_get/#push-and-get-and-connection-attributes","title":"Push and Get and Connection Attributes","text":"<ul> <li>A connection that is Pushed or Gotten always inherits the attributes of the original connections. These attributes may not be compatible with the target and in those circumstances the pushed connection may fail. If a connection with audio, view only mode is pushed to a target receiver, then the connection established on the receiver will also have audio and view only attributes.</li> </ul> <p>Some examples of relevant scenarios are examined in the Use Cases section below.</p>"},{"location":"features/push_and_get/#provision-for-attribute-override","title":"Provision for Attribute Override","text":"<p>One of the limitations of our current design is that customers must maintain different instances of the same connection in order to manage different connection attributes. For example, a customer may have both a private , shared, and view only mode of the same connection. At some future point we will want to add the ability to override attributes based on some local setting on the appliance. While this is a future feature we should design the Push and Get feature to accommodate override settings when a connection is invoked and messages to Boxilla should make provision for these future fields.</p>"},{"location":"features/push_and_get/#push-and-get-constraints","title":"Push and Get Constraints","text":""},{"location":"features/push_and_get/#appliance-capability","title":"Appliance Capability","text":"<ul> <li>The Push target must have the same capabilities as the source connection. For example: If a user tries to push a \"Lossless\" connection to a 2K device the connection will fail.</li> <li>The Get target must have the same capabilities as the Get source connection. For example: If a user tries to get a \"Lossless\" connection on a 2K device the Get will fail.</li> </ul>"},{"location":"features/push_and_get/#security","title":"Security","text":"<ul> <li>The Push and Get feature should not compromise or circumvent any existing security constraints.<ul> <li>There must be a logged in user active on the receiver targeted on a push. The connection established on the target will be launched in the context of the logged in user. The connection will fail in the following circumstances.<ul> <li>There is no logged in user on the target device.</li> <li>The logged in user does not have access to the connection.</li> <li>The connection is in a zone that the user does not have access to.</li> </ul> </li> <li>The user on the device executing a Get must have permission to access the connection they are trying to Get.</li> </ul> </li> </ul>"},{"location":"features/push_and_get/#use-cases","title":"Use Cases","text":""},{"location":"features/push_and_get/#basic-use-case","title":"Basic Use Case","text":""},{"location":"features/push_and_get/#push-for-basic-hot-key-based-operation","title":"Push for Basic Hot Key Based Operation","text":"<ul> <li>A user will hit a unique hot key combination to select the target device he wishes to push to. </li> <li>The \"Pushed\" content appears on screen of the target device. The effectively terminates any existing connections already on that device. </li> </ul>"},{"location":"features/push_and_get/#get-for-basic-hot-key-operation","title":"Get for Basic Hot Key Operation","text":"<ul> <li>A user will hit a unique hot key combination to select the source device whose screen content he wants to access. If the User is currently in a connection, then that current connection will first be terminated.</li> <li>The display from the selected device appears on his monitor and the user can interact with the connection using their mouse and keyboard.</li> </ul>"},{"location":"features/push_and_get/#use-cases-for-connection-attributes","title":"Use Cases for Connection Attributes","text":"<p>These are just a sample of use cases illustrating how push and get behaves with different connection attributes.</p>"},{"location":"features/push_and_get/#pushing-a-connection-with-audio-enabled","title":"Pushing a Connection with Audio Enabled","text":"<ul> <li>A user in an existing connection with audio enabled wishes to push it to another target receiver.</li> <li>The user will choose a target device whose screen will receive the display he wishes to Push.</li> <li>The Pushed video and audio content appears on screen of the target device. The effectively terminates any existing connections already on that device. </li> </ul>"},{"location":"features/push_and_get/#getting-a-connection-with-view-only-mode-enabled","title":"Getting a Connection with View Only Mode Enabled","text":"<ul> <li>A user will hit a unique hot key combination to select the source device whose video content he wants to access. The connection he wishes to get is in view only mode.</li> <li>The video content from the selected device appears on his receiver in view only mode. He cannot use the key board and mouse because he has inherited the view only mode from the original connection.</li> </ul>"},{"location":"features/push_and_get/#pushing-a-private-mode-connection","title":"Pushing a Private Mode Connection","text":"<ul> <li>A user in an existing private mode connection wishes to push it to another target receiver.</li> <li>The user will choose a target device whose screen will receive the display he wishes to Push.</li> <li>The Pushed video and audio content appears on screen of the target device. This effectively terminates any existing connections already on that device and (because it is private mode) terminates the connection of the user pushing the connection.</li> </ul>"},{"location":"features/push_and_get/#getting-a-private-mode-connection","title":"Getting a Private Mode Connection","text":"<ul> <li>A user will hit a unique hot key combination to select the source device whose video content he wants to access. The connection he wishes to get is in private mode.</li> <li>The video content from the selected device appears on his receiver in private mode and the user can interact with the connection using their mouse and keyboard. This effectively terminates the existing connection on the source receiver.</li> </ul>"},{"location":"features/push_and_get/#pushing-a-connection-with-view-only-mode-enabled","title":"Pushing a Connection with View Only Mode Enabled","text":"<ul> <li>A user in an existing connection with audio enabled wishes to push it to another target receiver. The connection he wishes to push is in view only mode.</li> <li>The user will choose a target device whose screen will receive the display he wishes to \"Push\".</li> <li>The \"Pushed\" video content appears on screen of the target device in view only mode. The effectively terminates any existing connections already on that device.</li> </ul>"},{"location":"features/push_and_get/#getting-a-connection-with-audio-enabled","title":"Getting a Connection with Audio Enabled","text":"<ul> <li>A user will hit a unique hot key combination to select the source device whose video and audio content he wants to access.</li> <li>The video and audio content from the selected device appears on his receiver monitor and speakers.</li> </ul>"},{"location":"features/push_and_get/#bonded-connection-use-case","title":"Bonded Connection Use Case","text":""},{"location":"features/push_and_get/#push-to-a-target-in-a-bonded-connection-using-hot-key-based-operation","title":"Push to a Target in a Bonded Connection using Hot Key Based Operation","text":"<ul> <li>A user will hit a unique hot key combination to select the target device he wishes to push to.</li> <li>The user will choose a target device whose screen will receive the display he wishes to \"Push\".</li> <li>The \"Pushed\" content appears on screen of the target device and the user can interact with the connection using their mouse and keyboard. The effectively terminates any existing connections already on that RX device and on any other RX devices in that bonded connection. </li> </ul>"},{"location":"features/push_and_get/#get-from-a-source-in-a-bonded-connection-using-hot-key-operation","title":"Get from a Source in a Bonded Connection using Hot Key Operation","text":"<ul> <li>A user will hit a unique hot key combination to select the source device whose screen content he wants to access. That source RX device is already in a bonded connection.</li> <li>Providing he is a member of that bonded group, he causes the bonded connection to be relaunched. The effectively terminates any existing connections already on that source RX device and on any other RX devices in that bonded connection.</li> </ul>"},{"location":"features/push_and_get/#connection-attribute-use-cases","title":"Connection Attribute Use Cases","text":"<ul> <li>A view only connection is pushed from a 2K receiver to a 4K receiver. The connection on the 4K receiver will also be in view only mode.</li> </ul>"},{"location":"features/push_and_get/#dependencies-on-other-features","title":"Dependencies on other features","text":""},{"location":"features/push_and_get/#real-time-status","title":"Real Time Status","text":"<ul> <li>There is a feature called \"real-time\" status. This has yet to be defined and it will provide the real-time exchange of status data between appliances and also between appliances and Boxilla. This feature would provide a useful infrastructure for exchanging the data required to dynamically build the Push and Get target and sources lists. This feature is complex and may have significant impact on the current architecture. Because of these implications the first version of this feature will not depend on the real-time status.</li> </ul>"},{"location":"features/push_and_get/#licensing","title":"Licensing","text":"<p>The feature will be licensed in the following manner:</p> <ul> <li>For the SE devices it will be part of a per device (both RX and TX) Pro License.</li> <li>For 4K and PE devices this would be a standard feature (because the customer has paid premium for these devices).</li> </ul>"},{"location":"features/push_and_get/#pro-license","title":"Pro-license","text":"<ul> <li>This is the first of a number of features that will depend on Pro Licensing. There are a number of open issues relating to how this feature will be licensed and these will be evaluated in a separate review of pro-licensing, but the basic characteristics are likely to be:</li> <li>The management of the license is controlled by Boxilla.</li> <li>The license is sold for a defined number of appliance instances. A 100 instance license could be used on up to 100 appliances with a mix of receivers and transmitters.</li> <li>When the Push and Get feature is enabled on an appliance Boxilla decrements the pool and copies a license file to the appliance.</li> <li>If an appliance is decommissioned then the license can be returned to the license pool.</li> </ul>"},{"location":"features/push_and_get/#other-clarifications","title":"Other Clarifications","text":"<ul> <li>Can Boxilla assign Push and Get permissions to a User Group? - Currently groups in Boxilla relate to connection groups and AD groups. Groups to not relate to user permissions or privileges, so it will not be possible to push to a user group because the target of Push operations will always be receiver appliances and not users.</li> <li>Support for OPAL -  The relationship between Push and Get and OPAL will be defined once the OPAL project has been fully defined.</li> <li>Is Push and Get supported from Boxilla? - No, because we already have the capability to create similar functionality using the force connect feature should this be a requirement.</li> <li>What happens if USBr is enabled? The general principle applies that connection attributes follow the Pushed Connection.</li> <li>Is Push and Get from Control bridge supported? - No, because we already have the capability to create similar functionality using the make connect feature should this be a requirement.</li> <li>In relation to Keyboard and Mouse \u2013 Is it required that these work or is this just pushing/getting the video. - If Keyboard and Mouse are part of the connection attributes, then these move with the connection.</li> </ul>"},{"location":"features/push_and_get/#approvals","title":"Approvals","text":"Name Approval Status Notes Manas Approved John Hickey No Feedback for formal review, but feature was work shopped with John in earlier versions Peter Shelley Approved Kesavardhana Gandla Approved Ronan Hayes Approved Aidan Quinn No Feedback for formal review, but feature was discussed at an earlier revision Tom Fitzgerald Approved Prasad Joshi Approved Eamon Hayden Approved Clarified comments regarding Keyboard and Mouse [ See Clarifications above ] Micheal Donohue No Feedback"},{"location":"features/push_and_get/#release-dates","title":"Release Dates","text":"<ul> <li>Release Date: 09/02/2022</li> </ul>"},{"location":"features/realtime_status/","title":"Real Time Status","text":""},{"location":"features/realtime_status/#embedded-software-feature-proposal-real-time-status","title":"Embedded Software Feature Proposal - Real Time Status","text":""},{"location":"features/realtime_status/#version-101-released","title":"Version 1.0.1 - Released","text":""},{"location":"features/realtime_status/#introduction","title":"Introduction","text":"<p>The Real-time Status Feature requires that the connection status of each appliance is available in the OSD and Boxilla. A user can use this information to determine:</p> <ul> <li>If an a target transmitter is available to accept a connection.</li> <li>In what mode the would need to join the connection. If the transmitter was in an existing shared connection then the user would need to join in shared mode.</li> <li>Who the existing user on a connection is.</li> </ul>"},{"location":"features/realtime_status/#references","title":"References","text":"<ul> <li>Link to the Real Time Status PRM</li> <li>DPS</li> </ul>"},{"location":"features/realtime_status/#terms-and-definitions-used-in-blackbox","title":"Terms and Definitions used in Blackbox","text":"Term Definition Decoder See Receiver Encoder See Transmitter Municast The use of multiple individual TCP streams to share a video from a single transmitter to multiple receivers Multicast The use of an individual Multicast UDP stream to share a video from a single transmitter to multiple receivers. Blackbox uses reliable multicast so that any dropped frames are resent and no data loss occurs. Pixel Perfect Mode The original scheme used by 4K products where the entire frame of the source video was captured continuously and sent with compression to the decoder. RFX RemoteFX Codec Extension developed by Microsoft which uses a lossy image codec to encode screen images with efficient and effective compression. This is the lossy scheme used in Blackbox products. Receiver A Blackbox appliance that receives and displays a video stream. A receiver is also referred to as a client or decoder. Shared Mode A generic term used in Blackbox to describe schemes that allow more than one receiver view the video source from a transmitter. See Municast and Multicast. Tile Differencing Mode A lossless scheme used to reduce bandwidth; only tiles (portions of the screen) that change are sent from encoder to decoder. Technical Debt Technical Debt is a concept in software development that reflects the implied cost of additional rework caused by choosing an easy (limited) solution now instead of using a better approach that would take longer. Transmitter A Blackbox appliance that captures and transmits a video from a source. A transmitter is also referred to as a server or encoder. Video Source A source of input for a Transmitter, normally the DVI or Display Port output of a PC. <p>Table 1 Terms and Definitions</p>"},{"location":"features/realtime_status/#feature-overview","title":"Feature Overview","text":"<ul> <li>The Real-time Status Feature requires that the connection status of each appliance is available in the OSD and Boxilla. This can take a number of agreed forms.<ul> <li>An graphical icon indicating state (colour can additionally be used to differentiate status). This is preferred to using text or letters as it does not require localisation.</li> <li>A small label indicating the name of the current user if the connection is a private connection and unavailable. Ideally we could present this an a hover box that appears when the user mouses over the status icon.</li> </ul> </li> </ul>"},{"location":"features/realtime_status/#feature-description","title":"Feature Description","text":"<p>The OSD and Boxilla will show the Real-time Status of a connection. A connection can be busy (all ready in a connection) or free. The concept of free or busy varies depending on the type of connection, for example; the in-connection state could have the following attributes.</p>"},{"location":"features/realtime_status/#attributes-of-in-connection-state","title":"Attributes of \"In Connection\" state","text":"State Attribute Description Shared Multicast The device is powered on, contactable and in a shared multicast connection Shared Municast The device is powered on, contactable and in a shared municast connection Shared The device is powered on, contactable and in a shared connection with both municast and multicast connections Private Unicast The device is powered on, contactable and in a private unicast connection"},{"location":"features/realtime_status/#proposed-real-time-status-indicators","title":"Proposed Real Time Status Indicators","text":"<p>The Real-time Status does not need to identify each of these attributes. It simply needs to communicate if the connection is shared or private, and if a user can make a connection to it. It is proposed to distill the available states to the following:</p>"},{"location":"features/realtime_status/#private-connections","title":"Private Connections","text":"Appliance States Description Private Connection Comments available The device is powered on, contactable and available for connection un-available The device is un-contactable and possibly powered off We cannot contact or retrieve status for the device busy The device is contactable, but it is not possible to connect to it because it is busy with other active connections In the case of a private connection, it is Busy if another user is connected to it."},{"location":"features/realtime_status/#shared-connections","title":"Shared Connections","text":"Appliance States Description Shared Connection Comments available The device is powered on, contactable and available for connection available The device is powered on, contactable and available for connection, but there are other existing connections on the shared connection un-available The device is un-contactable and possibly powered off We cannot contact or retrieve status for the device busy The device is contactable, but it is not possible to connect to it because it is busy with other active connections In the case of a shared connection, it is busy when we have reached a maximum of 8 connections"},{"location":"features/realtime_status/#osd-example-1-icons-only","title":"OSD Example 1. Icons Only","text":""},{"location":"features/realtime_status/#osd-example-2-icons-and-user-names-for-private-connections","title":"OSD Example 2. Icons and User Names for Private Connections","text":""},{"location":"features/realtime_status/#note-on-icons","title":"Note on Icons","text":"<p>The icons shown are only illustrative. It my also be possible to add colour coding to the existing icons on the left hand side because the availability information could be incorporated into these.</p>"},{"location":"features/realtime_status/#list-of-currently-connected-users-and-associated-device-information","title":"List of Currently Connected Users and Associated Device Information","text":"<p>If possible it would be desirable to present the list of users in a connection as a hover box (tooltip) which would appear when we move the mouse over the availability icon. This could be complemented with the identity of the Receiver Devices and summary details for any Logged-In Users for each active connection. The specifics of what could be displayed could be a configurable option set by Boxilla.  We had considered the possibility of showing the users in a hover box that is activated when we mouse over a connection, but I think the addition of the receiver device names would be useful also. Perhaps we could configure the verbosity of what gets displayed in a real-time status setting.</p>"},{"location":"features/realtime_status/#real-time-status-integrity","title":"Real Time Status Integrity","text":"<p>It may be beneficial to display an integrity indicator for the realtime status presented to the user. This indicator which would be visible on the OSD would indicate if the displayed data is up to date or stale due to a Boxilla side issue. In the event of the status not being refreshed for a defined period of time we could force the appliance to pull status information from Boxilla. This would add an element of redundancy to the process.</p>"},{"location":"features/realtime_status/#performance-goals","title":"Performance Goals","text":"<p>Real-time in this context means the status should be updated on the OSD or Boxilla within 2 seconds of a change of state in the appliance.</p>"},{"location":"features/realtime_status/#licensing","title":"Licensing","text":"<ul> <li>This feature is not licensed.</li> </ul>"},{"location":"features/realtime_status/#managed-systems","title":"Managed Systems","text":"<ul> <li>This feature is only available on devices managed by Boxilla.</li> </ul>"},{"location":"features/realtime_status/#real-time-status-and-pre-emption","title":"Real Time Status and Pre-emption","text":"<ul> <li>This feature does not assume Pre-emption, but a future Pre-emption feature could use the real time status as a precursor to negotiated or preemptive connections. Any messaging schemes designed to support this feature should consider this future requirement.</li> </ul>"},{"location":"features/realtime_status/#real-time-status-and-the-northbound-rest-api","title":"Real Time Status and The Northbound REST API","text":"<ul> <li>This is not a requirement in the initial deployment of this feature, but the feature should be designed so that real time status can also be made available over the North Bound REST API at some future point.</li> </ul>"},{"location":"features/realtime_status/#the-remote-app-and-real-time-status","title":"The Remote App and Real Time Status","text":"<ul> <li>It is assumed that the Remote App will support this feature.</li> </ul>"},{"location":"features/realtime_status/#real-time-status-and-push-and-get","title":"Real Time Status and Push and Get","text":"<ul> <li>It is proposed that the Push and Get pop-up windows that display the current mappings between hotkeys and available targets and sources should use the same icons to indicate availability.</li> </ul>"},{"location":"features/realtime_status/#use-of-icons-on-the-osd","title":"Use of Icons on the OSD","text":"<ul> <li>In addition to the proposed availability icons, we should consider adding an icon to distinguish VM connections on the OSD menu. Shared connections and bonded connection already have individual icons.</li> </ul>"},{"location":"features/realtime_status/#use-cases","title":"Use Cases","text":""},{"location":"features/realtime_status/#osd","title":"OSD","text":"<ul> <li>A user who wishes to make a connection from the OSD can navigate to the connection menu and can determine the status of each of the listed connections by observing the icon on that connection.</li> <li>By hovering over the availability icon the user should be able to see a list of existing users in a shared or private connection. </li> </ul>"},{"location":"features/realtime_status/#boxilla","title":"Boxilla","text":"<ul> <li>A user who wishes to make a connection from Boxilla can navigate to the connection view on Boxilla and can determine the status of each of the available connections by observing the icon on that connection.</li> <li>By hovering over the availability icon the user should be able to see a list of existing users in a shared or private connection. </li> </ul>"},{"location":"features/realtime_status/#remote-app","title":"Remote App","text":"<ul> <li>A user who wishes to make a connection from the Remote App can navigate to the connection view on the Remote App and can determine the status of each of the available connections by observing the icon on that connection.</li> <li>By hovering over the availability icon the user should be able to see a list of existing users in a shared or private connection. </li> <li>We may want the facility to disable this feature on the Remote App in certain circumstances. It may not be practical to provide the Remote App with the necessary information over a wide area link.</li> </ul>"},{"location":"features/realtime_status/#clarifications","title":"Clarifications","text":"<ul> <li>Does this feature affect Opal?  - Yes, but that will need to be defined once we have clarified the specification for Opal.</li> <li>Does this include VMs - Yes, but that will need to be defined in a future release and should be considered a separate feature because of the complexity associated with getting VM status.</li> </ul>"},{"location":"features/slide_and_glide/","title":"Slide and Glide","text":""},{"location":"features/slide_and_glide/#embedded-software-feature-proposal-slide-and-glide","title":"Embedded Software Feature Proposal - Slide and Glide","text":""},{"location":"features/slide_and_glide/#version-103-released","title":"Version 1.0.3 - Released","text":""},{"location":"features/slide_and_glide/#introduction","title":"Introduction","text":"<p>Slide and Glide is a feature that allows easy switching between multi-monitor-console matrix connected to multiple computers via one keyboard and one mouse connected to a master receiver. The mouse can move seamlessly between a predefined grid of monitors. Each monitor is connected to a separate receiver device so the mouse control must pass from one receiver to the next when the boundary area associated with that receiver is crossed. The feature should support a flexible arrangement of displays and support computers with multi head graphics. The feature will support up to 16 different connections</p>"},{"location":"features/slide_and_glide/#references","title":"References","text":"<ul> <li>Link to Slide and Glide PRM</li> <li>Youtube video explaining Slide and Glide</li> <li>Relative and Absolute Co-Ordinates</li> <li>Absolute Mouse Behaviour on Windows</li> <li>Blackbox Information on Freedom</li> </ul>"},{"location":"features/slide_and_glide/#terms-and-definitions-used-in-blackbox","title":"Terms and Definitions used in Blackbox","text":"Term Definition Absolute Mouse Position Devices like digitizing graphics tablets that do not have an embedded screen involve indirect input and sense absolute positions and are often run in an absolute input mode. In this mode they send an X,Y location that corresponds to a specific point on the screen Decoder See Receiver Encoder See Transmitter FIT Image A compressed encrypted file format used for 4K appliance software images. Master In the context of Slide and Glide, the master receiver is the receiver that has the mouse and keyboard attached. Municast The use of multiple individual TCP streams to share a video from a single transmitter to multiple receivers Multicast The use of an individual Multicast UDP stream to share a video from a single transmitter to multiple receivers. Blackbox uses reliable multicast so that any dropped frames are resent and no data loss occurs. Multi-Monitor-Console matrix A defined group of receivers which will act as a single surface for the slide and glide feature MSC Multi Screen Switching IHSE's implementation of Slide and Glide in DKM Pixel Perfect Mode The original scheme used by 4K products where the entire frame of the source video was captured continuously and sent with compression to the decoder. RFX RemoteFX Codec Extension developed by Microsoft which uses a lossy image codec to encode screen images with efficient and effective compression. This is the lossy scheme used in Blackbox products. Relative Mouse Position A mouse does not have a base position that it can track, so in relative input, the system works on differential changes. So the difference between the current position of the mouse and where you move it to in a certain time period. Receiver A Blackbox appliance that receives and displays a video stream. A receiver is also referred to as a client or decoder. RPU Real Time Processing Unit. The Zynq Ultrascale+ MPSoC features two A5 RPUs. In our 4K products one of these is used for Display Port functionality using IP provided by Xilinx. The second on the encoder side acts a video processing feed between FPGA and TOE Shared Mode A generic term used in Blackbox to describe schemes that allow more than one receiver view the video source from a transmitter. See Municast and Multicast. Tile Differencing Mode A lossless scheme used to reduce bandwidth; only tiles (portions of the screen) that change are sent from encoder to decoder. TOE TCP Offload Engine: A hardware based TCP stack used to accelerate the transmission of data. This is essential in high bandwidth, low latency transmission of video and audio. Technical Debt Technical Debt is a concept in software development that reflects the implied cost of additional rework caused by choosing an easy (limited) solution now instead of using a better approach that would take longer. Transmitter A Blackbox appliance that captures and transmits a video from a source. A transmitter is also referred to as a server or encoder. Video Source A source of input for a Transmitter, normally the DVI or Display Port output of a PC. <p>Table 1 Terms and Definitions</p>"},{"location":"features/slide_and_glide/#competitive-analysis","title":"Competitive Analysis","text":""},{"location":"features/slide_and_glide/#ihse","title":"IHSE","text":"<ul> <li>IHSE- Draco U-Switch, DKM</li> <li>Support for Multiple Screens- MSC</li> <li>Draco User Guide for ACX576</li> </ul> <p>DKM (also marketed as Draco) is similar to RX and TX but based on non-ip proprietary communications facilitated through using a special switch. It supports many of the Emerald features like Keyboard and Mouse redirection. It also supports  USBR and has an implementation of a Slide and Glide type feature. IHSE's USB-HID switching operation (Multi Screen Switching - MSC), allowing a CON Device with several monitors to control several connected sources (computers, CPUs). The say that Smooth switching can be performed for up to four connected sources by dragging the mouse pointer beyond the respective monitor to an adjacent one. Monitors can be arranged side-by-side or in a grid layout.To enable Multi-Screen Control, all Extender Units assigned to the related CON Device, must be physically connected to the same block of 4 ports on the I/O board of their matrix switch.</p> <p>It appears that DKM uses an absolute mouse; this was confirmed during a trade show when Blackbox engineer's tried to connect a DKM with Multi Screen Switching enabled to a DCX3000 system, the OSD did not work correctly, but the PC did. Disabling the Multi Screen Switching functionality in the DKM caused the DCX3000 OSD to work as expected.</p> <p></p> DKM MSC Configuration"},{"location":"features/slide_and_glide/#gd-systems","title":"G&amp;D Systems","text":"<ul> <li>G&amp;D Cross Display Switching</li> <li></li> </ul>"},{"location":"features/slide_and_glide/#adder","title":"Adder","text":""},{"location":"features/slide_and_glide/#freedom-ii-km-switch-with-glide-and-switch-mouse-switching-4-port","title":"Freedom II KM Switch with Glide and Switch Mouse Switching - 4-Port","text":"<p>Freedom II</p>"},{"location":"features/slide_and_glide/#freedom-device-operation","title":"Freedom Device Operation","text":"Freedom Glide and Switch Mouse Switching <p>The Freedom device takes a relative co-ordinates as input and generates absolute co-ordinates as outputs to each of the four attached receivers. These absolute co-ordinates use a frame of reference of 32768 X 32768. One we reach a 32768 boundary the Freedom device switches the output to the next adjacent receiver and the co-ordinates revert to (0,0) for the top left hand edge of the display.</p> <p>The Freedom device is configured by a utility that allows the user select the relative position of each screen.</p> <p></p> Freedom II Configuration Utility <p>The utility does not allow gaps in the configuration (see below, for an example of valid configuration). A valid configuration must have adjacent monitors.</p> <p></p> Freedom II Configuration Utility - Invalid Configuration <p></p> Freedom II Multi-Monitor Driver <p>In order to handle extended desktops a driver must be installed for Freedom on the target PC. Only Windows is supported.  Microsoft introduced support for absolute mouse across multiple monitors in windows 10, but this appears to have been broken in KB5003637 and is unlikely to be fixed in the near future because changes required to support this feature introduced security vulnerabilities.</p> <p>HighSecLabs also provide a multi-monitor driver for their KVM range which provides support for absolute mouse. This appears to work by treating all connected mice as absolute devices. HighSecLabs Multi Monitor Driver</p>"},{"location":"features/slide_and_glide/#feature-description","title":"Feature Description","text":"<ul> <li>Slide and Glide is a feature that allows easy switching between multi-monitor-console matrix connected to multiple computers via one keyboard and one mouse connected to a master receiver.</li> <li>The definition of a multi-monitor-console matrix of receivers across which the slide and glide function can operate will be created in Boxilla and these details must be communicated to each receiver in the matrix.</li> <li>The setup and configuration of this feature shall only be available through Boxilla. The configuration should be a graphical utility which allows configuration of screens, their relative positions and the direction of movement for the activation of the transition between devices. </li> <li>Moving between connected TX's on separate machines should be seamless to the user with a delay of less than 300ms delay. There should be no perceivable delay as the user moves the mouse from one screen to another.</li> <li> <p>The system should provide a visual indication of the currently active screen. This can be displayed with a partial OSD overlay to indicate which screen is active or an icon around mouse on the active screen. It should be possible for the administrator to enable or disable this feature through Boxilla. The duration of the visual indicator should be configurable through Boxilla.</p> <ul> <li>Note: IHSE place a red ring around the border of the screen on the active monitor</li> <li>Note: G&amp;D illuminate a LED system on top of the active monitor</li> <li>Note: Due to hardware limitations we may not be able to support a full screen overlay. We may need to consider using the labels feature to indicate the active desktop</li> </ul> </li> <li> <p>The KVM administrator will need the ability to configure up to 16 screens for Glide and switch.  The can include dual head and single head computers.</p> </li> <li>The feature will require a Pro-License and is only available on managed systems.</li> <li>The mouse and keyboard can also be moved across the matrix by a pre-defined hot key assignment.</li> <li>Note: It is assumed that the absolute mouse is required for the Glide and Switch feature. We should not expect that all Transmitters need to be set to Absolute mouse all the time. Absolute mouse gives a poor RX to TX mouse experience and therefore we need this to change automatically when required or for the TX to emulate two mice. i.e the TX is only using Absolute mouse when required. This mechanism could also be used by the remote app.</li> <li>The feature should have support for changing the speed of the mouse. This may be required if an absolute mouse is used.</li> <li>If one of the receivers in a matrix is powered off or unavailable then the mouse will move to the next adjacent monitor in the matrix.</li> <li>The system must be able to handle different screen resolutions and changes in resolution on active connections. A mouse that transitions between different resolutions must make the necessary adjustments to speed and frame of reference. This requirement will be more pronounced in extended desktop environments.</li> <li>When the mouse transitions between desktops the associated keyboard functionality will move with it. This will require Keyboard key attributes like Caps Lock, Leds, Num Lock etc must be transitioned as well. </li> <li>In general a single master receiver (to which the mouse and keyboard is connected) will be associated with each multi-monitor-console matrix; however, a future requirement may require us to support more than one master receiver (See Use Cases) below.</li> <li>A receiver can only be part of a single Slide and Glide matrix at any one time.</li> </ul>"},{"location":"features/slide_and_glide/#basic-principle-of-operation","title":"Basic Principle of Operation","text":"Slide And Glide Principle Of Operation <p>A relative mouse is connected to the master receiver. It provides relative co-ordinates to the receiver every time the mouse is moved. These take the form of (change in X position, change in Y position). To create the illusion of seamless glide from one desktop to another the transmitter devices must send absolute co-ordinates to the target PCs. These allow us position the mouse on the appropriate screen edge as we move from on device to another.</p> <p>The master receiver must convert the relative co-ordinates it receives from the attached mouse into absolute co-ordinates suitable for the target PC. The master receiver must detect when the mouse has crossed a  boundary or screen edge. To do this it must maintain an absolute reference that represents the combined surface of the multi-monitor-console matrix expressed as a grid of 32K X 32K squares as shown above. Each time we cross a 32K boundary within this matrix we must switch the mouse events to the appropriate transmitter or receiver (depending on our in-connection or OSD status). </p> <p>If we are in a connection the absolute mouse events will be used by the transmitter to position the mouse on the desktop, but if we are not in a connection, then the mouse events will be used by the receiver to position the cursor on the OSD.</p> <p>Each subsequent relative co-ordinate that arrives is used to update the absolute master co-ordinate by either incrementing or decrementing its position. </p> <p>It can determine the absolute local co-ordinate of the Y value as follows:</p> <p>The absolute frame of reference that the master receiver maintains divides the multi-monitor-console matrix into 32K by 32K regions; however, we only ever send a maximum value of 32768 to any one transmitter or receiver.</p> <p>This is shown below in a number of examples.</p>"},{"location":"features/slide_and_glide/#absolute-mouse-scaling","title":"Absolute Mouse Scaling","text":"<p>Input Devices can have different Frames of Reference for the absolute co-ordinates they send to the receiver. The Freedom device, for example, uses a 32768 X 32768 frame of reference for the absolutes co-ordinates it presents to the receiver.</p> <p></p> Slide and Glide and Different Desktop Resolutions <p>As shown in the figure above the receiver always translates any co-ordinates received into a 32768 X 32768 grid irrespective of the input frame of reference. The data sent to the transmitter always uses the this 32768 X 32768 grid and this frame of reference is one of the properties we present to the PC when we enumerate our absolute mouse. This isolates us from having to enumerate different frames of reference when the desktop resolution changes, and is consistent with how absolute USB devices interface with Windows and other operating systems.</p> <p>The PC Operating System is responsible for taking the co-ordinates presented in the 32768 X 32768 frame of reference and scaling this to the appropriate desktop resolution. This means we are isolated from the impact of resolution changes across the virtual desktop.</p> <p>This transformation of absolute co-ordinates into a 32768 X 32768 frame of reference is done on the receiver and the following formula is used:</p> <p>Transformed value = ( absolute co-ordinate received from the device - minimum value of the absolute range of the device) X 32768 / (maximum value of the absolute range of the device - minimum value of the absolute range of the device + 1)</p> <p>So for a ServeSwitch device an absolute co-ordinate of (10,10) sent to the receiver will be presented to the PC as a (55,41) value.</p> <ul> <li>Where minimum X value of the absolute range of the ServeSwitch device is 0</li> <li>and the maximum X value of the absolute range of the ServeSwitch device is 6000</li> <li>and the minimum Y value of the absolute range of the ServeSwitch device is 0</li> <li>and the maximum Y value of the absolute range of the ServeSwitch device is 8000</li> <li>So, X = ( 10 - 0) X 32768 / (6000 - 0 + 1) = 55</li> <li>So, Y = ( 10 - 0) X 32768 / (8000 - 0 + 1) = 41</li> </ul>"},{"location":"features/slide_and_glide/#how-extended-desktop-works-with-slide-and-glide","title":"How Extended Desktop works with Slide and Glide","text":"<p>Extended desktop support works by treating the additional monitor as part of the absolute frame of reference. This means that the 32768 grid is now stretched across two desktops. This can cause changes to how the mouse feels when moving horizontally from the primary to the extended desktop.</p> <p></p> Absolute Frame Of Reference on Extended Desktop <p></p> Absolute Frame Of Reference on Multiple Extended Desktops"},{"location":"features/slide_and_glide/#slide-and-glide-on-the-osd-versus-in-connection","title":"Slide and Glide on the OSD versus in-connection","text":"<p>There is a fundamental difference between slide and glide on the OSD and in a connection. This is shown in the figures below:</p> <p>In a connection we need to send absolute co-ordinates to the transmitter associated with the target desktop. We send these using a 32768 X 32768 frame of reference.</p> <p></p> Slide And Glide in a Connection <p>At the OSD we need to send absolute co-ordinates to the receiver associated with the active monitor. Again, we send these using a 32768 X 32768 frame of reference.</p> <p></p> Slide And Glide at the OSD <p>There will be occasions where some of the receivers in a connection are at the OSD and others are in a connection. In these circumstances we must send the appropriate co-ordinates to the appropriate appliance. This means for devices at the OSD we must route the messages to the corresponding receiver, and for devices in a connection we must route the events to the corresponding transmitter.</p>"},{"location":"features/slide_and_glide/#using-the-slave-receivers-to-tunnel-mouse-events","title":"Using the Slave Receivers to Tunnel mouse events","text":"<p>We could simplify things by always sending the events to the slave receiver and have that receiver forward those events to the transmitter when it is in a connection; this may incur an additional latency cost, but would simplify the implementation. This approach is shown below:</p> <p></p> <p>In this arrangement the Master Receiver sends all mouse events to the corresponding receiver and the receiver then forwards these to the transmitter if it is in a connection, or consumes them locally if it is on the OSD. </p> <p>Another benefit of this arrangement is that it allows us include non-kvm connections in the scheme because the master receiver can direct the mouse events to the receiver connected to a RDP or VMware Connection. This might require a little characterisation.</p> <p></p> Slide And Glide and a mixture of OSD and Connections"},{"location":"features/slide_and_glide/#feature-constraints","title":"Feature Constraints","text":""},{"location":"features/slide_and_glide/#slide-and-glide-and-the-remote-app","title":"Slide and Glide and The Remote App","text":"<ul> <li>The Remote App will not support Slide and Glide. The Remote App cannot be part of the Slide and Glide Matrix.</li> </ul>"},{"location":"features/slide_and_glide/#slide-and-glide-and-vm-connections","title":"Slide and Glide and VM Connections","text":"<ul> <li>VM connections will not support Slide and Glide. </li> </ul>"},{"location":"features/slide_and_glide/#slide-and-glide-and-bonded-connections","title":"Slide and Glide and Bonded Connections","text":"<ul> <li>Bonded Connections will support Slide and Glide.  </li> </ul>"},{"location":"features/slide_and_glide/#slide-and-glide-and-shared-connections","title":"Slide and Glide and Shared Connections","text":"<ul> <li>Shared Connections will support Slide and Glide.  </li> </ul>"},{"location":"features/slide_and_glide/#slide-and-glide-and-audio","title":"Slide and Glide and Audio","text":"<ul> <li>The first release of this feature will not support redirection of audio as part of slide and glide. Future releases of the feature could support the redirection of audio from slave devices to a designated master.</li> </ul>"},{"location":"features/slide_and_glide/#connection-and-osd-timeouts","title":"Connection and OSD Timeouts","text":"<ul> <li>An appliance in the Slide and Glide Matrix will disable connection and OSD timeouts when this feature is enabled.</li> </ul>"},{"location":"features/slide_and_glide/#use-cases","title":"Use Cases","text":""},{"location":"features/slide_and_glide/#basic-use-case-with-hot-keys","title":"Basic Use Case with Hot Keys","text":"<ul> <li>A multi-monitor-console matrix of four receivers is defined in Boxilla. Each monitor is additionally allocated a hot key sequence. The monitor matrix defined in Boxilla mimics the users desk layout of monitors as shown below.</li> <li>The master receiver is connected to the receiver at Monitor #1 and the mouse is located at the centre of monitor 1. A red overlay pixel border is active on monitor #1 to indicate it is the active monitor. </li> <li>The user activates the hot key sequence associated with monitor #2.</li> <li>The mouse and keyboard focus switch to monitor #2 and the red overlay pixel border moves to monitor #2</li> </ul> Monitor #1 has the focus Monitor #2 has the focus"},{"location":"features/slide_and_glide/#basic-use-case-with-mouse-slide","title":"Basic Use Case with Mouse Slide","text":"<ul> <li>A multi-monitor-console matrix of four receivers is defined in Boxilla. The monitor matrix defined in Boxilla mimics the users desk layout of monitors as shown above.</li> <li>The master receiver is connected to the receiver at Monitor #1 and the mouse is located at the centre of monitor 1. A red overlay pixel border is active on monitor #1 to indicate it is the active monitor. </li> <li>The user moves the mouse right to the edge of monitor #1.</li> <li>The mouse automatically transitions to monitor #2 and the focus switches to monitor #2. The red overlay pixel border moves to monitor #2</li> </ul>"},{"location":"features/slide_and_glide/#the-case-for-multiple-masters","title":"The Case for Multiple Masters","text":"<p>In our initial implementation of this feature the master will be a static configuration set by Boxilla. It shall not be possible for a slave to become a master unless the system is reconfigued through Boxilla. While we will not support the concept of multiple masters in the initial release, customers may require multiple masters in particular circumstances, so this should be considered a future feature.</p>"},{"location":"features/slide_and_glide/#background","title":"Background:","text":"<p>Some control rooms operate on a shirt basis. During the day shift a user works at a station that contains four monitors. There are two of these desks located adjacent to each other. This matrix of four monitors has a single receiver as master. At night one operator is responsible for both stations. He must have the ability to operate slide and glide across both stations from either of the designated master receivers.</p>"},{"location":"features/slide_and_glide/#likely-behaviour-of-multiple-masters","title":"Likely Behaviour of Multiple Masters","text":"<ul> <li>In a situation where we have multiple masters it is likely that these would be concurrent.</li> </ul>"},{"location":"features/slide_and_glide/#configuration","title":"Configuration","text":"<ul> <li>Boxilla must provide a graphical utility to allow configuration of the Slide and Glide Matrix.</li> <li>The output of this tools must be communicated to each appliance in the matrix so that any individual device knows its adjacent neighbour.</li> </ul>"},{"location":"features/slide_and_glide/#the-issue-with-relative-co-ordinates","title":"The Issue with Relative Co-ordinates","text":"<ul> <li>For our receiver to detect the screen boundary we must use absolute Co-ordinates. We have no way of knowing if we are on the edge of a screen when using relative mouse movements. Also we have not way of precisely positioning the cursor of the screen edge as we make the transition using relative co-ordinates.  In order to allow the relative funtionality to continue to work in non-slide and glide environments we may to present both a relative and absolute device to the target PC to address some of the issues associated with using absolute mouse events.</li> </ul>"},{"location":"features/slide_and_glide/#dual-mouse","title":"Dual Mouse","text":"<p>The Transmitter currently presents a composite device to the target PC. This device has three components. Relative Mouse, Keyboard and Audio.  It is proposed that we develop a dual mouse capability by adding a separate absolute mouse to the component.</p> <p></p> <p>The transmitter device can select the appropriate interface to send the mouse events to. If it is operating in normal mode and receiving relative co-ordinates then it will route the mouse events to the relative interface, if, on the other hand, it is receiving absolute events it will route these to the absolute interface.</p> <p></p>"},{"location":"features/slide_and_glide/#issues-with-the-bios","title":"Issues with the BIOS","text":"<p>Many computer BIOS implementations do not support Absolute Mouse, some do not even support composite devices. This may be a limitation of the dual mouse implementation.</p>"},{"location":"features/slide_and_glide/#clarifications","title":"Clarifications","text":"<ul> <li>How do we deal with different resolutions and resolution changes? - See the section on Resolutions and Frames of Reference above.</li> <li>How will Scaling affect this feature? - Scaling should not affect this feature's basic operation as long as we present our data in the 32768 X 32768 grid we advertise to the PC. It may have an effect on the feel of the mouse depending on its impact on the aspect ratio of the screen.</li> <li>How will dual head operation work? Freedom uses a custom driver that must be installed on the target PC for dual head operation. Dual head operation can only be supported with a specialised driver on the target. We are working on the assumption that MicroSoft will address the current issues with support for absolute mouse in extended desktop environments.</li> </ul>"},{"location":"features/slide_and_glide/#open-questions","title":"Open Questions","text":"<ul> <li>Does the feature make any assumptions on the logged in user for systems in the Matrix? - TBD</li> </ul> <p>Review Comments are here</p>"},{"location":"features/ssh_disable/","title":"SSH Disable","text":""},{"location":"features/ssh_disable/#embedded-software-feature-proposal-ssh-disable","title":"Embedded Software Feature Proposal - SSH Disable","text":""},{"location":"features/ssh_disable/#introduction","title":"Introduction","text":"<p>We use SSH connection with a root user as a protocol for the RX TX inter-communication and also for some of the communication between Boxilla nd the appliances. This has been identified as a security concern.</p>"},{"location":"features/ssh_disable/#references","title":"References","text":"<ul> <li>Boxilla Communication to Appliance using SSH</li> </ul>"},{"location":"features/ssh_disable/#extract-of-an-email-from-yogishkj","title":"Extract of an email from Yogish.KJ","text":"<p>Yogish.KJ  Jan 21, 2022, 12:52 AM EST  Hi Team,</p> <p>Vulnerability Description: SSH protocol uses encryption to secure the connection between a client and a server. SSH root user is enabled in the system which exploited could lead into complete compromise of the system. Root access is not recommended for the medical devices.</p> <p>Exploitability Rational: Internal user who has access to password.</p> <p>Impact Rational: Users can use this as a back door to exploit further.</p> <p>Affected : Boxilla Receiver and Transmitter</p> <p>Recommendation : Disable root access for the system. If possible disable SSH.</p>"},{"location":"features/ssh_disable/#terms-and-definitions-used-in-blackbox","title":"Terms and Definitions used in Blackbox","text":"Term Definition Decoder See Receiver Encoder See Transmitter Municast The use of multiple individual TCP streams to share a video from a single transmitter to multiple receivers Multicast The use of an individual Multicast UDP stream to share a video from a single transmitter to multiple receivers. Blackbox uses reliable multicast so that any dropped frames are resent and no data loss occurs. Pixel Perfect Mode The original scheme used by 4K products where the entire frame of the source video was captured continuously and sent with compression to the decoder. RFX RemoteFX Codec Extension developed by Microsoft which uses a lossy image codec to encode screen images with efficient and effective compression. This is the lossy scheme used in Blackbox products. Receiver A Blackbox appliance that receives and displays a video stream. A receiver is also referred to as a client or decoder. SSH The Secure Shell Protocol (SSH) is a cryptographic network protocol for operating network services securely over an unsecured network. It is most notable applications are remote login and command-line execution. Shared Mode A generic term used in Blackbox to describe schemes that allow more than one receiver view the video source from a transmitter. See Municast and Multicast. Tile Differencing Mode A lossless scheme used to reduce bandwidth; only tiles (portions of the screen) that change are sent from encoder to decoder. Technical Debt Technical Debt is a concept in software development that reflects the implied cost of additional rework caused by choosing an easy (limited) solution now instead of using a better approach that would take longer. Transmitter A Blackbox appliance that captures and transmits a video from a source. A transmitter is also referred to as a server or encoder. Video Source A source of input for a Transmitter, normally the DVI or Display Port output of a PC. <p>Table 1 Terms and Definitions</p>"},{"location":"features/ssh_disable/#feature-description","title":"Feature Description","text":"<p>We use SSH connection with a root user as a protocol for the RX TX inter-communication and also for some of the communication between Boxilla and the appliances. This has been identified as a security concern, however, we need to retain it for debugging and testability.</p> <p>Disabling SSH on production code has implications for RX/TX settings, Boxilla communications and upgrade (SCP). These functions will need to move to an alternative communication channel like REST or MQTT. The actual impact of these changes will be addressed in the Architectural impact document.</p> <p>It is proposed that we use Boxilla to provide an SSH enable so that SSH can be turned on for debugging purposes when required. When enabled by Boxilla the SSH service should automatically disable itself after a pre-defined period of inactivity.</p> <p>SSH can also be enabled for automation and test purposes by creating an enable file in /usr/local on an appliance.</p>"},{"location":"features/ssh_disable/#use-cases","title":"Use Cases","text":""},{"location":"features/ssh_disable/#a-developer-needs-to-debug-a-system-using-ssh","title":"A Developer needs to debug a system using SSH","text":"<ul> <li>The developer can write a /usr/local/ENABLE_SSH file using a serial console or</li> <li>The developer can enable SSH through an option in the Boxilla Diagnostics Page. </li> </ul>"},{"location":"features/ssh_disable/#a-field-engineer-needs-to-debug-a-system-using-ssh","title":"A Field Engineer needs to debug a system using SSH","text":"<ul> <li>The Engineer can write a /usr/local/ENABLE_SSH file using a serial console if this is available or</li> <li>The developer can enable SSH through an option in the Boxilla Diagnostics Page (see below).</li> </ul>"},{"location":"features/ssh_disable/#questions","title":"Questions","text":"<ul> <li>One of the implications of requiring SSH to be enabled over Boxilla is that on an unmanaged system there is no easy way of enabling SSH access. We could consider a hot key sequence to enabled it for such systems.</li> </ul>"},{"location":"features/status/","title":"New Feature Definition and Architecture","text":"<p>This work aims to provide clear descriptive definitions for proposed new features. Only features on the released Roadmap are included.</p>"},{"location":"features/status/#status","title":"Status","text":""},{"location":"features/status/#january-2023","title":"January 2023","text":""},{"location":"features/status/#summary","title":"Summary","text":""},{"location":"features/status/#definition-phase","title":"Definition Phase","text":"<ul> <li>Push and Get - Feature Description Complete and released here.</li> <li>Real Time Status - Feature Description Complete and released here.</li> <li>Slide and Glide - Feature Description Complete and released here.</li> <li>4K 30 - Scoping meeting held - completed initial draft</li> <li>SSH disable - Feature Description outline created, added detail from Aidan's analysis. Scheduled meeting on MQTT.</li> <li>4K over 1 Gig - Open question on video quality. Added some detail on Video Quality Assessment to the 4K over 1 Gig feature description, but none of these are trivial so we are stalled. Added additional source from Peter.</li> <li>4K Hardware Acceleration for RDP connections - working with Micheal on specification for Kesa.</li> </ul>"},{"location":"features/status/#sdkvm","title":"SDKVM","text":"<ul> <li> <p>Overall:</p> <ul> <li>Working towards EC1 on the Jan 31st.</li> <li>Should release on the 31st, but waiting on deliveries from Square Root and Jonathan</li> </ul> </li> <li> <p>Square Root:</p> <ul> <li>Numerous issues at the moment. The main concern is performance of the OSD which is very poor.</li> <li>They are having difficulty recreating many of the problems we report.</li> </ul> </li> <li> <p>Product Management:</p> <ul> <li>John H too complete DPS and review the OSD</li> <li>Resolving impedance mismatch between Boxilla and SDKVM concepts, Connections versus Workspaces. Stats, previous connection, etc</li> </ul> </li> <li> <p>Jonathan:</p> <ul> <li>Moving the new graphics framework to the KVM and PCoIP clients. This will support connection failures messages in the tile window and other overlays.</li> </ul> </li> <li> <p>Narayana:</p> <ul> <li>Implementing a file upload method over rest, this will allow the device to become managed and also be used for system upgrade.</li> <li>Investigating capabilities end-point so that Boxilla can determine what the SDKVM can support. </li> <li>Adding a compatibility field to http://10.211.129.241:8002/architecture/REST_API/5._REST_API_GET_Endpoints/5.1_GET_Version_info/</li> <li>Implementing REST based alternatives for existing SSH based APIs to Boxilla.</li> <li>Implementing functionality for authentication of login using Boxilla and LDAP</li> </ul> </li> <li> <p>Sanjay:</p> <ul> <li>Investigating issues with discovery</li> </ul> </li> <li> <p>Johnos:   </p> <ul> <li>Bi-weekly Meetings with Square Root to discuss areas to focus on from 1.0.0 specification.</li> <li>Bi-weekly Meetings with Narayan and Sanjay.</li> <li>Bi-weekly Meetings with Jonathan.</li> <li>Continuous integration of changes from others</li> <li>Implemented feedback mechanism from clients to OSD. - RDP connection not working</li> <li>Resolving issues with Openbox behaviours like setting keyboard, network, default user login.</li> <li>Resolved multiple issues with discovery code on SDKVM</li> <li>Hot key mappings are broken with the introduction of multi-user support</li> <li>Investigating video tearing and performance</li> </ul> </li> </ul>"},{"location":"features/status/#opal","title":"OPAL","text":"<ul> <li>Continuing to document the architecture as the product emerges.</li> <li>Clarifying constraints and limitations observed in testing.</li> <li>J Hickey and Tom will revisit product feasibility after IBC.</li> </ul>"},{"location":"features/status/#architectural-phase","title":"Architectural Phase","text":"<ul> <li>Push and Get - Architectural Impact Study in progress. Need to understand architectural changes resulting from Enhanced OSD changes to make further progress.</li> <li>Real Time Status - Not started</li> <li>Slide and Glide - Not started</li> </ul>"},{"location":"features/status/#design-phase","title":"Design Phase","text":"<ul> <li>Push and Get - Not started</li> <li>Real Time Status - Not started</li> <li>Slide and Glide - Not started</li> </ul>"},{"location":"features/status/#notes-from-roadmap-meeting","title":"Notes from Roadmap Meeting","text":"<p>Emerald VUE - OEM Multi-viewer IHSE DP Transmitter - Launch, no samples for now</p> <p>IBC - 2nd Week of September</p> <p>Settings Per User Stations - Timeouts, Hotkeys</p> <p>Navair port to trunk</p> <p>Boxilla in the cloud</p> <p>Bandwidth Control - how do we set the maximum bandwidth?</p> <p>2K Multicast over reliable UDP - Danish radio, multiple shares and they want multiple lossless connections.</p>"},{"location":"features/summary/","title":"Emerald Features Planning","text":""},{"location":"features/summary/#planning","title":"Planning","text":"<p>A proposed roadmap of features can be found at: Roadmap</p>"},{"location":"features/summary/#document-templates","title":"Document Templates","text":"<p>Feature Proposal Template</p>"},{"location":"features/toolchain_upgrade/","title":"Toolchain Upgrade","text":""},{"location":"features/toolchain_upgrade/#emerald-appliance-toolchain-and-buildroot-migration","title":"Emerald Appliance Toolchain and Buildroot Migration","text":""},{"location":"features/toolchain_upgrade/#introduction","title":"Introduction","text":"<p>The existing appliance build system relies on outdated components, which has caused problems when seeking support from Xilinx. Xilinx only offers support for the current releasesof their SDK. Additionally, the current version of Buildroot being used is based on an extremely old version, leading to outdated core external packages.</p> <p>Furthermore, there is currently no vulnerability scanning or reporting conducted during our build processes. As part of this release, we plan to address this issue by thoroughly investigating and implementing vulnerability scanning and reporting as an integral part of our build processes.</p>"},{"location":"features/toolchain_upgrade/#references","title":"References","text":"<ul> <li>Link to latest Buildroot downloads</li> <li>Link to Buildroot github</li> <li>Link to Xilinx Vitis Downloads</li> <li>Link to Xilinx Linux github</li> <li>Security vulnerability tracking tools in Buildroot, Thomas Petazzoni (YouTube)</li> </ul>"},{"location":"features/toolchain_upgrade/#terms-and-definitions-used-in-blackbox","title":"Terms and Definitions used in Blackbox","text":"Term Definition SBOM Software Bill of Materials SDK Software Development Kit <p>Table 1 Terms and Definitions</p>"},{"location":"features/toolchain_upgrade/#feature-description","title":"Feature Description","text":"<p>The below table lists the current version and proposed versions of the buildsystem tools.</p> Tool Current Version Proposed Version Buildroot 2017.02.04 2023.02 Xilinx SDK MPS0C 2017.4 2023.01 Xilinx SDK ZYNQ 2018.1 2023.02 <p>Table 2 Current and Proposed Versions</p>"},{"location":"features/toolchain_upgrade/#buildroot-update","title":"Buildroot Update","text":"<p>The current version of Buildroot used is 2017.02.04 with some packages having been manually updated. The proposal is to move to the current LTS release 2023.02.2. </p>"},{"location":"features/toolchain_upgrade/#toolchain","title":"Toolchain","text":"<p>As part of moving to this version of buildroot we will migrate the toolchain from the Xilinx supplied version to the buildroot provided toolchain, we will however map the GNU toolchain values to match the Xilinx toolchain versions. See the table below for the current GNU toolchain versions taken from Vitis 2023.1 Release Notes </p> Component Version binutils 2.39 gcc 12.2.0 glibc 2.34 <p>Using the internal buildroot toolchain will allow deployment of Dev Virtual Machines without having to also provide a Xilinx Vitis installation. </p>"},{"location":"features/toolchain_upgrade/#source-code-control","title":"Source Code Control","text":"<p>The Buildroot source code is hosted in a publicly accessible repository on GitHub. As part of this project, a private fork of the public Buildroot repository will be created to develop the blackbox internal version of Buildroot. By migrating the internal Buildroot from SVN to Git, we can streamline the process of updating it to incorporate security patches and new long-term support (LTS) releases more effectively.</p>"},{"location":"features/toolchain_upgrade/#br2_external","title":"BR2_EXTERNAL","text":"<p>As part of the migration process, all Blackbox specific packages and scripts will be eliminated from the Buildroot file tree. Instead, they shall be included using BR2_EXTERNAL. This allows easier migration to newer versions of buildroot as needed. It also allows developers to share a single configuration between multiple buildroot instances.   </p>"},{"location":"features/toolchain_upgrade/#xilinx-sdk-update","title":"Xilinx SDK update","text":"<p>For zynq-7000 based devices the 2018.1 SDK is used and 2017.4 is used for MPSoC devices. The proposal is to move to Xilinx Vitis 2023.1. This change will be significant as Xilinx obsoleted the previous SDK software in 2019.1 and moved to a new platform Vitis for new releases. </p>"},{"location":"features/toolchain_upgrade/#linux-kernel-update","title":"Linux Kernel Update","text":"<p>Currently the baseline version of the Linux kernel used is from Xilinx tag xilinx-v2018.3 which uses v4.9 of the linux kernel. The current proposal is to move to either Xilinx tag xilinx-v2022.2 (v5.15) or xilinx-v2023.1 (v6.1), kernel 6.1 has some significant changes so some investigation will need to be performed to see the effort needed to update to it.</p>"},{"location":"features/toolchain_upgrade/#source-code-control_1","title":"Source Code Control","text":"<p>To simplify the process of incorporating updates from Xilinx, the Blackbox internal version of the Xilinx Kernel will be developed as a private fork of the Xilinx repository, which is stored on GitHub. This approach will streamline the task of integrating updates into our internal version, making it easier to stay up-to-date with the latest changes provided by Xilinx.</p>"},{"location":"features/toolchain_upgrade/#vulnerability-detections-using-sbom","title":"Vulnerability Detections using SBOM","text":"<p>A \u201csoftware bill of materials\u201d (SBOM) has emerged as a key building block in software security and software supply chain risk management. As security becomes more of a focus for our customers we must begin to gather SBOM data for each build and check these against a database of known issues. This will allow the mitigation of new vulnerabilities as they are found in a proactive manner. This release shall investigate what systems are available for creating and tracking this information.</p>"},{"location":"features/4KOver1Gig/4Kover1Gig/","title":"Embedded Software Feature Proposal - 4K Over 1 Gig","text":""},{"location":"features/4KOver1Gig/4Kover1Gig/#introduction","title":"Introduction","text":""},{"location":"features/4KOver1Gig/4Kover1Gig/#references","title":"References","text":"<ul> <li>Xilinx Documentation for 1G/10G/25G Switching Ethernet Subsystem v2.0</li> <li>Tico's Lightweight Low Latency Codec</li> <li>IntoPIX - Blackbox - Tico</li> <li>Video Quality Assesment</li> <li>Subjective Assesment Of Video Quality</li> <li>Nextera Video-Scaling with text</li> </ul>"},{"location":"features/4KOver1Gig/4Kover1Gig/#tools-for-subjective-video-quality-assesment","title":"Tools for Subjective Video Quality Assesment","text":"<ul> <li>arcvqwin</li> <li>List of Available Tools</li> </ul>"},{"location":"features/4KOver1Gig/4Kover1Gig/#terms-and-definitions-used-in-blackbox","title":"Terms and Definitions used in Blackbox","text":"Term Definition Decoder See Receiver Encoder See Transmitter JPEF XS \u201cJPEG XS is a new compression algorithm with very low latency and very low complexity. By offering various degrees of parallelism, JPEG XS can be efficiently implemented on various platforms such as FPGAs, ASICs, CPUs and GPUs and excels with high multi-generation robustness. Municast The use of multiple individual TCP streams to share a video from a single transmitter to multiple receivers Multicast The use of an individual Multicast UDP stream to share a video from a single transmitter to multiple receivers. Blackbox uses reliable multicast so that any dropped frames are resent and no data loss occurs. Pixel Perfect Mode The original scheme used by 4K products where the entire frame of the source video was captured continuously and sent with compression to the decoder. RFX RemoteFX Codec Extension developed by Microsoft which uses a lossy image codec to encode screen images with efficient and effective compression. This is the lossy scheme used in Blackbox products. Receiver A Blackbox appliance that receives and displays a video stream. A receiver is also referred to as a client or decoder. SSH The Secure Shell Protocol (SSH) is a cryptographic network protocol for operating network services securely over an unsecured network. It is most notable applications are remote login and command-line execution. Shared Mode A generic term used in Blackbox to describe schemes that allow more than one receiver view the video source from a transmitter. See Municast and Multicast. Tile Differencing Mode A lossless scheme used to reduce bandwidth; only tiles (portions of the screen) that change are sent from encoder to decoder. Technical Debt Technical Debt is a concept in software development that reflects the implied cost of additional rework caused by choosing an easy (limited) solution now instead of using a better approach that would take longer. Transmitter A Blackbox appliance that captures and transmits a video from a source. A transmitter is also referred to as a server or encoder. Video Source A source of input for a Transmitter, normally the DVI or Display Port output of a PC. <p>Table 1 Terms and Definitions</p>"},{"location":"features/4KOver1Gig/4Kover1Gig/#feature-description","title":"Feature Description","text":"<p>This feature will provide the ability to connect to 4K systems over a 1 Gig network connection. The provision of 10G network infrastructure is very expensive and many customers are restricted to 1 Gigabyte switches. These customers may not require the Pixel Perfect (Lossless) experience, but may still want to future proof by investing in 4K technology.</p> <p>The Interoperability feature allowed us to provide an optimised (lower bandwidth option) for for 4K to 4K connections and for 2K to 4K connections. In the case of 4K to 2K this included scaling so that the 4K image is scaled to a lower resolution before compression and then scaled back up on the receiver (depending on its capability).</p> <p>The 4K over 1 Gig feature should allow the KVM administrator to specify (on a per port basis) the speed of the interface. Ideally the 4k Tx should \u201cdetect\u201d and configure network speed based interrogation of any connected SFPs, but a static port configuration would also be appropriate if the automatic detection was not feasible.</p>"},{"location":"features/4KOver1Gig/4Kover1Gig/#prerequisite-feature-development","title":"Prerequisite Feature Development","text":"<p>In order to support development of this feature we would need to do the following:</p> <ul> <li>We would need to move to the latest Xilinx Tool Chain 2021.2</li> <li>This would require migration of the FPGA and Software Tool Chains.</li> <li>We would need to move our host development VMs to Ubuntu 20.04.</li> <li>We would use this opportunity to move to the latest versions of FSBL,buildroot and uboot to avail of critical fixes and security patches.</li> <li>We would need to integrate the new Vitas tool chain into our current build system.</li> </ul>"},{"location":"features/4KOver1Gig/4Kover1Gig/#risks","title":"Risks","text":"<ul> <li>DWC3 driver would need to move to the latest version and we have a considerable amount of back porting and some customization in this driver.</li> <li>We had a lot of previous issues with the Clock base for 10G and many issues with system reset associated with this IP. While we will be dealing with a new IP block, this was problematic in the past because of issues with the routing of the clocking through the FPGA. This could take a significant amount of time to stabilise.</li> </ul>"},{"location":"features/4KOver1Gig/4Kover1Gig/#options-for-video-optimisation","title":"Options for Video Optimisation","text":"<ul> <li>Scale down 4K and use YUV compression and scale up again at the RX.</li> <li>Is this suitable for the more general market case?</li> <li>Is the quality level going to be an issue?</li> <li>Drop the frame rate on lossless. This would be limited to around 4 or 5 FPS and so would only be suitable for use cases with a largely static screen or minimal user interaction.</li> <li>Source a commercial IP like Tico's Lightweight Low Latency Codec (see table below). This would eliminate the need for scaling and should deliver reasonable quality.</li> </ul> <p>Up scaling from Any Resolution to Any resolution may be problematic. Current scaler is inline so clocks must match perfectly. This would require a new scaling scheme if want to do anything to anything.</p>"},{"location":"features/4KOver1Gig/4Kover1Gig/#tico-compression","title":"Tico Compression","text":"Formats Bitrates (1bpp to 3bpp) HD 720p60 HD 1080i60 70 Mbps - 195 Mbps HD 1080p60 150 Mbps - 390 Mbps 4K 2160p60 500 Mbps - 1,4 Gbps 8K 4320p60 2 Gbps - 5,6 Gbps"},{"location":"features/4KOver1Gig/4Kover1Gig/#most-feasible-approach-for-short-term","title":"Most Feasible Approach for Short Term","text":"<ul> <li>Pre-provisoned network ports where the appliance boots up with that configuration.</li> <li>Use the existing scaling scheme.</li> </ul>"},{"location":"features/4KOver1Gig/4Kover1Gig/#other-notes","title":"Other Notes","text":""},{"location":"features/4KOver1Gig/4Kover1Gig/#fpga-team-potential-impact","title":"FPGA Team: Potential Impact","text":"<ul> <li>Unit testing</li> <li>Bring up and debug of the new IP</li> <li>Would require a new scaler implementation if we are to support Any to Any resolutions.</li> <li>Integration of commercial IP if we choce a commercial encoder.</li> <li>Network interface may require new work from Crevin with changes in how we integrate into the internal MAC. Some of this work may be already done, but we still would require further integration and testing.</li> </ul>"},{"location":"features/4KOver1Gig/4Kover1Gig/#software-team-potential-impact","title":"Software Team: Potential Impact","text":"<ul> <li>Estimated time scales 6 months for Tools migration</li> <li>Estimated 3 months for software implementation, but this depends on clarification of marketing requirements.</li> </ul>"},{"location":"features/4KOver1Gig/4Kover1Gig/#technical-questions-for-marketing-and-product-management","title":"Technical Questions For Marketing and Product Management","text":"<p>Technical Questions</p> <ul> <li>Can we detect network speed and capability from the SFP? Response: You got to tell me this! I would prefer if we could but from reading we cannot offer this with all SFP\u2019s.</li> <li>We can read the SFP modules, but there is no standardised way of doing this so any scheme based on this may only work for selected SFP modules. Response: I think its fine to make this configurable as it typically will very rarely change and can be part of the install.</li> <li>Is it possible to operate the ports in two different configurations, one at 10 G and the other at 1G? Response: Yes that should/needs to be possible.</li> <li>Marketing need to clarify if this needs to be dynamic or pre-provisioned? Response: Pre-provisioned will be fine \u2013 I assume we can attempt auto, if it doesn\u2019t work we can configure it.</li> <li>It would be useful to understand what the use case is for this requirement, and how it might impact redundancy. Response: The use case is that many of our users don\u2019t need 40K pixel perfect and the cost of a 10G network is simply too high. One of the best use cases I can give you is one where our customer has a 10G link between two locations, they want to have a number of 4K connection sharing this 10G fiber link \u2013 Today they can only use one \u2013 The link is 10K long so very expensive, they have tested our \u201cdownscaled\u201d 4K and were happy with it. I asked Tom to clarify this further as the questions was specifically: What is the use case where a customer might want one port of a 4K to be 1 Gig and the second port to be 10 Gig? : Response: This would be somewhat of an edge case. I would see it where the customer sets up the primary as a 10G network but to reduce cost the second/backup is 1G to reduce cost. I stress this that don\u2019t have real customers waiting and asking for this this but it\u2019s a way we would present it to the customer/sales. Peter responded: I don\u2019t know if the current FPGA implementation allows us to mix and what issue it would cause at the ToE level. It wasn\u2019t considered before.</li> <li>1G and 10G operation might require two different base clocks forcing a reboot after configuration. Is this acceptable? Response: Yes. The connection won\u2019t change often.</li> <li>Is auto negotiation a requirement on network links that support it (Copper). This will not be possible on fiber. Response: Okay as above.</li> <li>Is this feature an option on the existing Emerald range or a new product variant? Response: This is for the 4K which exists today.</li> <li>Do we need to support Any to Any resolutions if we use the scaling approach? Response: Same resolutions we are already working on.</li> </ul> <p>Open question is on video quality. Are we going with what we did at Skyguide?  They seemed happy with it.  Or do we do what Adder are doing, I,e, lossless but low frame rate.</p> <p>PRB 04/05/2022 : J Hickey stated that current Xilinx offering is not acceptable</p>"},{"location":"features/4KOver1Gig/4Kover1Gig/#to-do","title":"To Do","text":"<ul> <li>Research criteria for assessing - we need this before Tom and John can specify an acceptable quality level</li> <li>Xilinx current offering is not acceptable</li> </ul>"},{"location":"features/opal/opal/","title":"EMD3000GE (Opal)","text":""},{"location":"features/opal/opal/#references","title":"References","text":"<ul> <li>MRD</li> <li>DPS</li> <li>White Paper</li> <li>Teradici Emails</li> </ul>"},{"location":"features/opal/opal/#pcoip-references","title":"PCoIP References","text":"<ul> <li>Guide to Ultra</li> </ul>"},{"location":"features/opal/opal/#appliance-side-issues","title":"Appliance Side Issues","text":""},{"location":"features/opal/opal/#stability-issues","title":"Stability Issues","text":"<p>Opal: Connections: 2K RX lost connection during overnight GFX soak</p> <p>https://bboxjira.atlassian.net/browse/BUG-4392</p>"},{"location":"features/opal/opal/#video-issues","title":"Video Issues","text":"<p>Some of the major bugs affecting the EMD3000GE experience: 6.3.10: Connections: VM tearing despite no dropped frames https://bboxjira.atlassian.net/browse/BUG-4243?oldIssueView=true</p> <p>There is a general issue that the 4K RX struggles badly at decoding full screen video (1920 x 1080), significantly when compared to the 2K RXs and this is reflected in these two bugs:</p> <p>Opal: Connections: distinct video (1 - 2 seconds) desync in Opal connection between 2K and 4K RX clients (results in major video impact for 2K): https://bboxjira.atlassian.net/browse/BUG-4232</p> <p>Opal: Connections: Mouse cursor updates are laggy / stuttering on 4K RXs in the shared connection with moderate video activity: https://bboxjira.atlassian.net/browse/BUG-4238</p> <p>The Opal box determines its connecting resolution by the client RDP connection to it, in this case the Emerald RX thus one can't actually do 4K@60 PCOIP via the Opal Box because the EMD RXs are capped at 1920 x 1080 or even 4K@30 (more the PCOIP Graphics agent then the PCOIP Ultra agent here) well capped as in, no user option to go higher res though that doesn't necessarily mean its not possible?</p> <p>Currently we do not support 4K VM connections</p>"},{"location":"features/opal/opal/#audio-issues","title":"Audio Issues","text":"<p>Significant audio delay / lag occurring in PCoIP Ultra connection due to the appliance's inability to process the audio data when simultaneously processing video.</p> <ul> <li>https://bboxjira.atlassian.net/browse/BUG-4369?filter=10710</li> </ul> <p>RDP audio doesn't function in stereo mode (only one of two channels outputs)</p> <ul> <li>https://bboxjira.atlassian.net/browse/BUG-4364?filter=10710</li> </ul>"},{"location":"features/opal/opal/#mouse-and-keyboard-issues","title":"Mouse and Keyboard Issues","text":"<p>Mouse cursor updates are laggy / stuttering on 4K RXs in the shared connection with moderate video activity</p> <p>https://bboxjira.atlassian.net/browse/BUG-4238?filter=10710</p> <p>Connections: lack of consistent mouse experience in a mixed 4K and 2K appliance environment</p> <p>https://bboxjira.atlassian.net/browse/BUG-4240?filter=10710</p>"},{"location":"features/opal/opal/#pcoip-issues","title":"PCoIP Issues","text":"<ul> <li>The PCoIP SDK does not provide any means of capturing audio data. It provides a mechanism for Video by returning the decoded video data in a buffer passed to the SDK by the calling client software. No similar mechanism exists for audio. </li> <li>The documentation for the PCoIP Library states the following:<ul> <li>The core library allows an application developer to integrate a PCoIP session directly into an application. The core library facilitates connection to a remote host, decoding PCoIP image data directly into an application supplied frame buffer as well as remoting audio, keyboard and mouse events and supported USB devices. The application is responsible for all of the interactions with the window manager and the local operating system. The following diagram shows how an application would integrate the core library and broker library into a custom application</li> </ul> </li> <li>It is not clear what \"as well as remoting audio\" means in this circumstance.</li> </ul>"},{"location":"features/opal/opal/#opal-feasibility","title":"Opal Feasibility","text":"<p>When making a 2K connection from a 4K device Opal connection is noticeably slower (less fluid, more jumping) when compared to the 4K directly connecting to the VM</p> <p>https://bboxjira.atlassian.net/browse/BUG-4233?filter=10710</p> <p>I think this is to be expected.</p> <p>Connections: distinct video (1 - 2 seconds) desync in Opal connection between 2K and 4K RX clients (results in major video impact for 2K)</p> <p>https://bboxjira.atlassian.net/browse/BUG-4232?filter=10710</p> <p>I think this is to due to our limited ability on 4K to process frames in Software</p>"},{"location":"features/opal/opal/#limitations-of-the-sdk","title":"Limitations of the SDK","text":""},{"location":"features/opal/opal/#sdk-is-not-re-entrant","title":"SDK is not re-entrant","text":"<p>From Teradici</p> <p>The libraries are not reentrant and cannot be used to create multiple connections from the same process. It is possible to launch separate processes each which create a separate PCoIP connection to different remote desktops.</p> <p>Understand that in general this configuration is not tested and there may be issues that we are not aware of. Depending on the severity we may not be able to address issues that require significant development.</p> <p>One problem that I believe we may encounter has to do with performance. The protocol estimates the capacity of the client to decode frames and attempts to use the maximum resources to provide the best user experience. If you have 16 instances of the client running, I would expect this algorithm not to function correctly at all and performance of the client may be unpredictable at best. Certainly there has been no testing in development to understand the impact of running multiple instances in any sort of a performance environment.</p>"},{"location":"features/opal/opal/#audio-is-not-supported-in-the-sdk","title":"Audio is not supported in the SDK","text":"<p>From Teradici</p> <p>\u201cThis would be a massive effort\u201d </p>"},{"location":"features/opal/opal/#when-to-use-ultra","title":"When to Use Ultra","text":"<p>PCoIP Ultra is apporpriate for users with the following requirements:</p> <p>Auto Offload: Achieves the best balance between color accuracy and network efficiency. This setting is appropriate for work-from-home or WAN content creators who require optimized delivery of high resolution content, including video playback, while still achieving build-to-lossless color accuracy.</p> <p>CPU Offload: Provides efficient scaling across multicore CPUs, leveraging AVX2 instruction sets. Appropriate for users that require CPU-optimized delivery of 4K UHD, high-framerate video playback and build-to-lossless color accuracy. It is also useful when GPU encoding resources must be reserved for video encoding applications, typically in LAN environments.</p> <p>GPU Offload: PCoIP encoding is always offloaded to a GPU. Appropriate for users who demand the highest possible CPU efficiency. The Opal SDK cannot support GPU offloading, this in itself may not be an issue (see Teradici comment below), but it means we cannot support full Ultra. This would be observable by someone inspecting the server side of the connection.</p> <p>For all other scenarios, Teradici recommends that you leave PCoIP Ultra disabled.</p> <p>Teradici Reference for this</p>"},{"location":"features/opal/opal/#summary-of-opal-review","title":"Summary of Opal Review","text":"<ul> <li>It would be good to know the approximate FPS of the processing on a PCoIP connection if we were simply throwing away the frames and not sending them to the RX clients. This would give us an indication of the throughput capability on the OPAL side of a PCoip connection. - Jonathan</li> <li>We have previously observed a video sync issue between 2K clients sharing a VM connection. This was not observable in the review, but we need to investigate if it reoccurs because the maximum delay should be in the sub 100 millisecond range. - Alex to try to reproduce.</li> <li>There is some constant logging in sylog occurring in an Opal connection which needs to be removed on the appliance side. - johnos</li> <li>The Mouse on a 2K shared client does not follow the other clients because the appliance has not implemented the necessary methods \u2013 Requires implementation - johnos/Prasad</li> <li>We should order a modern Thin Client for comparative analysis - Tom</li> <li>There is an observable tearing on the appliance output. This is as a result of the fact that we are updating the buffer we render into. We are unable to address this and this will be a feature of initial releases.</li> <li>We should drop the option of an RFX connection from Opal to an RDP server as GFX is the default for all new RDP server configurations. - Tom/ Prasad</li> <li>There is continuing client instability. These are covered in the section above. </li> <li>We agreed that we cannot support the full Ultra Specification because the PCoIP SDK does not support GPU acceleration. The DPS and product spec should be changed to reflect this. - Tom/ Prasad.</li> <li>Summary of Key Issues</li> <li>4K performance is not acceptable with the current appliance performance.</li> <li>Audio performance has considerable lag.</li> <li>If 4K and 2K are used together then 2K will degrade to the same level as 4K, and is effectively unusable.</li> <li>Action: Product Marketing to decide if 4K should be excluded from the initial product offering - Tom</li> <li>Action: Tom to decide if the initial product offering can ship </li> <li>Other Issues</li> <li>RDP Sharing is a Microsoft feature - this fact may affect the product feasibility. - Tom/JohnH</li> </ul>"},{"location":"features/opal/opal/#appendix-a","title":"Appendix A","text":""},{"location":"features/opal/opal/#windows-already-supports-rdp-sharing-though-a-licensing-scheme-circumventing-this-may-be-regarded-as-circumventing-the-microsoft-terms-of-use","title":"Windows already supports RDP sharing though a licensing scheme. Circumventing this may be regarded as circumventing the Microsoft terms of use.","text":"<ul> <li>RDP Sharing</li> <li>Multiple Users on Windows 10 Remote Desktop</li> <li>RDP Licensing Requirements for Multiple Users</li> <li>Deploy your Remote Desktop environment - License Requirements</li> <li></li> </ul>"},{"location":"features/opal/opal/#terms-and-conditions-for-use-of-rdp","title":"Terms and Conditions for use of RDP","text":"<p>Installation and Use Rights.</p> <p>a. License. The software is licensed, not sold. Under this agreement, we grant you the right to install and run one instance of the software on your device (the licensed device), for use by one person at a time, so long as you comply with all the terms of this agreement. Updating or upgrading from non-genuine software with software from Microsoft or authorized sources does not make your original version or the updated/upgraded version genuine, and in that situation, you do not have a license to use the software.</p> <p>b. Device. In this agreement, \u201cdevice\u201d means a hardware system (whether physical or virtual) with an internal storage device capable of running the software. A hardware partition or blade is considered to be a device.</p> <p>c. Restrictions. The manufacturer or installer and Microsoft reserve all rights (such as rights under intellectual property laws) not expressly granted in this agreement. For example, this license does not give you any right to, and you may not:</p> <p>(i) use or virtualize features of the software separately;</p> <p>(ii) publish, copy (other than the permitted backup copy), rent, lease, or lend the software;</p> <p>(iii) transfer the software (except as permitted by this agreement);</p> <p>(iv) work around any technical restrictions or limitations in the software;</p> <p>(v) use the software as server software, for commercial hosting, make the software available for simultaneous use by multiple users over a network, install the software on a server and allow users to access it remotely, or install the software on a device for use only by remote users;</p> <p>(vi) reverse engineer, decompile, or disassemble the software, or attempt to do so, except and only to the extent that the foregoing restriction is permitted by applicable law or by licensing terms governing the use of open-source components that may be included with the software; and</p> <p>(vii) when using Internet-based features you may not use those features in any way that could interfere with anyone else\u2019s use of them, or to try to gain access to or use any service, data, account, or network, in an unauthorized manner.</p>"},{"location":"features/sdkvm/comments_and_feedback/","title":"Open Questions","text":"<ul> <li>Do we need a speaker in the product, e.g. similar to medical alerts?</li> </ul>"},{"location":"features/sdkvm/comments_and_feedback/#feedback","title":"Feedback","text":""},{"location":"features/sdkvm/comments_and_feedback/#from-alex","title":"From Alex","text":"<p>Always appreciated that it\u2019s in simple layman\u2019s terms.</p> <p>First round of feedback. My intention is to do multiple passes as time allows.</p>"},{"location":"features/sdkvm/comments_and_feedback/#sources","title":"Sources","text":"<p>(1) By KVM transmitters I assume these are connections to Emerald TXs i.e. other KVM transmitters which BlackBox OEM e.g. DKM are not within scope. - Yes, clarified in the text. Will be using the existing RDP client that the RX uses or potentially considering other ones i.e. our existing scope of RX \u2013 TX / VM is based on a client version which hasn\u2019t changed in years (open to correction here)? For example to meet the \u201cStandalone machines with RDP based remote connectivity enabled\u201d with best compatibility and performance. -  No, we will use the latest RDP client from the FreeRDP Project </p> <p>(2) At some point it would be good to break down the sources into a \u201cRequired\u201d and \u201cOptional\u201d targets as it may affect the specs of the hardware platform e.g. for PCoIP Ultra the client requires support for AVX2 (not really an issue for most modern Intel CPUs but definitely a good idea to double check tech requirements before specing the long term platform).  Good suggestion - will add specific section to specify the technical requirements </p>"},{"location":"features/sdkvm/comments_and_feedback/#configuration","title":"Configuration","text":"<p>(1) Switch keyboard and mouse focus to the active application Taking inspiration from our previous discussion on G&amp;S will we have a border marking of some kind to show which connection window has the keyboard and mouse?   Good suggestion - will add specific requirement to presentation and control section </p> <p>(2) Configure audio and visual alarms based on events from connected sources By events will we need some third party framework to be installed on the sources which we\u2019ll interface with (does such a thing exists?) or is there an abstract solution which doesn\u2019t require additional configuration on the source?  I think these will need to be defined, but I am provisioning the mechanism here to alert the user to these events. We will need to explore what these events are likely to be and how we would propagate them from the source. </p> <p>Presentation and Control: (1) Will the activation point integrate a labels feature e.g. toggle label off and on, labels been a quality of life feature when managing multiple concurrent connections?  Good suggestion - will add specific requirement to configuration and presentation sections </p> <p>Sharing: (1) Will this include a clipboard like feature so you can copy and paste stuff (as a basic example text) between different connections e.g. something you can do with VMWare and MSTSC. (2) In shared sessions do you mean local and remote or the context is just remote sharing?  Needs some more research Alex in terms of what can be supported. It depends on the source obviously, some may be straightforward, others may be less so </p> <p>Boxilla: (1) Will it fully integrate into the existing discovery and management functions i.e. when managed it becomes part of the Boxilla domain. For example our EMD appliances do this but the EMD100 (ICRON) while been able to be discovered and managed aren\u2019t \u201clocked\u201d into that Boxilla domain.  My expectation is that it will fully integrate with Boxilla, but it is worth clarifying if that is something we want so that only managed devices in the same domain can be connected to. I will add a note to the Boxilla section</p> <p>CPU and Memory: (1) Probably will require profiling but with the specified memory capacity aren\u2019t you abstractly estimating an average memory requirement per connection?  I think we are approaching this from a price point. So we have a price point and the hardware follows this with CPU and Memory having to fall within the price range</p> <p>Networking Interfaces: (1) Have you considered fibre and perhaps 10 Gig to future proof? We know from lab testing that high quality connections with low compression can exceed the capacity of a 1 Gig pipe even before you add in other network traffic and overheads when you have multiple concurrent connections active. (2) (1) Leads to this but if we\u2019re to support lossless connections of any kind \u2013maybe not immediately but at some point in the future (also not just to our 4K TXs) a 10 Gig connection would probably be recommended?  In reality there will be a number of different form variants with different interfaces and different networking options</p>"},{"location":"features/sdkvm/comments_and_feedback/#from-peter-shelley","title":"From Peter Shelley","text":"<ol> <li>Can you elaborate on visual and audio alerts?  These are features of competing products. I added some examples, but we probably need to understand customer requirements with respect to these alarms. John H also mentioned this. a. Where do they come from, external or generated internally by some analysis software?  Both potentially b. Do we need a speaker in the product, e.g. similar to medical alerts?  Good question. I will clarify with product marketing c. Do we need to integrate with some IOT system, e.g. intrusion, environmental alerts?  I see nothing preventing us from doing this, but it is not part of the initial scope</li> <li>Do we need to mix audio?  We may, I will call this out specifically</li> <li>What audio quality do we need to support (or will it always be USB)? Is AC97 good enough?  John H suggested that AC97 is sufficient</li> <li>Seems to me that push and get might be a good adjacent feature here.  Yes, it is noted in the sharing section</li> <li>Hardware a. This is a desk unit. Is there a particular reason for 1U restriction?   I have clarified the requirement here: It should fit in a 1U bay, but would normally occupy just half of that space b. I think you need 4 video ports?  I believe the requirement is that the product can operate with a variable number of video ports, but that the preferred configuration would be four Displays each capable of 4K60.</li> <li>Consider if the monitors are touch screens. Does that have any implications?  I do not believe this will have any impact on the core functionality.</li> <li>Can or do we want to cascade multiple SDKVM? Need slide and glide.  Good question. I suspect its beyond the scope of the initial product</li> <li>Consider integration of comms application, e.g. zoom, webex, etc.   Yes, Tom mentioned these; I will add them</li> </ol> <p>From Tom Fitzgerald</p> <p>Comments \u2013 Hardware \u2013 Should support a minimum of 4 Displays each capable of 4K60.  \u2013 You say this on your video section anyway but just to be 100% clear.    Emphasised this in the text Performance \u2013 I think we need to ensure we have clear expectations on the performance side. I can only add that we need to be better than deskwall (Gesab) as I hear many complaints about their performance. OPSpace I honestly don\u2019t know and have not seen in use.  I guess we need to quantify a total max pixel and frame rate and be able to understand what level of performance a user will get based on setup \u2013 Needs to explainable to a Technical user so a user has the correct expectations. span style=\"color:green\"&gt; We have some preliminary data of the rate of screen updates. We could try and get a more definitive frames per second type measurement. Locking down the OS \u2013 Just need to be sure we have a system in place to allow apps like Webex, Zoom and others we may over time qualify. Added this and added a note regarding the maintenance challenges for these applications First Offering of the SDKVM \u2013 \u201cThe first offering could simply be a Quad KVM Multiviewer\u201d. \u2013 Need to Clarify this \u2013 i.e on only one video head/out can be used on first release or a max of 4 connections? I guess you mean 4 connections per video head?  Requested clarification Local Management \u2013 GUI Based on OSD functionality but I stress we must really modernize the look and feel of the OSD I will add a note for the requirement for a modern looking OSD</p> <p>USBr \u2013 Can this be supported with SDKVM?</p> <ul> <li>Assume typical use case of a Card reader</li> <li>All typical usbr devices that are used today may still be required.</li> <li>Longer term think that Card reader opens up the sessions on the SDKVM and logs the user onto each one of the connections if Login/authentication is required I will add this as a use case</li> </ul>"},{"location":"features/sdkvm/comments_and_feedback/#to-do","title":"To DO","text":"<ul> <li>Windows 11 Quarter positioning</li> <li>Exisitng SDKVM 5.2 TX</li> <li>Tried Mono but requires work, Mono going end of life, compiles natively</li> <li>Porting work for linux, sockets code related to TOE</li> </ul>"},{"location":"features/sdkvm/comments_and_feedback/#request-for-review-recommendations","title":"Request For Review, recommendations","text":"<p>\u200bHi Tom,</p> <p>I think it would be good to have a meeting on the SDKVM. The feature description provides an overview of the product and offers some analysis of the comparative advantages of hosting the product on Linux versus Windows including performance implications. We should probably discuss these details and agree on a product format so that we can proceed to look at platform specific architectures. Can you talk with John and set up a date to review this? In the mean time I am going to look at the PCoIP client on each platform. My view at this point is that we should use Linux for the development because managing the lockdown of the image and security will be more manageable, and based on analysis there is no performance difference between the platforms.  We can also leverage our experience with locking down Boxilla and patching it on a Linux base.</p> <p>regards John</p>"},{"location":"features/sdkvm/leostream/","title":"Leostream Components","text":""},{"location":"features/sdkvm/leostream/#leostream-gateway","title":"Leostream Gateway","text":"<p>The Leostream Gateway provides remote access to Leostream environments without the need for a VPN solution. The gate way allows the following scenarios work securely: \u2022 It ssupports Work-from-home initiatives that connect home-based users to on-premises resources \u2022 It allows end-users to leverage personal client devices, including Chromebooks, with inbrowser connections to corporate resources \u2022 It can support a cloud or hybrid environment by leveraging the Leostream Gateway to connect anyone to cloud-based machines hosted in a private network \u2022 It can provide a remote access to high-power workstations with a Teradici Remote Workstation Card.</p>"},{"location":"features/sdkvm/leostream/#leostream-broker","title":"LeoStream Broker","text":"<p>The Leostream Connection Broker allows IT to pool, assign, and manage all PCoIP devices in their organization from a single interface.</p> <p>The Leostream Connection Broker helps you automate the lifecycle of your solution - including provisioning and deleting desktops and applications - and provides access management for your solutions, so end users have a seamless login to the correct resources.</p> <p>Teradici Cloud Access Software includes a hosted connection broker, the Cloud Access Manager, that you can use for small environments with basic requirements. When you need to go above and beyond simple assignments or need to model more complex business workflows, replace the Cloud Access Manager with Leostream.</p> <p>Leo Stream supports PCoIP, HP Remote Boost (RGS), Mechdyne TGX, NICE DCV, NoMachine, Microsoft RDP, Scyld Cloud Workstation, VNC</p> <p>PCoIP Connection Manager and Security Gateway: The PCoIP Connection Manager creates a PCoIP session between the PCoIP Client and remote desktop. The PCoIP Security Gateway allows WAN users to access their remote desktops from the Internet without having to set up a VPN connection. It is not required for LAN access. The Leostream Connection Broker communicates with the PCoIP Connection Manager using the PCoIP Broker Protocol, to offer the correct resources to the user based on their Leostream policy.</p> <p>Leostream provide a gateway and a connection broker. These are three separate instances.</p> <ul> <li>PCoIP and LeoSTream</li> <li>CAS and LeoStream</li> <li>Leostream Gateway</li> </ul>"},{"location":"features/sdkvm/leostream/#does-it-require-modified-clients","title":"Does it require Modified Clients?","text":"<p>No, The Leostream Gateway receives display protocol traffic from the remote desktop on the default display protocol port, for example, 3389 for RDP connections. You do not need to configure your remote desktops for use with the Leostream Gateway. From the remote desktop\u2019s perspective, it\u2019s transmitting the display protocol data to the Leostream Gateway along the default display protocol port. The Leostream Gateway then redirects the traffic to the user\u2019s client.</p>"},{"location":"features/sdkvm/leostream/#notes-from-initial-call-with-leo-stream","title":"Notes from initial call with Leo Stream","text":"<ul> <li>The client must authenticate with the LeoStream API before the broker will connect it to the target. Leostream can provide sample code for interacting with the API and we may be able to cache this in the case of requiring switching between desktops.</li> <li>Normally a target VM or PC runs a LeoStream Agent. This agent talks with the broker and seems to mainly provide status on the availability of the machine and details on who can access it.</li> <li>We could implement something in our appliance that mimics this and allows the broker to control who can connect.</li> <li>By default the broker assumes one connection per session, but we could modify this to accomodate shared mode of operation.</li> <li>Leostream Test License for you with key: 216-040-467. Set to expire on 08/31/2022.</li> </ul>"},{"location":"features/sdkvm/leostream/#detailed-guide","title":"Detailed Guide","text":"<ul> <li>LeoStream Guide</li> </ul>"},{"location":"features/sdkvm/leostream/#rest-api-reference","title":"Rest API Reference","text":"<ul> <li>API Reference to Leostream Gateway</li> </ul>"},{"location":"features/sdkvm/qt_license_options/","title":"Qt license options","text":"<p>As long as you can comply with the (L)GPL requirements of the Qt libraries, then you do not need to purchase a \"commercial license\" from the Qt Company. Note that the terminology \"commercial license\" is a bit ambiguous, because the (L)GPL license also allows 'commercial' use as long as you can follow the obligations. Namely, the obligation for the LGPL is that you distribute the source code of the LGPL libraries themselves (i.e. the Qt libraries), and also that you allow your users to replace the LGPL libraries with alternative versions.</p> <p>Basically what this has been interpreted to mean is that if you distribute LGPL libraries (such as Qt) with your application, then you also must:</p> <p>Distribute to your users the source code of the same version of that library, or make it available in a way that is conformant with the LGPL license.</p> <p>Make it possible for a user to use a different version of that LGPL library with your application. In practice this means that you must use dynamically linked libraries for the LGPL library (i.e. on Windows, the Qt libraries must be DLLs, and on Linux the libraries for Qt must be .so's).</p> <p>In practice, it also means that on platforms like iOS and Android, LGPL is not really usable (because these platforms apparently do not allow users to replace the libraries with another version). Basically, the LGPL requires that you document the process for replacing your version of the LGPL library (Qt) with another version that the user may have built herself.</p> <p>Note that some components of the Qt framework may be GPL licensed, and not LGPL. If you don't want to release the source code of your whole application, you must avoid distributing GPL applications in a way that combines it with your application. To be safe it would be best not to distribute the GPL components at all together with your application.</p> <p>Discussion on QT Licensing</p>"},{"location":"features/sdkvm/sdkvm/","title":"Software Defined KVM","text":"<p>Release 1.0.1</p>"},{"location":"features/sdkvm/sdkvm/#embedded-software-feature-proposal-software-defined-kvm","title":"Embedded Software Feature Proposal - Software Defined KVM","text":"<p>The Software Defined KVM product (SDKVM) is a PC based offering that allows a user connect to multiple different sources from a single same pixel multihead, multiscreen application.</p>"},{"location":"features/sdkvm/sdkvm/#terms-and-definitions","title":"Terms and Definitions","text":"Term Definition CAS Teradici CAS (Cloud Access Software) Decoder See Receiver Encoder See Transmitter Multiviewer A multiviewer is similar to a video wall. But while video walls require a separate TV display for each video source, multiviewers only require one display surface. Multiviewers are able to showcase full, split, quad, and custom configurations on the same pixel surface. PCoIP PC over IP (PCoIP) is a remote display protocol that Teradici developed for delivering remote desktops and applications to endpoints. PCoIP works by rendering client desktops on a network or cloud server. The desktop's pixels are then compressed, encrypted and then transmitted to the client device. The client then decrypts and renders the desktop view for the user. RFX RemoteFX Codec Extension developed by Microsoft which uses a lossy image codec to encode screen images with efficient and effective compression. This is the lossy scheme used in Blackbox products. Receiver A Blackbox appliance that receives and displays a video stream. A receiver is also referred to as a client or decoder. Get Source The term Source is commonly used to describe the PC connected to a transmitter appliance. However, in the context of this document we will be using Source to identify the receiver appliance that is the source for the get function. Shared Mode A generic term used in Blackbox to describe schemes that allow more than one receiver view the video source from a transmitter. See Municast and Multicast. Source In the context of Push and Get source refers to the receiver we get the connection from - see Get Source. Push Target The term Target is used in the context of this document to describe the receiver appliance that will receive the pushed connection. Target In the context of Push and Get the term target refers to the receiver we get the connection from - see Push Target. Transmitter A Blackbox appliance that captures and transmits a video from a source PC. A transmitter is also referred to as a server or encoder. Video Source A source of input for a Transmitter, normally the DVI or Display Port output of a PC. Video Wall A video wall is a special multi-monitor setup that consists of multiple computer monitors, video projectors, or television sets tiled together contiguously or overlapped in order to form one large screen. Typical display technologies include LCD panels, Direct View LED arrays, blended projection screens, Laser Phosphor Displays, and rear projection cubes. <p>Table 1 Terms and Definitions</p>"},{"location":"features/sdkvm/sdkvm/#references","title":"References","text":"<ul> <li>Siemens Proposal for the Operator Desk</li> <li>DPS for the Remote App</li> <li>Draft of Proposed Design</li> <li>This proposal uses a Windows 11 Pro 64-bit on a Lenova Intel(R) Core(TM) i9-10900 CPU @ 2.80GHz (20 CPUs), ~2.8GHz and 65536MB RAM</li> <li>Teradici</li> <li>LeoStream Leostream works seamlessly with Teradici Cloud Access Software and PCoIP Remote Workstation Cards, providing high-quality graphics for applications running in the datacenter or cloud. The Leostream Connection Broker allows IT to pool, assign, and manage all PCoIP devices in their organization from a single interface.</li> <li>CAS Teradici CAS (Cloud Access Software) enables users access Teradici cloud based virtual machines.</li> <li>Windows Updates API</li> <li> </li> </ul>"},{"location":"features/sdkvm/sdkvm/#tca-license","title":"TCA License","text":""},{"location":"features/sdkvm/sdkvm/#competitive-references","title":"Competitive References","text":""},{"location":"features/sdkvm/sdkvm/#gesab","title":"Gesab","text":"<ul> <li>Gesab</li> <li>Deskwall provides management, administration, control of equipment and sources of information through the use of a single keyboard and a mouse a single multi-view interface. They support a range of applications, programs, displays, apps, smart apps, web services, as well as IP video, streaming, social networks and widgets on this controlled space.</li> <li>Deskwall appears to be built on top of Gentoo Linux.</li> </ul>"},{"location":"features/sdkvm/sdkvm/#deskwall-features","title":"Deskwall Features","text":""},{"location":"features/sdkvm/sdkvm/#setup","title":"Setup","text":"<p> A series of menus are provided to allow the user configure the system. These menu options allow selection of sources, arrangement of desktop layout and other global parameters. </p>"},{"location":"features/sdkvm/sdkvm/#source-selection","title":"Source Selection","text":"<p> The sources menu allows the user select a variety of different sources. These include IP Camera Streams, Web streams, Remote video streams and a variety of other sources. </p>"},{"location":"features/sdkvm/sdkvm/#configuration-and-layout","title":"Configuration and Layout","text":"<p> The desktop can be arranged from a number of pre-configured templates, or using a freestyle option that allows the user to create a customised workspace. </p>"},{"location":"features/sdkvm/sdkvm/#smart-mouse-and-beaconing","title":"Smart Mouse and Beaconing","text":"<p> The system provides a feature called smartmouse where the mouse will automatically activate inside a chosen window immediately upon entry. There is also a mouse beaconing feature that immediately shows the location of the mouse within a multiview desktop. </p>"},{"location":"features/sdkvm/sdkvm/#scaling-and-adaption","title":"Scaling and Adaption","text":"<p> The user can adaptively scale the window of view and the data within the window. </p>"},{"location":"features/sdkvm/sdkvm/#window-settings","title":"Window Settings","text":"<p> The viewing windows can be viewed through a bordered window with integrated controls or in frameless mode. </p>"},{"location":"features/sdkvm/sdkvm/#hot-corners-and-overlay-controls","title":"Hot Corners and Overlay Controls","text":"<p> The windows provide a facility called hot-corners which allow a user to however on a corner of the viewing windows and activate a series of controls. </p>"},{"location":"features/sdkvm/sdkvm/#barco","title":"Barco","text":"<ul> <li>Barco</li> <li>OpSpace is a personal workspace that enables operators an integrated view, control and interaction with multiple sources; it allows all relevant information to be consulted and manipulated with just one mouse and keyboard.</li> <li>Data Sheet</li> </ul>"},{"location":"features/sdkvm/sdkvm/#youtube-videos-barco-opspace-features","title":"Youtube Videos Barco OpSpace Features","text":"<ul> <li>Barco OpSpace demo 1</li> <li>Barco OpSpace demo 2</li> </ul>"},{"location":"features/sdkvm/sdkvm/#gd","title":"G&amp;D","text":"<ul> <li>G&amp;D announced details of their new PersonalWorkplace-Controller at NAB 2022. It supports up to 26 inputs. Different sources can be dropped into the desktop locations from a hot key invoked combination and the mouse can be directed to a source by double clicking on a specific window. The sources can be a mixture of KVM and virtual machines.</li> </ul>"},{"location":"features/sdkvm/sdkvm/#abb-sverige","title":"ABB Sverige","text":"<ul> <li>ABB Control Room Design Services \u2013 Extended version</li> </ul>"},{"location":"features/sdkvm/sdkvm/#introduction","title":"Introduction","text":"<p>The Software Defined KVM product (SDKVM) is a PC based offering that allows a user connect to multiple different sources from a single multihead, multiscreen application. The initial release will support KVM connections (TX), PCoIP and RDP. </p>"},{"location":"features/sdkvm/sdkvm/#context","title":"Context","text":"<p>There is a trend in the broadcasting industry towards multi-view multi-head monitoring systems. This ability is foundational feature for many video wall type applications. These products typically provide multiple outputs tiled together contiguously or overlapped in order to form one large viewing surface.</p>"},{"location":"features/sdkvm/sdkvm/#overview","title":"Overview","text":"<p>The SDKVM application is intended for use by operators who are required to simultaneously interact with a range of devices often rapidly moving their attention and focus between screens.</p> <p>The flexibility of the SDKVM will allow a particular station to serve multiple purposes, for example, the station could act as an editing desk during the day time and then be used as a more general monitoring station in the evening.</p> <p></p> SDKVM Basic Concept of Operation"},{"location":"features/sdkvm/sdkvm/#single-pixel-surface","title":"Single Pixel Surface","text":"<p>A design feature of competing products is that they provide the rendered output from different sources on a single pixel surface (a workspace). From an operating system perspective these may still be individual windows (tiles) that are the outputs of various software clients, but they are presented with a similar look and feel and share common window frame properties. They are often contained within a parent window (a view) that acts as a layout manager. This allows the system full flexibility on how the various windows are arranged; it also allows various overlays and activation points to be integrated with the displayed sources.</p>"},{"location":"features/sdkvm/sdkvm/#sources","title":"Sources","text":"<p>The complete list sources for the SDKVN could be:</p> <ul> <li>Emerald KVM transmitters connected to physical machines.</li> <li>Virtual desktops hosted on Microsoft or VMWare servers.</li> <li>Standalone machines running remote connection agents like the teradici's PCoIP graphics agent.</li> <li>Standalone machines with RDP based remote connectivity enabled.</li> <li>PCs running other popular remote connection software like, VNC, NoMachine, Chrome Remote Desktop, etc.</li> <li>RSTP and H.264 streams from cameras and video streaming applications.</li> <li>AWS Azure hosted virtual machines</li> <li>VMWare Blaster hosted cloud services.</li> <li>Any HTML compatible webserver output rendered to a browser.</li> <li>Additional source support can be added so it is envisaged that the system provide an expansion capability similar to a plugin architecture; however, the upgrade and expansion of the system is only supported by the Blackbox support organisation. The system is a closed system and will not patchable or upgradable outside of the Blackbox support structure.</li> </ul> <p>The initial release of the product V1.0.0 will just support KVM (TX), RDP and PCoIP.</p>"},{"location":"features/sdkvm/sdkvm/#configuration","title":"Configuration","text":"<p>The SDKVM provides an integrated environment that will allow the user manage these sources by having the ability to:</p> <ul> <li>Direct the output to specific monitors</li> <li>Organise the outputs in video wall type displays</li> <li>Switch keyboard and mouse focus to the active application</li> <li>Receive visual and audible alerts to bring their attention to specific sources. for example:</li> <li>Play audio on loss of source</li> <li>Change window border colour on loss of source</li> <li>Show non-responsive connections in Red on a dash board</li> <li>Connect USB based devices to specific sources if the target supports that technology. A typical example of this would be a card reader plugged into the host PC that allows the user login to a target device.</li> <li>Support resource management so that sources with the focus present with less latency and higher frame-rates.</li> <li>Configure resource allocation depending on the profile of the source. For example, a monitoring windows may not need a high framerate.</li> <li>Support audio from sources that it and allow selection of audio streams based on current focus or some other prioritization method. This may include the ability to mix audio streams.</li> <li>Configure audio and visual alarms based on events from connected sources.</li> <li>Copying, image snap-shot or cropping video from and between sources.</li> <li>Changing the scale, zooming in and out of video from different targets.</li> <li>Toggle on and off a labels facility to identify each source by an associated name or IP address</li> <li>We want to integrate applications like zoom, webex etc into the software defined KVM. Note: Software applications like this have very regular updates and this may be difficult for a closed system.</li> </ul>"},{"location":"features/sdkvm/sdkvm/#configuration-persistence","title":"Configuration Persistence","text":"<p>The user will be able to save and retrieve the configuration of the sources on the device and this will facilitate the use of the system by different users for different operating functions like editing stations, monitoring stations etc.</p>"},{"location":"features/sdkvm/sdkvm/#presentation-and-control","title":"Presentation and Control","text":"<ul> <li>Integrated Window Control: The system must provide a way of encapsulating source video in a display container as part of a same pixel surface multi-viewer. This multi-viewer could be presented across multiple displays.</li> <li>Activation point (Hot Corner): The display containers should provide activation points that allow overlay control functions relating to that source to appear. These could be volume control, frameless windows or automatic scaling and window adaption behaviours.</li> <li>The active window should be discriminated visually by using an active border in another colour.</li> <li>We should have the options of adding a label so that a window can be identified by associated name or IP address</li> </ul>"},{"location":"features/sdkvm/sdkvm/#sharing","title":"Sharing","text":"<ul> <li>Push and Get Operations are available on competing devices, so the system will need to offer some means of sharing workspace elements across systems.</li> <li>It is expected that a user will receive a notification when a shared session is initiated which they can click to begin co-operative work.</li> </ul>"},{"location":"features/sdkvm/sdkvm/#intelligent-mouse","title":"Intelligent Mouse","text":"<ul> <li>Mouse Beaconing: The system will provide a beaconing type indication of the mouse location in response to a hot key invoked beacon request.</li> <li>Automatic Mouse Activation: The system will allow the user configure the mouse operation and its transition from a control layer to active operation inside the target source window.</li> </ul>"},{"location":"features/sdkvm/sdkvm/#operational-security","title":"Operational Security","text":"<ul> <li>The system will provide a comprehensive auditable history of operations carried out by the user.</li> </ul>"},{"location":"features/sdkvm/sdkvm/#boot-up-and-splash-screen","title":"Boot Up and Splash Screen","text":"<ul> <li>On boot up the main display will show a Blackbox Splash Screen</li> <li>It will transition to a local OSD screen (see below)</li> </ul>"},{"location":"features/sdkvm/sdkvm/#management","title":"Management","text":""},{"location":"features/sdkvm/sdkvm/#boxilla","title":"Boxilla","text":"<p>The SDKVM can be managed by Boxilla over a secure connection (this may be a combination of a REST api and MQTT. SSH interfaces will not be supported) and this will include:</p> <ul> <li>The ability to upgrade the software on the SDKVM system.</li> <li>The retrieval of statistics associated with the operation of the device and its associated sources.</li> <li>The ability to load and save user configurations from the device.</li> <li>The ability to create users and manage existing users and their associated permissions.</li> <li>License management for features and enabling technologies like PCoIP.</li> <li>The ability to make and break connections.</li> <li>The ability to create new connections and assign them to users.</li> <li>Optionally we may want to lock connections to the managed domain, but this needs to be clarified.</li> <li>Ability to export diagnostics and logs to Boxilla</li> </ul> <p>The initial release of the product V1.0.0 will just support the following subset: - Software upgrade - The ability to download the XML database. - Authentication of a user - Ability to export diagnostics and logs to Boxilla  </p>"},{"location":"features/sdkvm/sdkvm/#local-management","title":"Local Management","text":"<p>The SDKVM can also operate in unmanaged mode. In this mode of operation the OSD will allow an Administrative user create additional local users. These local users can then create connections and workspaces.</p> <ul> <li> <p>The SDKVM will display a GUI based OSD. This must be on a par with contemporary OSD designs and have a modern professional appearance. This will require a user login and blocks all access to the underlying operating system/ It will provide the following functions:</p> </li> <li> <p>Support for a local upgrade via a thumb drive.</p> </li> <li>Ability to export diagnostics and logs to a thumb drive.</li> <li>The ability to load and save user configurations from the device.</li> <li>The ability to create users and manage existing users and their associated permissions.</li> <li>The ability to make and break connections.</li> <li>The ability to create new connections and assign them to users.</li> <li>The ability organise the desktop layout from custom templatised layouts</li> <li>The ability to change network settings</li> <li>The ability to reboot the device</li> <li>The ability to set display preferences</li> <li>The ability to view logs locally</li> </ul>"},{"location":"features/sdkvm/sdkvm/#broker-compatibility","title":"Broker Compatibility","text":"<p>LeoStream works in conjunction with the Teradici's Cloud Access Software deployments providing remote access from PCoIP Zero client, software client, or mobile client to virtual or cloud-hosted machines running the Teradici Cloud Access Software. The SDKVM will need to be able to interoperate with these services in order to access CAS based devices.</p> <p>For details of Leostream see here</p> <p>The initial release of the product V1.0.0 will allow us connect via a Leostream broker.</p>"},{"location":"features/sdkvm/sdkvm/#diagnostic-interfaces","title":"Diagnostic Interfaces","text":"<ul> <li>The SSH connectivity to the SDKVM will be off by default, but it can be enabled through the OSD or from Boxilla if the user has sufficient authorisation.</li> </ul>"},{"location":"features/sdkvm/sdkvm/#form-factor","title":"Form Factor","text":"<p>The hardware must be able to fit into a 1U unit form factor in terms of height, but it can be a standard NUK style device.</p>"},{"location":"features/sdkvm/sdkvm/#style-guide","title":"Style Guide","text":"<p>Brand Standards</p>"},{"location":"features/sdkvm/sdkvm/#hardware","title":"Hardware","text":"<p>It is proposed that the SDKVM run on standard X86 hardware, but access to the SDKVM's operating system will be restricted and all upgrades and patching will be controlled by Boxilla. The hardware should have the following minimum specification:</p>"},{"location":"features/sdkvm/sdkvm/#required","title":"Required","text":"<ul> <li>Support for USB 3:0</li> <li>At least one HDMI</li> <li>At least one Display Port interface with resolutions up to 4K.</li> <li>Support for AVX2 Advanced Vector Extensions - see</li> </ul>"},{"location":"features/sdkvm/sdkvm/#optional","title":"Optional","text":"<ul> <li>TBD</li> </ul>"},{"location":"features/sdkvm/sdkvm/#cpu-and-memory","title":"CPU and Memory","text":"<ul> <li>CPU Minimum specification: eleventh generation i7 processor</li> <li>Memory Minimum Specification: 16GB DDR3 1333MHz</li> </ul>"},{"location":"features/sdkvm/sdkvm/#video","title":"Video","text":"<p>The SDKVM should support a minimum of 4 Displays each capable of 4K60, but this may be difficult to achieve with current NUK offerings.</p> <p>The SDKVM may be shipped in different variants and these variants may be distinguished by factors like the number of video heads and CPU/GPU capability.</p> <p>The SDKVM software should be agnostic and independent of specific GPU and operating system capabilities if possible, and it should not be tightly coupled to the hardware. It should be portable across different PC hardware configurations. It is expected the hardware on which the SDKVM will evolve as new and faster PC technology emerges. A future version of the product may take the form of a software bundle that could be installed on a customer's preferred hardware.</p>"},{"location":"features/sdkvm/sdkvm/#audio-specifications","title":"Audio Specifications","text":"<ul> <li>The audio should conform to AC97 PC Quality Audio.</li> <li>The SDKVM application must provide some means of routing and selecting audio from the available sources.</li> <li>No special interfaces for Audio are required other than standard 3.5 mm jacks.</li> <li>The user should experience close to Zero Latency and no discernible lip Sync issues on the audio.</li> </ul>"},{"location":"features/sdkvm/sdkvm/#networking-interfaces","title":"Networking Interfaces","text":"<ul> <li>1 X 1 Gigabit interface is the minimum, but a variant with a redundant 1 Gig port is also desirable.</li> </ul>"},{"location":"features/sdkvm/sdkvm/#system-upgrade","title":"System Upgrade","text":"<ul> <li>Upgrade will primarily be through Boxilla.</li> <li>It should be possible to perform a local upgrade via a thumb drive.</li> </ul>"},{"location":"features/sdkvm/sdkvm/#security-patching","title":"Security Patching","text":"<p>See discussions on operating system.</p>"},{"location":"features/sdkvm/sdkvm/#intellectual-property-protection","title":"Intellectual Property Protection","text":"<p>See the section below on locking down the operating system.</p>"},{"location":"features/sdkvm/sdkvm/#sdkvm-component-and-modular-view","title":"SDKVM Component and Modular View","text":"SDKVM Component View"},{"location":"features/sdkvm/sdkvm/#sdkvm-staging","title":"SDKVM Staging","text":""},{"location":"features/sdkvm/sdkvm/#first-offering-of-the-sdkvm","title":"First Offering of the SDKVM","text":"<ul> <li>The first offering could simply be a Quad KVM Multiviewer.</li> </ul>"},{"location":"features/sdkvm/sdkvm/#future-features","title":"Future Features","text":"<ul> <li>The SDKVM could provide a north facing REST api to allow third party control. This can be a future feature, but development of the core infrastructure must support this capability.</li> </ul>"},{"location":"features/sdkvm/sdkvm/#use-cases","title":"Use Cases","text":""},{"location":"features/sdkvm/sdkvm/#general-use-cases","title":"General Use Cases","text":"<ul> <li>Multiviewers have changed the design and implementation of production and broadcast control rooms with their ability to display multiple video sources on a single display monitor. In recent years they have migrated from the control rooms and are now being utilized as high-quality multi-signal recording and live preview devices.</li> <li>While common in broadcasting, they are also used in presentation spaces, conference rooms, digital signage, houses of worship, gaming, entertainment, and live events.</li> </ul>"},{"location":"features/sdkvm/sdkvm/#specific-use-cases","title":"Specific Use Cases","text":"<p>TBC</p>"},{"location":"features/sdkvm/sdkvm/#proof-of-concept","title":"Proof of Concept","text":"<p>A proof of concept evaluation is required in certain areas. These are discussed below in more detail:</p>"},{"location":"features/sdkvm/sdkvm/#base-operating-system-for-the-product","title":"Base Operating System for the Product","text":"<p>Windows versus Linux: Perhaps time to market suggests windows, but we need to make the selection based on a number of factors:</p>"},{"location":"features/sdkvm/sdkvm/#performance","title":"Performance","text":"<ul> <li>We would need to determine if a performance preference for one system over the other exists.</li> <li>This could be accessed at a basic level by running the freerdp application on windows and linux on the same machine and comparing the respective performance characteristics by analysing statistics available from freerdp.</li> <li>While the above exercise will give a baseline comparison, we need to factor in how the applications will render onto a window layout manager. If you look at competing products like Deskwall and OpSpace then it is clear they have full control over the decoration and presentation of the windows frames and properties. This requirement to create a consistent look and feel may depend on frameworks which in turn may have operating system dependencies.</li> <li>Initial tests (see Appendix A) indicate that there are no significant performance differences between Windows and Linux when using the RDP client.</li> </ul>"},{"location":"features/sdkvm/sdkvm/#security","title":"Security","text":""},{"location":"features/sdkvm/sdkvm/#windows","title":"Windows","text":"<ul> <li>The product must be secure. The threat landscape on windows is likely to be larger and more dynamic; this would mean the system would need some means of receiving regular patches and anti virus or anti malware software; however, this could degrade performance, so a more practical approach may be to constrain the access to the operating system by using a kiosk mode or using technologies like AppLocker.</li> <li>This is likely to be a contentious area because deploying windows based devices on a corporate network will likely but them on the corporate IT radar and there may be an expectation of compatibility with the security framework in place including patching, virus checking and integration with intrusion detection systems. Patching a closed Windows system without directly using System update would be difficult.</li> </ul>"},{"location":"features/sdkvm/sdkvm/#linux","title":"Linux","text":"<ul> <li>Deploying a Linux based system still has risks, but the threat landscape is smaller and the patching of the system possibly less frequent. There is also less expectation of security framework integration once we position the device as a self contained embedded product.</li> <li>By design Linux is more secure because there is more control over what can run as root. It is also easier to remove malware and viruses.</li> <li>It is also easier to repackage and patch vulnerabilities on a closed Linux system, but the Linux community is generally slower to patch known vulnerabilities.</li> </ul>"},{"location":"features/sdkvm/sdkvm/#locking-down-the-operating-system","title":"Locking down the operating system","text":""},{"location":"features/sdkvm/sdkvm/#windows_1","title":"Windows","text":"<ul> <li>Windows has a kiosk mode which allows the PC boot into a single application. This application could be the SDKVM and this would prevent the user having access to the underlying operating system; however, there are restrictions on what applications can run in this mode. See Windows Assigned Access. In particular, it is not possible for the selected application to launch other applications. There is a multi-app support feature in Windows 10, but this is not yet available in windows 11. The configuration is set through an XML file that defines what folders and applications are available.</li> <li>It is possible to build customised Windows Versions using a tool like Sysprep.</li> <li>Customising a Windows Image</li> <li>SysPrep Tool</li> </ul>"},{"location":"features/sdkvm/sdkvm/#linux_1","title":"Linux","text":"<ul> <li>Linux can be more readily configured to operate in kiosk or single application mode see Gnome Single Application Mode.</li> <li>It is also possible to build a specific linux distribution with a customised set of applications by using tools like Linux Live or Linux from Scratch</li> </ul>"},{"location":"features/sdkvm/sdkvm/#appendix-a","title":"Appendix A","text":""},{"location":"features/sdkvm/sdkvm/#performance-comparison-windows-versus-linux","title":"Performance Comparison - Windows Versus Linux","text":""},{"location":"features/sdkvm/sdkvm/#hardware_1","title":"Hardware","text":"<ul> <li>Intel\u00ae Core i7-1165G7</li> <li>Cores 4, Threads 8</li> <li>Intel\u00ae Iris\u00ae Xe Graphics</li> </ul>"},{"location":"features/sdkvm/sdkvm/#rfx-processing-using-freerdp-client-built-with-same-code-base-running-on-identical-hardware-and-default-rdp-settings","title":"RFX Processing using FreeRDP client built with same code base running on identical hardware and default RDP settings","text":"<p>Playing Avitar on the source Machine at 60 fps (The actual host PC which is a Dell NUK may not actually be able to support 60 fps because RDP will limit this to a maximum of 30 FPS)</p> <p>An examination of the data received over RDP shows that we receive many screen updates which are smaller than a full screen so Frames Per Second is not a useful measure, instead I have measured screen updates.</p>"},{"location":"features/sdkvm/sdkvm/#linux-ubuntu-2104","title":"Linux Ubuntu 21:04","text":"Performance Indicator Value Comments Measured Screen Updates per second 45.61 Processor Occupancy 27.3% Memory Usage 0.7%"},{"location":"features/sdkvm/sdkvm/#windows-10","title":"Windows 10","text":"Performance Indicator Value Comments Measured Screen Updates per second 44.9 Processor Occupancy 39.3% Memory Usage 2.5%"},{"location":"features/sdkvm/sdkvm/#rfx-processing-using-freerdp-client-built-with-same-code-base-running-on-identical-hardware-and-60-fps","title":"RFX Processing using FreeRDP client built with same code base running on identical hardware and 60 FPS","text":""},{"location":"features/sdkvm/sdkvm/#how-to-remove-rdp-frame-capping-on-rdp-remote-desktop","title":"How to Remove RDP Frame Capping on RDP Remote Desktop","text":"<p>Removing the 30 FPS restriction</p>"},{"location":"features/sdkvm/sdkvm/#linux-ubuntu-2104_1","title":"Linux Ubuntu 21:04","text":"Performance Indicator Value Comments Measured Screen Updates per second 58.7 Processor Occupancy 28.4% Memory Usage 0.7%"},{"location":"features/sdkvm/sdkvm/#windows-10_1","title":"Windows 10","text":"Performance Indicator Value Comments Measured Screen Updates per second 59.9 Processor Occupancy 44.8% Memory Usage 2.5%"},{"location":"features/sdkvm/sdkvm/#conclusion","title":"Conclusion","text":"<ul> <li>The difference in terms of screen updates for the constrained RDP Frame Rate of 30 FPS is within the margin of error; in practical terms there is no measurable difference between the application running on Windows or Linux on this particular test.</li> <li>The difference in terms of screen updates for the un-constrained RDP Frame Rate of 60 FPS shows that Windows is marginally better than Linux, but it uses more processor power to maintain 60 screen updates per second.</li> <li>In general Linux uses less CPU processing power and memory than Windows, but I do not believe this are very significant differences. In both cases the CPU is not fully loaded.</li> <li>Teradici have indicated that at very high bitrates &gt; 300 Mbits/s Linux out performs Windows. This would be a factor if we were running multiple concurrent connections. The indicated the following:</li> <li>For Windows clients using RJ45, many NICs have a default RX Buffer size of 128 which is too small for high bandwidth workloads when using CPU Offload \u2013 I see throughput limited to about 150 Mbps in some cases. One should see significant increase in maximum bandwidth by increasing the RX Buffer to 2048 where the setting is exposed (usually true). I was recently getting over 400 Mbps after making this change on a G12 Intel client. BTW, if you use an RJ45 to USB adapter, the RX Buffer bottleneck seems to get bypassed and we see much better throughput.</li> <li>A couple of other recommended NIC Settings in the PCoIP Ultra KB: Windows Client: In some instances, UDP throughput may be adversely affected by system reconfiguration caused by Windows updates and/or NIC driver updates. Ensure the latest drivers from the manufacturer are in use. Ensure that Flow Control and Interrupt Moderation are enabled for the NIC used to establish a PCoIP Session. These can be found within the NIC's Advanced Properties tab within the Windows Device Manager. BTW, Linux client should achieve 500+ Mbps for CPU Offload mode assuming it has a sufficient spec processor</li> </ul>"},{"location":"features/sdkvm/sdkvm/#appendix-b-possible-enabling-or-reference-technologies","title":"Appendix B - Possible Enabling or Reference technologies","text":""},{"location":"features/sdkvm/sdkvm/#windows_2","title":"Windows","text":"<ul> <li>Desktops from SysInternals</li> <li>HDMI Emulation</li> </ul>"},{"location":"features/sdkvm/sdkvm/#linux_2","title":"Linux","text":"<ul> <li>xvfb</li> <li>Open Broadcast Studio</li> </ul>"},{"location":"features/sdkvm/sdkvm/#cross-platform","title":"Cross Platform","text":"<ul> <li>.Net Maui</li> <li>OpenGL</li> </ul>"},{"location":"features/sdkvm/sdkvm/#appendix-c-nuk-suppliers","title":"Appendix C - NUK Suppliers","text":"<ul> <li>Simply NUK</li> </ul>"},{"location":"features/sdkvm/sdkvm/#appendix-d","title":"Appendix D","text":""},{"location":"features/sdkvm/sdkvm/#osd-technologies","title":"OSD Technologies","text":""},{"location":"features/sdkvm/sdkvm/#qt","title":"QT","text":"<ul> <li>QT Licensing</li> </ul>"},{"location":"features/sdkvm/sdkvm/#avalonia","title":"Avalonia","text":"<ul> <li>Avalonia</li> </ul>"},{"location":"features/sdkvm/sdkvm/#mau","title":"Mau","text":"<ul> <li>.Net Mau Licensing: .NET is including .NET MAUI is free. There are no fees or licensing costs, including for commercial use.</li> </ul>"},{"location":"features/sdkvm/sdkvm/#appendix-e","title":"Appendix E","text":""},{"location":"features/sdkvm/sdkvm/#guidelines-for-the-demo","title":"Guidelines for the Demo","text":"<ul> <li>The most important aspect of any demo product is that it demonstrates the key concept of flexibility in arranging the desktop. It should be possible to select from one or more templatised screen layouts and show the windows arranged in accordance with that template.</li> <li>Tom and his colleague will prepare some outline suggestions as a guide to exploring options.</li> <li>It is not necessary to show all connection types, PCoIP and RDP may be sufficient with the promise of KVM to come.</li> <li>We need to be able to interoperate with Leostream security Gateway and Broker. It will not be practical to set these pieces of infrastructure up for a demo, but we have a high degree of certainty that the PCoIP client will work with Leostream gateway and broker. The challenge will be getting RDP and KVM connections to work as they may have to implement a protocol. We are exploring options for setting up a suitable representative environment for evaluating gateway and brokerage compatibility.</li> <li>Tom will get details of ABC's configuration and explore any opportunities to evaluate a prototype on their network.</li> <li>Development will use the above direction to focus their work.</li> </ul>"},{"location":"features/sdkvm/sdkvm/#sdkvm-proposed-layout","title":"SDKVM Proposed Layout","text":"<p>On what screen does setup screen appear on</p>"},{"location":"features/sdkvm/sdkvm/#data-structure","title":"Data Structure","text":""},{"location":"features/sdkvm/sdkvm/#workspace","title":"Workspace","text":"<p>A workspace contains a collection of views. A user or administrator can create, edit, save, clone or delete a workspace. The total number of connections in a workspace cannot be greater than 16.</p>"},{"location":"features/sdkvm/sdkvm/#a-view","title":"A View","text":"<p>A view is contains a collection of connections. It can be created from a template or cloned from an existing view.</p>"},{"location":"features/sdkvm/sdkvm/#a-template-layout","title":"A Template Layout","text":"<p>A template is a layout for a view. A view can be created from a template by taking a template as a starting point and then assigning connections to each of the connection placeholders within a template.</p>"},{"location":"features/sdkvm/sdkvm/#data-storage","title":"Data Storage","text":"<ul> <li>A workspace file contains the entire data structure for a defined workspace. It consists of a json file with views and connections appearing as child nodes.</li> <li>Views can also be exported and imported and will exist in a views file</li> <li>Templates are saved in a templates file</li> <li>The data files can be uploaded and downloaded from Boxilla</li> </ul>"},{"location":"features/sdkvm/sdkvm/#users","title":"Users","text":"<p>The Emerald Vue has three classes of user</p> <ul> <li>User - the normal end user</li> <li>Super User - Create views, workspaces, connections</li> <li>Admin - Full and complete access</li> </ul> <p>Free Form Layouts</p> <ul> <li>Span monitors -Admin or Power Users only</li> <li>Edit mode or movable mode</li> <li>Go full screen, remove border, restore border</li> <li>Video activity detection - window blinks on active video</li> <li>Layout locally and then save and upload to Boxilla</li> <li>Same rule checks for IP address, Gateway etc</li> <li>Create is the free form template</li> <li>How do we reset to original view?</li> <li>Views are per user</li> <li>IBC Minimum Requirements: Quad - Freeform layout, two monitors, Dates: September 2nd week - 9th</li> </ul> <p>Review Comments and Feedback</p>"},{"location":"features/sdkvm/sdkvm/#notes-from-sdkvm-specifications-review-with-john-hickey-11102022","title":"Notes from SDKVM Specifications Review with John Hickey 11/10/2022","text":"<ul> <li>Box must be upgradable: Through a thumb drive or Boxilla</li> <li>KVM and Audio but no USBR on 1.0.0</li> <li>We may need USBR on PCoIP depending on ABCs response</li> <li>Unit managed by Boxilla<ul> <li>Boxilla downloads database - full XML data base</li> </ul> </li> <li>Need a concept of different users - must be based on XML database</li> <li>Needs to operate in managed or unmanaged mode</li> <li>User needs to authenticate through Boxilla - retrieve database</li> <li>Users can be added, if managed Boxilla adds users</li> <li>Managed systems will not allow user create connections</li> <li>Audio - per tile, audio 0n, audio off, per workspace, audio on, audio off, global audio on, audio off.</li> <li>Tiles can be locked in a particular position</li> <li>Master Workspace Area: Master area is a designated area. If we click on secondary tile it can switch into master area.</li> <li>Statistics on a per SDKVM unit basis Bandwidth GPU/CPU Error Stats, TCP Retry counters</li> <li>Per tile, FPS and Bandwidth, CPU usage per process</li> <li>Diagnostics local and through Boxilla</li> <li>Same hot keys as receiver - ctrl ctrl</li> <li>Favourites ????</li> <li>Dropdown list on a tile - to change connection to that tile space - may not be required for 1.0.0</li> <li>Boot up splash Screen</li> <li>System Lockdown - system login</li> <li>Closed loop between loop between server and OSD</li> <li>Routing of audio HDMI and analog port - selectable</li> <li>Permissions - reboot, change network settings Admin, power and standard - follow same rules</li> <li>Auto-connect on login option</li> <li>Works with Freedom (relative to current constraints of freedom)</li> <li>OSD specific changes: </li> <li>Do not use SSH or SCP, REST API</li> <li>Prioritise a tile so that process get most CPU</li> </ul>"},{"location":"features/slide_and_glide/black_hole_issue/","title":"Email indicating Black Hole Issue","text":"<p>From: John Hickey  Sent: Thursday 5 April 2018 11:31 To: Tom Fitzgerald tom.fitzgerald@blackbox.com Cc: Michael Enevold michael.enevold@blackbox.com Subject: FW: Emerald Glide and Switch + Windows Extended Desktop</p> <p>Tom,</p> <p>Some feedback on Sales update I presented this morning to EMEA. This is feedback  on functionality desired \u2013 driven from Danish Police requirements. Can you touch base with Michael when he is back from vacation so we understand this fully. The Glide&amp; Switch clear \u2013 but the issue with extended desktop, etc. \u2013 we need to be clear on this.</p> <p>John</p> <p>From: Michael Enevold  Sent: Thursday 5 April 2018 10:56 To: John Hickey Subject: Emerald Glide and Switch + Windows Extended Desktop</p> <p>Hi John</p> <p>We would need glide and switch on 8 screens in any setup. Also we need to be able to add in a Windows Extended desktop machine with either 2 or 3 and maybe even 4 heads. And still use glide and switch on all machines without anh black KVM screen holes e.t.c. And hopefully without drivers on the actual sources if possible.</p> <p>e.g. Police is at this moment testing glide and switch enabled on 4 con modules, and sometimes they need either via Crestron/ctrlbridge to add a windows multihead extended desktop to those 4 screens, and as said it would be great in any of 2,3,4 heads, but usually 2 or 3.</p> <p>We are installing a special driver I got from ihse today on the multihead machines, which is some kind of mouse filter, and is also a thirdparty from them.</p> <p>I am on vacation but would like to update you in a more clear way later if needed.</p> <p>Do you know already know who is going to attend your classes in Ireland?</p> <p>Med venlig hilsen / Kind regards, Michael Enevold Application Engineer | VideoWall &amp; iCOMPEL Digital Signage</p>"},{"location":"features/slide_and_glide/dkm/","title":"Dkm","text":"<p>Hi John,</p> <p>It all works the same way. -Windows OS SH systems don\u2019t\u2019 require drivers -Windows OS Multihead systems require drivers when used with TC, Freedom, or DKM G&amp;S -Linux / Mac only support 1 screen because they don\u2019t support the MSC driver as it is only for Windows</p> <p>As far as I know you would have to be using ABS  on DKM when using the MSC feature.  I would say this was confirmed because during a tradeshow when we tried to connect a DKM w/ MSC to a DCX3000 system, the OSD was not working right, but the PC did.  If you turned the Glide and Switch off in DKM the DCX3000 OSD worked again.</p> <p>Thanks, Garrett</p>"},{"location":"images/infrastructure/release_notes/","title":"Release notes","text":"<p>The main changes in this release are:</p> <p>Changing video test from RX-TX connection, to a resolution configuration assesment in the case of all display port boards and DVI transmitters, and </p> <pre><code>assigned command to display osd on both heads to string variable, for better readability\n\n\nadded artix and stdp4020 to sql database, created corresponding getters/setters, ammended obsolete checks, tested changes on EmeraldPE DP and DVI\n\n\nfix technology type check logic, add sleep, add full path to board files to addres ssh issue\n\n\nrestart cloudgui after audio test so OSD is present for video test\n\n\nFix switcher communication issue, send_command breaks once expected string is found instead of waiting for timeout\n\n\nvideo test using osd as test image working for SE RX dual head\n\n\nAdded test for DVI RX using OSD as test image, this only works for head 1 so far\n\nVerified video changes on SE/PE DP/DVI TX's, set if-else foundation for alternate DVI RX video test. Corrected dictionary parsing logic get_video_test_info_data\n\n\nRevert \"implementation of video test using resolution for TXs\"\n\nThis reverts commit 99b165ef2a8efb192375b972ed87da6d844426bd.\n\nimplementation of video test using resolution for TXs\n\n\nupdates to product database, in order to get SE_DP and PE_DP working, changed the image versions being used also, this will need a more through review once the work is done,\n</code></pre> <p>as it is currently only being viewed on a board by board basis</p> <pre><code>removed second dut reboot from following board configuration, mac address is directly written from flash to /eth0/address, this saves 52 seconds\n\nThe fbi command does not seem to function correctly and instead of passing an image on a virtual buffer the background of the test PCs second display is set to the test image\n\n\nadded timeout to handle issue of xilinx not detecting target\n\n\nadded text substitution to handle technology naming conflict; Check that correct firmware version for STDP4020 chip is on SE_DP and PE_DP boards; if STDP4020 version is incorrect MPDN test fails with MSGBOX notification\n\n\nadded different device tress for for PE_DP and SE_DP, added artix_fpga for PE_DP and SE_DP(dualhead)\n\n\n\nadded SE and PE displayport to usb paths\n</code></pre>"},{"location":"process/process/","title":"Measurement Methodologies","text":"<p>To agree on a particular measurement methodology we do the following:</p> <ul> <li>That an ad hoc committee of Peter Shelley, Ronan Hayes, Jerome Nolan, Tom Fitzgerald, Prasad Joshi and Johnos meet when required to assess the area of contention and agree on who the \u201cSubject Matter Expert\" in the organisation is.</li> <li>This person, who may be a developer, FPGA engineer or Test Person would define the measurement.</li> <li>The committee would review and sign off on the methodology.</li> <li>Johnos would document the methodology and publish on a page for such issues.</li> <li>All future measurements would then be made with reference to this documented approach. </li> </ul>"},{"location":"process/process/#fit-images","title":"Fit Images","text":"<p>Information on FIT image structure</p> <p>U-boot provides a tool to extract the binary and metadata from FIT images.The tool \"dumpimage\" is checked in \"/home/${USER}/Buildroot_decoder/dumpimage\"</p> <p>Usage:</p> <p>1). Header Parsing</p> <pre><code>    ./dumpimage -l image.ub\n</code></pre> <p>2). Kernel  Image extraction</p> <pre><code>    ./dumpimage -T flat_dt -p 0 -i image.ub kernel\n\n\n\n    root@manas-virtual-machine:~/Buildroot_decoder# sha1sum kernel\n    23fb128d91453a756bbc5783d2a3e36ed364d87c  kernel\n\n\n\n    root@manas-virtual-machine:~/Buildroot_decoder# sha1sum buildroot-2017.02.4/output/images/Image\n    23fb128d91453a756bbc5783d2a3e36ed364d87c  buildroot-2017.02.4/output/images/Image\n</code></pre> <p>3). Device tree extraction</p> <pre><code>    ./dumpimage -T flat_dt -p 1 -i image.ub devicetree.dtb\n\n\n\n    root@manas-virtual-machine:~/Buildroot_decoder# sha1sum devicetree.dtb\n    64c9c7b98ad555bd746e0b6168b97e2cf856db75  devicetree.dtb\n\n\n\n    root@manas-virtual-machine:~/Buildroot_decoder# sha1sum boot_decoder/zynqmp-zcu102-decoder.dtb\n    64c9c7b98ad555bd746e0b6168b97e2cf856db75  boot_decoder/zynqmp-zcu102-decoder.dtb\n</code></pre>"},{"location":"release_notes/V6_3_10_RELEASE_NOTES/","title":"Interoperability Release","text":"Release Tag Version Num Date RC8 V6.3.10_r11011 13-Dec-2022 RC7 V6.3.10_r11004 09-Dec-2022 RC6 V6.3.10_r9977 18-Nov-2022 RC5 V6.3.10_r9941 08-Nov-2022"},{"location":"release_notes/V6_3_10_RELEASE_NOTES/#6310_r11011-rc8","title":"6.3.10_r11011 RC8","text":"<p>This release is available in \\10.211.128.208\\tftpboot\\work\\Emerald_Releases</p> <p>Source branch: development_se_p2</p>"},{"location":"release_notes/V6_3_10_RELEASE_NOTES/#new-functionality-addedupdated","title":"New functionality added/updated","text":"<ul> <li>BUG Fixes</li> </ul>"},{"location":"release_notes/V6_3_10_RELEASE_NOTES/#known-issues-in-this-release","title":"Known Issues in this Release","text":"<ul> <li>The USB-IP (for USBr) on display port based TX boards is not functional and is still under active development.</li> <li>https://bboxjira.atlassian.net/issues/?filter=10621</li> </ul>"},{"location":"release_notes/V6_3_10_RELEASE_NOTES/#restrictions","title":"Restrictions","text":"<ul> <li>N/A</li> </ul>"},{"location":"release_notes/V6_3_10_RELEASE_NOTES/#issues-resolved-in-this-release","title":"Issues resolved in this Release","text":"Key Summary BUG-4964 6.3.10: 4K TX diagnostics are populating blank files for the encoder registers (will impact ability to diagnose video issues)"},{"location":"release_notes/V6_3_10_RELEASE_NOTES/#6310_r11004-rc7","title":"6.3.10_r11004 RC7","text":"<p>This release is available in \\10.211.128.208\\tftpboot\\work\\Emerald_Releases</p> <p>Source branch: development_se_p2</p>"},{"location":"release_notes/V6_3_10_RELEASE_NOTES/#new-functionality-addedupdated_1","title":"New functionality added/updated","text":"<ul> <li>BUG Fixes</li> </ul>"},{"location":"release_notes/V6_3_10_RELEASE_NOTES/#known-issues-in-this-release_1","title":"Known Issues in this Release","text":"<ul> <li>The USB-IP (for USBr) on display port based TX boards is not functional and is still under active development.</li> <li>https://bboxjira.atlassian.net/issues/?filter=10621</li> </ul>"},{"location":"release_notes/V6_3_10_RELEASE_NOTES/#restrictions_1","title":"Restrictions","text":"<ul> <li>N/A</li> </ul>"},{"location":"release_notes/V6_3_10_RELEASE_NOTES/#issues-resolved-in-this-release_1","title":"Issues resolved in this Release","text":"Key Summary BUG-4894 6.3.10: 4K RDP connections to Win 10 VM not working BUG-4890 Zerou_DVI (RC6) -Black screen in a connection"},{"location":"release_notes/V6_3_10_RELEASE_NOTES/#6310_r10977-rc6","title":"6.3.10_r10977 RC6","text":"<p>This release is available in \\10.211.128.208\\tftpboot\\work\\Emerald_Releases</p> <p>Source branch: development_se_p2</p>"},{"location":"release_notes/V6_3_10_RELEASE_NOTES/#new-functionality-addedupdated_2","title":"New functionality added/updated","text":"<ul> <li>BUG Fixes</li> </ul>"},{"location":"release_notes/V6_3_10_RELEASE_NOTES/#known-issues-in-this-release_2","title":"Known Issues in this Release","text":"<ul> <li>The USB-IP (for USBr) on display port based TX boards is not functional and is still under active development.</li> <li>https://bboxjira.atlassian.net/issues/?filter=10621</li> </ul>"},{"location":"release_notes/V6_3_10_RELEASE_NOTES/#restrictions_2","title":"Restrictions","text":"<ul> <li>N/A</li> </ul>"},{"location":"release_notes/V6_3_10_RELEASE_NOTES/#issues-resolved-in-this-release_2","title":"Issues resolved in this Release","text":"Key Summary BUG-4864 Diagnostics file does not generate the files for the stdp4020 register values (debug.log) BUG-4840 6.3.10: Video: Multi TX: black screen after res change in 4K TX lossless connection (2 x 4K TXs connected to NVIDIA Quadro P2000 GPU) BUG-4785 6.3.10: Lossless connections failing in dual mode automated connection soak"},{"location":"release_notes/V6_3_10_RELEASE_NOTES/#6310_r10941-rc5","title":"6.3.10_r10941 RC5","text":"<p>This release is available in \\10.211.128.208\\tftpboot\\work\\Emerald_Releases</p> <p>Source branch: development_se_p2</p>"},{"location":"release_notes/V6_3_10_RELEASE_NOTES/#new-functionality-addedupdated_3","title":"New functionality added/updated","text":"<ul> <li>BUG Fixes </li> </ul>"},{"location":"release_notes/V6_3_10_RELEASE_NOTES/#known-issues-in-this-release_3","title":"Known Issues in this Release","text":"<ul> <li>The USB-IP (for USBr) on display port based TX boards is not functional and is still under active development.</li> <li>https://bboxjira.atlassian.net/issues/?filter=10621</li> </ul>"},{"location":"release_notes/V6_3_10_RELEASE_NOTES/#restrictions_3","title":"Restrictions","text":"<ul> <li>N/A</li> </ul>"},{"location":"release_notes/V6_3_10_RELEASE_NOTES/#issues-resolved-in-this-release_3","title":"Issues resolved in this Release","text":"Key Summary BUG-4826 Atacom Switzerland - Touchscreen USB-R Support BUG-4821 6.3.10: 4K TX shared dual mode connection crashed after attempting to join an additional 4K RX Multicast connection (TX seg faulted) BUG-4820 ZeroU loses video feed on power cycle/reboot BUG-4817 EMD 6.3.10:  Transmitter  Diagnostics data config file is not generated from OSD BUG-4787 6.3.10: SE TX automation failed as server on the TX seg faulted BUG-4761 6.3.10: Video freezing while switching connection BUG-4686 6.3.10: SE Dual head freezes shared connection during SOAK test. BUG-4394 6.3.10: Video: Requirement DC0037 is failing due to lossless frame rate dipping below 38 FPS BUG-625 Shared Mode: RX clients that don't gracefully leave a shared connection will cause a temporary interruption to remaining RX clients"},{"location":"release_notes/V6_4_0_RELEASE_NOTES/","title":"Enhanced OSD Release","text":""},{"location":"release_notes/V6_4_0_RELEASE_NOTES/#v640_r11030-rc7","title":"V6.4.0_r11030 RC7","text":"<p>This release is available in \\10.211.128.208\\tftpboot\\work\\Emerald_Releases Source branch: develop_enhanced_osd/</p>"},{"location":"release_notes/V6_4_0_RELEASE_NOTES/#new-functionality-addedupdated","title":"New functionality added/updated","text":"<ul> <li>No new functionality. Bug fixes only.</li> </ul>"},{"location":"release_notes/V6_4_0_RELEASE_NOTES/#known-issues-in-this-release","title":"Known Issues in this Release","text":"<ul> <li>[Enhanced OSD] Issue navigator</li> </ul>"},{"location":"release_notes/V6_4_0_RELEASE_NOTES/#restrictions","title":"Restrictions","text":"<ul> <li>This release is applicable to all Transmitters but PE Receivers only</li> </ul>"},{"location":"release_notes/V6_4_0_RELEASE_NOTES/#issues-resolved-in-this-release","title":"Issues resolved in this Release","text":"Key Summary BUG-4954 Certain applications are Leaking Memory in 6.4.0 BUG-4927 Using the Overlay mechanism for the connectionLabel on top of a connection @1680x1050 results in corruption"},{"location":"release_notes/V6_4_0_RELEASE_NOTES/#v640_r11015-rc6","title":"V6.4.0_r11015 RC6","text":"<p>This release is available in \\10.211.128.208\\tftpboot\\work\\Emerald_Releases\\ Source branch: develop_enhanced_osd/</p>"},{"location":"release_notes/V6_4_0_RELEASE_NOTES/#new-functionality-addedupdated_1","title":"New functionality added/updated","text":"<ul> <li>No new functionality. Bug fixes only.</li> </ul>"},{"location":"release_notes/V6_4_0_RELEASE_NOTES/#known-issues-in-this-release_1","title":"Known Issues in this Release","text":"<ul> <li>[Enhanced OSD] Issue navigator</li> </ul>"},{"location":"release_notes/V6_4_0_RELEASE_NOTES/#restrictions_1","title":"Restrictions","text":"<ul> <li>This release is applicable to all Transmitters but PE Receivers only</li> </ul>"},{"location":"release_notes/V6_4_0_RELEASE_NOTES/#issues-resolved-in-this-release_1","title":"Issues resolved in this Release","text":"Key Summary BUG-4979 With OSD resolution set to anything other than Auto, exiting an RDP VM connection leaves the system in a bad state BUG-4976 2K RDP VM Connection - Need to handle Connection Restore BUG-4968 6.4.0: Control Bridge cannot launch connection from RX to TX running 6.4.0 BUG-4952 6.4: Shared interop, optimized connection freezing after subsequent launch (may freeze an existing shared connection with other RXs) BUG-4939 6.4.0. Alternate connection to a TX source displays blank screen on the RX with Labels enabled BUG-4937 6.4.0. Connection breaks and freezes OSD after changing resolution on the target PC BUG-4929 EMD 6.4.0: Connection inactivity timer is not working(Unmanaged setup) BUG-4926 EMD 6.4.0: Display Screen not recovered after hotplug-in Video cable(DVI)at Tx side BUG-4922 Add Support for SE DH (Doesn't have space in the FPGA for the overlay) in  6.4.0 BUG-4910 6.4.0: OSD--&gt;Control--&gt;Transmitter and provided Ip and apply, \"Error 5\" seen. BUG-4909 OSD not displaying correctly on PE @1680x1050 BUG-4906 6.4.0: Transmitter Option in OSD--&gt;Control--&gt;Transmitter is disabled BUG-4901 6.4.0. PE RX does not show an error when connecting to a Bonded Connection with private and shared connection from the same TX BUG-4899 6.4.0:Auto Connection was not Active when logon from OSD BUG-4897 Logging in Admin user after triggering force logout of ordinary user with active connection on Boxilla resulting incorrect (user privilege) layout in OSD BUG-4895 OSD is using almost 98.7% CPU on PE"},{"location":"release_notes/V6_4_0_RELEASE_NOTES/#v640_r10985-rc5","title":"V6.4.0_r10985 RC5","text":"<p>This release is available in \\10.211.128.208\\tftpboot\\work\\Emerald_Releases Source branch: develop_enhanced_osd/</p>"},{"location":"release_notes/V6_4_0_RELEASE_NOTES/#new-functionality-addedupdated_2","title":"New functionality added/updated","text":"<ul> <li>No new functionality .  Critical issue for ZeroU in 6.3.10  ported to this release. (see BUG-4890 below)</li> </ul>"},{"location":"release_notes/V6_4_0_RELEASE_NOTES/#known-issues-in-this-release_2","title":"Known Issues in this Release","text":"<ul> <li>[Enhanced OSD] Issue navigator</li> </ul>"},{"location":"release_notes/V6_4_0_RELEASE_NOTES/#restrictions_2","title":"Restrictions","text":"<ul> <li>This release is applicable to all Transmitters but PE Receivers only</li> </ul>"},{"location":"release_notes/V6_4_0_RELEASE_NOTES/#issues-resolved-in-this-release_2","title":"Issues resolved in this Release","text":"Key Summary BUG-4890 Zerou_DVI (RC6) -Black screen in a connection BUG-4876 Changing OSD resolution (after adding a new user) does not function correctly"},{"location":"release_notes/V6_4_0_RELEASE_NOTES/#640_r10982-rc4","title":"6.4.0_r10982 RC4","text":"<p>This release is available in \\10.211.128.208\\tftpboot\\work\\Emerald_Releases</p> <p>Source branch: develop_enhanced_osd</p>"},{"location":"release_notes/V6_4_0_RELEASE_NOTES/#new-functionality-addedupdated_3","title":"New functionality added/updated","text":"<ul> <li>Resolved issue which broke REST API</li> </ul>"},{"location":"release_notes/V6_4_0_RELEASE_NOTES/#known-issues-in-this-release_3","title":"Known Issues in this Release","text":"<ul> <li>[Enhanced OSD] Issue navigator</li> </ul>"},{"location":"release_notes/V6_4_0_RELEASE_NOTES/#restrictions_3","title":"Restrictions","text":"<ul> <li>This release is applicable to all Transmitters but PE Receivers only</li> </ul>"},{"location":"release_notes/V6_4_0_RELEASE_NOTES/#issues-resolved-in-this-release_3","title":"Issues resolved in this Release","text":"Key Summary BUG-4884 6.4.0: LACP Switchover is not showing/reflecting in Boxilla(LACP Info) page BUG-4886 6.4.0: PE RX does not show up as a Bonded Receiver and has no bonded connection in the list BUG-4829 Microsoft - EMD2000PE-R -After upgrade from 6.2.0&gt;6.3.3 no OSD displayed"},{"location":"release_notes/V6_4_0_RELEASE_NOTES/#640_r10962-rc3","title":"6.4.0_r10962 RC3","text":"<p>This release is available in \\10.211.128.208\\tftpboot\\work\\Emerald_Releases</p> <p>Source branch: develop_enhanced_osd</p>"},{"location":"release_notes/V6_4_0_RELEASE_NOTES/#new-functionality-addedupdated_4","title":"New functionality added/updated","text":"<ul> <li>Updates to connection test scripts \u2013 NOTE: To run on this version of software, you will need to add \u2018 \u201cenhanced_osd\u201d: \u201ctrue\u201d \u2019 to your config file (.json file)</li> <li>Merged up all changes to 6.3.10 RC5 (changes from Oct 6th to Nov 11th)</li> <li>Merged up fix for bug : BUG-1401 create-cert Shell script in user local</li> </ul>"},{"location":"release_notes/V6_4_0_RELEASE_NOTES/#known-issues-in-this-release_4","title":"Known Issues in this Release","text":"<ul> <li>[Enhanced OSD] Issue navigator</li> </ul>"},{"location":"release_notes/V6_4_0_RELEASE_NOTES/#restrictions_4","title":"Restrictions","text":"<ul> <li>This release is applicable to all Transmitters but PE Receivers only</li> </ul>"},{"location":"release_notes/V6_4_0_RELEASE_NOTES/#issues-resolved-in-this-release_4","title":"Issues resolved in this Release","text":"Key Summary BUG-4839 Logs getting flooded with \".....process still running waiting for termination\" BUG-4836 6.4.0: Error Message- 'Unknown Error:(-5)' displayed when active VM connection launched by Another Rx BUG-4690 LACP option shall be disabled/removed on SH, DH SE devices and ZeroU_DVI, ZeroU_DP"},{"location":"release_notes/V6_4_0_RELEASE_NOTES/#v640_r10934-rc2","title":"V6.4.0_r10934 RC2","text":"<p>This release is available in \\10.211.128.208\\tftpboot\\work\\Emerald_Releases</p> <p>Source branch: develop_enhanced_osd/</p>"},{"location":"release_notes/V6_4_0_RELEASE_NOTES/#new-functionality-addedupdated_5","title":"New functionality added/updated","text":"<ul> <li>Bug Fixes</li> <li>Change in MQTT Topic names to agreed Generic Format</li> </ul>"},{"location":"release_notes/V6_4_0_RELEASE_NOTES/#known-issues-in-this-release_5","title":"Known Issues in this Release","text":"<ul> <li>https://bboxjira.atlassian.net/issues/?filter=10666</li> </ul>"},{"location":"release_notes/V6_4_0_RELEASE_NOTES/#restrictions_5","title":"Restrictions","text":"<ul> <li>This release is applicable to all Transmitters but PE Receivers only.</li> </ul>"},{"location":"release_notes/V6_4_0_RELEASE_NOTES/#issues-resolved-in-this-release_5","title":"Issues resolved in this Release","text":"Key Summary BUG-4823 Spin off task from BUG-4808 - Cloudgui should NOT crash when the connection data is invalid BUG-4808 6.4.0: Cloudgui process has Crashed while switching bonded connection BUG-4792 Need to Add an OSD Restart Mechanism that works reliably when the OSD resolution is being changed BUG-4610 Enhanced OSD - Mosquitto Topics to follow agreed format BUG-4517 6.3.10: OSD - OSD GUI crashes when applying Network settings after disconnecting Ethernet cable \"Segmentation fault\" BUG-4189 6.3.10: OSD - Incorrect connection name is displayed in Disconnect reason error message when trying to connect to a Private Connection BUG-4006 6.3.1: OSD: OSD seg faulted back to connections screen after performing factory restore BUG-1662 RX: AD error message of \"Incorrect User Name or Password entered is incorrect\" is not consistently applied to authentication failures"},{"location":"release_notes/V6_4_0_RELEASE_NOTES/#v640_r10872-rc1","title":"V6.4.0_r10872 RC1","text":"<p>This release is available in \\10.211.128.208\\tftpboot\\work\\Emerald_Releases\\develop_enhanced_osd\\V6.4.0_r10872</p> <p>Source branch: develop_enhanced_osd</p>"},{"location":"release_notes/V6_4_0_RELEASE_NOTES/#new-functionality-addedupdated_6","title":"New functionality added/updated","text":"<ul> <li>BUG fixes</li> </ul>"},{"location":"release_notes/V6_4_0_RELEASE_NOTES/#known-issues-in-this-release_6","title":"Known Issues in this Release","text":"<ul> <li>The \u2018Connection Test\u2019 script isn\u2019t working in this release \u2013 Updated script will be available next week and can be dropped on any RX required to do a \u2018Connection Test\u2019</li> <li>JIRA Issue Filter</li> </ul>"},{"location":"release_notes/V6_4_0_RELEASE_NOTES/#restrictions_6","title":"Restrictions","text":"<ul> <li>This release is applicable to all Transmitters but PE Receivers only.  </li> </ul>"},{"location":"release_notes/V6_4_0_RELEASE_NOTES/#issues-resolved-in-this-release_6","title":"Issues resolved in this Release","text":"Key Summary BUG-4385 [Enhanced OSD]- While Launching Connection using Favorites(Hotkey+1) in loop, its get stuck on rdp VM after 7-8 switch BUG-4250 [Enhanced OSD]- While Launching RDP Connection, invalid error seen as well as login to OSD page at same time BUG-4309 [Enhanced-OSD] VM connection termination logs out user or reverts to saved logon user. BUG-44189 6.3.10: OSD - Incorrect connection name is displayed in Disconnect reason error message when trying to connect to a Private Connection BUG-4764 TASK: test interopability between devices with version 6.3.10 and 6.4.0 BUG-4733 Cloudgui crashes when exiting from an RDP VM connection on 2K BUG-4296 2K RDP VM connections Only exiting due to Error in the code BUG-4566 Need to remove the 'Connecting to target' mesage displayed on the OSD BUG-4547 Incorrect disconnect reason when connecting to a VM that isn't accessible BUG-4572 Having 4 Mqtt topics to pass the 4 ConnectionManager states to the OSD is Overkill BUG-3811 Hotkey + P (previous connection switching) does not work with favourites BUG-3530 RX OSD: invoking favourites from the OSD causes the connection list to jump to the top (first connection) BUG-4143 6.3.3: OSD: FR to have a counter on the OSD of \"Assigned connections\" versus \"Available connections\""},{"location":"release_notes/V6_4_0_RELEASE_NOTES/#v640_r10811-ec2","title":"V6.4.0_r10811 EC2","text":"<p>This release is available in \\10.211.128.208\\tftpboot\\work\\Emerald_Releases\\develop_enhanced_osd\\V6.4.0_r10811</p> <p>Source branch: develop_enhanced_osd</p>"},{"location":"release_notes/V6_4_0_RELEASE_NOTES/#new-functionality-addedupdated_7","title":"New functionality added/updated","text":"<ul> <li>BUG fixes</li> </ul>"},{"location":"release_notes/V6_4_0_RELEASE_NOTES/#known-issues-in-this-release_7","title":"Known Issues in this Release","text":"<ul> <li>RDP VM connections not fully working as yet.</li> <li>JIRA Issue Filter</li> </ul>"},{"location":"release_notes/V6_4_0_RELEASE_NOTES/#restrictions_7","title":"Restrictions","text":"<ul> <li>This release is applicable to all Transmitters but PE Receivers only.</li> </ul>"},{"location":"release_notes/V6_4_0_RELEASE_NOTES/#issues-resolved-in-this-release_7","title":"Issues resolved in this Release","text":"Key Summary BUG-4542 OSD Resolution change is generating multiple RES CHANGE Mqtt messages and isn't exiting the OSD BUG-4303 [Enhanced OSD]- Using Favorites key Launch the Persistent Enables Connection and remove Rj-45 Cable, Not able to Switch/Break/Previous connection BUG-4272 [Enhanced OSD]- Discover transmitter IP Address failing BUG-4260 [Enhanced OSD]-After TX restoring the option, the Mouse/Keyboard functionality stopped working in OSD screen BUG-4254 Enhanced OSD: If Persistent Connection is Enabled, Remove RJ-45 Cable blank screen comes, not able to Break the Connection BUG-4227 OSD is splitting on Connection launched(any connection) followed by break connection or immediately change the OSD resolution"},{"location":"release_notes/V6_5_0_RELEASE_NOTES/","title":"New USBr UDC release","text":""},{"location":"release_notes/V6_5_0_RELEASE_NOTES/#650_r11096-rc3","title":"6.5.0_r11096 RC3","text":"<p>This release is available in \\10.211.128.208\\tftpboot\\work\\Emerald_Releases\\development_se_p2\\V6.5.0_r11096</p> <p>Source branch: development_se_p2</p>"},{"location":"release_notes/V6_5_0_RELEASE_NOTES/#new-functionality-addedupdated","title":"New functionality added/updated","text":"<ul> <li>BUG fixes</li> <li>BULK endpoint halt command is now enabled (STALL packets)</li> </ul>"},{"location":"release_notes/V6_5_0_RELEASE_NOTES/#known-issues-in-this-release","title":"Known Issues in this Release","text":"<ul> <li>Devices with more than 1 ctrl endpoint and 4 data endpoints (5 IP hw endpoints) are not expected to work</li> <li>Sandisk flashdrives enumerate but are unstable (only seen on new UDC based boards)</li> <li>Hotplugging more than one flashdrive simultaneously might disconnect active connection (only seen on new UDC based boards)</li> <li>Sony Felicia NFC card reader does not work properly (only seen on new UDC based boards)</li> <li>Hope Industrial and ELO ET2201L touchscreens do not enumerate (only seen on new UDC based boards)</li> <li>IPCore/FPGA is still under active debugging/development</li> <li>JIRA Issue Filter</li> </ul>"},{"location":"release_notes/V6_5_0_RELEASE_NOTES/#restrictions","title":"Restrictions","text":"<ul> <li>N/A</li> </ul>"},{"location":"release_notes/V6_5_0_RELEASE_NOTES/#issues-resolved-in-this-release","title":"Issues resolved in this Release","text":"Key Summary BUG-5109 6.5.0: Incorrect device image is seen when upgrading in an Unmanaged Setup. BUG-5011 6.5.0: Aluratek SD card reader does not enumerate and work properly in New platform devices BUG-5010 6.5.0: Sandisk flash drives do not enumerate and work properly in New platform devices BUG-4911 AWSUDCIP: Data toggle bit error after BULK endpoint has been halted (STALL packet) BUG-4382 AWSUDCIP: Linux mass storage device is unreliable. Bulk endpoint matching communication doesn't work. Bulk STALL with DATA transfer doesn't work."},{"location":"release_notes/V6_5_0_RELEASE_NOTES/#650_r11080-rc2","title":"6.5.0_r11080 RC2","text":"<p>This release is available in \\10.211.128.208\\tftpboot\\work\\Emerald_Releases\\development_se_p2\\V6.5.0_r11080</p> <p>Source branch: development_se_p2</p>"},{"location":"release_notes/V6_5_0_RELEASE_NOTES/#new-functionality-addedupdated_1","title":"New functionality added/updated","text":"<ul> <li>BUG fixes</li> <li>6.3.10 merge</li> </ul>"},{"location":"release_notes/V6_5_0_RELEASE_NOTES/#known-issues-in-this-release_1","title":"Known Issues in this Release","text":"<ul> <li>Devices with more than 1 ctrl endpoint and 4 data endpoints (5 IP hw endpoints) are not expected to work</li> <li>BULK endpoint halt mechanism doesn't work on new IP hardware</li> <li>IPCore/FPGA is still under active debugging/development</li> <li>JIRA Issue Filter</li> </ul>"},{"location":"release_notes/V6_5_0_RELEASE_NOTES/#restrictions_1","title":"Restrictions","text":"<ul> <li>N/A</li> </ul>"},{"location":"release_notes/V6_5_0_RELEASE_NOTES/#issues-resolved-in-this-release_1","title":"Issues resolved in this Release","text":"Key Summary BUG-5052 Porting EDID changes from 6.4.0 into 6.5.0 for Microsoft scenario BUG-5040 6.5.0: Flashdrive + Audio device copy_to_user() kernel function errors BUG-5000 AWSUDCIP: Audio device stops receiving data IN payloads after BAD PACKET (CRC16 error) BUG-4998 USBr dosent recover after USB hot plug on the server side. BUG-4900 EMD 6.4.0: Upgrade failed when do lower to higher version BUG-4888 AWSUDCIP: Audio device stops receiving data payloads after BAD PACKET (CRC16 error) BUG-4881 AWSUDCIP: (txmitted&gt;req-&gt;len) : String descriptors greater than 29 characters long results in a warning from awsudcip_data_packet_transmitted that the txmitted count is greater than req-&gt;length BUG-4846 AWSUDCIP: Board hang during bootup when awsudcip driver reads the RESET REG BUG-4781 AWSUDCIP: after a BULK TX_DATA_PACKET interrupt, EP0[IBA] contains 0x10440 when it should contain something like (0x610000)"},{"location":"release_notes/V6_5_0_RELEASE_NOTES/#650_r11035-rc1","title":"6.5.0_r11035 RC1","text":"<p>This release is available in \\10.211.128.208\\tftpboot\\work\\Emerald_Releases\\V6.5.0_r11035</p> <p>Source branch: develop_aws_ip</p>"},{"location":"release_notes/V6_5_0_RELEASE_NOTES/#new-functionality-addedupdated_2","title":"New functionality added/updated","text":"<ul> <li>BUG fixes</li> </ul>"},{"location":"release_notes/V6_5_0_RELEASE_NOTES/#known-issues-in-this-release_2","title":"Known Issues in this Release","text":"<ul> <li>Devices with more than 1 ctrl endpoint and 4 data endpoints (5 IP hw endpoints) are not expected to work</li> <li>Audio devices suspected to be unstable on new platform. (being worked on)</li> <li>Tx doesn't fully recover from USB cable disconnection during KVM session with USBR.</li> <li>Boards with AXI CHIP2CHIP bus may hang during boot</li> <li>IPCore/FPGA is still under active debugging/development</li> <li>JIRA Issue Filter</li> </ul>"},{"location":"release_notes/V6_5_0_RELEASE_NOTES/#restrictions_2","title":"Restrictions","text":"<ul> <li>N/A</li> </ul>"},{"location":"release_notes/V6_5_0_RELEASE_NOTES/#issues-resolved-in-this-release_2","title":"Issues resolved in this Release","text":"Key Summary BUG-4814 6.5.0: USB devices does not enumerate for New Platform Devices. BUG-4951 6.5.0: USB hub enumerates but does not show any pen drive's contents in Linux BUG-4960 6.5.0: Amazon Headset gives static hissing sound (new device) BUG-4990 Annotating corrib_syslog() declaration with attribute ((format (printf...)) shows warnings for incorrect format strings BUG-4995 6.5.0: Connecting USB device freezes and exits connection with Kernel Panic error [Linux]."},{"location":"release_notes/V6_5_0_RELEASE_NOTES/#650_r10995-ec2","title":"6.5.0_r10995 EC2","text":"<p>This release is available in \\10.211.128.208\\tftpboot\\work\\Emerald_Releases\\develop_aws_ip\\V6.5.0_r10995</p> <p>Source branch: develop_aws_ip</p>"},{"location":"release_notes/V6_5_0_RELEASE_NOTES/#new-functionality-addedupdated_3","title":"New functionality added/updated","text":"<ul> <li>Two AWS IPs are enabled and can be used simultaneously</li> <li>Devices up to 5 hw endpoints are supported on each IP</li> <li>AXI bus error detection at booting time</li> <li>f_virtual.ko driver is compatible with net2272 and AWS IP</li> </ul>"},{"location":"release_notes/V6_5_0_RELEASE_NOTES/#known-issues-in-this-release_3","title":"Known Issues in this Release","text":"<ul> <li>Devices with more than 1 ctrl endpoint and 4 data endpoints (5 IP hw endpoints) are not expected to work</li> <li>Flashdrives are unstable</li> <li>Audio devices suspected to be unstable on EMDPESH and EMDSEDH. To be confirmed by test lab.</li> <li>IPCore/FPGA is still under active debugging/development</li> <li>JIRA Issue Filter</li> </ul>"},{"location":"release_notes/V6_5_0_RELEASE_NOTES/#restrictions_3","title":"Restrictions","text":"<ul> <li>N/A</li> </ul>"},{"location":"release_notes/V6_5_0_RELEASE_NOTES/#issues-resolved-in-this-release_3","title":"Issues resolved in this Release","text":"Key Summary BUG-4881 AWSUDCIP: (txmitted&gt;req-&gt;len) : String descriptors greater than 29 characters long results in a warning from awsudcip_data_packet_transmitted that the txmitted count is greater than req-&gt;length BUG-4852 6.5.0: Wacom Tablet PTH660 doesn't enumerate on Win10 BUG-4847 6.5.0: USB devices do not enumerate on old platform SE TX BUG-4781 AWSUDCIP: after a BULK TX_DATA_PACKET interrupt, EP0[IBA] contains 0x10440 when it should contain something like (0x610000) BUG-4862 AWSUDCIP: Data error on bulk transfer with 1024 size buffer BUG-4867 AWSUDCIP: Control transfer error, incorrect IN transfer size reported in Endpoint IN Buffer Address register BUG-4830 6.5.0: Jabra 510 speaker mute Functionality does not work with USB-r."},{"location":"release_notes/V6_5_0_RELEASE_NOTES/#v650_r10880-ec1","title":"V6.5.0_r10880 EC1","text":"<p>This release is available in \\10.211.128.208\\tftpboot\\work\\Emerald_Releases\\develop_aws_ip\\V6.5.0_r10880</p> <p>Source branch: develop_aws_ip</p>"},{"location":"release_notes/V6_5_0_RELEASE_NOTES/#new-functionality-addedupdated_4","title":"New functionality added/updated","text":"<ul> <li>Two AWS IPs are enabled for USBR but only one has been characterized</li> <li>f_virtual.ko driver is compatible with net2272 and AWS IP</li> </ul>"},{"location":"release_notes/V6_5_0_RELEASE_NOTES/#known-issues-in-this-release_4","title":"Known Issues in this Release","text":"<ul> <li>Only 1 AWS USB Device Controller is fully characterized and tested. Second instance is not expected to work.</li> <li>Devices with more than 1 ctrl endpoint and 2 data endpoints (3 IP hw endpoints) are not expected to work</li> <li>IPCore/FPGA is still under active debugging/development</li> <li>Wacom PTH-660 doesn\u2019t work in USBr end to end tests. Currently investigating</li> <li>JIRA Issue Filter</li> </ul>"},{"location":"release_notes/V6_5_0_RELEASE_NOTES/#restrictions_4","title":"Restrictions","text":"<ul> <li>N/A</li> </ul>"},{"location":"release_notes/V6_5_0_RELEASE_NOTES/#issues-resolved-in-this-release_4","title":"Issues resolved in this Release","text":"Key Summary BUG-4211 AWSUDCIP: Isochronous endpoints fail on New Platform board BUG-4757 AWSUDCIP: Spurious \"Transmitted Data Packet\" interrupt on isoch OUT EP with 8 byte packets"},{"location":"release_notes/V6_6_0_RELEASE_NOTES/","title":"V6.6.0","text":""},{"location":"release_notes/V6_6_0_RELEASE_NOTES/#660_r11220-rc7","title":"6.6.0_r11220 RC7","text":"<p>This release is available in \\10.211.128.208\\tftpboot\\work\\Emerald_Releases</p> <p>Source branch: development_se_p2</p>"},{"location":"release_notes/V6_6_0_RELEASE_NOTES/#new-functionality-addedupdated","title":"New functionality added/updated","text":"<ul> <li>Bug fix only.</li> </ul>"},{"location":"release_notes/V6_6_0_RELEASE_NOTES/#known-issues-in-this-release","title":"Known Issues in this Release","text":"<ul> <li>N/A</li> </ul>"},{"location":"release_notes/V6_6_0_RELEASE_NOTES/#restrictions","title":"Restrictions","text":"<ul> <li>N/A</li> </ul>"},{"location":"release_notes/V6_6_0_RELEASE_NOTES/#issues-resolved-in-this-release","title":"Issues resolved in this Release","text":"Key Summary BUG-5641 EmeraldPE Variants should have updated Best Quality Values BUG-5634 With OSD Resolution set to Auto, if you launch a 2K RDP VM connection and it fails, you end up with no OSD BUG-5617 6.6.0: Launching bonded connection message is still seen and OSD is frozen post exit after a bonded connection. BUG-5599 OSD crash in the case non existing connection name edited in \"Search\" field and connection initialized by using Favorite key BUG-5593 EMD-6.6.0- Touch functionality on any Touchscreen OSD is not aligned to cursor BUG-5579 Keeping the OSD Alive means that DirectFB is constantly running - This is causing problems with Keyboard LEDs BUG-5570 6.6.0: OSD freezes after exiting a Win 10 VM connection and hitting search field in Connections TAB BUG-5539 Keyboard Control Signals Synchronization between OS and RX BUG-5189 Tijssen Electro Zeeland BV - Garmin touchscreen shared connection support"},{"location":"release_notes/V6_6_0_RELEASE_NOTES/#660_r11201-rc6","title":"6.6.0_r11201 RC6","text":"<p>This release is available in \\10.211.128.208\\tftpboot\\work\\Emerald_Releases</p> <p>Source branch: development_se_p2</p>"},{"location":"release_notes/V6_6_0_RELEASE_NOTES/#new-functionality-addedupdated_1","title":"New functionality added/updated","text":"<ul> <li>N/A</li> </ul>"},{"location":"release_notes/V6_6_0_RELEASE_NOTES/#known-issues-in-this-release_1","title":"Known Issues in this Release","text":"<ul> <li>N/A</li> </ul>"},{"location":"release_notes/V6_6_0_RELEASE_NOTES/#restrictions_1","title":"Restrictions","text":"<ul> <li>N/A</li> </ul>"},{"location":"release_notes/V6_6_0_RELEASE_NOTES/#issues-resolved-in-this-release_1","title":"Issues resolved in this Release","text":"Key Summary BUG-5490 EMD-6.6.0: French Keyboard issue on SE RX BUG-5455 6.6.0: 4K-TX-R2 goes offline after terminating connection from failed USB enumeration BUG-5454 EMD-6.6.0: 2K RX - When a user navigates to OSD &gt; Connection search bar ,using  mouse right click, unexpected menu displayed BUG-5370 Failed to init Syn/Fin response from TX while making a shared connection from SDKVM BUG-5194 6.5.0 RC3 - After terminating a connection, no touch functionality on OSD ,using NBC Elo Touch screen  with any new DP TX &amp; with any 2KRX BUG-5193 6.5.0 RC3 - After terminating :  PE-PE (DVI) BUG-4670 KVM Connections: KVM connections froze and blocked RXs from connecting"},{"location":"release_notes/V6_6_0_RELEASE_NOTES/#660_r11189-rc5","title":"6.6.0_r11189 RC5","text":"<p>This release is available in \\10.211.128.208\\tftpboot\\work\\Emerald_Releases\\development_se_p2\\V6.6.0_r11189</p> <p>Source branch: development_se_p2</p>"},{"location":"release_notes/V6_6_0_RELEASE_NOTES/#new-functionality-addedupdated_2","title":"New functionality added/updated","text":"<ul> <li>N/A</li> </ul>"},{"location":"release_notes/V6_6_0_RELEASE_NOTES/#known-issues-in-this-release_2","title":"Known Issues in this Release","text":"<ul> <li>N/A</li> </ul>"},{"location":"release_notes/V6_6_0_RELEASE_NOTES/#restrictions_2","title":"Restrictions","text":"<ul> <li>N/A</li> </ul>"},{"location":"release_notes/V6_6_0_RELEASE_NOTES/#issues-resolved-in-this-release_2","title":"Issues resolved in this Release","text":"Key Summary BUG-5456 6.6.0_11182 - EMD2002PE-T-R2 goes offline when using two headsets connected to RX one after the other BUG-5449 If Cloudgui process crashes while a connection is running, the result is that the connection is running but the OSD is being displayed BUG-5400 Issue with Keys getting through to the OSD while the connection is alive - Seen by John Hickey"},{"location":"release_notes/V6_6_0_RELEASE_NOTES/#fpga-versions-in-this-release","title":"FPGA Versions in this Release","text":"Datecode PCode TNK_ID AVAE_ID USB_IP md5sum HDF_Path 230131 a1 1214 311 bbd874f16836443fe0722b2290237f75 emeraldse/encoder/single/system.hdf 230131 21 1214 311 490a8b6a1377de00259a7543265e7146 emeraldse/decoder/single/system.hdf 230131 a9 1214 311 d3e3c4ea6aaf902be9aa7289a09a6518 emeraldse/encoder/dual/system.hdf 230131 29 1214 311 70289a6a1edfc10fba83471a116f7640 emeraldse/decoder/dual/system.hdf 230131 91 1214 311 5fd73e7961edfcbd571b0f5959853e16 zerou/encoder/single/dvi/system.hdf 230131 C9 1214 311 803ea0d7a69e4d1513ec60312c3cbac7 zerou/encoder/single/dp/system.hdf 230131 b9 1214 311 e0314f518f940e8421a9464493938960 emeraldpe/encoder/dual/system.hdf 230131 39 1214 311 46ed0da17095b9eefbd99e2447baeed2 emeraldpe/decoder/dual/system.hdf 230131 c1 1214 311 f616dc83c158bca42b95570c878cc25f emeraldpe/encoder/single/system.hdf 230131 41 1214 311 ca3a269582b898604f5c0d11eafee506 emeraldpe/decoder/single/system.hdf 230131 19 1214 311 bd6eccf925fa96aa00445c1831257931 boot/hdf/Emerald_Decoder_ph2_wrapper.hdf 230131 99 1214 311 ddcadbd51f805721b7d14c387cbe4a59 boot/hdf/Emerald_Encoder_Basic_wrapper.hdf 230306 F1 1214 311 c00691e2d3f9a9a296ae70b060ddee4c boot/hdf/Emerald_Encoder_Basic_Artix_wrapper.hdf 230131 e1 1214 311 ab7fb3122568e8d16f0156f424a55c31 emerald2k/encoder/EMDPEDP/single/system.hdf 230131 d1 1214 311 b1526833b598a601efe86449838f37c4 emerald2k/encoder/EMDPEDP/dual/system.hdf 230316 d9 1214 311 0x6b 5434c08b56c186244ba267b0771f25e2 emerald2k/encoder/EMDSEDP/single/system.hdf 230131 e9 1214 311 645b982310ca15ff8cc9db2aba4e60b6 emerald2k/encoder/EMDSEDP/dual/system.hdf 0x6b 30fa5876b582cf895bcac9d0257571f9 emerald2k/encoder/artix_image/artix_fpga.bin 0x6b fa64582226b33280daabfd3943b8c401 boot/hdf/artix_fpga.bin 230316 f9 1214 311 0x6b 0e0895699a12823ce45bb8c7c7a13af0 emerald2k/encoder/EMDSER2/single/system.hdf 230131 01 1214 3011 0ed7dcfa536c87078b5d3c2ef9f594ee emerald2k/encoder/EMDPER2/single/system.hdf 230131 09 1214 311 5efbef6e7b6bd57f90cd5789227a9c8f emerald2k/encoder/EMDPER2/dual/system.hdf"},{"location":"release_notes/V6_6_0_RELEASE_NOTES/#660_r11182-rc4","title":"6.6.0_r11182 RC4","text":"<p>This release is available in \\10.211.128.208\\tftpboot\\work\\Emerald_Releases\\development_se_p2\\V6.6.0_r11182</p> <p>Source branch: development_se_p2</p>"},{"location":"release_notes/V6_6_0_RELEASE_NOTES/#new-functionality-addedupdated_3","title":"New functionality added/updated","text":"<ul> <li>N/A</li> </ul>"},{"location":"release_notes/V6_6_0_RELEASE_NOTES/#known-issues-in-this-release_3","title":"Known Issues in this Release","text":"<ul> <li>N/A</li> </ul>"},{"location":"release_notes/V6_6_0_RELEASE_NOTES/#restrictions_3","title":"Restrictions","text":"<ul> <li>N/A</li> </ul>"},{"location":"release_notes/V6_6_0_RELEASE_NOTES/#issues-resolved-in-this-release_3","title":"Issues resolved in this Release","text":"Key Summary BUG-5400 Issue with Keys getting through to the OSD while the connection is alive - Seen by John Hickey BUG-5182 6.5.0 RC3 - After terminating PE-PE connection, no touch functionality on OSD ,using ELO screen num 3"},{"location":"release_notes/V6_6_0_RELEASE_NOTES/#660_r11177-rc3","title":"6.6.0_r11177 RC3","text":"<p>This release is available in \\10.211.128.208\\tftpboot\\work\\Emerald_Releases\\development_se_p2/V6.6.0_r11177</p> <p>Source branch: development_se_p2</p>"},{"location":"release_notes/V6_6_0_RELEASE_NOTES/#new-functionality-addedupdated_4","title":"New functionality added/updated","text":"<ul> <li>USB IP has been upgraded to version 0x0133006b</li> </ul>"},{"location":"release_notes/V6_6_0_RELEASE_NOTES/#known-issues-in-this-release_4","title":"Known Issues in this Release","text":"<ul> <li>Swiss-German keyboard support has been back out due to issues handling non-english characters in usernames/passwords</li> <li>See the bug list (6.6.0 filter)</li> </ul>"},{"location":"release_notes/V6_6_0_RELEASE_NOTES/#restrictions_4","title":"Restrictions","text":"<ul> <li>N/A</li> </ul>"},{"location":"release_notes/V6_6_0_RELEASE_NOTES/#issues-resolved-in-this-release_4","title":"Issues resolved in this Release","text":"Key Summary BUG-5365 Bonded group RX: when bonded connection launched by Favorite hot-key OSD doesn't display correctly highlighted last active connection BUG-5206 AWSUDCIP: CTRL IN payload corruption after BAD PACKET (CRC16 error) BUG-4869 AWSUDCIP: IP sends malformed BULK payload after BULK IN transaction retry BUG-4780 AWSUDCIP: IP sends packet full of zeros after IN ctrl transaction retry"},{"location":"release_notes/V6_6_0_RELEASE_NOTES/#660_r11166-rc2","title":"6.6.0_r11166 RC2","text":"<p>This release is available in \\10.211.128.208\\tftpboot\\work\\Emerald_Releases</p> <p>Source branch: development_se_p2</p>"},{"location":"release_notes/V6_6_0_RELEASE_NOTES/#new-functionality-addedupdated_5","title":"New functionality added/updated","text":"<ul> <li>Added support for Emerald 4K TX with Artix </li> <li>Changed the Support for Touchscreens over shared connections via Absolute Mouse (added in RC1) to be ON by default. It can be disabled over SSH.</li> </ul>"},{"location":"release_notes/V6_6_0_RELEASE_NOTES/#known-issues-in-this-release_5","title":"Known Issues in this Release","text":"<ul> <li>See the bug list (6.6.0 filter)</li> </ul>"},{"location":"release_notes/V6_6_0_RELEASE_NOTES/#restrictions_5","title":"Restrictions","text":"<ul> <li>N/A</li> </ul>"},{"location":"release_notes/V6_6_0_RELEASE_NOTES/#issues-resolved-in-this-release_5","title":"Issues resolved in this Release","text":"Key Summary BUG-5340 6.6.0: Dual display port connection does not provide dual audio option on the source in New Platform devices BUG-5330 Syslog cleanups - Related to resolutions and incorcorrect / misleading messages BUG-5292 Call to MSGRCV Failing in Cloudgui with Error Code 4 (EINTR) BUG-5289 6.6.0 RC1 inactivity Timers -2K/4K - default OSD  Local  timeout value should be set to 0 and active to 2 min BUG-5288 6.6.0 RC1 inactivity Timers -4K - after upgrade units to 6.6.0 the Local OSD inactivity timer doesn't function as expected BUG-5287 discovery code does not allocate sufficient memory for tokens BUG-5286 6.6.0 RC1 inactivity Timers -2K - after upgrade units to 6.6.0 the Local OSD inactivity timer doesn't function as expected BUG-5254 (EC1) -6.6.0 - bonded SE RX OSD doesn't display correctly highlighted  last active connection BUG-5041 6.5.0: Error Message- 'Unknown Error:(-5)' displayed when active VM connection launched by Another Rx BUG-5023 6.4.0: Bonded RXs may drop from connection if a bonded RX which already dropped from an ethernet disconnection has its ethernet reconnected BUG-5010 6.5.0: Sandisk flash drives do not enumerate and work properly in New platform devices BUG-4955 Need to Configure the Emerald SE DH to use the Primary Mode Popup mechanism to display ConnectionLabel"},{"location":"release_notes/V6_6_0_RELEASE_NOTES/#660_r11141-rc1","title":"6.6.0_r11141 RC1","text":"<p>This release is available in \\10.211.128.208\\tftpboot\\work\\Emerald_Releases Source branch: develop/</p>"},{"location":"release_notes/V6_6_0_RELEASE_NOTES/#new-functionality-addedupdated_6","title":"New functionality added/updated","text":"<ul> <li>Inactivity Timers:<ul> <li>Ability to configured Inactivity timers on a managed receiver via the OSD added</li> <li>Rest API added to allow Boxilla to configure inactivity timers on a per RX basis </li> </ul> </li> <li>Cutthrough<ul> <li>Enabled cutthrough for Lossless (4k) connections.</li> </ul> </li> <li>New Boards<ul> <li>Added support for DVI SE and PE R2 boards (New boards with net2272 replaced  with Artix implementation)</li> </ul> </li> <li>Support for Touchscreens over shared connection via Absolute Mouse added. This is a POC for a scecific customer. It is turned OFF by default. It can be enabled over SSH.</li> </ul>"},{"location":"release_notes/V6_6_0_RELEASE_NOTES/#known-issues-in-this-release_6","title":"Known Issues in this Release","text":"<ul> <li>See the bug list (6.6.0 Filter) </li> </ul>"},{"location":"release_notes/V6_6_0_RELEASE_NOTES/#restrictions_6","title":"Restrictions","text":"<ul> <li>N/A</li> </ul>"},{"location":"release_notes/V6_6_0_RELEASE_NOTES/#issues-resolved-in-this-release_6","title":"Issues resolved in this Release","text":"Key Summary BUG-5247 Japanese Keyboard request to fix additional keys and language notation on OSD BUG-5195 Persistance:- Attempting to connect to a Persistent connection (That is offline) results in the OSD being displayed but not functioning BUG-5189 Tijssen Electro Zeeland BV - Garmin touchscreen shared connection support BUG-5158 Appliance-4K-V6.6.0_r11113 - OSD shown over launched connection BUG-5035 6.4.0: Persistence connections which fail to launch make it impossible to launch any other connections BUG-5021 6.4.0: RX OSD may fail to reflect that it's part of a bonded RX group (after creating group on Boxilla) BUG-5019 EMD 6.4.0: Auto Connection displays as blank when reboot the Rx from OSD (Auto logon user/Unmanaged setup) BUG-5002 6.4: OSD: Minor pixel corruption in background after terminating connection back to OSD BUG-4912 6.4.0. PE RX does not show an error when connecting to an active Bonded Connection through favorites key BUG-4849 Elo TC- RC5- Touch functionality doesn't work in a connection BUG-4778 6.3.10: Label: Label fails to display when RDP resolution is set to 640 x 480 BUG-3292 RX - TX: Switchover in LACP failed with error that connection was already in use by the same user [BUG-441] (nttps:///bboxjira.atlassian.net/browse/BUG-441) OSD: Strongly recommend (field experience) scaling OSD size if Auto setting for OSD causes it to display at 4K"},{"location":"release_notes/V6_6_1_RELEASE_NOTES/","title":"6.6.1 MQTT Hotfix","text":"Release Tag Version Num Date RC1 V6.6.1_r11301 12-July-2023"},{"location":"release_notes/V6_6_1_RELEASE_NOTES/#661_r11301-rc1","title":"6.6.1_r11301 RC1","text":"<p>This release is available in \\10.211.128.208\\tftpboot\\work\\Emerald_Releases</p> <p>Source branch: development_se_p2</p>"},{"location":"release_notes/V6_6_1_RELEASE_NOTES/#new-functionality-addedupdated","title":"New functionality added/updated","text":"<ul> <li>MQTT Broker is no longer accessible from outside IP Addresses.</li> </ul>"},{"location":"release_notes/V6_6_1_RELEASE_NOTES/#known-issues-in-this-release","title":"Known Issues in this Release","text":"<ul> <li>N/A</li> </ul>"},{"location":"release_notes/V6_6_1_RELEASE_NOTES/#restrictions","title":"Restrictions","text":"<ul> <li>N/A</li> </ul>"},{"location":"release_notes/V6_6_1_RELEASE_NOTES/#issues-resolved-in-this-release","title":"Issues resolved in this Release","text":"Key Summary BUG-5833 MQTT Broker Running on appliances allows access from external Clients"},{"location":"release_notes/V6_6_70_RELEASE_NOTES/","title":"V6.6.70","text":""},{"location":"release_notes/V6_6_70_RELEASE_NOTES/#6670_r11241-june-14th-2023","title":"6.6.70_r11241 - June 14th 2023","text":"<p>This release is available in \\10.211.128.208\\tftpboot\\work\\Emerald_Releases\\development_se_p2_channel9_r11220_LS-716</p> <p>Source branch: development_se_p2_channel9_r11220_LS-716</p>"},{"location":"release_notes/V6_6_70_RELEASE_NOTES/#new-functionality-addedupdated","title":"New functionality added/updated","text":"<ul> <li>LS-716 - This build is going to remove USB device with VID/PID 0x173e/0x003e (Devlin KBD) from USBr whitelist. This means that it will get detected as a keyboard and it will go through HID channel.</li> </ul>"},{"location":"release_notes/V6_6_70_RELEASE_NOTES/#known-issues-in-this-release","title":"Known Issues in this Release","text":"<ul> <li>Same as V6.6.0 RC7</li> </ul>"},{"location":"release_notes/V6_6_70_RELEASE_NOTES/#restrictions","title":"Restrictions","text":"<ul> <li>Same as V6.6.0 RC7</li> </ul>"},{"location":"release_notes/V6_6_70_RELEASE_NOTES/#issues-resolved-in-this-release","title":"Issues resolved in this Release","text":"Key Summary"},{"location":"release_notes/V6_6_71_RELEASE_NOTES/","title":"V6.6.71","text":""},{"location":"release_notes/V6_6_71_RELEASE_NOTES/#6671_r11341-july-28th-2023","title":"6.6.71_r11341 - July 28th 2023","text":"<p>This release is available in \\10.211.128.208\\tftpboot\\work\\Emerald_Releases\\development_se_p2_channel9_r11220_LS-716</p> <p>Source branch: development_se_p2_channel9_r11220_LS-716</p>"},{"location":"release_notes/V6_6_71_RELEASE_NOTES/#new-functionality-addedupdated","title":"New functionality added/updated","text":"<ul> <li>MQTT Broker is no longer accessible from outside IP Addresses. (Same as V6.6.1 RC1)</li> </ul>"},{"location":"release_notes/V6_6_71_RELEASE_NOTES/#known-issues-in-this-release","title":"Known Issues in this Release","text":"<ul> <li>Same as V6.6.1 RC1</li> </ul>"},{"location":"release_notes/V6_6_71_RELEASE_NOTES/#restrictions","title":"Restrictions","text":"<ul> <li>Same as V6.6.1 RC1</li> </ul>"},{"location":"release_notes/V6_6_71_RELEASE_NOTES/#issues-resolved-in-this-release","title":"Issues resolved in this Release","text":"Key Summary"},{"location":"release_notes/V6_7_0_RELEASE_NOTES/","title":"Release Name Text","text":""},{"location":"release_notes/V6_7_0_RELEASE_NOTES/#670_r11627-rc6-20231013","title":"6.7.0_r11627 RC6  2023/10/13","text":"<p>This release is available in \\10.211.128.208\\tftpboot\\work\\Emerald_Releases</p> <p>Source branch: development_se_p2</p>"},{"location":"release_notes/V6_7_0_RELEASE_NOTES/#new-functionality-addedupdated","title":"New functionality added/updated","text":"<ul> <li>N/A</li> </ul>"},{"location":"release_notes/V6_7_0_RELEASE_NOTES/#known-issues-in-this-release","title":"Known Issues in this Release","text":"<ul> <li>N/A</li> </ul>"},{"location":"release_notes/V6_7_0_RELEASE_NOTES/#restrictions","title":"Restrictions","text":"<ul> <li>N/A</li> </ul>"},{"location":"release_notes/V6_7_0_RELEASE_NOTES/#minimum-test","title":"Minimum test","text":"<ul> <li>BUG-6172/6157/6154/6153/6161 - Test that the system functions without a monitor connected to the RX (Set the OSD Resolution to a non-auto value) (Use REST commands etc)</li> <li>BUG-6171 - Test VM connections for all RX types</li> </ul>"},{"location":"release_notes/V6_7_0_RELEASE_NOTES/#issues-resolved-in-this-release","title":"Issues resolved in this Release","text":"Key Summary BUG-6172 6.7.0 : Unable to make a shared connection. BUG-6171 Corrupted screen displayed for VM connection on 6.7.0 (RC3&gt;RC5) BUG-6157 Boxilla 4.8.0: Global Settings are not updated for 4K devices in the CloudDataA.xml. BUG-6154 Boxilla-4.8.0:NBR-API Failure: Unable to get the device alert through the API BUG-6153 Boxilla-4.8.0: \"Failed to activate source\" error message appears while launching the 4K connection. BUG-6161 Boxilla-4.8.0:NBR API Failure: The user is unable to login through the API."},{"location":"release_notes/V6_7_0_RELEASE_NOTES/#fpga-versions-in-this-release","title":"FPGA Versions in this release","text":"Datecode PCode SVN_REV TNK_ID AVAE_ID USB_IP svn_status md5sum HDF_Path 230620 a1 38 1214 312 cc61189425848a5750df4244795866a8 emeraldse/encoder/single/system.hdf 230620 a1 38 1214 312 cc61189425848a5750df4244795866a8 [/FPGA_bit_files/]Emerald_SE_Encoder_230620_r38_tnk_r1214_avae_r312.sdk 230620 21 40 1214 312 348350115dc0eb3c03cf140e878e69d7 emeraldse/decoder/single/system.hdf 230620 21 40 1214 312 348350115dc0eb3c03cf140e878e69d7 [/FPGA_bit_files/]Emerald_SE_Decoder_230620_r40_tnk_r1214_avae_r312.sdk 230620 a9 39 1214 312 aac90d856f2bf5c2587f694b554f893a emeraldse/encoder/dual/system.hdf 230620 a9 39 1214 312 aac90d856f2bf5c2587f694b554f893a [/FPGA_bit_files/]Emerald_SE_Encoder_DH_230620_r39_tnk_r1214_avae_r312.sdk 230620 29 41 1214 312 acdff08db68c65dd507c7c8d3df4bcb5 emeraldse/decoder/dual/system.hdf 230620 29 41 1214 312 acdff08db68c65dd507c7c8d3df4bcb5 [/FPGA_bit_files/]Emerald_SE_Decoder_DH_230620_r41_tnk_r1214_avae_r312.sdk 230620 91 52 1214 312 cb4c007b9f6bb180fb09025863ae1ce5 zerou/encoder/single/dvi/system.hdf 230620 91 52 1214 312 cb4c007b9f6bb180fb09025863ae1ce5 [/FPGA_bit_files/]Emerald_Zero_U_Encoder_230620_r52_tnk_r1214_avae_r312_dvi_r107.sdk 230620 C9 57 1214 312 d1b1f8ddf86ef643b27c49168ec6e277 zerou/encoder/single/dp/system.hdf 230620 C9 57 1214 312 d1b1f8ddf86ef643b27c49168ec6e277 [/FPGA_bit_files/]Emerald_Zero_U_DP_Encoder_230620_r57_tnk_r1214_avae_r312.sdk 230620 b9 54 1214 312 84aa7d5d1a770bf671e443e09a114c05 emeraldpe/encoder/dual/system.hdf 230620 b9 54 1214 312 84aa7d5d1a770bf671e443e09a114c05 [/FPGA_bit_files/]Emerald_2K_Encoder_230620_r54_tnk_r1214_avae_r312.sdk 230620 39 53 1214 312 aae9bc461076b78fd360775bc87c0801 emeraldpe/decoder/dual/system.hdf 230620 39 53 1214 312 aae9bc461076b78fd360775bc87c0801 [/FPGA_bit_files/]Emerald_2K_Decoder_230620_r53_tnk_r1214_avae_r312.sdk 230620 c1 55 1214 312 595c950cbca29280a075dfa1296027c3 emeraldpe/encoder/single/system.hdf 230620 c1 55 1214 312 595c950cbca29280a075dfa1296027c3 [/FPGA_bit_files/]Emerald_2K_SH_Encoder_230620_r55_tnk_r1214_avae_r312.sdk 230620 41 56 1214 312 8ce05bdf03c9cbf90917e99b592c5e29 emeraldpe/decoder/single/system.hdf 230620 41 56 1214 312 8ce05bdf03c9cbf90917e99b592c5e29 [/FPGA_bit_files/]Emerald_2K_SH_Decoder_230620_r56_tnk_r1214_avae_r312.sdk 230620 19 9999 1214 312 19015afa48dbb008cc3b6c7db1e118d2 boot/hdf/Emerald_Decoder_ph2_wrapper.hdf 230620 19 9999 1214 312 19015afa48dbb008cc3b6c7db1e118d2 [/FPGA_bit_files/]Emerald_2K_4K_Decoder_230620_tnk_r1214_avae_r312.sdk 230620 99 9999 1214 312 d7e1e3dd46d166163245322a3a025d4c boot/hdf/Emerald_Encoder_Basic_wrapper.hdf 230620 99 9999 1214 312 d7e1e3dd46d166163245322a3a025d4c [/FPGA_bit_files/]Emerald_2K_4K_Encoder_230620_tnk_r1214_avae_r312.sdk 230620 F1 9999 1214 312 5b28a143bfad103190d18805c94ac7dd boot/hdf/Emerald_Encoder_Basic_Artix_wrapper.hdf 230620 F1 9999 1214 312 5b28a143bfad103190d18805c94ac7dd [/FPGA_bit_files/]Emerald_2K_4K_Artix_Encoder_230620_tnk_r1214_avae_r312.sdk 230620 e1 60 1214 312 a8ef24fd9c89ebb6285e1fd3dd7a4563 emerald2k/encoder/EMDPEDP/single/system.hdf 230620 e1 60 1214 312 a8ef24fd9c89ebb6285e1fd3dd7a4563 [/FPGA_bit_files/]Emerald_2K_DP_SH_Encoder_230620_r60_tnk_r1214_avae_r312.sdk 230620 d1 58 1214 312 c02994f99af2e34d2ae01f5cd667047e emerald2k/encoder/EMDPEDP/dual/system.hdf 230620 d1 58 1214 312 c02994f99af2e34d2ae01f5cd667047e [/FPGA_bit_files/]Emerald_2K_DP_Encoder_230620_r58_tnk_r1214_avae_r312.sdk 230725 59 65 1214 312 45023394322af1e6c3db74b75dbe28b2 emerald2k/decoder/EMDSEDP/single/system.hdf 230725 59 65 1214 312 45023394322af1e6c3db74b75dbe28b2 [/FPGA_bit_files/]Emerald_SE_DP_Decoder_230725_r65_tnk_r1214_avae_r312.sdk 230823 d9 59 1214 312 0x7b 25f44cc4fdafbba2bb2a4d9f66655649 emerald2k/encoder/EMDSEDP/single/system.hdf 230823 d9 59 1214 312 0x7b 25f44cc4fdafbba2bb2a4d9f66655649 [/FPGA_bit_files/]Emerald_SE_DP_Encoder_230823_r59_tnk_r1214_avae_r312_usb_r7b.sdk 230629 e9 61 1214 312 e733093ef5f3a44bc9d1a22f27aead6d emerald2k/encoder/EMDSEDP/dual/system.hdf 230629 e9 61 1214 312 e733093ef5f3a44bc9d1a22f27aead6d [/FPGA_bit_files/]Emerald_SE_DP_Encoder_DH_230629_r61_tnk_r1214_avae_r312.sdk 230823 00 0x7b 573158f7e0adb637ff1c3c2b6438c52d emerald2k/encoder/artix_image/artix_fpga.bin 230823 00 0x7b 573158f7e0adb637ff1c3c2b6438c52d [/FPGA_bit_files/]Artix2K_Encoder_230823_USB_r7b.sdk 230823 00 0x7b ef2c2ffd3d33060e2144874ce54e10b2 boot/hdf/artix_fpga.bin 230823 00 0x7b ef2c2ffd3d33060e2144874ce54e10b2 [/FPGA_bit_files/]Artix4K_Encoder_230823_USB_r7b.sdk 230823 f9 63 1214 312 0x7b e7c0fcdb100061519ec858b122aa14df emerald2k/encoder/EMDSER2/single/system.hdf 230823 f9 63 1214 312 0x7b e7c0fcdb100061519ec858b122aa14df [/FPGA_bit_files/]Emerald_SE_INTUSB_Encoder_230823_r63_tnk_r1214_avae_r312_usb_r7b.sdk 230620 181 62 1214 312 a3da8be37610ff186cd5867bdca4fdd8 emerald2k/encoder/EMDPER2/single/system.hdf 230620 181 62 1214 312 a3da8be37610ff186cd5867bdca4fdd8 [/FPGA_bit_files/]Emerald_2K_ARTIX_SH_Encoder_230620_r62_tnk_r1214_avae_r312.sdk 230620 189 64 1214 312 51aba9836aee87a34fa896caf4e29fd8 emerald2k/encoder/EMDPER2/dual/system.hdf 230620 189 64 1214 312 51aba9836aee87a34fa896caf4e29fd8 [/FPGA_bit_files/]Emerald_2K_ARTIX_Encoder_230620_r64_tnk_r1214_avae_r312.sdk"},{"location":"release_notes/V6_7_0_RELEASE_NOTES/#670_r11622-rc5-20231010","title":"6.7.0_r11622 RC5  2023/10/10","text":"<p>This release is available in \\10.211.128.208\\tftpboot\\work\\Emerald_Releases</p> <p>Source branch: development_se_p2</p>"},{"location":"release_notes/V6_7_0_RELEASE_NOTES/#new-functionality-addedupdated_1","title":"New functionality added/updated","text":"<ul> <li>N/A</li> </ul>"},{"location":"release_notes/V6_7_0_RELEASE_NOTES/#known-issues-in-this-release_1","title":"Known Issues in this Release","text":"<ul> <li>N/A</li> </ul>"},{"location":"release_notes/V6_7_0_RELEASE_NOTES/#restrictions_1","title":"Restrictions","text":"<ul> <li>N/A</li> </ul>"},{"location":"release_notes/V6_7_0_RELEASE_NOTES/#minimum-test_1","title":"Minimum test","text":"<ul> <li>BUG-6143/6141/6099 - Hold down windows key and drag with mouse to see if the OSD can be moved (at the OSD and in a connection)</li> <li>BUG-6149 - validate as per bug description</li> <li>BUG-6163 - Engineering issue - No specific testing required.</li> </ul>"},{"location":"release_notes/V6_7_0_RELEASE_NOTES/#issues-resolved-in-this-release_1","title":"Issues resolved in this Release","text":"Key Summary BUG-6163 Non Errors being logged as errors in Syslog BUG-6149 6.7.0 Cannot switch from a private/shared connection to a bonded connection (with same private/shared connection) using favorites key on a receiver. BUG-6143 Unresponsive OSD with mis-aligned mouse, on SE RX with 6.6.1 BUG-6141 Panoptimo- Unresponsive OSD menus with mis-aligned mouse after connection exit on 2k SEDH devices BUG-6099 Panoptimo- corrupted OSD after upgrade 2k devices  from 6.5.0 to 6.6.0"},{"location":"release_notes/V6_7_0_RELEASE_NOTES/#fpga-versions-in-this-release_1","title":"FPGA Versions in this release","text":"Datecode PCode SVN_REV TNK_ID AVAE_ID USB_IP svn_status md5sum HDF_Path 230620 a1 38 1214 312 cc61189425848a5750df4244795866a8 emeraldse/encoder/single/system.hdf 230620 a1 38 1214 312 cc61189425848a5750df4244795866a8 [/FPGA_bit_files/]Emerald_SE_Encoder_230620_r38_tnk_r1214_avae_r312.sdk 230620 21 40 1214 312 348350115dc0eb3c03cf140e878e69d7 emeraldse/decoder/single/system.hdf 230620 21 40 1214 312 348350115dc0eb3c03cf140e878e69d7 [/FPGA_bit_files/]Emerald_SE_Decoder_230620_r40_tnk_r1214_avae_r312.sdk 230620 a9 39 1214 312 aac90d856f2bf5c2587f694b554f893a emeraldse/encoder/dual/system.hdf 230620 a9 39 1214 312 aac90d856f2bf5c2587f694b554f893a [/FPGA_bit_files/]Emerald_SE_Encoder_DH_230620_r39_tnk_r1214_avae_r312.sdk 230620 29 41 1214 312 acdff08db68c65dd507c7c8d3df4bcb5 emeraldse/decoder/dual/system.hdf 230620 29 41 1214 312 acdff08db68c65dd507c7c8d3df4bcb5 [/FPGA_bit_files/]Emerald_SE_Decoder_DH_230620_r41_tnk_r1214_avae_r312.sdk 230620 91 52 1214 312 cb4c007b9f6bb180fb09025863ae1ce5 zerou/encoder/single/dvi/system.hdf 230620 91 52 1214 312 cb4c007b9f6bb180fb09025863ae1ce5 [/FPGA_bit_files/]Emerald_Zero_U_Encoder_230620_r52_tnk_r1214_avae_r312_dvi_r107.sdk 230620 C9 57 1214 312 d1b1f8ddf86ef643b27c49168ec6e277 zerou/encoder/single/dp/system.hdf 230620 C9 57 1214 312 d1b1f8ddf86ef643b27c49168ec6e277 [/FPGA_bit_files/]Emerald_Zero_U_DP_Encoder_230620_r57_tnk_r1214_avae_r312.sdk 230620 b9 54 1214 312 84aa7d5d1a770bf671e443e09a114c05 emeraldpe/encoder/dual/system.hdf 230620 b9 54 1214 312 84aa7d5d1a770bf671e443e09a114c05 [/FPGA_bit_files/]Emerald_2K_Encoder_230620_r54_tnk_r1214_avae_r312.sdk 230620 39 53 1214 312 aae9bc461076b78fd360775bc87c0801 emeraldpe/decoder/dual/system.hdf 230620 39 53 1214 312 aae9bc461076b78fd360775bc87c0801 [/FPGA_bit_files/]Emerald_2K_Decoder_230620_r53_tnk_r1214_avae_r312.sdk 230620 c1 55 1214 312 595c950cbca29280a075dfa1296027c3 emeraldpe/encoder/single/system.hdf 230620 c1 55 1214 312 595c950cbca29280a075dfa1296027c3 [/FPGA_bit_files/]Emerald_2K_SH_Encoder_230620_r55_tnk_r1214_avae_r312.sdk 230620 41 56 1214 312 8ce05bdf03c9cbf90917e99b592c5e29 emeraldpe/decoder/single/system.hdf 230620 41 56 1214 312 8ce05bdf03c9cbf90917e99b592c5e29 [/FPGA_bit_files/]Emerald_2K_SH_Decoder_230620_r56_tnk_r1214_avae_r312.sdk 230620 19 9999 1214 312 19015afa48dbb008cc3b6c7db1e118d2 boot/hdf/Emerald_Decoder_ph2_wrapper.hdf 230620 19 9999 1214 312 19015afa48dbb008cc3b6c7db1e118d2 [/FPGA_bit_files/]Emerald_2K_4K_Decoder_230620_tnk_r1214_avae_r312.sdk 230620 99 9999 1214 312 d7e1e3dd46d166163245322a3a025d4c boot/hdf/Emerald_Encoder_Basic_wrapper.hdf 230620 99 9999 1214 312 d7e1e3dd46d166163245322a3a025d4c [/FPGA_bit_files/]Emerald_2K_4K_Encoder_230620_tnk_r1214_avae_r312.sdk 230620 F1 9999 1214 312 5b28a143bfad103190d18805c94ac7dd boot/hdf/Emerald_Encoder_Basic_Artix_wrapper.hdf 230620 F1 9999 1214 312 5b28a143bfad103190d18805c94ac7dd [/FPGA_bit_files/]Emerald_2K_4K_Artix_Encoder_230620_tnk_r1214_avae_r312.sdk 230620 e1 60 1214 312 a8ef24fd9c89ebb6285e1fd3dd7a4563 emerald2k/encoder/EMDPEDP/single/system.hdf 230620 e1 60 1214 312 a8ef24fd9c89ebb6285e1fd3dd7a4563 [/FPGA_bit_files/]Emerald_2K_DP_SH_Encoder_230620_r60_tnk_r1214_avae_r312.sdk 230620 d1 58 1214 312 c02994f99af2e34d2ae01f5cd667047e emerald2k/encoder/EMDPEDP/dual/system.hdf 230620 d1 58 1214 312 c02994f99af2e34d2ae01f5cd667047e [/FPGA_bit_files/]Emerald_2K_DP_Encoder_230620_r58_tnk_r1214_avae_r312.sdk 230725 59 65 1214 312 45023394322af1e6c3db74b75dbe28b2 emerald2k/decoder/EMDSEDP/single/system.hdf 230725 59 65 1214 312 45023394322af1e6c3db74b75dbe28b2 [/FPGA_bit_files/]Emerald_SE_DP_Decoder_230725_r65_tnk_r1214_avae_r312.sdk 230823 d9 59 1214 312 0x7b 25f44cc4fdafbba2bb2a4d9f66655649 emerald2k/encoder/EMDSEDP/single/system.hdf 230823 d9 59 1214 312 0x7b 25f44cc4fdafbba2bb2a4d9f66655649 [/FPGA_bit_files/]Emerald_SE_DP_Encoder_230823_r59_tnk_r1214_avae_r312_usb_r7b.sdk 230629 e9 61 1214 312 e733093ef5f3a44bc9d1a22f27aead6d emerald2k/encoder/EMDSEDP/dual/system.hdf 230629 e9 61 1214 312 e733093ef5f3a44bc9d1a22f27aead6d [/FPGA_bit_files/]Emerald_SE_DP_Encoder_DH_230629_r61_tnk_r1214_avae_r312.sdk 230823 00 0x7b 573158f7e0adb637ff1c3c2b6438c52d emerald2k/encoder/artix_image/artix_fpga.bin 230823 00 0x7b 573158f7e0adb637ff1c3c2b6438c52d [/FPGA_bit_files/]Artix2K_Encoder_230823_USB_r7b.sdk 230823 00 0x7b ef2c2ffd3d33060e2144874ce54e10b2 boot/hdf/artix_fpga.bin 230823 00 0x7b ef2c2ffd3d33060e2144874ce54e10b2 [/FPGA_bit_files/]Artix4K_Encoder_230823_USB_r7b.sdk 230823 f9 63 1214 312 0x7b e7c0fcdb100061519ec858b122aa14df emerald2k/encoder/EMDSER2/single/system.hdf 230823 f9 63 1214 312 0x7b e7c0fcdb100061519ec858b122aa14df [/FPGA_bit_files/]Emerald_SE_INTUSB_Encoder_230823_r63_tnk_r1214_avae_r312_usb_r7b.sdk 230620 181 62 1214 312 a3da8be37610ff186cd5867bdca4fdd8 emerald2k/encoder/EMDPER2/single/system.hdf 230620 181 62 1214 312 a3da8be37610ff186cd5867bdca4fdd8 [/FPGA_bit_files/]Emerald_2K_ARTIX_SH_Encoder_230620_r62_tnk_r1214_avae_r312.sdk 230620 189 64 1214 312 51aba9836aee87a34fa896caf4e29fd8 emerald2k/encoder/EMDPER2/dual/system.hdf 230620 189 64 1214 312 51aba9836aee87a34fa896caf4e29fd8 [/FPGA_bit_files/]Emerald_2K_ARTIX_Encoder_230620_r64_tnk_r1214_avae_r312.sdk"},{"location":"release_notes/V6_7_0_RELEASE_NOTES/#670_r11587-rc4-20230929","title":"6.7.0_r11587 RC4 2023/09/29","text":"<p>This release is available in \\10.211.128.208\\tftpboot\\work\\Emerald_Releases</p> <p>Source branch: development_se_p2</p>"},{"location":"release_notes/V6_7_0_RELEASE_NOTES/#new-functionality-addedupdated_2","title":"New functionality added/updated","text":"<ul> <li>N/A</li> </ul>"},{"location":"release_notes/V6_7_0_RELEASE_NOTES/#known-issues-in-this-release_2","title":"Known Issues in this Release","text":"<ul> <li>N/A</li> </ul>"},{"location":"release_notes/V6_7_0_RELEASE_NOTES/#restrictions_2","title":"Restrictions","text":"<ul> <li>N/A</li> </ul>"},{"location":"release_notes/V6_7_0_RELEASE_NOTES/#minimum-test_2","title":"Minimum test","text":"<ul> <li>BUG-6118: Make/Break/SwitchPrev/SwitchFavourite Connections - 4K/2K required.</li> <li>BUG-6108: Test mouse movement between OSDs on multiple RXs is fluid</li> <li>BUG-6085: Check bug for details on what/how to test</li> <li>BUG-6061: See bug for details</li> <li>BUG-5037: See bug for details</li> </ul>"},{"location":"release_notes/V6_7_0_RELEASE_NOTES/#issues-resolved-in-this-release_2","title":"Issues resolved in this Release","text":"Key Summary BUG-6118 6.6.7 - Corrupted background displayed  when the user switching to the previous connection on  4k BUG-6108 6.7.0: RX OSD does not support full movement of mouse with Freedom Glide and Switch in line BUG-6085 Connection status reported active connections with 'Boxilla' other than logged in user BUG-6061 6.7.0: Extended shared soak with ZeroU-DP experienced a black screen for ~2 1/2 hours BUG-5037 Enhancement request - To review and modify Alerts syslog -very confusing to the end user"},{"location":"release_notes/V6_7_0_RELEASE_NOTES/#fpga-versions-in-this-release_2","title":"FPGA Versions in this release","text":"Datecode PCode SVN_REV TNK_ID AVAE_ID USB_IP svn_status md5sum HDF_Path 230620 a1 38 1214 312 cc61189425848a5750df4244795866a8 emeraldse/encoder/single/system.hdf 230620 a1 38 1214 312 cc61189425848a5750df4244795866a8 [/FPGA_bit_files/]Emerald_SE_Encoder_230620_r38_tnk_r1214_avae_r312.sdk 230620 21 40 1214 312 348350115dc0eb3c03cf140e878e69d7 emeraldse/decoder/single/system.hdf 230620 21 40 1214 312 348350115dc0eb3c03cf140e878e69d7 [/FPGA_bit_files/]Emerald_SE_Decoder_230620_r40_tnk_r1214_avae_r312.sdk 230620 a9 39 1214 312 aac90d856f2bf5c2587f694b554f893a emeraldse/encoder/dual/system.hdf 230620 a9 39 1214 312 aac90d856f2bf5c2587f694b554f893a [/FPGA_bit_files/]Emerald_SE_Encoder_DH_230620_r39_tnk_r1214_avae_r312.sdk 230620 29 41 1214 312 acdff08db68c65dd507c7c8d3df4bcb5 emeraldse/decoder/dual/system.hdf 230620 29 41 1214 312 acdff08db68c65dd507c7c8d3df4bcb5 [/FPGA_bit_files/]Emerald_SE_Decoder_DH_230620_r41_tnk_r1214_avae_r312.sdk 230620 91 52 1214 312 cb4c007b9f6bb180fb09025863ae1ce5 zerou/encoder/single/dvi/system.hdf 230620 91 52 1214 312 cb4c007b9f6bb180fb09025863ae1ce5 [/FPGA_bit_files/]Emerald_Zero_U_Encoder_230620_r52_tnk_r1214_avae_r312_dvi_r107.sdk 230620 C9 57 1214 312 d1b1f8ddf86ef643b27c49168ec6e277 zerou/encoder/single/dp/system.hdf 230620 C9 57 1214 312 d1b1f8ddf86ef643b27c49168ec6e277 [/FPGA_bit_files/]Emerald_Zero_U_DP_Encoder_230620_r57_tnk_r1214_avae_r312.sdk 230620 b9 54 1214 312 84aa7d5d1a770bf671e443e09a114c05 emeraldpe/encoder/dual/system.hdf 230620 b9 54 1214 312 84aa7d5d1a770bf671e443e09a114c05 [/FPGA_bit_files/]Emerald_2K_Encoder_230620_r54_tnk_r1214_avae_r312.sdk 230620 39 53 1214 312 aae9bc461076b78fd360775bc87c0801 emeraldpe/decoder/dual/system.hdf 230620 39 53 1214 312 aae9bc461076b78fd360775bc87c0801 [/FPGA_bit_files/]Emerald_2K_Decoder_230620_r53_tnk_r1214_avae_r312.sdk 230620 c1 55 1214 312 595c950cbca29280a075dfa1296027c3 emeraldpe/encoder/single/system.hdf 230620 c1 55 1214 312 595c950cbca29280a075dfa1296027c3 [/FPGA_bit_files/]Emerald_2K_SH_Encoder_230620_r55_tnk_r1214_avae_r312.sdk 230620 41 56 1214 312 8ce05bdf03c9cbf90917e99b592c5e29 emeraldpe/decoder/single/system.hdf 230620 41 56 1214 312 8ce05bdf03c9cbf90917e99b592c5e29 [/FPGA_bit_files/]Emerald_2K_SH_Decoder_230620_r56_tnk_r1214_avae_r312.sdk 230620 19 9999 1214 312 19015afa48dbb008cc3b6c7db1e118d2 boot/hdf/Emerald_Decoder_ph2_wrapper.hdf 230620 19 9999 1214 312 19015afa48dbb008cc3b6c7db1e118d2 [/FPGA_bit_files/]Emerald_2K_4K_Decoder_230620_tnk_r1214_avae_r312.sdk 230620 99 9999 1214 312 d7e1e3dd46d166163245322a3a025d4c boot/hdf/Emerald_Encoder_Basic_wrapper.hdf 230620 99 9999 1214 312 d7e1e3dd46d166163245322a3a025d4c [/FPGA_bit_files/]Emerald_2K_4K_Encoder_230620_tnk_r1214_avae_r312.sdk 230620 F1 9999 1214 312 5b28a143bfad103190d18805c94ac7dd boot/hdf/Emerald_Encoder_Basic_Artix_wrapper.hdf 230620 F1 9999 1214 312 5b28a143bfad103190d18805c94ac7dd [/FPGA_bit_files/]Emerald_2K_4K_Artix_Encoder_230620_tnk_r1214_avae_r312.sdk 230620 e1 60 1214 312 a8ef24fd9c89ebb6285e1fd3dd7a4563 emerald2k/encoder/EMDPEDP/single/system.hdf 230620 e1 60 1214 312 a8ef24fd9c89ebb6285e1fd3dd7a4563 [/FPGA_bit_files/]Emerald_2K_DP_SH_Encoder_230620_r60_tnk_r1214_avae_r312.sdk 230620 d1 58 1214 312 c02994f99af2e34d2ae01f5cd667047e emerald2k/encoder/EMDPEDP/dual/system.hdf 230620 d1 58 1214 312 c02994f99af2e34d2ae01f5cd667047e [/FPGA_bit_files/]Emerald_2K_DP_Encoder_230620_r58_tnk_r1214_avae_r312.sdk 230725 59 65 1214 312 45023394322af1e6c3db74b75dbe28b2 emerald2k/decoder/EMDSEDP/single/system.hdf 230725 59 65 1214 312 45023394322af1e6c3db74b75dbe28b2 [/FPGA_bit_files/]Emerald_SE_DP_Decoder_230725_r65_tnk_r1214_avae_r312.sdk 230823 d9 59 1214 312 0x7b 25f44cc4fdafbba2bb2a4d9f66655649 emerald2k/encoder/EMDSEDP/single/system.hdf 230823 d9 59 1214 312 0x7b 25f44cc4fdafbba2bb2a4d9f66655649 [/FPGA_bit_files/]Emerald_SE_DP_Encoder_230823_r59_tnk_r1214_avae_r312_usb_r7b.sdk 230629 e9 61 1214 312 e733093ef5f3a44bc9d1a22f27aead6d emerald2k/encoder/EMDSEDP/dual/system.hdf 230629 e9 61 1214 312 e733093ef5f3a44bc9d1a22f27aead6d [/FPGA_bit_files/]Emerald_SE_DP_Encoder_DH_230629_r61_tnk_r1214_avae_r312.sdk 230823 00 0x7b 573158f7e0adb637ff1c3c2b6438c52d emerald2k/encoder/artix_image/artix_fpga.bin 230823 00 0x7b 573158f7e0adb637ff1c3c2b6438c52d [/FPGA_bit_files/]Artix2K_Encoder_230823_USB_r7b.sdk 230823 00 0x7b ef2c2ffd3d33060e2144874ce54e10b2 boot/hdf/artix_fpga.bin 230823 00 0x7b ef2c2ffd3d33060e2144874ce54e10b2 [/FPGA_bit_files/]Artix4K_Encoder_230823_USB_r7b.sdk 230823 f9 63 1214 312 0x7b e7c0fcdb100061519ec858b122aa14df emerald2k/encoder/EMDSER2/single/system.hdf 230823 f9 63 1214 312 0x7b e7c0fcdb100061519ec858b122aa14df [/FPGA_bit_files/]Emerald_SE_INTUSB_Encoder_230823_r63_tnk_r1214_avae_r312_usb_r7b.sdk 230620 181 62 1214 312 a3da8be37610ff186cd5867bdca4fdd8 emerald2k/encoder/EMDPER2/single/system.hdf 230620 181 62 1214 312 a3da8be37610ff186cd5867bdca4fdd8 [/FPGA_bit_files/]Emerald_2K_ARTIX_SH_Encoder_230620_r62_tnk_r1214_avae_r312.sdk 230620 189 64 1214 312 51aba9836aee87a34fa896caf4e29fd8 emerald2k/encoder/EMDPER2/dual/system.hdf 230620 189 64 1214 312 51aba9836aee87a34fa896caf4e29fd8 [/FPGA_bit_files/]Emerald_2K_ARTIX_Encoder_230620_r64_tnk_r1214_avae_r312.sdk"},{"location":"release_notes/V6_7_0_RELEASE_NOTES/#670_r11531-rc3-20230918","title":"6.7.0_r11531 RC3 2023/09/18","text":"<p>This release is available in \\10.211.128.208\\tftpboot\\work\\Emerald_Releases</p> <p>Source branch: development_se_p2</p>"},{"location":"release_notes/V6_7_0_RELEASE_NOTES/#new-functionality-addedupdated_3","title":"New functionality added/updated","text":"<ul> <li>N/A</li> </ul>"},{"location":"release_notes/V6_7_0_RELEASE_NOTES/#known-issues-in-this-release_3","title":"Known Issues in this Release","text":"<ul> <li>N/A</li> </ul>"},{"location":"release_notes/V6_7_0_RELEASE_NOTES/#restrictions_3","title":"Restrictions","text":"<ul> <li>N/A</li> </ul>"},{"location":"release_notes/V6_7_0_RELEASE_NOTES/#issues-resolved-in-this-release_3","title":"Issues resolved in this Release","text":"Key Summary BUG-6115 6.7.0 OSD is still seen on connection when launching an VMware Horizon view with 4K Receiver BUG-6113 6.7.0 OSD is still seen on connection when launching an SSH connection with 4K Receiver BUG-6107 OSD: Connecting message should indicate dinamic processing BUG-6098 Chyron keyboard requires to function via USBr channel BUG-6095 6.7.0 4K RX exits connection after hotplugging USB Audio headset and adapter BUG-6081 6.7.0 RX-TX connection freezes after hotplugging USB audio adapters. BUG-6073 6.7.0. User does not get any feedback when launching a VM connection with incorrect IP Address. BUG-6071 Dfreerdp client (2K RDP VM connection) fails to exit, leaving RX locked up BUG-6062 6.7.0 Bonded connection does not exit back to OSD with inactivity timers BUG-6043 Hotkey exit does NOT work while a connection is being setup BUG-6002 6.7.0 USB audio adapter causes distortion in audio on old and new platform devices BUG-5979 6.7.0 Dual mouse pointer seen when exiting a VM connection in New EMD2000SE-DP-R receiver. BUG-5942 Add Lane count and Speed to stdp4020 driver BUG-5803 USBr- Hot plugging Sweex  external USB sound card from 4KRX locks up 4KTX (EMD4000) BUG-2990 RX: should we inform the user when a login on a managed RX fails to contact Boxilla to sync the database?"},{"location":"release_notes/V6_7_0_RELEASE_NOTES/#fpga-versions-in-this-release_3","title":"FPGA Versions in this release","text":"Datecode PCode SVN_REV TNK_ID AVAE_ID USB_IP svn_status md5sum HDF_Path 230620 a1 38 1214 312 cc61189425848a5750df4244795866a8 emeraldse/encoder/single/system.hdf 230620 a1 38 1214 312 cc61189425848a5750df4244795866a8 [/FPGA_bit_files/]Emerald_SE_Encoder_230620_r38_tnk_r1214_avae_r312.sdk 230620 21 40 1214 312 348350115dc0eb3c03cf140e878e69d7 emeraldse/decoder/single/system.hdf 230620 21 40 1214 312 348350115dc0eb3c03cf140e878e69d7 [/FPGA_bit_files/]Emerald_SE_Decoder_230620_r40_tnk_r1214_avae_r312.sdk 230620 a9 39 1214 312 aac90d856f2bf5c2587f694b554f893a emeraldse/encoder/dual/system.hdf 230620 a9 39 1214 312 aac90d856f2bf5c2587f694b554f893a [/FPGA_bit_files/]Emerald_SE_Encoder_DH_230620_r39_tnk_r1214_avae_r312.sdk 230620 29 41 1214 312 acdff08db68c65dd507c7c8d3df4bcb5 emeraldse/decoder/dual/system.hdf 230620 29 41 1214 312 acdff08db68c65dd507c7c8d3df4bcb5 [/FPGA_bit_files/]Emerald_SE_Decoder_DH_230620_r41_tnk_r1214_avae_r312.sdk 230620 91 52 1214 312 cb4c007b9f6bb180fb09025863ae1ce5 zerou/encoder/single/dvi/system.hdf 230620 91 52 1214 312 cb4c007b9f6bb180fb09025863ae1ce5 [/FPGA_bit_files/]Emerald_Zero_U_Encoder_230620_r52_tnk_r1214_avae_r312_dvi_r107.sdk 230620 C9 57 1214 312 d1b1f8ddf86ef643b27c49168ec6e277 zerou/encoder/single/dp/system.hdf 230620 C9 57 1214 312 d1b1f8ddf86ef643b27c49168ec6e277 [/FPGA_bit_files/]Emerald_Zero_U_DP_Encoder_230620_r57_tnk_r1214_avae_r312.sdk 230620 b9 54 1214 312 84aa7d5d1a770bf671e443e09a114c05 emeraldpe/encoder/dual/system.hdf 230620 b9 54 1214 312 84aa7d5d1a770bf671e443e09a114c05 [/FPGA_bit_files/]Emerald_2K_Encoder_230620_r54_tnk_r1214_avae_r312.sdk 230620 39 53 1214 312 aae9bc461076b78fd360775bc87c0801 emeraldpe/decoder/dual/system.hdf 230620 39 53 1214 312 aae9bc461076b78fd360775bc87c0801 [/FPGA_bit_files/]Emerald_2K_Decoder_230620_r53_tnk_r1214_avae_r312.sdk 230620 c1 55 1214 312 595c950cbca29280a075dfa1296027c3 emeraldpe/encoder/single/system.hdf 230620 c1 55 1214 312 595c950cbca29280a075dfa1296027c3 [/FPGA_bit_files/]Emerald_2K_SH_Encoder_230620_r55_tnk_r1214_avae_r312.sdk 230620 41 56 1214 312 8ce05bdf03c9cbf90917e99b592c5e29 emeraldpe/decoder/single/system.hdf 230620 41 56 1214 312 8ce05bdf03c9cbf90917e99b592c5e29 [/FPGA_bit_files/]Emerald_2K_SH_Decoder_230620_r56_tnk_r1214_avae_r312.sdk 230620 19 9999 1214 312 19015afa48dbb008cc3b6c7db1e118d2 boot/hdf/Emerald_Decoder_ph2_wrapper.hdf 230620 19 9999 1214 312 19015afa48dbb008cc3b6c7db1e118d2 [/FPGA_bit_files/]Emerald_2K_4K_Decoder_230620_tnk_r1214_avae_r312.sdk 230620 99 9999 1214 312 d7e1e3dd46d166163245322a3a025d4c boot/hdf/Emerald_Encoder_Basic_wrapper.hdf 230620 99 9999 1214 312 d7e1e3dd46d166163245322a3a025d4c [/FPGA_bit_files/]Emerald_2K_4K_Encoder_230620_tnk_r1214_avae_r312.sdk 230620 F1 9999 1214 312 5b28a143bfad103190d18805c94ac7dd boot/hdf/Emerald_Encoder_Basic_Artix_wrapper.hdf 230620 F1 9999 1214 312 5b28a143bfad103190d18805c94ac7dd [/FPGA_bit_files/]Emerald_2K_4K_Artix_Encoder_230620_tnk_r1214_avae_r312.sdk 230620 e1 60 1214 312 a8ef24fd9c89ebb6285e1fd3dd7a4563 emerald2k/encoder/EMDPEDP/single/system.hdf 230620 e1 60 1214 312 a8ef24fd9c89ebb6285e1fd3dd7a4563 [/FPGA_bit_files/]Emerald_2K_DP_SH_Encoder_230620_r60_tnk_r1214_avae_r312.sdk 230620 d1 58 1214 312 c02994f99af2e34d2ae01f5cd667047e emerald2k/encoder/EMDPEDP/dual/system.hdf 230620 d1 58 1214 312 c02994f99af2e34d2ae01f5cd667047e [/FPGA_bit_files/]Emerald_2K_DP_Encoder_230620_r58_tnk_r1214_avae_r312.sdk 230725 59 65 1214 312 45023394322af1e6c3db74b75dbe28b2 emerald2k/decoder/EMDSEDP/single/system.hdf 230725 59 65 1214 312 45023394322af1e6c3db74b75dbe28b2 [/FPGA_bit_files/]Emerald_SE_DP_Decoder_230725_r65_tnk_r1214_avae_r312.sdk 230823 d9 59 1214 312 0x7b 25f44cc4fdafbba2bb2a4d9f66655649 emerald2k/encoder/EMDSEDP/single/system.hdf 230823 d9 59 1214 312 0x7b 25f44cc4fdafbba2bb2a4d9f66655649 [/FPGA_bit_files/]Emerald_SE_DP_Encoder_230823_r59_tnk_r1214_avae_r312_usb_r7b.sdk 230629 e9 61 1214 312 e733093ef5f3a44bc9d1a22f27aead6d emerald2k/encoder/EMDSEDP/dual/system.hdf 230629 e9 61 1214 312 e733093ef5f3a44bc9d1a22f27aead6d [/FPGA_bit_files/]Emerald_SE_DP_Encoder_DH_230629_r61_tnk_r1214_avae_r312.sdk 230823 00 0x7b 573158f7e0adb637ff1c3c2b6438c52d emerald2k/encoder/artix_image/artix_fpga.bin 230823 00 0x7b 573158f7e0adb637ff1c3c2b6438c52d [/FPGA_bit_files/]Artix2K_Encoder_230823_USB_r7b.sdk 230823 00 0x7b ef2c2ffd3d33060e2144874ce54e10b2 boot/hdf/artix_fpga.bin 230823 00 0x7b ef2c2ffd3d33060e2144874ce54e10b2 [/FPGA_bit_files/]Artix4K_Encoder_230823_USB_r7b.sdk 230823 f9 63 1214 312 0x7b e7c0fcdb100061519ec858b122aa14df emerald2k/encoder/EMDSER2/single/system.hdf 230823 f9 63 1214 312 0x7b e7c0fcdb100061519ec858b122aa14df [/FPGA_bit_files/]Emerald_SE_INTUSB_Encoder_230823_r63_tnk_r1214_avae_r312_usb_r7b.sdk 230620 181 62 1214 312 a3da8be37610ff186cd5867bdca4fdd8 emerald2k/encoder/EMDPER2/single/system.hdf 230620 181 62 1214 312 a3da8be37610ff186cd5867bdca4fdd8 [/FPGA_bit_files/]Emerald_2K_ARTIX_SH_Encoder_230620_r62_tnk_r1214_avae_r312.sdk 230620 189 64 1214 312 51aba9836aee87a34fa896caf4e29fd8 emerald2k/encoder/EMDPER2/dual/system.hdf 230620 189 64 1214 312 51aba9836aee87a34fa896caf4e29fd8 [/FPGA_bit_files/]Emerald_2K_ARTIX_Encoder_230620_r64_tnk_r1214_avae_r312.sdk"},{"location":"release_notes/V6_7_0_RELEASE_NOTES/#67-release","title":"6.7 Release","text":""},{"location":"release_notes/V6_7_0_RELEASE_NOTES/#670_r11488-rc2-20230906","title":"6.7.0_r11488 RC2 2023/09/06","text":"<p>This release is available in \\10.211.128.208\\tftpboot\\work\\Emerald_Releases</p> <p>Source branch: develop</p>"},{"location":"release_notes/V6_7_0_RELEASE_NOTES/#new-functionality-addedupdated_4","title":"New functionality added/updated","text":"<ul> <li>N/A</li> </ul>"},{"location":"release_notes/V6_7_0_RELEASE_NOTES/#known-issues-in-this-release_4","title":"Known Issues in this Release","text":"<ul> <li>N/A</li> </ul>"},{"location":"release_notes/V6_7_0_RELEASE_NOTES/#restrictions_4","title":"Restrictions","text":"<ul> <li>N/A</li> </ul>"},{"location":"release_notes/V6_7_0_RELEASE_NOTES/#issues-resolved-in-this-release_4","title":"Issues resolved in this Release","text":"Key Summary BUG-5897 AWSUDCIP: 6.7.0 USB devices do not enumerate on New Platform transmitter with MAC OS <p>NOTE: This issue was incorrectly reported as fixed in 6.7.0_r11485 RC1</p>"},{"location":"release_notes/V6_7_0_RELEASE_NOTES/#fpga-versions-in-this-release_4","title":"FPGA Versions in this release","text":"Datecode PCode SVN_REV TNK_ID AVAE_ID USB_IP md5sum HDF_Path ?230620 a1 ?38 ?1214 ?312 cc61189425848a5750df4244795866a8 emeraldse/encoder/single/system.hdf 230620 a1 38 1214 312 cc61189425848a5750df4244795866a8 [/FPGA_bit_files/]Emerald_SE_Encoder_230620_r38_tnk_r1214_avae_r312.sdk ?230620 21 ?40 ?1214 ?312 348350115dc0eb3c03cf140e878e69d7 emeraldse/decoder/single/system.hdf 230620 21 40 1214 312 348350115dc0eb3c03cf140e878e69d7 [/FPGA_bit_files/]Emerald_SE_Decoder_230620_r40_tnk_r1214_avae_r312.sdk ?230620 a9 ?39 ?1214 ?312 aac90d856f2bf5c2587f694b554f893a emeraldse/encoder/dual/system.hdf 230620 a9 39 1214 312 aac90d856f2bf5c2587f694b554f893a [/FPGA_bit_files/]Emerald_SE_Encoder_DH_230620_r39_tnk_r1214_avae_r312.sdk ?230620 29 ?41 ?1214 ?312 acdff08db68c65dd507c7c8d3df4bcb5 emeraldse/decoder/dual/system.hdf 230620 29 41 1214 312 acdff08db68c65dd507c7c8d3df4bcb5 [/FPGA_bit_files/]Emerald_SE_Decoder_DH_230620_r41_tnk_r1214_avae_r312.sdk ?230620 91 ?52 ?1214 ?312 cb4c007b9f6bb180fb09025863ae1ce5 zerou/encoder/single/dvi/system.hdf 230620 91 52 1214 312 cb4c007b9f6bb180fb09025863ae1ce5 [/FPGA_bit_files/]Emerald_Zero_U_Encoder_230620_r52_tnk_r1214_avae_r312_dvi_r107.sdk ?230620 C9 ?57 ?1214 ?312 d1b1f8ddf86ef643b27c49168ec6e277 zerou/encoder/single/dp/system.hdf 230620 C9 57 1214 312 d1b1f8ddf86ef643b27c49168ec6e277 [/FPGA_bit_files/]Emerald_Zero_U_DP_Encoder_230620_r57_tnk_r1214_avae_r312.sdk ?230620 b9 ?54 ?1214 ?312 84aa7d5d1a770bf671e443e09a114c05 emeraldpe/encoder/dual/system.hdf 230620 b9 54 1214 312 84aa7d5d1a770bf671e443e09a114c05 [/FPGA_bit_files/]Emerald_2K_Encoder_230620_r54_tnk_r1214_avae_r312.sdk ?230620 39 ?53 ?1214 ?312 aae9bc461076b78fd360775bc87c0801 emeraldpe/decoder/dual/system.hdf 230620 39 53 1214 312 aae9bc461076b78fd360775bc87c0801 [/FPGA_bit_files/]Emerald_2K_Decoder_230620_r53_tnk_r1214_avae_r312.sdk ?230620 c1 ?55 ?1214 ?312 595c950cbca29280a075dfa1296027c3 emeraldpe/encoder/single/system.hdf 230620 c1 55 1214 312 595c950cbca29280a075dfa1296027c3 [/FPGA_bit_files/]Emerald_2K_SH_Encoder_230620_r55_tnk_r1214_avae_r312.sdk ?230620 41 ?56 ?1214 ?312 8ce05bdf03c9cbf90917e99b592c5e29 emeraldpe/decoder/single/system.hdf 230620 41 56 1214 312 8ce05bdf03c9cbf90917e99b592c5e29 [/FPGA_bit_files/]Emerald_2K_SH_Decoder_230620_r56_tnk_r1214_avae_r312.sdk ?230620 19 ?9999 ?1214 ?312 19015afa48dbb008cc3b6c7db1e118d2 boot/hdf/Emerald_Decoder_ph2_wrapper.hdf 230620 19 ?9999 1214 312 19015afa48dbb008cc3b6c7db1e118d2 [/FPGA_bit_files/]Emerald_2K_4K_Decoder_230620_tnk_r1214_avae_r312.sdk ?230620 99 ?9999 ?1214 ?312 d7e1e3dd46d166163245322a3a025d4c boot/hdf/Emerald_Encoder_Basic_wrapper.hdf 230620 99 ?9999 1214 312 d7e1e3dd46d166163245322a3a025d4c [/FPGA_bit_files/]Emerald_2K_4K_Encoder_230620_tnk_r1214_avae_r312.sdk ?230620 F1 ?9999 ?1214 ?312 5b28a143bfad103190d18805c94ac7dd boot/hdf/Emerald_Encoder_Basic_Artix_wrapper.hdf 230620 F1 ?9999 1214 312 5b28a143bfad103190d18805c94ac7dd [/FPGA_bit_files/]Emerald_2K_4K_Artix_Encoder_230620_tnk_r1214_avae_r312.sdk ?230620 e1 ?60 ?1214 ?312 a8ef24fd9c89ebb6285e1fd3dd7a4563 emerald2k/encoder/EMDPEDP/single/system.hdf 230620 e1 60 1214 312 a8ef24fd9c89ebb6285e1fd3dd7a4563 [/FPGA_bit_files/]Emerald_2K_DP_SH_Encoder_230620_r60_tnk_r1214_avae_r312.sdk ?230620 d1 ?58 ?1214 ?312 c02994f99af2e34d2ae01f5cd667047e emerald2k/encoder/EMDPEDP/dual/system.hdf 230620 d1 58 1214 312 c02994f99af2e34d2ae01f5cd667047e [/FPGA_bit_files/]Emerald_2K_DP_Encoder_230620_r58_tnk_r1214_avae_r312.sdk ?230725 59 ?65 ?1214 ?312 45023394322af1e6c3db74b75dbe28b2 emerald2k/decoder/EMDSEDP/single/system.hdf 230725 59 65 1214 312 45023394322af1e6c3db74b75dbe28b2 [/FPGA_bit_files/]Emerald_SE_DP_Decoder_230725_r65_tnk_r1214_avae_r312.sdk ?230823 d9 ?59 ?1214 ?312 ?0x7b 25f44cc4fdafbba2bb2a4d9f66655649 emerald2k/encoder/EMDSEDP/single/system.hdf 230823 d9 59 1214 312 0x7b 25f44cc4fdafbba2bb2a4d9f66655649 [/FPGA_bit_files/]Emerald_SE_DP_Encoder_230823_r59_tnk_r1214_avae_r312_usb_r7b.sdk ?230629 e9 ?61 ?1214 ?312 e733093ef5f3a44bc9d1a22f27aead6d emerald2k/encoder/EMDSEDP/dual/system.hdf 230629 e9 61 1214 312 e733093ef5f3a44bc9d1a22f27aead6d [/FPGA_bit_files/]Emerald_SE_DP_Encoder_DH_230629_r61_tnk_r1214_avae_r312.sdk ?00 ?573158f7e0adb637ff1c3c2b6438c52d emerald2k/encoder/artix_image/artix_fpga.bin ?230823 ?00 ?0x7b +573158f7e0adb637ff1c3c2b6438c52d [/FPGA_bit_files/]Artix2K_Encoder_230823_USB_r7b.sdk ?00 ?ef2c2ffd3d33060e2144874ce54e10b2 boot/hdf/artix_fpga.bin ?230823 ?00 ?0x7b +ef2c2ffd3d33060e2144874ce54e10b2 [/FPGA_bit_files/]Artix4K_Encoder_230823_USB_r7b.sdk ?230823 f9 ?63 ?1214 ?312 ?0x7b e7c0fcdb100061519ec858b122aa14df emerald2k/encoder/EMDSER2/single/system.hdf 230823 f9 63 1214 312 0x7b e7c0fcdb100061519ec858b122aa14df [/FPGA_bit_files/]Emerald_SE_INTUSB_Encoder_230823_r63_tnk_r1214_avae_r312_usb_r7b.sdk ?230620 181 ?62 ?1214 ?312 a3da8be37610ff186cd5867bdca4fdd8 emerald2k/encoder/EMDPER2/single/system.hdf 230620 181 62 1214 312 a3da8be37610ff186cd5867bdca4fdd8 [/FPGA_bit_files/]Emerald_2K_ARTIX_SH_Encoder_230620_r62_tnk_r1214_avae_r312.sdk ?230620 189 ?64 ?1214 ?312 51aba9836aee87a34fa896caf4e29fd8 emerald2k/encoder/EMDPER2/dual/system.hdf 230620 189 64 1214 312 51aba9836aee87a34fa896caf4e29fd8 [/FPGA_bit_files/]Emerald_2K_ARTIX_Encoder_230620_r64_tnk_r1214_avae_r312.sdk"},{"location":"release_notes/V6_7_0_RELEASE_NOTES/#670_r11485-rc1-20230904","title":"6.7.0_r11485 RC1 2023/09/04","text":"<p>This release is available in \\10.211.128.208\\tftpboot\\work\\Emerald_Releases</p> <p>Source branch: develop</p>"},{"location":"release_notes/V6_7_0_RELEASE_NOTES/#new-functionality-addedupdated_5","title":"New functionality added/updated","text":"<ul> <li>RX-DP<ul> <li>Video Activity front-panel LED (in a connection) is now operational</li> </ul> </li> </ul>"},{"location":"release_notes/V6_7_0_RELEASE_NOTES/#known-issues-in-this-release_5","title":"Known Issues in this Release","text":"<ul> <li>N/A</li> </ul>"},{"location":"release_notes/V6_7_0_RELEASE_NOTES/#restrictions_5","title":"Restrictions","text":"<ul> <li>N/A</li> </ul>"},{"location":"release_notes/V6_7_0_RELEASE_NOTES/#issues-resolved-in-this-release_5","title":"Issues resolved in this Release","text":"Key Summary BUG-6053 Need to ensure that that the OSD includes the OSD resolution in the SQL DB in its list presented to user BUG-6051 6.7.0: OSD -Clicking on the Information tab on the OSD incorrectly prints the manager IP on the serial BUG-6030 6.7.0 Set Colors button does not update with the correct accent color after cycling through tabs in the OSD BUG-6002 6.7.0 USB audio adapter causes distortion in audio on old and new platform devices BUG-5954 6.7.0 User does not get any feedback when launching a RX-TX connection with incorrect IP Address. BUG-5897 AWSUDCIP: 6.7.0 USB devices do not enumerate on New Platform transmitter with MAC OS BUG-5803 USBr- Hot plugging Sweex  external USB sound card from 4KRX locks up 4KTX (EMD4000) BUG-5344 EMD4K with Barco Radar screens, no splash / OSD screen BUG-5144 6.5.0: Touchscreens do not enumerate with New platform Transmitters (applies to 2 touch screens) BUG-4866 6.5.0: SmartCard readers (HID OMNIKEY 3121) does not read card information when connecting every time BUG-4819 EMD 6.3.10: Inaccurate Upgrade failed popup displays when do same SW upgrade for Tx BUG-4310 [Enhanced OSD]- USBr-[MAC] :Audio output is glitching when listening Audio via USB headset(logitech) BUG-2990 RX: should we inform the user when a login on a managed RX fails to contact Boxilla to sync the database? BUG-2732 EMD 4K RX: during overnight connection soak the serial had output of \"Fan Not running: Current temp:91\""},{"location":"release_notes/V6_7_0_RELEASE_NOTES/#670_r11446-ec4-20230824","title":"6.7.0_r11446 EC4 2023/08/24","text":"<p>This release is available in \\10.211.128.208\\tftpboot\\work\\Emerald_Releases</p> <p>Source branch: develop</p>"},{"location":"release_notes/V6_7_0_RELEASE_NOTES/#new-functionality-addedupdated_6","title":"New functionality added/updated","text":"<ul> <li>RX-DP<ul> <li>Audio over HDMI is available on RX DP</li> <li>EDID management is supported</li> <li>Resolutions changes from the host PC are supported</li> <li>Analog/Dp/Auto Audio selection on the OSD is available</li> <li>Handling of the \"Auto\" feature is selectable from the OSD</li> </ul> </li> </ul>"},{"location":"release_notes/V6_7_0_RELEASE_NOTES/#known-issues-in-this-release_6","title":"Known Issues in this Release","text":"<ul> <li>RX-DP<ul> <li>Video Activity front-panel LED (in a connection) is not operational</li> </ul> </li> </ul>"},{"location":"release_notes/V6_7_0_RELEASE_NOTES/#restrictions_6","title":"Restrictions","text":"<ul> <li>Import/Export does not handle connection label colours </li> <li>mport/Export does not handle RX audio settings.</li> </ul>"},{"location":"release_notes/V6_7_0_RELEASE_NOTES/#issues-resolved-in-this-release_6","title":"Issues resolved in this Release","text":"Key Summary BUG-6035 Connection Manager exits (silently) when the connection test runs BUG-6024 STDP4028 datasheet for register description for firmware version is incorrect and incomplete BUG-6010 New Emerald SE DP model shows different sku (SPN) on the OSD BUG-6004 6.7.0 OSD displays grained image for a second after splash screen when hotplugging power cable with 2K receivers. BUG-5989 Appliance diagnostics does not dump manufacturing logs stored on the appliance BUG-5978 database cli needs to be able to update the Connection Label Colours BUG-5972 6.7.0 Some OSD &amp; RDP resolutions are missing with new EMD2000SE-DP-R receiver. BUG-5970 6.7.0 New EMD2000SE-DP-R receiver crashes when switching through Resolution settings and other options in OSD BUG-5918 6.7.0 - Using CTRL+ALT+F2-F12 keys locking OSD BUG-5838 6.6.0: \"Unknown Exit Code 65535\" error message on OSD if failure to launch TX DNS connection BUG-5439 To facilitate configuring TX settings by using the REST API and not relying on SSH the webservice on the appliance must run at startup BUG-4965 6.3.10: Recommend removing analysis.sh from diagnostics BUG-4772 6.3.10: Diagnostics -Recommend adding the video_stats json files to diagnostics BUG-2731 PE RX: after clicking info tab got the following serial error: \"Cloudgui: RX info error 37 su_get_spn = 300-068-001 returned spn = UNKNOWN.\""},{"location":"release_notes/V6_7_0_RELEASE_NOTES/#670_r11406-ec3-20230815","title":"6.7.0_r11406 EC3 2023/08/15","text":"<p>This release is available in \\\\10.211.128.208\\tftpboot\\work\\Emerald_Releases</p> <p>Source branch: develop</p>"},{"location":"release_notes/V6_7_0_RELEASE_NOTES/#new-functionality-addedupdated_7","title":"New functionality added/updated","text":"<ul> <li>Support for Single Head DisplayPort Receiver (RX-DP)</li> <li>Added support for USB profiling</li> </ul>"},{"location":"release_notes/V6_7_0_RELEASE_NOTES/#known-issues-in-this-release_7","title":"Known Issues in this Release","text":"<ul> <li>RX-DP<ul> <li>Audio over HDMI is not available on RX DP</li> <li>Video Activity front-panel LED (in a connection) is not operational</li> <li>EDID management is not supported<ul> <li>OSD defaults to 800x600 on start-up</li> <li>Resolutions changes from the host PC are supported</li> </ul> </li> <li>Analog/Dp/Auto Audio selection on the OSD is available<ul> <li>Handling of the \"Auto\" feature is selectable from the OSD, however, pending EDID support   DisplayPort audio availability is always enabled.   i.e. If \"Auto\" is selected, the audio will always be sent to the DisplayPort, regardless   of monitor support.</li> </ul> </li> </ul> </li> </ul>"},{"location":"release_notes/V6_7_0_RELEASE_NOTES/#restrictions_7","title":"Restrictions","text":"<ul> <li>Import/Export does not handle connection label colours </li> <li>Import/Export does not handle RX audio settings.</li> </ul>"},{"location":"release_notes/V6_7_0_RELEASE_NOTES/#issues-resolved-in-this-release_7","title":"Issues resolved in this Release","text":"Key Summary BUG-5958 6.7.0 4K receiver is locked out after switching between an RDP VM connection and RX-TX connection through Favourites BUG-5947 Database patch files are applied in incorrect order when the number of patch files &gt; 10 BUG-5920 Need to Add the Overlay  Registers to the 2K FPGA Register Dump BUG-5918 6.7.0 - Using CTRL+ALT+F2-F12 keys locking OSD BUG-5911 AWSUDCIP: Data Bit Toggle Error. IP fails to receive data from USB host over OUT INTERRUPT endpoints BUG-5893 Connection Label Colour Preview is not always updated as I change the colours BUG-5892 Cloudgui crashes (silently) when changing connection colours BUG-5652 KVM Client: SYN/FIN error on 1/8 shared connections to the same PE TX BUG-4131 6.3.3: diagnostics from Emerald 4K RX and TX have a 0 bytes file for analysis.sh.report"},{"location":"release_notes/V6_7_0_RELEASE_NOTES/#fpga-versions-in-this-release_5","title":"FPGA Versions in this release","text":"Datecode PCode SVN_REV TNK_ID AVAE_ID USB_IP md5sum HDF_Path 230620 a1 38 1214 312 cc61189425848a5750df4244795866a8 [/FPGA_bit_files/]Emerald_SE_Encoder_230620_r38_tnk_r1214_avae_r312.sdk 230620 21 40 1214 312 348350115dc0eb3c03cf140e878e69d7 [/FPGA_bit_files/]Emerald_SE_Decoder_230620_r40_tnk_r1214_avae_r312.sdk 230620 a9 39 1214 312 aac90d856f2bf5c2587f694b554f893a [/FPGA_bit_files/]Emerald_SE_Encoder_DH_230620_r39_tnk_r1214_avae_r312.sdk 230620 29 41 1214 312 acdff08db68c65dd507c7c8d3df4bcb5 [/FPGA_bit_files/]Emerald_SE_Decoder_DH_230620_r41_tnk_r1214_avae_r312.sdk 230620 91 52 1214 312 cb4c007b9f6bb180fb09025863ae1ce5 [/FPGA_bit_files/]Emerald_Zero_U_Encoder_230620_r52_tnk_r1214_avae_r312_dvi_r107.sdk 230620 C9 57 1214 312 d1b1f8ddf86ef643b27c49168ec6e277 [/FPGA_bit_files/]Emerald_Zero_U_DP_Encoder_230620_r57_tnk_r1214_avae_r312.sdk 230620 b9 54 1214 312 84aa7d5d1a770bf671e443e09a114c05 [/FPGA_bit_files/]Emerald_2K_Encoder_230620_r54_tnk_r1214_avae_r312.sdk 230620 39 53 1214 312 aae9bc461076b78fd360775bc87c0801 [/FPGA_bit_files/]Emerald_2K_Decoder_230620_r53_tnk_r1214_avae_r312.sdk 230620 c1 55 1214 312 595c950cbca29280a075dfa1296027c3 [/FPGA_bit_files/]Emerald_2K_SH_Encoder_230620_r55_tnk_r1214_avae_r312.sdk 230620 41 56 1214 312 8ce05bdf03c9cbf90917e99b592c5e29 [/FPGA_bit_files/]Emerald_2K_SH_Decoder_230620_r56_tnk_r1214_avae_r312.sdk 230620 19 ?9999 1214 312 19015afa48dbb008cc3b6c7db1e118d2 [/FPGA_bit_files/]Emerald_2K_4K_Decoder_230620_tnk_r1214_avae_r312.sdk 230620 99 ?9999 1214 312 d7e1e3dd46d166163245322a3a025d4c [/FPGA_bit_files/]Emerald_2K_4K_Encoder_230620_tnk_r1214_avae_r312.sdk 230620 F1 ?9999 1214 312 5b28a143bfad103190d18805c94ac7dd [/FPGA_bit_files/]Emerald_2K_4K_Artix_Encoder_230620_tnk_r1214_avae_r312.sdk 230620 e1 60 1214 312 a8ef24fd9c89ebb6285e1fd3dd7a4563 [/FPGA_bit_files/]Emerald_2K_DP_SH_Encoder_230620_r60_tnk_r1214_avae_r312.sdk 230620 d1 58 1214 312 c02994f99af2e34d2ae01f5cd667047e [/FPGA_bit_files/]Emerald_2K_DP_Encoder_230620_r58_tnk_r1214_avae_r312.sdk 230725 59 65 1214 312 45023394322af1e6c3db74b75dbe28b2 [/FPGA_bit_files/]Emerald_SE_DP_Decoder_230725_r65_tnk_r1214_avae_r312.sdk 230726 d9 59 1214 312 0x79 d17acc86688fdd74b97c4760c6b9ebb4 [/FPGA_bit_files/]Emerald_SE_DP_Encoder_230726_r59_tnk_r1214_avae_r312_usb_r79.sdk 230629 e9 61 1214 312 e733093ef5f3a44bc9d1a22f27aead6d [/FPGA_bit_files/]Emerald_SE_DP_Encoder_DH_230629_r61_tnk_r1214_avae_r312.sdk ?230726 ?00 ?0x79 ?9745be1806db5ccdfb03ce9f6c0ba0c9 [/FPGA_bit_files/]Artix2K_Encoder_230726_USB_r79.sdk ?230726 ?00 ?0x79 ?297201a07aaf2332d0e46fda21a815c5 [/FPGA_bit_files/]Artix4K_Encoder_230726_USB_r79.sdk 230726 f9 63 1214 312 0x79 029c91ec6d7143addac766f087a0dcbc [/FPGA_bit_files/]Emerald_SE_INTUSB_Encoder_230726_r63_tnk_r1214_avae_r312_usb_r79.sdk 230620 181 62 1214 312 a3da8be37610ff186cd5867bdca4fdd8 [/FPGA_bit_files/]Emerald_2K_ARTIX_SH_Encoder_230620_r62_tnk_r1214_avae_r312.sdk 230620 189 64 1214 312 51aba9836aee87a34fa896caf4e29fd8 [/FPGA_bit_files/]Emerald_2K_ARTIX_Encoder_230620_r64_tnk_r1214_avae_r312.sdk"},{"location":"release_notes/V6_7_0_RELEASE_NOTES/#670_r11336-ec2-2172023","title":"6.7.0_r11336 EC2 - 21/7/2023","text":"<p>This release is available in \\10.211.128.208\\tftpboot\\work\\Emerald_Releases</p> <p>Source branch: develop</p>"},{"location":"release_notes/V6_7_0_RELEASE_NOTES/#new-functionality-addedupdated_8","title":"New functionality added/updated","text":"<ul> <li>Connection Label Colour Feature added</li> <li>Support for encrypted drives in USBr.</li> </ul>"},{"location":"release_notes/V6_7_0_RELEASE_NOTES/#known-issues-in-this-release_8","title":"Known Issues in this Release","text":"<ul> <li>BUG-5892 - Cloudgui crashes when changing connection label colours (intermittent)</li> <li>BUG-5893 - Connection Label Colour Preview not always updated as colours are changed</li> </ul>"},{"location":"release_notes/V6_7_0_RELEASE_NOTES/#restrictions_8","title":"Restrictions","text":"<ul> <li>Import/Export does not handle connection label colours yet</li> </ul>"},{"location":"release_notes/V6_7_0_RELEASE_NOTES/#issues-resolved-in-this-release_8","title":"Issues resolved in this Release","text":"Key Summary BUG-5841 6.7.0 OSD displays incorrect frame after setting resolution to Auto and exiting back to the OSD."},{"location":"release_notes/V6_7_0_RELEASE_NOTES/#670_r11265-ec1-03072023","title":"6.7.0_r11265 EC1 - 03/07/2023","text":"<p>This release is available in \\10.211.128.208\\tftpboot\\work\\Emerald_Releases\\develop\\V6.7.0_r11265</p> <p>Source branch: develop</p>"},{"location":"release_notes/V6_7_0_RELEASE_NOTES/#new-functionality-addedupdated_9","title":"New functionality added/updated","text":"<ul> <li>Matching of Local and remote USB speed. Full speed devices will be redirected as such</li> <li>ASICws IP driver: USB VBUS detection GPIO is used in interruptible mode to detect reconnections if cable is disconnected</li> <li>ASICws IP core has been upgraded to version 0x78</li> <li>Bug fixes</li> </ul>"},{"location":"release_notes/V6_7_0_RELEASE_NOTES/#known-issues-in-this-release_9","title":"Known Issues in this Release","text":"<ul> <li>N/A</li> </ul>"},{"location":"release_notes/V6_7_0_RELEASE_NOTES/#restrictions_9","title":"Restrictions","text":"<ul> <li>N/A</li> </ul>"},{"location":"release_notes/V6_7_0_RELEASE_NOTES/#minimum-test_3","title":"Minimum test","text":"<ul> <li>BUG-5098: Check that ASICws IP based Txs do not hang during boot.</li> <li>Check that USB speed presented by the Tx matches the USB speed of the actual redirected device.</li> <li>BUG-5395: On all ASICws IP based Txs: While Tx USB cable is disconnected, redirect a USB FS device. Wait for 20 seconds then connect a USB cable from Tx to test PC. Check that device is redirected as expected. Repeat the test with 2 FS devices, with 1 FS and 1 HS device and with 2 HS devices.</li> <li>Check ASICws IP Suspend/Resume event detection: Use SCR3310 Smart Card Reader. Redirect it with no card inserted while watching serial terminal output. The device will enter in suspend state in the first minute. Insert a card to wake it up and check serial logs. A suspend, wakeup and resume message is expected. The device will enter in suspend state again short time after card is removed. Repeat the test for 5 more times.</li> </ul>"},{"location":"release_notes/V6_7_0_RELEASE_NOTES/#issues-resolved-in-this-release_9","title":"Issues resolved in this Release","text":"Key Summary BUG-5541 AWSUDCIP: Multiple SET_ADDRESS command and attachment iterations BUG-5514 AWSUDCIP: USB remote wakeup doesn't have any effect on the host when IP is in USB suspend state BUG-5408 AWSUDCIP: IP correctly detects only the first suspend event. Subsequent suspend events are missed. BUG-5395 AWSUDCIP: IP continuosly notifies \"Suspend event detected\" when cable is disconnected and IP configured in USB Full Speed BUG-5219 6.5.0 RC3 - Cannon scanner is not functional with any DP platform, using any DVI RX BUG-5142 6.5.0: Sony IC card reader does not pickup card information only for NEW PLATFORM Transmitters BUG-5098 Board hang during AXI-c2c access at bootup triggers watchdog reboot BUG-5031 EMD-6.5.0 - USBr: Nostromo n52 gamepad is not configurable when connected through RX BUG-4866 6.5.0: SmartCard readers do not read card information when connecting every time BUG-3512 Radio Television Suisse RTS - MacPro19- USB headsets enumeration issue"},{"location":"release_notes/sdkvm_release_notes/","title":"Release 1.2.0_r105 EC1","text":""},{"location":"release_notes/sdkvm_release_notes/#sdkvm-120_r105","title":"SDKVM 1.2.0_r105","text":"<p>This release is available in \\10.211.128.208\\tftpboot\\work\\Deskvue_Release\\V1.2.0\\EC1</p> <p>Source branch: main</p>"},{"location":"release_notes/sdkvm_release_notes/#new-functionality-addedupdated","title":"New functionality added/updated","text":"<p>This release is specifically for the IBC Demo. It has certain hardcoded parameters that make it unsuitable for release beyond that demo.</p>"},{"location":"release_notes/sdkvm_release_notes/#known-issues-in-this-release","title":"Known Issues in this Release","text":"<ul> <li>See Issues unresolved in this Release below.</li> </ul>"},{"location":"release_notes/sdkvm_release_notes/#restrictions","title":"Restrictions","text":"<ul> <li>2X2 Matrix is statically generated.</li> </ul>"},{"location":"release_notes/sdkvm_release_notes/#issues-resolved-in-this-release","title":"Issues resolved in this Release","text":"Key Summary BUG-6070 /usr/local/bin/restapi_cli -j user_login admin &amp; instead of /usr/bin/restapi_cli -j user_login admin &amp; BUG-6069 Pop up the corresponding error message on OSD screen for force login failure BUG-6067 When no user is logged in, No need to raise a FORCE log out alert if OSD receives request for force logout BUG-6045 REST API to get associated workspaces for each user on SDKVM BUG-6033 Decorations: when decorations are turned off a launched workspace or connection has gaps between tiles BUG-6015 discovery_appliance logs are too verbose. BUG-5951 restart_webservices is filling the syslogs with redundant information"},{"location":"release_notes/sdkvm_release_notes/#issues-to-be-verified-in-this-release","title":"Issues to be verified in this Release","text":"Key Summary BUG-6070 /usr/local/bin/restapi_cli -j user_login admin &amp; instead of /usr/bin/restapi_cli -j user_login admin &amp; BUG-6069 Pop up the corresponding error message on OSD screen for force login failure BUG-6067 When no user is logged in, No need to raise a FORCE log out alert if OSD receives request for force logout BUG-6045 REST API to get associated workspaces for each user on SDKVM BUG-6033 Decorations: when decorations are turned off a launched workspace or connection has gaps between tiles BUG-6015 discovery_appliance logs are too verbose. BUG-5951 restart_webservices is filling the syslogs with redundant information <pre><code>                                                                              |\n</code></pre>"},{"location":"release_notes/sdkvm_release_notes/#release-name-110-rc4","title":"Release Name 1.1.0 RC4","text":""},{"location":"release_notes/sdkvm_release_notes/#sdkvm-110_r94","title":"SDKVM 1.1.0_r94","text":"<p>This release is available in \\10.211.128.208\\tftpboot\\work\\Deskvue_Release\\DESKVUE_1.1.0.r94.signed.dkv</p> <p>Source branch: main</p>"},{"location":"release_notes/sdkvm_release_notes/#new-functionality-addedupdated_1","title":"New functionality added/updated","text":"<ul> <li>First production released version of fully managed SDKVM</li> </ul>"},{"location":"release_notes/sdkvm_release_notes/#known-issues-in-this-release_1","title":"Known Issues in this Release","text":"<ul> <li>Known Issues in this Release, See issues not resolved below and Bug List for 1.2.0</li> <li>Inactivity timer is non operational     Restrictions</li> <li>Japanese keyboard settings is awaiting clarification from product management.</li> <li>Active directory authentication is not supported.</li> </ul>"},{"location":"release_notes/sdkvm_release_notes/#restrictions_1","title":"Restrictions","text":"<ul> <li>N/A</li> </ul>"},{"location":"release_notes/sdkvm_release_notes/#issues-resolved-in-this-release_1","title":"Issues resolved in this Release","text":"Key Summary BUG-6038 Internal REST handler is maxing out the CPU"},{"location":"release_notes/sdkvm_release_notes/#issues-to-be-verified-in-this-release_1","title":"Issues to be verified in this Release","text":"Key Summary BUG-6038 Internal REST handler is maxing out the CPU"},{"location":"release_notes/sdkvm_release_notes/#issues-unresolved-in-this-release","title":"Issues unresolved in this Release","text":"<p>-1.2.0 Issues</p>"},{"location":"release_notes/sdkvm_release_notes/#sdkvm-110-rc3","title":"SDKVM 1.1.0 RC3","text":"<p>SDKVM 1.1.0_r92</p> <p>This release is available in \\10.211.128.208\\tftpboot\\work\\Deskvue_Release\\V1.1.0\\RC3\\DESKVUE_1.1.0.r92.signed.dkv</p> <p>Source branch: 1.1.0</p>"},{"location":"release_notes/sdkvm_release_notes/#new-functionality-addedupdated_2","title":"New functionality added/updated","text":"<ul> <li>First Released version of fully managed SDKVM</li> <li>Known Issues in this Release, See issues not resolved below and Bug List for 1.2.0</li> <li>Inactivity timer is non operational     Restrictions</li> <li>Japanese keyboard settings is awaiting clarification from product management.</li> <li>Active directory authentication is not supported.</li> </ul>"},{"location":"release_notes/sdkvm_release_notes/#issues-resolved-in-this-release_2","title":"Issues resolved in this Release","text":"<ul> <li>BUG-6019 Connections: Right clicking the title bar of a tile results in a menu popping up</li> <li>BUG-6012 Spelling / Format issues on login page</li> <li>BUG-5973 OSD: At the login screen pressing the tab key at the user name field should move the input to the password field</li> <li>BUG-5509 OSD: Reboot and Power off options should be available at the login screen</li> </ul>"},{"location":"release_notes/sdkvm_release_notes/#sdkvm-110-rc1","title":"SDKVM 1.1.0 RC1","text":""},{"location":"release_notes/sdkvm_release_notes/#sdkvm-110_r89","title":"SDKVM 1.1.0_r89","text":"<p>This release is available in \\10.211.128.208\\tftpboot\\work\\Deskvue_Release\\V1.1.0\\RC1\\DESKVUE_1.1.0.r89.signed.dkv</p> <p>Source branch: 1.1.0</p>"},{"location":"release_notes/sdkvm_release_notes/#new-functionality-addedupdated_3","title":"New functionality added/updated","text":"<ul> <li>First Released version of fully managed SDKVM</li> </ul>"},{"location":"release_notes/sdkvm_release_notes/#known-issues-in-this-release_2","title":"Known Issues in this Release","text":"<ul> <li>See issues not resolved below and Bug List for 1.2.0</li> <li>Inactivity timer is non operational</li> </ul>"},{"location":"release_notes/sdkvm_release_notes/#restrictions_2","title":"Restrictions","text":"<ul> <li>Japanese keyboard settings is awaiting clarification from product management.</li> <li>Active directory authentication is not supported.</li> </ul>"},{"location":"release_notes/sdkvm_release_notes/#issues-resolved-in-this-release_3","title":"Issues resolved in this Release","text":"Key Summary BUG-5953 Discovery IP change request in unmanaged mode BUG-5941 After setting network interface the OSD becomes unresponsive BUG-5938 OSD: Display -After reconnecting display cables post monitor config deletion with display cables disconnected the DV Display menu was stuck showing a white display area BUG-5937 Writing to other partitions on SDKVM requires su permissions BUG-5936 OSD - After saving DeskVue network setting, the message shall state : \"IP Saved Successfully\" instead of \"IP save sucessfully\" BUG-5935 OSD: Improve authentication error message presentation BUG-5925 OSD should create the system_level_settings with the correct default values BUG-5922 OSD: Settings -Overlays options need to be updated to be more user friendly BUG-5901 OSD: Exception if discovery file does not exist BUG-5900 OSD: Exception in OSD if system_level_settings file does not exist BUG-5899 PCoIP Client: sustained keyboard input stops at random (AVINOR support) BUG-5877 OSD is not defining function keys in accordance with the data model BUG-5732 OSD: System -if restoring to factory defaults with network cable disconnected then the network screen does not correctly display the default network settings BUG-5699 OSD: Workspaces -RDP and PCoIP connections should have their resolution fields automatically populated with the default resolution of 1920 x 1080 BUG-5656 OSD: Workspaces -The resolution fields for RDP and PCoIP connections should only be selectable via drop down and not manually editable via keyboard entry. BUG-5629 OSD: Settings -Attempting to control the system volume by dragging the setting in the bar may result in the OSD becoming temporarily unresponsive BUG-5557 OSD : Displays overlapping after resolution change BUG-5556 OSD: Display -If the layout is changed while there are active Connections then the DeskVue moves the active Connections to different screens to attempt to maintain relative positioning BUG-5550 OSD: Display -Recommend relabelling \"Details\" to \"Selected Display\" and moving it above \"Resolution\" field BUG-5526 Consistency needed on Template names on \"Templates screen\" - feedback from Tech Author Karen BUG-5488 OSD: Settings -Remove \"Settings reset successfully\" message after using the cancel button BUG-5451 OSD: Auto Launch Workspace spelling and location"},{"location":"release_notes/sdkvm_release_notes/#issues-to-be-verified-in-this-release_2","title":"Issues to be verified in this Release","text":"Key Summary BUG-5953 Discovery IP change request in unmanaged mode BUG-5941 After setting network interface the OSD becomes unresponsive BUG-5938 OSD: Display -After reconnecting display cables post monitor config deletion with display cables disconnected the DV Display menu was stuck showing a white display area BUG-5937 Writing to other partitions on SDKVM requires su permissions BUG-5936 OSD - After saving DeskVue network setting, the message shall state : \"IP Saved Successfully\" instead of \"IP save sucessfully\" BUG-5935 OSD: Improve authentication error message presentation BUG-5925 OSD should create the system_level_settings with the correct default values BUG-5922 OSD: Settings -Overlays options need to be updated to be more user friendly BUG-5901 OSD: Exception if discovery file does not exist BUG-5900 OSD: Exception in OSD if system_level_settings file does not exist BUG-5899 PCoIP Client: sustained keyboard input stops at random (AVINOR support) BUG-5877 OSD is not defining function keys in accordance with the data model BUG-5732 OSD: System -if restoring to factory defaults with network cable disconnected then the network screen does not correctly display the default network settings BUG-5699 OSD: Workspaces -RDP and PCoIP connections should have their resolution fields automatically populated with the default resolution of 1920 x 1080 BUG-5656 OSD: Workspaces -The resolution fields for RDP and PCoIP connections should only be selectable via drop down and not manually editable via keyboard entry. BUG-5629 OSD: Settings -Attempting to control the system volume by dragging the setting in the bar may result in the OSD becoming temporarily unresponsive BUG-5557 OSD : Displays overlapping after resolution change BUG-5556 OSD: Display -If the layout is changed while there are active Connections then the DeskVue moves the active Connections to different screens to attempt to maintain relative positioning BUG-5550 OSD: Display -Recommend relabelling \"Details\" to \"Selected Display\" and moving it above \"Resolution\" field BUG-5526 Consistency needed on Template names on \"Templates screen\" - feedback from Tech Author Karen BUG-5488 OSD: Settings -Remove \"Settings reset successfully\" message after using the cancel button BUG-5451 OSD: Auto Launch Workspace spelling and location"},{"location":"release_notes/sdkvm_release_notes/#issues-unresolved-in-this-release_1","title":"Issues unresolved in this Release","text":"Key Summary BUG-5960 Observing some suspicious logs when user login success followed by some user login failures due to authentication issue(invalid credentials) BUG-5959 Observing some suspicious logs when network connection changed from dhcp to static by other components on SDKVM BUG-5735 KVM Client: Black video during shared soak to TX with RX clients"},{"location":"release_notes/sdkvm_release_notes/#release-110-ec2","title":"Release 1.1.0 EC2","text":""},{"location":"release_notes/sdkvm_release_notes/#sdkvm-110_r79","title":"SDKVM 1.1.0_r79","text":"<p>This release is available in \\10.211.128.208\\tftpboot\\work\\Deskvue_Release\\V1.1.0\\EC2\\DESKVUE_1.1.0.r79.signed.dkv</p> <p>Source branch: main</p>"},{"location":"release_notes/sdkvm_release_notes/#new-functionality-addedupdated_4","title":"New functionality added/updated","text":"<ul> <li>Further integration and support for fully managed Boxilla.</li> <li>Large number of bugs resolved.</li> <li>Upgrade now provides feedback and progress for both managed and unmanaged upgrading.</li> <li>Fixes for issues related to key handling on Linux targets observed at Customer AVINOR.</li> </ul>"},{"location":"release_notes/sdkvm_release_notes/#known-issues-in-this-release_3","title":"Known Issues in this Release","text":"<ul> <li>See unresolved bugs below</li> </ul>"},{"location":"release_notes/sdkvm_release_notes/#issues-resolved-in-this-release_4","title":"Issues resolved in this Release","text":"Key Summary BUG-5875 Logged in user id missing from system settings file on managed systems BUG-5869 Auto-reboot if Boxilla is failed to reboot after upgrade BUG-5836 KVM Client: keys not working (AVINOR support) BUG-5835 KVM Client: sustained keyboard input stops at random (AVINOR support) BUG-5834 OSD : Unsupported \"P +Win\" hot key displays black screens with error. BUG-5821 OSD: Connection and Workspace limit message shall be consistent BUG-5807 OSD : Managed Deskvue - after logging out of admin user, the RA user is displayed on a welcome login screen BUG-5804 Upgrade not working on 1.1.0_r12 BUG-5800 OSD: Workspaces -If a workspace is restarted via the restart active workspace hotkey then the workspace no longer appears in the active state on the Workspaces menu BUG-5791 OSD: Connections -Change \"IP Address Is Not contactable\" to \"IP Address Is Not Contactable\" BUG-5789 OSD : After restore a backup ,workspace hotkeys are not functional and requires system reboot BUG-5779 OSD: Workspaces -The section titles when editing an existing workspace need to be centre aligned to be consistent BUG-5775 OSD integration testing for static user login and logout BUG-5770 OSD : Connection tab - scrolling of the PCoIP connections , after selecting PCoIP filter, removes all connection from RDP, PCoIP and TX lists BUG-5737 OSD-Software upgrade status and exit code integration. BUG-5728 Keyboard setting does not appear to revert to default after being unmanaged - default keyboard should be 'US' BUG-5713 OSD: Settings -Inactivity timer is non operational BUG-5706 Ubuntu prompt to apply system updates still displaying BUG-5704 OSD System -Reset to factory defaults doesn't wipe files saved locally on to the DeskVue BUG-5699 OSD: Workspaces -RDP and PCoIP connections should have their resolution fields automatically populated with the default resolution of 1920 x 1080 BUG-5644 OSD: Network -Unsupported interface works after booting in DHCP mode BUG-5563 OSD: Workspaces -Rename \"Detected Displays\" to \"Display Layout\" BUG-5528 Types on Key Key Actions BUG-5491 OSD: If a power user logs in then the OSD should clearly denote which Workspaces have been allocated by the admin versus Workspaces which were created by the power user themselves BUG-5869 Auto-reboot if Boxilla is failed to reboot after upgrade BUG-5835 KVM Client: sustained keyboard input stops at random (AVINOR support) BUG-5737 OSD-Software upgrade status and exit code integration."},{"location":"release_notes/sdkvm_release_notes/#issues-to-be-verified-in-this-release_3","title":"Issues to be verified in this Release","text":"Key Summary BUG-5875 Logged in user id missing from system settings file on managed systems BUG-5836 KVM Client: keys not working (AVINOR support) BUG-5834 OSD : Unsupported \"P +Win\" hot key displays black screens with error. BUG-5821 OSD: Connection and Workspace limit message shall be consistent BUG-5807 OSD : Managed Deskvue - after logging out of admin user, the RA user is displayed on a welcome login screen BUG-5804 Upgrade not working on 1.1.0_r12 BUG-5800 OSD: Workspaces -If a workspace is restarted via the restart active workspace hotkey then the workspace no longer appears in the active state on the Workspaces menu BUG-5791 OSD: Connections -Change \"IP Address Is Not contactable\" to \"IP Address Is Not Contactable\" BUG-5789 OSD : After restore a backup ,workspace hotkeys are not functional and requires system reboot BUG-5779 OSD: Workspaces -The section titles when editing an existing workspace need to be centre aligned to be consistent BUG-5775 OSD integration testing for static user login and logout BUG-5770 OSD : Connection tab - scrolling of the PCoIP connections , after selecting PCoIP filter, removes all connection from RDP, PCoIP and TX lists BUG-5728 Keyboard setting does not appear to revert to default after being unmanaged - default keyboard should be 'US' BUG-5713 OSD: Settings -Inactivity timer is non operational BUG-5706 Ubuntu prompt to apply system updates still displaying BUG-5704 OSD System -Reset to factory defaults doesn't wipe files saved locally on to the DeskVue BUG-5699 OSD: Workspaces -RDP and PCoIP connections should have their resolution fields automatically populated with the default resolution of 1920 x 1080 BUG-5644 OSD: Network -Unsupported interface works after booting in DHCP mode BUG-5563 OSD: Workspaces -Rename \"Detected Displays\" to \"Display Layout\" BUG-5528 Types on Key Key Actions BUG-5510 Need performance stats option for tiles reenabled in some form BUG-5491 OSD: If a power user logs in then the OSD should clearly denote which Workspaces have been allocated by the admin versus Workspaces which were created by the power user themselves BUG-5869 Auto-reboot if Boxilla is failed to reboot after upgrade BUG-5835 KVM Client: sustained keyboard input stops at random (AVINOR support) BUG-5737 OSD-Software upgrade status and exit code integration."},{"location":"release_notes/sdkvm_release_notes/#issues-unresolved-in-this-release_2","title":"Issues unresolved in this Release","text":"Key Summary BUG-5877 OSD is not defining function keys in accordance with the data model BUG-5837 OSD: DeskVue OSD hotkey invocations passing through to the remote server BUG-5795 KVM Client: JP office reporting multiple DVs sharing the same shared connection to the same TX results in the connection video blackening before dropping BUG-5771 Handling Workspaces with Monitors that do not exist BUG-5755 OSD - RDP VM Connection - not able to make a connection, error : \"The connection failed at TLS connect\" 2015 LTSB version of Windows 10 BUG-5735 KVM Client: Black video during shared soak to TX with RX clients BUG-5732 OSD: System -if restoring to factory defaults with network cable disconnected then the network screen does not correctly display the default network settings BUG-5694 SDKVM Manufacturing, Need a mechanism to automate programming EFI boot variables on new units BUG-5687 OSD: Users -Shift key should be supported for multi selection purposes when allocating connections and workspaces BUG-5678 OSD : Japanese kb language is not functional BUG-5656 OSD: Workspaces -The resolution fields for RDP and PCoIP connections should only be selectable via drop down and not manually editable via keyboard entry. BUG-5629 OSD: Settings -Attempting to control the system volume by dragging the setting in the bar may result in the OSD becoming temporarily unresponsive BUG-5565 Create summary of licenses on SDKVM BUG-5557 OSD : Displays overlapping after resolution change BUG-5556 OSD: Display -If the layout is changed while there are active Connections then the DeskVue moves the active Connections to different screens to attempt to maintain relative positioning BUG-5549 System may freeze and reboot if video cables are disconnected in quick succession BUG-5526 Consistency needed on Template names on \"Templates screen\" - feedback from Tech Author Karen BUG-5509 OSD: Reboot and Power off options should be available at the login screen BUG-5488 OSD: Settings -Remove \"Settings reset successfully\" message after using the cancel button BUG-5457 Disable unused Ethernet port on the SDKVM BUG-5451 OSD: Auto Launch Workspace spelling and location BUG-5445 OSD: Network -Cancel button loads a welcome screen BUG-5116 KVM Client: Active TX connection unexpectedly terminated / closed during soak"},{"location":"release_notes/sdkvm_release_notes/#sdkvm-110-ec1","title":"SDKVM 1.1.0 EC1","text":"<p>This release is available in :</p> <pre><code>\\\\10.211.128.208\\tftpboot\\work\\Deskvue_Release\\V1.1.0\n</code></pre> <p>Source branch: 1.1.0</p> <p>Boxilla Compatibility:</p> <pre><code> \\\\10.211.128.208\\tftpboot\\work\\boxilla\\Boxilla_4.7.0\\Pre_EC8\\dskv_4.7.0.7257.bbx\n</code></pre>"},{"location":"release_notes/sdkvm_release_notes/#new-functionality-addedupdated_5","title":"New functionality added/updated","text":"<ul> <li>This is the first fully managed SDKVM</li> <li>For managed mode all connections and workspaces must be configured in Boxilla.</li> <li>Fixed numerous issues with default settings during system restore.</li> <li>Fixed issue with DHCP and static-ip address after restore and un-manage.</li> <li>For managed systems, users are authenticated through Boxilla.</li> <li>Fixed an issue with RDP sessions crashing on some customer sites.</li> </ul>"},{"location":"release_notes/sdkvm_release_notes/#known-issues-in-this-release_4","title":"Known Issues in this Release","text":"<ul> <li>Workspace creation in Boxilla is aligned with users, this will change in the next release of Boxilla.</li> <li>See also - Issues unresolved in this Release below.</li> <li>Inactivity timer is non operational</li> <li>Japanese keyboard settings is awaiting clarification from product management.</li> <li>Active directory authentication is not supported.</li> </ul>"},{"location":"release_notes/sdkvm_release_notes/#issues-resolved-in-this-release_5","title":"Issues resolved in this Release","text":"Key Summary BUG-5799 OSD: Workspace stayed active despite logging off to the log in screen BUG-5772 Boxilla is send down an unrecognised user type of Administrator, the recognised types are: admin,local,power BUG-5769 Observing Error messages as \"Jun 23 18:00:30 snuc-NUC12WSKi7 snuc: [OSD] : [2023-06-23T18:00:30.476421] [ERROR] - Unrecognized topic - blackbox/sdkvm/deskvue/status/osd_sdkvm/webservice/logout\" during log out and login BUG-5767 OSD: System -Reset to factory defaults doesn't reset the Audio Interface BUG-5758 Changes to handle user id, connections id and workspaces id in string format to update in users.json, connections.json file and workspaces id json files when deskvue receives data from boxiila during user authentication BUG-5754 In Manged Mode, OSD is always logged in with user 'admin\" on success response though request for authentication with different user(quad) BUG-5752 Boxilla will fail OSD authentication after reboot because it polls the system_level_settings file and find a logged in user. BUG-5751 when user logs out his name should be removed from the system_level_settings file BUG-5750 Sometimes OSD is adding \u2018]\u2019 at the end of user name and password. This will create user authentication failure BUG-5749 OSD is going to white screen from login screen after it receives the success message for user authentication BUG-5747 Sending deskvue compatibility as hex string(0x01) for /version restapi BUG-5737 OSD-Software upgrade status and exit code integration. BUG-5733 restapi_cli crash on SNUC device BUG-5732 OSD: System -if restoring to factory defaults with network cable disconnected then the network screen does not correctly display the default network settings BUG-5728 Keyboard setting does not appear to revert to default on a system restore BUG-5716 KVM Client: Client terminated itself during workspace launch of 10 KVM shared connections BUG-5698 OSD is overwriting the system_level_settings.json file on restart. BUG-5672 OSD : Missing Hotkey: Win +R for any DeskVue user BUG-5655 OSD: Settings -Warning regarding overwriting settings is missing a \".\" BUG-5647 Limits for number of Connections and Workspaces are not enforced BUG-5629 OSD: Settings -Attempting to control the system volume by dragging the setting in the bar may result in the OSD becoming temporarily unresponsive BUG-5568 OSD: Connections -Private KVM connection with HID audio selected does not output audio if launched on the Connections screen BUG-5555 OSD: Users -Recommend moving Connections and Workspaces configuration outside of the \"Edit\" option and into their own dedicated option BUG-5548 OSD: Display -There's no longer a confirmation prompt when applying changes to display configuration BUG-5493 Demo sites running EC3-3-Demo-img reporting RDP connections are dropping frequently BUG-5385 OSD: Network -If DeskVue was managed while in DHCP mode then unmanaging DeskVue doesn't reset the network back to the default factory IP BUG-5379 OSD: Display - Need check for Maximum supported resolutions BUG-5320 OSD: Display -When the screen layout is changed should connections move with the old screen or remain static and maintain their position and use the new screen?"},{"location":"release_notes/sdkvm_release_notes/#issues-to-be-verified-in-this-release_4","title":"Issues to be verified in this Release","text":"Key Summary BUG-5799 OSD: Workspace stayed active despite logging off to the log in screen BUG-5769 Observing Error messages as \"Jun 23 18:00:30 snuc-NUC12WSKi7 snuc: [OSD] : [2023-06-23T18:00:30.476421] [ERROR] - Unrecognized topic - blackbox/sdkvm/deskvue/status/osd_sdkvm/webservice/logout\" during log out and login BUG-5767 OSD: System -Reset to factory defaults doesn't reset the Audio Interface BUG-5758 Changes to handle user id, connections id and workspaces id in string format to update in users.json, connections.json file and workspaces id json files when deskvue receives data from boxiila during user authentication BUG-5754 In Manged Mode, OSD is always logged in with user 'admin\" on success response though request for authentication with different user(quad) BUG-5752 Boxilla will fail OSD authentication after reboot because it polls the system_level_settings file and find a logged in user. BUG-5751 when user logs out his name should be removed from the system_level_settings file BUG-5750 Sometimes OSD is adding \u2018]\u2019 at the end of user name and password. This will create user authentication failure BUG-5749 OSD is going to white screen from login screen after it receives the success message for user authentication BUG-5747 Sending deskvue compatibility as hex string(0x01) for /version restapi BUG-5733 restapi_cli crash on SNUC device BUG-5732 OSD: System -if restoring to factory defaults with network cable disconnected then the network screen does not correctly display the default network settings BUG-5728 Keyboard setting does not appear to revert to default on a system restore BUG-5716 KVM Client: Client terminated itself during workspace launch of 10 KVM shared connections BUG-5698 OSD is overwriting the system_level_settings.json file on restart. BUG-5672 OSD : Missing Hotkey: Win +R for any DeskVue user BUG-5655 OSD: Settings -Warning regarding overwriting settings is missing a \".\" BUG-5647 Limits for number of Connections and Workspaces are not enforced BUG-5629 OSD: Settings -Attempting to control the system volume by dragging the setting in the bar may result in the OSD becoming temporarily unresponsive BUG-5568 OSD: Connections -Private KVM connection with HID audio selected does not output audio if launched on the Connections screen BUG-5555 OSD: Users -Recommend moving Connections and Workspaces configuration outside of the \"Edit\" option and into their own dedicated option BUG-5548 OSD: Display -There's no longer a confirmation prompt when applying changes to display configuration BUG-5493 Demo sites running EC3-3-Demo-img reporting RDP connections are dropping frequently BUG-5385 OSD: Network -If DeskVue was managed while in DHCP mode then unmanaging DeskVue doesn't reset the network back to the default factory IP BUG-5379 OSD: Display - Need check for Maximum supported resolutions BUG-5320 OSD: Display -When the screen layout is changed should connections move with the old screen or remain static and maintain their position and use the new screen?"},{"location":"release_notes/sdkvm_release_notes/#issues-unresolved-in-this-release_3","title":"Issues unresolved in this Release","text":"Key Summary BUG-5804 Upgrade not working on 1.1.0_r12 BUG-5779 OSD: Workspaces -The section titles when editing an existing workspace need to be centre aligned to be consistent BUG-5775 OSD integration testing for static user login and logout BUG-5771 Handling Workspaces with Monitors that do not exist BUG-5770 OSD : Connection tab - scrolling of the PCoIP connections , after selecting PCoIP filter, removes all connection from RDP, PCoIP and TX lists BUG-5755 OSD - RDP VM Connection - not able to make a connection, error : \"The connection failed at TLS connect\" 2015 LTSB version of Windows 10 BUG-5743 PCoIP Client: aspect ratio is inconsistent if a tile with a PCoIP connection goes full screen depending on the original workspace template BUG-5735 KVM Client: Black video during shared soak to TX with RX clients BUG-5713 OSD: Settings -Inactivity timer is non operational BUG-5706 Ubuntu prompt to apply system updates still displaying BUG-5699 OSD: Workspaces -RDP and PCoIP connections should have their resolution fields automatically populated with the default resolution of 1920 x 1080 BUG-5694 SDKVM Manufacturing, Need a mechanism to automate programming EFI boot variables on new units BUG-5687 OSD: Users -Shift key should be supported for multi selection purposes when allocating connections and workspaces BUG-5678 OSD : Japanese kb language is not functional BUG-5644 OSD: Network -Unsupported interface works after booting in DHCP mode BUG-5637 OSD: Screens detection may not work properly after unplugging screens and pressing Detect button BUG-5595 Syslog has a high number of entries for snuc-sdkvm discovery_appliance Failed to match Mgr MAC, not updating Mgr IP BUG-5569 OSD: Settings -HDMI interface as the active audio setting does not persist between export and reimport of settings BUG-5565 Create summary of licenses on SDKVM BUG-5563 OSD: Workspaces -Rename \"Detected Displays\" to \"Display Layout\" BUG-5557 OSD : Displays overlapping after resolution change BUG-5556 OSD: Display -If the layout is changed while there are active Connections then the DeskVue moves the active Connections to different screens to attempt to maintain relative positioning BUG-5549 System may freeze and reboot if video cables are disconnected in quick succession BUG-5528 Types on Key Key Actions BUG-5526 Consistency needed on Template names on \"Templates screen\" - feedback from Tech Author Karen BUG-5491 OSD: If a power user logs in then the OSD should clearly denote which Workspaces have been allocated by the admin versus Workspaces which were created by the power user themselves BUG-5488 OSD: Settings -Remove \"Settings reset successfully\" message after using the cancel button BUG-5457 Disable unused Ethernet port on the SDKVM BUG-5343 OSD: Workspaces -Workspace configuration does not correctly update if switching from a 7 tiles across 2 displays to 1 tile across all displays BUG-5302 OSD: Workspaces -Seven tiles across two screens template doesn't display correctly BUG-5301 OSD: Workspaces -One tile on all screens template doesn't display correctly with the spanning across all screens not been complete BUG-5293 OSD: Discovery -Cannot discover appliance after unmanaging it BUG-5116 KVM Client: Active TX connection unexpectedly terminated / closed during soak BUG-5096 OSD: Workspaces -OSD screen completely whited out (temporarily) after manually terminating workspace on different screen"},{"location":"release_notes/sdkvm_release_notes/#sdkvm-102","title":"SDKVM 1.0.2","text":""},{"location":"release_notes/sdkvm_release_notes/#sdkvm-102_r64","title":"SDKVM 1.0.2_r64","text":"<p>This release is available in \\10.211.128.208\\tftpboot\\work\\Deskvue_Release</p> <p>Source branch: main</p>"},{"location":"release_notes/sdkvm_release_notes/#new-functionality-addedupdated_6","title":"New functionality added/updated","text":"<ul> <li>Fixed a number of bugs related to key board configuration</li> <li>Fixed an issue discovered with a Finish customer who had a number of monitors with identical EDIDs and serial numbers.</li> <li>Fixed an issue where RDP and PCoIP mouse position was being offset on some screens.</li> </ul>"},{"location":"release_notes/sdkvm_release_notes/#known-issues-in-this-release_5","title":"Known Issues in this Release","text":"<ul> <li>DNS is still not functional</li> <li>BUG-5706 Ubuntu prompt to apply system updates still displaying</li> </ul>"},{"location":"release_notes/sdkvm_release_notes/#restrictions_3","title":"Restrictions","text":"<ul> <li>N/A</li> </ul>"},{"location":"release_notes/sdkvm_release_notes/#issues-to-be-verified-in-this-release_5","title":"Issues to be verified in this Release","text":"Key Summary BUG-5776 Monitor Management config fails with Duplicate EDIDs when ran twice"},{"location":"release_notes/sdkvm_release_notes/#sdkvm-102_r63","title":"SDKVM 1.0.2_r63","text":"<p>This release is available in \\10.211.128.208\\tftpboot\\work\\Deskvue_Release</p> <p>Source branch: main</p>"},{"location":"release_notes/sdkvm_release_notes/#new-functionality-addedupdated_7","title":"New functionality added/updated","text":"<ul> <li>Fixed an issue discovered with a Finish customer who had a number of monitors with identical EDIDs and serial numbers.</li> <li>Fixed an issue where RDP and PCoIP mouse position was being offset on some screens.</li> <li>Fixed a memory leak in the RDP client that would cause an RDP connection to fail.</li> </ul>"},{"location":"release_notes/sdkvm_release_notes/#known-issues-in-this-release_6","title":"Known Issues in this Release","text":"<ul> <li>DNS is still not functional</li> <li>BUG-5706 Ubuntu prompt to apply system updates still displaying</li> <li>Display resolution prompt does not always display</li> </ul>"},{"location":"release_notes/sdkvm_release_notes/#restrictions_4","title":"Restrictions","text":"<ul> <li>N/A</li> </ul>"},{"location":"release_notes/sdkvm_release_notes/#issues-resolved-in-this-release_6","title":"Issues resolved in this Release","text":"Key Summary BUG-5734 PCoIP Client: unable to effectively use PCoIP connection (1920 x 1080) on 5K screen due to mouse click offsets BUG-5658 SDKVM: RDP Soak failed due to out of memory killer BUG-5744 OSD : DeskVue -1.0.0- screen arrangement looks like one screen set as primary"},{"location":"release_notes/sdkvm_release_notes/#issues-to-be-verified-in-this-release_6","title":"Issues to be verified in this Release","text":"Key Summary BUG-5734 PCoIP Client: unable to effectively use PCoIP connection (1920 x 1080) on 5K screen due to mouse click offsets BUG-5658 SDKVM: RDP Soak failed due to out of memory killer BUG-5744 OSD : DeskVue -1.0.0- screen arrangement looks like one screen set as primary Key Summary"},{"location":"release_notes/sdkvm_release_notes/#issues-unresolved-in-this-release_4","title":"Issues unresolved in this Release","text":"Key Summary"},{"location":"release_notes/sdkvm_release_notes/#release-rc1-sdkvm-101_r58","title":"Release RC1 SDKVM 1.0.1_r58","text":""},{"location":"release_notes/sdkvm_release_notes/#sdkvm-101_r58","title":"SDKVM 1.0.1_r58","text":"<p>This release is available in \\10.211.128.208\\tftpboot\\work\\Deskvue_Release</p> <p>Source branch: main</p>"},{"location":"release_notes/sdkvm_release_notes/#new-functionality-addedupdated_8","title":"New functionality added/updated","text":"<ul> <li>Fixed a number of bugs related to key board configuration</li> <li>Fixed issues associated with monitor management</li> <li>Addressed some inconsistent OSD behaviours</li> </ul>"},{"location":"release_notes/sdkvm_release_notes/#known-issues-in-this-release_7","title":"Known Issues in this Release","text":"<ul> <li>DNS is still not functional</li> <li>BUG-5706 Ubuntu prompt to apply system updates still displaying</li> <li>Display resolution prompt does not always display</li> </ul>"},{"location":"release_notes/sdkvm_release_notes/#restrictions_5","title":"Restrictions","text":"<ul> <li>See openbugs below</li> </ul>"},{"location":"release_notes/sdkvm_release_notes/#issues-resolved-in-this-release_7","title":"Issues resolved in this Release","text":"Key Summary BUG-5700 Restore script fails to set the default network IP address if the network cable is disconnected BUG-5697 OSD: Display -Attached screens may not be displayed (area is blanked) on the OSD screen post resolution change BUG-5680 OSD : Kb language displayed shall be French , not France BUG-5679 OSD : After setting any kb language and rebooting DeskVue, the kb language defaults to UK BUG-5666 Imaging: Unable to use the Display menu after fresh imaging with SDKVM-1.0.0-RC2-img BUG-5640 OSD: Display Settings - Layout - When using two identical screens connected, both screens are highlighted instead of one. BUG-5589 The SDKVM KVM client needs to disregard data from second head if it connects in non extended mode BUG-5571 OSD: Display -Cancel button doesn't reset configuration fields to the existing saved config BUG-5551 OSD: Display -Unable to set screen on HDMI 4 as primary screen (related to having multiple screens of the same name?) BUG-5479 Power users are not planned to be granted access to settings hence they will not be able to configure their workspace hotkeys BUG-5346 PCoIP Client: client not timing out when network connection went down while launching connection BUG-5316 OSD: if the OSD is operating on a resolution higher than 1920 x 1080 then OSD text in drop down fields are corrupted BUG-5156 SDKVM Clients may be receiving partial frames on joining a connection"},{"location":"release_notes/sdkvm_release_notes/#issues-to-be-verified-in-this-release_7","title":"Issues to be verified in this Release","text":"Key Summary BUG-5700 Restore script fails to set the default network IP address if the network cable is disconnected BUG-5697 OSD: Display -Attached screens may not be displayed (area is blanked) on the OSD screen post resolution change BUG-5680 OSD : Kb language displayed shall be French , not France BUG-5679 OSD : After setting any kb language and rebooting DeskVue, the kb language defaults to UK BUG-5666 Imaging: Unable to use the Display menu after fresh imaging with SDKVM-1.0.0-RC2-img BUG-5640 OSD: Display Settings - Layout - When using two identical screens connected, both screens are highlighted instead of one. BUG-5589 The SDKVM KVM client needs to disregard data from second head if it connects in non extended mode BUG-5571 OSD: Display -Cancel button doesn't reset configuration fields to the existing saved config BUG-5551 OSD: Display -Unable to set screen on HDMI 4 as primary screen (related to having multiple screens of the same name?) BUG-5479 Power users are not planned to be granted access to settings hence they will not be able to configure their workspace hotkeys BUG-5346 PCoIP Client: client not timing out when network connection went down while launching connection BUG-5316 OSD: if the OSD is operating on a resolution higher than 1920 x 1080 then OSD text in drop down fields are corrupted BUG-5156 SDKVM Clients may be receiving partial frames on joining a connection"},{"location":"release_notes/sdkvm_release_notes/#issues-unresolved-in-this-release_5","title":"Issues unresolved in this Release","text":"Key Summary BUG-5689 Need a documented procedure for creating the manufacturing images"},{"location":"release_notes/sdkvm_release_notes/#release-rc2-sdkvm-100_42","title":"Release RC2 SDKVM 1.0.0_42","text":""},{"location":"release_notes/sdkvm_release_notes/#sdkvm-100_r42","title":"SDKVM 1.0.0_r42","text":"<p>This release is available in \\10.211.128.208\\tftpboot\\work\\Deskvue_Release\\V1.0.0\\RC2</p> <p>Source branch: main</p>"},{"location":"release_notes/sdkvm_release_notes/#new-functionality-addedupdated_9","title":"New functionality added/updated","text":"<ul> <li>The main change in this release is a fix for the critical bug: https://bboxjira.atlassian.net/browse/BUG-5613</li> </ul>"},{"location":"release_notes/sdkvm_release_notes/#known-issues-in-this-release_8","title":"Known Issues in this Release","text":"<ul> <li>See openbugs below</li> </ul>"},{"location":"release_notes/sdkvm_release_notes/#restrictions_6","title":"Restrictions","text":"<ul> <li>The designated hotkey is the windows key and cannot be changed in this version.</li> <li>Only horizontal placement of workspaces is supported in this release. Support for vertical placement will be supported in subsequent releases.</li> <li>On the SDKVM we current cannot have a total pixel width or height over 16384 x 16384 this means than when using a 5K monitor the maximum resolutions that can be use is:</li> <li>1x Monitor at 5120x2160</li> <li>2x Monitors at 3840x2160</li> <li>1x Monitor at some resolution less than 3584 pixels wide.</li> <li>DNS resolution of connection names does not work reliably.</li> </ul>"},{"location":"release_notes/sdkvm_release_notes/#issues-resolved-in-this-release_8","title":"Issues resolved in this Release","text":"Key Summary BUG-5621 OSD: Settings -Changing audio from Analog to HDMI intermittently requires re-entering the Settings menu for it to take effect BUG-5613 OSD: Newly flashed SDKVM failed to accept admin password. Unit is inaccessible"},{"location":"release_notes/sdkvm_release_notes/#issues-to-be-verified-in-this-release_8","title":"Issues to be verified in this Release","text":"Key Summary BUG-5623 OSD: Users -Edit \"Available WorkSpace\" and \"Selected WorkSpace\" should be \"Available Workspaces\" and \"Selected Workspaces\" BUG-5610 PM Request: Change \u201cSystem update\u201d to System Upgrade. BUG-5609 PM Request: On System Diagnostics change \u201cDiagnosis\u201d to \u201cRetrieve\u201d. BUG-5594 OSD: System -Restoring message warning should reference \"settings\" and not \"setting\" BUG-5592 OSD: System -Export name defaults to \"DesvueSettings.cfg\" BUG-5580 OSD: Upgrade -Remove the safe to remove USB storage message if upgrading via local filesystem BUG-5577 OSD: Network -Admin should see \"Refresh\" instead of \"Cancel\" BUG-5576 OSD: Network -Booting with DHCP enabled results in incorrect error message of non supported interface BUG-5569 OSD: Settings -HDMI interface as the active audio setting does not persist between export and reimport of settings BUG-5562 OSD: Settings -HDMI interface as the active audio setting does not persist between reboots (defaults to analog) BUG-5560 Create and Edit Workspaces has incorrect data for Detected Displays BUG-5559 OSD: Workspaces -If resolution setting is part of a tile configuration (i.e. RDP or PCoIP) then auto populate with a default value and prevent these fields from been blank BUG-5545 OSD: Correct \"operatiion\" string to correct spelling of \"operation\" BUG-5532 OSD: Power users should only see their own username listed in the Users screen BUG-5531 OSD: Network -Rename \"Retry\" to \"Refresh\" BUG-5530 OSD: Settings -System volume bar may extended outside the OSD screen BUG-5452 OSD: Auto Launch Workspace doesn't work BUG-5323 OSD: Display -Attempting to do a subsequent resolution change after the initial resolution change results in the selected display switching to the display which is the designated OSD display BUG-5147 DPS Reference: UI0074 unclear for the SDKVM BUG-5054 OSD: Ubuntu screen layout versus Workspaces screen layout BUG-4631 OSD: Network -When confirming network change via user password the Ubuntu user password is required and not the OSD admin password"},{"location":"release_notes/sdkvm_release_notes/#issues-unresolved-in-this-release_6","title":"Issues unresolved in this Release","text":"Key Summary BUG-5644 OSD: Network -Unsupported interface works after booting in DHCP mode BUG-5640 OSD: Display Settings - Layout - When using two identical screens connected, both screens are highlighted instead of one. BUG-5607 PM Note: Manual update \u2013 Ensure 4K X 4 is the max across \u2013 I.e using a 5K limits you to 3 monitors. BUG-5584 SDKVM V1.0.0_b8036c7 - Device went to offline state overnight after running automated test"},{"location":"release_notes/sdkvm_release_notes/#release-notes-rc1","title":"Release Notes RC1","text":"<ul> <li>Version: V1.0.0_r41</li> <li>OSD Version: V1.0.0_60</li> </ul>"},{"location":"release_notes/sdkvm_release_notes/#rc1-may-23rd","title":"RC1 - May 23rd","text":"<p>Image is available in shared_area\\johnos\\SDKVM\\Images\\SDKVM-1.0.0-RC1.img.zip</p>"},{"location":"release_notes/sdkvm_release_notes/#features","title":"Features","text":"<ul> <li>It will be possible to mute audio on a per tile level.</li> <li>Full audio per tile control and integration</li> <li>It will be possible to select the desired audio interfaces on the SNUC hardware through th OSD.</li> <li>The SDKVM will provide informative and appropriate messaging for any connection failure or connection loss.</li> <li>The System will support complete backup and restore to a thumb drive.</li> <li>The System will support the retrieval of minimal diagnostic information and log files using a thumb drive. These diagnostics are encoded and can be decoded offline using a decoding utility.</li> <li>Complete system lockdown available, but no bios or hard disk encryption is supported at this point.</li> <li>Hotkeys are managed locally with the ability to associate workspaces to hot-keys by an admin user. These mappings will allow users launch workspaces from mapped hot keys.</li> <li>Connections launch reliably from the OSD.</li> <li>Connections launch reliably from the Hot Keys.</li> <li>Connections can run on an extended soak without freezing or dropping.</li> <li>The system can be discovered and managed by Boxilla, and it will also be possible to make connections to managed transmitters, but Boxilla cannot be used to create connections and workspaces or to otherwise configure the SDKVM.</li> <li>An Admin user can create workspaces and assign hot keys on a managed system.</li> <li>It will be possible to perform a basic upgrade of the system from a Thumb drive.</li> <li>It should be possible to set the keyboard locale from the OSD login screen.</li> <li>It should be possible to reboot the SDKVM from the OSD.</li> <li>It should be possible to restore the system to factory defaults.</li> <li>It should be possible to assign either DHCP or Static IP and have this persist through a reboot.</li> <li>It should be possible to mute and unmute audio globally through a hot key (Windows +m, windows + u)</li> <li>It should be possible to bring up the tile overlay controls for all tiles by pressing windows + b.</li> <li>An administrative user can create connections and workspaces and assign these to another standard user.</li> <li>The system supports the configuration, hot swaping and reconfiguration of monitors.</li> <li>Changes in the monitor configuration are propagated to existing workspaces.</li> <li>Tile locations are calculated dynamically on launch by translating the virtual positioning system into actual screen co-ordinates.</li> <li>Any additional support required for bios protection, system lock down and security.</li> <li>Support for encrypted upgrade packages.</li> <li>The responsiveness of the OSD has been greatly improved and it no longer misses button clicks.</li> <li>Monitor management is managed by a monitor management framework that detects monitor changes and hot plugs.</li> <li>Audio management is managed by an audio management framework that manages changes in the available audio resources.</li> </ul>"},{"location":"release_notes/sdkvm_release_notes/#not-supported-in-rc1","title":"Not supported in RC1","text":"<ul> <li>Leostream broker is not supported due to an inability to test and lack of a detailed formal specification or user scenarios.</li> <li>The SDKKVM can be discovered and managed by Boxilla. It will also be possible to make connections to managed transmitters, but Boxilla cannot be used to create connections and workspaces or to otherwise configure the SDKVM.</li> <li>The system does not support logins authenticated by Boxilla.</li> <li>No Login and Logout events are sent to Boxilla.</li> <li>The System will not support the retrieval of minimal diagnostic information and log files over Boxilla.</li> <li>It will not be possible to upgrade the system from Boxilla.</li> <li>Extended Desktop is not supported on any connection type.</li> <li>Boxilla cannot retrieve statistics from the SDKVM.</li> </ul>"},{"location":"release_notes/sdkvm_release_notes/#limitations","title":"Limitations","text":"<ul> <li>The designated hotkey is the windows key and cannot be changed in this version.</li> <li>Only horizontal placement of workspaces is supported in this release. Support for vertical placement will be supported in subsequent releases.</li> <li>On the SDKVM we current cannot have a total pixel width or height over 16384 x 16384 this means than when using a 5K monitor the maximum resolutions that can be use is:</li> <li>1x Monitor at 5120x2160</li> <li>2x Monitors at 3840x2160</li> <li>1x Monitor at some resolution less than 3584 pixels wide.</li> <li>DNS resolution of connection names does not work reliably.</li> </ul>"},{"location":"release_notes/sdkvm_release_notes/#known-issues","title":"Known Issues","text":"<ul> <li>There are performance variations from one system to another in FPS.</li> <li>The inactivity timer is not functional in this version.</li> </ul>"},{"location":"release_notes/sdkvm_release_notes/#bugs-resolved-in-this-release","title":"Bugs Resolved in this Release","text":"<ul> <li>BUG-5480 Demo unit cannot be managed by Boxilla</li> <li>BUG-5613 OSD: Newly flashed SDKVM failed to accept admin password. Unit is inaccessible</li> <li>BUG-5633 System -Users missing after backing up, resetting to factory defaults and importing backup</li> <li>BUG-5568 OSD: Connections -Private KVM connection with HID audio selected does not output audio if launched on the Connections screen</li> <li>BUG-5622 OSD: Settings -A HDMI output as default audio interface post reboot will not be effective unless you click into the Settings menu post reboot</li> <li>BUG-5604 OSD went into a unresponsive state after terminating connection</li> <li>BUG-5587 OSD: Settings -HDMI audio volume is effectively stuck at a minimum of \"140\"</li> <li>BUG-5411 OSD: Settings -When Audio Interface setting \"Digital Stereo (HDMI)\" is selected then a dropdown of connected HDMI interfaces for selection needs to be made available to the user</li> <li>BUG-5594 OSD: System -Restoring message warning should reference \"settings\" and not \"setting\"</li> <li>BUG-5592 OSD: System -Export name defaults to \"DesvueSettings.cfg\"</li> <li>BUG-5580 OSD: Upgrade -Remove the safe to remove USB storage message if upgrading via local filesystem</li> <li>BUG-5577 OSD: Network -Admin should see \"Refresh\" instead of \"Cancel\"</li> <li>BUG-5569 OSD: Settings -HDMI interface as the active audio setting does not persist between export and reimport of settings</li> <li>BUG-5562 OSD: Settings -HDMI interface as the active audio setting does not persist between reboots (defaults to analog)</li> <li>BUG-5530 OSD: Settings -System volume bar may extended outside the OSD screen</li> <li>BUG-5610 PM Request: Change \u201cSystem update\u201d to System Upgrade.</li> <li>BUG-5609 PM Request: On System Diagnostics change \u201cDiagnosis\u201d to \u201cRetrieve\u201d.</li> </ul>"},{"location":"release_notes/sdkvm_release_notes/#release-notes-ec5","title":"Release Notes EC5","text":"<ul> <li>Version: DESKVUE_1.0.0.C0A294</li> <li>OSD Version: V1.0.0_57</li> <li>Workspace Server Version: 1.0.0_0010</li> </ul>"},{"location":"release_notes/sdkvm_release_notes/#ec5-may-17th","title":"EC5 - May 17th","text":"<p>This is an interim release to allow Alex progress with testing while we wait for OSD fixes and some critical bug fixes</p>"},{"location":"release_notes/sdkvm_release_notes/#features_1","title":"Features","text":"<ul> <li>It will be possible to mute audio on a per tile level.</li> <li>Full audio per tile control and integration</li> <li>It will be possible to select the desired audio interfaces on the SNUC hardware through th OSD.</li> <li>The SDKVM will provide informative and appropriate messaging for any connection failure or connection loss.</li> <li>The System will support complete backup and restore to a thumb drive.</li> <li>The System will support the retrieval of minimal diagnostic information and log files using a thumb drive. These diagnostics are encoded and can be decoded offline using a decoding utility.</li> <li>Complete system lockdown available, but no bios or hard disk encryption is supported at this point.</li> <li>Hotkeys are managed locally with the ability to associate workspaces to hot-keys by an admin user. These mappings will allow users launch workspaces from mapped hot keys.</li> <li>Connections launch reliably from the OSD.</li> <li>Connections launch reliably from the Hot Keys.</li> <li>Connections can run on an extended soak without freezing or dropping.</li> <li>The system can be discovered and managed by Boxilla, and it will also be possible to make connections to managed transmitters, but Boxilla cannot be used to create connections and workspaces or to otherwise configure the SDKVM.</li> <li>An Admin user can create workspaces and assign hot keys on a managed system.</li> <li>It will be possible to perform a basic upgrade of the system from a Thumb drive.</li> <li>It should be possible to set the keyboard locale from the OSD login screen.</li> <li>It should be possible to reboot the SDKVM from the OSD.</li> <li>It should be possible to restore the system to factory defaults.</li> <li>It should be possible to assign either DHCP or Static IP and have this persist through a reboot.</li> <li>It should be possible to mute and unmute audio globally through a hot key (Windows +m, windows + u)</li> <li>It should be possible to bring up the tile overlay controls for all tiles by pressing windows + b.</li> <li>An administrative user can create connections and workspaces and assign these to another standard user.</li> <li>The system supports the configuration, hot swaping and reconfiguration of monitors.</li> <li>Changes in the monitor configuration are propagated to existing workspaces.</li> <li>Tile locations are calculated dynamically on launch by translating the virtual positioning system into actual screen co-ordinates.</li> <li>Any additional support required for bios protection, system lock down and security.</li> <li>Support for encrypted upgrade packages are introduced in this release.</li> <li>The responsiveness of the OSD has been greatly improved and it no longer misses button clicks.</li> </ul>"},{"location":"release_notes/sdkvm_release_notes/#not-supported-in-ec5","title":"Not supported in EC5","text":"<ul> <li>Leostream broker is not supported due to an inability to test and lack of a detailed formal specification or user scenarios.</li> <li>The SDKKVM can be discovered and managed by Boxilla. It will also be possible to make connections to managed transmitters, but Boxilla cannot be used to create connections and workspaces or to otherwise configure the SDKVM.</li> <li>The system does not support logins authenticated by Boxilla.</li> <li>No Login and Logout events are sent to Boxilla.</li> <li>The System will not support the retrieval of minimal diagnostic information and log files over Boxilla.</li> <li>It will not be possible to upgrade the system from Boxilla.</li> <li>Extended Desktop is not supported on any connection type.</li> <li>Boxilla cannot retrieve statistics from the SDKVM.</li> </ul>"},{"location":"release_notes/sdkvm_release_notes/#limitations_1","title":"Limitations","text":"<ul> <li>The designated hotkey is the windows key and cannot be changed in this version.</li> <li>Only horizontal placement of workspaces is supported in this release. Support for vertical placement will be supported in subsequent releases.</li> <li>On the SDKVM we current cannot have a total pixel width or height over 16384 x 16384 this means than when using a 5K monitor the maximum resolutions that can be use is:</li> <li>1x Monitor at 5120x2160</li> <li>2x Monitors at 3840x2160</li> <li>1x Monitor at some resolution less than 3584 pixels wide.</li> <li>DNS resolution of connection names does not work reliably.</li> </ul>"},{"location":"release_notes/sdkvm_release_notes/#known-issues_1","title":"Known Issues","text":"<ul> <li>There are a number of open OSD issues: https://bboxjira.atlassian.net/issues/?filter=10776</li> <li>There are performance variations from one system to another in FPS.</li> <li>The inactivity timer is not functional in this version.</li> </ul>"},{"location":"release_notes/sdkvm_release_notes/#bugs-resolved-in-this-release_1","title":"Bugs Resolved in this Release","text":"<ul> <li>BUG-5472 Automatic Software Updates are still active on the latest image</li> <li>BUG-5546 OSD: Workspaces -If a backup configuration is restored then the imported workspaces display presentation may be out of sync with the current display configuration</li> <li>BUG-5328 OSD: Connections -Launching connections seem fixed to the first screen as opposed to the designated primary screen</li> <li>BUG-5544 KVM Client: if connection to TX is lost and the tile is not closed then TX will refuse connections from other RXs</li> <li>BUG-5596 OSD: Connections -Terminate not terminating connections</li> <li>BUG-5275 OSD: Connections and Workspaces may be incorrectly left in the terminate option state on the OSD after they were already terminated</li> <li>BUG-5576 OSD: Network -Booting with DHCP enabled results in incorrect error message of non supported interface</li> <li>BUG-5567 OSD: Workspace which was updated to use different templates fails to launch connections</li> <li>BUG-5560 Create and Edit Workspaces has incorrect data for Detected Displays</li> <li>BUG-5552 Workspace Editing Screen Displays two \"Display 1s\"</li> <li>BUG-5536 Auto launch workspaces work exactly once before been removed from the user auto launch workspace setting</li> <li>BUG-5534 OSD: Users should not have access to the users screen</li> <li>BUG-5533 OSD: Power user should only be able to change password in Users screen</li> <li>BUG-5461 SDKVM GUI is allowing navigating in the home folder</li> <li>BUG-5273 OSD: Users -Fix \"Avaliable\" spelling when assigning connections and workspaces</li> <li>BUG-5571 OSD: Display -Cancel button doesn't reset configuration fields to the existing saved config</li> <li>BUG-5559 OSD: Workspaces -If resolution setting is part of a tile configuration (i.e. RDP or PCoIP) then auto populate with a default value and prevent these fields from been blank</li> <li>BUG-5545 OSD: Correct \"operatiion\" string to correct spelling of \"operation\"</li> <li>BUG-5532 OSD: Power users should only see their own username listed in the Users screen</li> <li>BUG-5531 OSD: Network -Rename \"Retry\" to \"Refresh\"</li> <li>BUG-5452 OSD: Auto Launch Workspace doesn't work</li> <li>BUG-5323 OSD: Display -Attempting to do a subsequent resolution change after the initial resolution change results in the selected display switching to the display which is the designated OSD display</li> <li> <p>BUG-5273 OSD: Intermittently the OSD fails to responds to clicks on buttons</p> </li> <li> <p>BUG-5297 OSD: Users -Recommend removing the hotkey \"Restore workspace script\" as it is not specified in the DPS</p> </li> <li>BUG-5056 OSD: Workspaces -Detected Displays view needs to be improved</li> <li>BUG-5474 It appears that Software Updates are still enabled in EC3</li> </ul>"},{"location":"release_notes/sdkvm_release_notes/#remaining-targeted-bugs-for-this-release","title":"Remaining Targeted Bugs for this Release","text":"<ul> <li>BUG-5480 Demo unit cannot be managed by Boxilla</li> <li>BUG-5613 OSD: Newly flashed SDKVM failed to accept admin password. Unit is inaccessible</li> <li>BUG-5584 DKVM V1.0.0_b8036c7 - Device went to offline state overnight after running automated test</li> <li>BUG-5589 The SDKVM KVM client needs to disregard data from second head if it connects in non extended mode</li> <li>BUG-5493 demo sites running EC3-3-Demo-img reporting RDP connections are dropping frequently</li> <li>BUG-5568 OSD: Connections -Private KVM connection with HID audio selected does not output audio if launched on the Connections screen</li> <li>BUG-5604 OSD went into a unresponsive state after terminating connection</li> <li>BUG-5587 OSD: Settings -HDMI audio volume is effectively stuck at a minimum of \"140\"</li> <li>BUG-5411 OSD: Settings -When Audio Interface setting \"Digital Stereo (HDMI)\" is selected then a dropdown of connected -DI interfaces for selection needs to be made available to the user</li> <li>BUG-5393 OSD: Network -Can't set a static network configuration after a fresh image install</li> <li>BUG-5594 OSD: System -Restoring message warning should reference \"settings\" and not \"setting\"</li> <li>BUG-5592 OSD: System -Export name defaults to \"DesvueSettings.cfg\"</li> <li>BUG-5580 OSD: Upgrade -Remove the safe to remove USB storage message if upgrading via local filesystem</li> <li>BUG-5577 OSD: Network -Admin should see \"Refresh\" instead of \"Cancel\"</li> <li>BUG-5569 OSD: Settings -HDMI interface as the active audio setting does not persist between export and reimport of -ettings</li> <li>BUG-5562 OSD: Settings -HDMI interface as the active audio setting does not persist between reboots (defaults -o analog)</li> <li>BUG-5530 OSD: Settings -System volume bar may extended outside the OSD screen</li> <li>BUG-5610 PM Request: Change \u201cSystem update\u201d to System Upgrade.</li> <li>BUG-5609 PM Request: On System Diagnostics change \u201cDiagnosis\u201d to \u201cRetrieve\u201d.</li> <li>BUG-5595 Syslog has a high number of entries for snuc-sdkvm discovery_appliance Failed to match Mgr MAC, not updating -grIP</li> <li>BUG-5479 Power users are not planned to be granted access to settings hence they will not be able to configure their -orkspace htkeys</li> </ul>"},{"location":"release_notes/sdkvm_release_notes/#release-notes-ec4","title":"Release Notes EC4","text":"<ul> <li>Version: DESKVUE_1.0.0.b8036c7</li> <li>OSD Version: V1.0.0_51</li> <li>Workspace Server Version: 1.0.0_0010</li> </ul>"},{"location":"release_notes/sdkvm_release_notes/#ec4-may-5th","title":"EC4 - May 5th","text":"<p>This is an interim release to allow Alex progress with testing while we wait for OSD fixes and some critical bug fixes</p>"},{"location":"release_notes/sdkvm_release_notes/#features_2","title":"Features","text":"<ul> <li>It will be possible to mute audio on a per tile level.</li> <li>Full audio per tile control and integration</li> <li>It will be possible to select the desired audio interfaces on the SNUC hardware through th OSD.</li> <li>The SDKVM will provide informative and appropriate messaging for any connection failure or connection loss.</li> <li>The System will support complete backup and restore to a thumb drive.</li> <li>The System will support the retrieval of minimal diagnostic information and log files using a thumb drive. These diagnostics are encoded and can be decoded offline using a decoding utility.</li> <li>Complete system lockdown available, but no bios or hard disk encryption is supported at this point.</li> <li>Hotkeys are managed locally with the ability to associate workspaces to hot-keys by an admin user. These mappings will allow users launch workspaces from mapped hot keys.</li> <li>Connections launch reliably from the OSD.</li> <li>Connections launch reliably from the Hot Keys.</li> <li>Connections can run on an extended soak without freezing or dropping.</li> <li>The system can be discovered and managed by Boxilla, and it will also be possible to make connections to managed transmitters, but Boxilla cannot be used to create connections and workspaces or to otherwise configure the SDKVM.</li> <li>An Admin user can create workspaces and assign hot keys on a managed system.</li> <li>It will be possible to perform a basic upgrade of the system from a Thumb drive.</li> <li>It should be possible to set the keyboard locale from the OSD login screen.</li> <li>It should be possible to reboot the SDKVM from the OSD.</li> <li>It should be possible to restore the system to factory defaults.</li> <li>It should be possible to assign either DHCP or Static IP and have this persist through a reboot.</li> <li>It should be possible to mute and unmute audio globally through a hot key (Windows +m, windows + u)</li> <li>It should be possible to bring up the tile overlay controls for all tiles by pressing windows + b.</li> <li>An administrative user can create connections and workspaces and assign these to another standard user.</li> <li>The system supports the configuration, hot swaping and reconfiguration of monitors.</li> <li>Changes in the monitor configuration are propagated to existing workspaces.</li> <li>Tile locations are calculated dynamically on launch by translating the virtual positioning system into actual screen co-ordinates.</li> <li>Any additional support required for bios protection, system lock down and security.</li> <li>Support for encrypted upgrade packages are introduced in this release.</li> </ul>"},{"location":"release_notes/sdkvm_release_notes/#not-supported-in-ec4","title":"Not supported in EC4","text":"<ul> <li>Leostream broker is not supported due to an inability to test and lack of a detailed formal specification or user scenarios.</li> <li>The SDKKVM can be discovered and managed by Boxilla. It will also be possible to make connections to managed transmitters, but Boxilla cannot be used to create connections and workspaces or to otherwise configure the SDKVM.</li> <li>The system does not support logins authenticated by Boxilla.</li> <li>No Login and Logout events are sent to Boxilla.</li> <li>The System will not support the retrieval of minimal diagnostic information and log files over Boxilla.</li> <li>It will not be possible to upgrade the system from Boxilla.</li> <li>Extended Desktop is not supported on any connection type.</li> <li>Boxilla cannot retrieve statistics from the SDKVM.</li> </ul>"},{"location":"release_notes/sdkvm_release_notes/#limitations_2","title":"Limitations","text":"<ul> <li>The designated hotkey is the windows key and cannot be changed in this version.</li> <li>Only horizontal placement of workspaces is supported in this release. Support for vertical placement will be supported in subsequent releases.</li> <li>On the SDKVM we current cannot have a total pixel width or height over 16384 x 16384 this means than when using a 5K monitor the maximum resolutions that can be use is:</li> <li>1x Monitor at 5120x2160</li> <li>2x Monitors at 3840x2160</li> <li>1x Monitor at some resolution less than 3584 pixels wide.</li> <li>DNS resolution of connection names does not work reliably.</li> </ul>"},{"location":"release_notes/sdkvm_release_notes/#known-issues_2","title":"Known Issues","text":"<ul> <li>There are a number of open OSD issues: https://bboxjira.atlassian.net/issues/?filter=10776</li> <li>There are ongoing usability issues with the OSD, for example, some buttons do not respond on a first click.</li> <li>There are performance variations from one system to another in FPS.</li> <li>Boxilla may not be able to manage Units: https://bboxjira.atlassian.net/browse/BUG-5480</li> </ul>"},{"location":"release_notes/sdkvm_release_notes/#bugs-resolved-in-this-release_2","title":"Bugs Resolved in this Release","text":""},{"location":"release_notes/sdkvm_release_notes/#osd-bugs","title":"OSD Bugs","text":"<ul> <li>BUG-5529 Connections are not loaded on reboot or user logout/login</li> <li>BUG-5519 OSD: Latest OSD code does not allow an admin user to allocate workspaces to hotkeys</li> <li>BUG-5309 OSD sometimes fails to accept admin password</li> <li>BUG-5523 SDKVM Upgrade failed, if done through filesystem location.</li> <li>BUG-5476 [SDKVM] Reboot required after software upgrade</li> <li>BUG-5471 Failure message for upgrade is grammatically incorrect</li> <li>BUG-5468 Clarification of what different users types can see</li> <li>BUG-5463 Add a save as option to workspace as a means of cloning an existing workspace</li> <li>BUG-5459 Changes required to Connections Screen</li> <li>BUG-5410 OSD: Settings -When Audio Interface setting \"Digital Stereo (HDMI)\" is active the DeskVue fails to output audio</li> <li>BUG-5382 OSD: Settings -Audio interface selection needs an accompanying volume level control (to control reference system level)</li> <li>BUG-5380 OSD: Workspaces -Unable to fully present workspace for editing to the user due to incorrect grey area</li> <li>BUG-5357 OSD: Network -Post factory reset incorrect warning about No Network is given and also DHCP mode is incorrectly shown as active</li> <li>BUG-5216 OSD: Connections -When audio is enabled present a cascaded radio menu below the option to select between 3.5mm Audio and USB Audio</li> <li>BUG-5507 OSD: System -Shutdown system option does not give feedback that it's in progress in Settings and Management</li> <li>BUG-5501 OSD: Display -Connected Interface and Details fields are a different font size to the rest of the screen fields</li> <li>BUG-5467 Cancel button on users screen appears to have no purpose</li> <li>BUG-5452 OSD: Auto Launch Workspace doesn't work</li> <li>BUG-5446 OSD: Welcome screen is still accessible via redundant buttons on the Connections, Workspaces and Users screens</li> <li>BUG-5443 OSD: Update names of tile templates to be more consistent in both the templates and workspaces screens</li> <li>BUG-5435 OSD: Settings -System Volume should be adjustable without requiring the use of the save button</li> <li>BUG-5427 OSD: Users -Settings hotkeys for audio control should be listed</li> <li>BUG-5425 OSD: Display -Cancel button loads a welcome screen</li> <li>BUG-5403 Login button is active even when no username or password has been entered</li> <li>BUG-5384 OSD: Network -If the retry option is successful then network settings should be automatically populated / displayed</li> <li>BUG-5383 OSD: Network -If the non supported interface port is connected recommend disabling all options on the network config screen</li> <li>BUG-5300 OSD: Network -No network detected and non supported interface messages need to be displayed alternatively and not togther</li> <li>BUG-5273 OSD: Intermittently the OSD fails to responds to clicks on buttons</li> <li>BUG-5121 OSD: Network Settings -Current network settings should always be viewable regardless of the active state of the network interface</li> <li>BUG-4751 OSD: Info -MAC is blank if network is disconnected</li> <li>BUG-5487 OSD: Network -Makes more sense for the DHCP on / off toggle to be located at the top before the network fields are listed instead of been placed at the bottom</li> <li>BUG-5352 OSD: Settings -OSD operations functionality (options) should be relocated to the System menu</li> <li>BUG-5469 An Admin user should be able to allocate connections and workspaces to other users.</li> <li>BUG-5462 Remove the Refresh and Close buttons on the Workspaces screen</li> <li>BUG-5434 OSD: Recommend adjusting the ordering of the logout options</li> <li>BUG-5433 OSD: System -Recommend providing field which confirms upgrade file path in system update section</li> <li>BUG-5376 OSD: User feedback is required when the shutdown option on the login screen is selected</li> <li>BUG-5375 OSD: Recommend moving \"Reboot Receiver\" option from Settings menu to login screen for consistency</li> <li>BUG-5313 OSD: Display -Recommend changing primary display selection from toggle button to tick box</li> <li>BUG-5141 OSD: System -Recommend Information section is updated to present a gestalt (overall) version number</li> <li>BUG-5058 OSD: Workspaces -Detected displays black background meaning for a particular screen?</li> <li>BUG-5430 OSD: Is it optimal to have the keyboard layout set per user with no ability to set it on the system level for e.g. the login screen?</li> <li>BUG-5464 Inactivity timers should be global, non-functional timers should be dropped in this release, but remain in the setting files</li> </ul>"},{"location":"release_notes/sdkvm_release_notes/#client-bugs","title":"Client Bugs","text":"<ul> <li>BUG-5359 Clients not positioning as requested</li> <li>BUG-5512 OSD: Mute hotkey failed to work for RDP connections in workspace</li> <li>BUG-5496 RDP Connections: Audio became unmuted during overnight soak</li> <li>BUG-5390 OSD: Maximise button in title bar does not work for active connections</li> <li>BUG-5346 PCoIP Client: client not timing out when network connection went down while launching connection</li> <li>BUG-5331 RDP Client - PCOIP Client: Connections may take an extended period to terminate (dangling effect of 10 - 30 seconds)</li> <li>BUG-5302 OSD: Workspaces -Seven tiles across two screens template doesn't display correctly</li> <li>BUG-5301 OSD: Workspaces -One tile on all screens template doesn't display correctly with the spanning across all screens not been complete</li> <li>BUG-5138 KVM Client: When a tile defined with a TX connection cannot establish due to the TX not responding then the tile closes with no error message</li> <li>BUG-5450 Option to display statistics on tiles should be a command line option to the client. By default we should not provide the option on the tile to display statistics</li> <li>BUG-5440 Look at options to minimise the delay in starting audio connection on the SDKVM</li> <li>BUG-5312 Enhancement: Support for new device types</li> </ul>"},{"location":"release_notes/sdkvm_release_notes/#workspace-server-bugs","title":"Workspace Server Bugs","text":"<ul> <li>BUG-5540 OSD: Title bar close button doesn't clear the terminate status for active connections in the Connections screen</li> <li>BUG-5419 OSD: Settings -After restarting OSD the DeskVue became unmanaged</li> <li>BUG-5397 OSD: Failed to execute child process permission denied while attempting use reposition hotkey resulted in shared KVM connections dropping on both the DeskVue and</li> <li>BUG-5372 OSD not reflecting status of connections accurately</li> <li>BUG-5369 OSD: Users -Settings: Unable to trigger workspaces assigned to hotkeys 9 and 0 due to failed to execute child process error</li> <li>BUG-4588 Connections: reset to original layout hotkey does not work if a tile in a view is in full screen mode</li> <li>BUG-5426 OSD: Users -Recommend implementing hotkeys for persistently showing the tile hotspot widget</li> </ul>"},{"location":"release_notes/sdkvm_release_notes/#monitor-management-bugs","title":"Monitor Management Bugs","text":"<ul> <li>BUG-5086 OSD: Monitor detect function does not work reliably</li> <li>BUG-5354 OSD: Display -Post reboot no screens are been presented for configuration thus unable to configure display settings</li> <li>BUG-5478 After upgrading and reboot I tried to restore but the OSD stayed in a permanent restarting loop as shown in image.</li> <li>BUG-5368 OSD: Display -Black screen and partial screen after updating resolutions on two displays concurrently</li> <li>BUG-5325 OSD: Display -Dead / Empty space between refresh rate options for 5120 x 2160 resolution on 5K screen</li> <li>BUG-5323 OSD: Display -Attempting to do a subsequent resolution change after the initial resolution change results in the selected display switching to the display which is the designated OSD display</li> <li>BUG-5048 OSD: Display -Attempting to set the primary display via the OSD resulted in the background turning black on the other displays</li> <li>BUG-4860 SDKVM/Openbox sometimes fails to detect all monitors</li> <li>BUG-5432 OSD: System -Existing display configuration becomes compromised post system update</li> <li>BUG-5381 OSD: Display -If assigning primary status to screen on HDMI 1 (screen 1) then OSD incorrectly appears and stays on DP 2 (screen 2)</li> <li>BUG-5429 OSD: Display -Unable to update resolutions on multiple screens concurrently as unable to view confirmation prompt</li> <li>BUG-5392 OSD: The OSD may incorrectly display on the non primary screen after a resolution change on any attached screen</li> <li>BUG-4595 OSD: Display screen Identify button doesn't work</li> <li>BUG-5328 OSD: Connections -Launching connections seem fixed to the first screen as opposed to the designated primary screen</li> <li>BUG-5210 KVM Connections: Reset tile position hotkey leaves gap between tiles on the Y axis</li> <li>BUG-5386 OSD: Restore workspace hotkey adds an additional horizontal gap on workspaces with multiple tiles</li> <li>BUG-5076 KVM Client: Gaps on the Y axis after the end of each tile when a workspace is launched</li> <li>BUG-5314 OSD: Display -Setting the primary display to be screen 1 requires a reboot for the OSD to affect its relocation to screen</li> <li>BUG-5373 OSD: Users -OSD hotkeys of minimise and maximise OSD may cause the OSD to loose it's green highlighting as the active window</li> <li> <p>BUG-5298 OSD: Settings -Using the hotkey assigned to \"Maximise active Window\" may result in other active tiles in the the template been overlaid on the full screen Window</p> </li> <li> <p>All open bugs</p> </li> </ul>"},{"location":"release_notes/sdkvm_release_notes/#release-notes-ec3","title":"Release Notes EC3","text":"<ul> <li>Version: V1.0.0_r10003</li> <li>OSD Version: V1.0.0_45</li> <li>Workspace Server Version: 1.0.0_0010</li> </ul>"},{"location":"release_notes/sdkvm_release_notes/#ec3-march-27th-28th-march","title":"EC3 - March 27th (28th March)","text":"<p>The following functionality is supported in this release</p> <ul> <li>It will be possible to mute audio on a per tile level.</li> <li>Full audio per tile control and integration</li> <li>It will be possible to select the desired audio interfaces on the SNUC hardware through the OSD.</li> <li>The SDKVM will provide informative and appropriate messaging for any connection failure or connection loss.</li> <li>Complete System backup and restore to a thumb drive.</li> <li>The System will support the retrieval of minimal diagnostic information and log files using a thumb drive.</li> <li>Complete system lockdown available, but no bios or hard disk encryption.</li> <li>Hotkeys are managed locally with the ability to configure locally for locally provisioned users. These mappings will allow users launch workspaces from mapped hot keys.</li> <li>Workspace Restore functionality mapped to a hot key allows a user snap the workspace tiles to their original positions.</li> <li>Connections launch and terminate reliably without freezing or dropout. (still an issue with freezing)</li> <li>An Admin user can create workspaces and assign hot keys on a managed system.</li> <li>It will be possible to perform a basic upgrade of the system from a Thumb drive.</li> <li>It should be possible to set the keyboard locale from the OSD.</li> <li>It should be possible to reboot the SDKVM from the OSD.</li> <li>It should be possible to assign either DHCP or Static IP and have this persist through a reboot.</li> <li>It should be possible to mute and unmute audio globally through a hot key (Windows +m, windows + u)</li> <li>It should be possible to bring up the tile overlay controls for all tiles by pressing windows + b.</li> <li>It should be possible to centre the mouse on the first display by pressing windows + c.</li> <li>All logging is written to syslog.</li> </ul>"},{"location":"release_notes/sdkvm_release_notes/#known-issues_3","title":"Known Issues","text":"<ul> <li>KVM connections are prone to freezing. Bug 4670</li> <li>KVM connections will occasionally terminate without notice if left in a soak. Bug 5116</li> <li>The OSD fails to discover newly attached monitors or unplugged monitors or recognise changes in monitor configuration.</li> <li>There are ongoing usability issues with the OSD, for example, some buttons do not respond on a first click.</li> <li>There are performance variations from one system to another in FPS.</li> <li>On some units the network appears to go offline and requires a reboot.</li> <li>Bug 5370: Failed to init Syn/Fin response from TX while making two shared connections to the same target from the SDKVM</li> <li>Bug 5293: Discovery -Cannot discover appliance after unmanaging it</li> </ul>"},{"location":"release_notes/sdkvm_release_notes/#bugs-resolved-in-this-release_3","title":"Bugs Resolved in this Release","text":"<ul> <li> <ul> <li>BUG-5354 OSD: Display -Post reboot no screens are been presented for configuration thus unable to configure display settings</li> </ul> </li> <li> <ul> <li>BUG-5366 The keyboard setting for a given user should be stored in the users.json file</li> </ul> </li> <li> <ul> <li>BUG-5351 OSD: Settings -Restart OSD option should terminate any active connections / workspaces</li> </ul> </li> <li> <ul> <li>BUG-5326 OSD: Display -\"+\" is a refresh option presented for 3840 x 2160 resolution on a 5K screen</li> </ul> </li> <li> <ul> <li>BUG-5324 OSD: Display -Background wallpaper is not scaling correctly during resolution change</li> </ul> </li> <li> <ul> <li>BUG-5360 OSD: OSD logs should be written to syslog</li> </ul> </li> <li> <ul> <li>BUG-5342 OSD: Display -Implement an \"Accept change?\" check when applying any change (make primary or resolution)</li> </ul> </li> <li> <ul> <li>BUG-5264 OSD: Settings -Clicking the option to reset to factory defaults should prompt the user to confirm</li> </ul> </li> <li> <ul> <li>BUG-5233 OSD: Users -Settings: Workspaces should be presented alphanumerically in the drop down list when selecting workspaces for hotkey assignments</li> </ul> </li> <li> <p>All open bugs</p> </li> </ul>"},{"location":"release_notes/sdkvm_release_notes/#release-notes-ec25","title":"Release Notes EC2.5","text":"<ul> <li>Version: V1.0.0_r10003</li> <li>OSD Version: V1.0.0_43</li> <li>Workspace Server Version: 1.0.0_0010</li> </ul>"},{"location":"release_notes/sdkvm_release_notes/#ec25-march-19th","title":"EC2.5 - March 19th","text":"<p>The following functionality is supported in this release</p> <ul> <li>System auto boots to the OSD and access to the underlying operating system should not be possible.</li> <li>The default operating mode for the system is unmanaged mode.</li> <li>A user with appropriate permissions can create connections and workspaces in an unmanaged mode.Thus, an admin user can provision the system and create other users and configure connections and workspaces for other users.</li> <li>The system will support multiple users in unmanaged mode and each of these users will be able to maintain a separate connection and workspace.</li> <li>The SDKVM can be discovered and managed by Boxilla.</li> <li>System can operate in managed mode; however, there are limitations:</li> <li>Managed mode is limited to making connections to managed appliances. Users, Connections and workspaces cannot be configured through Boxilla.</li> <li>Boxilla can reboot the SDKVM over REST</li> <li>The SDKVM can respond to a Boxilla Ping</li> <li>It will be possible to configure and persist network settings through the OSD allowing the user set a static or DHCP address. (Note: Boxilla does not support DHCP operation).</li> <li>Hotkeys will support switching between workspaces, terminating workspaces, switching to previous connections and restoring workspace positions.</li> <li>Launching of workspaces and connection checks from the OSD should work reliably with connection and workspace status being reflected on the OSD launch buttons.</li> <li>The OSD should reflect the status of any current workspaces. If the workspace is terminated by a hot key then the OSD will update to reflect that change in status. The connect button will offer a termination option once the workspace is active.</li> <li>Audio should be functional on all connection types.</li> <li>It should be possible to control the audio volume by invoking the audio controls on the upper right hotspot section of a tile.</li> <li>It should be possible to mute and unmute the audio volume by invoking the audio controls on the upper right hotspot section of a tile.</li> <li>It should be possible to mute audio globally by using Windows Key + u</li> <li>It should be possible to unmute audio globally by using Windows Key + m</li> <li>It should be possible to bring up control overlays on all active tiles by using Windows Key + c</li> <li>If a connection fails the tile for that connection should provide a clear failure message in that tile space. (see known issues)</li> <li>Monitors designations, positions and resolutions can be managed through the OSD. (see known issues)</li> <li>Boxilla can unmanage the SDKVM using the REST API and remove any Boxilla related settings.</li> <li>It should be possible to restore the system to factory default settings.</li> <li>It should be possible to snapshot the SDKVM settings to a thumbdrive using the backup option and restore these on the same SDKVM or another SDKVM with similar configuration.</li> <li>It should be possible for the admin user to assign connections to other local (non-admin) users.</li> <li>It should be possible to save encrypted diagnostic logs to a thumb drive.</li> <li>Positioning of tile windows should be more consistent in this release.</li> <li>Setting static and dhcp network settings should be more reliable.</li> <li>The options available on the OSD have been scaled back after review with project management.</li> <li>Support for templates that span screens has been removed for now.</li> <li>The SDKVM supports new device types.</li> </ul> <p>Note: The upgrade function did not make it in to this release.</p>"},{"location":"release_notes/sdkvm_release_notes/#required","title":"Required","text":"<p>Boxilla 4.7.0(DeskVue) EC3 build dskv_4.7.0. build is required for testing</p>"},{"location":"release_notes/sdkvm_release_notes/#not-supported","title":"Not Supported","text":"<ul> <li>The ability to perform a basic upgrade of the system from a Thumb drive did not make this release.</li> <li>Configuration of users and connection on the SDKVM through Boxilla is not supported.</li> <li>Monitor management and hot plugging does not work consistently</li> </ul>"},{"location":"release_notes/sdkvm_release_notes/#known-issues_4","title":"Known Issues","text":"<ul> <li>KVM connections are prone to freezing. Bug 4670</li> <li>KVM connections will occasionally terminate without notice if left in a soak. Bug 5116</li> <li>The OSD fails to discover newly attached monitors or unplugged monitors or recognise changes in monitor configuration.</li> <li>There are ongoing usability issues with the OSD, for example, some buttons do not respond on a first click.</li> <li>There are performance variations from one system to another in FPS.</li> </ul>"},{"location":"release_notes/sdkvm_release_notes/#bugs-resolved-in-this-release_4","title":"Bugs Resolved in this Release","text":"<ul> <li> <p>BUG-5242 Review error messages returned from the TX</p> </li> <li> <p>BUG-5347 OSD not terminating all connections</p> </li> <li> <p>BUG-5345 OSD is incorrectly calculating the location for tiles</p> </li> <li> <p>BUG-5030 OSD: Selecting DHCP option in network settings failed to change the IP address to a DHCP address</p> </li> <li> <p>BUG-4984 Need a reliable method of setting the Keyboard local based on a saved user preference</p> </li> <li> <p>BUG-5357 OSD: Network -Post factory reset incorrect warning about No Network is given and also DHCP mode is incorrectly shown as active</p> </li> <li> <p>BUG-5334 OSD: Users -OSD inactivity timer does not trigger</p> </li> <li> <p>BUG-5333 OSD: OSD may not correctly update to reflect that workspaces and their associated connections have not terminated</p> </li> <li> <p>BUG-5262 OSD: Display -OSD not detecting removal of screen</p> </li> <li>BUG-5261 OSD: Settings -Reboot option doesn't work</li> <li>BUG-5216 OSD: Connections -When audio is enabled present a cascaded radio menu below the option to select between 3.5mm Audio and USB Audio</li> <li>BUG-5187 OSD: Launching a workspace from the OSD is significantly slower when compared to invoking the same workspace via hotkey</li> <li>BUG-5183 OSD: Workspaces remain active after the user has logged off</li> <li> <p>BUG-5174 OSD: Menu states are maintained between user logins</p> </li> <li> <p>BUG-5350 OSD: Settings -Hotkey option of \"CTRL + Windows\" should be \"Windows\"</p> </li> <li> <p>BUG-5311 Hot Keys on the settings screen shows CTRL + Shift, it should be the windows key</p> </li> <li> <p>BUG-5303 OSD: Users -Recommend changing the text of the hotkey \"Minimise OSD in the background\" to \"Terminate active connections\"</p> </li> <li> <p>BUG-5230 OSD: Fix managed status string -\"Boxilla Opearation Mode :\" to \"Boxilla Operation Mode:\"</p> </li> <li> <p>BUG-5191 OSD: Connections -Active Connections can be deleted</p> </li> <li> <p>BUG-5190 OSD: Workspaces -Active Workspaces can be deleted</p> </li> <li> <p>BUG-5131 OSD: Workspaces - If terminating a workspace via Hotkey or Tile close (X) button or automatic client termination then the terminate button does not transition back to the connect state without navigating away and then back to the Workspaces menu</p> </li> <li> <p>BUG-4716 OSD: Workspaces -If a workspace fails to launch all of its connections then the terminate button still presents itself</p> </li> <li> <p>BUG-5352 OSD: Settings -OSD operations functionality (options) should be relocated to the System menu</p> </li> <li> <p>BUG-5307 OSD: For easier tracability logs should show workspace name beside workspace ID, similar for connections</p> </li> <li> <p>BUG-5358 OSD: Workspace and Connections incorrectly showing as inactive after switching active workspace</p> </li> <li> <p>BUG-5355 OSD: The active workspaces and associated connections are not automatically terminated if directly switching to another workspace and associated connections</p> </li> <li> <p>BUG-5349 Connections: A mixed workspace of KVM, RDP and PCoIP connections do not display consistently in the correct screens</p> </li> <li> <p>BUG-5341 OSD: Display -Changing the primary display (OSD display) results in workspace launching differently if invoked via Workspace menu versus hotkey invocation</p> </li> <li> <p>BUG-5337 OSD: Network -Appliance automatically switches to DHCP network configuration after DeskVue is rebooted</p> </li> <li> <p>BUG-5322 OSD: Workspaces -Newly created workspaces do not correctly associate screens with the updated corresponding positions after the screen layout has been updated</p> </li> <li> <p>BUG-5265 OSD: Settings -Reset to factory default option need to reset the IP address to factory defaults</p> </li> <li> <p>BUG-5241 OSD: Connections -Audio does not work in RDP connections if launched on the Connections screen</p> </li> <li> <p>BUG-5231 OSD: Network -OSD enabled DHCP after using discovery to set a static network configuration</p> </li> <li> <p>BUG-5361 Occasionally seeing - failed checking vtrfx_check_transport_events() even though connection launches</p> </li> <li> <p>BUG-5353 OSD: Users -The active keyboard setting for the user should be displayed by default instead of \"Select Keyboard Layout\"\"</p> </li> <li> <p>BUG-5308 OSD: Settings -Hotkey for previous workspace doesn't do anything</p> </li> <li> <p>BUG-5304 OSD: Users -Recommend changing the text of the hotkey \"Move the mouse pointer to the first screen\" to \"Move the OSD to the next screen\"</p> </li> <li> <p>BUG-5281 OSD: Workspaces -Delay / Wait of multiple seconds after clicking button to create new workspace</p> </li> <li> <p>BUG-5284 Enhancement: Add mqtt support to allow overlays be enabled from the OSD or hotkeys</p> </li> <li> <p>BUG-5239 Mechanism for dynamically controlling audio - Enhancement</p> </li> </ul>"},{"location":"release_notes/sdkvm_release_notes/#previous-releases","title":"Previous Releases","text":""},{"location":"release_notes/sdkvm_release_notes/#release-notes-ec2","title":"Release Notes EC2","text":"<ul> <li>Version: V1.0.0_r10002</li> <li>OSD Version: V1.0.0_39</li> <li>Workspace Server Version: 1.0.0_0008</li> </ul>"},{"location":"release_notes/sdkvm_release_notes/#ec2-february-27th-1st-march","title":"EC2 - February 27th (1st March)","text":"<p>The following functionality is supported in this release</p> <ul> <li>System auto boots to the OSD and access to the underlying operating system should not be possible.</li> <li>The default operating mode for the system is unmanaged mode.</li> <li>A user with appropriate permissions can create connections and workspaces in an unmanaged mode.Thus, an admin user can provision the system and create other users and configure connections and workspaces for other users.</li> <li>The system will support multiple users in unmanaged mode and each of these users will be able to maintain a separate connection and workspace.</li> <li>The SDKVM can be discovered and managed by Boxilla.</li> <li>System can operate in managed mode; however, there are limitations:</li> <li>Managed mode is limited to making connections to managed appliances. Users, Connections and workspaces cannot be configured through Boxilla.</li> <li>Boxilla can reboot the SDKVM over REST</li> <li>The SDKVM can respond to a Boxilla Ping</li> <li>It will be possible to configure and persist network settings through the OSD allowing the user set a static or DHCP address. (Note: Boxilla does not support DHCP operation).</li> <li>Hotkeys will support switching between workspaces, terminating workspaces and restoring workspace positions.</li> <li>Launching of workspaces and connection checks from the OSD should work reliably with connection and workspace status being reflected on the OSD launch buttons. (see known issues)</li> <li>The OSD should reflect the status of any current workspaces. If the workspace is terminated by a hot key then the OSD will update to reflect that change in status. The connect button will offer a termination option once the workspace is active. (see known issues)</li> <li>Audio should be functional on all connection types.</li> <li>It should be possible to control the audio volume by invoking the audio controls on the upper right hotspot section of a tile.</li> <li>It should be possible to mute and unmute the audio volume by invoking the audio controls on the upper right hotspot section of a tile.</li> <li>If a connection fails the tile for that connection should provide a clear failure message in that tile space. (see known issues)</li> <li>Monitors designations, positions and resolutions can be managed through the OSD. (see known issues)</li> <li>Boxilla can unmanage the SDKVM using the REST API and remove any Boxilla related settings.</li> <li>It should be possible to restore the system to factory default settings.</li> <li>It should be possible to snapshot the SDKVM settings to a thumbdrive using the backup option and restore these on the same SDKVM or another SDKVM with similar configuration.</li> <li>It should be possible for the admin user to assign connections to other local (non-admin) users.</li> </ul> <p>Note: The upgrade function did not make it in to this release.</p>"},{"location":"release_notes/sdkvm_release_notes/#required_1","title":"Required","text":"<p>Boxilla version BXA 4.7.0 EC2 build is required for testing</p>"},{"location":"release_notes/sdkvm_release_notes/#not-supported_1","title":"Not Supported","text":"<ul> <li>The ability to perform a basic upgrade of the system from a Thumb drive did not make this release.</li> <li>Configuration of users and connection on the SDKVM through Boxilla is not supported.</li> </ul>"},{"location":"release_notes/sdkvm_release_notes/#known-issues_5","title":"Known Issues","text":"<ul> <li>The launch time from the OSD is very slow. Bug 5187</li> <li>KVM connections are prone to freezing. Bug 4670</li> <li>KVM connections will occasionally terminate without notice if left in a soak. Bug 5116</li> <li>Discovery service may fail on boot up or be left in an unstable state. Bug 5163</li> <li>The OSD fails to discover newly attached monitors or unplugged monitors or recognise changes in monitor configuration.</li> <li>There is an issue in the workspaceserver queue that causes status updates to OSD buttons to fail in certain circumstances.</li> <li>There are ongoing usability issues with the OSD, for examples, new workspace screen is very slow to load, some buttons do not respond on a first click, the OSD occasionally fails to render unless given the focus.</li> <li>There are considerable performance variations from one system to another in FPS.</li> </ul>"},{"location":"release_notes/sdkvm_release_notes/#bugs-resolved-in-this-release_5","title":"Bugs Resolved in this Release","text":"<ul> <li>5165 Attempt to discover SDKVM device failed</li> <li>5112 Discovery service fails to reliably start on boot up from autostart.sh script</li> <li>5224 OSD: Display -Need ability to configure the resolution and refresh rates of detected screens</li> <li>5030 OSD: Selecting DHCP option in network settings failed to change the IP address to a DHCP address</li> <li>5160 Discovery: DeskVue failing to be discovered despite DeskVue discovery service confirmed as running</li> <li>5175 RDP Client: RDP connection failed overnight (terminated by itself)</li> <li>5266 OSD: Settings -Hotkeys for workspaces are non functional</li> <li>5265 OSD: Settings -Reset to factory default option need to reset the IP address to factory defaults</li> <li>5228 RDP Connections: Unable to terminate RDP connections via workspace termination hotkey</li> <li>5221 OSD: Connections -Audio does not function if connections are launched in the Connections section</li> <li>5209 KVM Connections: Reset tile position hotkey does not respond if the active workspace was invoked via favourites hotkey   SDKVM SDKVM KVM Client 27/Feb/23 Always RESOLVED</li> <li>5208 KVM Client: Connection names only appear if the tile window has the control focus</li> <li>5203 OSD: Settings update required to reflect support for Boxilla management of DeskVue</li> <li>5181 RDP Client: major video tearing occurring when streaming video from RDP connections</li> <li>5168 OSD: Workspaces -Terminate option been presented for a workspace which was already terminated</li> <li>5138 KVM Client: When a tile defined with a TX connection cannot establish due to the TX not responding then the tile closes with no error message</li> <li>5099 OSD: Workspaces -Unable to launch DNS connections after overnight soak</li> <li>5073 OSD: Settings -None of the hotkeys work</li> <li>5053 OSD: Workspaces - Terminate button fails to terminate active workspaces</li> <li>5051 OSD: Connections -Terminate button fails to terminate the connection if the is connection launched via the Check button</li> <li>4723 OSD: Settings -Using the hotkeys assigned to minimise and maximise the OSD may result in non primary screens and tiles on non primary screens going black</li> <li>4588 Connections: reset to original layout hotkey does not work if a tile in a view is in full screen mode</li> <li>5227 User hot key mappings in the user settings section are incorrect</li> <li>5079 OSD: Workspaces when editing workspaces you're unable to separate screens which were initially assigned to a spanning template</li> <li>5185 OSD: Tile restore hotkey fails to work if workspace was triggered via hotkey</li> <li>5119 KVM Client: Dynamic options bar for connections may not align correctly in the centre if tile goes full screen</li> <li>4845 Check button on Connection screen always selects port 3389 for a GE connection</li> <li>4575 SDKVM: add support for special characters in passwords for RDP and PCoIP connections</li> <li>5178 OSD: Welcome message post login always says \"Hello, admin\" regardless of which user logged in</li> <li>5078 OSD: Text in dropdown options is truncated on all menus if the OSD is running on a 5K Screen (5120 x 2160)</li> <li>4751 OSD: Info -MAC is blank if network is disconnected</li> <li>5199 OSD: Recommendation -Make the tile hotspot widget easier to summon</li> <li>5257 PCoIP Client: Connection failed to launch</li> </ul>"},{"location":"release_notes/sdkvm_release_notes/#outstanding-bugs","title":"Outstanding Bugs","text":"<ul> <li>All SDKVM Bugs</li> </ul>"},{"location":"release_notes/sdkvm_release_notes/#previous-releases_1","title":"Previous Releases","text":""},{"location":"release_notes/sdkvm_release_notes/#release-notes-ec1","title":"Release Notes EC1","text":"<ul> <li>Version: V1.0.0_r10001</li> <li>OSD Version: V1.0.0_30</li> <li>Workspace Server Version: 1.0.0_0005</li> </ul>"},{"location":"release_notes/sdkvm_release_notes/#ec1-january-31st","title":"EC1 - January 31st","text":"<p>The following functionality is supported in this release</p> <ul> <li>System auto boots to the OSD</li> <li>System can operate in unmanaged mode or managed mode (Managed mode is limited to making connections to managed appliances only, there is no Boxilla configuration or provisioning of connections and users)</li> <li>A user with appropriate permissions can create connections and workspaces in an unmanaged SDKVM device.</li> <li>The SDKVM can be discovered by Boxilla.</li> <li>The SDKVM can be managed by Boxilla. (but does not support Boxilla provisioned connections). It will copy the XML file (but not use it), place a Boxilla token on SDKVM, change IP address to a static IP.</li> <li>Boxilla can reboot the SDKVM over REST</li> <li>Boxilla can retrieve Product Details over REST</li> <li>Boxilla can manually manage a SDKVM without having to depend on the discovery protocol.</li> <li>The SDKVM can respond to a Boxilla Ping</li> <li>The system will support multiple users in unmanaged mode and each of these users will be able to maintain a separate connection and workspace.</li> <li>It will be possible to configure and persist network settings through the OSD allowing the user set a static or DHCP address. (Note: Boxilla does not support DHCP).</li> <li>Hotkeys are managed locally but there functionality will be limited to terminating connections. (Launching workspaces through a hot key will not be supported)</li> <li>A user can launch workspaces based on pre-provisioned connections from the OSD workspace screen.</li> <li>The OSD reflects the status of any current workspaces. If the workspace is terminated by a hot key then the OSD will update to reflect that change in status. The connect button will offer a termination option once the workspace is active.</li> <li>Boxilla can retrieve information for a version compatibility check.</li> <li>If a connection fails the tile for that connection should provide a clear failure message in that tile space.</li> </ul>"},{"location":"release_notes/sdkvm_release_notes/#required_2","title":"Required","text":"<p>Boxilla version BXA 4.7.0 EC1 build is required for testing</p>"},{"location":"release_notes/sdkvm_release_notes/#not-supported_2","title":"Not Supported","text":"<ul> <li>No audio support in this release.</li> <li>Configuration of users and connection on the SDKVM through Boxilla is not supported.</li> <li>It is not possible to launch Workspaces from hot keys</li> </ul>"},{"location":"release_notes/sdkvm_release_notes/#known-issues_6","title":"Known Issues","text":"<ul> <li>The OSD performance is very poor</li> <li>The monitor detection and configuration logic is not working reliably from the OSD</li> <li>Hot key mapping and hot key binding is not functional</li> <li>Connections to GE are not functional</li> <li>KVM connections are prone to freezing</li> <li>KVM connections will occasionally terminate without notice if left in a soak</li> <li>The OSD does not always reflect the workspace status in a timely manner</li> <li>The underlying OS is exposed by right clicking on the desktop</li> <li>Discovery service mail fail on boot up</li> <li>Disconnecting and reconnecting the network cable will break cause the discovery service to malfunction</li> <li>DNS for connections is not working due to an inability to set DNS on the network interfaces page.</li> </ul>"},{"location":"release_notes/sdkvm_release_notes/#bugs","title":"Bugs","text":"<ul> <li>All SDKVM Bugs</li> </ul>"},{"location":"release_notes/summary/","title":"Emerald Release Notes","text":"<p>This section contains release notes for Emerald Software releases to system test, see the index on the left for a list of release versions.</p>"},{"location":"release_notes/summary/#generation-of-release-notes","title":"Generation of Release notes","text":"<p>Release notes are generated using the <code>release_notes.py</code> script in the embedded documentation repository located here <code>docs/release_notes/release_notes.py</code>. The generated release notes are placed in the <code>release_notes</code> folder with the format <code>VX_X_X_RELEASE_NOTES.md</code>.</p> <pre><code>usage: release_notes.py [-h] -b BRANCH -v VERSION\n\nScript to create or append Release notes\n\n#Note this says optional due to a quirk of python argparse they are \n#in fact both required and the app will complain if not provided\noptional arguments:\n  -h, --help            show this help message and exit\n  -b BRANCH, --branch BRANCH\n                        Branch the build belongs to\n  -v VERSION, --version VERSION\n                        Full Version Number in the format X.X.X_rXXXXX\n</code></pre> <p>If there are existing release notes in the folder then the new information is appended to the top of the document. After the notes have been created the tech lead will need to fill in the missing information from the file and commit the changes. If this is the first entry in the release they will also need to add the markdown file to the page tree in the <code>mkdocs.yml</code> file.</p>"},{"location":"release_notes/summary/#release-notes-template","title":"Release notes template","text":"<p>The generation script will add the correct version number, source branch and resolved issues to the notes, the user will have to fill in any extra details. Resolved bug details are retrieved using ask_jira</p>"},{"location":"release_notes/summary/#fpga-versions","title":"FPGA Versions","text":"<p>The FPGA versions need to be added to the release notes (by hand). These can be generated by running the following from Buildroot of the corresponding branch using the <code>copy-fpga-release</code> command. (For more information on the <code>copy-fpga-release</code> command, see Upgrade USBIP ).</p> <p>First, check the status of the FPGA images with the command: </p> Verify the files are consistent and up-to-date<pre><code>./run copy-fpga-release --status\n</code></pre> <p>And then (after accounting for warnings in the <code>status</code> output) generate the FPGA release table with:</p> Generate Verbose FPGA release table (with buildroot files and FPGA_Project_Dir files)<pre><code>./run copy-fpga-release --release-notes\n</code></pre> Generate 'terse' FPGA release table (with only FPGA_Project_Dir files)<pre><code># Only run this after verifying the output of --status!\n./run copy-fpga-release --release-notes | grep -Ev \"(hdf)|(bin)\"\n</code></pre>"},{"location":"release_notes/summary/#notes","title":"NOTES:","text":"<ul> <li>The above command should be run from Buildroot - for example from: <code>.../Buildroot_emeraldpe_decoder/buildroot-2017.02.4/</code></li> <li>\u26a0 Before generating the FPGA Version list:<ul> <li>make sure you do an <code>svn update</code> in the <code>.../Buildroot_emeraldpe_decoder directory/</code> (i.e. include the 4K <code>.../boot/hdf/...</code> folders in the <code>svn update</code>)</li> <li>make sure you do an <code>./run copy-fpga-release --status</code> to check for locally modified or updated FPGA files in svn or FPGA folders.</li> </ul> </li> <li>Check the list of Fixed bugs in the release notes - Last time I ran through this process, there was a missing bug in the generated list</li> <li>Use the <code>blackbox_cli</code> to copy the images for the boards to the Release Directory</li> </ul>"},{"location":"release_notes/summary/#regeneration-of-notes","title":"Regeneration of Notes","text":"<p>If notes need to be regenerated for a particular release then the user will need to perform some manual intervention. Currently they will need to delete the last entry to the notes and rerun the <code>release_notes.py</code> script this will recreate the release note entry for that release.</p>"},{"location":"technologies/Artifical_intelligence/","title":"AI Application to Blackbox Technologies","text":"<ol> <li>Log file Analysis: We collect a lot of information in logs and event capture that could be analysed to generate actionable information. An Machine Learning approach could be used to extract patterns in our data that may server a predictive purpose. Knowing perhaps that something is degrading or likely to fail or perhaps revealing unusual behaviours or patterns of intrusion</li> <li>Threat Detection: The application here would focus on a number of areas: One such area would be analysis of USB data for threat detection. You mentioned you had seen some research in this area. If you have something relevant then please pass it on.</li> <li>Human Interaction Analysis: We could use Video or Keystroke Analysis for detection of  changes in a user\u2019s behaviour or attention. The goal here would be to learn patterns of usage and then identify characteristics that might indicate things like user fatigue or perhaps patterns of intrusion.</li> </ol>"},{"location":"technologies/technologies_for_osd/","title":"Common OSD","text":""},{"location":"technologies/technologies_for_osd/#problem-statement","title":"Problem Statement","text":"<p>We are using different GUI/OSD technologies across our products. This creates confusion amongst our users and branding inconsistency.</p> <p>It would be useful to unify UI development using one language so that we can start to share resources and development efforts across platforms.</p> <p>It would be beneficial to have a common style across our interfaces and consistent style guidelines for all products.</p>"},{"location":"technologies/technologies_for_osd/#current-implementations","title":"Current Implementations","text":"<ul> <li>Remote App: C# based widget implementation.</li> <li>SDKVM: Flutter/Dart based implementation.</li> <li>Appliances: QT4/C ++ implementation.</li> </ul>"},{"location":"technologies/technologies_for_osd/#evaluation-strategy","title":"Evaluation Strategy","text":"<ul> <li>Evaluate Dart on an embedded device like the Raspberry PI to assess performance. - JO'S</li> <li>Investigate the state of Dart/Flutter on Mac devices. - Niall</li> <li>Try to get an evaluation version of Crank Software that would run directly on our platform. - Prasad</li> <li>Assess the state of  Flutter/Dart on embedded devices - JO'S, Micheal</li> <li>Identify a resource to create a branding style, graphical assets and style guide. - John Hickey</li> <li>Identify suitable Mac Models for evaluation. - Micheal</li> </ul>"},{"location":"wsl2/docker-bb-buildroot/","title":"docker-bb-buildroot","text":"<p>Docker image for building the blackbox emerald recievers and transmitters.</p>"},{"location":"wsl2/docker-bb-buildroot/#cloning-the-repo","title":"Cloning the Repo","text":"<p>The image is currently hosted on github, to get access create a github account with your blackbox email and request access to the following organisation <code>blackbox-rnd</code>.</p> <p>The above repo includes an up to date README that will continue the setup.</p>"},{"location":"wsl2/setup_guide/","title":"Setup WSL2 on Windows","text":""},{"location":"wsl2/setup_guide/#intro","title":"Intro","text":"<p>Windows Subsystem for Linux (WSL) is a compatibility layer for running Linux binary executables (in ELF format) natively on Windows.</p>"},{"location":"wsl2/setup_guide/#installation","title":"Installation","text":"<p>Warning</p> <p>You must have pcadmin access to your machine before you can follow this guide</p> <p>Before installing WSL it is recommended to first install Windows Terminal install guide.</p> <p>The following link provides an up to date guide to install WSL on your windows laptop install guide. The default distribution is Ubuntu it is recommended to use this.</p>"},{"location":"wsl2/setup_guide/#getting-the-network-to-work-with-vpn","title":"Getting the Network to work with VPN","text":"<p>To get the network working correctly you may have to run the following commands. Check if you can ping an external IP to see if you need to run this.</p> <pre><code>ifconfig eth0 netmask 255.255.240.0\nip route add default via &lt;WSL ethernet address&gt;    \n</code></pre> <p>These commands have been taken from the following link.</p> <p>WSL also has some issues when working with VPNs to allow network access you will need to make some configuration changes. First you will need to disable automatic generation of the <code>/etc/resolv.conf</code> file you can do this by modifiying the file <code>/etc/wsl.conf</code> with the following code</p> Disable resolv.conf generation<pre><code>[network]\ngenerateResolvConf = false\n</code></pre> <p>When you make this change the <code>resolve.conf</code> file will be a dangling symlink to <code>/run/resolvconf/resolv.conf</code>, remove resolve.conf then recreate it and add the following to it</p> <pre><code>nameserver 1.1.1.1\n</code></pre>"},{"location":"wsl2/setup_guide/#mount-nas-drives","title":"Mount NAS Drives","text":"<p>To mount the nas drives you must first install the NFS client package with the following command</p> <pre><code>sudo apt install nfs-common\n</code></pre> <p>Next create the mount points</p> <pre><code>sudo mkdir /tftpboot /projects /shared_area\n</code></pre> <p>Now mount the drives</p> <pre><code>sudo mount -o nolock 10.211.128.208:/data/projects /projects\nsudo mount -o nolock 10.211.128.208:/data/tftpboot /tftpboot\nsudo mount -o nolock 10.211.128.208:/data/shared_area /shared_area\n</code></pre> <p>You can add the folders to <code>/etc/fstab</code> to automatically mount the drives on boot. Add the following to <code>fstab</code></p> <pre><code>10.211.128.208:/data/tftpboot/ /tftpboot nfs defaults 0 0\n10.211.128.208:/data/shared_area /shared_area nfs defaults 0 0\n10.211.128.208:/data/projects /projects nfs defaults 0 0\n</code></pre>"},{"location":"wsl2/setup_guide/#installing-docker","title":"Installing Docker","text":"<p>The following commands will install Docker CE on Ubuntu and set it to run automatically. The below commands have been taken from the offical docker docs (link)</p> Ensure pre-requisites are installed<pre><code>sudo apt-get update\nsudo apt-get install apt-transport-https ca-certificates curl gnupg lsb-release\n</code></pre> Add Docker\u2019s official GPG key<pre><code>sudo mkdir -p /etc/apt/keyrings\ncurl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /etc/apt/keyrings/docker.gpg\n</code></pre> Adds docker apt repository<pre><code>echo \"deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable\" | sudo tee /etc/apt/sources.list.d/docker.list &gt; /dev/null\n</code></pre> Install Docker Engine<pre><code>sudo apt-get update\nsudo apt-get install docker-ce docker-ce-cli containerd.io docker-compose-plugin\n</code></pre> <pre><code># Ensures docker group exists\nsudo groupadd docker\n\n# Ensures you are part of it\nsudo usermod -aG docker $USER\n\n# Now, close your shell and open another for taking the group changes into account\n</code></pre> <p>If you are running Ubuntu 22.04, you will also need to run the following command:</p> <pre><code>sudo update-alternatives --set iptables /usr/sbin/iptables-legacy\n</code></pre> <p>Make Docker Daemon start on WSL initialization:</p> <p>If you are running Windows 11, you can use a brand-new feature of WSL to start the Docker Daemon during the initialization. You only need to add:</p> <pre><code>[boot]\ncommand = \"service docker start\"\n</code></pre> <p>To your /etc/wsl.conf within your WSL distribution. Then, restart it with wsl.exe --shutdown. To verify that it works, you can run docker version. If you do not receive any permission denied error, you are good.</p> <p>But if you are not running Windows 11, you can achieve a similar result with the following approach:</p> <p>Open the ~/.profile (or ~/.zprofile if you are using ZSH rather than Bash) in your WSL distribution, and add a section like so to it:</p> <pre><code>if service docker status 2&gt;&amp;1 | grep -q \"is not running\"; then\n    wsl.exe -d \"${WSL_DISTRO_NAME}\" -u root -e /usr/sbin/service docker start &gt;/dev/null 2&gt;&amp;1\nfi\n</code></pre> <p>This piece of code will run every time you open a new shell on your WSL distribution. It checks whether the Docker Daemon is running, and if not, starts it without prompting for credentials. Without any noticeable delay.</p> <p>To verify, after making the changes, open a new shell and run the docker version command. If you do not receive any permission denied error, you are good.</p>"},{"location":"wsl2/setup_guide/#reference-links","title":"Reference Links","text":"<p>The following are a list of videos/links that discribe some potential workflows of working with WSL on windows for Linux development.</p> <ul> <li>Developing on Windows with WSL2 (Subsystem for Linux), VS Code, Docker, and the Terminal</li> <li>Windows 11 runs Graphical Linux Apps out of the box with WSLg</li> <li>Connecting USB devices to WSL on Windows with usbipd-win for Linux IoT device support!</li> <li>Scott Hanselman - Developing for Linux on Windows - NDC Porto 2022</li> <li>Connect to Serial Port on Windows 10 with WSL</li> </ul>"}]}